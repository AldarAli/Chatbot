Context-aware Indoor-Outdoor Detection for Seamless Smartphone Positioning
Niklas Kroll, Michael J¨ager, Sebastian S¨uß
Institute of Software Architecture
Technische Hochschule Mittelhessen – University of Applied Sciences
Gießen, Germany
Email: {niklas.kroll, michael.jaeger, sebastian.suess}@mni.thm.de
Abstract—Localization for smartphones typically relies on
distinct approaches for indoor and outdoor contexts, since
the Global Positioning System (GPS), which is typically used
outdoors, does not perform well within buildings. A localization
system
supporting
both
needs
to
detect
indoor-outdoor
transitions automatically in order to provide seamless operation
across the different contexts. This paper proposes a transition
detection method that combines GPS signal evaluation with
a GPS-less sensor-based machine-learning scheme in order to
provide maximal accuracy, reliability and adaptability to new
environments without unneccesary power consumption.
Keywords–IO Detection; Smartphone Positioning; Indoor Posi-
tioning; Seamless Transition; Context-aware Computing
I. INTRODUCTION
Location-aware mobile applications need capabilities for
determining the current position of a mobile device. Smart-
phone positioning in outdoor areas typically relies on Global
Navigation Satellite Systems (GNSS) such as the Global
Positioning System (GPS). Numerous indoor solutions have
been proposed in the last few years, e.g., hybrid methods that
fuse WiFi ﬁngerprinting with sensor-based Pedestrian Dead
Reckoning (PDR).
Accurate indoor localization methods typically rely on some
infrastructure. WiFi ﬁngerprinting, e.g., leverages a radio map
that contains a large set of locations with associated Received
Signal Strength Indication (RSSI) values for a set of WiFi
access points. In order to determine the current position, the
radio map is scanned for a location with a signal strength
proﬁle similar to that of the current location. Other methods
utilize the information contained in building models, e.g., the
positions of doors, walls, stairs, etc.
Whereas most recent publications propose indoor-only solu-
tions, the problem of suitably combining indoor and outdoor
positioning, e.g., for pedestrian navigation, has deserved far
less attention. Larger areas comprising outdoor ranges as well
as several buildings, e.g., company premises, will typically be
heterogeneous in the sense that a single indoor positioning
method which is suitable for one building might not be
applicable in another that lacks the required infrastructure. As
a consequence, an appropriate localization system has to in-
corporate multiple indoor positioning methods. In [1], a multi-
scheme approach was presented that supports multiple outdoor
and indoor positioning methods with seamless transitions. A
crucial problem is to detect automatically that a localization
method switch is necessary. Moreover, detection should be
energy-efﬁcient and without considerable delay.
An important prerequisite for multiple scheme support is
the reliable recognition of indoor-outdoor transitions, which
is referred to as Indoor-Outdoor (IO) detection in this paper.
The rest of this paper is organized as follows. After pre-
senting related work in Section II, the proposed IO detection
system is explained in Section III. In Section IV, we describe
the current state of an implementation and the remaining tasks.
Finally, Section V reviews some beneﬁts and shortcomings of
the presented approach, open problems, and future research
plans.
II. RELATED WORK
Using GPS signal strength changes as an indicator for IO
transitions is proposed in [2]. Alternatively, the signal-to-noise
ratio (SNR) of the GPS signal can be observed, as proposed in
[3]. However, continuously searching for GPS signals within
buildings will drain the battery quickly. Moreover, the method
might be unreliable and inaccurate if the signal is weak, which
can occur outdoors as well as indoors, e.g., near a building
entrance.
In order to save energy, other approaches try to avoid GPS
usage and rely on a restricted set of less power-consuming
smartphone sensors only, e.g., for ambient light, cell signal,
or magnetic ﬁeld. Whereas IO detection according to Zhou
et al. is based on checking the sensor values cross empirically
determined ﬁxed thresholds [4], Radu et al. show that a semi-
supervised machine learning approach [5] provides a much
better adaptability to different environments.
III. PROPOSED IO DETECTION SYSTEM
This chapter describes an advanced IO detection system
that is expected to provide fast and reliable context detection
without unneccessary power consumption. In the multi-scheme
approach proposed by J¨ager et al., a three-level positioning
architecture is described, where the top-level algorithm, called
Coarse Positioning System (CPS), is responsible for context
transition detection and appropriate selection of lower-level
localization schemes, e.g., GPS- or WiFi-based. An important
property of this system is its context-awareness. Except in
the inititialization phase, positioning always uses exactly one
scheme, which is the most appropriate for the current location.
For example, in outdoors mode, a GPS-based hybrid scheme
is selected, also utilizing PDR for better accuracy.
106
Copyright (c) IARIA, 2016.     ISBN:  978-1-61208-469-5
GEOProcessing 2016 : The Eighth International Conference on Advanced Geographic Information Systems, Applications, and Services

Supposed that at some location GPS is switched on anyway,
e.g., for navigation, leveraging the available signals addition-
ally for IO detection will not impact power consumption. On
the other hand, if WiFi ﬁngerprinting is used in a building, IO
detection reliability can beneﬁt from considering changes of
RSSI values without extra battery drain.
Extending the machine-learning approach of [5], context-
aware IO detection is not conﬁned to some basic standard
sensors, but also incorporates and extends the GPS signal
evaluation approaches of [2] and [3] in order to provide the
highest possible accuracy at no additional cost with respect to
battery life.
Two independent sets of sensor values are used as classiﬁers
in a co-training scheme. After an initial supervised ofﬂine
training phase, unsupervised learning supplies each classiﬁer
with further training data consisting of the labels from the
other classiﬁer. The basic data sources include light intensity,
cell signal strength, battery temperature, sound amplitude,
time, proximity sensor and magnetic ﬁeld.
In the outdoor context, the classiﬁer contains also the num-
ber of GPS satellites in reach, the signal-to-noise ratio (SNR)
of the GPS signal, and the angles of visible GPS satellites.
If a sufﬁciently strong signal can be received indoors, the
probability that it is received from a near horizon satellite
through a door or window is expected to be considerably
higher compared to an origin from a vertical one. The SNR
and the number of GPS satellites in reach are indicators for
the quality of the signal.
Moreover, depending on the available hardware features,
non-standard smartphone sensors are also considered. These
include ambient temperature, atmospheric pressure, and rel-
ative humidity. The atmospheric pressure ﬂuctuates when a
door is opened or closed [6]. Additionally, it can be used
as a pressure altimeter. The ambient temperature measured
indoors in rooms with air conditioning or heating will often
be different to the outdoor temperature. Though ambient
temperature sensors are not too widespread in smartphones,
the value can often be inferred from battery temperature [7].
IV. CURRENT STATE AND REMAINING TASKS
Context-aware IO detection has been implemented in a
reusable library, which loads and runs two classiﬁers previ-
ously trained in an ofﬂine phase. The training data includes
both, the sensor data and the ground truth as given by a user.
Once the context is detected, the system can react to the
transition by selecting the appropriate positioning method.
This allows for turning off GPS when the user enters a building
and turning it on again on leaving it. This is crucial for an
effective power management.
A mobile application has been developed for ground truth
acquisition and persistent storage. Each training data record
consists of measurements for each of the classiﬁer’s attributes
and an associated user-supplied context classiﬁcation. The
mobile application as well as a prototype featuring seamless
positioning have been implemented for the Android platform.
It supports positioning with GPS outdoors and NFC in com-
bination with PDR indoors.
There are several open tasks left. First, a thorough eval-
uation is needed to measure the gain in reliability of IO
detection resulting from the evaluation of additional data
sources. Particularly, the inﬂuence of using the GPS signal
for detecting outdoor-to-indoor transitions has to be investi-
gated as well as the impact of leveraging WiFi RSSI values
for detecting indoor-to-outdoor transitions in a WiFi indoor
context. Furthermore, the machine-learning approach can not
only be used to detect that a user has entered a building
and to switch to another positioning scheme. It can also
be applied to determine which building has been entered,
e.g., by using building classiﬁers based on RSSI values. For
indoor navigation purposes, the same approach is expected to
enable reliable determination of the current ﬂoor level within a
multi-storey building, particularly, if the classiﬁers utilize the
atmospheric pressure in addition to RSSI measurements.
It can be seen as a drawback that the proposed machine-
learning algorithm is to some extend tailored to a speciﬁc
non-standard sensor equipment, i.e., the IO classiﬁers exploit
athmospheric pressure and temperature measurements. The
impact of these sensor values on the IO detection results needs
to be evaluated. While both are not expected to be crucial for
IO detection, an extended usage of the classiﬁers for ﬂoor
level determination will probably beneﬁt considerably from a
barometer. However, on a smartphone without one, WiFi RSSI
measurements might also allow reasonably reliable ﬂoor level
classiﬁcations.
V. CONCLUSION
The context-aware IO detection presented in this paper
can be used to switch seamlessly between several indoor
and outdoor positioning methods. It combines the advantages
of the GPS-using and the GPS-less IO detection approaches
presented in Section II. Thus, adaptability to unknown contexts
by semi-supervised learning is preserved, while classiﬁcation
reliability is expected to increase considerably by context-
dependent usage of GPS or WiFi signal information and
additional smartphone sensors for classiﬁcation. The approach
can be extended in a straightforward manner to determine
also which building is entered or which is the current ﬂoor
level and, thus, offers multiple new possibilities with regard
to context-aware computing.
The system architecture is extensible and expected to work
with arbitrary positioning methods in addition to those used
in the prototype.
REFERENCES
[1] M. J¨ager, S. S¨uß, and N. Becker, “Multi-scheme smartphone
localization with auto-adaptive dead reckoning,” International
Journal on Advances in Systems and Measurements, vol. 8, no.
3 / 4, pp. 255–267, 2015.
[2] R. Hansen, R. Wind, C. S. Jensen, and B. Thomsen, “Seamless
indoor/outdoor positioning handover for location-based services
in streamspin,” in 2009 Tenth International Conference on Mobile
Data Management: Systems, Services and Middleware.
IEEE,
2009, pp. 267–272.
107
Copyright (c) IARIA, 2016.     ISBN:  978-1-61208-469-5
GEOProcessing 2016 : The Eighth International Conference on Advanced Geographic Information Systems, Applications, and Services

[3] Y. Kim, S. Lee, S. Lee, and H. Cha, “A GPS sensing strategy
for accurate and energy-efﬁcient outdoor-to-indoor handover in
seamless localization systems,” Mobile Information Systems,
vol. 8, no. 4, pp. 315–332, 2012.
[4] P. Zhou, Y. Zheng, Z. Li, M. Li, and G. Shen, “Iodetector: A
generic service for indoor outdoor detection,” in Proceedings
of the 10th ACM Conference on Embedded Network Sensor
Systems.
New York, NY, USA: ACM, 2012, pp. 113–126.
[5] V. Radu, P. Katsikouli, R. Sarkar, and M. K. Marina, “A semi-
supervised learning approach for robust indoor-outdoor detection
with smartphones,” in Proceedings of the 12th ACM Conference
on Embedded Network Sensor Systems.
New York, NY, USA:
ACM, 2014, pp. 280–294.
[6] M. Wu, P. H. Pathak, and P. Mohapatra, “Monitoring building
door events using barometer sensor in smartphones,” in Pro-
ceedings of the 2015 ACM International Joint Conference on
Pervasive and Ubiquitous Computing.
New York, NY, USA:
ACM, 2015, pp. 319–323.
[7] A. Overeem et al., “Crowdsourcing urban air temperatures from
smartphone battery temperatures,” Geophysical Research Letters,
vol. 40, no. 15, pp. 4081–4085, 2013.
108
Copyright (c) IARIA, 2016.     ISBN:  978-1-61208-469-5
GEOProcessing 2016 : The Eighth International Conference on Advanced Geographic Information Systems, Applications, and Services

