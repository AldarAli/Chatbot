A Novel Approach to the Adaptive Allocation of Bandwidth in IP/MPLS Networks 
in Conditions of Heavy Network Load
Tarik Čaršimamović 
Directorate for Information Technologies  
BH Telecom JSC 
Sarajevo, Bosnia and Herzegovina 
tarik.carsimamovic@bhtelecom.ba  
Enio Kaljić, Mesud Hadžialić 
Faculty of Electrical Engineering 
University of Sarajevo 
Sarajevo, Bosnia and Herzegovina 
enio.kaljic@etf.unsa.ba, mesud.hadzialic@etf.unsa.ba 
 
 
Abstract - In this paper, an algorithm for adaptation layer in 
order to improve fairness in bandwidth allocation among 
different traffic classes in IP/MPLS networks under heavy 
traffic load is proposed. A definition of the blocking frequency 
of traffic flows at the entry of autonomous network domain 
and proportional-priority coefficient per traffic class are 
proposed and used as the input parameters of the adaptation 
mechanism. In order to evaluate the validity of the proposed 
algorithm, proper simulation tool is needed and for these 
purposes OPNET Modeler 14.5 is extended with the modules 
for adaptation process. Development methodology for the 
design of modules for adaptation process within network 
simulators is also proposed. The simulation results proved the 
hypothesis that with a proper adaptation layer, improvement 
of the fairness of bandwidth allocation among different traffic 
classes under heavy network load and at the same time keeps 
the required QoS conditions in the preferred boundaries is 
possible. 
Keywords - Adaptation layer; bandwidth allocation; blocking 
frequency; LSP; MPLS; NGN; proportional-priority coefficient; 
RSVP.   
I. 
INTRODUCTION 
One of the key requirements of the new generation 
network (NGN) environment is that the network is capable 
of handling an ever-increasing demand uncertainty, both in 
volume and time. In such environment, very often the total 
traffic demands exceed the available network capacity, and 
the traffic classes with higher priority could occupy the entire 
network capacity leaving no space for traffic flows with 
lower priority. Proper adaptation mechanisms could give 
acceptable results in adequate bandwidth allocation to the 
traffic variation and in fair treatment of all traffic classes. In 
the paper [1] was carried out testing of proposed adaptation 
layer in the case of normal network load. Mechanisms used 
for bandwidth allocation should be able to manage requests 
by taking into account at least three parameters: class of 
service, priority and the requested bandwidth. Several 
research works in the field of bandwidth management, 
including [20] [21], have taken in consideration only two 
parameters out of those three. We used all three parameters 
in our algorithm, as can be seen in generic architecture of 
adaptation layer (Fig. 1) and in flow chart (Fig. 2). The 
fairness in the resource allocation among traffic flows 
depends on algorithm used during the process of adaptation 
to the real conditions of traffic load. The fairness of 
adaptation algorithm represents the ability of the model to 
distribute available resources in such manner that the 
probability of traffic blocking for any particular traffic class 
is the same as the overall blocking probability.  We can use 
ratio Pi of the allocated resources Gi to the requested 
resources Bi of the particular traffic flow demand 
) 100
(
P x
G
P
i
i
i =
 as a measure of the algorithm 
fairness. Three types of fairness index are possible [15]:  
balanced fairness, max-min fairness and proportional 
fairness. Many of researches including [21] [24] used max-
min approach as a tool to achieve fair distribution of network 
resources among traffic classes. Max-min fairness assumes 
that is not possible to increase rate of any connection without 
decreasing a rate of maximum value allocated to another 
connection. According to the results shown in this reference, 
proportional type of fairness is the most suitable type in the 
case when the network resources are distributed among 
different traffic classes and when the adaptive method of 
resource allocation is used. In the same paper, fairness index 
J for the proportional type of fairness among n traffic classes 
is proposed as such: 
 
∑
∑
=
=
=
n
i
i
n
i
i
P
n
P
J
1
2
1
2)
(
 
(1) 
 
where Pi is the fairness of traffic class i. If the value of the 
fairness index is equal to 1 (J = 1) there is fairness across all 
flows. If the value of the fairness index J is higher than 0.9, 
or in an extreme situation higher than 0.8, one can say that 
the resource allocation mechanism is fair [3]. Otherwise, 
variations in resource distribution are significant and 
blocking percentage of the lower-priority traffic classes is 
outside of the acceptable margins.  
NGN is a packet-oriented network supporting Quality of 
Service (QoS) based on different type of transport 
technologies. The most preferred protocol in NGN is IP. 
There are different approaches for the QoS provisioning in 
IP 
based 
networks: 
Integrated 
Services 
(IntServ), 
Differentiated 
Services 
(DiffServ), 
combined 
IntServ/DiffServ, Multiprotocol Label Switching (MPLS), 
etc. [2]. MPLS is a popular transport technology that uses 
labels which are imbedded between layer two and layer three 
headers in order to forward packets. Packets are forwarded 
by switching packets on the basis of labels and not by 
1
International Journal on Advances in Networks and Services, vol 5 no 1 & 2, year 2012, http://www.iariajournals.org/networks_and_services/
2012, © Copyright by authors, Published under agreement with IARIA - www.iaria.org

routing packet based on IP header. One of the major 
advantages of MPLS networks is the inherent support to 
traffic engineering. We can also use a combination of MPLS 
and DiffServ and treat packets of the same Forward 
Equivalence Class (FEC) in accordance with the DiffServ 
procedure. Using MPLS Traffic Engineering (MPLS-TE) 
based on the network state detection we can balance traffic 
load among different Label Switched Paths (LSPs), but we 
cannot dynamically change allocated bandwidth to the LSPs 
[25]. MPLS-TE can be used to shift traffic form overload 
paths to alternate path with free bandwidth, but it does not 
contain inherent QoS features. These features should be 
designed and deployed separately on top of MPLS tunnel 
(what is subject to adaptation algorithm). Although the 
MPLS-TE technology uses extension to the RSVP, the 
MPLS-TE RSVP reservations serve solely as an accounting 
mechanism. This prevents link oversubscriptions but does 
not result in any QoS actions. 
In order to adapt to dynamics of traffic demands and to 
allocate sufficient bandwidth to the LSPs, as well as to 
improve fairness in the resource allocation among traffic 
flows, we introduce adaptation layer, working in two 
regimes:  
• 
fuzzy controller regime, when the overall traffic 
demand is elastic and in average less than network 
capacity. In this case, the adaptation process is 
realized by the means of  fuzzy logic [19], 
• 
proportional-priority regime, when the overall traffic 
demand is higher than the network capacity. In this 
case the adaptation process allocates bandwidth 
among traffic classes in such a manner that minimal 
bandwidth is guaranteed to each traffic class and the 
rest of network capacity is shared on the proportional 
basis among traffic classes (equation 4). 
The adaptation layer supports dynamic exchange 
between fuzzy controller regime and proportional-priority 
regime depending on the ratio between traffic load and the 
network capacity C. When the network load less than its 
capacity, all requests for bandwidth can be served. With 
regard to the possible large variation in the intensity of traffic 
flows, adaptation layer uses fuzzy controller that effectively 
predicts the variation. When the load is greater than its 
capacity, large variations in the intensity of traffic flows are 
not possible. Then there is no need for rapid changes in the 
allocated 
bandwidth, 
and 
adaptation 
layer 
uses 
a 
proportional-priority bandwidth allocation regime. 
In order to prove validity of our adaptation layer concept 
and sustainability of the fairness improvement concept of 
bandwidth allocation among traffic flows, we need proper 
simulation tools. Because there are no network simulators 
supporting the proposed adaptation layer algorithm and 
dynamics of this algorithm, we established a methodology 
for development of adaptation layer within network 
simulators and we also developed the adaptation layer code 
in C++ within OPNET core structure of node model (Label 
Edge Router - LER) and within core structure of process 
model of the Resource Reservation Protocol (RSVP-TE) 
used in the OPNET modeler. 
II. 
MECHANISMS AND ARCHITECTURES FOR 
ADAPTIVE TREATMENT OF TRAFFIC DEMANDS  
The goals of adaptive treatment of traffic demand in 
NGN are to: 
• 
Fulfill QoS requests of any traffic class, 
• 
Reduce drops of any traffic flows, 
• 
Decrease congestion within network, 
• 
Rise efficiency of network capacity.  
In order to successfully achieve those goals, appropriate 
mechanisms for the bandwidth allocation, for the routing 
optimization and for reaction to the failure conditions are 
needed.  During the research project COST 257 [4], several 
types of reactive and preventive approaches for network 
control were investigated: 
• 
the flow control scheme  (fluid flow model, discrete-
time Markov model or control theory model) for 
reactive approach, 
• 
the admission control method (Measurement Based 
Admission Control - MBAC, Traffic Description 
Based Admission Control - TDBAC, Experience 
Based Admission Control - EBAC or End-point 
Admission Control - EAC) for preventive approach, 
• 
the active queue management or fuzzy congestion 
control as a new control trends. 
Preventive controls usually try to limit the number of 
connections or to enforce connection to use only a limited 
amount of resources.  In IP networks, the specifications of 
protocols such as RSVP or MPLS make admission control 
possible. There has been a variety of efforts with regards to 
admission control [22] [23] [24]. All of them can be 
categorized into distributed approach or centralized 
approach. In distributed approach, nodes act independently 
relying on observed behavior rather than explicit reservation 
of free resources of the network. This approach leads 
typically in over-provisioning of the network’s capacity in 
order to bypass imprecision of the probe data. On the other 
side in centralized approach all new connections must be 
approved through bandwidth broker. While the centralized 
approach can offer a precise allocation of resources, it suffers 
from scalability limitations. We applied an ingress node 
oriented resource management which combined scalability of 
distributed approach with the efficiency of centralized 
approach. MPLS traffic engineering is aimed at optimizing 
the network path to ensure efficient allocation of network 
resources, thereby avoiding the occurrence of congestion on 
the links [2]. During the research project Tequila (Traffic 
Engineering for QoS in Internet at Large Scale) [6], it was 
shown that a combination of MPLS and DiffServ could be 
acceptable solution for load balancing in IP networks when 
multi-path routing is used. Also, during the research project 
COST 239 [5] it was shown that, in case of large traffic load, 
the highest efficiency of the resource usage is in the 
networks  which use border-to-border budget based network 
admission control (BBB NAC) as a budget-oriented method 
for allocation of virtual bandwidth. BBB NAC could be 
realized using RSVP extension for LSP tunnels establishing 
explicit LSPs with guaranteed bandwidth.  
 
2
International Journal on Advances in Networks and Services, vol 5 no 1 & 2, year 2012, http://www.iariajournals.org/networks_and_services/
2012, © Copyright by authors, Published under agreement with IARIA - www.iaria.org

 
Figure 1.  Generic architecture of adaptation layer 
Several research projects investigate possible architecture 
of dynamic provisioning of QoS to the particular traffic flow. 
The basic result of KING (Key Components for Internet of 
the Next Generation) project [18] includes development of 
adaptive architecture in which, by continuous monitoring of 
network conditions, the network parameters could be adapted 
to traffic demand. 
We customized this architecture according the requests of 
the logic of our adaptation algorithm, as shown in Fig 1. The 
figure shows the following parameters:  
• 
cai - amount of accepted traffic of i-th traffic class, 
• 
cri - amount of rejected traffic of i-th traffic class, 
• 
bmiTs - number of rejected reservation for i-th traffic 
class within one sample period, 
• 
Ts - sample time, 
• 
LLSP - LSP traffic load, 
• 
Lij - traffic load of i-th traffic class on j-th link, 
• 
ui - utility function according equation 6, 
• 
FBi - blocking frequency of i-th traffic flow, 
• 
ζ - decision criterion. 
We combined the admission control method (MBAC – 
BBB NAC) with policy based control of adaptation layer to 
dynamically adapt budget of the NAC in order to decrease 
blocking frequency and to raise fairness of bandwidth 
allocation among traffic classes. 
III. 
DESIGN OF MODEL FOR ADAPTATION 
PROCESS 
A. One Possible Solution of Adaptation Layer 
In [11] - [14], an active queue management as network 
control mechanism is proposed. This approach requires 
execution of adaptation layer processes at every node in the 
network, so making it unsuitable for MPLS based networks. 
In this paper we use a different approach for solution of 
the adaptation layer algorithm in order to increase the 
resource usage efficiency, to provide proper QoS to any 
traffic class and to improve fairness in bandwidth allocation 
among traffic flows within MPLS based networks. In the rest 
of this section we give a brief overview of the solution and 
corresponding part of pseudo code of algorithm. A full 
description, that includes a detailed explanation of the 
algorithm, is given in [16]. In this paper, MPLS is used as a 
transport technology on the network layer. Network 
capabilities to provide sufficient resources at a given time for 
a given traffic class are controlled at ingress node. Instead of 
assigning bandwidth to a particular link, provisioning of QoS 
requirements is done by assigning a virtual budget at ingress 
node for all relations between ingress and egress nodes using 
BBB NAC. BBB NAC in MPLS for LSP with a guaranteed 
bandwidth can be established by RSVP extension for LSP 
tunnels and then managing the right to network access can be 
made for each stream. Adaptation layer collects statistical 
data from the network layer and uses that information to 
generate a global view of the current state in the network. 
Detection of the current state in the proposed architecture is 
based on the utilization of the budgets allocated to the NACs, 
the frequency of blocked reservation (e.g. blocking 
frequency) and on the utilization of links’ capacity. 
Adaptation process includes adjustment of the amount of 
available bandwidth for each traffic class separately and 
optimization of internal routing. For the link metric 
calculation we use gradient projection algorithm and delay of 
any (i) traffic class on each (j) link as metrics. But because of 
results achieved in previous research [5] which shows that 
the contribution of the link metric changes to the decrease of 
percentage of blocking traffic is very small and in order to 
keep our system stable, we switch off the link optimization 
loop during the simulation. 
Adaptation layer follows its own internal strategy and 
optimization algorithms in order to adapt network 
performance to the traffic load variations. Adaptation layer 
has two regimes:  
• 
Fuzzy controller regime, which is realized by means 
of fuzzy logic, based on the blocking frequency of 
traffic flows. The adaptation process is executed in 
Ts 
LLSP Llj
,
 
miTs
Ri
ai
b
c
c
,
,
 
)
(
i
i
FB = FB FB
 
)
(
L = L Llj
 
)
(
( )
C Llj
C l
=
 
)
(
i, j
i
B
B
G
∆
=
 
ζ  
action 
lj
LSP
Ri
ai
L
L
c
c
,
,
 
 
decesion
decision
NAC 
MPLS-TE
Parameter calculation 
Data collection
Calculate New budget 
New link metric
FBi, J, ui, α, ∆FBi  
C(l )old 
∆FBi 
Gi old 
3
International Journal on Advances in Networks and Services, vol 5 no 1 & 2, year 2012, http://www.iariajournals.org/networks_and_services/
2012, © Copyright by authors, Published under agreement with IARIA - www.iaria.org

discrete cycles. Blocking frequency (FB) measured 
in particular cycle and difference in blocking 
frequency ((∆FB) between two cycles are the input 
variables of triangle fuzzy membership function:  
 
 
( )
(
)
[
]
(
)
[
]
⎪
⎪
⎩
⎪⎪
⎨
⎧
+
>
+
≤
<
≤
<
−
−
≤
+
−
−
−
−
=
.
,
,
,
,0
/ ,
/ ,
,0
a
b
x
a
b
x
b
b
x
a
b
a
b
x
a
a
b
x
a
a
b
x
µ x
  (2) 
 
where the initial values of parameters are a = 2 b = (-
6, -5, -4, -3 -2, -1, 0, 1, 2, 3, 4, 5, 6) to obtain 13 
different values of the fuzzy variables. The initial 
design of the network based on the assessment of 
longer term traffic load and a relatively short period 
between the two adaptation cycles (15 minutes) 
significantly limit the value of FB and its 
fluctuations. This membership function and fuzzy 
rules, given in [16], are used for determination of the 
value of proportional coefficient (nij) to the 
bandwidth increment ∆Bi of i-th traffic class within 
j-th cycle. The bandwidth increment ∆Bi   is given in 
advance for every traffic class. To adjust amount of 
allocated bandwidth Gij of the i-th traffic class in j-th 
cycle to the actual traffic demand, adaptation 
algorithm changes allocated bandwidth of  i-th traffic 
class in j-1st cycle with the value of  nij ∆Bi in 
accordance with the following formula: 
 
 
i
ij
ij
ij
B
n
G
G
∆
+
=
−1
 
 (3) 
 
• 
Proportional-priority regime, which is based on 
minimum bandwidth allocated to the i-th traffic class 
(minpi) and proportional-priority coefficient  δij of 
the i-th traffic class in j-th cycle, performs its 
functions in accordance with the following formula: 
 
 
min )
(
min
=1∑
−
+
=
n
i
pi
ij
pi
ij
C
G
δ
 
(4) 
 
The criterion for switching between the two regimes is 
fulfilled when the sum of requested capacity of traffic 
classes Bi  is bigger than network capacity (C): 
 
 
C
B
n
i
i >
∑
=1
 
(5) 
 
In the previous studies [17], behavior of the overall 
system, 
which 
performs 
its 
control 
functions 
automatically, autonomously and in an adaptive manner, 
is usually described by means of the following 
parameters: 
• 
blocking frequency of traffic flows (FB), 
• 
fairness of the allocation of resources to the traffic 
flows (P, J), 
• 
utility function of network capacity (ui)  
 
 
C
G
u
n
i
i
i
∑
=
=
1
 
 (6) 
 
Blocking frequency of traffic flows (FB), we used as a 
key parameter for adaptation process, is defined as the total 
number of the rejected resource reservation (bmiTN) in all n 
classes of traffic within the determined time interval k. 
Measurement of rejected traffic flow is performed at the 
NAC any time new traffic flow (c(fnew
v,w ) added to the 
existing traffic flows (c(f)) requests capacity which is higher 
than the available capacity (C(BBB)). of the given resources 
between nodes v and w. While the frequency of blocking can 
be defined as the maximum blocking probability or a relative 
ratio of blocked and offered traffic, this definition of 
blocking frequency, which treats all traffic classes 
simultaneously and only at the input node, is simple to 
measure and easy to calculate: 
 
 
∑
∑
=
=
=
=
n
i
k
T
miT
i
i
N
N
b
FB
FB
FB
1
1
,
 
 (7) 
{
}
,
(
)
( )
(
)
N
new
miT
v w
b
countif
c f
c f
C BBB
⎡
⎤
=
+
>
⎣
⎦
∑
 
 
Fairness of resource allocation between traffic classes 
depends on the resource (bandwidth) allocation algorithm 
used during the process of adaptation to the actual traffic 
demands. Consideration of fairness makes sense only if the 
total amounts of requested resources exceed the capacity of 
available network resources. Otherwise, the problem boils 
down to utilization of network resources and to load 
balancing in order to assess the cost of depreciation and to 
even utilization of network resources. Fairness of the 
adaptive algorithm is the ability of the model to distribute the 
available resources in such a way that any traffic class does 
not give preference outside of the defined priority 
mechanism. The main goal of equitable allocation of 
resources assessment includes quantification of differences 
in distribution of resources between traffic classes by 
measuring variations in the ratio of allocated resources. We 
used equation 1 to evaluate fairness of proposed adaptation 
algorithm. We also compare the same fairness index 
achieved in the network architectures operating in adaptation 
mode and in the network architecture operating in non-
adaptation mode to evaluate improvement in fairness.  
4
International Journal on Advances in Networks and Services, vol 5 no 1 & 2, year 2012, http://www.iariajournals.org/networks_and_services/
2012, © Copyright by authors, Published under agreement with IARIA - www.iaria.org

 
Figure 2.  Flow chart of adaptation layer 
For each traffic class define initial 
values for Bi, ∆Bi, mini, and δi 
Bi=Gi and 
− ∑
=
n
i
i
SDB
G
C
B
1
 
BSDB>0.1 C
In every Ts collect cai, cri, bmiTs 
BSDB=0.1C 
Yes 
In every t=6Ts calculate: 
∑
=
=
k
T
miTs
i
s
b
FB
1
 
∆FBi=FBiTs –FBiTs-1 
Bi=cai+cri 
No
∑
=
=
>
n
i
SDB
i
C or B
B
1
0 
)
min
(
min
1
∑
=
−
+
=
n
i
i
i
i
i
C
G
δ
)
(min
min
0
1
0
i
i
n
i
i
n
i
i
SDB
B
y
C
B
−
+
−
=
∑
∑
=
−
=
Choose ni  from Fuzzy memebrship function and calculate: 
i
i
SDB
SDB
n B
B
B
∆
−
=
 
i
i
ai
i
B
n
c
G
∆
+
=
 
Yes 
No 
BSDB<min (B1,...Bi,...Bn) 
BSDB=0 
x 100
B
G
P
i
i
i =
∑
∑
=
=
n
i
n
i
i
T
P
n
P
J
sj
2
1
) 2
(
 
Pi=0, J=0 
JTsj 
Yes 
No
5
International Journal on Advances in Networks and Services, vol 5 no 1 & 2, year 2012, http://www.iariajournals.org/networks_and_services/
2012, © Copyright by authors, Published under agreement with IARIA - www.iaria.org

 
Figure 3.  Development methodology of adaptation layer 
Simulation model of network architecture we used 
consists of the adaptation and network layers. The adaptation 
layer performs a calculation of the new bandwidth budget for 
network admission controllers (NAC) and a calculation of 
new metrics on the links in order to adapt network 
performance to the actual traffic conditions. Measurements 
of blocking frequency (FB), accepted traffic (cai), rejected 
traffic (cri) and LSP load are performed in the regular time 
intervals at the ingress node in order to provide input data for 
operation 
of 
adaptation 
layer. 
The 
network 
layer 
autonomously executes forwarding functions of the packets 
and ensures QoS requirements using the capabilities of 
existing technologies and protocols. This type of network 
architecture represents the optimal set of available 
technologies with flexible topological landscape. Admission 
control functions, based on timely adjusted allocated 
bandwidth and load balancing functions by means of MPLS 
traffic engineering capabilities, are executed only at the 
ingress node of the autonomous network domain. 
B. Looking for a Simulation Tool for Validation of 
Designed Model 
The adaptation processes are capable of a continuous 
monitoring of the network parameters and performing their 
adaptation in accordance to the ever-changing traffic 
demands. Possible solution for such structure of adaptation 
process could be an active resource allocation based on the 
dynamic monitoring of their availability and of their 
sustainability to effectively transfer traffic.  
The efficiency of such structures should be evaluated and 
an adequate simulation model which can adequately 
represent mechanisms and architecture for adaptive treatment 
of traffic demand is needed. Therefore, in this section we 
investigated possibilities of existing network simulators to 
support structure of adaptation algorithm we used in this 
paper. The analysis is based on a review of scientific studies 
in this field and documentation available for the network 
simulators. 
In [8], a scheme for an adaptive bandwidth reservation in 
wireless multimedia networks was examined. For the 
purpose of validation of the proposed solution, necessary 
module for network simulator OPNET (Modeler 8.0) was 
developed. However, examination of the latest available 
version of the network simulator OPNET (Modeler 14.5) 
showed that these modules are not supported by the 
simulator manufacturers and as such is not included in the set 
of available modules. In [9], a solution for the adaptive 
bandwidth allocation in MPLS networks using a control with 
one-way feedback was given. The proposed solution was 
tested in a network simulator ns-2.27. But this solution is 
dedicated for particular problem and only in ns 2-27. 
Because of that it is inflexible for usage in general. Elwalid 
et al. [10] discussed adaptive traffic engineering in MPLS 
networks and their effort to develop their own simulator is 
the significant sign that there is a poor support for the 
dynamic adaptation structures in the available network 
simulators. Reviewing the documentation about the available 
network simulators we determined that none of those 
network simulators have built-in support for the dynamic 
adaptation structures. As the available simulators have no 
appropriate support for dynamic adaptation structures, and 
the same is necessary to test proposed structures, one of the 
objectives of this paper is to establish the methodological 
approach to development of adaptation layer in the network 
simulator. This methodology will be used for development of 
the adaptive layer modules within a chosen network 
simulator. 
 
IV. 
DEVELOPMENT METHODOLOGY OF AN 
ADAPTATION LAYER WITHIN NETWORK 
SIMULATOR 
In order to develop an adaptation layer which is 
independent of the adaptation mechanism of the used 
technology or of the network simulator, it is necessary to 
define a development methodology. We established a 
development methodology of an adaptation layer within 
network simulator which has eight steps shown in Fig. 3. 
Each of those steps will be explained in this section. 
A. Design of the Adaptation Layer 
In the section III we explained the basic functions and 
principles of our adaptation layer. The detailed design of 
adaptation layer with adaptation algorithm, input and output 
variables, decision criteria and pseudo code of the adaptation 
layer components are given in [16]. 
B. Adaptation Layer Processes Identification 
For the purpose of execution of adaptation layer 
functions we identify next three processes: 
• 
measurement of input variables, 
• 
adaptation, and 
• 
output parameters control. 
The first process is deterministic and it is performed in 
regular time intervals (TN). The task of this process is 
measurement of flow intensity of each traffic class and a 
6
International Journal on Advances in Networks and Services, vol 5 no 1 & 2, year 2012, http://www.iariajournals.org/networks_and_services/
2012, © Copyright by authors, Published under agreement with IARIA - www.iaria.org

measurement of blocking frequency at the entry into the 
MPLS domain.  
The process of adaptation is also deterministic, and it is 
performed in regular time intervals determined by the 
duration of discrete cycle of adaptation. The task of this 
process is to calculate a new budget based on input variables. 
The last process is a stochastic process and its execution 
is caused by the decision results of adaptation process. The 
task of this process is to allocate a new budget to the network 
admission controller. 
C. Selection of Process Model in Network Simulator 
A number of network simulators are available today. 
Some of them, used in scientific researches, are ns-2/3, 
OPNET, OmNet++, GloMoSim, Nets, etc. Selection of 
adequate network simulator should be based on the 
characteristics of the simulators corresponding to the needs 
of adaptation layer developed as the target platform. We 
choose OPNET Modeler 14.5 as a proper network simulator 
considering next properties of the chosen simulator: 
• 
simulation is based on the discrete network states 
(FSM-based approach), 
• 
it supports traffic profile we intend to use during a 
simulation, 
• 
it supports the  network technologies and protocols 
we selected for a simulation model, 
• 
it is suitable for prototype research such as this 
simulation model, 
• 
it is easy to configure, 
• 
it has relatively good documentation and support, 
• 
it can be extended for adaptation layer (supports C-
scripting language). 
Since the proposed adaptive layer is a prototype of 
generic adaptation layer and as such does not exist in the 
selected network simulator, the whole adaptation layer 
should be developed based on the pseudo code given in [16], 
taking into account the constraints of simulator architecture. 
The architecture of the network simulator OPNET Modeler 
14.5, extended with necessary modules for adaptation layer, 
is presented in Fig. 4. 
Network 
simulator 
OPNET 
Modeler 
14.5 
is 
hierarchically organized. A network model is located at the 
highest level of hierarchy. The network model is composed 
of nodes and links connecting the nodes. Each node is 
defined by the node model (workstation, switch, router, 
server, etc.). Node model consists of processors that are 
described in process models. Process models are described in 
FSM's (Finite State Machine) and transfer functions written 
in C++ programming language. Transfer functions rely on 
the core functions of the simulator. The core simulator 
consists of pre-compiled libraries, whose source code is not 
available. The kernel is based on discrete event simulation. 
Node at which network admission control functions are 
performed is the ingress LER of the MPLS domain. 
Bandwidth control at the entry of the network is ensured by 
establishing an explicit path with guaranteed bandwidth. The 
protocol that is responsible for setting up LSPs is RSVP-TE. 
 
 
Figure 4.  Hierarchical architecture of OPNET simulator  
 
Therefore, the logical choice of process model within the 
simulator is RSVP process model. We used the network 
model which consists of five traffic sources nodes, the 
ingress edge router, four core MPLS routers, the egress edge 
router and five traffic destination nodes. 
D. Adaptation Layer Processes Implementation 
Ingress LER node model (Cisco 7600) consists of 
processors and queues associated with packet or statistic 
wires. We introduce the new statistical flows between the 
MAC (Media Access Control) queues and RSVP process 
model in order to take periodical measurements of the input 
variables, such as the mean intensity of flows, number of the 
rejected reservations, etc. 
Process models in the OPNET network simulator are 
based on FSM. Passing from one state to another is initiated 
by different types of interruptions (packet arrival, arrival of 
new statistics value, user-defined stop, etc.). 
During the transition stage different functions could be 
called. Besides the FSMs, the main components of a process 
model are the state variables, temporary variables, function 
block with headers, block functions, block for debugging and 
scheduling process block. Each process model also has 
attributes, interfaces, local and global statistics. Attributes 
and statistics can be promoted to a higher level, i.e. at the 
level of the node model. 
E. Initial Configuration of Adaptation Layer Parameters 
The initial parameters of adaptation layer, such as initial 
bandwidth per each traffic class (Bi), minimal bandwidth per 
traffic class (minpi,), proportional-priority coefficient (δi), 
bandwidth increment (∆Bi), are defined in [16]. Those initial 
parameters are subject to changes during the exploitation 
period (if the traffic environment changes dramatically) or 
during the simulation process (to be able to perform different 
simulation scenarios). For this purpose we need a proper 
structure within a simulator which offers changeability of the 
7
International Journal on Advances in Networks and Services, vol 5 no 1 & 2, year 2012, http://www.iariajournals.org/networks_and_services/
2012, © Copyright by authors, Published under agreement with IARIA - www.iaria.org

initial configuration settings and changeable setting of its 
parameters. The development process of that structure has 
the following steps: 
• 
definition of the adaptation layer attributes within the 
set of  the existing process model attributes, 
• 
promotion of the attributes from a process model 
level to the level of the node model, 
• 
coding the input function in C++ to retrieve 
attributes when the simulation starts. 
F. Monitoring of Adaptation Layer Parameters 
In Sections I and III, we defined parameters which should 
be monitored such as blocking frequency (FB), fairness 
index (J), difference of blocking frequency (∆FB) used as 
input variable for fuzzy membership function, etc. Those 
parameters should be measurable and monitored in order to 
qualify adaptation process execution and to use them as the 
input parameters to the adaptation layer. For this purpose we 
need a structure within simulator which offers a possibility to 
measure and monitor the values of the adaptation layer 
parameters. The development process of that structure has 
the following steps: 
• 
definition of the local statistics in the process model, 
• 
promotion of statistics on the level of the node 
model, 
• 
coding of the function in C++ to record statistics. 
G. Testing, Analysis and Result Validation 
Those two steps of the development methodology are 
explained in Section V. 
V. 
THE SIMULATION RESULTS 
The simulation model created for testing purposes of 
adaptation layer is shown in Fig. 5 below. All nodes in the 
access part of the network are connected using 10 Gbps 
links, while the core routers are connected using 1 Gbps 
links. OSPF protocol is used as an IGP, and RSVP-TE 
protocol is used for establishment of LSPs. Between the 
LERs is 10 tunnels configured (two for each of five traffic 
classes). Traffic mapping at ingress LER is done using five 
different FEC based on the address of the traffic source. 
Traffic of each FEC is transmitted through two LSP (the first 
has an explicit route LER1-LSR1-LSR4-LER2, and the 
second-LER1 LSR1-LSR3-LER2). 
For testing of adaptation layer, two scenarios are 
proposed:  
• 
average load is 80% of network capacity, 
• 
average load is 100% of network capacity. 
 
 
Figure 5.  Simulation model for adaptation layer testing 
The detailed dynamics of traffic demand of traffic classes 
for both scenarios, used during a simulation process, are 
given in the thesis [16]. In the first scenario the traffic 
generators are configured so that the average network load is 
80%. The network capacity is 2 Gbps. The peak load of the 
network is about 2.5 Gbps. The initial values for those traffic 
classes, in the case that average network load is 80% of the 
network capacity, are given  in Table 1 below.  
TABLE I.  
INITIAL VALUES OF TRAFFIC SOURCES FOR 1
ST SCENARIO 
Traffic 
class 
Initial 
BW 
kbps 
Minimal 
BW 
kbps 
Maxima
l BW 
kbps 
BW 
incr. 
∆Bi 
Proportion
al-priority 
coefficient   
δi 
EF 
8,270 
5,990 
14,000 
125 
∑
ij
ij
B
B
2.1
 
AF1 
465,110 
319,760 
700,000 
10,000 
∑
ij
ij
B
B
 
AF2 
586,390 
403,140 
800,000 
22,000 
∑
ij
ij
B
B
9.0
 
AF3 
5,690 
3,850 
14,000 
200 
∑
ij
ij
B
B
9.0
 
BE 
431,310 
286,528 
700,000 
6,000 
∑
ij
ij
B
B
8.0
 
 
During the simulation process we observe a distribution 
of requested bandwidth per each traffic class Bi and 
distribution of allocated bandwidth per each traffic class Gi 
in the same time window. We perform those observations in 
the adaptation mode of network architecture and in non-
adaptation mode of the same network architecture in order to 
validate the accurate of the adaptation layer processes and to 
evaluate improvement in resource utilization as well as in 
QoS satisfaction of the requests of any traffic class. 
We also observe values and distribution of fairness index 
(J) in both modes of network operation and values and 
distribution of ratio of the allocated resources to the 
requested bandwidth per each traffic class, in order to 
evaluate improvement of fairness in adaptation mode of 
network operation compared to the non-adaptation mode of 
operation. During the simulation process we take measures 
every 10 seconds and average those measurement values in 
time window of one minute, using those average values to 
calculate parameters which are needed for adaptation process 
of our adaptation algorithm.  
By means of Figures 6 to 8 below, as a part of simulation 
results, we will show the outcomes of proposed adaptation 
algorithm, as well as of the extension of the OPNET 
structure. The whole scope of simulation results, from which 
we proof our entire concept, can be seen in [16].  
From the Fig. 6, we can see that allocated bandwidth G 
for EF traffic class pretty well follows the required 
bandwidth B. This confirms that the adaptation layer 
functions properly and accurately. We can see the same 
results for other traffic classes and for average load of 80%. 
 
8
International Journal on Advances in Networks and Services, vol 5 no 1 & 2, year 2012, http://www.iariajournals.org/networks_and_services/
2012, © Copyright by authors, Published under agreement with IARIA - www.iaria.org

 
Figure 6.  Requested and allocated bandwidth for EF traffic class 
 
Fig. 7 shows us that introduction of adaptation layer 
improves the fairness of resource allocation in the network. 
During the non-adaptive mode, the ratio (P) of the allocated 
resources to the requested resources for EF class was 
unstable and goes up to 200%, while during the adaptive 
mode of network operation this percentage was stabilized 
and dropped to 100%, as is the preferred value for all traffic 
classes. 
Fairness index (Fig. 8) is, in the adaptation mode of 
network operation, maintained above 0.96 with brief outages 
of up to 0.8, while the same index, in non-adaptation mode, 
is very unstable and drops up to 0.5. 
Fig. 9 shows that the adaptation layer is stable structure. 
Blocking frequency stabilizes after a certain time on the 
value 10. 
 
 
Figure 7.  Ratio of the allocated resources for the EF traffic class  
(first scenario) 
 
Figure 8.  Fairness index (first scenario) 
 
Figure 9.  Blocking frequency (first scenario) 
 
In the second scenario, the traffic generators are 
configured so that the average network load is 100%. The 
network capacity is 2 Gbps. The peak load of the network is 
about 3.125 Gbps. 
To justify the results of simulation process we repeated 
the simulation and the same measurements and observations 
in the case that the average network load is 100% of the 
network capacity. 
Fig. 10 shows that introduction of adaptation layer 
improves the fairness of resource allocation in the network 
even in conditions of heavy network load. 
Fairness index (Fig. 11) is, in the adaptation mode of 
network operation, maintained above 0.8 with brief outages 
of up to 0.76, while the same index, in non-adaptation mode, 
is very unstable and drops up to 0.5. 
Fig. 12 shows that the adaptation layer is stable structure 
- blocking frequency stabilizes after a certain time on the 
value 12. 
 
 
9
International Journal on Advances in Networks and Services, vol 5 no 1 & 2, year 2012, http://www.iariajournals.org/networks_and_services/
2012, © Copyright by authors, Published under agreement with IARIA - www.iaria.org

 
Figure 10.  Ratio of the allocated resources for the EF traffic class  
(second scenario) 
 
 
Figure 11.  Fairness index (second scenario) 
 
 
Figure 12.  Blocking frequency (second scenario) 
These results give us the proof of our hypothesis that 
with a proper adaptation layer we can improve the fairness of 
bandwidth allocation among different traffic classes under 
heavy network load and at the same time keep the required 
QoS conditions in the preferred boundaries.  We can also 
conclude that the proposed adaptation algorithm behaves 
properly. 
VI. 
CONCLUSION AND FUTURE WORK 
The simulation results have shown that the proposed 
adaptation algorithm can significantly improve the fairness 
of bandwidth allocation among different traffic classes under 
a heavy traffic load in IP/MPLS networks, while keeping the 
required QoS conditions to any traffic class within the 
boundaries as preferred. The bandwidth allocated to any 
traffic class follows the required one, and in the case of a 
sufficient bandwidth, the QoS requests are guaranteed.  
We see future work in researching the impact of different 
fuzzy algorithms and membership functions in the adaptation 
layer. It would also be interesting to analyze and discuss the 
required computational power and the protocol overhead in 
case of heavy network load, as well as ways of adaptation 
layer integration into existing network management systems. 
REFERENCES 
[1] 
T. Carsimamovic, E. Kaljic, and M. Hadzialic, "One Approach to 
Improve Bandwidth Allocation Fairness in IP/MPLS Networks Using 
Adaptive Treatment of the Traffic Demands," Proc. Seventh 
International Conference on Networking and Services, ICNS’11, May 
22-27, 2011, Venice/Mestre, Italy, pp. 124-130, IARIA XPS Press, 
ISBN: 978-1-61208-133-5 
[2] 
A. Stavdas, "Core and Metro Networks," John Wiley & Sons Ltd., 
2010. 
[3] 
C.A. Kamienski, "The Case of Inter-Domain Dynamic QoS based 
Service Negotiation in the Internet," Computer Communications, vol. 
27, pp. 622-637, 2007. 
[4] 
COST-257, Final Report, "Impact of New Services on the 
Architecture and Performance of Broadband Networks", 2000. 
[5] 
C. Hoodgendoorn, "KING Research Project Overview," 2005. 
[6] 
D. Godens, "Functional Architecture Definition and Top Level 
Design," Tequila Project, 2000. 
[7] 
G. Hasslinger and J. Mende, "Measurement and Characteristics of 
Aggregated Traffic in Broadband Access Networks," in Proceedings 
of ITC 20, pp. 998-1010, Ottawa, 2007. 
[8] 
X. Chen and Y. Fang, "An adaptive bandwidth reservation scheme in 
multimedia wireless networks," in IEEE Globecom, San Francisco, 
pp. 2830-2834, 2003. 
[9] 
T. Yokoyama, K. Iida, H. Koga, and S. Yamaguchi, "Proposal for 
Adaptive Bandwidth Allocation Using One-Way Feedback Control 
for MPLS Networks," IEICE TRANS. COMMUN., vol. E90-B, no. 
12, pp. 3530-3540, Dec. 2007. 
[10] A. Elwalid, C. Jin, S. Low, and I. Widjaja, "MATE: MPLS Adaptive 
Traffic Engineering," in IEEE INFOCOM, Anchorage, pp. 1300-
1309, 2001. 
[11] W.-S. Lai, C.-H. Lin, J.-C. Liu, and H.-C. Huang, "Using Adaptive 
Bandwidth Allocation Approach to Defend DDoS Attacks," 
International Journal of Software Engineering and Its Applications, 
vol. 2, no. 4, pp. 61-72, Oct. 2008. 
[12] A. Kamra, H. Saran, S. Sen, and R. Shorey, "Fair adaptive bandwidth 
allocation: a rate control based active queue management discipline," 
Computer Networks, no. 44, pp. 135-152, 2004. 
[13] Y. Zheng, M. Lu, and Z. Feng, "Performance Evaluation of Adaptive 
AQM Algorithms in a Variable Bandwidth Network," IEICE 
TRANS. COMMUN., vol. E86-B, no. 6, pp. 2060-2067, 2003. 
[14] R. Wang, M. Valla, M. Y. Sanadidi, and M. Gerla, "Using Adaptive 
Rate Estimation to Provide Enhanced and Robust Transport over 
Heterogeneous Networks," in Proceedings of the 10th IEEE 
10
International Journal on Advances in Networks and Services, vol 5 no 1 & 2, year 2012, http://www.iariajournals.org/networks_and_services/
2012, © Copyright by authors, Published under agreement with IARIA - www.iaria.org

International Conference on Network Protocols, Washington, DC, pp. 
206-215, 2002. 
[15] R. Jain, "The Art of Computer System performance Analysis," Wiley, 
New York, 1991. 
[16] T. Čaršimamović, "Selection of parameters for the adaptive treatment 
of traffic in next generation networks (NGN)," PhD Thesis, 
University of Sarajevo, Sarajevo, 2010. 
[17] T. Engel, E. Nikolouzou, and A. Ricicato, "Analysis of Adaptive 
Resource Distribution Algorithms in the Framework of Dynamic 
DiffServ IP Network," Crete, 2001.  
[18] U. Walter and M. Zitterbart, "Architecture of a Network Control 
Server for Autonomous and Effective Operation of Next Generation 
Network," Institut für Telematik, Karlsruhe, 2006. 
[19] Runtong Zhang, Yannis A. Phillis, and Vassilis S. Kouikoglou, 
"Fuzzy Control of Queuing Systems," Springer, 2005. 
[20] T. Shan and O.W.W. Yang, "Bandwidth Management for Supporting 
Differentiated-Service-Aware 
Traffic 
Engineering," 
IEEE 
Transactions on Parallel and Distributed Systems, Vol. 18, No. 9, 
2007. 
[21] M. Allalouf and Y. Shavit, "Centralized and Distributed Algorithm 
for Routing and Weighted Max-Min Fair Bandwidth Allocation," 
IEEE/ACM Transactions on networking, Vol. 16, No. 5, 2008. 
[22] N. Blefari-Melazzi and M. Femminella, "A comparison of the 
utilization efficiency between a stateful and a stateless admission 
control in IP networks in a heterogeneous traffic case," 
Telecommunication Systems, KluwerAcademic Publishers, pages 
231–258, March/April 2004. 
[23] V. Elek, G. Karlsson, and R. Ronngren, "Admission control based on 
end-to-end measurements," In IEEE INFOCOM 2000, Israel, 2000. 
[24] G. Bianchi and N. Blefari-Melazzi, "Admission Control over Assured 
Forwarding PHBs: A Way to ProvideService Accuracy in a DiffServ 
Framework," In Proc. Of GLOBECOM, San Antonio, Texas, Nov. 
2001. 
[25] E. Osborne and A. Simha, "Traffic Engineering with MPLS," Cisco 
Press, 2002. 
 
11
International Journal on Advances in Networks and Services, vol 5 no 1 & 2, year 2012, http://www.iariajournals.org/networks_and_services/
2012, © Copyright by authors, Published under agreement with IARIA - www.iaria.org

