A Coupled Random Search-Shape Grammar Algorithm for the Control of
Reconﬁgurable Pixel Microstrip Antennas
Adrian Muscat
Dept of Communications and Computer Engineering
University of Malta, Malta
Email: adrian.muscat@um.edu.mt
Joseph A. Zammit
Dept of Communications and Computer Engineering
University of Malta, Malta
Email: jozamm@gmail.com
Abstract—Algorithms are necessary to reconﬁgure pixel
antennas in real time. These algorithms must carry out an
efﬁcient search to yield the electrical speciﬁcations demanded
by radio transceivers. To address this problem, an algorithm
that combines a random search method with a shape gram-
mar model is proposed. The performance of the algorithm
is compared to a Genetic Algorithm with and without a
pruning mechanism. Results demonstrate that the algorithm
goes through a relatively very small number of iterations
to converge to the antenna speciﬁcations and consequently
outperforms the genetic-based searches.
Keywords-Reconﬁgurable Pixel Antenna; Algorithm; Con-
trol; Shape Grammar
I. INTRODUCTION
This paper deals with algorithms applied in the control
of pixel microstrip antennas. The shape grammar based
algorithm described in [1] is extended to a wider range of
microstrip patch shapes and its performance is compared
to a Genetic Algorithm (GA) and a GA augmented with a
pruning mechanism.
The reconﬁgurable pixel microstrip antenna (RPMA) is
a derivative of the microstrip antenna which consists of a
radiating element backed by a ground plane. The radiating
element is usually positioned 0.3 to 4mm above the ground
plane and is physically supported either on a dielectric
substrate or suspended under a superstrate. The radiating
element can take the form of any useful shape and the ﬁnal
design of the antenna depends on the physical space that has
been allocated to the antenna for the particular application
as well as on the electrical characteristics speciﬁed. Fig.1(a)
depicts a microstrip antenna with an arbitrarily shaped patch.
To a certain extent, the antenna electrical properties depend
on the shape of the radiating element. Subsequently, an
antenna that is required to resonate at different frequencies
requires the development of complex shapes that steer the
current though the antenna in different paths for each res-
onant frequency. The design of such antennas is complex
and requires many experimental iterations and modiﬁcations
to produce the ﬁnal prototype. An antenna that can alter
its shape, and hence the electrical characteristics, in real-
time under the control of an algorithm is therefore highly
Figure 1.
(a) Microstrip patch antenna structure with an arbitrary patch
shape, and (b) Reconﬁgurable Pixel Microstrip Antenna (RPMA) that can
change the radiator shape in real time.
desirable. The delivery of such devices would mean that a
single device re-conﬁgures itself to operate over a wide fre-
quency range, optimizes the signal strength and/or changes
polarization in a short period of time as demanded by the
system [2].
Reconﬁgurable antennas can be classiﬁed either according
to their physical composition or according to the fundamen-
tal parameters that can be modiﬁed and to what extent these
parameters can be varied. Reconﬁgurable antennas are phys-
ically composed of switchable elements and tuning devices.
Additionally, a control circuit and an algorithm is required
to operate the switches. Simple re-conﬁgurable antennas
contain very few switching devices to switch a parameter
over a few discrete values and hence do not really need a
complex smart control algorithm. On the other hand the pixel
microstrip antenna is a much more complex antenna that can
tune the parameters over a wide range and can for example
switch to any arbitrary frequency or optimize the signal
strength received or polarization diversity in real-time. This
type of antenna can function as a “universal” antenna that
can be applied to spectrum monitoring, in security situations
to rapidly scan a wide bandwidth or in a cognitive radio.
The major advantage over ﬁxed wideband antennas is the
ability to tune to particular narrow bands and/or change the
direction of the main lobe. Fig.1(b) depicts the general pixel
186
International Journal on Advances in Systems and Measurements, vol 3 no 3 & 4, year 2010, http://www.iariajournals.org/systems_and_measurements/
2010, © Copyright by authors, Published under agreement with IARIA - www.iaria.org

microstrip patch structure, consisting of an n × m array of
pixels, interconnected with switches. The switches can then
be turned ON or OFF to synthesize an arbitrary patch
shape. Various shapes synthesized from a 10×10 pixel array
are shown in Fig.2.
Figure 2.
Antenna shapes synthesized with a RPMA (a) low, (b) medium,
and (c) high frequency of operation.
The patch shapes synthesized by a RPMA are discrete and
not continuous. This results in a structure whose frequency
of resonance can be tuned in discrete steps and could lead
to gaps along the frequency band. Various techniques have
been proposed to mitigate these problems, for example the
use of switchable shorting posts and the use of a tunable
reactive component . However these add to complexity, have
a negative effect on the antenna efﬁciency and limit the
number of possible conﬁgurations [3]. Shorting posts are
however useful in size reduction. On the other hand some
degree of ﬁne tuning can be obtained by taking advantage
of the inherent reactive properties in the pixels and by
suitably perturbing the shape a better match can be found.
Furthermore it is usual and desirable to add a ﬁnal matching
stage to the antenna port [4]. A RPMA with a tunable
matching circuit is described in [5]. It is also convenient
and practical to have the probe feed at a ﬁxed position. In
this case the shape has to be rotated to suit the position of
the feed. In summary, there are two aspects that the control
algorithm has to address, (1) the minimization of switching,
contributing to a longer lifetime, shorter convergence time
and lower power consumption, and (2) making full use of
reconﬁgurability to minimize the burden on the ﬁnal tuning
circuit.
A pixel reconﬁgurable antenna system therefore consists
of the reconﬁgurable hardware parts and the control algo-
rithm, on which the transient performance largely depends.
Most of the research effort to-date has been targeted towards
the hardware issues and the development of efﬁcient control
algorithms still needs to be adequately addressed.
In this section the reconﬁgurable pixel microstrip antenna
is described and its inherent limitations and problems are
discussed. Furthermore the tasks and targets for the control
algorithm are deﬁned. The rest of the paper is organized as
follows. Section II describes related work and motivation.
Section III reports a preliminary study that indicates the
effectiveness of embedding domain knowledge in a search
algorithm and discusses the importance of an algorithm that
deals directly with shape. Section IV is a detailed description
of the algorithm and discusses the results obtained. The last
section outlines further work required to solve remaining
issues.
II. RELATED WORK
The research ﬁeld in reconﬁgurable microstrip antennas
is very active with several research groups seeking the best
possible structure to dynamically modify the characteristics
efﬁciently. The most salient design issues from the point
of view of hardware include, distortion due to non-linear
properties of devices, overall loss in structure and the
overall lifetime of the devices. Due to their linear properties
micro-electro-mechanical-switches (MEMS) are very suit-
able switching devices for this application and prototypes
have been proposed and built [5], [6] using MEMS. Cetiner
et al [5] designed an 8×8 pixel patch antenna whose resonant
frequency could be tuned to two bands 4.1GHz and 6.1GHz
and for each band the polarization could be changed to
linear, right or left hand polarization. These operating modes
were achieved by switching on or off different pixels in the
antenna. The main application of this pixel patch antenna
is in MIMO systems to enhance the overall operation. Grau
et al [7] developed a software deﬁned pixel antenna which
could be tuned over a range of range 1GHz. The pixels were
connected together using MEMS switches. The pixels are
switched in such a way that a circular structure is created
and the radius of the circular structure yields the operating
frequency and polarization. A competing structure consisting
of ceramic pistons that push in and out metallic pixels
is reported in [8]. The latter structure avoids the use of
switches.
In the RECAP project ([9], [10] and [11]) a fully reconﬁg-
urable monopole planar antenna that operates from 0.8GHz
to 1.5GHz is developed. Pringle at al describe a pixel patch
antenna, where each pixel in the antenna is electrically
small (less than λ/50) and interconnected by an optically
switched FET. The antenna is 22.5cm by 22.0cm and has
a bandwidth of 800MHz. The antenna was designed with
left-right symmetry and in total consists of 208 switches. A
genetic algorithm together with a Finite-Difference-Time-
Domain (FDTD) model were used to derive the operating
frequency and radiation pattern off-line. Due to mismatches
in the feed the antenna gain was smaller than simulated.
A Self Structuring Antenna (SSA) [12] is another type
of reconﬁgurable wire antenna. Instead of having an array
of switches to connect patches together, the SSA is made
up of a number of wires or patches connected with a series
of interconnections to increase the antenna’s size. Using a
microprocessor, a feedback system and a Genetic algorithm
the SSA can be conﬁgured over a large bandwidth.
187
International Journal on Advances in Systems and Measurements, vol 3 no 3 & 4, year 2010, http://www.iariajournals.org/systems_and_measurements/
2010, © Copyright by authors, Published under agreement with IARIA - www.iaria.org

Most of the work carried out on the control algorithm
considers the Genetic Algorithm (GA) in the optimization
of signal strength and operation at different frequencies.
In [13] and [14], the GA is applied to tune the antenna
for maximum signal strength on-situ and in [12] and [10]
the GA is used to tune the antenna over a large range
of frequencies. Most of the work related to the RPMA is
inﬂuenced by the encoding technique proposed in [15]. In
this case the patch shape is decomposed into square pixels
and a binary bit string deﬁnes the presence or absence of
a pixel. This binary bit string acts as a chromosome in a
GA formulation. Genetic algorithms are useful to explore
poorly-understood search spaces. They are coded with the
minimum of domain knowledge and assumptions, and use
domain independent genetic operators to explore the search
space. They can be very robust and persistent throughout
the search but are very slow to converge to a result and are
inefﬁcient for local optimization. Systems that rely solely
on the GA, therefore, require hundreds of iterations to reach
their goals, as shown in [13] and [15].
The RPMA can be thought of as an artiﬁcial antenna de-
signer in a constrained environment. Therefore developments
in antenna CAD can be considered for adoption to recon-
ﬁgurable antennas. Patnaik et. al. apply Neural Networks
(NN) to reduce the design time of a reconﬁgurable 1300
balanced bowtie antenna that can be described as a binary
bit string of length 18 bits [16]. For the RPMA of ﬁg.1(b),
the equivalent chromosome length is 180 bits rendering
this method computationally expensive. Several methods like
pruning and structuring of the search space can be applied
to improve the GA efﬁciency for CAD purposes. In [17], a
Knowledge-Based Genetic Algorithm (KBGA) is developed
to reduce the time required to evolve novel microstrip
antennas. The KBGA selects antenna design heuristics (rules
of thumb) that inﬂuence the genetic operators. The KBGA
in [17] is hard-coded as a set of if-then rules and there is
no provision for machine evolution of the rules.
In the case of the RPMA the various shapes that can
yield the required characteristics are generally known and
therefore a good proportion of the search space is known,
ﬁg.2 is evidence of this. The ﬁxed antenna feed and the
discrete nature of the shapes do however make the problem
a formidable one, and require algorithms that can perturb
the shape rather than the values of the geometrical dimen-
sions. The changes in shape can be done efﬁciently by
the application of domain knowledge, in the same way as
human designers carry out the design task. In [18] shape-
function grammars are proposed for use in antenna Intelli-
gent Computer Aided Engineering (ICAE) software to model
and synthesize microstrip antennas during the preliminary or
conceptual stage of the design.In [1] a control algorithm that
combines a search method with an approximate and fast to
compute qualitative antenna model is proposed. Fig.3 is a
block diagram of the proposed algorithm. The novelty in
Figure 3.
Block diagram for the algorithm modiﬁed from [1]. This
algorithm introduces an approximate/qualitative model in the search loop.
this algorithm is the addition of the approximate/qualitative
model to the standard setup that consists of a search
algorithm that operates with measured feedback, such as
described in [13] and [14]. Referring to ﬁg.3, the search
algorithm receives inputs from the transceiver and consults
the approximate/qualitative model to obtain a valid shape
that is likely to satisfy the inputs. Measured feedback is
used to modify the shape or suggest a new shape. The
learning option tunes the qualitative model if necessary.
This approach mimics the informal and intuitive cut and
try method used extensively by compact antenna designers.
In this method the designer starts with a set of candidates
derived with the help of an informal model. Guided by
general antenna domain knowledge, the designer modiﬁes
the shapes in an iterative way to obtain the required electrical
characteristics. At the end of the cycle the best prototype
is chosen for production. The qualitative model should in
general be inexpensive in computational terms and deals
directly with shape and form. The choice of the search
method depends on certain aspects. For example if the
qualitative model is a crude one, a GA is appropriate, where
as if the model yields a more accurate representation, then
a neighborhood search algorithm should result in a more
efﬁcient system. In [1] a shape grammar model is combined
with a random search and the performance of the algorithm
is demonstrated on narrow-meander-line structures. In this
paper the qualitative model is extended to generate and
analyze wide-meander line patch antennas as well as shorted
patch antennas.
III. THE GENETIC ALGORITHM IN CONTROL OF THE
RPMA
The Genetic Algorithm (GA) is currently the standard
method for tuning a RPMA as discussed in section II. In
188
International Journal on Advances in Systems and Measurements, vol 3 no 3 & 4, year 2010, http://www.iariajournals.org/systems_and_measurements/
2010, © Copyright by authors, Published under agreement with IARIA - www.iaria.org

this section the Genetic Algorithm (GA) is used in search of
shape conﬁgurations that yield the required frequency. Two
types of Genetic Algorithms are coded. The ﬁrst is a tradi-
tional GA and the second is a GA with a pruning mechanism
that prunes out candidates that are highly unlikely to yield
the target values. The results in this section are compared to
results obtained using the shape-grammar based algorithm
in section IV
A. The Genetic Algorithm
 
Figure 4.
General structure for the Reconﬁgurable Pixel Microstrip
Antenna for the GA experiments.
In this subsection the GA is used to investigate the search
space of the reconﬁgurable pixel antenna. The goal is to
investigate the number of generations or iterations required
to ﬁnd a shape that yields the given resonant frequency. A
12×12 RPMA is adopted for this experiment and each pixel
is 3.41 × 3.41mm in size. The pixels can be switched on
and off to create the desired shape. The state of the pixel
is coded as a ’1’ or a ’0’ in the GA chromosome. This
encoding technique is ﬁrst described in [15]. Fig.4 shows
the structure of the reconﬁgurable antenna. In a practical
reconﬁgurable antenna one would represent the switches
in the chromosome, but this would end up in doubling
the length of the chromosome and will not beneﬁt this
experiment. The total length and breadth of the antenna is
41 × 41mm. The radiating element is suspended in free
space 3mm above the ground plane and has a nominal
resonant frequency of 3.3GHz. The GA was designed with a
crossover probability of 0.7 and an exponentially decreasing
probability of mutation. At the start of the GA run, the
mutation rate is 0.01 and decreases to a constant 0.001
by the 10th generation. The GA was coded in C# and
coupled with CST Microwave studio using Object Linking
and Embedding (OLE). The ﬁtness function is a function
of the resonant frequency and return loss. As the structure
resonates nearer to the target frequency the ﬁtness score
increases exponentially. For a return loss less than −10dB
an exponential ﬁtness function was used, for a return loss
higher than −10dB the ﬁtness score is a constant. Thus
a structure with a resonant frequency near the target and
a high degree of matching is considered to be very ﬁt
and has a higher probability of reproducing. Roulette wheel
selection, that considers all individuals, is used to select the
next population. The chromosome length is 143 bits, given
that the feed pixel is permanently ’ON’. A population of
40 chromosomes is chosen as a good tradeoff between a
suitable population size and computational time necessary
to complete a population run. The GA was given 4 target
frequencies to reach as shown in Table I.
Table I
PERFORMANCE FIGURES FOR THE GENETIC ALGORITHM
Target
Final
Population
Number
Frequency
Frequency
Runs
of
/ GHz
/ GHz
Conﬁgurations
3
3.01
10
400
2
2.08
70
2800
1
1.70
70
2800
0.7
1.70
70
2800
The GA is most successful for the 3.0GHz case. It
manages to ﬁnd a solution by considering 400 candidates.
This case is close to the nominal resonant frequency of
3.3GHz. The results agree with results in [15] and [19],
were the target frequencies are close to the nominal resonant
frequency. The 2.0GHz case is also successful although
the number of candidates considered is now 2800. On the
other hand the GA ﬁnds it very difﬁcult to ﬁnd suitable
antenna conﬁgurations as the target frequency got smaller.
For the 1.0GHz and the 0.7GHz target frequencies the GA
fails to ﬁnd a solution after considering 2800 candidates.
Fig.5 shows the best structures that the GA delivered for the
successful frequencies. For smaller frequencies more pixels
had to be switched off, in order to lengthen the path. The
path length needed for resonance at a lower frequency is
longer than that required for a higher frequency and the
GA has to search for a longer time to get closer to a good
shape. The GA performance therefore does not scale well
with frequency.
B. Pruning the GA Search Space
The second experiment introduces a pruning mecha-
nism that improves the convergence of the search, with
special consideration to low frequency targets. The idea
is to eliminate those individuals that are highly unlikely
to contribute towards reaching the goal. To perform such
189
International Journal on Advances in Systems and Measurements, vol 3 no 3 & 4, year 2010, http://www.iariajournals.org/systems_and_measurements/
2010, © Copyright by authors, Published under agreement with IARIA - www.iaria.org

Figure 5.
Best individuals found by the GA for the 3.0GHz and 2.0GHz
cases.
pruning an approximate model is required. The chromosome
is converted into a graph and the path from the feed to
each pixel is calculated. A breadth-ﬁrst search algorithm is
used to ﬁnd the path lengths from the feed position. The
resonant frequency of the antenna is controlled by the length
of the path between two potentially radiating edges and
structures with a long pixel length are preferred for the next
generation. Additionally during the process of selecting the
next generation offsprings that are characterized by a path
length that is similar or larger to the average length of the
previous population are preferred. This was done to push
the population towards structures with longer path lengths.
The GA with the pruning mechanism was tested at a target
frequency of 1.0GHz. Table II shows a comparison of the
results with and without pruning. The results show a marked
improvement in computational time but the GA still ﬁnds
it difﬁcult to converge to the required result. This is an
indication that the pruning model is not adequate.
Table II
PERFORMANCE FIGURES FOR THE GENETIC ALGORITHM WITH AND
WITHOUT PRUNING
Target
Final
Population
Number
Pruning
Frequency
Frequency
Runs
of
/ GHz
/ GHz
Conﬁgurations
No
1
1.7
70
2800
Yes
1
1.52
40
400
C. Conclusions from GA experiments
The GA converges for frequencies that are 60% or higher
than the nominal frequency. There are various reasons why
the GA fails to achieve the objective. An antenna will
resonate at the lowest frequency along the longest path.
If the crossover operation or the mutation operation does
not modify the longest path, then the offspring will not
be an improvement on its parents. The probability of the
latter occurring is quite low if the reconﬁgurable antenna
is encoded into a long chromosome. In summary the GA
has difﬁculty in evolving longer winding paths that can
support the lower resonant modes. The number of iterations
to converge to the target can be effectively reduced by
pruning the search space. The choice of pruning algorithm
inﬂuences the subset of shapes searched by the antenna.
In this case where the pruning algorithm looked for the
longest paths the GA was then constrained to search in
that subspace. The failure in ﬁnding low-frequency compact
structures can therefore be attributed to an inefﬁcient or
incompatible encoding technique. What is required is an
encoding technique that deals directly with shape.
IV. THE COUPLED RANDOM SEARCH - SHAPE
GRAMMAR ALGORITHM
The discussion in this section is grounded on the goal to
develop an algorithm that can efﬁciently tune the RPMA
over the range of mobile frequencies that span from a few
hundred MHz to a few GHz. The problem is formulated as
a search for a patch shape that yields the required frequency
of operation, while minimizing the amount of hardware
switching taking place. Referring to ﬁg.3, the search method
and the approximate/qualitative model are implemented with
a random search method and a shape grammar with feedback
model. Fig.6 shows a system diagram for the algorithm. The
search algorithm receives inputs from the transceiver and
instructs the shape grammar model to suggest a valid shape
that is likely to satisfy the inputs. At this point in time the
search method accepts or rejects the suggestion, depending
on whether it falls or not within a speciﬁed range (soft
loop). If accepted the candidate is hardware switched and
measured feedback is used to accept the candidate or reject
it (hard loop). This random search works on the premise
that the accuracy of the shape grammar model is within
the acceptance range and the designs are therefore close
to the intended targets. As used here the shape grammar
model reduces the global search problem to a local random
search. Experiments show that within 10 − 30 iterations a
solution is found. The rests of this section describes shape
grammars in general and the RPMA shape grammar model.
Finally the algorithm is evaluated and demonstrated with
three examples.
A. Shape grammars
Shape grammars have been originally developed to gen-
erate architectural designs and art works that pertain to a
particular style [20], [21]. Architectural designs are char-
acterized by a well-deﬁned function-shape decomposition
such that the generating engine ﬁrst satisﬁes the functional
requirements and then proceeds to generate the physical
shapes in a particular style. However compact microstrip
antennas, like many engineering artifacts, do not have such
a straightforward shape-function decomposition and instead
190
International Journal on Advances in Systems and Measurements, vol 3 no 3 & 4, year 2010, http://www.iariajournals.org/systems_and_measurements/
2010, © Copyright by authors, Published under agreement with IARIA - www.iaria.org

Figure 7.
The reconﬁgurable pixel antenna shape grammar. This grammar produces shapes that are intended to operate at the fundamental mode of
resonance.
exhibit a strong function-shape coupling, such that a small
change in the topology or form can result not only in a
signiﬁcant change in performance, but can also render the
design invalid. Agarwal and Cagan[22] propose shape gram-
mars as a new framework for geometry-based engineering
expert systems and express their belief that it is the class of
products characterized by a strong function-shape coupling
that stand to gain most from formal design tools because
the lack of a pre-deﬁned generation sequence limits human
designs to only a small set of valid conﬁgurations.
In [23] a coupled shape-function grammar is proposed
for the design of micro-electromechanical resonators. This
is used to generate designs that function as resonators.
The functional requirement is enforced by making sure that
the grammar includes all the necessary elements that are
required for the device to function and validity is ensured
in this respect. The form of the device is then altered by
choosing the rules at random or through a search process.
This grammar does not include any feedback and this means
that the design generated may not necessarily meet or
be close to meeting all the required speciﬁcations for the
intended applications.
191
International Journal on Advances in Systems and Measurements, vol 3 no 3 & 4, year 2010, http://www.iariajournals.org/systems_and_measurements/
2010, © Copyright by authors, Published under agreement with IARIA - www.iaria.org

Figure 6.
Block diagram for the control algorithm based on a random
search method and a shape grammar model.
On the other hand, the microstrip antenna shape grammar
described in [18] which is intended to be used as a generative
engine that helps the antenna designer generate and combine
shapes during the ﬁrst phase of the design process, does
include a feedback mechanism. This feedback consists of
a transmission-line-model formula coupled to the shape
attributes to approximate the frequency of operation and the
input impedance.
B. The pixel antenna shape grammar
In this paper the microstrip shape grammar described in
[18] and extended in [24] is modiﬁed to suit the RPMA.
Fig.7 shows the RPMA antenna shape grammar. The gram-
mar is a discrete and labeled 2D grammar. A shape grammar
consists of four components; the initial shape, a ﬁnite set
of shapes, a ﬁnite set of symbols and a ﬁnite set of shape
rules. The basic shape is the square pixel with four switches,
one on each side. Rectangles emerge and combine from the
union of adjacent pixels. The grammar evolves a shape as
two labeled branches or paths coming out of the probe feed
or a shorting post. The paths formed are thus composed of
cascaded rectangles. The grammar ensures that no branch
overlaps or touches another branch and there are no loops
along one path. This setup is suitable to model structures
resonating at the fundamental mode, including shorted patch
structures.
Fig.8 shows some examples generated by the grammar.
The initial shape of ﬁg.8(a) is evolved by applying the
initial rules. The application of the initial rules (rules 1 to
5) generate a one-pixel-wide antenna shape. Referring to
ﬁg.8(a) the ﬁrst rule applied is rule 1, followed by rule 3.
Rule 1 deﬁnes the ﬁrst pixel as the location for the antenna
feed port. Rule 3 deﬁnes the ﬁrst branch. This branch is
evolved further by successively applying rules 4, 5, 4, 4,
5 and 4. The second branch is deﬁned by ﬁrst applying
rule 2 to the feed pixel and further evolved with a double
application of rule 4. The labels in ﬁg.8 are not all shown for
clarity. Fig.7 deﬁnes the different labels. The black square
deﬁnes a feed pixel. The black arrow indicates the direction
of a path starting from the feed pixel through to the end
of the path, indicating which switch is next turned ’ON’.
The ’x’ label is the path label. So for two paths there are
two path labels, for example ’x’ and ’y’. The path label
is primed along the path and not primed at the end of the
path. Thus the arrow and the path label allow an algorithm
to follow the path. Rectangles are formed by switching an
array of switches. The symbol ’r’ is a unique integer number
given to an emergent rectangle as deﬁned by the shape rules.
The black dot label deﬁnes the interface between rectangles.
These labels are used by the algorithm that manages the
generation of the shape and to calculate the effective end to
end path length, which result is used for the approximate
formula model. Fig.9 shows a fully labeled case generated
by the application of the initial rules.
Figure 8.
Examples of shapes generated by the grammar of ﬁg.7. The
rules applied are shown in brackets at the side of each branch.
192
International Journal on Advances in Systems and Measurements, vol 3 no 3 & 4, year 2010, http://www.iariajournals.org/systems_and_measurements/
2010, © Copyright by authors, Published under agreement with IARIA - www.iaria.org

The structure is further evolved by the application of
the further rules given in ﬁg.7. The structure of ﬁg.8(a) is
considered as an initial shape. The rules (6 to 12) can be
either chosen at random or via a rule selection algorithm. In
this experiment priority is given to evolving the path ends
and followed by sections closer to the feed. Fig.8(b) depicts
a structure derived using such a rule selection algorithm. In
this case rule 6 is applied. Applying rule 11 to the branch
on the right and then rule 13 to the branch on the left results
in the structure of ﬁg.8(c).
Furthermore standard shapes, like the L-shape and C-
Shape, can be deﬁned by a subset of rules, including a
limit on the number of certain rule instances that can be
applied. In this way the control algorithm can test whether
for example an L-shape ﬁts for a given frequency, given that
the feed position is deﬁned. Additionally the line grammar
is implicitly used to explore the design space and therefore
takes into consideration other concurrent shapes when multi-
feeds are present.
Figure 9.
A labeled structure evolved with the initial rules.
As discussed in section III the qualitative model should
deal directly with shape and develop a candidate in a rather
formalized way. The RPMA shape grammar fulﬁlls this
requirement. The shapes generated consist of one feed and
two non-touching branches. The feed is at a ﬁxed position
while the branches can take any shape. To generate a shape
the grammar starts from the feed and evolves two branches
that can take any path, subject to constraints. Additionally
the shape grammar can perturb a shape in an apparent smart
way, mimicing the action of a human being who applies
knowledge to ﬁnd a solution.
C. Approximate Analysis
The shape grammar model relies on the capability of
being able to carry out an approximate analysis of the
structure. Labels are given to rectangles, paths, feed points
and radiating edges. These labels and their positions are
used to obtain the shape attributes; length and widths of
rectangles, path length from feed to radiating edges or path
ends and the presence and location of shorting posts and
feeds. The shape attributes are then used to approximate the
electrical characteristics (frequency of operation and input
impedance) that are used as feedback by the rule selection
algorithm. The quantitative relationship between the shape
attributes and the electrical characteristics is described by a
formula based on the transmission line model.
The resonant frequency depends on the length of the
current path as well as on the degree of meandering. A
function derived from the transmission line model (modiﬁed
from [18]) is used to obtain an approximation for the
resonant frequency in GHz, eqn.1.
f0 = 300/2(Le + (2a0 + a1NC)Lp)
(1)
where Le is the effective path length in mm, NC refers
to the integer number of corners along the path and Lp is
the width of the pixel in mm. Le is the end-to-end distance
obtained by joining the midpoints of the rectangle edges
along the path, as shown in ﬁg.10. The coefﬁcients a0 and
a1 are ﬁtted with a training set obtained from measurements,
which in this study is substituted by a full-wave FDTD
model [25]. For the structure of the RPMA shown in ﬁg.1(a)
these coefﬁcients are manually optimized using a training set
for the lower frequency bands, a0 = 0.55 and a1 = −0.02.
The lower frequency band was chosen since, as previously
shown, is the most challenging for a search algorithm.
Figure 10.
Evaluation of the effective length.
The driving point impedance depends mostly on the
relative position of the feed point along the current path.
The model does not yield a numerical value for the input
impedance or input reﬂection coefﬁcient but gives an indica-
tion of how far away it is from 50Ω, the system impedance.
The input impedance estimate is obtained by considering the
ratio of the effective length for branch ’x’ and the effective
length for branch ’y’, (Lx : Ly). From experiments it is
193
International Journal on Advances in Systems and Measurements, vol 3 no 3 & 4, year 2010, http://www.iariajournals.org/systems_and_measurements/
2010, © Copyright by authors, Published under agreement with IARIA - www.iaria.org

concluded that a good match is obtained when the ratio
Lx : Ly is in the range of 0.7 to 0.85.
Furthermore the Lx : Ly ratio value as well as a0 and a1
in eqn.1 can be tweaked by the learning method shown in
ﬁg.3 with measured feedback.
D. Evaluation Methodology and Results
The effectiveness of the control algorithm in achiev-
ing the targets desired is demonstrated on three cases (a)
pixel-wide meander-line shape resonating at 1.3GHz, (b)
wide meander-line shape at 1.8GHz, and (c) shorted wide-
meander-line shape at 0.9GHz.
For the ﬁrst experiment a 10×10 pixel antenna is assumed.
The total size of antenna patch is 41mm × 41mm and
the size of each pixel is 3.6 × 3.6mm. The height of the
substrate (ϵr=1.0) is 3.0mm. Eight candidate pixel-wide
meander-line shapes that resonate at 1.3GHz are generated
using Algorithm Synthesize A, ﬁg.11, which together with the
shape grammar rules is encoded into C++ code. The can-
didates generated are then simulated with an FDTD model,
which is used as a benchmark and replaces measurements.
The closest candidate to the required resonant frequency is
chosen. Table III shows the resonant frequencies and errors
for these eight candidates under the set of columns Set
A. Candidate #1 is the closest to 1.3GHz with a target
error of 0.143%. The bandwidth of such an antenna is
approximately 3% and therefore this candidate is valid. This
selection task is carried out by the random search method. If
no shape satisﬁes the requirements then the search method
requests more candidates and repeats the process. The same
results can also be used to tune the model coefﬁcients.
Table III shows a second set B, where the best candidate
is off the frequency mark by 0.263%. Fig.12 depicts these
two candidates. This result demonstrates how effective a
grammar based qualitative model can be in reducing the
number of switching iterations required.
Table III
RESULTS SETS A AND B
Set A
Set B
#
Freq
Freq
Target
Freq
Freq
Target
Model
FDTD
Error
Model
FDTD
Error
0
1.286
1.232
5.248
1.265
1.323
1.736
1
1.296
1.298
0.143
1.292
1.261
3.011
2
1.292
1.243
4.353
1.265
1.224
5.837
3
1.282
1.335
2.686
1.295
1.236
4.952
4
1.279
1.345
3.475
1.276
1.277
1.755
5
1.268
1.260
3.056
1.292
1.240
4.600
6
1.292
1.272
2.128
1.289
1.303
0.263
7
1.262
1.315
1.126
1.292
1.259
3.164
In the second experiment the quest is a patch shape
resonating at 1.8GHz. The antenna is a 12 × 12 pixel
structure and the total size of the square antenna patch is
01
Set
frequency
of
resonance
and
desired
input
impedance;
02
Start Synthesis
03
Deﬁne feed position, rule 1;
04
Deﬁne branch ’x’, rule 2;
05
Deﬁne branch ’y’, rule 3;
06
Obtain an estimate for the input impedance;
07
If the input impedance estimate is greater than the
target, extend the shortest branch from the set x,y,
rules 4 or 5; if branch is not extensible goto line 10;
08
If the input impedance estimate is less than the target,
extend the longest branch from the set x,y, rules 4
or 5; if branch is not extensible goto line 10;
08
Obtain an estimate of the resonant frequency;
09
If frequency estimate is greater than the target value
goto line 06;
10
End Synthesis
11
Return estimate of resonant frequency and input
impedance;
Figure 11.
Algorithm Synthesize A: Generates meander-line elements
whose width is equal to one pixel.
Figure 12.
Best candidates in set A and B.
41mm × 41mm with a pixel size of 2.9mm × 2.9mm. The
patch is at a height of 3.0mm above the ground plane. The
candidate shapes are generated using the full grammar and
the algorithm is given in ﬁg.13. For this run the coefﬁcients
are tweaked to a0 = 0.6 and a1 = −0.1. Table IV lists
the ﬁrst 30 candidates in the run. The model formula is
less accurate in this case and therefore on average a greater
number of candidates is necessary for the algorithm to
converge. The best candidate is off the frequency mark by
0.556% and for this case occurs at the 25th iteration. These
two candidates are shown in ﬁg.14.
In the third experiment the quest is a patch shape resonat-
ing at 0.9GHz. The antenna is a 10×16 pixel structure and
the total size of the square antenna patch is 26mm×41mm
with a pixel size of 2.05mm × 2.05mm. The patch is at
a height of 3.0mm above the ground plane. The candidate
194
International Journal on Advances in Systems and Measurements, vol 3 no 3 & 4, year 2010, http://www.iariajournals.org/systems_and_measurements/
2010, © Copyright by authors, Published under agreement with IARIA - www.iaria.org

01
Set
frequency
of
resonance
and
desired
input
impedance;
02
Start Synthesis;
03
Call Algorithm Synthesize A to generate an initial
shape;
04
Deﬁne and reset subsetFlag to FALSE;
05
For Each branch from the set x,y do
06
{
07
For Each rectangle along a branch (starting from the
end) do
08
{
09
Build a subset of applicable rules from the set 6 ...
13;
10
If a subset is not NULL set subsetFLAG to TRUE;
11
Choose a rule from the subset and apply it with a
probability of Pa = 0.8;
12
}
13
}
14
If subsetFLAG == FALSE goto line 16;
15
Goto Line 04 with a probability of Pr = 0.7
16
End Synthesis
17
Obtain an estimate for the input impedance;
18
Obtain an estimate of the resonant frequency;
19
Return estimate of resonant frequency and recom-
puted input impedance
Figure 13.
Algorithm Synthesize B: Generates meander-line elements
whose width is greater than one pixel.
shapes are generated with the full grammar, as in ﬁg.13, and
in this case a shorting post is added. Equation 1 is therefore
adjusted to,
f0 = 300/4(Le + (2a0 + a1NC)Lp)
(2)
Table IV lists the ﬁrst 30 candidates in the run. The best
candidate is off the frequency mark by 0.889% and for this
case occurs at the 19th iteration. These two candidates are
shown in ﬁg.15.
Figure 14.
The best two candidates resonating at 1.8GHz.
Table IV
CANDIDATES FOR THE 1.8GHZ SET AND THE 0.9GHZ SET
1.8GHZ Set
0.9 GHz Set
#
Freq
Freq
Target
Freq
Freq
Target
Model
FDTD
Error
Model
FDTD
Error
0
1.774
1.755
2.481
0.912
0.928
3.089
1
1.817
1.858
3.228
0.889
0.873
2.997
2
1.866
1.871
3.962
0.914
0.950
5.559
3
1.856
1.914
6.327
0.936
0.957
6.300
4
1.774
1.751
2.716
0.989
1.023
13.619
5
1.764
1.692
6.025
0.855
0.848
5.767
6
1.787
1.828
1.542
0.937
0.881
2.109
7
1.908
2.088
15.982
0.937
0.999
11.016
8
1.742
1.637
9.030
0.918
0.982
9.074
9
1.831
1.890
5.006
0.851
0.878
2.446
10
1.805
1.827
1.527
0.833
0.936
3.953
11
1.789
1.730
3.911
0.936
0.850
5.527
12
1.705
1.688
6.244
0.894
0.918
1.963
13
1.815
1.775
1.388
0.823
0.861
4.389
14
1.892
1.785
0.833
0.967
0.925
2.747
15
1.723
1.605
10.807
0.959
1.033
14.752
16
1.750
1.638
8.976
0.827
0.748
16.943
17
1.875
1.723
4.271
0.884
0.879
2.385
18
1.806
1.864
3.558
0.884
0.863
4.157
19
1.856
1.757
2.381
0.831
0.892
0.889
20
1.914
2.019
12.152
0.894
0.878
2.456
21
1.786
1.819
1.040
0.892
0.877
2.508
22
1.735
1.523
15.372
0.912
0.952
5.830
23
1.951
1.763
2.029
0.862
0.824
8.445
24
1.781
1.560
13.345
0.864
0.853
5.273
25
1.975
1.810
0.556
0.877
0.923
2.512
26
1.930
1.936
7.562
0.982
0.951
5.680
27
1.806
1.896
5.340
0.835
0.810
10.014
28
1.822
1.778
1.196
0.928
0.884
1.778
29
1.772
1.994
10.766
0.876
0.766
14.853
Figure 15.
The best two candidates resonating at 0.9GHz.
V. CONCLUSIONS AND FURTHER WORK
A novel algorithm that is based on a shape grammar model
and a random search is proposed for the efﬁcient control
of the reconﬁgurable pixel microstrip antenna (RPMA).
The shape grammar is coupled with formula transmission
line models to generate shapes that are valid in terms of
frequency of operation as well as input impedance. The
shape grammar is intuitively derived from microstrip antenna
design knowledge. The shape grammar is most useful in
generating irregular meander-line antenna shapes commonly
exploited in compact antennas. The performance of the algo-
rithm is demonstrated on three prototypes and is compared
to a Genetic Algorithm (GA) with and without a pruning
mechanism. The proposed control algorithm outperforms the
GA by a factor of 100 and by a factor of 10 when the pruning
195
International Journal on Advances in Systems and Measurements, vol 3 no 3 & 4, year 2010, http://www.iariajournals.org/systems_and_measurements/
2010, © Copyright by authors, Published under agreement with IARIA - www.iaria.org

mechanism is switched on, in the terms of the number of
iterations required to converge. Furthermore the algorithm
scales well as the frequency of operation decreases, whereas
the GA does not.
The experiments reported in this paper highlight the fact
that the transmission line models adopted for the approxi-
mate analysis of a shape are most accurate for the pixel-wide
meander-line examples. As the shape is modiﬁed via the
further rules the accuracy degrades. This is the reason why
more iterations are required for the wider lines. The width of
the line has an effect on the input impedance and to a lesser
extent on the frequency of resonance. Furthermore the width
of the line is not a constant, but varies. Some improvement
can be obtained by re-tuning the coefﬁcients, but in general
a formula model that takes into consideration the widths of
various sections may perform better. Additionally it may be
useful for the algorithm to be able to learn on the accuracy
of the model and predict the number of iterations required.
Further work is required to verify the performance of such
models.
The demonstration in this paper is carried out using a
random search, where the search method obtains a candidate
from the shape grammar, and based on measured results
accepts or rejects the candidate. This process continues till
an acceptable solution is found and there is no attempt to
modify the shape based on immediate measured feedback.
It will be interesting to see whether the inclusion of such a
shape annealing mechanism results in less iterations.
REFERENCES
[1] A. Muscat and J. Zammit, “An efﬁcient algorithm for the con-
trol of reconﬁgurable pixel microstrip antennas,” in Advances
in Circuits, Electronics and Micro-electronics, 2009. CENICS
’09. Second International Conference on, pp. 44 –47, 11-16
2009.
[2] C. G. Christodoulou, D. A. Anagnostou, and L. M. Feldner,
“Re-conﬁgurable antennas,” in IEEE International Workshop
on Anti-counterfeiting, Security, Identiﬁcation., pp. 0–12,
April 2007.
[3] A. Muscat and J. A. Zammit, “Reconﬁgurable antenna struc-
ture for a wideband cognitive radio,” in IET Seminar on
Cognitive Radio and Software Deﬁned Radios: Technologies
and Techniques, pp. 1–5, IET, September 2008.
[4] S. Kingsley, D. Ireland, S. O’Keefe, R. Langley, and L. Liu,
“In search of the perfect handset antenna,” in Antennas and
Propagation Conference, 2008. LAPC 2008. Loughborough,
pp. 62 –65, 17-18 2008.
[5] B. A. Cetiner, H. Jafarkhani, J.-Y. Qian, H. J. Yoo, A.Grau,
and F. D. Flaviis, “Multifunctional reconﬁgurable mems inte-
grated antennas for adaptive mimo systems,” IEEE Commu-
nications Magazine, vol. 42, pp. 62–70, December 2004.
[6] A. Grau, L. Ming-Jer, J. Romeu, H. Jafarkhani, L. Jofre, and
F. D. Flaviis, “A multifunctional mems-reconﬁgurable pixel
antenna for narrowband mimo communications,” in Anten-
nas and Propagation International Symposium, pp. 489–492,
IEEE, June 2007.
[7] A. Grau, J. Romeu, L. Jofre, and F. De Flaviis, “A software
deﬁned mems-reconﬁgurable pixel-antenna for narrowband
mimo systems,” in Adaptive Hardware and Systems, 2008.
AHS ’08. NASA/ESA Conference on, pp. 141 –146, 22-25
2008.
[8] E. Walton, E. Lee, Y. Bayram, A. Duly, B. Salisbury,
G. Bruce, and B. Montgomery, “Reconﬁgurable antenna ar-
rays using pixel elements,” 29th Annual Symp. of the Antenna
Measurement Techniques Association. St. Louis, MO:AMTA,
November 2007.
[9] L. Pringle, P. Friederich, S. Blalock, G. Kiesel, P. Harms,
D. Denison, E. Kuster, T. Fountain, and G. Smith, “Gtri
reconﬁgurable aperture design,” in Antennas and Propagation
Society International Symposium, 2002. IEEE, vol. 1, pp. 473
– 476 vol.1, 2002.
[10] L. N. Pringle, P. H. Harms, S. P. Blalock, G. N. Kiesel,
E. J. Kuster, P. G. Friederich, R. J. Prado, J. M. Morris, and
G. S. Smith, “A reconﬁgurable aperture antenna based on
switched links between electrically small metallic patches,”
IEEE Transactions on Antennas and Propagation, vol. 52,
pp. 1434–1445, June 2004.
[11] L. Pringle, P. Harms, S. Blalock, G. Kiesel, E. Kuster,
P. Friederich, R. Prado, J. Morris, and G. Smith, “The gtri
prototype reconﬁgurable aperture antenna,” in Antennas and
Propagation Society International Symposium, 2003. IEEE,
vol. 2, pp. 683 – 686 vol.2, 22-27 2003.
[12] C. Coleman, E. Rothwell, and J. Ross, “Self-structuring
antennas,” in Antennas and Propagation Society International
Symposium, 2000. IEEE, vol. 3, pp. 1256 –1259 vol.3, 2000.
[13] D. S. Linden, “Optimizing signal strength in-situ using
an evolvable antenna system,” in Proceedings of the 2002
NASA/DOD Conference on Evolvable Hardware, 2002.
[14] Z. Min, L. Xiao-Wu, and W. Guang-Hui, “Preliminary re-
search of the reconﬁgurable antenna based on genetic algo-
rithms,” in 3rd International Conference on Computational
Electromagnetics and Its Applications, pp. 137–140, Novem-
ber 2004.
[15] J. Johnson and V. Rahmat-Samii, “Genetic algorithms in
engineering electromagnetics,” Antennas and Propagation
Magazine, IEEE, vol. 39, pp. 7 –21, aug 1997.
[16] A. Patnaik, D. Anagnostou, C. G. Christodoulou, and J. C.
Lyke, “A frequency reconﬁgurable antenna design using neu-
ral networks,” Antennas and Propagation Society Interna-
tional Symposium, pp. 409–412, July 2005.
[17] A. Muscat, The Design of Low Gain, Wideband and Multi-
band Antennas Employing Optimisation Techniques, ch. Opti-
misation Based Design, pp. 120–174. Queen Mary University
of London, January 2002.
196
International Journal on Advances in Systems and Measurements, vol 3 no 3 & 4, year 2010, http://www.iariajournals.org/systems_and_measurements/
2010, © Copyright by authors, Published under agreement with IARIA - www.iaria.org

[18] A. Muscat, “A shape-function grammar approach for the
synthesis and modelling of pixel-microstrip-antennas,” in Ad-
vanced Engineering Computing and Applications in Sciences,
2009. ADVCOMP ’09. Third International Conference on,
pp. 23 –28, 11-16 2009.
[19] N. Herscovici, M. F. Osorio, and C. Peixeiro, “Miniaturization
of rectangular microstrip patches using genetic algorithms,”
IEE Antennas and Wireless Propagation letters, vol. 1,
pp. 94–97, 2002.
[20] G. Stiny and J. Gips, Algorithmic Aesthetics: Computer
Models for Critisism and Design in teh Arts. Berkeley and
Los Angeles, California: University of California Press, 1978.
[21] U. Flemming, “More than the sum of parts: the grammar of
queen anne houses,” Environment and Planning B: Planning
and Design, vol. 14, pp. 323–350, 1987.
[22] M. Agarwal and J. Cagan, “On the use of shape grammars
as expert systems for geometry-based engineering design,”
Artiﬁcial Intelligence for Engineering Design, Analysis and
Manufacturing, vol. 14, pp. 431–439, 2000.
[23] M. Agarwal and J. Cagan, “A micro language: generating
mems resonators by using a coupled form-function shape
grammar,” Environment and Planning B: Planning and De-
sign 2000, vol. 27, pp. 615–626, 2000.
[24] A. Muscat, “A shape grammar with feedback generative
model for the design of compact microstrip antennas,” in
International Journal On Advances in Systems and Measure-
ments, accepted for publication., 2010.
[25] A. Muscat, The Design of Low Gain, Wideband and
Multi-band Antennas Employing Optimisation Techniques,
ch. FDTD Model for The Patch Antenna, pp. 68–118. Queen
Mary University of London, January 2002.
197
International Journal on Advances in Systems and Measurements, vol 3 no 3 & 4, year 2010, http://www.iariajournals.org/systems_and_measurements/
2010, © Copyright by authors, Published under agreement with IARIA - www.iaria.org

