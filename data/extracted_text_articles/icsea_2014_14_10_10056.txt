The Quantification of Risk Factors for Predicting Diabetic 
Cystoid Macular Edema based on a Hierarchical Approach 
 
Eun Byeol Jo*, Ju Hwan Lee*, Jong Seob Jeong*, Byeong Cheol Choi† and Sung Min Kim* 
*Department of Medical Biotechnology, Dongguk University-Seoul 
Seoul, South Korea 
{eunbyeol27, ykjhlee, jjsspace}@gmail.com, smkim@dongguk.edu 
†Department of Biomedical Engineering, Choonhae College of Health Sciences 
Ulsan, South Korea 
bcchoi@ch.ac.kr 
 
 
Abstract—This study suggests a novel risk factor extraction 
method for retina layers based on a hierarchical approach to 
distinguish Diabetic Cystoid Macular Edema (DCME) from 
optical coherence tomography scans. For this, a total of 80 
subjects composed of 30 normal and 50 DCME patients were 
selected. To estimate evaluation variables, a hierarchical 
approach-based feature extraction algorithm was employed. 
Evaluation variables were classified into the Total Retina (TR), 
the Inner Retina (IR), the Photoreceptor Outer Segment (POS), 
the Outer Retina (OR), the Ganglion Cell (GC), and the 
Retinal Nerve Fiber Layer (RNFL). The experimental results 
show the reliable performance of the proposed approach in 
discriminating DCME from normal subjects. The proposed 
method could differentiate changes in the thickness of the IR 
and the POS between the normal and DCME groups. In 
addition, the most significant degeneration was observed in the 
central macular area. These results suggest the clinical 
applicability of the proposed method to the diagnosis of DCME. 
Keywords-diabetic cystoid macular edema; optical coherence 
tomography; retina layer; thickness; hierarchical approach 
I. 
 INTRODUCTION 
Diabetic retinopathy is one of the most frequent 
complications caused by diabetes. The prevalence of 
diabetes has increased in an aging society, and patients with 
diabetic retinopathy have also been increasing. Among 
various types of diabetic retinopathy, Diabetic Cystoid 
Macular Edema (DCME) is a major cause of vision loss [1]. 
DCME increases the thickness of the retina by accumulating 
liquid inside through the collapse of the retinal barrier and 
causes macular degeneration at the center of the retina where 
images are focused on [2]. 
The diagnosis of DCME is usually performed using the 
Retinal Thickness Analyzer (RTA) [3], Heidelberg Retina 
Tomography 
(HRT) 
[4], 
and 
Optical 
Coherence 
Tomography (OCT) [5]. Among these techniques, OCT is 
known as the gold standard for diagnosing DCME [6] 
because of its superior sensitivity. OCT also allows for the 
quantitative measurement of retina lesions and structures. 
However, OCT cannot identify various intra-retinal 
structures accurately, and the accuracy of extracting macular 
thickness is relatively low. In particular, it represents the 
lowest accuracy for retina nerve fiber layers, where 
photoreceptors exist [7]. 
To address these problems, a number of studies have 
extracted macular thickness based on retinal layer boundaries 
from OCT images. Mujat et al. [8] proposed a novel 
boundary extraction approach for smoothing boundaries and 
reducing the image-processing speed based on the 
deformable spline algorithm. However, this method cannot 
process large amounts of data simultaneously. Koozekanani 
et al. [9] tried to minimize detection errors for retinal 
boundaries by using the standard Markov boundary model 
[10]. Bartsch et al. [11] simply extracted the longest 
boundary appearing continuously in the retina layer based on 
an improved Markov boundary model. Also, Yazdanpanah et 
al. [12] successfully segmented the retina and the choroid 
from OCT images by using a dual-thresholding technique 
and found the availability of only limited information. 
Gonzalez et al. [13] tried to identify retina layers by using 
the Hough transform, but this technique cannot successively 
extract various thickness values. Chiu et al. [14] extracted 
retinal layers by taking a graph-search segmentation 
approach using dynamic programming. Similarly, Yang et al. 
[15] minimized thickness measurement errors by applying 
the weight of graph-based dual-scale gradient information. 
The graph-search segmentation method used in the above 
two studies has a disadvantage in that it takes a long time to 
calculate because the number of operations varies widely 
according to the resolution of images. 
This study estimates the risk factors of retina layers using 
a hierarchical approach-based feature extraction method to 
appropriately distinguish DCME from the original OCT scan. 
The rest of this paper is organized as follows: Section 2 
develops the algorithm and discusses the background of the 
experiment. Section 3 presents the results, and Section 4 
discusses them. Finally, Section 5 concludes. 
II. 
MATERIAL AND METHODS 
A. Image Acquisition 
The experiment included a total of 80 subjects composed 
of 30 normal and 50 DCME patients. These subjects were 
classified into 50 normal and 100 DCME eyes based on a 
clinical evaluation with a trained operator. Retina images 
362
Copyright (c) IARIA, 2014.     ISBN:  978-1-61208-367-4
ICSEA 2014 : The Ninth International Conference on Software Engineering Advances

were acquired using OCT (Cirrus HD-OCT, Carl Zeiss 
Meditec, Inc. Dublin, CA). The Institutional Review Board 
of Dongguk University Hospital approved this study, and all 
participants gave their consent to participate in the study. 
B. Algorithm Development 
To extract the thickness of retina layer, a modified 
hierarchical approach of Koprowski [16] was employed. 
First, denoised images were obtained by applying median 
filtering to the original OCT scan (Figure 1(b)). Then, the 
difference between the original image and the blurred image 
(image mask) was obtained, and synthesis outcomes for 
output and original images were printed. Images from the 
aforementioned step showed a low resolution. To measure 
the retina layer, the image was decomposed into pixels of N x 
N size (N=15, 16, 17) (Figure 1(c)). In addition, thresholding 
techniques using the Otsu algorithm were applied to separate 
the threshold in the degraded image (Figure 1(d)). The pixel 
value of the output image indicated the average value of the 
decomposed image into this N x N size. Based on the average 
value, the maximum pixel value in each column was derived 
as follows: 
 
















other
L m n
L m n
if
m n
L
D
m
D
DM
0
,
max
,
1
,
              (1) 
 
where m and n refer to rows and columns, respectively. 
Based on images acquired from (1), the top image boundary 
was obtained. The lowest boundary of the image was 
measured using the following (2): 
 
















other
P
n
L m
L m n
if
m n
L
r
D
D
DM
0
,1
,
1
,
        (2) 
 
where Pr indicates the threshold in the (0, 0.2) range 
according to each pixel and satisfies m ∈ (1, M-1), n ∈ (1, 
N). Through this process, the bottom boundary of the retina 
layer was extracted, and upper and lower boundaries of the 
retina were obtained (LDM, LDB = 1). The boundary 
coordinate showing a value of 1 in the output image was 
defined as LDB (x) ≤ LDM (x). The boundary coordinate was 
the output a total of three different boundary coordinate 
values based on pixel size. Figure 1(e) shows the synthesis 
results for the original image and three boundary outputs. 
This procedure was repeated to minimize errors during the 
detection of boundaries. The mean value of three boundary 
values was designated as the final boundary value (Figure 
1(f)). All image processing was performed using the Matlab 
software (R2011b, MathWorks Inc., Natick, MA, USA). 
C. Evaluation Variables 
The proposed approach was employed to extract six risk 
factors, including the Total Retina (TR), the Inner Retina 
(IR), the Photoreceptor Outer Segment (POS), the Outer 
Retina (OR), the Ganglion Cell (GC), and the Retinal Nerve 
Fiber Layer (RNFL). The TR was the retina layer from the 
top boundary to the bottom edge (Figure 2), and the IR was 
the retina layer obtained by subtracting the OR and the POS 
Figure 1.  Image processing procedures for obtaining the thickness of 
retina layer. 
 
from the TR. The POS was the lowest retina layer, and the 
OR was the thickness of swelling in the retina layer. Cells 
were distributed in the GCL, which delivered visual 
information to the brain and was included in the TR. The  
 
Figure 2.  The specific positions of each evaluation variables in the OCT 
image. 
 
 
(a) ROI image 
(b) Median filtering 
 
 
(c) Decomposition 
(d) Thresholding 
 
 
(e) Hierarchical approach 
(f) Edge detection 
 
363
Copyright (c) IARIA, 2014.     ISBN:  978-1-61208-367-4
ICSEA 2014 : The Ninth International Conference on Software Engineering Advances

Figure 3.  Regions for measuring risk factors from the center of the 
macula (0.75 mm, 2.00 mm, 3.00 mm, 4.00 mm, and 5.25 mm). 
 
RNFL was the retina layer at the top and included optic 
nerve cells. Figure 2 shows the position of each evaluation 
variable in the OCT image. 
Each evaluation variable was extracted from the original 
OCT image captured within a 3 mm radius from the center of 
the macula. OCT images were divided into a total of five 
measurements (0.75 mm, 2.00 mm, 3.00 mm, 4.00 mm, and 
5.25 mm), and the average value of each measurement was 
specified as an evaluation variable (Figure 3). 
 
D. Statistical Analysis 
Data were analyzed using an independent t-test and a 
one-way ANOVA based on SPSS (Ver. 12.0 for Windows, 
Chicago, IL, USA). A p-value less than 0.05 was considered 
significant. 
III. 
EXPERIMENTAL RESULTS 
A. A Comparison of Thickness Extraction Performance 
between Cirrus HD-OCT and the Proposed Method 
To evaluate the performance of the proposed extraction 
approach, evaluation variables were measured using Cirrus 
HD-OCT equipment, and statistical significance was 
compared. The OCT equipment was only able to measure the 
thicknesses of the TR, the GC, and the RNFL. 
In the normal group, the proposed method showed higher 
reliability than the existing method. The R2 value, which was 
used to evaluate the significance of variables, was close to 1 
(Figure 4). On the other hand, the R2 value of most 
evaluation parameters was close to 1 in the DCME group, 
but the RNFL showed a low value of 0.0446 (Figure 5(d)). 
TR and GC values extracted by Cirrus HD-OCT showed 
significant differences between the normal and DCME 
groups (p <0.05). However, the RNFL showed a low level of 
significance (p>0.05). 
B. A Comparison of Retinal Layers between Normal and 
DCME Groups 
According to correlations between evaluation variables 
for the normal and DCME groups, the TR, the OR, the GC, 
and the RNFL showed high levels of significance in all  
 
 
 
 
(a) TR. center 
(b) TR. mean 
 
 
(c) GC. mean 
(d) RNFL. mean 
Figure 4.  Comparison of the evaluation variables obtained from the Cirrus HD OCT and proposed method for normal subjects 
364
Copyright (c) IARIA, 2014.     ISBN:  978-1-61208-367-4
ICSEA 2014 : The Ninth International Conference on Software Engineering Advances

 
macular regions (p <0.05). On the other hand, the IR and the 
POS showed high levels of significance in the normal and 
DCME groups only in the central macular region (p <0.05), 
and the other areas showed a low level of significance. 
The TR was thicker in the normal group than the DCME 
group in all macular regions. In particular, differences 
increased toward the center of the macula, and the largest 
difference (148.051 mm) was found at the center of the 
macular area. The IR was larger in the normal group than in 
the DCME group (except for the 4.5 mm - 6.0 mm range). 
The largest difference (78.494 mm) was found at the center 
of the macula. In addition, the POS was thicker in the normal 
group, and the difference at the center was 29.421 mm. 
Finally, the GC and the RNFL were larger in the normal 
group. The OR could be measured only in the DCME group. 
For all the aforementioned evaluation parameters, the 
standard deviation was higher in the DCME group than in 
the normal group. Table 1 compares evaluation parameters 
extracted using the proposed method between the normal and 
DCME groups. 
IV. 
DISCUSSION 
The proposed method could measure the thickness of the 
IR, the POS, and the OR, which could not be obtained using 
the existing method. It could also measure the TR, the GC, 
and the RNFL in OCT images. According to a comparison of 
experimental results based on Cirrus HD-OCT, extracted 
evaluation parameters were very similar to those based on 
the existing method. In addition, RNFL values obtained by 
Cirrus HD showed a low level of significance in 
discriminating between the normal and DCME groups, 
 
unlike in the case of other retina layers, providing no support 
for the suitability of clinical RNFL data for diagnosing 
DCME. 
According to the statistical analysis of evaluation 
variables based on the proposed method between the normal 
and DCME groups, the TR, the GC, and the RNFL showed 
high levels of significance for the whole area of the macula. 
This indicates that extracted risk factors were significant 
predictors of DCME. On the other hand, the IR and the POS 
showed low levels of significance in some sections, and the 
center of the macula (clinically the most important area) 
showed a high level of significance in both normal and 
DCME groups. This implies the usefulness of the IR and the 
POS for diagnosing DCME. 
According to a comparison of differences in evaluation 
variables between the normal and DCME groups, the TR 
was larger in the DCME group. This was mainly because the 
whole layer swelled up from retinal edema. The IR was 
much smaller in the DCME group than in the normal group. 
The decrease in the IR typically implies an increased risk of 
vision loss, since the IR includes the GC and the RNFL [17]. 
The POS 
tended 
to become 
thinner 
with 
retinal 
neovascularization, indicating greater damage. Given this, 
the POS was minutely thinner in the DCME group than in 
the normal group, indicating the worsening of retinal damage. 
In addition, the GC and the RNFL were larger in the normal 
group, indicating an increase in the risk of macular 
degeneration [18]. Further, the difference between the 
normal and DCME groups increased significantly in the 
macular area, the center of the retina, because abnormalities 
generally occur first in the macular area, where the optic 
 
 
(a) TR. center 
(b) TR. mean 
 
 
(c) GC. mean 
(d) RNFL. mean 
Figure 5.  Comparison of the evaluation variables obtained from the Cirrus HD OCT and proposed method for DCME group 
365
Copyright (c) IARIA, 2014.     ISBN:  978-1-61208-367-4
ICSEA 2014 : The Ninth International Conference on Software Engineering Advances

 
nerve is mainly distributed. This implies that DCME may 
produce substantial degeneration in the central region of the 
macula and is closely related to blindness. 
V. 
CONCLUSION 
The results suggest that the proposed algorithm can 
reliably differentiate DCME patients from normal subjects. 
In addition, changes in the thickness of the IR and the POS 
may be useful risk factors for diagnosing DCME. Further, 
the most significant degeneration was observed in the central 
area of the macula as DCME progressed. These results 
suggest the clinical applicability of the proposed method to 
the diagnosis of DCME. This study has a limitation in that 
the normal and DCME groups had relatively small numbers 
of subjects. For more reliable results, future research should 
provide additional experiments using a larger number of test 
subjects and a wider range of classification models. In 
addition, the effects of age and gender should be considered 
in the context of DCME. 
ACKNOWLEDGMENT 
This work was supported by International Collaborative 
R&D Program funded by the Ministry of Knowledge 
Economy (MKE), Korea. (N01150049, Developing high 
frequency bandwidth [40-60 MHz] high resolution image 
system and probe technology for diagnosing cardiovascular 
lesion) 
 
REFERENCES 
[1] R. Klein, B. E. Klein, S. E. Moss, M. D. Davis, and D. L. 
DeMets, “The Wisconsin epidemiologic study of diabetic 
retinopathy. IV. Diabetic macular edema,” Ophthalmology, 
vol. 91, no. 12, Dec. 1984, pp. 1464-1474. 
[2] B. E. Bouma, G. J. Tearney, and B. Bouma, “Handbook of 
optical coherence tomography,” Taylor & Francis, Marcel 
Dekker, Inc., New York, 2002. 
[3] Y. Oshima, K. Emi, S. Yamanishi, and M. Motokura, 
“Quantitative assessment of macular thickness in normal 
subjects and patients with diabetic retinopathy by scanning 
TABLE I.  
COMPARISON OF EVALUATION PARAMETERS EXTRACTED FROM OCT SCANS USING THE PROPOSED METHOD BETWEEN THE NORMAL 
AND DCME GROUPS 
 
Horizontal distance 
Normal group 
DCME group 
P-value 
TR 
0~1.5mm 
279.625±22.445 
343.100±72.930 
0.000  
1.5~2.5mm 
318.333±13.760 
398.520±94.999 
0.000  
2.5~3.5mm 
252.229±15.383 
400.280±126.402 
0.000  
3.5~4.5mm 
314.917±17.140 
394.470±92.306 
0.000  
4.5~6mm 
268.979±18.589 
336.020±64.825 
0.000  
Mean 
286.817±11.245 
374.478±76.799 
0.000  
IR 
0~1.5mm 
215.576±24.832 
214.846±55.775 
0.952  
1.5~2.5mm 
251.106±34.584 
215.614±63.400 
0.004  
2.5~3.5mm 
168.793±15.719 
90.299±70.487 
0.000  
3.5~4.5mm 
252.800±14.517 
227.090±51.097 
0.003  
4.5~6mm 
212.302±22.481 
221.624±60.098 
0.362  
Mean 
220.117±12.231 
193.893±34.351 
0.000  
POS 
0~1.5mm 
63.757±6.796 
62.585±19.025 
0.714  
1.5~2.5mm 
67.102±30.696 
56.722±15.494 
0.069  
2.5~3.5mm 
84.915±10.659 
55.494±27.412 
0.000  
3.5~4.5mm 
63.825±6.575 
57.990±15.890 
0.380  
4.5~6mm 
65.948±7.731 
61.190±16.688 
0.114  
Mean 
69.108±5.854 
58.796±10.447 
0.000  
OR 
0~1.5mm 
0.000±0.000 
68.069±47.118 
0.000  
1.5~2.5mm 
- 
130.505±95.987 
0.000  
2.5~3.5mm 
- 
269.684±156.672 
0.000  
3.5~4.5mm 
- 
130.807±105.306 
0.000  
4.5~6mm 
- 
67.118±63.748 
0.000  
Mean 
- 
133.237±70.990 
0.000  
GC 
Minimum 
77.667±4.984 
30.640±24.854 
0.000  
Mean 
81.750±4.162 
57.740±24.891 
0.000  
RNFL 
Mean 
95.708±8.143 
73.900±21.461 
0.000  
366
Copyright (c) IARIA, 2014.     ISBN:  978-1-61208-367-4
ICSEA 2014 : The Ninth International Conference on Software Engineering Advances

retinal thickness analyser,” British Journal of Ophthalmology, 
vol. 83, no. 1, Jan. 1999, pp. 54-61. 
[4] H. J. Zambarakji, W. M. Amoaku, and S. A. Vernon, 
“Volumetric analysis of early macular edema with the 
heidelberg retina tomograph in diabetic retinopathy,” 
Ophthalmology, vol. 105, no. 6, Jun. 1998, pp. 1051-1059. 
[5] M. R. Hee et al., “Quantitative assessment of macular edema 
with 
optical 
coherence 
tomography,” 
Archieves 
of 
Ophthalmology, vol. 113, no. 8, Aug. 1995, pp. 1019-1029. 
[6] D. F. Kiernan, W. F. Mieler, and S. M. Hariprasad, “Spectral-
domain optical coherence tomography: a comparison of 
modern high-resolution retinal imaging systems,” American 
Journal of Ophthalmology, vol. 149, no. 1, Jan. 2010, pp. 18-
31. 
[7] F. A. Medeiros et al., “Evaluation of retinal nerve fiber layer, 
optic nerve head, and macular thickness measurements for 
glaucoma detection using optical coherence tomography,” 
American Journal of Ophthalmology, vol. 139, no. 1, Jan. 
2005, pp. 44-55. 
[8] M. Mujat et al., “Retinal nerve fiber layer thickness map 
determined from optical coherence tomography images,” 
Optics Express, vol. 13, no. 23, Nov. 2005, pp. 9480-9491. 
[9] D. Koozekanani, K. Boyer, and C. Roberts, “Retinal thickness 
measurements from optical coherence tomography using a 
Markov boundary model,” IEEE Transactions on Medical 
Imaging, vol. 20, no. 9, Sep. 2001, pp. 900-916. 
[10] P. Zhou and D. Pycock, “Robust statistical models for cell 
image interpretation,” Image and Vision Computing, vol. 15, 
no. 4, Apr. 1997, pp. 307-316. 
[11] D. U. G. Bartsch, X. Gong, C. Ly, and W. R. Freeman, 
“Optical coherence tomography: interpretation artifacts and 
new algorithm,” Proc. SPIE 5370, Medical Imaging 2004: 
Image Processing, May 2004, pp. 2140-2151. 
[12] A. Yazdanpanah, G. Hamarneh, B. Smith, and M. Sarunic, 
“Intra-retinal layer segmentation in optical coherence 
tomography using an active contour approach,” Lecture Notes 
in Computer Science, vol. 5762, Sep. 2009, pp. 649-656. 
[13] R. C. Gonzalez and R. E. Woods, “Digital image processing 
(3rd edition),” Prentice Hall, 2008. 
[14] S. J. Chiu et al., “Automatic segmentation of seven retinal 
layers in SDOCT images congruent with expert manual 
segmentation,” Optics Express, vol. 18, no. 18, Aug. 2010, pp. 
19413-19428. 
[15] Q. Yang et al., “Automated layer segmentation of macular 
OCT images using dual-scale gradient information,” Optics 
Express, vol. 18, no. 20, Sep. 2010, pp. 21293-21307. 
[16] R. Koprowski and Z. Wróbel, “Image processing in optical 
coherence tomography,” Katowice, Poland, 2011. 
[17] H. Ishikawa et al., “Macular segmentation with optical 
coherence tomography,” Investigative Ophthalmology & 
Visual Science, vol. 46, no. 6, Jun. 2005, pp. 2012-2017. 
[18] J. C. Brown et al., “Detection of diabetic foveal edema: 
contact lens biomicroscopy compared with optical coherence 
tomography,” Archieves of Ophthalmology, vol. 122, no. 3, 
Mar. 2004, pp. 330-335. 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
367
Copyright (c) IARIA, 2014.     ISBN:  978-1-61208-367-4
ICSEA 2014 : The Ninth International Conference on Software Engineering Advances

