Generic Wireless Control System – Case study 
 
Petra Seflova 
Faculty of Mechatronics, Informatics and 
Interdisciplinary Studies 
Technical university of Liberec, TUL 
Liberec, Czech Republic 
seflova@microrisc.com 
Jiri Pos, Vladimir Sulc 
 
 
MICRORISC s.r.o. 
Jicin, Czech Republic 
pos@microrisc.com, sulc@microrisc.com
 
 
Abstract— Due to the increasing number of various types of 
wireless networks and their applications there is also an 
increasing demand for systems enabling to process and display 
data to be  understandable not only to machines but also to 
people. This article describes a generic wireless control system 
for data and event logging with Ethernet connectivity and 
internal web server. It is based on the IQRF platform and an 
Ethernet gateway by MICRORISC s.r.o. The system is fully 
user-adaptable by programming wireless module with 
operating system in C language and a web application using 
PHP scripts. 
Keywords- IQRF, GW-ETH-01, mysql, sql, php, web, 
datalogger 
I. 
 INTRODUCTION  
Current 
industrial 
equipment 
utilizing 
wireless 
communication often requires not only data transfer, 
processing and administration, but also to be displayed in a 
user-friendly format. Another need may be data accessibility 
from everywhere. 
 
Example: Wirelessly transferred data between two 
industrial devices in hexadecimal format is 001F2A3B. This 
code is understandable for a machine but for a human the 
following record is more illustrative: Upper limit: 50°, 
lower limit: 10°. 
 
The task is to design equipment allowing turning of 
pump vanes controlled either at the pump or from a remote 
station, and also via Internet. At the same time there is a 
request to archive all events regarding given equipment. The 
archiving must proceed automatically within a period 
specified by the user. The system should be as robust as 
possible, with low power consumption. The device is placed 
inside the vane, which is why cables cannot be used for 
interconnection. 
Thus, a wireless solution has been chosen. At present, 
several wireless platforms are available: ZigBee [8], MiWi  
[9], IQRF [2], etc. 
ZigBee is a wireless communication technology based on 
the IEEE 802.15.4. standard. It is relatively new, effective 
from November 2004. It is intended for low power devices 
in PAN (Personal Area Networks) and low range (up to 75 
m). Thanks to multihop ad-hoc routing communication is 
enabled also for higher distances without direct visibility. 
ZigBee is primarily used in industry and sensor networks. It 
works in license-free bands 868 MHz, 902–928 MHz and 
2.4 GHz. Transmission rates are 20, 40 and 250 kbit/s. 
IQRF is a platform for low speed, low power, reliable 
and easy to use wireless connectivity. 
 RF bands 868 MHz and 916 MHz (ISM)  
 Based on transceiver modules with built-in operating 
system (OS)  
 Fully open functionality depends just on user-
specific application written in C language  
 Packet-oriented communication, max. 128 B per 
packet  
 Range up to several hundred of meters per hop, up to 
240 hops per packet  
 Extra low power consumption: 900 nA or 2 µA 
standby, 35 µA receiving  
 Low bit rate: 1.2 kb/s – 115 kb/s 
 No license fee 
 
Based on comparison of available platforms, their 
features, availability and costs, the IQRF platform has been 
selected. 
This article is separated into the following sections: 
Section II briefly describing the IQRF platform, Section III 
introducing a web application to manage data, and Section 
IV describing a real application SIGMA. 
 
 
II. 
IQRF 
IQRF is an abbreviation for intelligent connectivity using 
radio frequency. It is a complex communication platform 
with modular components for easy user applications. It was 
introduced in 2004 [10]. It is intended for reliable packet-
oriented low power data transfers, either peer-to-peer or in 
complex networks. Application domains are telemetry, e.g., 
AMR, Smart metering, WSN, Smart grids, automation of 
buildings, e.g., Smart house, HAN and cities (Smart city, 
street lighting), industry and services. This platform is 
163
Copyright (c) IARIA, 2012.     ISBN:  978-1-61208-200-4
ICIW 2012 : The Seventh International Conference on Internet and Web Applications and Services

suitable for almost any electronic equipment where wireless 
communication is needed, e.g., remote control, monitoring, 
alarm, displaying of remotely acquired data or connection of 
more devices to a wireless network.  The platform is 
described in [2]. 
 
A. Tranceiver module 
IQRF transceiver module (TR) is a basic communication 
component of the platform, used not only in common end 
devices but also in all IQRF gateways, routers, etc. 
It is an intelligent electronic board with complete 
circuitry needed for implementation of wireless RF 
connectivity with several peripherals and interfaces. It 
includes a microcontroller with a built-in operating system 
(OS) supporting MESH networking, serial EEPROM 
memory, voltage regulator (LDO) and optionally also 
temperature sensor and built-in PCB antenna. Besides 
general I/Os, SPI running in OS background, I2C and UART 
standard serials can directly be used. The tiny compact 
module with highly integrated design, typically in SIM card 
format 25 x 14.9 mm, requires no external components. 
Several TR types are available differing in performance, 
MCU type, memory size, peripherals, antenna options and 
dimensions. 
Due to extra low power consumption, e.g., 35 µA while 
receiving TRs are suitable even for devices with extreme 
requirements for battery life. TRs work within the license-
free ISM band, 868 MHz in Europe and other countries or 
916 
MHz 
in 
America 
and 
other 
countries. 
All 
communication parameters are software selectable. 
 
 
 
Figure 1. Transceiver module 
 
B. IQRF GATEWAY GW-ETH-01 
 
The 
GW-ETH-01 
Ethernet 
gateway 
[1] 
enables 
connectivity between an IQRF wireless network and a local 
LAN and Internet. The gateway has an internal web server 
allowing communication via HTTPS. Up to two concurrent 
links are allowed at the same time. Additionally, 
communication via the UDP transport layer is possible 
using the IQRF proprietary UDP protocol. 
The main GW-ETH-01 parts are 16b MCU, Ethernet 
driver, EEPROM memory, temperature sensor, IQRF TR 
module with antenna and backup accumulator. 
 
 
 
Figure 2.  Block diagram of GW-ETH-01 
One of communication modes with internal IQRF module 
is a Datalogger [3]. In this mode, operation depends solely 
on the application in an internal TR module. All data sent 
via SPI from the TR module to the GW are stored in a 
circular buffer in the GW without modifications. Every 
packet is equipped with numeric code and time stamp. Data 
can be read from this buffer via the HTTPS interface, or 
user data can be sent via HTTPS to the TR module. 
 
Buffer parameters: 
• Buffer size 7 kB (7 168 B) 
• Packet size 
• Serviceable data 1 to 41 (fixed but user selectable) 
• Overhead 8 B 
 
 
 
Figure 3. Example command for communication with the Datalogger 
 
 
GW-ETH-01 can be used, e.g., for:  
• Remote monitoring and control 
• Data acquisition 
• Data storage – datalogger 
• Connection of more IQRF networks to single PC 
• Access to an IQRF network from more points 
• Time synchronization from  time servers 
• Interface to home automation, etc. 
 
 
164
Copyright (c) IARIA, 2012.     ISBN:  978-1-61208-200-4
ICIW 2012 : The Seventh International Conference on Internet and Web Applications and Services

III. 
WEB APPLICATION 
 
Preconditions: 
• TR in GW and TR(s) in user system are programmed 
according to given needs. 
• The GW must be set in the Datalogger mode 
• In case of Internet connection, the GW must be 
registered and connected to IQRF DNS server    
(Domain Name Server) www.iqrfdns.org [5]. Then 
the GW polls the DNS server for its own IP (Internet 
Protocol) address. 
• Database server, e.g., MySQL or MS SQL running 
and a database created for user application on the 
computer where the application is hosted. 
• Web server, e.g., Apache or IIS (Internet Information 
Server) running on the computer where the 
application is hosted.  
 
Application is designed as a web application based on 
three-layer 
architecture: 
Database, 
Application 
and 
Presentation layers. For security reasons, communication 
runs on HTTPS protocol (Hypertext Transfer Protocol 
Secure) between GW-ETH-01 and the web application. 
The foundation of the application is a Database layer 
using the DBMS (Database Management System) [7]. The 
Application layer is created above the DBMS. It includes 
most of the application logics and ensures communication 
with the other layers. Presentation layer means web browser 
software for interactive user access. This three-layer 
architecture is suitable primarily for easy extendibility. 
Changes in application logics or database scheme can be 
done without the necessity to intervene in the Presentation 
layer, and therefore without intervention in the client part of 
the application. 
Then the application can be written in PHP script 
programming language [4] using the datalogger PHP 
functions downloaded from [1] and hosted on the server. 
More gateways can be used by a single application. The 
application need not be hosted on the user’s server, but it is 
possible to use the server provided within the IQRF 
platform for this purpose. 
 
Database layer 
As a result of analysis, the database scheme has been 
designed. Then scripts in the SQL language have been 
generated to create the database. As an actual database 
server, the MySQL [4] has been selected. It is a powerful 
multiplatform database under GNU General Public License 
which can be easily implemented for Linux, MS Windows 
and other operating systems. Communication is possible via 
the SQL language. Like other SQL databases it is a dialect 
of this language with several extensions. 
 
 
 
Figure 4. Basic database schema 
Application layer 
User interface and an interface for graphic outputs from 
the database are integral parts of the database application. 
For more comfortable user access to data the web interface 
has been selected. It is written in PHP. 
 
IV. 
REAL APPLICATION – SIGMA 
One of the real IQRF applications is control system 
SIGMA for turning of pump vanes. It allows control from 
the control panel at the pump as well as remotely from the 
control room. Additional requests are a possibility to control 
the pump, i.e., to change vane angle or the pump 
configuration remotely via Internet and supervision over 
events related to given pump. 
To enable also manual control from the GW, GW-
QVGA-01 gateway with touch screen can be used instead of 
GW-ETH-01. 
. 
Figure 4. Block diagram of complete system 
165
Copyright (c) IARIA, 2012.     ISBN:  978-1-61208-200-4
ICIW 2012 : The Seventh International Conference on Internet and Web Applications and Services

A. Analysis 
Requirements: 
• Automatic reading from the data buffer 
• Data displaying, filtering and search 
• Pump configuration 
• Changing the angle of pump vanes 
• Remote management – status, setup GW-ETH-01 
parameters, … 
 
Based on these needs with respect to GW-ETH-01 
restrictions followed from parameters mentioned above, a 
solution using a web application has been developed. 
Structure of records (packet) in a data buffer: 
A record consists of three parts:  
• index of packet (2B),  
• timestamp (6B)  
• data (41B).  
The index of packet range is  0000 – FFFE. 
 
Example of a packet: 
 
 
 
#0000#261110021120#00000F0A006400B0FF..… 
F0A01150A190F0000000 
 
Maximum number of packets is 146 in the data buffer.  
146,286
41
6
2
7168
)
(
)
(
)
(
max







length data
length timestamp
index
length
Buffersize
                        (1) 
The buffer is circular (if full, the oldest data is 
overwritten). Thus, timely buffer reading and data 
processing must be ensured regularly. 
 
B. Solutions 
The application includes three parts: 
• Automatic reading from the buffer 
• Administration part 
• User part 
 
1) Automatic reading from the buffer 
 
The principle of automatic reading of the buffer:  
GW-ETH-01 requests IQRF DNS server to detect its own 
IP address regularly (in 10 min increments in this case). The 
IQRF DNS server verifies the MAC (Media Access Control) 
address whether it is in allowed range (00.1F.D5.xx.xx.xx). 
Then it returns the IP address of a given device. 
Additionally, the server checks whether the device is 
registered in application SIGMA. If it is, the server requests 
GW-ETH-01 to send the data buffer and the GW returns the 
content. Application SIGMA recognizes new records 
(compared with last reading) and stores them in the 
database. This principle is depicted on Fig. 4. 
 
Example of communication: 
Request: https://www.iqrfdns.org?IP= 001FD5000048 
Answer: Requested IP Address: 81.25.21.74 
 
2) Administration part 
 
The administration part is intended for: 
• Managing of individual registered devices (GW-
ETH-01), i.e. adding or removing devices, setup of 
rights and changing of registration data like the IP 
address, MAC address, etc. 
• User access management of the application, i.e. 
adding or removing users, changing their rights, 
usernames, passwords, contact information, etc. 
• Defining of individual packets (events) transferred in 
the network. Based on this definition, the data is 
displayed then in the user part of the application in a 
format understandable to humans. Only packets 
undefined in the network are displayed in HEX code. 
 
The principle of event definitions for individual packets: 
Visualization of the data of the packet should correspond to 
user definition. The first byte is the Event header specifying 
the type of the event. The user can fully define descriptions 
for individual types to be displayed in the user part of the 
application. For example, information, error or warning can 
additionally be differentiated here. The body of the event 
with variable length follows. Data is visualized in five fields 
in this example (see Fig. 6): hexadecimal address of the byte 
in the string, data length, description of the byte, range of 
allowed values and a coefficient for recalculation. 
Figure 6 shows the resulting definition of the event. 
 
 
Figure 6.  Example – the RESET event definition 
Index of packet 
Timestamp 
Data 
166
Copyright (c) IARIA, 2012.     ISBN:  978-1-61208-200-4
ICIW 2012 : The Seventh International Conference on Internet and Web Applications and Services

 
Example of data log:  
 
#0000#261110021120#0002010403060514006400CEFF7800B0FFA401C
EFF64000088  
The value 0x00 (red) indicates a reset event in this particular 
case. 
Example of definition of current angle (see Fig. 6): 
It is a 2B information at address 0x07. Recalculation 
coefficient is 10. Allowed range is from -200 to 200 which means 
angle from  -20.0° …. 20.0°. E.g. 1400, LSB first at this address 
(see the log example above)  means  hexadecimal value 0014, 
decimal value 20 and the angle is  2.0°.  
The application is fully generic. Individual definitions of 
bytes and events can be easily added, modified or deleted. 
Example: It is discovered during operation that there is 
a need to include additional information to the packet, e.g. 
number of revolutions per minute. The administrator just 
modifies the packet definition by adding the information 
about the address of given record in the packet, data length 
and adds its meaning in "human" speech. 
 
An example of data visualization is shown on Figure 7. 
Packets can be defined not only for SIGMA, but for 
various applications. The only restriction is packet-oriented 
communication. Packets can have different lengths. 
 
User management allows adding and removing users, 
change data and setup rights. There are three types of users: 
 
• User – with access to User part of application only 
• Administrator – with access to both User and 
Administration parts but with restrictions 
• Super administrator – with access to all parts of 
application without restrictions 
 
 
Figure 7. Event list example 
 
 
3) User part 
 
This part is intended for users to handle data, e.g., 
visualization, filtering and search and if having proper rights 
also to change pump configuration, e.g., limits and work 
values. If commands received via Ethernet are allowed, 
vane angles can be changed too. 
Data can be exported to XLS format for further 
processing (if the user has permission to export). 
All activities accomplished in both Administration and 
User parts are logged. The log is accessible in the 
Administration part. 
 
V. 
ACKNOWLEDGEMENT 
This research has been supported and co-financed by the 
Ministry of Industry and Trade of the Czech Republic under 
contract 
FR-TI3/254, 
project 
"Open 
Platform 
for 
Telemetry". 
 
VI. 
CONCLUSION 
The web application described in this article is designed 
to be as generic as possible and work with various 
applications utilizing the IQRF platform. This approach has 
the following advantages: Visualization is independent of 
the application layer. Thanks to the IQRF DNS server to 
read data from the device buffer it is not necessary to 
program any additional functionality. Handling is very 
intuitive and no extended training of users is needed. IQRF 
protocol, the Apache web server, as well as the MySQL 
database are free resulting in no additional costs required to 
run such applications.  
Specific functionality can be achieved by programming 
TR in C language using OS functions and web application 
in PHP script language using the set of PHP functions. 
Tests have been completed, and, at present, the SIGMA 
application is delivered to its final user for operation in 
practice. 
REFERENCES 
 
[1] 
IQRF:GW-ETH-01 [online]. [retrieved: 3, 2012] 
 http://www.iqrf.org/gw-eth-01. 
[2] 
V. Sulc, R. Kuchta and R. Vrba, “IQRF Smart House - A Case 
Study", 3rd International Conference on Advances in Mesh Networks, 
Venice, Italy, 2010  
[3] 
GW-ETH-01 Datalogger User's Guide [online] [retrieved: 3, 2012] 
http://www.iqrf.org/d=137. 
[4] 
www.mysql.com [retrieved: 3, 2012] 
[5] 
www.php.net [retrieved: 3, 2012] 
[6] 
www.iqrfdns.org [retrieved: 3, 2012] 
[7] 
Raghu Ramakrishnan and Johannes Gehrke: Database Management   
Systems (Hardcover), McGraw-Hill Science/Engineering/Math; 3 
edition (August 14, 2002) 
[8] 
http://www.zigbee.org/  [retrieved: 3, 2012] 
[9] 
http://www.microchip.com [retrieved: 3, 2012] 
[10] Vladimir Sulc: 10 reasons WHY IQRF modules are the best choice 
for IQ applications, RFM Conference, Malaga, Spain, 2004 
167
Copyright (c) IARIA, 2012.     ISBN:  978-1-61208-200-4
ICIW 2012 : The Seventh International Conference on Internet and Web Applications and Services

