Creating Frame Structures for Position-based Hybrid Routing Algorithm 
Resul Kara 
Computer Engineering Department 
Faculty of Engineering, Duzce University 
Duzce, Turkey 
resulkara@duzce.edu.tr 
 
Huseyin Ekiz 
Suleyman Sah University 
Istanbul, Turkey 
hekiz@ssu.edu.tr 
 
Ibrahim Ozcelik 
Computer Engineering Department 
Comp. & Information Sci. Fac., Sakarya University 
Adapazari, Turkey 
ozcelik@sakarya.edu.tr 
 
Murat Iskefiyeli 
Computer Engineering Department 
Comp. & Information Sci. Fac., Sakarya University 
Adapazari, Turkey 
miskef@sakarya.edu.tr 
 
Abstract— Ad hoc wireless networks are composed of mobile 
nodes that communicate with each other without any 
infrastructure like a base station or access device. Routing 
algorithms of ad hoc networks can be classified as table-driven, 
on-demand and hybrid algorithms. Position-based Hybrid 
Routing Algorithm (PBHRA) is a hybrid routing algorithm 
that based on nodes position information. In this study, 
protocol implementation of PBHRA has been done. Frame 
structures of protocol have been formed. The protocol was 
simulated using these created frames. The simulation results 
show that the proposed frame structures suitable for ad hoc 
networks. 
Keywords-routing protocol; wireless network; routing; ad 
hoc network 
I. 
 INTRODUCTION 
Infrastructureless wireless networks, also known as 
Mobile Ad Hoc Network (MANET), are composed of 
randomly moving mobile nodes without a central control like 
a base station or a predefined infrastructure. At the present 
time, these mobile nodes -that may take part in airports, 
ships, trucks, automobiles, very small devices and on people- 
are prevalently used in many industrial and commercial 
applications. This mentioned place necessitates the mobility 
of nodes. Therefore, mobile nodes in ad hoc networks must 
use routing algorithm in order to communicate each other. 
Routing algorithms for MANET can be classified as 
table-driven, on-demand and hybrid algorithms. PBHRA that 
has been developed by us a hybrid routing algorithm depends 
on the node position information. PBHRA and its 
performance analysis have been presented in [1]. 
It is required to establish packet structures for the 
hardware and protocol realization of the routing algorithms 
used for ad hoc and sensor networks. This requirement 
involves determination overhead of packet structure to effect 
of performance. It is important for performance examination 
of algorithms. Accordingly, many researchers have studied 
on determination of frame structure and protocol realization 
for MANET routing algorithm [2-9]. 
In [2], software is developed and an application 
environment is set to apply Ad Hoc On Demand Distance 
Vector (AODV) algorithm as protocol. A protocol 
realization is done on Ns-2 simulator for Dynamic Source 
Routing (DSR) and AODV algorithms and the comparisons 
related to the functioning of these two algorithms as protocol 
are done [3]. 
Protocol design and realization of Fisheye Routing 
Algorithm that aims to decrease the consumption of band 
width studied in [4]. Holter et al. [5] made an 
implementation over Quagga Routing software protocol for 
the realization of wireless Open Shortest Path First (OSPF) 
algorithm that aims to minimize protocol overloads [5]. A 
protocol realization is done on ns-2 simulator for DSR and 
AODV algorithms and the comparisons related to the 
functioning of these two algorithms as protocol are done [6]. 
Working steps of Optimized Link State Routing (OLSR) 
protocol, the selection of detailed multi point relay sets, 
frames used in protocol realization, and their structures are 
given in [7]. The general packet and heading structures have 
been described that is needed to be used for the packet 
exchanges of MANET routing algorithms in routers [8]. 
Since MANET routers themselves are the wireless nodes, 
these structures are also used for protocol realization. In 
another study, Neighborhood Discovery Protocol (NHDP) is 
introduced and frame structures are given [9]. NHDP uses a 
local exchange of HELLO messages so that each router can 
determine the presence of, and connectivity to, its 1-hop and 
symmetric 2-hop neighbors. 
In this study, the proposed frame structures for PBHRA 
will be presented as an original study because they are 
different from the algorithms of PBHRA that are 
implemented above. 
Depending on all these, in this study, PBHRA algorithm 
is Summarized in section II. In Section III, the frame 
structures for implementing PBHRA are given. In Section 
IV, according to evaluation consideration given in RFC 2501 
[10], the parameters/values of PBHRP, which is developed 
in Matlab 7.01, are given; according to performance issues, 
19
Copyright (c) IARIA, 2013.     ISBN:  978-1-61208-284-4
ICWMC 2013 : The Ninth International Conference on Wireless and Mobile Communications

which are specified in same RFC, their analyses are also 
presented. 
II. 
FRAME STRUCTURE OF POSITION BASED HYBRID 
ROUTING PROTOCOL (PBHRP) 
PBHRA algorithm that is suggested in [1] entails to 
provide GPS in every node to determine the positions of the 
other nodes in the network like other position-based 
algorithms. According to the algorithm, the node in the 
center of the network behaves as a master node. Master node 
realizes route determination process using position, node 
density, and battery life information of the other nodes in the 
network.  
PBHRA has the following steps [1]: 
a.The first activated node in the network is assigned as 
master node. 
b.Master node announces master node announcement 
packet periodically to make the network know that it is a 
master node. 
 c.The other nodes in the network send update packets in 
which their position information exists to the master node. 
 d.Master node constitutes position matrix using update 
information. 
 e.Master node constitutes distance matrix after it 
calculates the distances in between every node by using 
position information. 
 f.The node that corresponds to the smallest valued row 
after the row elements of position matrix are summed is 
determined as central and candidate master node is fixed. 
 g.Current master node proposes to be the new master 
node by sending proposal packet to the master node. 
 h.New master node sends master node announcement 
packet to the network. 
i.Other nodes send their update packets to new master 
node if necessary. 
j.Master node calculates cost criterions of every node by 
fuzzy logic method using distance and position matrices, and 
then  fuzzy matrix is constituted [11]. 
k.Optimization is done using fuzzy matrix to determine 
the paths between nodes with the lowest cost. 
l.Nodes ask for the shortest path when they send data to 
another node by sending path demand packet to the master 
node. Master node tells the shortest path to the node which 
demands according to the optimization result. 
m.Master node circuits its role to another appropriate 
node if it moves away from the center or its battery life 
decreases to the below of the threshold value. 
n.Other nodes in the network keep only the identity 
number and the position of the master node in their 
memories. 
The flow chart of PBHRA is given in Figure 1 [1]. 
 
Figure 1.  The flow chart of PBHRA [1] 
III. 
FRAME STRUCTURE OF POSITION BASED HYBRID 
ROUTING PROTOCOL (PBHRP) 
The frame structure of PBHRA whose working steps are 
given above is determined for the protocol realization. 
Designed frames for PBHRP have been given below.  
Master node announcement frame (maf) that is to be sent 
to the other nodes in the network by master node according 
to step b of the algorithm is given in Figure 2. 
20
Copyright (c) IARIA, 2013.     ISBN:  978-1-61208-284-4
ICWMC 2013 : The Ninth International Conference on Wireless and Mobile Communications

 
 
Figure 2.  Master node announcement frame 
According to the structure in Figure 2, the source address 
space of size 6 Bytes is the physical address of the master 
node and the destination address space of size 6 Bytes is the 
broadcast address to enable every node in the network for 
being a receiver. The route information space of size 48 
Bytes is used to be filled by every node which transfers 
master node announcement frame to its neighbors along 
itself. With regard to this structure, the addresses of at most 8 
addresses are stored except source and destination addresses. 
maf is transferred with broadcasting method in this 
algorithm.  
Every node except master node sends update frame (uf) 
that includes position, battery, and density conditions 
according to step c of PBHRA. The structure of the update 
frame is given in Figure 3. 
 
 
Figure 3.  Structure of update frame 
The source address space of the update frame given in 
Figure 3 is the physical address of the node which sends 
data, and its destination address space is the physical address 
of the master node. Route information space is the inverse of 
the route information of maf. So, uf is to be send along the 
way where maf is sent. There exist latitude, longitude, and 
height information gathered from the GPS inside the node in 
the position space. Battery life (as percentage) is given in the 
battery space, buffer fullness rate (as percentage) is in 
density space, and an integer value that is incremented by 1 
in each sending exists in identity space. The value in identity 
space is used by master node to determine whether the 
update frame is old or the new one. uf’s are transferred to the 
network after their destinations and routes are determined. 
They are unicast and source-routing frames. 
According to step d of PBHRA, master node stores 
update information, taken from other nodes, into position 
matrix. According to step b of the algorithm, master node 
calculates the distances between every node by using the 
position information matrix. 
Master node offers a candidate after it determines the 
node at the center of the network by adding the elements of 
the row or the column of the distance matrix. Structure of 
master node candidate suggestion frame (mcsf) is given in 
Figure 4. 
 
 
Figure 4.  Master node candidate suggestion frame 
The source address space is the physical address of 
master node, and the destination address involves the address 
of the candidate master node with regard to mcsf given in 
Figure 4. Suggestion Data space includes “01” value in base 
10. The node which receives the suggestion declares if it 
accepts the suggestion response frame (srf) or not. Data in 
Suggestion Data space of srf given in Figure 5 is made “00” 
to deny the candidate suggestion, and it is made “11” to 
accept the suggestion. 
 
Figure 5.  Structure of master suggestion response frame 
According to step j of the algorithm, master node of the 
network stores the cost values, calculated by fuzzy logic, of 
each node to the others in fuzzy matrix. 
According to step l of PBHRA, a node with a demand to 
send data asks the route through the destination node to 
master node via route demand frame (rdf). Based on the 
structure of rdf given in Figure 6, source address space is the 
physical address of the node which demands, and the 
destination address space is the physical address of the 
master node. Also, demand destination address space is the 
physical address of the node to which the data is intended to 
send. 
 
Figure 6.  Structure of route request frame 
Master node responds with a route response frame (rrf) 
after it receives route request frame. In Route Data space of 
rrf given in Figure 7, there exist physical addresses of nodes 
that include the path from source to destination. There are 
also physical addresses of eight intermediate nodes except 
source and destination. Master node uses the cost data of 
fuzzy matrix for this operation. If need more than eight inter 
node in order to routing data packet, PBHRA proposes node 
clustering [1]. 
21
Copyright (c) IARIA, 2013.     ISBN:  978-1-61208-284-4
ICWMC 2013 : The Ninth International Conference on Wireless and Mobile Communications

 
Figure 7.  Structure of route demand frame 
According to PBHRA, a node which will send data sends 
its data using data frame (df) given in Figure 8 after it learns 
about the path of its destination from master node. 
 
 
Figure 8.  Structure of data frame 
Control and data frames needed to send data in the 
network are formed. In the following sections, some 
simulations on sending data in network are performed by 
using these frames. 
IV. 
PERFORMANCE EVOLUATION OF PBHRP 
A software is developed via MATLAB 7.01 evaluate the 
performance of the developed protocol. In the software, 
some functions are written to achieve the purposes and the 
processes, and a modular software environment is set. 
Evaluation environment and the parameters provided in RFC 
2501 [10] is used for the performance evaluation. 
The parameters below are used for the simulation. 
Number of Nodes: 10, 20, 50, and 100-noded networks 
are used for the simulation. 
Environment Size: A random distribution is used in the 
environment having 5000 m2 per node in both horizontal and 
vertical axes, and 10 m height. 
Packet Size: Fixed-sized data packets of size 512 and 
1024 Bytes are used. 
Number of Sources: 5, 10, 20, and 30-sourced networks 
are considered. Source number denotes the nodes that are 
able to send data packets simultaneously.  
Action Speed: Random-waypoint model is used for the 
nodes acting with random speeds between 0-20 m/s.  
Stagnation Time: 0, 10, 20, 50, and 100 seconds are 
considered as stagnation times. Stagnation time is the time in 
which nodes stay stagnant. 0 second tells that the node is 
always in action, and 100 seconds express that the node 
waits 100 seconds stagnantly after an action. 
Propagation distance: Coverage area of the nodes is a 
circle with radius 100 m. 
Simulation Time: Simulation models are run for 100 
seconds. 
Number of Iterations: Each different network handled 
with simulation software is run 10 times and average results 
are gathered. 
Packet Delivery Rate -one of the criterions used for 
performance evaluation of ad hoc routing protocols- is a 
performance evaluation criterion which determines the 
access rate to packets when they are sent by data sender 
nodes in the network. It is expressed as the rate (as 
percentage) of the packets that reach to their destination. If 
the packets sent by the sender nodes in the network don’t 
reach to their destination, then the packet delivery rate is 
low. If the number of packets that access to their destination 
increase, then the packet delivery rate increases, too. 
Expression in (1) is used to determine packet delivery 
rate. 
100

T
h
n
n
PDO

nh denotes the number of packets that reach to their 
destination, nt is the total number of data packets sent in this 
expression. 
Simulation software is run on 10, 20, 50, and 100-noded 
networks with different stagnation times and different source 
numbers to determine packet delivery rate and the results 
given in Table I are obtained. 
TABLE I.  
 PACKET DELIVERY RATE VALUES FOR 10, 20, 50, AND 100-NODED NETWORKS WITH DIFFERENT STAGNATION TIMES AND DIFFERENT SOURCE 
NUMBERS 
Stagnation Time (s) 
0 
10 
20 
50 
100 
10 Nodes-5 Sources 
99,52 
100 
100 
100 
100 
10 Nodes-10 Sources 
100 
100 
100 
100 
100 
20 Nodes-10 Sources 
97,30029 
96,35286 
96,72257 
97,81829 
100 
20 Nodes-20 Sources 
99,5 
99,75 
98,20567 
99,43567 
99,062 
50 Nodes-10 Sources 
100 
100 
100 
100 
100 
50 Nodes-20 Sources 
100 
100 
100 
99,759 
99,345 
50 Nodes-30 Sources 
100 
100 
100 
100 
100 
100 Nodes-10 Sources 
100 
100 
100 
93,473 
99,623 
100 Nodes-20 Sources 
86,872 
100 
96,397 
100 
100 
100 Nodes-30 Sources 
98,663 
100 
100 
100 
100 
 
22
Copyright (c) IARIA, 2013.     ISBN:  978-1-61208-284-4
ICWMC 2013 : The Ninth International Conference on Wireless and Mobile Communications

According to the values in Table I, the networks with 
high mobility have less packet delivery rate than the 
networks with less mobility. The change in the number of 
nodes in network has not much effect on the performance. 
Proposed PBHRP is compared with DSDV, DSR, and 
AODV protocols, which are the leading in performance 
evaluation in ad hoc networks in terms of packet delivery 
rate. 50-noded and 20-sourced networks with different 
stagnation times are compared and the results are given in 
Table II.  
According to the values in Table II, the proposed PBHRP 
has better packet delivery rate values than AODV, DSDV, 
and DSR protocols.  
Another performance evaluation criterion for routing 
protocols of wireless ad hoc networks is normalized routing 
load. Normalized routing load is determined dividing by 
routing packets to total packets.  
TABLE II.  
 PACKET DELIVERY RATE VALUES OF 50-NODED AND 20-
SOURCED NETWORKS IN PBHRP, AODV, DSDV, AND DSR PROTOCOLS 
Stagnation Time (s) 
0 
10 
20 
50 
100 
PBHRP (PDR %) 
98,62 
98,86 
98,88 
99,34 
99,54 
AODV (PDR %) 
96,97 
98,83 
98,83 
99,07 
99,53 
DSDV (PDR %) 
71,39 
73,72 
67,44 
79,06 
99,53 
DSR (PDR %) 
83,72 
93,25 
92,09 
92,09 
99,53 
 
Simulation software is run on 10, 20, 50, and 100-noded 
networks with different stagnation times and different source 
numbers to determine normalized routing load and the 
results given in Table III are obtained. 
 
TABLE III.  
NORMALIZED ROUTING LOAD VALUES FOR 10, 20, 50, AND 
100-NODED NETWORKS WITH DIFFERENT STAGNATION TIMES AND 
DIFFERENT SOURCE NUMBERS 
Stagnation 
Time (s) 
0 
10 
20 
50 
100 
10 Nodes-5 
Sources 
0,32062 
0,29104 0,27102 0,25795 
0,2357 
10 Nodes-10 
Sources 
0,35207 
0,33053 0,30061 
0,2933 
0,28889 
20 Nodes-10 
Sources 
0,33659 
0,29459 0,26316 0,24513 
0,25496 
20 Nodes-20 
Sources 
0,35704 
0,33475 0,30337 0,30967 
0,29706 
50 Nodes-10 
Sources 
0,34729 
0,24106 0,18958 0,15848 
0,14292 
50 Nodes-20 
Sources 
0,24075 
0,18157 0,16203 
0,1385 
0,12903 
50 Nodes-30 
Sources 
0,21231 
0,17666 0,15236 0,14248 
0,13818 
100 Nodes-10 
Sources 
0,5685 
0,46341 0,35674 0,30115 
0,25547 
100 Nodes-20 
Sources 
0,44066 
0,33952 0,29364 0,26131 
0,24 
100 Nodes-30 
Sources 
0,3923 
0,30951 0,27837 0,25099 
0,23836 
 
According to the values in Table III, in the networks with 
same number of nodes, the networks with large number 
sources have higher normalized routing load. 
TABLE IV.  
NORMALIZED ROUTING LOAD VALUES OF 50-NODED AND 
20-SOURCED NETWORKS IN PBHRP, AODV, DSDV, AND DSR PROTOCOLS 
Stagnation Time (s) 
0 
10 
20 
50 
100 
PBHRP  
0,2408 
0,1816 
0,162 
0,1385 
0,129 
AODV 
0,42 
0,35 
0,38 
0,41 
0,15 
DSDV 
0,37 
0,48 
0,54 
0,37 
0,12 
DSR 
1,3333 
1,3333 
1,2427 
1,2941 
1,0161 
 
According to the values in Table IV, the proposed 
PBHRP has better normalized routing load values than 
AODV, DSDV, and DSR protocols. 
V. 
CONCLUSIONS 
Protocol realization of one of the position-based routing 
algorithms, PBHRA, which is developed to be used in 
mobile ad hoc networks, was presented in this study. 
First of all, the frame structures to be used by the 
protocol are formed. The control frames that the protocol 
will use to control the network and the data frames intended 
to be used to send data are created. 
To test the usability and the performance of the proposed 
protocol, a simulation is performed with MATLAB 7.01. 
With this simulation software, PBHRA is run for different 
node number, source numbers, and different mobility 
scenarios. According to the gathered results, the increase in 
the number of nodes in network does not make any change in 
packet delivery rate. In case of high mobility, the packet loss 
increases 1.6 % in the average. 
It is shown that PBHRP performs better with 16% in case 
of high mobility when it is compared with other protocols in 
terms of packet delivery rate. 
The obtained performance results show that the proposed 
protocol and frame structures are a new alternative for 
mobile ad hoc networks. 
 
REFERENCES 
 
[1] R. Kara, I. Özçelik, and H. Ekiz, “A new Routing Algorithm in 
MANETs: Position Based Hybrid Routing”, Scientific Research And 
Essays,  vol. 5, pp. 328-338, 2010. 
[2] I.D. Chakeres and E.M. Belding-Royer, “AODV Routing Protocol 
Implementation Design”, Proceedings of the International Workshop 
on Wireless Ad Hoc Networking (WWAN), Tokyo, Japan, 2004. 
[3] A.K. Saha, K.A. To, S. PalChaudhuri, S. Du, D.B. Johnson, “Physical 
Implementation and Evaluation of Ad Hoc Network Routing 
Protocols using Unmodified Simulation Models”, Proc. ACM 
SIGCOMM Asia Workshop, April 2005. 
[4] A.C. Sun and A. Ahmad, “Design and Implementation of Fisheye 
Routing Protocol, Msc. Thesis in Electrical Engineering and 
Computer Science, Massachusetts Institute of Technology, 2000. 
[5] K. Holter, A. Hafslund, F.Y. Li, and K. Ovsthus, “Design and 
Implementation of Wireless OSPF for Mobile Ad Hoc Networks”, 
Scandinavian Workshop on Wireless Ad-hoc Networks (ADHOC 
06), Stockholm, Sweeden, May 2005. 
23
Copyright (c) IARIA, 2013.     ISBN:  978-1-61208-284-4
ICWMC 2013 : The Ninth International Conference on Wireless and Mobile Communications

[6] T. Clausen and P. Jacquet, “Optimized Link State Routing Protocol 
(OLSR)”, http://www.ietf.org/rfc/rfc3626.txt , May 2013. 
[7] T. Clausen, C. Dearlove, J. Dean, and C. Adjih, “Generalized Mobile 
Ad 
Hoc 
Network 
(MANET) 
Packet/Message 
Format”, 
http://www.ietf.org/rfc/rfc5444.txt, May 2013. 
[8] T. Clausen, C. Dearlove, and J. Dean, “Mobile Ad Hoc Network 
(MANET) 
Neighborhood 
Discovery 
Protocol 
(NHDP)”,  
http://www.ietf.org/rfc/rfc6130.txt, May 2013. 
[9] S.S. Kumar, M.N. Kumar, and V.S. Sheeba, “Implementation of 
Hybrid Ad-Hoc Routing Protocol Advances in Recent Technologies 
in Communication and Computing (ARTCom)”, 2010 International 
Conference on, 2010,  pp. 151 – 154. 
[10] S. Corson and J. Macker, “Mobile Ad hoc Networking (MANET): 
Routing 
Protocol 
Performance 
Issues 
and 
Evaluation 
Considerations”, 
IETF, 
http://www.ietf.org/rfc/rfc2501.txt, May 
2013. 
[11] R. Kara, I. Ozcelik, and H. Ekiz, “Analysis of Fuzzy Logic Usage in 
PBHRA Routing Algorithm in Wireless Ad Hoc Networks”, 6th 
International Conference on Wireless and Mobile Communications 
(ICWMC-2010), 20-25 Sept 2010, Valencia, Spain, pp. 337 – 342.
 
24
Copyright (c) IARIA, 2013.     ISBN:  978-1-61208-284-4
ICWMC 2013 : The Ninth International Conference on Wireless and Mobile Communications

