Improving the Directed Diffusion in Order to Reduce the Average of Energy 
Consumption in Wireless Sensor Networks 
 
 
Miresmaeil Mirnabibaboli 
Yerevan Telecommunication 
Research Institute  
Armenia,Yeravan 
m.mirnabi@gmail.com 
 
 
Mehdi Mirfattahi 
Computer Engineering Raja 
University of Iran 
Iran,Qazvin 
      m.mirfattahi@gmail.com 
 
 
Mher Markosyan 
Yerevan Telecommunication 
Research Institute 
Armenia,Yeravan 
mark@yetri.am
 
 
 
 
 
Abstract—Network lifetime is an important issue in wireless 
sensor networks.  One of the main problems in directed diffusion 
is the implementation of flooding diffusion used to forward 
interest and discover the routing map that reduces network 
lifetime through high energy consumption. The main purpose of 
this study is to limit flooding for the purpose of increasing 
network lifetime. In this paper, interests are classified based on 
their content; and the network is divided geographically. A 
counter is assigned to each Geographical location that will 
determine the use of Flooding for a potential existence of a source 
and to use Rumor for else where. Using the above mentioned 
recommendations, energy consumption would decrease due to the 
reduction in Flooding; and consequently, network lifetime would 
increase. 
 
Keywords-Wireless Sensor Network; Node; Sink; Directed         
Diffusion; Rumor; Flooding. 
 
I. INTRODUCTION 
Over the past years, there was a substantial progress in 
Wireless Sensor Networks. Wireless Sensor Network is a 
combination of large quantities of small nodes dealing directly 
with the physical environment. These sensors respond to the 
environment and gather its information. It also sends the data 
between the information nodes via wireless transmission. 
Each node works independently and without the need of 
human intervention. Its size is too small and has limitations in 
processing, memory capacity, and power supply. These 
limitations result in some problems which are the source of 
much research in this field. The most prominent concern in 
this network would be the information gathered by network 
sensors. Meanwhile, the network nodes can no longer be used 
after its energy consumption. Therefore, optimization of 
energy consumption in order to increase the network lifetime 
is one of the challenging discussions in this type of networks. 
Recent breakthrough in radio short wave technology and 
micro-electro-mechanical systems led to the invention of 
intelligent sensors that are capable to sense and process data 
in wireless communications. These small sensors can be used 
to gather the ideal information and deliver the sensed data to 
central units called Sinks. Sending the sensed data to Sinks 
might take several steps which is a typical trait for data 
diffusion in wireless sensor networks. 
In recent years [4], [5], [6], many algorithms and protocols 
have been suggested to increase efficiency and reliability for 
data diffusion in wireless sensor networks. For instance, 
flooding diffusion is the most reliable method for transmitting 
data from sensors to the sinks. The implementation is quiet 
easy as flooding protocols do not use any recondite 
algorithms. However, the main problem in this protocol is the 
amount of overhead due to the repetitive messages sent. This 
problem causes inefficiency in energy consumption. To solve 
this problem, a new data centric method has been suggested 
which is quiet different from the traditional routing 
mechanisms used in wireless sensor network. Data centric 
protocols are query-based and are dependent on proper data 
naming (including attribute and value). 
Therefore, redundant transmission of many packets will be 
blocked; and consequently, it will increase the energy 
consumption. Directed diffusion is one of the data centric 
protocols which might be the most common data centric 
protocol due to its energy saving characteristics. For example, 
using interest message for query as well as data gathering, and 
using gradient mechanisms also reinforces routing. The 
gradient is a direction toward the neighbor nodes through 
which sink is accessible. In most data packets of a set, the 
sensor is sent toward sink. Hence, each sensor node tacitly has 
the direction of sink for the purpose of transmission of the 
sensed data toward it. The important issue here is that the 
amount of gradient should be built and maintained within 
each node. Generally, managing the amount of gradient by 
primary and periodically flood diffusion of controlling 
packets is performed via the sink. Notice that this periodical 
flood diffusion will result in too much overhead in sensor 
networks. In addition, in case of a change in network topology 
due to being dynamic or the decay of wireless connections, 
223
SENSORCOMM 2011 : The Fifth International Conference on Sensor Technologies and Applications
Copyright (c) IARIA, 2011.     ISBN: 978-1-61208-144-1

the value of some gradients will be invalid. Hence, the 
repetitive flood diffusion is required. 
Throughout data discovery phase, directed diffusion 
encounters is that when discovered data is sent from source to 
the sink, each node sends this message to all neighbors. It 
happens because the node does not know which neighbor 
node has the ability of sending this data to the sink. 
Consequently, even if the source and sink are very close to 
each other, (Figure 1) many other irrelevant nodes will be 
involved in this connection. 
The main reason for designing directed diffusion is 
increasing the efficiency of energy and thereafter, increasing 
the network lifetime.  
This can be done by the help of two methods of data 
aggregation and in network processing to decrease the 
overhead of data transmission and consequently, lower 
energy consumption. However, due to the use of flooding 
diffusion, this has some limitations that cause too much 
overhead turnout in this algorithm. In this paper, by 
classifying the interests and dividing the network into 
separable areas, we can have a decline in energy 
consumption and an increase in network lifetime. 
 
 
Figure  1. operation of diffusion in forwarding the discovery data 
This paper includes different sections. In Section 2, we will 
study the works already done to improve the directed 
diffusion for the purpose of increasing the lifetime of network. 
Section 3 is regarding the suggestive method. In this part, 
there is a suggestion to improve the directed diffusion to 
increase the lifetime of network in regard to energy 
parameters. Afterwards, we will have the simulation in NS-2 
and finally the result of simulation will be presented in the last 
section. 
 
II. REVIEW OF RELATED WORK 
There has been a great deal of research in wireless sensor 
network routing. One of the outstanding protocols is directed 
diffusion. In this protocol, a sink is responsible for making the 
return route from all sensed sources to sink by sending an 
interest packet. This return route is called “Gradient”. Using 
the interest packets and Gradients the route(s) between the 
source and the sink will be established. Directed diffusion uses 
reinforcement mechanisms to choose a high quality route 
among the several accessible routes to transmit the data.  Based 
on the fact that in directed diffusion, each node sends a packet 
to a designated neighbor in next step through reinforced route, 
many of the tasks are done over the basic directed diffusion and 
each of them improves the overall turnover. 
Basic Directed diffusion algorithm is also called diffusion 
algorithm with the attribute of a two-phase pull. In the first 
phase of this method, the destination node sends an interest 
packet to the network and whenever a node senses the collision 
of the gathered-data by its sensors, it sends a data discovery to 
the destination; while forwarding the interest message, 
gradients try to choose a gradient with the best responding 
time. And this process continues until it reaches the destination. 
After that, the source node forwards the gathered data to the 
destination. However being weak in a small number of 
situations, the two-phase pull is a suitable method for most 
applications. 
Another improvement in directed diffusion is the hexagonal 
diameter based method. In this method, the sensor nodes 
similar to a beehive regularize a constant topology. And the 
main data will be transmitted over the diameter of the 
hexagonal. In fact, the hexagonal diameter is supposed to be 
the main route. In this method, the main routes change 
periodically to distribute the energy consumption among the 
sensors (Figure 2). 
In order to decrease the energy consumption, ‘active’ status 
of sensors is used in the time of forwarding data and ‘inactive’ 
status is used in case the sensors are idle. 
The rate of energy consumption and deferment in 
responding to an interest has a wonderful efficiency in 
comparison with basic forwarding. 
 
 
 
 
 
 
 
 
 
 
 
 
 
Figure  2. The periodic change to distribute the energy consumption 
among the sensors 
Regarding the high cost of directed diffusion in flooding 
diffusion of data to energy source, a method has been devised 
to prevent the waste of energy in [9] entitled passive clustering. 
The main duty of clusters is to optimize the exchange of flood 
messages that prevents a high level of overhead. These 
clustering are forwarded with flooding of the controlling 
messages which occurs when there is no traffic within the 
network; as a result, it causes waste of energy for maintaining 
the structure of the cluster. Passive clustering, on the contrary 
 
 
 
 
 
 
 
Source 
 
Data 
discovery 
(a
(b
224
SENSORCOMM 2011 : The Fifth International Conference on Sensor Technologies and Applications
Copyright (c) IARIA, 2011.     ISBN: 978-1-61208-144-1

to classic clustering algorithm, is dynamic and is created by the 
first flood message.  
In this method, long frequency of cluster adjustment is 
prevented. To do this, controlling messages for maintaining 
cluster are not used explicitly. And all the related information, 
for maintaining clusters in data messages exchanged in 
network, is carried. In fact, passive clustering is an appropriate 
mechanism addressed to increase the efficiency of these crucial 
diffusion phases and consequently, the efficiency of the whole 
protocol. The protocols share some common properties: 
1. They are on-demand mechanisms that maintain the 
operation only in case there is application traffic in need of 
their services. 
2. They purely rely on local information for performing their 
functions. Figure 3 illustrates the structure of directed diffusion 
routing when passive clustering is used. The simulation results 
show that directed diffusion along with passive clustering in 
transmission rate actually increase the density of the network, 
and deferment has a better performance in comparison with 
basic forwarding.  
 
Figure  3. structure of clustered directed diffusion (Gray circles are head 
of groups and diamonds are the gates) 
Based on the type of applications, sensor network have 
different needs. Directed diffusion is a data centric protocol 
whose performance in optimizing the energy consumption will 
be decreased significantly when a proper application is not 
used. In [12], a compatible directed diffusion routing protocol 
have been suggested based on their application. In this plan, a 
general message is used which has the potential of being 
applied to different practical scenarios just by a slight change. 
In this method, different versions of directed diffusion are 
defined in a general message. In fact, according to different 
applications, adaptive directed diffusion changes are made to 
result in the desired version. The results of simulation 
demonstrate that this idea in comparison with other directed 
diffusion in time of change has a good performance and 
application. 
In [15], a method have been suggested which shows using 
two filters with the capability of forwarding increase energy. 
The first filter is a real-time filter which is used to decline the 
end-to-end deferment in real-time traffics. The second filter 
named as the best-effort delivery has been suggested in order to 
reach the global dominant energy as a result of network 
lifetime growth. Besides, a repairing mechanism for restoring 
node decay and connections is implemented for real-time 
traffic. The results of simulation illustrate that the suggested 
method has different service diffusion for real-time traffic and 
best-effort as well as low deferment for real-time traffic and 
totally provides more network lifetime in comparison with the 
basic diffusion. 
In [16], in order to decrease the overhead of network 
resulted by the exchanged packets for periodical diffusion of 
interests, delivering the data discovery to sink will be declined. 
As a result, the energy consumption decreases due to the 
reduction in the number of exchanged controlling messages; 
therefore, the network lifetime increases. In the light directed 
diffusion; first of all, a spars logical topology will be produced 
through simple, local rules. Then, the directed diffusion will be 
implemented on this topology. 
In the mentioned protocols, this section covers only energy 
efficiency using various mechanisms. Following that, in the 
next section, a method is suggested for increasing the network 
lifetime. 
III. SUGGESTIVE METHOD ALGORITHM 
 
A.  Clustering interests 
In order to overcome the limitations discussed in the 
previous section, in suggestive algorithm, we have clustered 
the interests based on demand; for example, clustering the 
temperatures over 35°; by clustering and naming the interests 
will be clustered; as a result, it will be quite easy to recognize 
the source. 
B. Network segmentation 
Network is segmented geographically; nodes store the vector 
and specifications of the neighbor nodes in a table and are 
informed about the neighbors. And their own sink node is 
defined as the vector of the source; and by the help of the 
neighbors’ vectors, the network is divided into necessary 
segments. A variable to each segment is assigned and in case of 
finding the source in that area, the variable will be reported. 
C.  Selection of Diffusion filter 
After clustering, segmentation and assigning a variable to 
each class and area, in the diffusion phase, the variables will be 
analyzed and filter selection will be done based on value. 
Moreover, before transmission, first of all the sink will 
check its variables, when one variable is more than the other 
variables, sink uses flooding phase otherwise, it uses the rumor 
phase. 
The filters used in suggestive method are divided into two 
types by accuracy in search and the rate of energy 
consumption. 
1. Flooding 
2.  Rumor 
 
1. Flooding filter 
225
SENSORCOMM 2011 : The Fifth International Conference on Sensor Technologies and Applications
Copyright (c) IARIA, 2011.     ISBN: 978-1-61208-144-1

In Phase One of this method, the destination node will 
forward an interest to the network. As soon as a node senses 
the adaptation of the gathered data using its sensors with the 
forwarded interest, a discovery data (packet) will be sent to the 
destination and this data will try to select the best gradient with 
the highest quality and the best response time. It will continue 
until it reaches the destination, afterwards, the source node will 
forward the gathered data toward the destination.  
The main station will request the data with an interest 
broadcast. Interest will describe the work that must be done by 
the network. Interest will be forwarded all over the network 
hop by hop. At the same time, each node will forward it to its 
neighbor nodes. As the interest is broadcast throughout the 
network, the routes for forwarding the acceptable data to the 
applicant node will be created. Each sensor receiving the 
interest will create a gradient 3 to the sensor nodes that had 
received the interest.  This will continue until the time the 
gradient from source to the main station is created. Generally, a 
gradient defines an attribute and a route. Stability of gradient 
may vary from one neighbor to the other. Consequently, the 
rate of data stream will be different. Figure 4 shows the 
directed diffusion when the interests match the gradients. The 
data stream routes are a combination of some routes, and then 
the best route will be reinforced by local rules to prevent the 
flooding diffusion. In order to decrease the cost of connections, 
the data will be aggregated in a route. The main goal is to find 
a proper aggregate tree that receives the data from the sources 
and sends it to the main station. The main station periodically 
will be refreshed and will send interest to make sure the 
reliable transmission of data when it begins to receive data 
from the source(s). 
 
Figure  4. directed diffusion operation 
 
2. Rumor filter 
Directed diffusion uses flood forwarding to inject the query 
to the whole network, but in some cases there are only a few 
requests from the nodes; therefore, there is no need for the 
flood diffusion in this case. The flood diffusion is suggested 
when there are few events and many queries. The main goal is 
to clarify the routes for queries from the receiving nodes 
instead of drowning into the whole network to restore 
information about the events. In order to flood diffusion of 
events in the network, the algorithm of Rumor routing packets 
with higher lifetime called ‘agent’ is used. When a node 
discovers an event, it will add that event to its local table called 
as the ‘Events table’ and will produce an agent. The agent 
surveys the network to forward the local events to the far 
nodes. When a node produces a query for an event, the nodes 
that know the path might respond to this query by referring to 
their Events-table. Therefore, there is no need to flood the 
whole network. Consequently, it will cause a decline in the cost 
of connections. In other words, Buzz routing against two-phase 
pull keeps only one route between the source and the 
destination.  As we can see in Figure 5, the steps decrease with 
the cutout of route with source searching, and the energy will 
be saved. On behalf of events, an agent with a definite lifetime 
will be created to survey the network. Meanwhile, the sink will 
deliver its interest to one of the neighbors and the survey will 
continue until the route of agent and diffusion cutout each 
other. With the cutout of the two routes, the table will be 
updated and the new path with fewer steps will be replaced. 
  
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
Figure  5. Operation of propagation rumor 
D.  Diffusion filter management 
Before the discovery stage, first the counter variable is 
analyzed. When the network is initiating, all the counters are 
set by the value of zero. When the values of the counters are 
equal, the two-phase pull method is used. In other words, at the 
time of network start due to the equality of the counters, the 
whole areas of the network will be searched thoroughly to 
discover the source in cases where the values of the counters 
are less than the other ones. In other words, the Rumor filtering 
with low energy consumption rate is used wherever there is 
less probability of source presence. 
226
SENSORCOMM 2011 : The Fifth International Conference on Sensor Technologies and Applications
Copyright (c) IARIA, 2011.     ISBN: 978-1-61208-144-1

0
0.001
0.002
0.003
0.004
0.005
0.006
0.007
50
100
150
200
250
Nmber of Nodes
Deferment average
Suggest Method in
tw o Locations
pcdd
Tow -Phase-Pull
0
0.001
0.002
0.003
0.004
0.005
0.006
0.007
50
100
150
200
250
Numser of Nodes
Deferment Average
Suggest
Method in four
Locations
pcdd
Two-Phase-
Pull
0
0.001
0.002
0.003
0.004
0.005
0.006
0.007
50
100
150
200
250
Number of Nodes
Deliver Rate
Suggest Method
in 4 Locations
Suggest Method
in 2 Locations
pcdd
Tw o-Phase-Pull
0
0.001
0.002
0.003
0.004
0.005
0.006
1
2
4
Number of Locations
50 Node
100 Node
0
0.1
0.2
0.3
0.4
0.5
0.6
50
100
150
200
250
Number of Node
Energy Consumption average
Suggest Method in
4 Locations 
pcdd
Tw o-Phase-Pull
Suggest Method in
2 Locatins
IV.  EVALUATION OF SUGGESTIVE METHOD 
E. Implementation  
In order to implement the algorithm, we use the Diffusion 
3.2.0 code which is given out along with ns-allionone-2.29 
software. In these two packs, there are two versions of directed 
diffusion algorithm including diffusion and diffusion3.  The 
diffusion version is for implementation of simple algorithm and 
therefore takes less detail. In this paper, with a change in filter 
of two-phase pull which is in Diffusion 3.2.0 algorithm, the 
suggestive method is implemented and using API, it is diffused 
as a filter toward the core. 
F. Simulation scenarios 
In this experiment, the number of the nodes is 250 at most, 
and is distributed throughout 160 * 160 square meters. The 
protocol 802.11 is used to simulate the wireless scenario 
Diffusion 3.2.0 in Ns-allinone-2.29. According to energy 
consumption in PCM-CIA WLAN card as ns2 and the nodes 
are expanded in grid. 
TABLE I.         SIMULATION SCENARIOS 
Value 
Parameter 
Diffusion 
IEEE 802.11b 

mw 
0.35mw 
0.0375mw 
0.0325mw 
Two-Ray 
100 bytes 
1Mbps 
90 meter 
13 ~ 48 meter 
 m * m 
 
Routing Protocol 
MAC Protocol 
Radio Transmission Power 
Radio Reception Power 
Radio Idle Power 
Sensing Power 
Radio Propagation Model 
Packet Size 
Data Rate 
Radio Range 
Sensing Range 
Area 
Number of nodes 
V.  SIMULATION RESULTS SURVEY 
In this section, the results of simulation for each of the 
discussed scenarios in previous section are presented. The 
graph regarding the results is illustrated. Then the results of 
each simulation will be studied. 
We have compared our suggestion algorithm with pervious 
algorithms, Two-Phase-Pull and passive clustering directed 
diffusion (pcdd). 
 
 
 
 
 
 
 
 
 
 
 
 
Figure 6. comparison of the amount of delay in two locations 
 
 
 
 
 
 
 
 
 
 
 
Figure 7. comparison of the amount of delay in four locations  
 
 
 
 
 
 
 
 
 
 
 
 
Figure  8. comparison of the amount of delivery 
  
 
 
 
 
 
 
 
 
 
 
 
 
Figure  9. Comparison of the average energy consumption in one, two, and 
four locations 
  
 
 
 
 
 
 
 
 
 
 
 
Figure 10. Comparison of the amount of energy consumption average 
When we increased the number of locations, network’s delay 
decreased. By raising the number of regions, sink could find 
227
SENSORCOMM 2011 : The Fifth International Conference on Sensor Technologies and Applications
Copyright (c) IARIA, 2011.     ISBN: 978-1-61208-144-1

the source sooner than pervious methods and Figure 6 and 
Figure 7 demonstrate this matter. Although pervious methods 
had fluctuations, our algorithm rose slightly; when the number 
of regions increased, the average energy consumption 
decreased. Figure 9 and Figure 10 also present that the amount 
of delivery decreased. 
 
VI.  CONCLUSION AND FUTURE WORK 
 
With increasing the number of locations in each area, fewer 
nodes are used and in case an interface node is spoiled, source 
would not be accessible. As a result, with increasing the 
number of locations when the node is spoiled, access to the 
source might not be possible. However, if the network 
encounters a lot of decay with the addition of locations, the 
delivery rate will get worse. If the locations reach the point that 
there is a node in each location with minimal overhead and 
traffic and 100% delivery, through increasing locations in case 
of presence of an interface node, accessing the source may not 
be possible. Hence in future works, this problem could be 
solved. For example, if eight locations were not found and the 
decay happened, access to the source could be improved by 
decreasing the number of locations to four segments. Our goal 
is to decrease the overhead. Using the limited Directed 
Diffusion, we tried to increase the network lifetime by reducing 
energy consumption. 
 
REFERENCE 
[1] C. Intanagonwiwat, et al.,"Directed Diffusion: A scalable and 
robust communication paradigm for sensor networking," 
MobiCom, Rome, Italy, 2004, pp. 438-449. 
[2] I.F. Akyildiz, et al., "Wireless Sensor Networks: a Survey" 
Computer Networks, Vol. 38, March 2002, pp. 393-442. 
[3] J. Heidemann, F. Silva, and D. Strin, "Matching Data 
Dissemination Algorithms to Application Requirements," 
Proceedings of The First ACM Conference on Embedded 
Networked Sensor Systems (Sensys), November 2004, pp. 218-
229. 
[4] Y. ShyanChen, Y. WenNian, and J. PingSheu, "An Energy 
Efficient Diagonal-Based Directed Diffusion for Wireless 
Sensor Networks," Proceedings of the Ninth International 
Conference on Parallel and Distributed Systems (ICPADS), 
2006 IEEE, pp. 445-450.  
[5] R.D. Pietro, L.V. Mancini, Y.W. Law, S. Etalle, and P. Havinga, 
"LKWH: A Directed Diffusion-Based Secure Multicast Scheme 
for Wireless Sensor Networks," Proceedings of the International 
Conference on Parallel Processing Workshops (ICPPW), 2005 
IEEE, pp. 56-67. 
[6] C. Wong, M. Gouda, and S. Lam, "Secure Group 
Communications 
Using 
Key 
Graphs," 
IEEE/ACM
Transactionson Networking (TON), 2004, pp. 16-30. 
[7] D. Wallner, E. Harder, and R. Agee, "Key management 
formulticast: Issues and architectures," RFC 2627, IETF, June 
2002. 
[8] W. Ding, S.S. Iyengar, R. Kannan, and W. Rummler, "Energy 
Equivalence 
Routing 
in 
Wireless 
Sensor 
Networks," 
Microprocessors and Microsystems, 2006 Elsevier, pp. 467-475.  
[9] V. Handziski, A. Kopke, H. Karl, C. Frank, and W. Drytkiewicz, 
"Improving the Energy Efficiency of Directed Diffusion Using 
Passive Clustering," EWSN, 2007 Springer, pp. 172-187. 
[10] 
D. Bein and A. K. Datta, "A Self-Stabilizing Directed 
Diffusion Protocol for Sensor Networks," Proceedings in 
International Conference on Parallel Processing Workshops 
(ICPPW), 2008 IEEE, pp. 393-422. 
[11] 
Z. Y. Yuan, X. Bo, and Z. Z. Ming, "Adaptive Directed 
Diffusion Routing in Wireless Sensor Networks Based on 
Application," CCECE/CCGEI, 2005 IEEE, pp. 51-58. 
[12] 
W. Marc Lee, V. Wong, "LPT for Data Aggregation in 
Wireless Sensor Networks", IEEE Globecom, 2005, pp. 2069-
2074. 
[13] 
W. Marc Lee and V. Wong, "E-Span and LPT for Data 
Aggregation in Wireless Sensor Networks", Computer 
Communications, Elsevier, 2006, pp. 2506–2520. 
[14] 
C. Min and K. Taekyoung, C. Yanghee, "Energy-efficient 
Differentiated Directed Diffusion (EDDD) in wireless Sensor 
Networks", Computer Communications, Elsevier, 2006, pp. 
231-245. 
[15] 
M. Alessia, N. Michele, P. Chiara, and V. Andrea, "Directed 
Diffusion Light: Low Overhead Data Dissemination in 
Wireless Sensor Networks", IEEE, 2005, pp. 148–159. 
[16] 
C. Sun, H. Lee, and T. Cho "A Path Selection Method for 
Improving the Detection Power of Statistical Filtering in 
Sensor Networks", 2009, pp. 1163-1175. 
[17] 
L. Thanh and J. Levendovszky, "A Novel Reliability Based 
Routing Protocol for Power Aware Communications in 
Wireless Sensor Networks", IEEE, 2009, pp. 1163-1175. 
 
228
SENSORCOMM 2011 : The Fifth International Conference on Sensor Technologies and Applications
Copyright (c) IARIA, 2011.     ISBN: 978-1-61208-144-1

