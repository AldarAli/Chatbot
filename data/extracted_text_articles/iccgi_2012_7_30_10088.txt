Height Map Viewer  
Tool not only for the Laser Engraved Sample Exploration 
Jana Hájková 
Department of Computer Science and Engineering  
University of West Bohemia  
Pilsen, Czech Republic  
e-mail: hajkovaj@kiv.zcu.cz
 
 
Abstract— The paper describes a complex software tool 
designed for exploring height maps. The tool facilitates tasks 
like viewing the height maps in 2D and 3D perspectives, 
measuring their dimensions, computing various statistics for 
them and, most importantly, mutually comparing several of 
them for similarity. The tool originates from a research in the 
area of modeling and simulation of the laser engraving process 
and is used for exploring surface laser engravings digitized by 
a confocal microscope. It may, however, be used with any 
general height maps described in the input format, which is 
designed to be easy to create and human readable. The main 
aim of this paper is to introduce the useful tool to the experts. 
Keywords-height map; visualization; exploration; statistics; 
comparison. 
I. 
 INTRODUCTION 
The effort to develop a height map viewer was part of a 
larger project dealing with modeling and simulation of the 
laser engraving process. Because the results of physical laser 
engraving are very sensitive to various physical parameters 
of the used material as well as the settings of the laser 
device, a simulation model has been developed at the New 
Technology Centre at the University of West Bohemia in 
Pilsen for predicting the engraving results in order to save 
both time and material costs. The predictions are made based 
on data obtained from physical samples engraved so far and 
various statistics computed from them. The physical samples 
vary both in used material and laser settings. They are 
scanned using a confocal microscope and saved in the form 
of a height map. However, this is not sufficient. In order to 
use these height maps with the simulation model, they must 
be explored in more detail to discover various dependencies, 
similarities or differences, and to reject those samples that 
are significantly affected by any adverse effects not related 
with the laser engraving process, such as damages in the 
used material. Because the huge amount of data and the high 
costs of human resources, a high level of automation is 
desirable, especially in comparing several samples for 
similarity. 
As no suitable tool was found among the existing ones, it 
was decided to develop a new one that fits required purposes 
the best. The description of this tool is the main aim of this 
paper. Even though some its functions are closely associated 
with laser-engraved samples (especially the pit/area detection 
algorithms), most its functions are general enough to use it 
for detailed explorations and comparisons of any height 
maps represented in the corresponding input format, which is 
described in Section III.A. The functions of the height map 
viewer are described in Section IV in more detail.  
Laser engraving is a technique frequently used in various 
branches of industry and science. During the laser engraving 
process, the surface of a material is exposed to the activity of 
a laser beam, which affects and modifies it. As the 
electromagnetic radiation of the laser beam strikes the 
surface, the material starts to heat and, if the laser intensity is 
high enough, the rising temperature evocates material 
ablation. More detailed description of the ablation process 
can be found in [1][2]. 
During our research, two different types of engravings 
were processed: single-point engravings and motion 
engravings. Examples of both can be seen in Figure 1. For 
each physical sample, a scenario containing a set of key 
parameters was prepared (number of laser pulses, laser beam 
intensity, motion speed, and the like). Then, a corresponding 
physical sample was engraved (BLS-100 Nd:YAG solid-
material, lamp-pumped laser with the wavelength of 1064nm 
was used) and scanned using a confocal microscope (for 
described samples Olympus LEXT OLS3100 [11] was used). 
 
    
 
Figure 1.  Single-point and motion engravings (used material: cermet). 
A 3D view on a sample exported from the confocal 
microscope can be seen in Figure 2 (the original figure was 
white on black, so this is a negative). The confocal 
microscope also provides other data formats on export, such 
as 2D top views (both in color and in gray scale) and, more 
importantly, heights description in the form of CSV file. The 
scanning of the sample surface is provided in a discrete way. 
Each sample is measured in many parallel cross-sections 
with a pre-defined step distance. The height coordinates (one 
for each cross-section) are saved in plain text CSV file. Input 
and output file formats are the main content of Section III.  
The application and its main functions are described in 
Section II and Section IV. Section V concludes the paper. 
142
Copyright (c) IARIA, 2012.     ISBN:  978-1-61208-202-8
ICCGI 2012 : The Seventh International Multi-Conference on Computing in the Global Information Technology

 
Figure 2.  Sample 3D view exported from the confocal microscope 
(negative image). 
II. 
PROGRAM DESCRIPTION 
The Height Map Viewer is a desktop application licensed 
under CC-BY-NC-S. Downloads are available under [9]. 
The application works in two modes that can be switched 
between: map exploration mode and map comparison mode. 
The map exploring mode can be used to visualize maps in 
2D and 3D perspectives. Moreover, it offers tools for 
performing measurements, exploring cross-sections, as well 
as some functions specific for laser-engraved samples, such 
as automatic detection of heat-affected area [7]. It also 
allows exporting the sample or its parts in several formats. 
The map comparison mode contains tools that can be used to 
mutually compare two samples for similarity. The samples 
can be overlapped and the difference visualized. Also, 
various statistics related to the difference can be computed. 
III. 
INPUTS AND OUTPUTS 
The input and output formats of data are mostly text-
based in order to allow preparing and pre-processing the 
input data and post-processing the output data using the 
many powerful text utilities and to allow preparing a batch 
script for it. 
A. Height Map Input Format 
The application uses an input format that some confocal 
microscope can produce directly and, if not the case, that the 
output of most confocal microscopes can be easily converted 
into. This is important in order to save time on data pre-
processing when measuring physical samples. The format is 
relatively simple - it consists of several headlines containing 
metadata followed by an array of floating point values 
representing the height coordinates. 
Table I summarizes the list of possible headlines that can 
be included in the input file. The headlines can be used in 
any order. However, it is important that the DataLine 
describing the array of height coordinates is used before the 
coordinates themselves appear. The first column of the table 
shows the format of each individual line, the second one 
explains its meaning and shows other acceptable values if 
there are some. The color of rows in Table I specifies, 
whether or not the line has to be included in the file, 
(mandatory lines are highlighted with gray color). Besides 
settings described in Table I, the headlines of the file can 
also contain other information such as calibration data, 
various file names or comments. Such lines are ignored 
during the file load process. 
TABLE I.  HEADLINES THAT CAN BE USED IN THE INPUT FILE. 
Line Format 
Explanation 
Data type =  
Height 
indicates a height map 
Xcv = 0.625 
Ycv = 0.625 
step size in the X and Y direction (sampling raster 
size); this value is used for computing the real size 
of the sample. If no value is defined, step = 1 is used 
Xunit = um 
Yunit = um 
Zunit = um 
real units for all three axes (um = µm) 
Along x-axis 
indicates the direction of sample measuring (x-axis: 
each data line represents one column of the sample; 
y-axis: sample is represented row by row) 
DataLine, 
Pos = 0,Pos = 1,  
... , Pos = 300 
line placed before the height coordinates data, the 
number of values indicates the number of rows (x-
axis) or columns (y-axis) measured in the sample 
0.0,2.6499, 
2.6556,2.6631... 
floating point values representing the height 
coordinates of the sample surface in the particular 
measuring points; separated with comma, the first 
value of the row represents the real distance of the 
row (column) from the borderline of the sample 
 
To gain a better imagination of how the data look like, the 
following example shows a description of a small (five rows 
by ten columns) sample. The measurement was performed 
along to the x-axis; it means that lines of the height map 
file represent columns of the sample (Figure 3a). Than the 
direction of saved values (headline Along) from x-axis 
to y-axis was changed. In such case, the file would 
represent a sample with ten rows and five columns. In both 
figures, each value is depicted as the square of the gray scale 
adequate to the height value (Figure 3b).  
 
Data type = Height 
Xcv = 0.5 
Ycv = 0.5 
Xunit = um 
Yunit = um 
Zunit = um 
Along x-axis 
DataLine,Pos = 1,Pos = 2,Pos = 3,Pos = 4,Pos = 5 
0.00,0.0,0.0,0.59,1.26,1.62 
0.50,0.0,0.92,2.0,2.82,3.27 
1.00,0.59,2.0,3.27,4.31,4.92 
1.50,1.26,2.82,4.31,5.63,6.53 
2.00,1.62,3.27,4.92,6.53,7.99 
2.50,1.62,3.27,4.92,6.53,7.99 
3.00,1.26,2.82,4.31,5.63,6.53 
3.50,0.59,2.0,3.27,4.31,4.92 
4.00,0.0,0.92,2.0,2.82,3.27 
4.50,0.0,0.0,0.59,1.26,1.62 
 
                       a) 
 
b) 
 
Figure 3.   Visualization of the sample, where the value for Along as: 
(a) x-axis; (b) y-axis was used. 
143
Copyright (c) IARIA, 2012.     ISBN:  978-1-61208-202-8
ICCGI 2012 : The Seventh International Multi-Conference on Computing in the Global Information Technology

B. Outputs and Exports 
During the exploration of a height map, some results 
typically need to be saved for future use. Thus, the 
application allows saving parts of the height map, their 
visualizations or cross-section plots. The possible outputs 
and their formats are described in the following sections. 
1) Sample Surface 
The whole sample can be saved in two different ways. 
The first one saves the whole sample or its part bordered by a 
selection rectangle in the text format described in Section A. 
It can be used, e.g., to cut off border areas of the height map 
which should not be processed or to crop the height map 
after rotating it. If the whole height map is selected, no 
height map values are lost in comparison with the original 
surface. The saved file can be reloaded and processed in the 
same way as the original one. 
The second way saves a grayscale representation of the 
current view on the height map. The user can choose from 
several image formats – BMP, JPG, and PNG. The current 
view is always saved with all the tools (selection, cross-
section lines, ruler, etc.) that are actually shown. This is 
useful when measures or statistical data are desirable to view 
along with the height map itself (as shown in Figure 4), 
which is typical for images intended to be published. 
 
a) 
b) 
 
 
Figure 4.  Images saved with (a) cross-sections and height scale; (b) ruler 
and selection rectangle. 
2) Cross-Sections 
When working with height maps, it is sometimes useful 
to save separate cross-sections for further processing. 
Because the 2D visualization uses them as its fundamental 
part, the possibility of exporting them is a native part of the 
height map exploration. The cross-sections can be saved both 
as images and as sets of values. The set of values is exported 
as a simple CSV file. This allows further processing of the 
data, for example in a spreadsheet processor. The file 
contains the described direction (x – vertical cross-section; y 
– horizontal cross-section; line – cross-section along the line 
segment) followed by the actual height coordinates, each on 
its own line. The export as an image enables its further 
comparison, presentation or retainment. Several parameters 
of the image export (background color, plot height scale, font 
size, and the like) can be set. An example of a simple cross-
section plot can be seen in Figure 5. It is possible to export 
vertical or horizontal cross-sections from the whole sample 
or just from the area bordered with the selection rectangle. It 
is also possible to draw an arbitrary line and to get the 
surface cross-section along that line. For the line 
rasterization, the DDA algorithm [13] is used. 
 
Figure 5.  Exported simple cross-section plot. 
IV. 
IMPORTANT FUNCTIONS 
The important and useful functions of the viewer are 
described in the following sections. Besides the principal 
function of visualizing the data and couple of specialized 
functions for exploring them, there are also general functions 
not described in detail. Especially functions for opening and 
saving the data (the format alternatives were mentioned in 
Section III.B), selecting them, rotating them, and the like 
belong into this group. 
A. Height Map Visualization 
During the height map visualization, it is necessary to 
map the three-dimensional object (surface of the sample) 
onto a two-dimensional plane (screen or paper). There are 
two possible approaches that can be successfully combined, 
namely the three orthogonal 2D views on the object along 
with its 3D visualization. This combination is also often used 
by many 3D modeling programs. 
1) 2D Visualization and Control 
The first approach of the 3D object visualization is the 
usage of three orthogonal views on a 2D plane. As shown in 
Figure 6, there is one top view together with two cross-
section plots. 
The top view is represented by a grayscale image, where 
each point of the surface is represented in gray shade 
corresponding to its height coordinate. There are also two 
orthogonal lines in the top view. They indicate the position 
of the cross section plots shown left and below the top view. 
By moving these lines, it is possible to explore the exact 
shape of the surface. To explore the height map in a more 
precise way, a ruler and a heightscale can also be used. Their 
usage is described in Section B.  
 
 
Figure 6.  The three views of the 2D visualization. 
For the control of 2D visualization it is possible to use 
only the mouse clicking and dragging and also a specialized 
control panel that is placed on the right side of the main 
window. In the main (top) view on the sample selection 
rectangle can be shown or hidden (only by one single click in 
the view), its size and position can be changed (if the user 
144
Copyright (c) IARIA, 2012.     ISBN:  978-1-61208-202-8
ICCGI 2012 : The Seventh International Multi-Conference on Computing in the Global Information Technology

drags the border by mouse). If cross-section lines are shown, 
they can be moved (also by drag and drop) and the cross-
section relief of the moved direction is modified 
immediately. Selection and cross-section lines positions can 
be adjusted also in vertical and horizontal views. 
To enable better and exact height map exploration, ruler 
and heightscale can be used. Both tools are activated on the 
viewer initiation; they can be activated and deactivated as 
needed (in menu or by shortcuts). Their usage is described in 
Section B. 
The control panel (shown in Figure 7) in the right part of 
the window is divided into three parts. The first one 
(Sample) informs about the height map size (according to 
values Xcv and Ycv defined in the input file – see Table I) 
and the minimal and maximal heights on the surface. The 
second part (Selection) enables exact setting of selection 
rectangle (its each border), its motion or changing of its 
height and width. For each operation a special button can be 
used. It is also possible to set the exact proportion of height 
and width of the selection area. If it is activated, the selection 
proportions are fixed during each manipulation. In this part 
of control panel also the real size of selected area is 
computed. Value named as Limit is a threshold computed 
automatically from the sample that is used during the 
automatic detection of the heat-affected area described in 
Section IV.C. The last part of the control panel (Cross-
section) works with cross-section lines, enables their 
exact motion (also according to their real position) and 
enables to show and hide them. Control panel contains also 
several individual buttons for the selected area saving, 3D 
visualization initializing and closing the whole viewer. 
 
 
Figure 7.  The control panel on the right side of the viewer window. 
2) 3D Visualization and Control 
If viewing the height map as a whole is desired, 3D 
visualization can be used (see Figure 8). The 3D plot is very 
realistic, but exploring the height map in detail or performing 
precise measurements is difficult using this view, because 
the control of the object space orientation is more 
complicated. There are two modes of visualization that can 
be switched between - a smooth surface (see Figure 8) and a 
wire model (see Figure 9). In both modes, the surface plot 
can be moved, scaled, and rotated. Both modes use the 
height map visualization module [8]. 
 
 
Figure 8.  3D height map visualization of a smooth surface. 
 
Figure 9.  Wire model of the 3D surface with a help shown in the top left 
corner. 
B. Admeasurements and Volume Computations 
The height map viewer provides detailed surface 
exploration using several measurement tools. The first one is 
called ruler. If activated, the coordinates of the current cursor 
position are shown in the right bottom corner of the central 
view. To measure a distance, two points on the surface have 
to be selected. This can be done by the clicking on the 
surface using the right mouse button. The selected points are 
visualized on the surface as small crosslines. When the 
second point is selected, their distance is computed and the 
result is shown in the right bottom corner of the central view. 
A similar function can be used in both cross-section views. 
In this case, the distance of heights of the two points can be 
measured as well. An example of using the ruler can be seen 
in Figure 10 (the top image shows the central view and the 
145
Copyright (c) IARIA, 2012.     ISBN:  978-1-61208-202-8
ICCGI 2012 : The Seventh International Multi-Conference on Computing in the Global Information Technology

bottom image the horizontal cross-section view). The 
selected points can be discarded by another click using the 
right mouse button. The ruler control points in each 
particular view are independent of each other.  
 
 
 
 
Figure 10.  Ruler function - an example of results. 
The second tool is the heightscale. If activated, the 
grayscale from white (maximum) to black (minimum) is 
shown in the right top corner (see Figure 11). The height of 
the current cursor position is marked on the height scale. 
When the cursor moves outside the central view, the height 
of the intersection of the cross-section lines is marked 
instead. The heightscale tool shows also the height of the 
current cursor position (as shown in Figure 12) and 
description of the position of cross-section lines crossing. It 
is activated in all the three views simultaneously using the 
heightscale tool. 
 
 
Figure 11.  Heightscale function – an example of results. 
 
Figure 12.  Height of the current position. 
The third tool that can help in exploring the sample is 
statistics calculator. It summarizes the information about the 
sample (e.g., its size or minimum and maximum values) and 
computes the volume of retained/ablated material. The 
volume above and below the basic material level is 
computed either for the whole surface or for the surface of 
the currently selected area. It is also possible to provide an 
automatic detection of the heat-affected area directly from 
the statistics dialog. Because the computed volumes depend 
on the material basic level setting, the user can choose from 
three different modes of computing it (also shown in 
Figure 13). 
 
 
Figure 13.  Statistics function - an example of results. 
C. Automatic Engraved Area Detection 
These functions may not be useful for different types of 
height maps, but they can significantly speed up the 
exploration of laser engravings, where the material is 
modified by the laser beam in a single area. The algorithms 
used for these methods are described in [3][6]. The detection 
methods may be used for all height maps, but because they 
are designed for a specific type of height maps, the 
advisability for different height map types is disputable. All 
detection methods are available from the Pulse Detection 
menu. The user can choose from the following methods: 
statistical, spiral, or clipping. The result of these methods is a 
selection sized and positioned according to the result of the 
detection. It is also possible to run all the methods and to 
compare their results. This approach was used in [7], for 
instance, and is shown in Figure 14. There are also several 
other functions that can be used during data preprocessing 
and that work with semi-results of some of the detection 
methods. 
D. Height Map Comparisons 
The second mode of the Height Map Viewer serves for 
comparing a pair of height maps. To visualize the 
differences, the 2D visualization mode is used. Both samples 
146
Copyright (c) IARIA, 2012.     ISBN:  978-1-61208-202-8
ICCGI 2012 : The Seventh International Multi-Conference on Computing in the Global Information Technology

should be opened at the same time and overlapped into the 
optimal and fitting position. The overlapping can be done 
automatically or by the user (the second sample can be 
moved by holding the Ctrl key). 
 
 
Figure 14.  Comparison of results of all the detecting methods. 
Finally, the samples can be visualized in three different 
ways - as both samples overlapped over each other (can be 
seen in Figure 16) or as the difference image in either linear 
or logarithmic scale [10] (Figure 15). 
 
 a) 
b) 
 
 
Figure 15.  Comparison of two height maps: (a) difference image in linear 
scale; (b) difference image in logarithmic scale. 
For either case, all the functions for exploring 2D 
visualization described above can be used and their results 
are adapted to the comparison mode. That means, if both 
height maps are shown together, the heights for both of them 
are shown and it is possible to measure differences between 
them. An screenshot of the comparison mode can be seen in 
Figure 16.  
 
 
Figure 16.  Visualization of compared height maps. 
V. 
CONCLUSION AND FUTURE WORK 
The Height Map Viewer has been created to simplify 
exploring of height map surfaces and to enable to process 
height maps with a user friendly tool. It offers a broad range 
of functions for data processing and its export. The tool is 
used, among others, by the team of experts from the New 
Technology Center at the University of West Bohemia in 
Pilsen performing research in the area of lasers and helps 
them to explore laser-engraved samples measured by a 
confocal microscope. 
The tool can be downloaded from [9]. However, thanks 
to the universal text-based input format, it can be also used 
for different purposes, where height maps need to be 
explored in detail. The functionality of the tool can be further 
extended in dependence on actual demands. 
ACKNOWLEDGEMENT 
I acknowledge Ing. Petr Zelenka for language help and 
proofreading of this paper. 
REFERENCES 
[1] S. I., Anisimov, Vaporization of metal absorbing laser 
radiation. Soviet Physics JETP 1968, Vol. 27, pp. 182. 
[2] N. B. Dahotre and S. P. Harimkar, Laser Fabrication and 
Machining of Materials, Springer, New York 2008, USA. 
[3] Official Java website [online] http://www.java.com/en/  [cit. 
2011-10-05] 
[4] Java3D official website [online] http://java3d.java.net/  [cit. 
2011-10-05] 
[5] J. Hájková, LASER SIMULATION - Methods of Pulse 
Detection in Laser Simulation in Proceedings of the Third 
International Conference on Software and Data Technologies 
ICSOFT 2008, Porto, INSTICC, 2008, pp. 186-191. 
[6] J. Hájková, Data Processing for Simulation of Laser Beam 
Impact – Statistical Method for the Heat-Affected Area 
Detection in Proceedings of the First International Conference 
on Computational Intelligence, Modelling and Simulation 
CSSim 2009, Brno, Czech Republic, 2009, pp. 69 – 74. 
[7] J. Hájková, Laser Engraving Modelling – Comparison of 
Methods for the Heat-Affected Area Detection in Proceedings 
of the 10th International Conference APLIMAT 2011, STU 
Bratislava, 2011, pp. 1191-1199. 
[8] JHeightMap Module [online] 
http://www.kiv.zcu.cz/~hajkovaj/sw/JHeightMap/index.html 
[cit. 2011-10-03] 
[9] Height Map Viewer [online] 
http://www.kiv.zcu.cz/~hajkovaj/sw/HeightMapViewer/index
.html [cit. 2011-10-04] 
[10] Logarithm Operator [online] 
http://homepages.inf.ed.ac.uk/rbf/HIPR2/pixlog.htm 
[cit. 2011-03-13] 
[11] Olympus LEXT OLS3100 [online], [cit. 2012-04-18]. 
http://www.olympus.co.uk/microscopy/26_LEXT_OLS3100.htm  
[12] W. M. Steen, Laser Material Processing. Springer-Verlag, 
New York Berlin Heidelberg, 1991. 
[13] A. Watt, 3D Computer Graphics, 3rd edition, Addison-
Wesley, 2000. 
147
Copyright (c) IARIA, 2012.     ISBN:  978-1-61208-202-8
ICCGI 2012 : The Seventh International Multi-Conference on Computing in the Global Information Technology

