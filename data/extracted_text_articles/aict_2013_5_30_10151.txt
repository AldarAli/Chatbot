Indoor Localization for Multi-Wall, Multi-Floor Environments in  
Wireless Sensor Networks 
 
Xiao Fan and Yoan Shin 
School of Electronic Engineering  
Soongsil University  
Seoul, Korea  
{xiaofan; yashin}@ssu.ac.kr 
 
 
Abstract—In recent years, importance of indoor localization 
has increased in Wireless Sensor Networks (WSNs). 
Extremely complex nature of the indoor environments 
makes WSN research more difficult than in the outdoor 
counterparts. In WSNs, the Received Signal Strength (RSS) 
from sensors is usually utilized to locate unknown sensors or 
nodes. However, the RSS is relatively sensitive to indoor 
obstructions such as walls and ceilings between adjacent 
floors. Various indoor localization algorithms are available, 
but most are not suitable because of the complex indoor 
environments. This paper proposes a novel localization 
scheme which uses vertical allocation of beacon sensors to 
estimate floor attenuation and wall attenuation. These two 
parameters are then used to identify the floor number and to 
estimate the horizontal localization of an unknown node, 
respectively. Simulation results show that both schemes 
provide accurate localization performance. 
Keywords—Wireless sensor network; Indoor localization; 
Multi-floor; Multi-wall; Attenuation; Received signal strength 
I. 
INTRODUCTION  
With the development of wireless networks and digital 
communication devices, people are paying increasing 
attention to location-based services. These can be applied 
in many fields such as vehicle systems, tourist guides, and 
personal security, to name a few. The Global Positioning 
System (GPS) is a mature and widely used technique, 
especially in outdoor positioning or localization, due to its 
high accuracy [1]. Unfortunately, GPS is not suitable for 
large-scale sensor networks because of its high hardware 
costs and energy requirements. More importantly, GPS is 
not suitable for use indoors because of its low penetrating 
satellite signals. Hence, indoor localization technology is 
more challenging, and it has become an important focus of 
research interest in recent years [2]. 
The availability of Wireless Sensor Networks (WSNs)  
has contributed to indoor localization [3]. In general, a 
WSN is composed of numerous low-power sensors or 
nodes, which are designed to be a small computing unit. A 
WSN is usually equipped with different kinds of sensors to 
monitor targets and communicate with each other. Due to 
its small size and low-cost nature, a large number of 
sensors can be easily used to locate the target in a building. 
The localization method proposed in this paper is suitable 
for indoor environments with WSN with multiple floors 
and multiple walls.  
The remainder of this paper is organized as follows. 
Section II discusses previous work in localization for 
WSN. Section III describes the system model including 
the estimation of the attenuation of the floors and the walls. 
In Section IV, we propose a localization scheme which 
utilizes the estimated attenuation values from the previous 
section to identify the floor number and the localization of 
the plane. Section V presents an improved approach to 
increase the localization accuracy. The simulation results 
are given in Section VI, followed by the concluding 
remarks in Section VII. 
II. 
RELATED WORKS 
A variety of localization methods for WSNs have been 
proposed. In relation to the locations of nodes, those for 
which the coordinates are known in advance are called 
beacon nodes. If the location is not known in advance, 
they are called unknown or target nodes. Existing 
localization algorithms are largely divided into two typical 
categories depending on the distance between beacon node 
and unknown node: range-based [4] and range-free [5]. 
The former is defined by protocols that use absolute point-
to-point distance (or range) estimates or angle estimates 
for estimating the location. The latter uses network 
connectivity and other information to localize the nodes. 
There are some typical algorithms such as the centroid 
algorithm, Approximate Point in Triangle Test (APIT), 
DV-hop and so on. However, a large number of nodes are 
required for effective range-free localization. 
In range-based schemes, Received Signal Strength 
(RSS) based localization is less expensive and simple to 
implement in hardware. Thus, it is widely used as 
compared to other methods such as Time of Arrival (ToA), 
Time Difference of Arrival (TDoA), and Angle of Arrival 
(AoA) schemes. However, the RSS scheme is very 
sensitive to fading effects and multipath reflection. 
Numerous methods are proposed to solve this problem, 
although their effects are not satisfactory. Generally, a 
108
Copyright (c) IARIA, 2013.     ISBN:  978-1-61208-279-0
AICT 2013 : The Ninth Advanced International Conference on Telecommunications

proper propagation model suitable for complex indoor 
environment is significant and some models are also 
proposed. The Multi-Wall (MW) model proposed in [6] 
only considers attenuation caused by wall number and its 
texture. However, the number of walls should be known in 
advance and the floor attenuation in multi floor building is 
not also considered. These indoor obstructions such as 
walls, material layers will result in low localization 
accuracy. To address the issue caused by obstruction, this 
paper designs a sensor-based localization scheme in which 
the sensors are aligned vertically. This scheme takes the 
floor and wall attenuation into consideration. Also, it is 
mainly analyzed by using a simple application example. 
III. 
SYSTEM MODEL 
A. Allocation of Beacon Nodes 
With respect to the allocation of the beacon nodes, 
each floor is supposed to be equipped with the same 
number of nodes which have the same horizontal 
coordinates. Thus, each beacon node and its adjacent 
beacon node upstairs and downstairs comprise a vertical 
group. This group is used to estimate the floor attenuation 
and the wall attenuation in the following scheme. Fig.1 
shows this type of allocation of the beacon nodes. In this 
paper, four vertical groups are set at the corner of the 
plane area and H  is the distance between adjacent 
beacon nodes in the same vertical group.  
 
d
H
FAi,i 1

FAi,i 1

Vertical Group
Beacon Node
i 1
d 
id
i 1
d 
iP
i 1
P 
i 1
P 
 
Figure 1. Allocation of vertical beacon nodes  
B. Floor Attenuation Estimation 
The floor attenuation is estimated as shown in Fig. 1 
where 
,
i i 1
FA
 denotes the floor attenuation between the i -
th floor and the 
1
i+ -th floor. Based on a conventional RSS 
model [7] as given in (1), a new RSS model for floor 
attenuation estimation is proposed by (2). 
0
10
0
( )
(
) 10 log ( /
)



s
PL d
PL d
d d
X

            (1) 
0
10
0
( )
(
) 10 log ( /
)




s
PL d
PL d
d d
FA
X

        (2) 
where d  is the distance between the transmitter and the 
receiver, 
0d is the reference distance,  is the path loss 
exponent, FA  is the floor attenuation, and 
s
X is a zero-
mean normally distributed random variable. 
C. Wall Attenuation Estimation 
Based on the floor attenuation model, we consider a 
wall attenuation during propagation as shown in (3).  
0
10
0
( )
(
)+10 log ( /
)




s
PL d
PL d
d d
FA
nWA
X

   (3) 
where n  is the number of walls during the propagation 
and WA  is the single wall attenuation. Note that WA  
needs to be measured in advance. Here, as a simple 
illustrative case shown in Fig.2 (b), two vertical walls that 
divide the horizontal plane into three areas are set in the 
building.  
 
WA
A
B
C
 
(a)                                        (b)  
Figure 2. Wall attenuation estimation model and plane positioning 
 
Actually, this wall attenuation model proposed here is 
suitable for the buildings with the same room layout in 
each layer. That will guarantee that the signals will suffer 
from the same wall attenuation from the same vertical 
group between adjacent layers.  
IV. 
PROPOSED LOCALIZATION SCHEME 
A. Floor Number Identification 
For a vertical group, we can transform the measured 
RSS attenuations from the middle beacon node 
i
PL , the 
upstairs beacon node 
PLi1
, or the downstairs beacon 
node 
PLi1
 to the distance  using (1) and (2), respectively. 
Then, (4) and (5) can be obtained. According to the 
geometry theory, the following relationship (6) can be 
also derived. 
( 0
)
10
10


PLi
PL d
u
id
                                        (4) 
 
1
1
1
1
0
/
/
(
)
10
1/
1
10







 
i
i
i
i
PL
PL
FA
FA
PL d
u
i
i
d
              (5) 
  
2
2
2
2
1
1





i
i
i
H
d
d
d
                             (6) 
Then, by inserting (4) and (5) into (6), the floor 
attenuation between the i -th floor and the 
1
i+ -th floor 
109
Copyright (c) IARIA, 2013.     ISBN:  978-1-61208-279-0
AICT 2013 : The Ninth Advanced International Conference on Telecommunications

FAi,i1
or 
FAi,i1
 between i -th floor and 
1
i- -th floor can 
be calculated by (7). 
( 0
)
2
5
,
1/
1
1/
1
0
10
(
)
5 log (
10
)









PLi
PL d
i i
i
i
i
FA
P
PL d
u
H

                                                                                              
(7) 
If the floor attenuation for each floor is obtained 
through a priori experimental measurement, the estimated 
floor attenuation with (7) can be employed, together with 
Minimum Euclidean Distance Matching (MEDM) as 
shown in (8) to identify the location of the floor of the 
unknown node. 

PFAi,i 1
 is the priori floor attenuation 
between the i -th floor and 
1
i+ -th floor.  For instance, the 
estimated i -th floor attenuation value is shown in the last 
column of Table 1. After the matching process with the 
second floor attenuation and the fourth floor attenuation, 
respectively, the estimated floor of the unknown node is 
equal to 4, depending on the minimal matching value 
shown in Table 1. 
                    
2
2
,
1
,
1
,
1
,
1
(
)
(
)








i i
i i
i i
i i
MEDM
FA
PFA
FA
PFA
     (8) 
 
TABLE 1. FLOOR NUMBER IDENTIFICATION USING ESTIMATED  
ATTENUATION VALUES  
Estimated 
value 
Floor number 
2 
4 
i  
FAi ,i
1  
21
PFA , 15 4
. dB  
4 3
PFA , 18 7
. dB  
1
FAi,i 17 9
. dB  
FAi ,i
1  
2 3
PFA , 18 7
. dB  
4 5
PFA , 16 9
. dB  
1
FAi,i 17 3
. dB  
MEDM  
2.87 
0.89 
i  4
 
 
This floor identification approach can achieve a high 
accuracy, especially where there is a large difference in 
the floor attenuation between the different floors. In 
practical terms, it can be applied in buildings with 
significant floor structure differences. 
B. Plane Positioning 
Due to similar structural composition and distribution 
of the walls in each floor of the building, the signal is 
likely to suffer from the same wall attenuation from the 
same vertical group between two adjacent floors. Let 
j
WA  
be the wall attenuation during the propagation from the j
-th vertical group. According to the geometry theory used 
in floor number identification, we have 
( 0
)
10
10



i
j
PL
PL d
WA
u
id
                                     (9) 
 
 
1
1
1
1
0
/
/
(
)
10
1/
1
10








 
i
i
i
i
j
PL
PL
FA
FA
WA
PL d
u
i
i
d
              (10) 
 
1/
1
j
, 1/
1
0
,
0
2
j
10
(
)
d
(
)
(
)
5
5
5 log (
)
10
10







 

i
i
i i
i
i j
PL
FA
PL d
PL
PL
H
WA
u


，
（ ）  
(11) 
where 
i, j
PL  is the measured RSS attenuation from the i -
th floor’s beacon node of the j -th vertical group. 
After the wall attenuation from each beacon node has 
been estimated using (11), the location of the unknown 
node can be evaluated. However, a priori information on 
the distribution of the walls should be obtained in advance 
as shown in Fig. 2(b). For convenience, a wall number 
matrix, 

WNN M
  is defined as shown in (12). 
0
2
0
2
1 1 1 1
2
0
2
0









                                (12) 
where N is the number of areas and M  is the number of 
beacon nodes for each layer. Actually, M  is also the 
number of vertical groups in every three layers. 
The estimated wall attenuation can be transformed 
into the estimated wall number by utilizing the measured 
WA  in (3). Based on that, we can know whether there 
exists walls and how many walls along each propagation 
path. Then, we can match the estimated wall number with 
each row of the prior wall number matrix 

WNN M
one by 
one using the MEDM. In that case, the area of the 
unknown node will be accurately determined. 
To achieve a high localization accuracy, the wall 
attenuation of each floor where the unknown node is 
located should be eliminated. Here, we use two methods 
to revise the measured RSS of the unknown node. One 
involves direct utilization of the estimated wall 
attenuation, and the other entails using WA and the 
estimated wall number. 
After we revise the RSS, the conventional plane 
algorithm can be applied to the plane localization. For the 
triangle method given in [8], the RSS of at least three 
beacon nodes should be selected. Using the conventional 
RSS model, we can transform the RSS into the distance 
and put it into the plane localization. Here, we denote 
（ ,x y
）, 
1
, 1
（x y
）, 
2
x , 2
y
（
）, 
3
x , 3
y
（
）as the locations of the 
unknown node and the three selected beacon nodes. Then, 
for the selected three beacon nodes on the horizontal 
planes, we denote 
id ,1
, 
id ,2
, and 
id ,3
 as the distances 
between the unknown and the three selected beacon nodes 
on the i -th floor. Using (13) and (14), the estimated 
coordinates of the unknown node can be obtained as 
       
2
2
2
2
2
2
,1
,2
1
2
1
2
2
2
2
2
2
2
,1
,3
1
3
1
3
(
-
)
(
)
(
)
(
-
)
(
)
(
)










i
i
i
i
d
d
x
x
y
y
d
d
x
x
y
y


             (13) 
               
2
1
3
1
2
2
1
1
3
3
1
1
2
2
2
2
2
2

Y
Y
x
X
Y
X
Y


2
1
3
1
2
2
1
1
3
3
1
1
2
2
2
2
2
2

X
X
y
X
Y
X
Y


                 (14) 
where 
a
b
X and 
a
bY refer to (
)
a 
b
x
x
and (
)
a 
b
y
y
. 
110
Copyright (c) IARIA, 2013.     ISBN:  978-1-61208-279-0
AICT 2013 : The Ninth Advanced International Conference on Telecommunications

In fact, the location of the unknown node can be 
obtained with 
M
3






selections of the RSSs. However, 
preference should be given to an RSS that experiences 
less wall attenuation or even no attenuation. Although we 
have revised the RSS by eliminating the wall attenuation, 
error always exists between the real wall attenuation and 
the estimated wall attenuation. Here, we can select the 
beacons depending on the smallest three wall number 
values for the corresponding row of 

WNN M
. In a best-
case scenario, there are three RSSs without wall 
attenuation. That is to say, there should be at least three 
zeros for some rows of 

WNN M
in that case.  
V. 
IMPROVED LOCALIZATION METHOD 
The method given in Section III uses three distances 
from three beacon nodes to the unknown node to 
determine three circles. Based on the geometry theory, the 
point at which three circles intersect represents the 
coordinates of the unknown node. However, using three 
revised RSSs will still cause inevitable errors because we 
cannot completely eliminate the wall attenuation. Thus, 
we only utilize the RSSs from two beacon nodes to 
determine the position of the unknown node. The RSS 
from the third beacon node is not considered or it is only 
used as reference information. The analysis of the 
location of the two circles yielded five cases, as shown in 
Fig. 3. 
 
U
A B
U
A
B
C
U
A B
U
A
B
U
(a)
(b)
(d)
(c)
(e)
1
2
AB
d
d
L


2
1
AB
d
d
L


1
2
AB
d
d
L


1
2
AB
d
d
L


2
1
AB
d
d
L


E
F
E
F
E
F
A
B
 
Figure 3. Five cases of using two circles to determine the location of the 
unknown node   
 
When the two circles are externally tangent or 
internally tangent as shown in Figs. 3(a) and (b), the 
estimated intersection point of the unknown node is taken.  
If the two circles intersect, there are two intersection 
points as shown in Fig. 3(c). In this case, we use a revised 
RSS between the third beacon node and the unknown 
node as the reference to compare 
d3 
CE
 with 
d3 
CF  and select the smaller one as the estimated 
unknown node. Here, RSS from the third beacon node is 
utilized as a reference to identify the proper position 
between two intersection points. 
In addition, as shown in Figs. 3(d) and (e), there may 
be no intersection point because of measurement error. In 
these cases, we take the middle point of E  and F  as the 
unknown node. 
With respect to this improved method, we use the 
RSSs of two beacon nodes instead of three to decrease the 
error caused by the wall attenuation. However, the best 
case is when two RSSs without any wall attenuation are 
available, or that there are two zeros in some rows of the 
wall number matrix. 
VI. 
SIMULATION RESULTS 
In this section, the performances of the proposed 
localization and attenuation methods along with the 
improved method are demonstrated through computer 
simulation in MATLAB. As shown in Fig. 2, four beacon 
nodes are allocated in each floor whose area is 10 m×10 
m, and the device in any position of this area is assumed 
to be able to detect all the beacon nodes. As there are two 
parallel walls, each horizontal plane is divided into three 
small areas A, B, and C. The corresponding wall number 
is shown in each row of the matrix given in (12). Here, 
both 
the 
estimated 
attenuation-based 
and 
prior 
attenuation-based revisions are applied to each area. 
Additional parameters are as follows: 

PL d0 
 was set to 
20 dB because free space propagation environment is 
assumed, and   is set to be 2.0. The single wall 
attenuation and the floor attenuation were 20 dB and 30 
dB, respectively. Here, Root Mean Square Error (RMSE) 
is defined in (15) to evaluate the localization performance. 
      
2
2



est
real
est
real
RMSE
( x
x
) +( y
y
)                (15) 
where 
(
,
)
est
est
x
y
 and 
(
,
)
real
real
x
y
 are 
estimated 
coordinate  and actual coordinate, respectively. 
The effect of different noise variances on the 
localization performance for each area using two methods 
is simulated in Fig. 4. Through the simulation results, we 
observe that the accuracy of area A  and C  are nearly the 
same because these two areas suffer from similar wall 
attenuation. In addition, area B  achieves the best 
localization performance. There is no gap between the 
wall attenuation from the beacon nodes. Thus, there is a 
similar error from each beacon node. When we use (13) 
and (14) to locate the unknown node in area B , some 
parts of that same error will be eliminated automatically, 
thereby further increasing the localization accuracy. 
111
Copyright (c) IARIA, 2013.     ISBN:  978-1-61208-279-0
AICT 2013 : The Ninth Advanced International Conference on Telecommunications

On the other hand, if we use prior wall attenuation to 
revise the RSS, the same performance can be obtained, 
irrespective of the location of the unknown node. As prior 
attenuation approaches 
focused 
mainly on actual 
attenuation, the revised RSS will be extremely close to the 
RSS without any walls. Thus, the presence of the walls 
does not give rise to any errors. However, there is always 
a gap between the prior attenuation and the actual 
attenuation. In worse cases, the prior information is not 
available. Thus, in most cases, we can only make use of 
the estimated attenuation to locate the target node. 
 
 
Figure 4.  Localization performance in each area using two  
revision methods  
 
     Figure 5. Localization performance in each area using two revision 
methods for improved algorithm 
 
With respect to the improved method, using the same 
parameters as the previous method, we obtained the 
simulation performance in each area with two revision 
methods, as shown in Fig. 5. Obviously, the accuracy is 
increased, especially for areas A and C . However, we 
obtained a slightly worse performance in area  B
compared to the previous method. Some errors eliminated 
in area B  in the previous method were not eliminated in 
this improved method. Hence, the previous method is the 
optimal choice for areas that suffer from the same wall 
attenuation from the beacon nodes. To this end, additional 
exploration is needed to determine the optimal choice 
between the two approaches used in this paper according 
to the detailed attenuation situation of the unknown node. 
And the performance is also influenced by FA  and 
VII. CONCLUSION 
 In this paper, we proposed a floor-wall attenuation 
estimation scheme, and exploited it to identify the floor 
number and to estimate the horizontal position of an 
unknown node. It is suitable for indoor environments with 
multiple floors and multiple walls. From the simulation 
results, the scheme achieved good accuracy, especially for 
the positioning of the planes. Based on the results, an 
improved method was utilized to increase the localization 
accuracy in parts of indoor areas. This method can work 
more efficiently if a priori information is available on 
interior structures and wall distribution.  
ACKNOWLEDGMENT 
This research was supported by the MSIP, Korea under 
the Convergence-ITRC support program (NIPA-2013-
H0401-13-1004) supervised by the NIPA. 
REFERENCES 
[1] J. Hightower and G. Borriello, “Location systems for ubiquitous 
computing,” Computer, vol. 34, no. 8, Aug. 2001, pp. 57-66, 
doi:10.1109/2.940014. 
[2] K. Pajlavan, X. Li, and J. Makela, “Indoor geolocation science and 
technology,” IEEE Commun Mag, vol. 40, no. 2, Feb. 2002, pp. 
112-118, doi:10.1109/35.983917. 
[3] F. Osterlind, E. Pramsten, D. Rpberthson, J. Eroksson, N. Finne, 
and T. Voigt, “Integrating building automation systems and 
wireless sensor networks,” Proc. IEEE ETFA 2007, Patras. Greece, 
Sept. 2007, pp. 1376-1379,  doi:10.1109/EFTA.2007.4416941. 
[4] C.-H. Chang, “Revisiting relative location estimation in wireless 
sensor networks,” Proc. IEEE ICC 2009, Dresdden. Germany, June. 
2009, pp. 1-5, doi:10.1109/ICC.2009.5199419. 
[5] J.-P. Sheu, “A distributed localization scheme for wireless sensor 
networks with improved grid-scan and vector-based refinement,” 
IEEE Trans. Mobile Comp., vol. 7, Sept. 2008, pp. 1110-1123, 
doi:10.1109/TMC.2008.35. 
[6] A. Borrelli, C. Monti, M. Vari, and F. Mazzenga, “Channel models 
for IEEE 802.11b indoor system design,” Proc. IEEE ICC 2004, 
vol. 6, June 2004, pp. 3701-3705,  doi: 10.1109/ICC.2004.1313233. 
[7] S. Ranvier, “Path loss models,”Helsinki University of Technology, 
Helsinki, 
Finland, 
Nov. 
2004 
(Available 
online 
at 
http://www.comlab.hut.fi/opetus/333/2004_2005_slides/Path_loss_
models.pdf). 
[8] C. Y. Shih and P. J. Marron, “COLA: Complexity-reduced 
trilateration approach for 3D localization in wireless sensor 
networks,” Proc. IEEE SensorComm 2010, Venice. Italy, July. 
2010, pp. 24-32, doi: 10.1109/SENSORCOMM.2010.11.  
[9] R. Bolla, R. Rapuzzi, M. Repetto, P. Barsocchi, S. Chessa and S. 
Lenzi, “Automatic multimedia session migration by means of a 
context-aware mobility framework,” Proc. ICMA, Nice. Fance, 
Sep. 2009, doi: 10.1145/1710035.1710071. 
[10] P. Barsocchi, S. Lenzi, S. Chessa and F. Furfari,  “Automatic 
virtual calibration of range-based indoor localization systems,” 
Wirel. Commun. Mob. Comput, vol. 12, Feb. 2011, pp.1546-1557, 
doi: 10.1002/wcm.1085. 
0
0.1
0.2
0.3
0.4
0.5
0.6
0.7
0.8
0.9
1
0.5
1
1.5
2
2.5
3
Noise Variance ( dB )
RMSE ( m )
 
 
Area A Using Revision of Estimated Attenuation
Area C Using Revision of Estimated Attenuation
Area B Using Revision of Estimated Attenuation
Area A Using Revision of Prior Attenuation
Area C Using Revision of Prior Attenuation
Area B Using Revision of Prior Attenuation
0
0.1
0.2
0.3
0.4
0.5
0.6
0.7
0.8
0.9
1
0.5
1
1.5
2
2.5
Noise Variance ( dB )
RMSE ( m )
 
 
Area A Using Revision of Estimated Attenuation
Area A Using Revision of Prior Attenuation
Area C Using Revision of Estimated Attenuation
Area C Using Revision of Prior Attenuation
Area B Using Revision of Estimated Attenuation
Area B Using Revision of Prior Attenuation
112
Copyright (c) IARIA, 2013.     ISBN:  978-1-61208-279-0
AICT 2013 : The Ninth Advanced International Conference on Telecommunications

