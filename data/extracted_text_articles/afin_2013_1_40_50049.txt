Evaluation of Time Dimensional Traﬃc Engineering with Storage Aware Routing
Shigeyuki Yamashita and Miki Yamamoto
Faculty of Engineering Science
Kansai University
3-3-35 Yamate-cho, Suita-shi, Osaka, Japan
Email: k859805, yama-m@kansai-u.ac.jp
Tomohiko Yagyu
Cloud System Research Labo, NEC Corporation
1753 Shimonumabe, Nakahara-ku, Kawasaki,
Kanagawa, Japan
Email: yagyu@cp.jp.nec.com
Abstract—Recently, the amount of traﬃc on the Internet
continues to grow by increment of rich content such as video
every year. Not only the overall traﬃc increase but also the
time variation becomes large and the diﬀerence in the amount
of traﬃc during the time of peak and oﬀ peak is very large.
Therefore, it is diﬃcult to use the link bandwidth eﬃciently. In
this paper, we propose a new system of content distribution,
named Storage Aware Routing (SAR). With SAR, routers can
exploit the links with low utilization by using their large
storages. Our performance evaluation of SAR by binary integer
programming formulation shows that SAR is able to smooth
the link utilization.
Keywords-Storage; Content Distribution; New Generation Net-
work; Traﬃc Peak Shift.
I. INTRODUCTION
Traﬃc volume transferred in the Internet has been steadily
increasing with continuous growth of video traﬃc. Accord-
ing to Cisco white paper [1], it increases eight-fold in 5 years
and will be approaching 1.3 zeta byte by the end of 2016.
Sophisticated network management is indispensable for ef-
fective accommodation of increasing traﬃc demand. Content
Delivery Network (CDN) [2] and traﬃc engineering [3]
are promising examples for eﬀective network management.
These techniques aim to distribute traﬃc in space dimension
by adequate routing. This means traﬃc can be managed only
in space dimension in these conventional techniques.
Another impact of current Internet traﬃc than traﬃc
volume is the diﬀerence between peak and minimum traﬃc
volume in day-time scale. According to Japanese govern-
ment report [4], diﬀerence between peak and minimum
traﬃc in day-time scale signiﬁcantly increases recently. In
the conventional traﬃc management technique, bandwidth of
the most congested link should be designed to accommodate
peak traﬃc. Average link utilization should be small due
to bursty nature of traﬃc, which means network resources
cannot be eﬀectively utilized only with spatial traﬃc man-
agement techniques.
Large storage can be used for time dimensional traﬃc
management. While the network is congested, traﬃc stored
in a network, i.e., at routers, can be transmitted during oﬀ-
peak time period. Delay Tolerant Network (DTN) [5] is
one example of usage of storage for traﬃc shift. It enables
asynchronous forwarding, but its main purpose is providing
reliable communications between a wide range of networks
having poor and disparate performance, which means DTN
is not a technology for traﬃc management. Some methods
that control the timing of transmission with nodes’ storage
are proposed [6] [7]. Because these methods do not consider
deadline of delivered data, they cannot guarantee the arrival
of priority data in time. Another method of asynchronous
forwarding is also proposed for inter-datacenter bulk trans-
fer, called NetStitcher [8]. In NetStitcher, bulk data transfer
is scheduled to adapt to resource ﬂuctuation in diurnal
pattern. NetStitcher is applied for world wide datacenter
systems and bulk transfer is scheduled so that oﬀ-peak in
diurnal ﬂuctuation is to be used. Purpose of NetStitcher is
very similar to ours, traﬃc management in time dimension,
but it can only be applied to worldwide scale datacenter
systems because it adapts to resource ﬂuctuation due to local
time diﬀerence.
In near future, new usage scenario of video services can be
deadline-aware, such as a user reserves her preferable video
services with her convenient time. One promising scenario
for this deadline-aware video service is that in the morning a
user on a commuter train reserves video service with evening
time on which she can enjoy it at her home. In current video
on demand, e.g., YouTube, peak traﬃc period is exactly
the peak demand time period and may be prime time in
the evening. In contrast, in deadline-aware video service,
there is time leeway for receiver to receive content (video)
ﬁle. Another example of deadline-aware delivery is backup
of critical data between distant data centers for Business
Continuity Planning (BCP). When a router has large storage
space and can storage content traﬃc in the case of the
following link is in its peak traﬃc period, on-peak traﬃc
can be shifted to oﬀ-peak period.
In this paper, we propose a novel traﬃc engineering
technique which manages traﬃc in not only space but also
time dimension, SAR. SAR is one of traﬃc engineering
technique and aims at adapting to link utilization ﬂuctuation.
In SAR, a router stores content traﬃc at its storage and
time-shifts on-peak traﬃc to oﬀ-peak time period. Storage
at a router is assumed to be large enough to enable time-
shift of on-peak traﬃc, i.e., plentifully large storage than
21
Copyright (c) IARIA, 2013.     ISBN:  978-1-61208-300-1
AFIN 2013 : The Fifth International Conference on Advances in Future Internet

current router queue. In this paper, we formulate SAR traﬃc
management as time-space dimension routing problem. With
numerical examples binary integer programming problem
for time-space dimension model, we comparatively eval-
uate SAR. Our numerical examples show that SAR can
eﬀectively adapt to ﬂuctuation of link utilization. And we
investigate condition that SAR can work well and show that
SAR generally works well. In this paper, we investigate the
feasibility and the fundamental beneﬁts of deadline-aware
content delivery with SAR.
This paper is structured as follows. First, in Section 2,
we explain our proposed new traﬃc engineering technique,
named SAR, in detail. In Section 3, we evaluate performance
of SAR by using binary integer programming. Finally, we
conclude a paper in Section 4.
II. STORAGE AWARE ROUTING
A. Design Concept of SAR
In the current Internet, sharp increase of content traﬃc
volume is one of the most important technical issues. Espe-
cially, diﬀerence between peak and oﬀ-peak traﬃc volume
is signiﬁcantly increasing. When some content traﬃc on
peak period can be shifted to oﬀ-peak time period, smoothed
content traﬃc volume will enable eﬀective accommodation
of increasing content traﬃc. So, we propose Storage Aware
Routing which enables time-dimensional traﬃc shift for
deadline-aware content distribution.
An end-user is interested only in content itself. She does
not care about content retrieval time and content can be
retrieved anytime before her preferable time to watch it.
SAR tactically utilizes time diﬀerence between reserved
timing and content watching timing. According to the above
mentioned content retrieval nature, content can be retrieved
between these two timings. In SAR, each session (end-to-
end session for one content retrieval) schedules its hop-by-
hop transmission timing so that ﬂuctuation of link utilization
along transmission path is minimized. With this smoothed
link utilization, network can reserve its resources to sessions
generated later.
Figure 1.
Storage Aware Routing
B. Storage Aware Routing
Fig. 1 shows overview of SAR. Framework of SAR is
composed of the following 3 elements.
1) Reservation by end user
2) Scheduling of transmission at the server
3) Routing and scheduling in the network
SAR is time dimensional traﬃc engineering technique by
making use of time diﬀerence between reservation and con-
tent watching. At an end-user side, reservation for content
is a trigger to SAR (reservation by end user). A server and
networks schedule transmission timings of a corresponding
content ﬁle so that ﬂuctuation of link utilization is mini-
mized. A server decides its transmission timing (scheduling
of transmission at the server). A network decides a path for
content ﬁle transmission and schedules hop-by-hop trans-
mission timing (routing and scheduling in the network).
In Fig. 1, SAR chooses route and transmission timing
which enables low link utilization. A graph for each link
depicts link utilization variance in time. SAR ﬁrst chooses
a route enabling low link utilization. Then SAR schedules
hop-by-hop transmission timing. On the ﬁrst link in Fig.
1, content ﬁle is not transferred in the lowest utilization
time period. This is because of law of causality for low
utilization periods on the following links. When content ﬁle
is transferred in the lowest utilization time period on the
ﬁrst link, content must be transferred in high utilization time
period of the following link so as to reach before deadline.
SAR designs not only routing but also transmission timing
at each hop on the route, i.e., routing and scheduling.
III. NUMERICAL EXAMPLES
One of the most advanced aspects of SAR is time dimen-
sional scheduling enabled by large storage at a router. In this
paper, basic performance of SAR in this aspect is evaluated
by numerical examples with binary integer programming
formulation.
A. Problem Formulation of SAR
SAR design can be formulated as a routing problem in
space-time diagram. Fig. 3 shows space time diagram for
the tandem topology model shown in Fig. 2. Horizontal
axis shows time dimension and vertical axis shows space
dimension. Space dimension corresponds to tandem network
shown in Fig. 2. The origin ([S ][T]= 00) of this time
space diagram shows the content server at time 0. Time is
normalized with ﬁle transmission time on a link (we simply
assume that a content ﬁle is transmitted on a link in 1 time
unit). In a sample path in Fig. 3, the server transmit content
ﬁle to router 1 at time 0. Router 1 does not store it and
forwards it to router 2 immediately after it receives a whole
ﬁle at time 1. At routers 2 and 3, content ﬁle is stored during
one unit time, which is time dimensional scheduling. In this
example, deadline of content retrieval is time 8 and a content
ﬁle is retrieved just at this deadline.
22
Copyright (c) IARIA, 2013.     ISBN:  978-1-61208-300-1
AFIN 2013 : The Fifth International Conference on Advances in Future Internet

Figure 2.
Tandem topology model
Figure 3.
Space-time diagram
SAR design can be formalized as the following minimiza-
tion of total cost for a “path” in space time diagram. In our
design, we set the link cost to the square of utilization to
smooth the traﬃc in the networks. We set the cost of storage
to 0 supposing that storage capacity is very large. The impact
on other cost functions will be studied in future.
minimize

(i, j)∈E,t∈T
COS Ti, j,t∗Xi, j,t+

i∈V,t∈T
COS Ti,i,t∗Xi,i,t (1)
subject to
BTi,i,t + d ∗ Xi,i,t ≤ Ci,i
(2)
BTi, j,t + d ∗ Xi, j,t ≤ Ci, j
(i  j)
(3)

j:(i, j)∈E,t∈T
Xi, j,t +

i∈V,t∈T
Xi,i,t
−

j:(j,i)∈E,t∈T
Xj,i,t−△t −

i∈V,t∈T
Xi,i,t−△t = 0
(it  s, r) (4)

j:(s, j)∈E,R∈T
Xs, j,R +

tr∈T
Xs,s,R
−

j:( j,s)∈E,R∈T
X j,s,R−△t −

tr∈T
Xs,s,R−△t = 1
(iR = s)
(5)

j:(r, j)∈E,D∈T
Xj,r,D−△t +

D∈T
Xr,r,D−△t
−

j:( j,r)∈E,D∈T
Xr, j,D −

D∈T
Xr,r,D = 1
(iD = r)
(6)
COS Ti, j,t = ((BTi, j,t + d)/Ci, j)2
(i  j)
(7)
COS Ti,i,t = 0
(8)
TABLE I
NOTATION USED IN THE PAPER
Notation
Meaning
Xi,j,t
- Binary variable denoting reservation of
link (i, j) (for i  j)
- Binary variable denoting reservation of
storage at router i ( for i = j)
for time period between t and t + △t
COS Ti,j,t
- Transmission cost on link (i, j) ( for i  j)
- Storage cost at node i ( for i = j)
for time period between t and t + △t
BTi,j,t
- Background traﬃc volume of link (i, j) (for i  j)
- Stored background traﬃc volume at router i ( for i = j)
for time period between t and t + △t
Ci,j
- Link capacity of link (i, j) ( for i  j)
- Storage capacity of router i ( for i = j)
d
Traﬃc demand for each session
E
Set of links
V
Set of nodes
T
Set of discrete time periods (denoting each time unit)
s
Currently requesting sender
r
The receiver at the corresponding deadline in
time-space diagram
it
Router i at time t in time-space diagram
D
Corresponding deadline
R
Generation time of request for the currently focused traﬃc
Table I shows the notations used in this paper. Equation
(1) shows the objective function of SAR. The ﬁrst term is
summation of cost for ﬁle transfer on link (i, j) along the
space dimensional path (set of diagonal lines on time space
diagram path). The second term is summation of storage
cost at routers (set of horizontal lines on time space diagram
path). So, the objective function of SAR aims for minimizing
accumulation of link cost and storage cost. Link cost should
have close relationship with link utilization, i.e., link cost
should be large for high link utilization. Equations (2) and
(3) give capacity constraint for storage and link, respectively.
The ﬁrst term of each equation gives accumulated link and
storage usage for background traﬃc. The second term shows
link and storage usage oﬀered by currently reserved session.
So, when (2) and (3) are satisﬁed, newly reserved traﬃc can
be accommodated without overutilization. Equation (4) gives
session conservation at each transient node. It means that the
traﬃc coming into a node between t−△t and t must be equal
to the traﬃc going out between t and t + △t for any node
except requesting node and the receiver node. Equations (5)
and (6) show session conservation at the requesting time of
the sender and the deadline for the corresponding session,
respectively. They mean that the traﬃc must go out from the
currently requesting sender node at the requesting time and
come into the receiver node at the corresponding deadline.
The cost of link and storage are deﬁned as (7) and (8),
respectively.
Because we investigate fundamental eﬀectiveness of traf-
ﬁc smoothing with SAR, we assume that storage capacity is
enough large and much cheaper than link cost. Therefore,
we set storage cost as 0 in this evaluation. It is possible
to consider storages capacity limitation with deﬁning cost
function for the storage as link cost. We use binary integer
23
Copyright (c) IARIA, 2013.     ISBN:  978-1-61208-300-1
AFIN 2013 : The Fifth International Conference on Advances in Future Internet

TABLE II
NOTATION USED IN ALGORITHM
Notation
Meaning
scr
Sender node of content
dst
Receiver node of content
dl
Deadline time of content distribution
G
Graph of network topology
G′
Time-space diagram for G
E′
Set of links in G′
unit_size
Chunk size that can be sent in unit time
src(rqtime)
S rc at request time
dst(dl)
Dst at deadline time
P
Shortest path from src(rqtime) to dst(dl) in G′
programming for fundamental evaluation. It is also possible
to use Dijkstra’s algorithm to calculate shortest path in
space-time diagram. Route calculation algorithm of SAR is
shown in Algorithm 1. Notations used in Algorithm 1 are
shown in Table II. This system assumes that link capacity
in future can be reserved. We suppose to use centralized
controller such as OpenFlow [9]. Centralized controller has
a potential to manage link bandwidths in the network and
to dictate scheduled transmission timing to routers.
Algorithm 1 Route calculation algorithm in SAR
Calc_S AR_Route (G, src, dst, dl, size)
G′ = ExtractGraphToTimeDimension (G, src, dst, dl)
S etCost (l in E′)
m = content_size / unit_size
for i = 1 to m do
P = CalcS hortestPath (G′, src(rqtime), dst(dl))
UpdateCost (l in P)
end for
B. Basic Performance
In this section, we evaluate SAR with simple tandem
model with 5 routers (see Fig. 2). In this model, background
traﬃc is artiﬁcially given as normal distribution with mean
of 40 and standard deviation of 10. Capacity of each link
is 100. Link usage of each session is simply given by ﬁxed
value 3.
SAR is comparatively evaluated with the following two
design policies.
1. SAR-edge
In SAR-edge, the sender, i.e., the content server,
can schedule its transmission time so as to min-
imize total cost of link and storage on the path.
In SAR, all routers on the path can store content
ﬁle but in SAR-edge, only edge router can store
content ﬁle.
2. Fastest Reservation (FR)
At request generation timing, transmission of con-
tent ﬁle is scheduled as fast as possible on con-
dition that link usage of scheduled traﬃc is up to
link capacity.
Figure 4.
CDF of unit-time link utilization
Fig. 4 shows CDF of unit-time link utilization of SAR,
SAR-edge and FR. CDF of background traﬃc is also shown
in this ﬁgure.
In FR, large portion of content ﬁle transmission is sched-
uled at high link utilization time period. SAR-edge has
smoothed link utilization distribution than FR, which means
only with the sender scheduling smoothing of link utilization
can be realized on some level. With scheduling of the router
storage, SAR has more smoothed link utilization and has the
best characteristics among three. As shown in this result,
time dimensional scheduling enabled by large storage at a
router has great eﬀect on smoothing link utilization.
C. Accumulated Session Model
1) Link utilization smoothing eﬀect of SAR:
In this
section, we evaluate SAR in more sophisticated model,
accumulated session model. Fig. 5 shows mesh model with
5 senders, 5 receivers and 5 tandem routers. Sessions are
set up for 5 server-receiver pairs of (a, j) (b, f), (c, g), (d, h)
and (e, i). The latter 4 pairs generate the following traﬃc
before the ﬁrst pair so that generated traﬃc of these 4 pairs
is background traﬃc for the ﬁrst pair. At ﬁrst, 1200 sessions
(300 sessions for each pair) with short allowable reservation
time (rather short time interval between request generation
time and deadline) are generated for the latter 4 pairs. Their
request generation is normally distributed with mean value
denoted in Table III and standard deviation of 7.5. In pattern
a, server e has the earliest generation mean time of its
request and the latest one in pattern b. Mean deadline value
Figure 5.
Mesh model
24
Copyright (c) IARIA, 2013.     ISBN:  978-1-61208-300-1
AFIN 2013 : The Fifth International Conference on Advances in Future Internet

Figure 6.
Link utilization - pattern a
Figure 7.
Link utilization - pattern b
is exponentially distributed with 20 unit time later than mean
generation time, e.g., server e has mean deadline of 40 in
pattern a. With these assumptions, background traﬃc has
average 20 unit time allowance for its reservation.
TABLE III
MEAN VALUE OF NORMAL DISTRIBUTION
server-receiver pair
pattern a
pattern b
mean value
mean value
b − f
80
20
c − g
60
40
d − h
40
60
e − i
20
80
After these generations of background traﬃc, Node j starts
reservation to Server a for its generated 1200 sessions. Dead-
line of these 1200 sessions is normally distributed with mean
80 and standard deviation of 7.5. Request generation time is
exponentially distributed between 0 and deadline assigned
by the above described normal distribution. Figs. 6 and 7
show transition of link utilization for background traﬃc
(1200 sessions at ﬁrst generated: red line) and total 2400
sessions (blue line). As shown in Fig. 6, for background
traﬃc in pattern a, SAR can schedule latter generated 1200
sessions so as to make link utilization smoothly ﬂattened. In
SAR-edge, high link utilization time interval generated by
background traﬃc for each link is still high link utilization
time interval after latter 1200 sessions are accommodated
(see Fig. 6(b)). This is because in SAR-edge a router has no
ability of time-shift of traﬃc peak and traﬃc peak generated
at diﬀerent timing at each link cannot be avoided only with
time-dimensional scheduling at the sender side. FR starts its
transmission as soon as possible, which leads to several time
intervals with extremely high link utilization.
As shown in Fig. 7, SAR-edge and FR has poor perfor-
mance from the viewpoint of smoothing link utilization. In
pattern b, SAR also happen to have poor performance. This
is because even with time-dimensional scheduling inside a
network, high utilization time interval cannot be avoided.
Even when a session can be scheduled to avoid peak traﬃc
interval at a certain router, at any router beyond high
utilization interval cannot be avoided. Fig. 8 simply explains
this situation. As shown in Fig. 8(a), when peak traﬃc
intervals line up in series, like pattern b, a path in time-
25
Copyright (c) IARIA, 2013.     ISBN:  978-1-61208-300-1
AFIN 2013 : The Fifth International Conference on Advances in Future Internet

space diagram cannot be found so as to avoid peak traﬃc
intervals at all links. However, this happens only when peak
time intervals line up clearly in series. When this sequence
of peak time is broken even at one pair of links (see Fig.
8(b)), we can ﬁnd a path avoiding peak link utilization. This
means SAR can generally ﬁnd a good path in time-space
diagram. Even when there is a path(s) unfortunately having
peak traﬃc interval in sequence, space dimensional routing
might ﬁnd another good path. In our future work, we will
investigate and evaluate this space dimensional design of
SAR.
Figure 8.
Path of session in case of every peak traﬃc interval
2) Number of rejected sessions: In this section, we eval-
uate SAR from viewpoint of number of rejected sessions.
Further 1200 sessions are injected after accommodating
2400 sessions described in the previous section. These 1200
sessions are generated by the same distribution of session
generation time and deadline as in the previous section.
Table IV shows number of rejected sessions for session
generation and deadline distribution of pattern a and b. In
both cases, SAR has the lowest number of rejected sessions.
So, SAR can design content ﬁle transmission timing so as
to leave more room for upcoming sessions. It means that
SAR can allow networks to accommodate traﬃc generated
by users who want to watch video immediately.
IV. CONCLUSION AND FUTURE WORK
In this paper, we proposed a new traﬃc engineering
technique for content distribution named SAR. When there
is time diﬀerence between request generation time and
content watching time, a user just cares about content is
completely retrieved before her watching time and do not
care about when it is retrieved. A router can schedule
its transmission time in time-dimension when it has large
TABLE IV
NUMBER OF REJECTED SESSIONS
pattern a
pattern b
SAR
4
224
SAR-edge
255
243
FR
657
669
storage. SAR makes use of this time-dimensional traﬃc
control of scheduling of content ﬁle transmission time at
each router in addition to the conventional space-dimension
traﬃc control, i.e., routing. Numerical examples with binary
integer programming formulation of SAR show that SAR
can accommodate traﬃc so as to smooth link utilization at
all links on the path. Our numerical example shows that there
is limited condition where SAR cannot avoid high utilization
interval. This limited condition of high link utilization inter-
val set up in sequence along the path hardly happens, which
means SAR generally works well. Even though this situation
happens in a certain path, spatial routing can ﬁnd another
good path. Our next step is design of this spatial dimension
routing of SAR. It is expected that the combination of spatial
dimension routing and time dimension scheduling has more
eﬀect. Moreover, our future works are congestion avoidance
on the storages and multicast using storages.
ACKNOWLEDGMENT
This research is partly supported by the National Institute
of Information and Communications Technology, Japan.
REFERENCE
[1] Cisco Visual Networking Index: Forecast and Methodology,
2012-2017, May. 2013.
http://www.cisco.com/en/US/solutions/collateral/ns341/
ns525/ns537/ns705/ns827/white_paper_c11-481360_ns827_
Networking_Solutions_White_Paper.html.
[retrieved:
June,
2013]
[2] I. Lazar and W. Terill, “Exploring Content Delivery Network,”
IEEE IT Professional, vol. 3, no. 4, pp. 47-49, 2001.
[3] Y. Wang and Z. Wang, “Explicit Routing Algorithms for
internet Traﬃc Engineering,” in Proc. IEEE ICCCN, Oct. 1999,
pp. 582-588.
[4] Grasp of total traﬃc amount on the Internet in Japan, Ministry
of Internal Aﬀairs and Communications,
http://www.soumu.go.jp/main_content/000211328.pdf, Mar
2013. [retrieved: June, 2013]
[5] K. Fall, “A Delay-Tolerant Network Architecture for Chal-
lenged Internets,” in Proc. ACM SIGCOMM, Aug. 2003, pp.
27-34.
[6] S. Jain, S. Gopinath, and D. Raychaudhuri, “STAR: Storage
aware routing protocol for generalized Delay Tolerant Net-
works,” in Proc. IEEE WoWMoM, Aug. 2011, pp. 1-4.
[7] N. Somani, A. Chanda, S. C. Nelson, and D. Raychaudhuri,
“Storage aware routing protocol for robust and eﬃcient ser-
vices in the future mobile Internet,” in Proc. IEEE ICC, Jun.
2012, pp. 5849-5853.
[8] N. Laoutaris, M. Sirivianos, X. Yang, and P. Rodriguez, “Inter-
Datacenter Bulk Transfers with NetStitcher,” in Proc. ACM
SIGCOMM, Aug. 2011, pp. 74-85.
[9] N. McKeown, T. Anderson, H. Balakrishnan, G. Parulkar, L.
Peterson, J. Rexford, S. Shenker, and J. Turner, “OpenFlow:
Enabling Innovation in Campus Networks,” in ACM SIG-
COMM Computer Communication Review, vol. 38, no. 2, pp.
69-74, 2008.
26
Copyright (c) IARIA, 2013.     ISBN:  978-1-61208-300-1
AFIN 2013 : The Fifth International Conference on Advances in Future Internet

