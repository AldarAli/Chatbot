Multi-Scheme Smartphone Localization with Auto-Adaptive Dead Reckoning
Michael J¨ager, Sebastian S¨uß, Nils Becker
Institute of Software Architecture
Technische Hochschule Mittelhessen - University of Applied Sciences
Gießen, Germany
Email: {michael.jaeger, sebastian.suess, nils.becker}@mni.thm.de
Abstract—Most indoor localization approaches for mobile
devices depend on some building infrastructure to provide
sufﬁcient accuracy. A commonly used method is the fusion of
absolute position measurements with relative motion information
from sensor units. This paper examines the requirements for
smartphone localization in areas consisting of several buildings
and open space, where a single positioning method might deliver
good results at one location but might also fail at another.
It is shown that, for several disparate reasons, a localization
system combining alternative positioning techniques and going
beyond the scope of a single hybrid method, is desirable. The
paper proposes such a multi-scheme system with a three-layer
architecture consisting of base methods, hybrid methods, and
scheme selection. Automatic selection of an appropriate scheme
is described for heterogeneous infrastructure within multi-story
buildings and for indoor-outdoor transitions. Support of several
distinct hybrid methods can be based on the same generic
fusion algorithm. The paper proposes a novel lightweight
fusion algorithm, called ”auto-adaptive dead reckoning”. It can
be used in indoor and outdoor environments to combine an
absolute localization method, e.g., Wi-Fi-based signal strength
ﬁngerprinting, in an adaptive way with inertial pedestrian
navigation. Based on an accuracy factor reﬂecting the current
context conditions of a location measurement the inﬂuence of
each of the involved estimates is weighted accordingly. In a case
study using Wi-Fi ﬁngerprinting, accuracy has been improved
by 43% in an indoor environment. Hence, more genericity can
be obtained without loss of accuracy.
Keywords–Indoor Positioning; Pedestrian Activity Classiﬁcation;
Dead Reckoning; Wi-Fi Fingerprinting.
I. INTRODUCTION
This article is based on [1], where the concept of indoor
smartphone localization with auto-adaptive dead reckoning
has been introduced. This work is extended by a multi-
scheme concept combining alternative positioning techniques
and providing multi-ﬂoor and multi-building support even in
the case of heterogeneous infrastructure, as well as seamless
indoor-outdoor transitions.
Location awareness has become a key feature of many
mobile applications. A common problem in the context of nav-
igation and tracking applications is the accurate localization of
a mobile device within a well-known area comprising several
buildings and also open space, e.g., a company premises, an
airport, an exhibition center, or a university campus. Such
sites are typically heterogeneous in the sense that a single
localization method delivers good results in one sub-area but
fails in another. Popular indoor solutions use hybrid methods
comprising a suitable combination of an absolute positioning
method with sensor-based relative positioning.
A. Absolute Positioning
With respect to mobile devices like smartphones an absolute
positioning method estimates the device location in terms of
latitude and longitude. Relative positioning determines the
distance and heading of the movement, when a device is
moved to a new position. Elevation might also be of interest,
especially in order to determine the ﬂoor-level in a multi-
story building. As far as outdoor environments are concerned
absolute positioning is commonly based on global navigation
satellite systems (GNSS) [2], like the well-known Global
Positioning System (GPS) [3], the Russian GLObal NAvi-
gation Satellite System (GLONASS), the Chinese BeiDou,
or the european Galileo system. While deviation of second
generation GNNS will be in a magnitude of some centimeters
in outdoor use [4], satellite systems are not expected to
provide sufﬁcient accuracy inside of buildings without being
supported by expensive complementary ground component
(aka ”pseudolite”) technology [5].
Thus, the quest for accurate and inexpensive indoor lo-
calization techniques has fostered intensive research over the
last decade and resulted in a number of different promising
approaches. While solutions based on cellular signals have
not successfully solved the problem of insufﬁcient accuracy,
the use of IEEE 802.11 wireless networks, e.g., Wi-Fi, has
been widely adopted for real-time indoor localization purposes
[6–10]. The rapidly growing usage of Wi-Fi access points
as navigation beacons is, among other reasons, due to the
ubiquitous availability of Wi-Fi networks and to the fact that
a smartphone can easily measure Wi-Fi signal strength values.
”Received Signal Strength Indication” (RSSI) values of several
Wi-Fi access points are used to determine the current position
of a Wi-Fi receiver. The advent of cheap bluetooth low energy
(BLE) beacons [11], e.g., iBeacons [12], might foster their use
for the same purpose within the next few years.
Ultra-wideband (UWB) radio has the potential to become
the most successful base technology for indoor smartphone
positioning. It can be used similar to Bluetooth for inter-
device communication. But, most important, UWB has been
designed speciﬁcally to enable precise distance measurements
even through walls. Localization of an UWB-equipped smart-
phone is based on distance measurements between the device
and UWB tags. As of summer 2015, the ﬁrst UWB-enabled
smartphones became available on the market [13].
255
International Journal on Advances in Systems and Measurements, vol 8 no 3 & 4, year 2015, http://www.iariajournals.org/systems_and_measurements/
2015, © Copyright by authors, Published under agreement with IARIA - www.iaria.org

Regardless of the beacon types and localization algorithms,
absolute indoor localization methods currently rely on a dense
beacon mesh to allow for accurate localization. In a hetero-
geneous area, thus, a practically important issue is the device
localization at spots that lack a sufﬁciently good beacon signal
coverage.
B. Pedestrian Dead Reckoning
A substantially different approach to localization is dead
reckoning, a well-established relative positioning method.
Starting from a known position, inertial and other sensors,
e.g., accelerometers, gyroscopes, magnetic ﬁeld sensors, or
barometers, are used to track relative position changes. For
example, distance estimation in pedestrian dead reckoning
(PDR) systems [14] is typically based on step detection with
motion sensors and step length estimation. This is com-
bined with direction information from an electronic compass.
Modern smartphones are crammed with all kinds of sensors
and, thus, are well-suited for inertial navigation. Sensor-based
localization is, however, subject to unbound accumulating
errors, and therefore needs frequent recalibration.
An additional challenge for indoor PDR systems is the
ﬂoor level determination within multi-story buildings. Mea-
suring vertical displacement is straightforward for barometer-
equipped smartphones. Vertical movements are usually asso-
ciated with ﬂoor changes using elevators, stairs, or escalators.
From the athmospheric pressure measurements the vertical
displacement can be inferred sufﬁciently accurate to determine
the ﬁnal ﬂoor level unambiguously [15]. The exact height
of this level, taken from the building model, can in turn be
used to recalibrate the pressure altimeter. In the absence of a
barometer, sensor-based pedestrian activity classiﬁcation can
be used to detect ﬂoor changes and to determine the ﬁnal level.
C. Fusion of Absolute Positioning with PDR
Accuracy requirements for localization systems depend on
their intended use. A pedestrian indoor navigation system
frequently needs to distinguish if a user is in a corridor or
in an adjacent room, or has to lead the user unambiguously
to one of two doors placed side by side. Whereas errors of
more than one meter are undesirable in such a setting, an
accuracy of a few centimeters is barely ever needed. GPS
or Wi-Fi-based ﬁngerprinting typically have average errors
of several meters. According to [16], the average errors of
inertial positioning systems range between 60 centimeters and
”corridor width”. The aim of combining inertial and less
accurate absolute methods is to provide an average accuracy
signiﬁcantly below one meter while limiting the accumulation
of inertial measurement errors.
A hybrid method is a fusion of an absolute positioning
method with sensor-based navigation. For example, in a GPS-
based automotive navigation system sensor-based speed and
direction measurements are used to track the current position
whenever GPS signals are degraded or unavailable, e.g., in a
tunnel. Similarly, a PDR system can be combined with GPS
into a hybrid solution for outdoor areas or, together with any
absolute indoor position method, e.g., Wi-Fi-based, for use
within a building.
An interesting aspect of hybrid systems is the distribution
of roles. The absolute positioning could be seen as a minor
subsystem of the sensor-based system supplying the start
position and, occasionally, intermediate positions for recali-
bration. However, existing systems typically use the absolute
positioning method as a primary method, whereas sensor-
based location measurements are only used in case of degraded
beacon signals. The absolute base-method is used to compute
position estimates (”ﬁxes”) at regular intervals. Each ﬁx is
considered a new known start position for inertial navigation.
Whenever a ﬁx is not available due to poor signal coverage,
the relative movement from the last ﬁx location is used to
determine the current device location. A car navigation system,
e.g., will use inertial navigation in a tunnel. After leaving
the tunnel, it will return to the primary method GPS. This
commonly used combination pattern does not take into account
that, depending on the current beacon reception conditions and
despite the accumulating sensor measurement errors, the dead-
reckoned position will often be more accurate than the base
method ﬁx.
D. Auto-Adaptive Dead Reckoning
This paper proposes a hybrid localization solution, called
”auto-adaptive dead reckoning”, incorporating a more sophis-
ticated way of combining absolute and relative positioning.
Considering that the accuracy of each of the involved methods
might ﬂuctuate extremely between measurement locations, the
fusing algorithm evaluates context conditions, that are critical
for the accuracy, with every measurement. A measurement
value that is considered accurate has a stronger impact on the
result. The term ”adaptive” is used for a fusion algorithm that
associates a weighting factor with each fused method in order
to adapt the algorithm to site-speciﬁc measurement conditions,
e.g., Wi-Fi signal coverage within a building. Static adaptation
refers to a conﬁguration time weighting, whereas auto-adaptive
(or dynamic) fusion refers to a dynamic weighting for each
individual measurement. This advanced fusing technique has
been implemented as a component of a mobile application for
the Android platform, called SmartLocator [17]. It is explained
in more detail in Section IV.
E. Supporting Different Localization Schemes
Going beyond the auto-adaptive dead reckoning approach,
this paper introduces a novel concept for the integration of dis-
tinct localization methods in the same system. A ”Localization
Scheme” is a realization of a localization approach, comprising
a selection of base technologies, a system model, and appropri-
ate algorithms. A multi-scheme localization system supports
several alternative schemes with automatic scheme selection.
In fact, there are several distinct motivations for envisioning
a multi-scheme approach:
Localization Infrastructure Dependencies: Regarding a user
entering and leaving several buildings while roaming through
a complex area, it is quite obvious that a single localization
256
International Journal on Advances in Systems and Measurements, vol 8 no 3 & 4, year 2015, http://www.iariajournals.org/systems_and_measurements/
2015, © Copyright by authors, Published under agreement with IARIA - www.iaria.org

technique is not sufﬁcient. In the outdoor environment GPS
can be used, either stand-alone or fused with PDR into a hybrid
scheme. Regarding the indoor case, though infrastructure-
less positioning is possible, most solutions build on speciﬁc
infrastructure, e.g., Wi-Fi radio maps, to obtain more accurate
measurements. Ideally, all the buildings in the area of interest
are equipped with a homogeneous localization infrastructure.
Even in this case, a localization system has to switch be-
tween indoor and outdoor localization schemes. However,
most areas with several buildings will not be homogeneous
in this sense, but will rather require different techniques for
indoor positioning. For example, some buildings might have an
infrastructure for Wi-Fi absolute positioning, some might be
equipped with iBeacons, and others will have no appropriate
infrastructure at all. Even within a single building, different
localization approaches could be required, e.g., because a
speciﬁc infrastructure is not available in all ﬂoors.
Different Pedestrian Activities: Another aspect inﬂuencing
the localization approach is the way of pedestrian movement.
A positioning system using PDR must in some manner deal
with different movement patterns, e.g., vertical movements due
to stairs or elevator usage.
Device Hardware Capabilities: Novel smartphone hardware
features often offer new opportunities for positioning, e.g.,
NFC- or BLE-support, barometers, hardware step detectors,
or UWB. Whenever new hardware facilitates an advance in
localization, it will be exploited for that purpose. However,
not all devices are equipped with all kinds of available sensors
and radios. For example, only a few smartphone models
have built-in barometers. However, a barometer could be used
to determine the current ﬂoor after an elevator trip in a
relatively simple and reliable way, whereas other methods,
e.g., based on radio beacons or inertial sensors, have several
disadvantages. Another example are hardware step detectors,
which might be preferable to software solutions due to lower
power consumption. A localization system might keep up with
the ever-increasing device diversity in several ways:
1) The system uses only commonly available hardware
components, e.g., Wi-Fi and common inertial sensors,
thereby forgoing the new opportunities.
2) The system requires a high-end smartphone with several
non-standard hardware features in order to exploit these
for positioning.
3) A system uses different positioning techniques for de-
vices with distinct positioning capabilities.
Hence, a multi-scheme approach does not only address the
diversity of contextual conditions, or rather the availability of
some positioning infrastructure. It is also a suitable concept for
considering different pedestrian moving patterns and different
positioning-related hardware capabilities.
F. Requirements for Localization in large and complex Areas
Subsuming and extending the discussion above, the follow-
ing requirements should be met by a complex area positioning
system:
Requirement 1. A positioning scheme should provide sufﬁ-
cient accuracy.
Though accuracy requirements for pedestrian localization
depend to some degree on the intended application domain,
most of currently available absolute methods, e.g., GPS, Wi-
Fi-based, BLE-based, are considered too inaccurate to be used
stand-alone. Thus, the important consequence of this require-
ment is that fusion with PDR or some other enhancement is
necessary.
Requirement 2. Several positioning schemes have to be
supported.
In addition to a GPS-based outdoor scheme, the system has
to support at least one, but typically more than one indoor
scheme. Several PDR-schemes in order to address different
pedestrian moving patterns and detect ﬂoor-level changes, as
well as scheme selection depending on device capabilities
are not considered as requirements, but rather as desirable
features.
Requirement 3. The system should automatically select the
most appropriate scheme.
While roaming in the area, repeated manual selection of
a new positioning technique is not acceptable for a user.
There must be a mechanism for detecting transitions between
subareas requiring different localization approaches and for
selecting an appropriate scheme.
Requirement 4. Unnecessary power consuming measurements
have to be avoided.
With respect to localization, power consumption issues
arise with high processor load due to probabilistic fusion
algorithms and with the use of sensor and radio equipment. As
a consequence, it is not acceptable to use several techniques
simultaneously, when a single one is sufﬁcient. For example,
continuously searching for a GPS ﬁx, while the user stays in
a building for hours, will drain the battery unnecessarily. The
same holds for dispensable Wi-Fi scans etc.
Several camera-based localization schemes have been pro-
posed. Since these are inherently power-consuming they have
been out of consideration in the multi-scheme approach pre-
sented in this paper.
G. Overview
This paper presents a smartphone localization system satis-
fying the requirements listed above. It is based on a three layer
architecture. At the bottom layer, the system comprises a PDR
subsystem and several basic absolute positioning methods,
namely, Wi-Fi-based ﬁngerprinting, BLE-based ﬁngerprinting,
Near Field Communication (NFC) [18], and GPS. The inter-
mediate layer consists of hybrid positioning schemes. Each
scheme fuses PDR with an absolute positioning method using
a generic and efﬁcient auto-adaptive dead reckoning algorithm.
At the top layer, a multi-scheme mechanism is used to detect
necessary scheme switches and select the most appropriate
scheme automatically.
After presenting related work in Section II, the proposed
positioning system is described in the succeeding two sections.
257
International Journal on Advances in Systems and Measurements, vol 8 no 3 & 4, year 2015, http://www.iariajournals.org/systems_and_measurements/
2015, © Copyright by authors, Published under agreement with IARIA - www.iaria.org

The focus of Section III is on the overall architecture and
the automatic selection of an appropriate localization scheme,
while Section IV explains the fusion of PDR and absolute
positioning using the auto-adaptive dead reckoning approach.
Section V discusses experimental results showing the
achieved accuracy improvements over non-hybrid as well as
hybrid methods with non-dynamic method fusion. Section
VI reviews some beneﬁts and shortcomings of the presented
approach and future research plans.
II. RELATED WORK
A large number of solutions to the problem of real-time
indoor localization have been proposed, and several efﬁcient
algorithms for absolute and relative positioning have been
published. Auto-adaptive dead reckoning, as presented in this
paper, is based upon Wi-Fi ﬁngerprinting, BLE-ﬁngerprinting,
GPS, NFC, and PDR.
A. Wi-Fi-based Fingerprinting
Using an existing Wi-Fi infrastructure for indoor local-
ization is an obvious and well-investigated approach. While
RSSI-based distance calculations have proven to be too inac-
curate to be used for trilateration-based indoor localization,
RSSI-ﬁngerprinting methods are particularly useful in the
context of real-time smartphone positioning [6–10].
Fingerprinting is based on probability distributions of signal
strengths for a set of access points at a given location. A map
of these distributions is used to predict a location from RSSI
samples. This radio map is created in an ofﬂine learning phase
for a number of known locations called calibration points.
In order to determine the device position, RSSI values are
collected from all visible access points and the radio map is
searched for locations with similar signal strengths.
A major advantage of Wi-Fi ﬁngerprinting is that it does not
require specialized hardware [7][19][20]. Nevertheless, a non-
dynamical Wi-Fi infrastructure with good coverage is needed
to achieve reasonable positioning results.
However, the most important disadvantage is the elaborate
ﬁngerprint database creation and maintenance. Since the ac-
curacy of position estimates highly depends on the density
of the radio map [7], the construction of a high-density
map is inevitable for Wi-Fi-only positioning solutions. The
auto-adaptive algorithm, in contrast, allows for a signiﬁcant
reduction of the number of calibration points without loosing
too much overall accuracy.
In order to avoid the map creation overhead completely,
zero-effort solutions based on crowdsourcing have been pro-
posed [21][22]. Although efﬁcient map creation is outside the
scope of this paper, it should be noted that map creation and
map usage algorithms are typically loosely coupled. Thus, any
successful approach to automate map creation could possibly
be generalized for usage with existing ﬁngerprinting systems.
B. Sensor-based Positioning
According to [16], PDR systems can be classiﬁed as Iner-
tial Navigation Systems (INSs) or Step-and-Heading Systems
(SHSs). While the INSs typically require specialized hardware,
the SHSs are well-suited for PDR with smartphones.
The SmartLocator solution presented in this paper imple-
ments an SHS, which builds upon efﬁcient algorithms for step
detection and heading estimation. The heading is determined
by a sensor fusion method described in [23]. Step detection
exploits the smartphone’s accelerometer signals. Whenever a
peak with a certain amplitude at the z-axis is noticed, a step
can be assumed [24]. A modiﬁed Pan-Tompkins algorithm is
used for signal preparation. Pan-Tompkins, in the context of
step detection, has been used by Ying [25] before.
For larger areas different pedestrian moving patterns have
to be considered, as elevators, stairs, or escalators will be used
temporarily. Promising approaches to sensor-based pedestrian
activity classiﬁcation have been presented in [26] and [27].
C. Method Fusion
An interesting approach combining Wi-Fi-based ﬁngerprint-
ing with PDR was proposed in [28]. Their fusing algorithm
uses a limited history of location measurements for both
methods to achieve accurate position estimations. Another
promising solution is described in [29]. The algorithm builds
on a statistical model for Wi-Fi-localization avoiding the
effort of ﬁngerprinting map creation, deliberately taking into
account the resulting poor accuracy of the obtained position
information. Both fusing methods comprise the use of ﬂoor
plans and particle ﬁlters in order to obtain more accurate
position information [30].
Particle ﬁlters are probabilistic approximation models based
on Bayesian ﬁlters [31], which can be used for fusing PDR
measurements with the results of absolute positioning meth-
ods. They also provide a means for incorporating movement
constraints obtained from a ﬂoor map of a building or a foot-
path or road map. In the context of smartphone localization,
a particle consists of an estimation for position and heading
together with a weight value representing the probability that
the estimation is correct. The current state of a smartphone is
not represented by a single location and heading, but rather by
many particles. State changes have to be handled according
to the underlying motion model by a recursive algorithm
whose computational cost depends to a considerable degree
on the number of particles. Basically, when a step is detected,
each particle is propagated to a new position by exploiting
Bayes theorem, and new weight values are computed. Next,
a resampling ﬁlter is applied to replicate particles with large
weights and to remove those with negligible weights.
When used in a laboratory environment with a high-quality
PDR system, i.e., a special purpose, ﬁrmly attached, foot-
mounted sensor system, particle ﬁlters have shown to produce
very accurate position estimates. With a stock smartphone
sensor system, however, movements of the device are more
loosely coupled with the movements of its user, which induces
more uncertainty into the measurements. In a probabilistic
model this additional uncertainty leads to a considerable
increase in the measurement error variances, which in turn
has to be accounted by an increased number of particles. As
258
International Journal on Advances in Systems and Measurements, vol 8 no 3 & 4, year 2015, http://www.iariajournals.org/systems_and_measurements/
2015, © Copyright by authors, Published under agreement with IARIA - www.iaria.org

a consequence, particle ﬁlters induce high processor load and
have considerable impact on power consumption [16]. More-
over, suitable ﬂoor maps have to be supplied and maintained.
III. MULTI-SCHEME POSITIONING
This section describes the proposed multi-scheme approach
and the implementation of scheme selection in the Smart-
Locator positioning system. After introducing the system
architecture in Section III-A, Section III-B presents the coarse
localization subsystem used to determine the current building
and ﬂoor-level. Section III-C describes the implementation of
the high-level scheme switching.
A. System Models and Architecture
Since multi-scheme support is one of the outstanding fea-
tures of the proposed system, the term ”localization scheme”,
the motivation for a multi-scheme approach, and the relation
between scheme selection and method fusion deserve some
further explanation.
It is a common property of many advanced fusion-based
localization approaches that they are based on a speciﬁc
dynamic state-space system model with a hidden state. Partial
information about this state can be obtained by observations
or measurements. The model contains a set of assumptions
about the measurement methods used and the context in which
the measurements are taken. A common approach is to use a
system model for pedestrian movements based on heading and
stride size. The positions obtained from an absolute positioning
method are the observations, which can be used to infer
information about the system state. The fusion of PDR and
absolute method is used to recalibrate the PDR state and can
be implemented, e.g., by a particle ﬁlter.
Wi-Fi Radio
 
Map
RSSI Sensor
( Wi-Fi Chip )
Accelerometer
Magnetometer
Electronic
Step Detector
PDR Localization
Gyroscope
Wi-Fi Fingerprinting
 
Localization
Basic
 Localization
 Methods
Fusing Algorithm
Position
Hybrid Localization Scheme
Smartphone
 Hardware
 
Layer
Compass
Floor Map
Building and Footpath Model
 
(optional)
Figure 1. Layers of a typical Hybrid Localization Scheme.
The architectural layers of such hybrid localization systems
are shown in Figure 1. The illustration abstracts from the
fact that the PDR subsystem could also use internal fusing
algorithms for sensor measurements, e.g., a Kalman ﬁlter
as part of the electronic compass implementation [32]. To
avoid confusion, the term ”localization method” is used for
the lower level subsystems of the basic localization method
layer, e.g., PDR, GPS, Wi-Fi- or Bluetooth-ﬁngerprinting.
Instead, the term ”localization scheme” denotes the uppermost
architectural layer of a hybrid system, which is characterized
by the high-level fusion algorithm.
A complex area with heterogeneous positioning infra-
structure requires the combination of different localization
techniques. The relation between the model-based view and
the requirements for complex areas can be clariﬁed by some
examples:
• If the same PDR system is combined with GPS outdoors
and with Wi-Fi indoors, a switch between these schemes
corresponds to a replacement of the observation model.
• Changing the way of moving around, e.g., taking an
elevator to change the ﬂoor, or using a shuttle bus
between two buildings of the area, corresponds to the
replacement of underlying pedestrian movement model.
• Supposing that a building map is used in a particle ﬁlter
to detect and eliminate through-the-wall movements, this
map usage should perhaps be switched off in order to
avoid unnecessary processor load in a wall-free environ-
ment or in an unmapped subarea. This would correspond
to a change in the fusion algorithm.
Figure 2 depicts the components of a hybrid localiza-
tion scheme from a model-based view. Supporting different
schemes, i.e., different localization approaches, in a single
system makes sense for a variety of reasons already presented
above. However, the ﬁgure illustrates that a scheme change
can be related to
1) a change in the pedestrian activity,
2) a change of the PDR recalibration mechanism,
3) or a change in some location-depending algorithmic
aspect of the fusion algorithm.
System Model
Measurement Model
Fusion Algorithm
"Walking Pedestrian"
"Wi-Fi Localization"
"Particle Filter with
     Building Map"
changing with
   pedestrian
     activity
changing with
    absolute
  positioning
 infrastructure
      changing
when map-support
  is inappropriate /
  map unavailable
Device Positioning Capabilities
"Hardware Step Detection: TRUE"
"Barometer: TRUE"
"NFC: TRUE"
"BLE: FALSE"
Model depends on
Device Capabilities
Figure 2. System-theoretic View of a Localization Scheme and its Compo-
nents.
Whereas the scheme changes listed above are dynamic,
i.e., imposed by location changes, the dependencies between
schemes and hardware features are location-independent and
static. Multi-scheme support corresponds to the alternative
259
International Journal on Advances in Systems and Measurements, vol 8 no 3 & 4, year 2015, http://www.iariajournals.org/systems_and_measurements/
2015, © Copyright by authors, Published under agreement with IARIA - www.iaria.org

usage of several distinct models. Hence, scheme switching is
not a replacement for method fusion, but rather a higher level
concept for automatically selecting an appropriate (possibly
hybrid) localization scheme. Support for several localization
schemes with automatic scheme selection introduces a new
top-level layer into the system architecture as shown in Figure
3.
Basic
 Localization
 Methods
Wi-Fi
activate / deactivate
Multi-Scheme Localization
PDR
GPS
NFC
Hybrid
Localization
Schemes
Controller
Scheme
Scheme
Scheme
BLE
Scheme
Wi-Fi
BLE
PDR
GPS
position
exclusive
operation
Multi-Scheme
Figure 3. Layers of a Localization System with Multi-Scheme Support.
The multi-scheme controller has to determine dynamically
which localization scheme is the most appropriate one at the
current device location. There are some noteworthy relations
between the components of the bottom and intermediate-level
layers:
1) PDR is used in several schemes to improve accu-
racy: Fingerprinting-based methods using Wi-Fi or BLE-
beacons can be fused with PDR the same way as GPS.
2) Methods that provide sufﬁcient accuracy on their own
are not fused with PDR. A currently supported accurate
method is the reading of NFC tags with known position.
Future methods based on the upcoming UWB and next
generation GNNS technologies will also fall into this
category.
3) The PDR scheme in the model is not necessarily identi-
cal to the basic PDR method. It is rather a sensor-based
algorithm to be used in the absence of radio beacons,
which might make use of a ﬂoor map or path model to
recalibrate the measurements.
B. Coarse Localization Subsystem (CLS)
In order to recognize the current ﬂoor-level after a vertical
movement, as well as for the detection of indoor/outdoor
transitions, a coarse localization subsystem consisting of a set
of special localization methods is used. The CLS architecture
is illustrated in Figure 4.
The CLS can be considered as a simple, special-purpose,
secondary localization system. It does not use radio maps or
method fusion. Instead, the CLS base algorithms, e.g., the
     Base
Technology
activate / deactivate
Coarse
Localization
Algorithms
CLS
Wi-Fi RSSI
BLE RSSI
GPS
floor level
    simultaneous 
operation possible
Wi-Fi-based
Determination
Context
Determination
Context
BLE-based
Determination
Context
GPS-based
measument
measument
Figure 4. The Coarse Localization Subsystem.
Wi-Fi-based context determination, are lightweight algorithms
which essentially check, whether a ﬂoor-speciﬁc beacon con-
stellation is detected, or whether a GPS-ﬁx is available. The
outdoor environment is treated as a special ﬂoor-level in this
context. An important difference to the primary multi-scheme
localization is the possibility of simultaneously searching for
usable Wi-Fi, BLE, and GPS-signals. The CLS supports two
operating modes.
• The limited mode is used to check the current ﬂoor-level
against a small set of possible levels. A typical use is the
ﬂoor-level determination after elevator usage. Since the
former position is available, the set of reachable ﬂoors
can be determined in advance as will be explained in
Section III-C.
• The unlimited mode is used for an initial estimation of
building and ﬂoor whenever there is no former location
available, e.g., when the system is started. Compared to
the limited mode, the set of possible ﬂoors to be checked
is the set of all ﬂoors of all buildings.
The CLS reports successful context determinations imme-
diately, but stays turned on until it is explicitly deactivated by
the multi-scheme controller.
C. Transition Detection and Scheme Selection
When a roaming user moves to an area requiring a different
positioning technique, the multi-scheme controller has to de-
tect this situation, to determine the new positioning scheme,
and to switch to the selected scheme.
Positioning Context: A positioning context is a spatial area
with exactly one associated localization scheme. Although
arbitrary contexts could be deﬁned, only three types are con-
sidered here, i.e., the outdoor context, a speciﬁc building, or a
ﬂoor of a building. Figure 5 gives an example of positioning
contexts with their associated localization schemes.
Positioning Context Map: The association of a scheme with
a context is done via a positioning context map. With each
positioning context this map associates
• A localization scheme descriptor (LSD) identifying the
algorithm to be used and containing links to radio map
and building model.
260
International Journal on Advances in Systems and Measurements, vol 8 no 3 & 4, year 2015, http://www.iariajournals.org/systems_and_measurements/
2015, © Copyright by authors, Published under agreement with IARIA - www.iaria.org

Floor 3: PDR-only context
Floor 1: Wi-Fi radio map context
( Hybrid Model: Wi-Fi + PDR )
Floor 2: IBeacon radio map context
( Hybrid Model: IBeacon + PDR )
Outdoor GPS context
( Hybrid Model: GPS + PDR )
Figure 5. Positioning Contexts Example.
• A context determination descriptor (CDD) identifying the
method to be used for recognizing the context, e.g., Wi-Fi
or BLE, and a context-speciﬁc beacon constellation.
The construction and maintenance of this map is, in fact,
very lightweight. SmartLocator is based on an Openstreetmap
(OSM) ([33]) model with extensions for multi-story buildings.
In the extended OSM model, any building and any ﬂoor is
represented by a relation. Those relations can be tagged with
additional information, e.g., a localization scheme descriptor.
All relations are associated with the outdoor context per
default. Thus, if a new localization infrastructure is established
in a ﬂoor of a building, that is supported by a localization
scheme S, in order to update the map one only needs to tag
the ﬂoor relation with the descriptor for S.
Locations and Port Objects: In the building model, the
location of an object consists of a latitude-longitude pair, a
building ID, and a ﬂoor-level. Doors, stairs, or elevators are
special port objects, which represent links between buildings,
between two or more ﬂoors of the same building, or between
the building and the outdoor environment. An elevator, e.g.,
is represented by several port objects, all sharing the same
latitude and longitude, but with different ﬂoor-levels. A door
leading from one building directly into another one is rep-
resented by a pair of port objects belonging to two distinct
buildings but having the same geographic position attributes.
The neighbourhood of a port object consists of the object
itself and all other port objects that are linked to it as ”reach-
able” objects. Essentially, these are the possible endpoints
of elevators, escalators or stairs, together with the objects
of adjacent contexts (other building, outdoor environment)
which share the same geographic position. Each port object
is linked to its neighbours, such that the neighbourhood can
be computed efﬁciently. A port object is member of its own
neighbourhood to model situations like an elevator trip ending
in the original ﬂoor.
Transitions between Floors and other Positioning Contexts:
When a user is roaming through a building, the positioning
system always knows the current building and ﬂoor-level and
checks against the building model, whether the user is near one
of the ﬂoor’s port objects. If this is the case, the system enters
a transition detection state providing continuous attempts to
detect movements across the borders between two adjacent
positioning contexts. Entering this state, those adjacent po-
sitioning contexts are computed as follows. First, the port
object’s neighbourhood is extracted from the building model.
For each location in this neighbourhood, the corresponding
positioning context is determined and the context-associated
descriptors LSD and CDD are looked up in the positioning
context map.
The list of CDDs for the adjacent contexts is subsequently
used for an activation of the CLS in limited mode. The
CLS will repeatedly check for BLE-, Wi-Fi-, or GPS signals
according to the CDDs of the adjacent contexts and report
the context identiﬁcation results until transition detection is
eventually deactivated by the multi-scheme controller. The
deactivation criteria depend on the type of port object. In
case of an elevator, the transition is assumed to be completed,
when the user is walking again. At this time, a unique ﬂoor-
level identiﬁcation is required from the CLS. For staircases,
the end of transition is assumed after counting as many steps
as the staircase has according to the building model and a
unique ﬂoor identiﬁcation is available from the CLS. Only
if the ﬂoor has changed, the position is recalibrated to the
staircase endpoint location. Admittedly, this is to some extend
error-prone with respect to the horizontal location, e.g., when
a sportive person takes two steps at once, or if someone turns
back after nearly having reached the end of the stairs. In
the case of a door, transition detection ends when ﬁve steps
have been counted from the begin of transition. Obviously,
these ﬁve steps need not necessarily be steps away from the
door. In those rare scenarios, where the transition detection
is switched off but the user is still at or near the original
port object location, the system will immediately return to
transition detection state again.
Leaving transition detection state means deactivation of the
CLS. If a transition was detected, the scheme is switched
according to the LSD of the new context. In transition detec-
tion state, several ambiguous situations are possible, reﬂecting
either the uncertainty about the current ﬂoor-level during a
vertical movement, or about the exact progress of passing
through a door. For example, a user could walk towards a
building entrance door, stay there for a while, turn around and
walk back. Though a context transition does not happen in
this case, the system is in transition detection state as long
as the users smartphone position is estimated to be near the
door. Two adjacent contexts might be identiﬁed by the CLS at
the same time, e.g., if at a building entrance a GPS position
is available but also the ﬂoor-identifying Wi-Fi access point
RSSI value ranges have been veriﬁed.
The context transition for border locations is depicted in
Figure 6, the numbers denoting the order in information ﬂow.
The intermediate states have been omitted for clarity.
It should be noted that an appropriate infrastructure is
mandatory in this context. In practice, existing Wi-Fi infra-
structure will commonly be usable for this purpose without
much additional effort.
A common scenario is that a user leaves a building after
261
International Journal on Advances in Systems and Measurements, vol 8 no 3 & 4, year 2015, http://www.iariajournals.org/systems_and_measurements/
2015, © Copyright by authors, Published under agreement with IARIA - www.iaria.org

Wi-Fi
PDR
GPS
Scheme
Scheme
Scheme
BLE
Scheme
position
Controller
Multi-Scheme
(1)
CLS
Positioning
Context
Map
Building
Model
(2)
(3)
(4)
(5)
(6)
(7)
  port object
neighborhood
  port object
neighborhood
  LSDs + CDDs of
adjacent positioning
        contexts
 CDDs of adjacent 
positioning contexts
     new context:
 building / floor-level
  select scheme
according to LSD
Figure 6. Context Detection near a Context Border Location.
working there for hours. As long as the current location is not
directly adjacent to a door or elevator leading to the outside
of the building, GPS is turned off and the device tracks itself
using the context’s indoor scheme. Only when the user moves
to a door leading to the outside, i.e., a port object with an
outside context neighbour, GPS will be turned on again.
IV. INTERMEDIATE-LEVEL AND BASIC POSITIONING
This section describes auto-adaptive dead reckoning and
its implementation in the SmartLocator positioning system.
As already described above, positions determined with GPS,
Wi-Fi, or BLE are considered inaccurate, whereas NFC-based
positioning is treated as accurate. Using small low-cost NFC
paper tags the maximal reading distance for a smartphone will
be below 20mm. Thus, the accuracy of an NFC-based device
location estimation is essentially determined by the accuracy
of the position information associated with the NFC tag, while
the distance between tag and device is typically insigniﬁcant.
The problem of determining accurate positions of ﬁxed objects
is out of the scope of this paper. However, the position of an
NFC tag can often be determined by attaching it to an object
appearing in a ﬂoor plan, e.g., a door or a stair railing, and
measure the tags location relative to this object.
Whenever an accurate location measurement can be ob-
tained, it overrides all other measurements.
In addition to the absolute positioning capabilities, SmartLo-
cator incorporates a PDR subsystem with step detection and
heading estimation. The stride size is simply set to a user-
speciﬁc ﬁxed value. However, using the absolute localization
methods, it could straightforwardly be augmented with auto-
matic stride size recalibration.
The emphasis of this section is to present the way of fusing
PDR with an absolute positioning method. The term ”auto-
adaptive dead-reckoning” refers to this fusing approach. From
the perspective of PDR, absolute localization is needed to
obtain an initial position and for recalibration. In contrast to a
full recalibration, we propose a partial recalibration determined
by a dynamic weight, which reﬂects the accuracy of the
absolute location estimation.
It is a particular strength of the approach to be generi-
cally usable with any absolute positioning method. Figure 7
illustrates how absolute location sources are combined with
relative positioning information. A deep discussion of all of the
supported absolute methods is out of the scope of this paper.
Therefore, only the Wi-Fi ﬁngerprinting scheme is considered
as a typical example.
Last 
Position
Step 
Detection
Compass
Relative 
Position
Fusion
Weighting
1
Weighting
GPS
NFC 
Location
Wi-Fi 
Location
New 
Position
Figure 7. SmartLocator Positioning Concept.
The following subsections describe the Wi-Fi ﬁngerprinting
approach (Section IV-A), the step detection algorithm (Section
IV-B) and the auto-adaptive fusion (Section IV-C).
A. Fingerprinting
During the training phase a radio map is created, containing
Wi-Fi samples for a set of calibration locations. Each entry
consists of a location and a set of signal strength values
{s1, . . . , sn} obtained at this location. If k is the number
of accesspoints, each sample si is a vector of k integral
measurements (in dBm).
A position estimation is a result of the process chain shown
in Figure 8. After scanning the RSSIs from all visible access
points a Wi-Fi ﬁngerprint is created. To select only well-known
beacons, a SSID and a BSSID ﬁlter are applied. Subsequently,
the MinRSSI ﬁlter eliminates access points which are unusable
for localization due to their low RSSI level. Before the cleared
ﬁngerprint is matched against the radio map a BSSID ﬁlter is
applied to reduce the number of calibration points and thus
the expense of distance determination.
The distance between the current ﬁngerprint and the cali-
bration point ﬁngerprints in the radio map is computed using
the na¨ıve Bayes classiﬁer [7][19][20], which is more accurate
than algorithms comparing distances between RSSIs [34–37].
This advantage has been conﬁrmed during the evaluation of
this positioning system.
If s = (s1, . . . , sk) is the vector of RSSI values obtained
at the current location and P(x|s) denotes the probability that
s is obtained at an arbitrary location x, the problem is to
262
International Journal on Advances in Systems and Measurements, vol 8 no 3 & 4, year 2015, http://www.iariajournals.org/systems_and_measurements/
2015, © Copyright by authors, Published under agreement with IARIA - www.iaria.org

Wi-Fi 
Measurement
Relevant 
Calibration 
Fingerprints
3 Nearest 
Calibration 
Fingerprints
Calibration 
Fingerprints
Cleared 
Measurement
Location
SSID BSSID 
MinRSSI
BSSID
Distance 
Determination
Interpolation
Figure 8. Fingerprinting Process Chain.
determine the location that maximises this probability. Using
Bayes theorem,
P(x|s) = P(s|x)P(x)
P(s)
,
(1)
assuming that P(x) is identical for all locations, and consider-
ing that P(s) is location-independent, the remaining problem
is the determination of P(s|x), since
argmax
x
P(x|s) = argmax
x
P(s|x).
(2)
Assuming that RSSI values of all access points are inde-
pendent of each other,
P(s|x) =
k
Y
i=1
P(si|x).
(3)
A common approach to determine P(si|x) from the radio
map for a single access point APi is to assume a Gaussian dis-
tribution of the RSSI values obtained at a location x [34][19,
p. 36]. The probability density function of this distribution is
f(x) =
1
σ
√
2π e−(x−µ)2/2σ2,
(4)
where µ and σ denote the mean and the standard deviation,
respectively, which are estimated from the samples in the radio
map using the maximum likelihood method.
Since the radio map contains only ﬁngerprints of calibration
locations, an interpolation scheme is used to determine the
actual position. Using the k-nearest neighbors algorithm for
k = 3, the position estimation ˆx is obtained by interpolating
the locations l1, l2, l3 of the three best ﬁtting ﬁngerprints using
P(li|s) as a weighting factor:
ˆx =
3P
i=1
liP(li|s)
3P
i=1
P(li|s)
.
(5)
B. Step Detection
The step detection algorithm recognizes pedestrian move-
ments based on a simple peak detection algorithm described
by Link et al. [24]. To improve the amount of detected steps
and decrease the appearance of false positive detections, the
signal is prepared by applying a slightly modiﬁed version of
the Pan-Tompkins method.
y(n)
=
(
1
4[2x(n) + x(n − 1) − x(n − 3) − 2x(n − 4)]
if y(n) > 0
0
otherwise
(6)
y(n)
=
(1 + y(n))2 − 1
(7)
A derivative operator uses low-pass ﬁltered acceleration values
in order to suppress low-frequency components and enlarge the
high frequency components from the high slopes (6). Negative
values are discarded, as they are not needed for the peak
detection. Figure 9 shows the incoming acceleration signal
before (a) and after (b) this preparation.
0.5
1
1.5
2
2.5
3
3.5
4
8
10
12
Time [s]
m/s2
(a) Raw Acceleration at Z-Axis.
0.5
1
1.5
2
2.5
3
3.5
4
0
2
4
6
Time [s]
m/s2
(b) Squared Derivative Signal.
Figure 9. Acceleration Measurements Before and After Preparation.
The step detection algorithm examines the signal for peaks
by comparing the last three values, represented by the red
squares in Figure 10. A step is assumed whenever the signal
changes by a certain threshold. After a step has been detected,
the algorithm pauses for 300ms to prevent a step from being
detected twice.
C. Auto-Adaptive Dead Reckoning
The major innovation of SmartLocator’s intermediate-level
hybrid localization is the accuracy-dependent fusion of abso-
lute and relative positions. Traditional dead reckoning systems
overwrite past position determinations whenever a new abso-
lute position is available. This is not reasonable whenever ab-
solute positions’ accuracy is bad or varying. Therefore, every
263
International Journal on Advances in Systems and Measurements, vol 8 no 3 & 4, year 2015, http://www.iariajournals.org/systems_and_measurements/
2015, © Copyright by authors, Published under agreement with IARIA - www.iaria.org

1
2
3
4
0
2
4
6
> threshold
pause detection
pause detection
Time [s]
Figure 10. Step Detection Example. Red Squares Represent Analyzed Values.
absolute position is reckoned with past position estimations.
The weighting of the new absolute position depends on an
estimation of its accuracy. As a consequence, accurate absolute
positions have a greater inﬂuence on the ﬁnal position than less
reliable position estimates.
E.g., Wi-Fi positions determined in an area with poor Wi-Fi
coverage just have little inﬂuence on the ﬁnal position estima-
tion and the position determined by detecting the pedestrian’s
steps and heading is weighted strongly. On the other hand,
Wi-Fi positions which are determined in an area with lots of
access points and good signal quality are used to correct the
drift which may occur due to inaccuracies in step detection
and heading estimation.
Let AbsPos be a location coordinate estimate obtained
by an absolute positioning method at time tAbsP os, e.g.,
a Wi-Fi or GPS position. The contribution of AbsPos to
the resulting location information FusedPos depends on
the method-speciﬁc accuracy factor accuracy(AbsPos). This
factor, which is obtained by context evaluation, reﬂects the
measurement’s context-dependent accuracy.
In addition, a time-dependent factor drift(tAbsP os) is
added to the accuracy factor. In this way, sensor drifts in
the relative position will be taken into account and absolute
positions have a stronger inﬂuence if the last position deter-
mination was long ago. The linear drift(tAbsP os) used in
SmartLocator is represented by Figure 11.
New calculations of AbsPos, PDRPos or FusedPos are
triggered by time, NFC read, signal loss or user movement
events.
FusedPos = AbsPos ∗ α + PDRPos ∗ (1 − α)
(8)
α = max(accuracy(AbsPos) + drift(tAbsP os), 1)
(9)
1
2
3
4
5
6
7
8
9
10
0
0.2
0.4
∆t(s)
drift(tAbsPos)
Figure 11. Time-Dependent Factor.
Accuracy Factors: The accuracy factor accuracy(AbsPos)
depends on the currently used positioning method. The follow-
ing methods are used for Wi-Fi ﬁngerprinting, GPS and NFC.
Wi-Fi: Several evaluations with an existing Wi-Fi infra-
structure yielded an average error of 2.94 meters for pure
Wi-Fi positioning. However, the error varied from 0.07 to
7.99 meters. Figure 12 shows the analysis of the gathered
test data, revealing a relation between the average error and
the amount of access points, which have been available for
position determination. Even in case of good Wi-Fi coverage,
error varies from 0.3 to 7.3 meters.
2
3
4
5
2
3
4
5
Amount of Wireless Access Points
Avg. Error (m)
Figure 12. Accuracy Factor for Wi-Fi Positioning.
The accuracy factor of the Wi-Fi positioning method, illus-
trated in Figure 13, takes this relation into account to reduce
the inﬂuence of unreliable position measurements.
2
3
4
5
0
0.1
0.2
0.3
Amount of Wireless Access Points at tAbsP os
Accuracy Factor Wi-Fi
Figure 13. Wi-Fi Accuracy Factor Depending on Amount of Access Points.
GPS: The GPS position is determined by the smartphone
through the operating system API. This API associates with
each GPS position an accuracy property, which represents an
estimated average error in meters. The accuracy factor, shown
in Figure 14, is based on this accuracy property.
1
2
3
4
5
6
7
8
9
10
0
0.5
1
Estimated Error in Meter
Accuracy Factor GPS
Figure 14. Accuracy Factor for GPS Positioning.
NFC: Near Field Communication (NFC) is used for po-
sitioning by placing passive NFC tags at points of interest.
In order to scan an NFC tag, the smart phone needs to get in
touch with it. Therefore, the location of the smart phone can be
expected to be the location of the NFC tag. As a consequence,
the accuracy factor of NFC always returns the maximum value
of 1, which means that an NFC position overwrites prior
location determinations completely.
264
International Journal on Advances in Systems and Measurements, vol 8 no 3 & 4, year 2015, http://www.iariajournals.org/systems_and_measurements/
2015, © Copyright by authors, Published under agreement with IARIA - www.iaria.org

V. EVALUATION
SmartLocator has been tested under realistic circumstances
in a university campus. However, it is a system undergo-
ing continuous further development. The heuristic rules for
scheme switching, as described in Section III, are still under
evaluation. Also, experiments addressing the use of short-
range, low signal level BLE-beacons for accurate positioning
at port locations are not ﬁnalized.
Therefore, the focus of this evaluation is a detailed discus-
sion of the Wi-Fi ﬁngerprinting approach. Using eight Wi-
Fi access points for positioning, ﬁngerprints at 67 different
locations have been recorded. The ﬁngerprint locations are
distributed uniformly with a distance of two meters. Hence,
an area of about 280 m2 is covered. Four orientations have
been measured for any location. Three ﬁngerprints for each
orientation, resulting in an overall amount of 804 ﬁngerprints.
2 Access Points
3 Access Points
4 Access Points
>

Reference Points
Figure 15. Wi-Fi Positioning Test Area with Fingerprints.
A track of 70 meters has been walked in various speeds,
with different devices and in different directions to get a repre-
sentative evaluation. 14 reference positions have been marked
at the track. Those known reference positions are compared
to the estimated positions, to determine the accuracy of the
different approaches. Figure 15 shows the test environment,
including the test track, which is illustrated by a grey line.
Figure 16 shows a visualization of one test run. The test
started in the bottom right corner and followed the light
green path. The blue line represents the actual positioning
result. Figure 16b shows the results gathered with traditional
dead reckoning, which means that absolute positioning results
overwrite prior positioning estimations. Figure 16c presents a
static weighting of 0.5, i.e., new absolute positions are just
reckoned up by half. Figure 16d visualizes the positioning
results achieved with a dynamic, auto-adaptive combination.
Remarkably, all ﬁgures reveal a clearly visible deviation
from the real path at the same location (in front of the
restrooms, left of the middle). This results from a coincidence
of two local environment conditions. The ﬁrst factor is the
poor Wi-Fi-coverage in this area. Furthermore, a heavy metal
ﬁre door impacts the magnetometer of the electronic compass.
Obviously, if neither of the involved measurement methods
obtains an accurate location, the method fusion cannot com-
pensate the resulting drift completely.
The evaluation revealed that the traditional dead reckoning
(Trad. D.R.) approach performed even a little bit worse than
the pure Wi-Fi positioning. A static combination of relative
and absolute positions was able to slightly improve the posi-
tioning accuracy, especially in the foyer at the left side of the
(a) Wi-Fi only.
(b) Traditional Dead Reckoning.
(c) Static Weighting of (α = 0.5).
(d) Auto-Adaptive Weighting.
Figure 16. Comparison of Different Weightings.
ﬂoor plan. Auto-adaptive combination of Wi-Fi and relative
positioning is able to reduce the average positioning error
signiﬁcantly. The average error has been improved from 2.94m
(Wi-Fi only) to 1.67 meters, the upper quartile from 3.54m to
2.29m. Figure 17 shows the error ranges for the evaluated
approaches.
Wi-Fi only
Trad. D.R.
α = 0.5
auto-adaptive
0
2
4
6
8
Error (meter)
Figure 17. Error Ranges for Different Weightings.
VI. CONCLUSION
The presented approach has two important aspects. First, it
introduces a general concept for integrating different localiza-
tion methods into a single layered system. This is exploited
for dynamically selecting a positioning scheme that is most
appropriate for the current location with respect to supporting
infrastructure. However, the multi-scheme approach is just as
265
International Journal on Advances in Systems and Measurements, vol 8 no 3 & 4, year 2015, http://www.iariajournals.org/systems_and_measurements/
2015, © Copyright by authors, Published under agreement with IARIA - www.iaria.org

well suitable for pedestrian activity classiﬁcation and selective
support of algorithms that build on non-standard device hard-
ware features. The main beneﬁt of the multi-scheme approach
is that a user can rely on seamless localization in larger areas,
typically exhibiting heterogeneous positioning conditions. A
disadvantage is the need for a building map containing infor-
mation about building entrance locations, stairs, elevators, and
positioning context information as described in Section III-C.
However, compared to a detailed building model containing all
rooms, corridors, and doors, or even a ﬁngerprinting database,
this map is leightweight, and its construction and maintainance
does not require much additional effort.
The second remarkable characteristic is the auto-adaptive
dead reckoning algorithm for fusing PDR and an absolute
positioning method into a hybrid scheme. Due to the genericity
with respect to the absolute positioning method, this fusion
approach is well-suited as a central building block within a
multi-scheme architecture. Nevertheless, auto-adaptive dead
reckoning provides accurate measurements even in areas with
low radio beacon coverage. A comparison of Wi-Fi-based
auto-adaptive dead reckoning with other advanced indoor
localization systems shows that errors are in the same order of
magnitude. For example, the Zee localization system [22] com-
bines crowdsourcing of Wi-Fi ﬁngerprints with a sophisticated
map-based particle ﬁlter algorithm, which records a user’s path
through a building and uses map-matching to obtain additional
information about PDR parameters and absolute locations. Zee
can be combined with Horus [19] or EZ [38] and performs
very well in a building with narrow corridors and obstacles that
restrict the set of possible paths. The 50%ile and 80%ile errors
are reported as 1.2m and 2.3m, respectively, which is slightly
better than the results of the auto-adaptive dead reckoning
evaluation. Furthermore, if largely unrestricted roaming is
possible, e.g., in spacious halls, a map-based approach like Zee
cannot exploit its strengths. The auto-adaptive dead reckoning
approach seems to be quite promising, although additional
evaluations with different environment conditions are nec-
essary to gain more conﬁdence in the statistical evaluation.
More sophisticated accuracy estimation methods [39] and the
additional use of ﬂoor map information [29] could probably
improve this result further.
The evaluation shows that areas with bad Wi-Fi coverage
and large rooms beneﬁt the most. As a result, this positioning
system can be used in areas which do not meet the require-
ments for Wi-Fi-only positioning approaches.
An unsolved problem is the determination of an initial
position at starting locations with poor Wi-Fi coverage. Con-
sidering the enormous effort needed to construct a ﬁngerprint-
ing database, it obviously makes sense to also consider the
selective deployment of NFC tags in such areas. These tags
are cheap, permit exact localization, and will be supported
by the vast majority of future smartphones. Moreover, the
implementation of NFC-based localization has shown to be
rather uncomplicated.
Compared to the more elaborate particle ﬁlters, auto-
adaptive dead reckoning is a lightweight algorithm imposing
TABLE I. OPERATION MODES AND POWER CONSUMPTION.
Operation mode
Active Components
Power
Consumption
No motion
Motion sensors
Very low
Indoor Wi-Fi
PDR and Wi-Fi
Low
Indoor BLE
PDR and BLE
Low
Outdoor GPS
PDR and GPS
High
Indoor/indoor border
PDR/Wi-Fi/BLE
Moderate
Indoor/outdoor border
PDR/GPS/Wi-Fi or
High
PDR/GPS/BLE
High
Initialisation
PDR/GPS/Wi-Fi/BLE
High
only modest CPU load. The low-complexity fusion method
and the avoidance of elaborate probabilistic algorithms result
in a good real-time behaviour. Several test runs with different
smartphones have shown that even on low-end hardware the
SmartLocator runs without any visible performance problems.
However, a more detailed analysis of algorithmic performance
factors would be interesting, since time-consuming compu-
tations have negative effects on response times and power
consumption.
Moreover, the approach carefully avoids unnecessary sensor
usage. Investigations of the inﬂuence of sensor scanning
on power consumption with different smartphones [40, 41]
reveal that the GPS antenna is a major power consumer
reducing battery life up to 50%, whereas the impact of inertial
sensors, magnetometers, or barometers is negligible unless
high sampling rates inhibit the monitoring processor from
staying in a low-power idle mode. The proposed multi-scheme
algorithm generally activates only one localization scheme at
a given location, using only the scheme-related device compo-
nents. Simultaneous activation of several absolute localization
methods is restricted to a few special scenarios, i.e., system
initialisation and detection of border-crossing movements, like
indoor-outdoor transitions, near port locations. Furthermore, if
no motion is detected, the localization system changes into a
power-saving mode, reducing its activities to motion sensor
scanning every two seconds. The properties of the multi-
scheme algorithm imply several power consumption scenarios
as shown in Table I.
REFERENCES
[1] N. Becker, M. J¨ager, and S. S¨uß, “Indoor smartphone localiza-
tion with auto-adaptive dead reckoning,” in Proceedings of the
2015 Tenth International Conference on Systems, Barcelona,
Spain, 5 2015, pp. 125–131.
[2] C. J. Hegarty and E. Chatre, “Evolution of the global navigation
satellitesystem (gnss),” Proceedings of the IEEE, vol. 96, no. 12,
2008, pp. 1902–1917.
[3] US Government, “Ofﬁcial U.S. government information about
the global positioning system (GPS) and related topics,”
http://www.gps.gov, 2015, accessed: March, 3rd 2015.
[4] P. Misra and P. Enge, Global Positioning System: Signals,
Measurements and Performance Second Edition. Lincoln, MA:
Ganga-Jamuna Press, 2006.
266
International Journal on Advances in Systems and Measurements, vol 8 no 3 & 4, year 2015, http://www.iariajournals.org/systems_and_measurements/
2015, © Copyright by authors, Published under agreement with IARIA - www.iaria.org

[5] J. Wang et al., “Pseudolite applications in positioning and
navigation: Progress and problems,” Positioning, vol. 1, no. 03,
2002.
[6] M. Youssef and A. Agrawala, “The Horus WLAN location
determination system,” in Proceedings of the 3rd International
Conference on Mobile Systems, Applications, and Services, ser.
MobiSys ’05, 2005, pp. 205–218.
[7] P. Bahl and V. N. Padmanabhan, “RADAR: An in-building RF-
based user location and tracking system,” in INFOCOM 2000.
Nineteenth Annual Joint Conference of the IEEE Computer and
Communications Societies. Proceedings. IEEE, vol. 2.
IEEE,
2000, pp. 775–784.
[8] M. Weber, U. Birkel, R. Collmann, and J. Engelbrecht, “Wire-
less indoor positioning: Localization improvements with a leaky
coaxial cable prototype,” in 2011 International Conference on
Indoor Positioning and Indoor Navigation (IPIN), Guimaraes,
Portugal, pp. 21–23.
[9] T.-N. Lin, S.-H. Fang, W.-H. Tseng, C.-W. Lee, and J.-W.
Hsieh, “A group-discrimination-based access point selection
for WLAN ﬁngerprinting localization,” Vehicular Technology,
IEEE Transactions on, vol. 63, no. 8, 2014, pp. 3967–3976.
[10] M. Brunato and R. Battiti, “Statistical learning theory for
location ﬁngerprinting in wireless LANs,” Computer Networks,
vol. 47, no. 6, 2005, pp. 825–845.
[11] C. Gomez, J. Oller, and J. Paradells, “Overview and evaluation
of bluetooth low energy: An emerging low-power wireless
technology,” Sensors, vol. 12, no. 9, 2012, pp. 11 734–11 753.
[12] N. Newman, “Apple iBeacon technology brieﬁng,” Journal of
Direct, Data and Digital Marketing Practice, vol. 15, no. 3,
2014, pp. 222–225.
[13] Spoonphone.com.
Bespoon.
[Online].
Available:
http://spoonphone.com/en/ [retrieved: Jul., 2015]
[14] S. Beauregard and H. Haas, “Pedestrian dead reckoning: A basis
for personal positioning,” in Proceedings of the 3rd Workshop
on Positioning, Navigation and Communication, 2006, pp. 27–
35.
[15] K. Muralidharan, A. J. Khan, A. Misra, R. K. Balan, and
S. Agarwal, “Barometric phone sensors: more hype than hope!”
in Proceedings of the 15th Workshop on Mobile Computing
Systems and Applications.
ACM, 2014, p. 12.
[16] R. Harle, “A survey of indoor inertial positioning systems
for pedestrians,” IEEE Communications Surveys & Tutorials,
no. 15, 2013, pp. 1281–1293.
[17] N. Becker, “Development of a location-based information and
navigation system for indoor and outdoor areas,” Master’s
thesis, Technische Hochschule Mittelhessen, Giessen, Germany,
2014.
[18] R. Want, “Near ﬁeld communication,” IEEE Pervasive Comput-
ing, vol. 10, no. 3, 2011, pp. 4–7.
[19] M. A. Rehim, “Horus: A WLAN-based indoor location deter-
mination system,” Ph.D. dissertation, University of Maryland,
2004.
[20] Y. Chen and H. Kobayashi, “Signal strength based indoor
geolocation,” Princeton University, Tech. Rep., 2002.
[21] P. Bolliger, “Redpin-adaptive, zero-conﬁguration indoor local-
ization through user collaboration,” in Proceedings of the ﬁrst
ACM international workshop on Mobile entity localization and
tracking in GPS-less environments.
ACM, 2008, pp. 55–60.
[22] A. Rai, K. K. Chintalapudi, V. N. Padmanabhan, and R. Sen,
“Zee: zero-effort crowdsourcing for indoor localization,” in
Proceedings of the 18th annual international conference on
Mobile computing and networking.
ACM, 2012, pp. 293–304.
[23] S. Ayub, A. Bahraminisaab, and B. Honary, “A sensor fusion
method for smart phone orientation estimation,” in 13th Annual
Post Graduate Symposium on the Convergence of Telecommu-
nications, Networking and Broadcasting, 2012.
[24] J. B. Link, P. Smith, N. Viol, and K. Wehrle, “Footpath: Accu-
rate map-based indoor navigation using smartphones,” in Indoor
Positioning and Indoor Navigation (IPIN), 2011 International
Conference on.
IEEE, 2011, pp. 1–8.
[25] H. Ying, C. Silex, A. Schnitzer, S. Leonhardt, and M. Schiek,
“Automatic step detection in the accelerometer signal,” in 4th
International Workshop on Wearable and Implantable Body
Sensor Networks (BSN 2007).
Springer, 2007, pp. 80–85.
[26] X. Chen, S. Hu, Z. Shao, and J. Tan, “Pedestrian positioning
with physical activity classiﬁcation for indoors,” in Robotics
and Automation (ICRA), 2011 IEEE International Conference
on.
IEEE, 2011, pp. 1311–1316.
[27] S. Khalifa, M. Hassan, and A. Seneviratne, “Adaptive pedestrian
activity classiﬁcation for indoor dead reckoning systems,” in
Indoor Positioning and Indoor Navigation (IPIN), 2013 Inter-
national Conference on.
IEEE, 2013, pp. 1–7.
[28] L.-H. Chen, E.-K. Wu, M.-H. Jin, and G.-H. Chen, “Intelligent
fusion of wi-ﬁ and inertial sensor-based positioning systems for
indoor pedestrian navigation,” 2014.
[29] F. Ebner, F. Deinzer, L. K¨oping, and M. Grzegorzek, “Robust
self-localization using Wi-Fi, step/turn-detection and recursive
density estimation,” in International Conference on Indoor Po-
sitioning and Indoor Navigation, vol. 27, 2014, p. 30th.
[30] S. Thrun, W. Burgard, and D. Fox, Probabilistic robotics. MIT
press, 2005.
[31] J. Hightower and G. Borriello, “Particle ﬁlters for location
estimation in ubiquitous computing: A case study,” in UbiComp
2004: Ubiquitous Computing.
Springer, 2004, pp. 88–106.
[32] D. Roetenberg, H. J. Luinge, C. T. M. Baten, and P. H. Veltink,
“Compensation of magnetic disturbances improves inertial and
magnetic sensing of human body segment orientation,” IEEE
Transactions on Neural Systems and Rehabilitation Engineering,
vol. 13, 2005, pp. 395–405.
[33] M. Haklay and P. Weber, “Openstreetmap: User-generated street
maps,” Pervasive Computing, IEEE, vol. 7, no. 4, 2008, pp. 12–
18.
[34] V. Honkavirta, T. Perala, S. Ali-Loytty, and R. Pich´e, “A
comparative survey of WLAN location ﬁngerprinting methods,”
in Positioning, Navigation and Communication, 2009. WPNC
2009. 6th Workshop on.
IEEE, 2009, pp. 243–251.
[35] T. King, S. Kopf, T. Haenselmann, C. Lubberger, and W. Ef-
felsberg, “Compass: A probabilistic indoor positioning system
based on 802.11 and digital compasses,” in Proceedings of
the 1st international workshop on Wireless network testbeds,
experimental evaluation & characterization.
ACM, 2006, pp.
34–40.
[36] J. Letchner, D. Fox, and A. LaMarca, “Large-scale localization
from wireless signal strength,” in Proceedings of the national
conference on artiﬁcial intelligence, vol. 20, no. 1. Menlo Park,
CA; Cambridge, MA; London; AAAI Press; MIT Press; 1999,
2005, p. 15.
[37] A. Bekkelien, M. Deriaz, and S. Marchand-Maillet, “Bluetooth
indoor positioning,” Master’s thesis, University of Geneva,
2012.
[38] K. Chintalapudi, A. Padmanabha Iyer, and V. N. Padmanabhan,
“Indoor localization without the pain,” in Proceedings of the
sixteenth annual international conference on Mobile computing
and networking.
ACM, 2010, pp. 173–184.
[39] H. Lemelson, M. B. Kjærgaard, R. Hansen, and T. King,
“Error estimation for indoor 802.11 location ﬁngerprinting,” in
Location and Context Awareness. Springer, 2009, pp. 138–155.
[40] B. Priyantha, D. Lymberopoulos, and J. Liu, “Littlerock: En-
abling energy-efﬁcient continuous sensing on mobile phones,”
Pervasive Computing, IEEE, vol. 10, no. 2, 2011, pp. 12–15.
[41] P. Zhou, Y. Zheng, Z. Li, M. Li, and G. Shen, “Iodetector: A
generic service for indoor outdoor detection,” in Proceedings
of the 10th ACM conference on embedded network sensor
systems. ACM, 2012, pp. 113–126.
267
International Journal on Advances in Systems and Measurements, vol 8 no 3 & 4, year 2015, http://www.iariajournals.org/systems_and_measurements/
2015, © Copyright by authors, Published under agreement with IARIA - www.iaria.org

