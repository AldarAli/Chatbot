Data Gathering System for Watering and Gas Pipelines Using Wireless Sensor 
Networks 
 
Radosveta Sokullu 
Department of Electrical & Electronic Engineering 
Ege University 
Bornova IZMIR 35100 TURKEY 
radosveta.sokullu@ege.edu.tr 
Mustafa Alper Akkaş 
Department of Electrical & Electronic Engineering 
Ege University 
Bornova IZMIR 35100 TURKEY 
alper.akkas@ege.edu.tr 
 
Fahrettin Demirel 
2nd  Regional Directorate of State Hydraulic Works 
Bornova IZMIR 35100 TURKEY 
 fahrettind@dsi.gov.tr 
 
 
Abstract—In this paper we discuss a small size experimentally 
implemented pipeline watering system, in which the pressure 
sensors are placed at carefully selected points. In our 
prototype, the TelosB motes, integrated with the pressure 
sensors, communicate in real time with each other and also 
with the base station according to the specifically designed 
wireless network protocol. The reason to choose a WSN as an 
infrastructure in our study is to let the system work without 
the need of extra cabling. Such a system incorporates both 
efficiency and flexibility, and provides the users with an 
automatic controlled water/gas system based on the sensor 
data. In our work, data was continuously measured using a 
pressure sensor and transferred to a central monitoring station 
via IEEE 802.15.4 wireless sensor network for storage and 
display. TelosB wireless motes were programmed with nesC 
and a graphical user interface was used to capture and display 
incoming measurements for all selected points being 
monitored. Evaluation of the system was done based on the 
WSN performance criteria (packet loss and network lifetime) 
and also based on the accuracy of the collected pressure data. 
In both respects the system performed very satisfactory and 
has been successfully implemented. 
Keywords: 
- 
wireless 
sensor 
networks; 
remote 
monitoring;nesC; TinyOS; water pipeline; TelosB; pressure 
sensor. 
I. 
INTRODUCTION  
The increase in the processing and integration capacity of 
electronic devices, as well as the advances of low power 
wireless communications have enabled the development of 
unwired intelligent sensors for a wide set of applications. 
The advent of small, low-cost and power efficient wireless 
sensor hardware is driving the development of applications 
in different industrial sectors, remote process control and 
also agriculture. Of particular interest here is the ability to 
remotely monitor water and gas pipeline pressure data. 
Efficient and accurate use of water resources has become 
very significant especially in recent time due to the global 
warming issues. Least but not last, the watering pipelines 
used in agriculture fields are to be controlled according to 
their water use. If pressure sensors are used in the existing 
pipelines of watering systems data can be gathered about the 
operation of the system.  
In this work we present the experimental system design 
for remote monitoring the pressure of a watering and gas 
pipeline system. The idea is to investigate the possibilities to 
support farmers and organizations involved in continuous 
monitoring and operation of water and gas pipelines. The 
novelty of this work is in two aspects: first it uses pressure 
information to both control the performance in the systems 
and discover leaks and failures; a new, simple but very 
efficient static cluster tree routing protocol is defined and 
experimentally tests that can be used with such systems.  
From here on the paper is organized as follows: in the 
next section we outline the characteristics of similar projects 
done before. In Section III, the developed system is 
described. In Section IV, we concentrate on the tested and 
the experimental results, and in Section V, we conclude the 
paper. 
 
II. 
RELATED WORK 
Min Lin et al. [1], suggested an interesting application for 
wireless sensor networks, specifically a water distribution 
network monitoring system. They propose a possible 
communication model for the water distribution monitoring 
network, and describe the channel measurement approach for 
the determination of an appropriate path-loss model. The 
accuracy of the proposed measurement approach has been 
confirmed using the flat earth two-ray model [1]. 
Yiming Zhou et al. [2], proposed a wireless solution for 
intelligent field irrigation system dedicated to Jew's-ear 
planting in Lishui, Zhejiang, China, based on ZigBee 
technology. Instead of conventional wired connection, the 
wireless design made the system easy to install and maintain. 
190
ICNS 2011 : The Seventh International Conference on Networking and Services
Copyright (c) IARIA, 2011.     ISBN: 978-1-61208-133-5

The hardware architecture and software algorithm of 
wireless sensor/actuator node and portable controller, acting 
as the end device and coordinator in ZigBee wireless sensor 
network respectively, were elaborated in detail. 
Yunseop (James) Kim et al. [3], describe details of the 
design and instrumentation of a wireless sensor network for 
variable rate irrigation and software for real-time in-field 
sensing and control of a site-specific precision linear-move 
irrigation system. Field conditions were site-specifically 
monitored by six in-field sensor stations distributed across 
the field based on a soil property map, and periodically 
sampled and wirelessly transmitted to a base station. An 
irrigation machine was converted to be electronically 
controlled by a programming logic controller that updates 
geo referenced location of sprinklers from a differential 
Global 
Positioning 
System 
(GPS) 
and 
wirelessly 
communicates with a computer at the base station. 
Communication signals from the sensor network and 
irrigation controller to the base station were interfaced using 
low-cost Bluetooth wireless radio communication. Graphic 
user interface-based software was developed. 
Ivan Stoianov et al. [4], discuss how wireless sensor 
networks can increase the spatial and temporal resolution of 
operational data from pipeline infrastructures and thus 
address the challenge of near real-time monitoring and 
control. They focus on the use of WSNs for monitoring large 
diameter bulk-water transmission pipelines. They outline 
PipeNet, a system they have been developing for collecting 
hydraulic and acoustic/vibration data at high sampling rates 
as well as algorithms for analyzing this data to detect and 
locate leaks. Challenges include sampling at high data rates, 
maintaining aggressive duty cycles, and ensuring tightly time 
synchronized data collection, all under a strict power budget. 
They have carried out an extensive field trial with Boston 
Water and Sewer Commission in order to evaluate some of 
the critical components of PipeNet. 
Liting Cao et al. [5], a remote real time AMR (Automatic 
Meter Reading) system based on wireless sensor networks is 
presented. The useful remote AMR sensors are analyzed and 
an efficient wireless network structure is suggested. The 
remote measurement system for water supply is taken as a 
typical example in their experiments. The structure of system 
employs distributed wireless sensors and consists of measure 
meters, sensor nodes, data collectors, server and a wireless 
communication network. 
In their work Baoding Zhang et al. [6], introduce a design 
schema of wireless smart water meter based on the study of 
existing water meters. The main communication is based on 
Zigbee. The design is appropriate for modern water 
management and the efficiency can be improved. 
Most of the studies mentioned above imply limited 
flexibility and reconfigurability. They are expensive to 
develop since they do not use off-the-shelf solutions to 
implement wireless sensor networking in a power-efficient 
and user-friendly 
way. With 
the proliferation 
and 
standardization of wireless sensor devices the trend is 
towards simpler and much cheaper solutions based on 
standardized nodes and networks. 
In this study, pressure sensors and IEEE 802.15.4 
compliant wireless modules are used to implement a mesh 
network and water distributing pressure data are stored and 
displayed on a PC connected to local gateway or base 
station. The proposed system has the advantage of 
simplicity, scalability and modularity over other alternatives. 
It is fully based on off-the-shelf components and freely 
available hardware and allows easy and reasonably priced 
setup and tailoring [7, 8]. Even though very similar in 
principle to others described in literature, our system is more 
robust, more cost effective and the provided user interface is 
more elaborate and flexible.  
III. 
 SYSTEM  DESCRIPTION 
A. System architecture 
A conceptual view of the system is shown in Fig. 1. Each 
TelosB mote is connected to a remote monitoring system, 
which allows the observer to track the pressure. The readings 
are transmitted wirelessly from the specific points on the 
pipelines through an infrastructure of routing nodes to a 
central monitoring system (the base station). Depending on 
the pipeline’s distance from the base station, messages can 
pass through multiple nodes to reach the base station. The 
base station is connected to a host computer running Moteiv 
Trawler to interpret, store and display the collected data. 
There are three main subsystems involved: wireless network 
structure, data measurement subsystem and the base station 
with its graphical interface. 
 
 
Figure 1.  General System Architecture 
B. Freescale Mp3v5050gp Pressure Sensor 
The MPxx5050 [9] is a family of pressure sensors 
integrating on-chip, bipolar op amp circuitry and thin film 
resistor networks to provide a high output signal and 
temperature compensation. (Fig. 2) 
 
191
ICNS 2011 : The Seventh International Conference on Networking and Services
Copyright (c) IARIA, 2011.     ISBN: 978-1-61208-133-5

 
 
Figure 2.  Mp3v5050gp Pressure Sensor Connected to TelosB Mote  
C. Wireless Module and Software 
This wireless communication platform uses TelosB 
wireless motes programmed in nesC and the Freescale 
Mp3v5050gp sensors are externally connected to the motes 
for collecting pressure data from the selected points on the 
pipelines that is to be transferred to a central database over 
802.15.4 based wireless network. The major reason for 
choosing TelosB, off-the-shelf wireless module, is the ease 
of programming as well as the low power consumption. The 
software platform is based on TinyOS [10], an open-source 
operating system designed for wireless embedded sensor 
networks and the motes are programmed using nesC, an 
extension of C. It features a component-based architecture, 
which enables rapid implementation while minimizing code 
size [11].  
IV. 
TESTBED SETUP AND EXPERIMENTAL RESULTS  
A. Prototype System Description 
The architecture described above has been implemented 
and tested in real environment. The network structure is a 
static hierarchical tree where the motes are mounted on 
predefined places on the pipes. Such deployment allows for 
collecting data from specifically selected points as well as 
precise location of problems. There are two types of nodes 
defined based on their functionality: leaf nodes and 
intermediate (collector) nodes. (Fig. 1) Leaf nodes transmit 
only readings from their own sensors while intermediate 
nodes transmit both their own and other nodes information 
doing aggregation when necessary. The base node collects 
all the data and transfers it to the PC via USB.  
The network topology is static hierarchical tree and is 
given on Fig. 3. Dark colored nodes are leaf nodes, red 
colored nodes are intermediate nodes doing aggregation and 
the blue one is the base node. Both leaf and intermediate 
nodes do sampling and threshold comparison but while leaf 
nodes transmit only their own data, intermediate nodes also  
 
 
 
Figure 3.  Schematic Network Tree Topology 
transmit data from other nodes and if necessary do 
aggregation. The base node does not do any sampling but 
only transmits collected data.    
As it is well known a major source of energy depletion 
for a wireless node is receiving and transmitting. In order to 
prevent this and provide longer lifetime two thresholds were 
introduced. As long as the sensor readings stay within these 
thresholds the node would be sending data at longer intervals 
(1 – 2 min). However, as soon as the reading falls outside 
these thresholds the data is transmitted in an order of 
seconds. A flow chart of the protocol operation is provided 
in Fig. 4.  
 
 
Figure 4.  Flow Chart of the Network Protocol 
192
ICNS 2011 : The Seventh International Conference on Networking and Services
Copyright (c) IARIA, 2011.     ISBN: 978-1-61208-133-5

 
Figure 5.  Schematic Deployment Plan 
For safety reasons test were done using pressurized air 
instead of gas or water. The test setup included 20 sensors 
and 20 nodes plus the base node, equipment for providing 
pressurized air and plastic pipes as well as equipment to 
simulate user connection points (marked in red) and 
controlled pressure leaks (marked in blue). Schematic 
deployment plan is provided on Fig. 5. Additional filter 
elements (including a low pass filter) were used in the 
connection of the sensors to the TelsoB motes.  
The test setup covers an area of approximately 200 m2 
with motes placed at distances from 1.5 to 5 m apart. In 
reality this will represent a very small farmer’s field.  
B. Testbed Setup and Operation 
Using this experimental setup three groups of tests were 
carried out: calibration tests, user oriented tests and network 
performance tests. Calibration tests were carried out with the 
aim to prove the correctness of the pressure samples taken. 
User oriented tests were carried out to verify the correctness 
of the collected data as well as the system’s proper operation 
related to the two threshold and its ability to diagnose 
leakage and other problems. 
1) System Calibration: Before testing the performance of 
the system in real time the pressure sensor measurements 
were compared with analog manometer measurements. 
Results are given in Fig. 6. and show a constant minimal 
difference of 3 kPa which is due to the analog nature of the 
manometer. As the difference proved linear and quite small it 
was assumed that it does not influence the performance of 
the system. 
 
Figure 6.  Callibration Measurements 
      2) User Oriented Tests: These set of measurements 
aimed to test the general user perceived performance of the 
network. Using the additionally mounted equipment, 
different users’ behavior (different water usage) and 
unwanted leakage were simulated.  
      3) Network Performance Tests: In this group of tests the 
basic performance of the network protocol was tested. 
Measurements provided information for the packet loss as a 
function of the duty cycle, packet queue length, distance and 
load (number of packets per unit time). 
Furthermore, the lifetime of the network was evaluated as 
a function of the duty cycle, the distance and the load 
distribution. 
Measurements 
of 
the 
node’s 
energy 
consumption were taken under different circumstances and 
lifetime calculations were provided. This allowed us to 
determine the nodes which are critical from power 
consumption point of view. Such information is very 
important and can be utilized at deployment time to 
overcome possible operational problems or to provide for 
maximizing the lifetime of the network as a whole. On the 
other hand, the energy required for the transmission of a 
single packet was also calculated.  
As a result, the performance of the designed protocol can 
be optimized further to provide better performance once the 
system is realized at large scale.  
C.  Evaluation of the Results and Discussion  
Evaluation of the results is done form the point of view 
of the user (pressure information) and the point of view of 
the network performance (network performance parameters). 
1) Correctness of Pressure Data: As for the correctness 
of the collected information the measurements both in 
between the two thresholds and outside the thresholds 
proved that the node data algorithms are working properly. 
Data related to the time for reporting a possible pressure leak 
is given as an example in Fig. 7. and Fig. 8. The first one 
presents the information from all the nodes, while the second 
one (a zoomed version) shows more clearly the difference in 
the pressure and the time delay between the two nodes – 
node number 10 and node number 20.  
 
  
 
Figure 7.  Graph of Changes Pressure Changes for Different Nodes 
In Fig. 8. each different color represents and different 
node. Because the size of the experimental setup is quite 
small there is a very small time and pressure difference 
193
ICNS 2011 : The Seventh International Conference on Networking and Services
Copyright (c) IARIA, 2011.     ISBN: 978-1-61208-133-5

between the nodes (Δt and Δp in Fig. 8). In a larger system 
these changes will be more easily perceived but still within 
the limits required for proper reaction.  
 
 
 
Figure 8.  Zoomed Version Showing Two Separate Nodes  
These tests and results prove that the suggested system 
can be used for monitoring a watering system and collecting 
information about possible leaks in due time. It can be easily 
attached to an automatic actuator system that will react to 
such failures and provide automatic closing of certain valves 
in order to prevent water waste.  
2) Network Performance Evaluation: As mentioned 
above a number of different tests were carried out, however 
due to space limitations only some are presented here: the 
packet loss as a function of the sampling period, the length of 
the queue and the distance; the power consumption as a 
function of the sampling period as well as the graph of the 
power consumed by different nodes for a fixed sampling 
period. 
The sampling period is an important parameter which 
influences both the correctness of the results, the network 
load and the overall lifetime of the system. Increasing the 
sampling period reflects in changing the network load – if we 
assume a 28 bytes packet size, for a sampling period of 1 
second the load will be 560 bytes/sec while for a sampling 
period of 60 seconds it will be 9.3 bytes/sec. Thus, as it can 
be seen from Fig. 9. and Fig. 10. regulating the sampling 
period is an important tool in reducing the packet loss and 
also determining the power consumption. Voltage reduction 
is the difference between the battery level at the beging and 
at the end of the experiment. It is important to note that the 
largest change in power consumption is observed for very 
small intervals and a decision of interval duration of 2 or 10 
sec can drive the required voltage from 0.157 V to 0.0182 V, 
or nearly 8.7 times less while at the same time packet loss is 
increased 2.6 times.  
Furthermore, measurements in the battery loss for a 
sampling period of 60 sec show very distinctly (Fig. 11) that 
due to the hierarchical tree structure some nodes deplete their 
energy at a much faster rate then others. As these are usually 
key intermediate nodes, a possible solution is providing 
alternative energy sources or recharging probabilities, like 
for example solar rechargeable batteries. Such solutions are 
still expensive and our study gives an opportunity to evaluate 
more realistically the need for such implementations. 
According to our calculations, for the worst case, if a 
sampling period of 60 sec is applied the TelosB nodes will 
be able to work for 190 days. 
 
 
Figure 9.  Packet Loss as a Function of Sampling Rate 
Another factor which can be regulated to tune the 
network performance is the length of the queue of packets to 
be sent (or in other words the sending buffer size). For 
example, for a queue length of packets per node 7 the packet 
loss is 0.017% compared to 0.195% for a length of 2 packets. 
We have also observed that 7 is an optimal value since an 
increase to 8 o9 has also leaded to increase in the packet loss 
to 0.043 (Fig. 12).  
 
 
Figure 10.  Voltage Reduction as a Function of Sampling Rate 
 
Figure 11.  Voltage Reduction Per Node for 60 sec. Sampling Rate 
194
ICNS 2011 : The Seventh International Conference on Networking and Services
Copyright (c) IARIA, 2011.     ISBN: 978-1-61208-133-5

 
Figure 12.  Packet Loss as a Function of Queue Length  
Finally, the packet loss as a function of the distance 
between nodes is presented in Fig. 13. According to the 
datasheets TelosB modes have a range of up to 125 m. 
However our tests, done in the open field have shown that at 
a distance of 120 m the packet losses are unacceptably high 
(nearly 60%). Accordingly, packet losses less than 2% can 
be achieved if the nodes are deployed at up to 70 m apart. 
 
 
Figure 13.  Packet Loss as a Function of the Distance Between Nodes 
V. 
CONCLUSION 
In 
this 
study, 
we 
have 
presented 
the 
design 
considerations and results from the experimental prototype 
of a wireless sensor based network for collecting pressure 
data that can be used for watering systems and gas pipelines. 
The system is based on TelosB motes organized in a WSN 
with a suitable designed network protocol which provides 
also data control and aggregation. The field-tests aim to 
provide insights into the possibilities for optimizing the 
network performance and increasing the network lifetime as 
a whole. The prototype is based on requirements provided by 
the 2nd  DSI (2nd Regional Directorate of State Hydraulic and 
Water Works) for a water project in Usak, Turkey. 
This theoretical and experimental work will provide an 
example of the possibilities to apply WSN for better and 
more effective control and implementation of farming 
watering systems. Such systems are static and the selected 
hierarchical tree network architecture and the pertinently 
designed protocol provide both very effective use of network 
resources and possibilities for fast determination of leaks and 
problems. The performance of the network and its power 
consumption were examined in detail and the parameters and 
methods to increase both its performance and lifetime were 
outlined. To reduce traffic load data aggregation and 
sampling rate optimization was suggested. Due to the 
adopted addressing scheme the coordinates of the problems 
can be efficiently determined without the need of GPS data. 
In the future the system can be further enhanced by 
connecting to an actuator network that will provide timely 
reactions to prevent water waste. 
As a result, the work presented in this paper provides the 
background for further research and implementation of 
wireless sensor networks is agriculture related fields as 
automatic watering systems. With small adjustments and 
additions the suggested system can be used for gasoline 
pipeline monitoring and control as well. 
REFERENCES 
[1] 
Min Lin, Yan Wu and Ian Wassell, “Wireless Sensor Network: Water 
Distribution Monitoring System”, Computer Laboratory, Cambridge 
University, UK, 2008. 
[2] 
Yiming Zhou, Xianglong Yang, Liren Wang and Yibin Ying, "A 
Wireless Design of Low-Cost Irrigation System Using ZigBee 
Technology," nswctc, vol. 1, pp. 572-575, 2009 International 
Conference on Networks Security, Wireless Communications and 
Trusted Computing, 2009 
[3] 
Yunseop Kim;   Evans, R.G. and Iversen, W.M.;   “Remote Sensing 
and Control of an Irrigation System Using a Distributed Wireless 
Sensor 
Network” 
 
IEEE 
TRANSACTIONS 
ON 
INSTRUMENTATION AND MEASUREMENT, VOL. 57, NO. 7, 
JULY 2008,  pp. 1379-1387 
[4] 
Stoianov, I., Nachman, L., Madden, S., Tokmouline, T. and  Csail, 
M., “PIPENET: A Wireless Sensor Network for Pipeline 
Monitoring”, IPSN 2007, pp. 264 – 273, 2007. 
[5] 
Liting Cao, Jingwen Tian, and Yanxia Liu, “Remote Real Time 
Automatic Meter Reading System Based on Wireless Sensor 
Networks”  Beijing Union University, China, C07-02, ICICIC-2008-
2304 
[6] 
Baoding Zhang and   Jialei Liu;  “A Kind of Design Schema of 
Wireless Smart Water Meter Reading System Based on Zigbee 
Technology”, ICEEE , 7-9 Nov. 2010 , pp. 1 – 4 
[7] 
Crossbow Technology Inc., "MPR/MIB User’s Manual", Rev. B, 
Document 
7430-0021-06, 
2005, 
http://www.xbow.com/Support 
/Support_pdf_files/MPRMIB_ Series_Users_Manual.pdf.  
[8] 
http://www.xbow.com/Support/Support_pdf_files/MoteWorks_Gettin
g_Started_Guide.pdf 
[9] 
http://www.freescale.com/webapp/sps/site/prod_summary.jsp?code=
MPXx5050 
[10] http://www.xbow.com/Support/Support_pdf_files/MoteWorks_Gettin
g_Started_Guide.pdf 
[11] Sokullu, R.,  Akkas and M.A., Çetin, H.E., “Wireless Patient 
Monitoring System”  Sensor Technologies and Applications 
(SENSORCOMM), 2010 Fourth International Conference on, 18-25 
July 2010, pp. 179-184. 
[12] B. Orhan, E. Karatepe and R.Sokullu “Modelling Energy 
Consumption for RF Control modules”, UBICOMM 2010, 4th  
International Conference on Mobile Ubiquitous Computing, Systems, 
Services and Technologies, October 25-30, 2010 - Florence, Italy
 
195
ICNS 2011 : The Seventh International Conference on Networking and Services
Copyright (c) IARIA, 2011.     ISBN: 978-1-61208-133-5

