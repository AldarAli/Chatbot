164
International Journal on Advances in Systems and Measurements, vol 5 no 3 & 4, year 2012, http://www.iariajournals.org/systems_and_measurements/
2012, © Copyright by authors, Published under agreement with IARIA - www.iaria.org
Empty Container Management in Mult-port System with Inventory-based Control 
Loo Hay Lee, Ek Peng Chew, and Yi Luo 
Department of Industrial and Systems Engineering 
National University of Singapore 
Singapore 
iseleelh@nus.edu.sg, isecep@nus.edu.sg, luoyi@nus.edu.sg 
 
 
Abstract – One of challenges that shipping companies face 
today is to effectively manage empty containers in order to 
meet customer demands and to reduce operation cost. This 
paper considers the joint empty container repositioning and 
container fleet sizing problem in a multi-port system with 
inventory-based control mechanism. A single-level threshold 
policy with repositioning rule in terms of minimizing the 
repositioning cost is proposed to manage empty containers. 
The objective is to optimize the fleet size and the parameters of 
the policy to minimize the expected total cost per period. 
Taking advantage of an interesting property of the problem, 
this 
paper 
proposes 
two 
approaches, 
a 
non-linear 
programming and a gradient search approach to solve the 
problem. From a methodological perspective, this paper 
deploys infinitesimal perturbation analysis method to improve 
computational efficiency. A numerical study demonstrates the 
effectiveness of the proposed policy and provides some 
managerial insights for shipping companies in managing 
empty containers. [1]  
Keywords - empty container management; repositioning; 
inventory control; simulation; infinitsimal perturbation analysis 
I. 
 INTRODUCTION 
Growth in maritime transportation industries has been 
stimulated by the increase in international merchandise trade 
as a result of globalization in the last few decades. In 
particular, the containerization of cargo transportation has 
been the fastest growing sector of the maritime industries. 
Containerized cargos have grown at an annual average rate 
of 9.5% over the period 1987 through to 2006, which is 
exceeding the average maritime trade growth rate 4.1% over 
the same period [2]. In 2010, it estimated that container trade 
volumes reached 140 million twenty-foot equivalent units 
(TEUs) [3]. The growth of containerized shipping has 
presented challenges inevitably, in particular to the 
management of empty containers (ECs) arising from the 
highly imbalanced trade between continents. For example, in 
2010, the annual container flow from Asia to Europe was 
13.5 million TEUs and 5.6 million TEUs in the reverse 
direction, resulting in container flow imbalance of 7.9 
million TEUs [3]. To manage the imbalance of container 
flows, repositioning ECs is an essential approach used by 
shipping companies. It is reported that empty container 
movements have accounted for at least 20% of the global 
port handling activity ever since 1998 [2]. Song et al. [4] 
estimated that the cost of repositioning ECs around the globe 
exceeded US$15 billions, which was 27% of the total world 
fleet running cost based on the data in 2002. If the cost of 
repositioning ECs can be reduced, the shipping companies 
can increase profit and improve competitiveness. Therefore, 
how to effectively and efficiently operate ECs is a very 
important issue for shipping companies and it is known as 
the problem of empty container repositioning (ECR).    
Research on ECR has increased quite substantially in 
recent years. Much of work has adopted deterministic 
programming approach, which uses dynamic network 
programming formulations (see, e.g., [5][6][7][8]). The 
stochastic factors of the problem, such as future customer 
demands and returned containers, have attracted much 
attention since 1990s. In [9], Cheung and Chen proposed a 
two-stage stochastic network model to determine the ECR 
decisions. In [10], Lam et al. formulated the ECR problem as 
a dynamic stochastic programming. In [11], Long et al. 
applied a two-stage stochastic model to incorporate 
uncertainties in ECR problem with random demand, supply 
and ship space capacity. The mathematical models often 
successfully capture the dynamic and stochastic nature of the 
problem, while give rise to some concerns, such as 
requirement of a pre-specified planning horizon, sensitivity 
of the decisions to data accuracy and variability, and 
implementation of the decisions in the stochastic systems 
[12][13].   
Another interesting development is to explore inventory-
based control policies for managing ECs. Characterized by a 
set of rules and a set of parameters, such policies utilize the 
feedback of inventory information to manage ECs. Once the 
rules and parameters are designed in advance, ECs can be 
repositioned by following these simple rules. One of the 
advantages of using inventory-based control policies is that it 
is easy to operate and easy to understand, while producing 
near-optimal or even optimal solutions [14].  
 In this study, we consider the joint ECR and container 
fleet sizing problem in a multi-port system with inventory-
based control mechanism. The system comprises a set of 
ports connected to each other and a fleet of own containers 
are used to meet the stochastic customer demands. A single-
level threshold policy with repositioning rule in terms of 
minimizing the repositioning cost is proposed to manage 
ECs with periodical review. Although in general such policy 
does 
not 
guarantee 
optimality, 
its 
simplicity 
in 
implementation makes them attractive in practice and this 
fact motivates us to study its application in the ECR 
problem. The objective of this study is to optimize the fleet 
size and the parameters of the policy in terms of minimizing 
the expected total cost per period, including repositioning 
cost and holding and leasing cost. 

165
International Journal on Advances in Systems and Measurements, vol 5 no 3 & 4, year 2012, http://www.iariajournals.org/systems_and_measurements/
2012, © Copyright by authors, Published under agreement with IARIA - www.iaria.org
The remainder of the paper is organized as follows: 
related work is presented in Section II. Then, Section III 
presents the mathematical formulation of the ECR problem 
and discusses the methods to solve the problem, followed by 
the description of the infinitesimal perturbation analysis 
(IPA) based gradient algorithm in Section IV. Section V 
illustrates the numerical studies. Finally, the work in this 
study is concluded and several issues for future research are 
discussed.  
II. 
RELATED WORK 
Inventory-based control policies for ECR problem have 
recently received increasing attentions. Studies in [15][16] 
[17][18][19] focused on the examination of the structural 
properties of the optimal inventory-based repositioning 
policies and demonstrated that the optimal repositioning 
policies were of threshold type in some situations such as 
one-port and two-port systems. Once the parameters and 
rules of such policies are designed in advance, they are easy 
to operate and easy to understand from a managerial 
perspective. Several researchers further considered the 
implementation of the threshold-type control policies in 
more general systems. Song and Carter [14] addressed the 
ECR problem in a hub-and-spoke system with the 
assumption that ECs can be only repositioned between hub 
and spokes. Song and Dong [20] considered the 
implementation of a two-level threshold policy in a cycle 
shipping route system,  and extended to optimize the fleet 
size and the parameters of the policy by using a simulation-
based method with genetic algorithm in a typical liner 
shipping system [13]. Song and Dong [21] studied the 
repositioning policy for ECs with flexible destination ports 
in a liner shipping system. Yun et al. [22] considered the 
ECR problem in the inland system and optimized the 
parameters of the policy by applying a simulation 
optimization tool. 
From the literature we find that the current studies are 
inadequate in addressing the implementation of the 
inventory-based control policies in general maritime 
systems. To the best of our knowledge, few of the studies 
have considered the implementation of such policies in 
multi-port system with direct empty container flows between 
each pair of ports, to which this study attempts to contribute.  
Li et al. [23] considered the ECR problem in a multi-port 
system, and proposed a heuristic algorithm based on a two-
level threshold policy to allocate ECs among multiple ports. 
However, it could be computationally expensive when the 
numbers of ports and fleet size are very large. Besides, the 
fleet sizing problem is also not fully studied in such system. 
Moreover, most policies in literature apply simple rule, such 
as linear rationing rule to allocate ECs. The repositioning 
rule in terms of minimizing the repositioning cost has not 
been considered yet. 
This paper is an extended version of [1]. It provides a 
detailed description of the IPA-based gradient technique, as 
well as a previously omitted mathematical proof on the 
important property in [1]. Moreover, the gradient technique 
is extended to optimize the fleet size. 
III. 
PROBLEM FORMULATION 
A multi-port system, which consists of ports connected to 
each other, is considered in this study. A fleet of own ECs 
meets exogenous customer demands, which are defined as 
the requirements for transforming ECs to laden containers 
and then transporting these laden containers from original 
ports to destination ports. A single-level threshold policy 
with periodical review is adopted to manage ECs. At the 
beginning of a period, the ECR decisions are made for each 
port, involving whether to reposition ECs, to or from which 
ports, and in what quantity. Then, when the customer 
demands occur in the period, those ECs that are currently 
stored at the port and those ECs that are repositioned to the 
port in this period can be used to satisfy customer demands. 
If it is not enough, additional ECs will be leased from 
vendors.  
Several assumptions are made as follows: 
 
Only one type of container, i.e., TEU is considered. 
 
The customer demands must be satisfied in each 
period; and customer demands for each pair of 
ports  in each period follow independent normal 
distributions.   
 
Short-term lasing is considered and the quantity of 
the leased ECs is always available in each port at 
any time. 
 
The leased ECs are not distinguished from owned 
ECs, i.e., the shipping company can return own ECs 
to vendors when it has sufficient ECs available. 
 
The travel time for each pair of ports is less than one 
period length. 
 
When the repositioned ECs arrive at destination 
ports, they will become available immediately; and 
when laden containers arrive at destination ports, 
they will become empty and be available at the 
beginning of next period.   
 
The cost of repositioning an EC from   to port   is 
the summation of the handling cost of an EC at 
port  , the handling cost of an EC at port  , and the 
transportation cost of an EC from   to port  .  
 
The notations used in this paper are presented in Table I. 
In every period  , the ECR decisions are firstly made at the 
beginning of this period. Then, the inventory position can be 
obtain by  
 
,
,
, ,  
p t
p t
p t
y
x
a
p
P


 
 
(1) 
  
After customer demands are realized and the laden 
containers become available, the beginning on-hand 
inventory of the next period can be updated by   
 
,
1
,
, ,  
p t
p t
p t
x
y
p
P

 

 
 
(2) 
 
It should be noted that      can be negative. This is due to the 
fact that customer demands are random and beyond control. 
If      is negative, it represents the number of containers that 
are leased from port p and stored at other ports. In this 

166
International Journal on Advances in Systems and Measurements, vol 5 no 3 & 4, year 2012, http://www.iariajournals.org/systems_and_measurements/
2012, © Copyright by authors, Published under agreement with IARIA - www.iaria.org
situation there are no ECs stored at port p; otherwise, they 
will be returned to the vendor to reduce the number of leased 
containers according to the assumption. If      is positive, it 
represents the number of ECs that are available at port p, 
which implies that there are no container leased out from 
vendor at this port. Note that there are   owned ECs in the 
system, we have 
 
,   
p P p t
N
x
t




 
(3) 
 
Let            be the total cost in period  . It can be 
defined as: 
 






, ,
,
t
t
t
t
t
J
H
G




x γ
Z
y
 
(4) 
 
where the value of    is determined by the beginning on-
hand inventory    and the policy  ;       and          are 
the EC repositioning cost and  the EC holding and leasing 
cost in period  , respectively. They are defined as follows 
  
,
,
,
,
(
)
R
t
p m
p m t
p P
m P m
p
H
C
z







Z
 
(5) 
 


,
,
,
,
,
,
(
,
)
(
,
)
(
)
(
)
O
t
t
p t
p t
p P
H
O
L
O
p
p t
p t
p
p t
p t
p P
G
g y
C
y
C
y















y
 
(6) 
 
where            
   represents the EC holding and leasing 
cost of port    in period   ;       x      . More 
specifically, the EC repositioning cost       refers to the 
cost of repositioning ECs between multiple ports. The EC 
holding and leasing cost          is the cost incurred when 
ECs are stored at some ports and additional ECs are leased 
from vendors at the other ports.   
Next, a single-level threshold policy is developed to 
make the ECR decisions    at the beginning of period t. 
A. A Single-level Threshold Policy 
Note that when the ECR decisions are made in a period, 
the customer demands in this period have not been realized 
yet. Hence, we try to maintain the inventory position at a 
target threshold value  . More specifically,     is the target 
threshold of port  . In period  , if        , then port   is a 
surplus port and the quantity excess of     should be 
repositioned out to other ports that may need ECs to try to 
bring the inventory position down to   ; if        , then it 
is a deficit port and ECs should be repositioned in from other 
ports that may supply ECs to try to bring the inventory 
position up to   ; if        , then it is a balanced port and 
nothing is done. 
  From the policy, therefore, if there are no surplus or 
deficit ports in period  , no ECs should be repositioned. 
Otherwise, ECs should be repositioned from surplus ports to 
deficit ports in the right quantity at the least movement. 
Without loss of generality, the ECR decisions in period   are 
considered. The two subsets, i.e., surplus port subset and 
deficit port subset can be obtained as   
              and 
  
              , respectively. For a surplus port, its 
number of excess ECs, namely the number of estimated EC 
supply is calculated by (7); and for a deficit port, its number 
of estimated EC demand by (8). 
 
,
,
,  
S
S
i t
i t
i
t
u
x
i
P



 
 
(7) 
 
,
, ,  
D
D
j t
j
j t
t
u
x
j
P
 

 
 
(8) 
 
If either   
  or   
  are empty, then     . Otherwise, the 
value of                
          
       should 
be equal to zero, and the value of             
      
  are 
determined by solving a transportation model.  
TABLE I.   LIST OF NOTATIONS 
 
Sym
bol 
Description 
  
the fleet size, which is the number of owned ECs 
  
the set of ports 
  
the discrete time decision period 
  
  
the surplus port subset in period   
  
  
the deficit port subset in period   
     
the beginning on-hand inventory of port   in period   
     
the inventory position of port   in period   after making the ECR 
decisions 
       
the number of ECs repositioned from port   to port   in period   
       
the random customer demand from port   to port   in period t   
    
  
the number of estimated EC supply of surplus port   in period   
    
  
the number of estimated EC demand of deficit port   in period   
   
           the vector of the beginning on-hand inventory in 
period   
   
           the vector of the inventory position in period   
   
                     the array of repositioned quantities for all 
ports 
   
                     the stochastic customer demands in period  
    
  
the cost of repositioning an EC from port   to port  ,      
  
  
the cost of holding an EC at port   per period 
  
  
the cost of leasing an EC at port   per period 
   
the threshold of port   
  
         vector of the thresholds 
    
  
  
             
 the number of total exported laden containers 
of port   in period   
     
  
             
  
             
  the net actual imported EC of 
port   in period   
      
the cumulative distribution function for     
  
     
  
             
     
   the net customer demand of port   in 
period   
     
the set of ports whose net actual imported ECs is changed by 
perturbing the estimated supply or demand of port   in period  , 
            d        
     
the set of ports whose beginning on-hand inventory in period   is 
affected by perturbing threshold of port  ,           and        
      
the corresponding dual variable for port   constraint  in the 
transportation model in period   
  
  
the port whose beginning on-hand inventory in period   is affected 
by perturbing the fleet size 
     
a indicator function, which takes 1 if the condition in the brace is 
true and otherwise 0 
 

167
International Journal on Advances in Systems and Measurements, vol 5 no 3 & 4, year 2012, http://www.iariajournals.org/systems_and_measurements/
2012, © Copyright by authors, Published under agreement with IARIA - www.iaria.org
Note that when    
  and    
  are nonempty, the total 
number of estimated EC supplies  
    
 
    
 
 could be not 
equal to the total number of estimated EC demands 
 
    
 
    
 
. Thus, we propose to move as many excess ECs of 
surplus ports as possible to the deficit ports to satisfy their 
demands. 
Hence, 
when
  
    
 
    
 
  
    
 
    
 
, 
a 
transportation model is formulated as follows to determine 
the repositioned quantities in each period: 
  
, ,
,
, ,
min
S
D
t
t
i j t
R
i j
i j t
i P
j P
z
C
z





 
(9) 
 
                s.t. 
, ,
, ,  
D
t
S
S
i j t
i t
t
j P z
u
i
P


 

 
(10) 
 
, ,
, ,  
S
t
D
D
i j t
j t
t
i P z
u
j
P


 

 
(11) 
 
, ,
0,  
S ,
D
i j t
t
t
z
i
P
j
P

 

 
(12) 
 
Constraints (10) ensure that the repositioned out ECs of a 
surplus port should not exceed its estimated EC supply; 
constraints (11) ensure that the EC demand of a deficit port 
can be fully satisfied; constraints (12) are the non-negative 
quantity constraints. When  
    
 
    
 
  
    
 
    
 
, similar 
model is built by substituting  
      
    
 
     
       
  and 
 
      
    
 
     
 ,      
  for (10) and (11), respectively. 
B. The Optimization Problem 
Let        be the expected total cost per period with the 
fleet size   and policy  . The problem, which is to optimize 
the fleet size and the parameters of the policy in terms of 
minimizing the expected total cost per period, can be 
formulated as 
  
,
min (
, )
N
J N
γ
γ  
(13) 
 
subject to the inventory dynamic equations (1)~(3) and the 
single-level threshold policy. As in many papers on empty 
container movement (see, e.g., [9] [11]), the variables that 
relate to the flow of ECs are considered as continuous 
variables in this study. That is, the fleet size and the 
parameters of the policy are considered as real numbers in 
this study. It is fine when the values of these variables are 
large. 
In general, it is difficult to solve problem (13), since there 
is no closed-form formulation for the computation of        
involving the repositioned empty container quantities 
determined by transportation models. However, when the 
transportation model is balanced in period  , i.e., the total the 
total number of estimated EC supplies, namely  
    
 
    
 
 is 
equal to the total number of estimated EC demands, 
namely  
    
 
    
 
, the excess ECs in all surplus ports can be 
fully repositioned out to satisfy the demands of all deficit 
ports. Hence, the inventory position of each port can be kept 
at its target threshold level  in this period, i.e.,        . 
Further, the EC repositioning cost in next period will be only 
related to the customer demands in this period. From (3), (7) 
and (8), we obtain that  
    
 
    
 
  
    
 
    
 
    if and only 
if    
     
. Hence, an important property of the problem 
is presented as follows: 
Property I: When the fleet size is equal to the sum of 
thresholds, the inventory position of a port can be always 
maintained at its target threshold value and then the EC 
repositioning cost in a period is only dependent on the 
customer demands. 
Let Scenario-I (Scenario-II) be the scenario in 
which    
     
   
     
 . Taking advantage of this 
property, we propose two approaches to solve problem (13) 
under both scenarios, respectively. 
 
1) Scenario-I 
Consider the problem under Scenario-I. From Property I, 
it implies that               , and only the EC holding 
and leasing cost in a period is related to values of   and  . 
Hence, the optimal solution which minimizes        should 
be equivalent to the optimal solution which minimizes the 
expected EC holding and leasing cost per period. From (6), 
since that holding and leasing cost function for each port is 
independent, the problem (13) under Scenario-I can be 
simplified to an non-linear programming (NLP) problem as 
follows: 
 




,
min  
(
)
(
)
H
O
L
O
p
p
p
p
p
p
p P
N
E
C
C












γ 
 
 
s.t. 
p P p
N
   
 
 
where the subscript   in the notation of     
  is dropped since 
customer demands in each period are independent and 
identically distributed. The NLP problem can be further 
decomposed into   independent newsvendor problems with 
the optimal solutions as follows: 
 




*
1
L
L
H
p
p
p
p
p
F
C
C
C




 
(14) 
  
*
*
p P p
N
  
 
(15) 
 
where   
      is the inverse function of      .  
 
2) Scenario-II 
The problem under Scenario-II is more complex than that 
under Scenario-I, since the EC repositioning cost is also 
affected by the values of    and   . Consider that the 
minimum expected holding and leasing cost of problem (13) 
can only be achieved under Scenario-I due to the convexity 
of the holding and leasing cost function. The problem under 
Scenario-II is worth to study if and only if the minimum 
expected EC repositioning cost under this scenario could be 
less than that under Scenario-I.  

168
International Journal on Advances in Systems and Measurements, vol 5 no 3 & 4, year 2012, http://www.iariajournals.org/systems_and_measurements/
2012, © Copyright by authors, Published under agreement with IARIA - www.iaria.org
Consider there is no closed-form formulation for the 
expected EC repositioning cost. Without loss of generality, 
the EC repositioning costs in a period under both scenarios 
are mathematically compared with same customer demands. 
More specifically, we have Scenario-I with parameters 
       and Scenario-II with parameters         where   
 
  
 
   
  
  
  
   
. Let other various quantities in both 
scenarios be distinguished by displaying the arguments      
and   , respectively. We have next proposition.  
 
Proposition 3.1: For all  , we have 
 




II
II
I
I
1
1
,
,
t
t
t
t
H
H





x
γ
x
γ
 
 
with same customer demand   . 
Proof: The proof is given in Appendix A. 
  
 
From this proposition, it implies that the expected EC 
repositioning cost per period under Scenario-II could be less 
than that under Scenario-I. Therefore, it is worth to study the 
problem under Scenario-II, and the simulation technique is 
adopted to estimate        with given values of   and   as 
follows: 
 










1
1
1
1
,
, ,
,
,
T
T
t
t
t
t
t
t
t
J N
J
H
G
T
T









γ
x γ
x γ
y
(16) 
 
where   is the amount of the simulation periods. A gradient 
search method is developed to solve the problem in next 
section. 
IV. 
IPA-BASED GRADIENT TECHNIQUE 
IPA [24] is able to estimate the gradient of the objective 
function from one single simulation run, thus reducing the 
computational time. Moreover, it has been shown that 
variance of IPA estimator is lower, compared with many 
other gradient estimators [25]. The main idea behind IPA is 
that: if a decision parameter of a system is perturbed by an 
infinitesimal amount, the derivation of the system 
performance to that parameter can be estimated by tracing its 
pattern of propagation through the system. This will be a 
function of the fraction of the propagations that die before 
having a significant effect on the response of interest [26]. 
Once the performance derivatives are obtained, they can be 
imbedded in optimization algorithms to optimize the interest 
parameters. Successful applications of IPA have been 
reported in inventory modeling [27], stochastic flow models  
[28][29], persistent monitoring problems [30], budget 
allocation for effective data collection [31], multi-location 
transshipment problem with capacitated production [32]. In 
this study, an IPA-based gradient technique is proposed to 
search the optimal solution under Scenario-II. The overall 
gradient technique is briefly described in Figure 1. 
For a given       at iteration  , simulation is run to 
estimate the expected cost        in (16). At the same time, 
the gradient vector of the expected cost                      
can be estimated.  Briefly, the simulation is run by firstly 
making the ECR decision in a given period by solving 
transportation models and then the customer demands are 
realized. At the same time, the cost and the gradient for this 
period can also be computed. After all periods are run, the 
overall cost and gradient can be computed from the 
individual values obtained in each period. Based on the 
gradient information, the parameters can be updated by using 
the steepest descent algorithm, i.e.,                 
                       .    is 
the 
step 
size 
at 
the  t  iteration. After       is updated, the process for the 
new iteration is repeated until the stopping criterion is met. 
To estimate the gradient of expected cost, we take a 
partial derivation of (16) with respect to the fleet size and the 
threshold of port  , respectively and have  
 






1
,
,
,
1
,
(
, )
1
, ,
(
,
)
(
)
1
T
t
t
t
O
T
p t
p t
p t
t
t
p P
p t
J N
N
T
J
N
E g y
y
H
T
N
y
N















 














γ
x γ
Z
 
(17) 
 






1
,
,
,
1
,
(
, )
1
, ,
(
,
)
(
)
1
T
i
t
t
i
t
O
T
p t
p t
p t
t
t
p P
i
p t
i
J N
T
J
E g y
y
H
T
y



















 














γ
x γ
Z
 
(18) 
 
Here, for the EC holding and leasing cost function, the 
expected cost function is utilized to estimate the gradient 
instead of sample cost function since we are able to get the 
explicit function to evaluate the average 
gradient. 
        
 
or          
 
, which measures the impact of 
the transportation cost in period   when the fleet size or 
threshold of port   is changed, can be found using the dual 
 
 
 
Figure 1. The flow of the IPA-based gradient technique 
Estimate the expected total cost and
 gradient (using IPA) at period t
Initialization: set n=0 
Initialization: Set t=1  
Solve transportation model to make ECR decisions 
Realize the customer demands 
Is t ≤ T?
t=t+1
Output             , End
n=n+1
Yes
No
Yes
No
Simulation for iteration n 

 

,
,
(
, )
n
N
N
J N


γ
γ
γ
Compute the overall cost and gradient
Are termination criteria 
satisfied?


,
n
N γ





 



1
,
,
,
,
(
, )
n
n
n
n
N
N
N
N
J N





 
γ
γ
γ
γ
γ

169
International Journal on Advances in Systems and Measurements, vol 5 no 3 & 4, year 2012, http://www.iariajournals.org/systems_and_measurements/
2012, © Copyright by authors, Published under agreement with IARIA - www.iaria.org
model 
information 
from 
the 
transportation 
model.             
       
 
, which measures the impact of 
the holding and leasing cost function of port   in period   
when the inventory position is changed, can be easily found 
taking the derivation of (6) with respect to the inventory 
position level.        
 
 or         
 
, which measures the 
impact of the inventory position level of port   in period   
when the fleet size or threshold of port   change, can be 
estimated using the IPA technique. 
Next, the gradient of expected total cost with respect to 
the threshold is analyzed. 
A. Gradient with Respect to the Threshold 
In this section, the gradient of expected total cost with 
respect to the threshold is studied with given fleet size  . 
The nominal path is defined as the sample path generated 
by the simulation model with parameter   and the perturbed 
path as the sample path generated using the same model and 
same random seeds, but with parameter     , where      
    . Without loss of generality, only the threshold of 
port   is perturbed and the thresholds of the other ports are 
unchanged, i.e.,              and     
     for other 
         , where the value of     is sufficiently small. 
By “sufficie tly” s  ll, we  e   suc  t  t t e surplus port 
and deficit port subsets are same in the both paths in every 
period. Oftentimes, the changes in various quantities will be 
presented by displaying with argument  . For example,     
represents the change in the beginning on-hand inventory in 
period  . 
The threshold of port   is perturbed with same quantities 
in all periods and the representative perturbation flow in 
period   is shown in Figure 2. The perturbation of     and 
the perturbation of     will affect the estimated EC supply or 
demand, i.e.,     
  or     
  of some ports, which are the right-
hand side (RHS) of the constraints in the transportation 
model. Hence, the perturbation of       
  or       
  could 
change the transportation cost and the net actual imported 
ECs, 
i.e.,        of 
some 
ports. 
The 
perturbations 
of        and      will affect the perturbation on the EC 
inventory position      of some ports. Further, perturbation 
of       will affect the total holding and leasing cost in this 
period and the beginning on-hand inventory of next period. 
From the definition of     , we have               
  . Thus, depending on the status of     , only two types of 
scenarios are possible – one with       , the other with 
      . Since the value of   , i.e., the initial on-hand 
inventory, is given, it implies that       and       . If 
the perturbation in the first period is propagated to the 
second period, it could lead        . Hence, the 
perturbations in the first two periods are investigated in order 
to conclude the general formulations for the perturbation 
terms in (18). 
 
1) Perturbation with Respect to Threshold in the First 
Period 
The perturbations in period     are traced following 
the flow in Figure 2. 
Since      , we have       
       or      
     , 
and      
   r      
    for other     from (7) and (8). It 
implies that only the RHS of port   constraint is changed. 
From the transportation model, the perturbation 
of       
  or       
  will affect the perturbation of       , 
depending on the status of port   constraint at the optimal 
solution. Only two scenarios are possible:  
Scenario 1: The port    constraint is not binding. The 
perturbation of       
  or       
  will not affect the optimal 
repositioned quantities. Hence, it implies that         for 
all    .  
Scenario 2: The port    constraint is binding. The 
perturbation could affect the optimal repositioned quantities 
of some ports. However, only for a pair of ports, i.e.,    
and   , their net actual imported ECs will be changed 
(explained in Appendix B); while for the other port, no 
changes. It implies that          for any       , 
and         for other            . 
From the definition of      , we get that       
           . Thus, if the port   constraint is not binding, 
we have       . Otherwise, we have               with 
      . It implies that      is unique in period   . To 
find       , a modified stepping stone (MSS) approach 
(elaborated in Appendix B) is proposed. 
Without investigating the details on the perturbation 
of      , we next consider the perturbation on     . From (1), 
we have                   since              . 
Hence, we can get that:  
 If       ,         for all    . 
 If        ,         for any       , and       
  for other           . From the transportation model, 
for the port with binding constraint, its inventory position 
will be equal to its threshold. It implies that          . 
Further, we have               since  
        
    
  from (1) and (3). 
We continue to study how the perturbations are carried 
forward to next period. From (2), we have           
           . It implies that the perturbation on        will 
be fully from the perturbation on      , and then we 
have                    . From the analysis on the 
perturbation of       in the case of       , we have  
 
 
 
 
Figure 2. The Perturbation Flow 


t ,
t
G


y
 i
t
x
,
,
 or 
S
D
p t
p t
u
u



t 
H
Z
a ,p t

,
yp t

t1
x
…
…
Period t
Period t+1
 i

170
International Journal on Advances in Systems and Measurements, vol 5 no 3 & 4, year 2012, http://www.iariajournals.org/systems_and_measurements/
2012, © Copyright by authors, Published under agreement with IARIA - www.iaria.org


,
,
1
,
1
,           if 
,
, otherwise
i t
i t
i t
E
Q
i q



 

 

 
(19) 
where             when       . And when         , we 
have              ,                    , and          
  for other             . It indicates that if there are 
perturbations propagated to the next period, only for a pair of 
ports,   and       , their beginning on-hand inventories will 
be changed by     and     , respectively; while for the 
other ports, no changes. 
From the analysis on the perturbations of the relevant 
variables, we have next lemma. 
 
 Lemma 4.1: In the period  =1, we have 
 
1)          
 
           
        
 
2)        
   
                                             if       
   
    
              
     if       
       
 
3)
     
     
        if                  
     if                       
       t erwise
 ,      
 
where                    
        
 
. 
Proof: Since only the RHS of port    ’s c  str i t is 
changed in the first period with      
       or      
     , 
the perturbation on the optimal transportation cost value in 
the first period is estimated by                  
       
     from the sensitivity analysis about RHS of linear 
programming. By hypothesis the value of     is sufficiently 
small. The change in the RHS value is within its allowable 
range and the status of all constraints remains unchanged in 
the perturbed path. In our problem with real variables, the 
probability of having degenerate optimal solutions or 
multiple optimal solutions is close to 0. Hence,  
      
   
 
        
      
   
           
       . 
For assertion 2), by taking the first derivation of the 
holding and leasing cost function of port    in (6) with 
respect to the inventory position, it is easy to have the 
equation. 
For assertion 3), recall that the perturbation on      is 
equal to the perturbation on        for all     , i.e.,       
       .  We have 
     
       
     
     
       
     
       
   
     . 
Hence, if         , we have         
 
   for all    . 
Otherwise, we have         
 
  ,               
 
   , 
and         
 
   for other             . 
   
 
2) Perturbation with Respect to Threshold in the Second 
Period  
If       , the analysis about the perturbation in the 
second period will be similar with that in the first period. 
Otherwise, the other case with               for     will be 
studied. 
Similarly, the perturbations on relevant variables are 
analyzed. We can have         
 
      or          
 
     
and      
   r      
    for other             . It implies 
that only the RHS of port      constraint is changed. 
Hence, if the port      constraint is not binding, we 
have           with         for all    . Otherwise, we 
have                        with         for any          , 
and         for other              .  
Differently, the perturbation on      could be from the 
both perturbations of      and        in this period since 
     . Hence, from (1), i.e.,               , we obtain: 
 If          , we have           ,              , 
and         for other                 
 If          , we have       could be    for any   
         , and          for other                   . 
Depending on whether          , we get that: 
If          , then it implies that                , 
and                  .     
If          , then it implies that        . 
 
From the analysis about the perturbation of       in the 
case of       , we have: 
 


,
,
,
,
,
1
,
1
,             if 
 and 
,
,   otherwise
i t
i t
q
t
q
t
i t
i t
E
e
i
Q
i q



 


 

 
(20) 
 
where         is        when           , or           when 
                   . When         , the values of the 
perturbations of         and              are same with that in 
the first period. 
 
3) Total Perturbation with Respect to Threshold 
Based on the analysis about      for    ,  , it can be 
concluded that in any period  ,      will be either empty or 
consists of a pair of ports, i.e.,         . It implies that the 
analysis about the perturbations in period      by the 
perturbation of     will be similar with that in either of the 
first two periods. 
From lemma 4.1 and (18), in a general form, we have 
 




,
,
,
1
(
)
,
,
(
)
,
,
1
,
1
,
,
(
) ( 1)
,
1
(
) ( 1)
 
(
)
S
t
S
i t
t
i t
i t
I i P
i t
i t
T
I q
P
i t
q
t
t
i
i t
i t
q
t
I Q
J N
I Q
i
P
T
I Q
U
U










   








   

 








  




γ
(21) 
 
where the first two terms on the RHS of (21) present the 
perturbations on the EC repositioning cost under the two

171
International Journal on Advances in Systems and Measurements, vol 5 no 3 & 4, year 2012, http://www.iariajournals.org/systems_and_measurements/
2012, © Copyright by authors, Published under agreement with IARIA - www.iaria.org
conditions, i.e.,        and        , respectively; the third 
term presents the perturbation on the EC holding and leasing 
cost when          ; For    ,       , and for    
 ,      can be obtained from either (19) and (20), depending 
on the status of       ; the values of      and           can be 
calculated from assertion 2) of lemma 4.1. 
B. Gradient with Respect to the Fleet Size   
In this section, the gradient of expected total cost with 
respect to the fleet size is studied with given policy  . 
Similarly, the nominal path is defined as the sample path 
generated by the simulation model with parameter   and the 
perturbed path as the sample path generated using the same 
model and same random seeds, but with parameter      , 
where           and    is sufficiently small. Since 
 
        
    from (3), we can perturb      by    to 
investigate the perturbations on relevant variables . That is, 
we set    
     with      
       and         for 
other         
    in the period    .  
The perturbation flow for this problem is similar with 
that shown in Figure 2, but the unique difference is that there 
is no perturbation from the threshold. In other word, the 
perturbations on various variables are only from the 
perturbation on the beginning on-hand inventory. 
 
1) Perturbation with Respect to the Fleet Size in the 
First Period    
In the period    , we have     
   
 
    or     
   
 
 
    and       
   r      
    for other         
   . It 
implies that only the RHS of port   
  constraint is changed. 
Hence, we have 
 If the port    
  constraint is not binding, we 
have    
     . And then     
       and         for 
other         
   . 
 Otherwise, we have     
         
    . And then 
               and         for other          
    . 
Similarly, we have 
 
,
1
,
,   if 
, otherwise
N
t
N
t
N
t
q
t
N
t
q
t
q
E
q
e


 

 

 
(22) 
 
where        
 
         and            for other    
       
    . It implies that in each period, there is a unique 
port whose beginning on-hand inventory will be affected 
by   . And we can have next lemma. 
 
Lemma 4.2: In any period  , we have 
 
     
       if       
  
    t ewise
 ,      
 
Proof: The proof is similar with that in the assertion 3) of 
the lemma 4.1.  
   
2) Total Perturbation with Respect to the  Fleet Size 
From lemma 4.2 and (17), in a general from, we have: 
 




1
(
) 1
,
,
1
,
1
( 1)
 
N
S
t
t
N
N
t
t
T
I q
P
q
t
q
t
t
J N
N
T
U












γ
 
(23) 
 
where the first term on the right hand side of (23) presents 
the perturbation on the EC repositioning cost; the second 
term presents the perturbation on the holding and leasing 
cost; for    ,   
   , and for    ,   
  can be obtained 
from (22); the value of    
    can be calculated from the 
assertion 2) of lemma 4.1. 
V. 
NUMERICAL RESULTS 
In this section, we aim to evaluate the performance of the 
proposed single-level threshold policy (STP) and provide 
some insights about the EC management for shipping 
companies.  
While the proposed policy can be applied in a multi-port 
system with an arbitrary number of ports, three problems that 
differ in the number of ports are considered: problem 1 has 6 
ports, problem 2 has 9 ports and problem 3 has 12 ports, 
which represent small, moderate and large systems, 
respectively. Besides, since the trade imbalance could be the 
most important factor affecting the performance of the 
proposed policy, three kinds of trade imbalance patterns are 
designed, which include balanced trade pattern, moderately 
imbalanced trade pattern and severely imbalanced trade 
pattern. Therefore, a total of 9 cases are studied.   
For each problem, the cost parameters and the average 
customer demands from port   to port   in a period, denoted 
by     , are randomly generated. In the balanced trade 
pattern, we set                  to balance the 
customer demands between any pair of ports. In the 
moderately (severely) imbalanced trade pattern, we double 
(treble) the values of   e p rt’s  r sever l p rts’ exported 
laden containers and keep other values remain the same as 
those in the balanced trade pattern. The customer demands, 
i.e.,            are assumed to follow normal distribution 
with mean      and standard variance         , and be left-
truncated at zero. For example, for problem 1, the holding 
cost parameter is uniformly generated from the interval (0, 
5), the repositioning cost parameter is uniformly taken from 
the interval (5, 10), and the leasing cost parameter is 
uniformly generated from the interval (10, 30). This reflects 
the general view that the repositioning cost parameter is 
greater than the holding cost parameter, while much less than 
the leasing cost parameter. The parameter       in the 
balanced trade pattern is uniformly generated from the 
interval (0, 200). In Appendix C, the cost parameters and the 
parameters of average customer demands in different trade 
imbalance patterns of problem 1 are presented. 
For a multi-port system with STP, the optimal values of 
the fleet size and the thresholds can be obtained through 
sequentially solving the problem (13) under Scenario-I and 
Scenario-II. Under Scenario-I, the NLP is solved by Matlab 
(version 7.0.1). Under Scenario-II, the IPA-gradient based 

172
International Journal on Advances in Systems and Measurements, vol 5 no 3 & 4, year 2012, http://www.iariajournals.org/systems_and_measurements/
2012, © Copyright by authors, Published under agreement with IARIA - www.iaria.org
algorithm is coded in Visual C++ 5.0. All the numerical 
studies are tested on and Intel Duo Processor E6750 
2.67GHz CPU with 4.00 GB RAM under the Microsoft 
Vista Operation System. Based on preliminary experiments, 
we set the simulation period    10100with 100 warm-up 
periods. The termination criteria for searching are that the 
maximum iteration, namely      is achieve or the total cost 
per period in current iteration is significantly greater than 
that in last iteration. We set          . 
A. Policy Performance Evaluation 
To evaluate the performance of the proposed STP, a 
match back policy (MBP) is introduced for comparison. 
Such policy is widely accepted and applied in practice and 
its principle is to balance the container flow in each pair of 
ports. In other words, ECs to be repositioned from port   to 
port   in period     should try to match the difference 
between the total number of laden containers exported from 
port   to port   and the total number of laden containers 
exported from port   to port    in period  . Mathematically, 
we have 
 




,
,
1
, ,
,
,
  
p m t
m p t
p m t
MBP
z
t






  
(24) 
 
When MBP is adopted, the repositioning cost is 
independent from the fleet size. Hence, the fleet size which 
minimizes the expected holding and leasing cost will be the 
optimal fleet size minimizing the expected total cost. We 
have          
  
     
    
    
  
 
 
   
. 
To facilitate the comparison of STP and MBP, the 
percentage of expected total cost reduction achieved by STP 
from MBP is given in Figure 3. We use a doublet, i.e., 
(number of ports, trade pattern), to present a particular case. 
For example, (6, B), (6, M-IB), and (6, S-IB) mean the cases 
for problem 1 with 6 ports in the balanced, moderately 
imbalanced and severely imbalanced trade patterns, 
respectively.  
There are three main observations from the results. First, 
STP outperforms MBP in all cases. As expected, the 
reduction of total cost by STP is major from the reduction of 
the repositioning cost. Second, as the system becomes larger, 
STP can reduce more cost. Hence, it is important for 
shipping companies to use better method in repositioning 
ECs, instead of resorting to simple way such as the MBP, 
especially in the complex system. Another observation is that 
for a problem, it seems that in the imbalanced trade patterns, 
the advantage of using STP over MBP seems not as great as 
that in the balanced trade pattern. However, STP still can 
reduce cost from MBP in the imbalanced trade pattern, such 
as over 30% cost reduction for the problem with 12 ports. 
B. Policy Performance Sensitivity to the Fleet Size 
Considering the fact that container fleet is often fixed by 
shipping companies in practice, we further investigate the 
policy performance under both policies with given fleet size. 
If the fleet size is given, the optimal thresholds under STP 
can be found by the two proposed approaches with little 
adjustment. Hence, let    be the optimal fleet size under 
STP. The fleet size is varied from 0.7    to 1.3   in all 7 
cases to investigate the affect of the fleet size on the 
expected total cost. 
Figure 4 shows the expected total cost per period under 
both policies in case (6, B) with different fleet sizes. First, it 
is also observed that STP outperforms MBP in all different 
fleet size cases.  It reveals that the expected total cost per 
period savings achieved by STP over MBP are of the order 
of 13.18%~37.72%. One possible explanation is that the 
proposed policy makes the ECR decisions in terms of 
minimizing the repositioning cost. Besides, the trend of the 
diamond line shows that, the cost saving achieved by STP 
from MBP increases gradually when the fleet size increases, 
and as the fleet size increases further the saving decreases. It 
is also possible to have a small cost saving percentage when 
the fleet size is too little. The reason is that when the fleet 
size is severely insufficient to satisfy the customer demands, 
a large number of ECs are leased and few requirements for 
repositioning ECs. Third, the results also show that the 
minimum expected total cost per period appears to be convex 
with respect to the fleet size under both policies. It reflects 
the intuition that the optimal fleet size is the trade-off 
between the repositioning cost and the holding and leasing 
cost.  
Similarly observations can be also found in other cases. 
 
 
 
Figure  3. Percentages of expected total cost per period reduction achieved 
by STP from MBP 
 
0%
10%
20%
30%
40%
50%
60%
(6,B)
(6,M-IB) (6,S-IB)
(9,B)
(9,M-IB) (9,S-IB)
(12,B) (12,M-IB)(12,S-IB)
The percentage of cost reduction
Cases
 
 
Figure 4.  Comparison of STP and MBP in case (6, B) 
0%
5%
10%
15%
20%
25%
30%
35%
40%
0
1000
2000
3000
4000
5000
6000
0.7N*
0.8N*
0.9N*
N*
1.1N*
1.2N*
1.3N*
The percentage of cost reduction
Expected total cost per period
Fleet size
MBP (Left axis)
STP (Left axis)
% Cost Reduction (Right axis)

173
International Journal on Advances in Systems and Measurements, vol 5 no 3 & 4, year 2012, http://www.iariajournals.org/systems_and_measurements/
2012, © Copyright by authors, Published under agreement with IARIA - www.iaria.org
C. Sensitivity Analysis of the Thresholds 
Since the single-level threshold policy is applied to 
manage ECs in the multi-port system, the thresholds of the 
policy will significantly affect the performance of the 
proposed policy. Many factors may impact the thresholds of 
the policy. The most significant factors are the fleet size and 
the parameters of leasing cost and holding cost. Next, based 
on the case (6, B), we explore the sensitivity of the 
thresholds. 
As shown in Figure 5, the optimal threshold values 
generally increase as the fleet size increases. More 
interesting, as the fleet size increases from 1.1   to 1.3  , 
ports 1~5 have very small increments on their thresholds, 
while port 6 has large increment on its threshold. This 
reflects the fact that as the fleet size is much greater than its 
optimal value, the low holding cost at port 6 works in favor 
of keeping a large number of ECs at this port. While as the 
fleet size decrease from 0.9   to 0.7  , port 3 has the 
largest decrement on its threshold. A possible explanation is 
that as owned ECs are insufficient at all ports, many leasing 
containers have to be used to satisfy the customer demands. 
And the low leasing cost at port 3 supports it to keep low 
inventory level of ECs and lease a large number of ECs. 
Next, the sensitivity of the thresholds to the holding and 
leasing cost parameters is considered. From (21), we obtain 
that    
         
   
    
 
 
   and   
         
   
       
 
 
  . It 
implies that 
         
   
 will decrease (increase) as   
  (       
 
) 
increases. Thus, when the leasing cost of port   increases, the 
threshold for this port will increase while the thresholds for 
some other ports decrease. The similar property for the 
holding cost parameter can be derived. That is, as the 
holding cost of port   increases, the threshold of this port will 
decrease while the thresholds for some other ports increase. 
Focusing on the case (6, B) with optimal fleet size under 
STP, we consider two more cases, i.e., cases A and B, in 
which the holding and leasing cost parameters of port 6 are 
increased by 2 times, respectively. Figure 6 shows the results 
about thresholds changes by cases A and B from the original 
case. It can be observed that when the holding (leasing) cost 
parameter of port 6 increases by 2 times, the threshold of 
port 6 decreases (increases), but the thresholds of other ports 
increase (decrease). This testifies above phenomenon. 
Hence, the results reflect the fact that a higher leasing cost at 
a port works in favor of keeping a large number of ECs 
while a higher holding cost encourages repositioning out 
more ECs in a surplus port or repositioning in less ECs in a 
deficit port. 
VI. 
CONCLUSION AND FUTURE WORK 
In this paper, the joint ECR and container fleet sizing 
problem in a multi-port system is addressed. A single-level 
threshold policy is developed to reposition ECs periodically 
by taking into account customer demand uncertainty and 
dynamic operations. Two approaches, a NLP and IPA-based 
gradient technique are developed to solve the problem 
optimizing the fleet size and the parameters of thresholds 
under Scenario-I and Scenario-II, respectively. 
The 
numerical results provide insight that by repositioning the 
ECs intelligently, the total cost can be significantly reduced. 
The main contributions of the study are as follows: (a) a 
single-level threshold policy with a repositioning rule in 
terms of minimizing repositioning cost was developed for 
repositioning ECs in a multi-port system. To the best of our 
knowledge, few works considered the repositioning rule 
related to the repositioning cost; (b) the optimal values of the 
fleet size and the thresholds of the policy can be obtained. 
These values could be used as reference points for shipping 
companies to make strategic decisions; (c) by developing the 
method to solve the difficult EC management problem, i.e., 
using IPA to estimate gradient, it is innovative and provides 
a potential methodology contribution in this field. 
There are several limitations in the paper. Firstly, ECs 
were assumed to be dispatched in the right one period. 
Further research is needed to relax the one-period 
assumption and consider the problem with different 
dimensions for the repositioning time. The main challenge is 
to track the perturbations along the sample path. The second 
limitation is that the simulation time of the proposed 
algorithm could be further reduced. Although the proposed 
algorithm can be utilized to solve the problem with an 
arbitrary number of ports, as the number of ports increase, 
more simulation time is needed to search the optimal 
solution. For example, given a starting point, the proposed 
 
 
 
Figure 5. The optimal threshold value for case (6, B) under STP 
0
100
200
300
400
500
600
700
800
Port 1
Port 2
Port 3
Port 4
Port 5
Port 6
Thereshold  value
1.3N*
1.2N*
1.1N*
N*
0.9N*
0.8N*
0.7N*
 
 
Figure 6. Optimal thresholds changes in cases A and B 
-8
-6
-4
-2
0
2
4
6
8
10
12
Port 1
Port 2
Port 3
Port 4
Port 5
Port 6
Threshold change
Case A
Case B

174
International Journal on Advances in Systems and Measurements, vol 5 no 3 & 4, year 2012, http://www.iariajournals.org/systems_and_measurements/
2012, © Copyright by authors, Published under agreement with IARIA - www.iaria.org
algorithm under Scenario-II takes about 1 hour to get the 
minimum expected total cost for the small size system, and 
more time for a larger system. Thus, improving the 
effectiveness of the proposed algorithm should be an 
interesting area for future research. We could consider 
combining 
the 
gradient 
search 
approach 
with 
the 
evolutionary approach to take advantage of both approaches. 
In addition, a comparison of the proposed algorithms with 
other meta-heuristics could be another possible research 
direction.  
APPENDIX A 
Note that when ECs are repositioned in a period, the 
repositioning cost will be the minimum objective values of 
the transportation models. Hence, the constraints of ports 
under both scenarios are investigated and some lemmas will 
be presented, which will be used in proving proposition 2.1.  
From property I, we can get that under Scenario-I, 
  
       . Similarly, under Scenario-II, we can have 
  
       (    ) if   is   
  
  
   
 (  
  
  
   
). It can be 
explained as follows. When  is   
  
  
   
 (  
  
  
   
), the 
transportation model in each period should be unbalanced, 
i.e., 
the 
total number 
of 
estimated 
EC 
supplies, 
namely  
    
 
    
 
 is greater (less) than the total number of 
estimated EC demands, namely  
    
 
    
 
. This unbalanced 
situation, such as  
    
 
    
 
 is   
    
 
    
 
, means that all 
EC demands at the deficit ports can be satisfied and some 
excess ECs still stay at some surplus ports. Hence, the 
inventory position of each port in each period could be not 
less (greater) than its target threshold level when    is  
 
  
  
   
 (  
  
  
   
). The surplus port and deficit port 
subsets under both scenarios are investigated firstly.  
 
Lemma A.1: For all period   , we have      
    
    
     and      
         
   
 if     
  
  
   
;      
         
    
and      
        
    , if     
  
  
   
 with same customer 
demand   . 
Proof: With the help of (2), we have       
 
   
    
         . It implies that                
     and 
              
   .  
Note that both scenarios are investigated with same   . 
We have        
  
     
     
          
    if    
  
  
   
, 
and       
  
     
     
          
    if    
  
  
   
. It implies 
that      
        
     if    
  
  
   
, and     
        
     if    
 
  
  
   
. 
Note that   
    
    for any scenario. We have     
     
    
    if    
  
  
   
 and     
         
    when    
  
  
   
.   
 
From lemma A.1, there are only two possible cases about 
the port subsets under both scenarios. One is that there are 
same port subsets. The other is that there are greater 
(smaller) surplus port subset and smaller (greater) deficit port 
subset under Scenario-II than that under Scenario-I when the 
fleet size is greater (less) than the sum of thresholds. 
Furthermore, for the port that is common to surplus or deficit 
port subsets under both scenarios, its quantity of excess 
(deficit) ECs is investigated. 
 
Lemma A.2: For all period  , we have 
 
1) If    
  
  
   
, for       
    and       
     (    
      ), 
we have       
    
       
   
 and        
    
       
   . 
2) If    
  
  
   
, for       
     (    
      ) and       
   , 
we have       
    
       
   
 and        
    
       
   . 
with same customer demand   . 
Proof: From (2), (7) and (8), we get that       
 
      
        and       
 
                     
        
 .  
Hence, with help of lemmas A.1, when    
  
  
   
, we 
have       
    
            
   
        
   , and if     
     is non-
empty,       
                 
           
    .  
Similarly, when    
  
  
   
, we have        
    
 
      
   
        
     if     
      , and       
           
           
   . 
 
  
 
From lemma A.2, it implies that for example, when the 
fleet size is greater than the sum of thresholds, for the 
common surplus port under both scenarios, its amount of 
excess ECs under Scenario-II is not less than that under 
Scenario-I.  
We return now to the proof of proposition 2.1. 
Proof: Since   
    and   
    are both nonempty, from the 
transportation model, we have       
 
         . Hence, 
when either      
     or      
     is empty, we can get 
that       
                   
 
       . 
When     
     is nonempty, in the case of    
  
  
   
, the 
constraints of the transportation models in period       
under both scenarios should be (10) and (11), which are as 
follows: 
 
1
, ,
1
,
1
1
,  
D
t
S
S
i j t
i t
t
j P z
u
i
P






 

 
 
1
, ,
1
,
1
1
,  
.
S
t
D
D
i j t
j t
t
i P z
u
j
P






 
 

 
 
Based on the sensitivity analysis about RHS of linear 
programming, we get that increasing the RHS coefficient 
value of above constraint could reduce the minimum 
objective value.  Depending on the port subsets under both 
scenarios, from lemmas A.1 and A.2, there are only two 
possible cases: 
 Case 1:     
         
    and     
         
   . It implies that the 
transportation models under both scenarios have similar 
constraints for all ports       
          
   . Hence, based on 
the model under the scenario-I, we increase the RHS values 
from        
   
 and        
     up to       
     and         
    
, 
respectively. Then, the new model will be equivalent to the 
model under scenario-II, and we can have       
           
      
 
        . 

175
International Journal on Advances in Systems and Measurements, vol 5 no 3 & 4, year 2012, http://www.iariajournals.org/systems_and_measurements/
2012, © Copyright by authors, Published under agreement with IARIA - www.iaria.org
 Case 2:     
         
    and     
         
   . It implies that the 
transportation models under both scenarios have similar 
constraints for some ports        
          
    . Similarly, 
based on the model under the scenario-I (scenario-II), we 
increase (decrease) the RHS values of ports that are   
     
        
      (     
         
    ) up (down) to zero. Then, the 
minimum objective cost of the new model-I (model-II), 
denoted by    (    ), should be not greater (less) than that of 
the original model, i.e.,            
 
        (      
      
          ). For the new model-I and model-II, they 
have similar constraints for ports       
          
    . Hence, 
as that in case 1, we have       . Finally, we get that 
      
                         
 
       .   
Similarly, when     
       in the case of  
  
  
   
  , 
we can get that       
                 
 
       . 
  
 
APPENDIX B 
A numerical example is firstly presented to show that 
how the perturbation in the supply or demand of one binding 
port, such as  , will change the net actual imported ECs of a 
pair of ports. Then, a modified stepping stone (MSS) method 
is proposed to find     . 
Consider a numerical example with three surplus ports 
and two deficit ports. ECs are repositioned from the surplus 
ports to the deficit ports. Assume the total number of EC 
supplies is greater than the total number of EC demands. 
And the transportation tableau is presented in Figure 7. Note 
that one dummy node is created in the transportation tableau 
to ensure that the total number of demands is equal to the 
total number of supplies. For illustration, the value of 
cell       represents the number of ECs repositioned from 
the  t  surplus port to the     deficit port. Two sub-examples 
are investigated. 
 Sub-example 1: Perturb the number of EC supply of the 
first surplus port by    
Consider the balance of the transportation tableau. 
Perturbing the number of EC supply of the first surplus port 
by    implies that the number of EC demand of the dummy 
deficit port will be perturbed by    . However, since 
cell   ,    is a non-basic cell (see Figure 7), its value should 
be kept as zero and cannot be changed by the perturbation. 
To track the changes on the basic variables, a loop is 
developed, which begins at cell   ,    and is back to this cell 
(see Figure 8). 
The loop in Figure 8 consists of successive horizontal 
and vertical segments whose end nodes must be basic 
variables, except for the two segments starting and ending at 
the non-basic variable.  
More specifically, the changes on the basic variables can 
be obtained as follows: first increase the value of cell   ,    
by   ; then go around the loop, alternately decrease and then 
increase basic variables in the loop by   , i.e. decrease the 
value 
of 
cell    ,    and 
increase 
the 
value 
of 
cell   ,    by   . It is observed that the total numbers of 
repositioning out ECs at the first and the second surplus 
ports will be increased and decreased by   , respectively. 
 
Sub-example 2: Perturb the number of EC demand of the 
first deficit port by    
Perturbing the number of EC demand of a deficit port 
(not the dummy deficit port) by    will result in the total 
number of demands from deficit ports (excluding the dummy 
deficit port) increasing by   . To maintain the balance of the 
transportation tableau, a hypothetic surplus port is introduced 
and its supply is assumed to increase by   . Besides, to 
make the transportation tableau non-degeneracy, the cell (the 
hypothetic surplus port, the dummy deficit port), i.e., cell (4, 
3) in Figure 9, is set as a basic cell.  
To track the changes on the basic variables by the 
perturbation of    on the number of EC demand of the first 
deficit port, similar loop is developed in Figure 9. It is 
observed that the total number of repositioning in ECs at the 
first deficit port and the total number of repositioning out 
ECs at the second surplus port will be both increased by   . 
Just as the loop using in the typical stepping stone 
method, the loop in either Figure 8 or Figure 9 is unique. The 
uniqueness of the loop guarantees that there will be only a 
pair of ports, whose net actual imported ECs will be affected 
by perturbing the supply or demand of one binding port. 
 
 
 
Figure 8. Perturb the number of EC supply of the first surplus port by    
◎ Beginning cell 
 


Change of demand
Deficit port
Change of supply
3(dummy)
1
2
1
2
3







Surplus port
 
 
 
Figure 7. The transportation tableau 
● Basic cell 
 
 
 
 
Surplus port
Change of demand
Deficit port
Change of supply
3(dummy)
1
2
1
2
3
 
 
 
Figure 9. Perturb the number of EC demand of the first deficit port by    

4 (hypothetic)
Deficit port
Change of supply
3(dummy)
1
2
1
2
3





Change of demand


Surplus port

176
International Journal on Advances in Systems and Measurements, vol 5 no 3 & 4, year 2012, http://www.iariajournals.org/systems_and_measurements/
2012, © Copyright by authors, Published under agreement with IARIA - www.iaria.org
Similar results can be obtained under the other case in which 
the total number of EC supplies is less than the total number 
of EC demands.  
Some additional notations are defined Table II. 
When the number of EC supply or demand of port   in 
period   is perturbed, a MSS method is proposed to find 
     with the rules as follows. 
 
MSS method to find      
Step 1. Build the transportation tableau based on the 
transportation model solutions in period  . Create a 
dummy deficit node,       and a dummy surplus 
node,     . And arbitrarily insert the value   into 
cell             . 
Step 2. If port   is a surplus port in period  , i.e.     
 , 
select cell      
        ; if port   is a deficit port in 
period  , i.e.     
 , select cell            
   . 
Step 3. If t e selected cell is   b sic cell,    p rt’s t t l 
repositioned empties quantity will be affected, 
set        and stop. Otherwise, go to Step 4.  
Step 4. Beginning at the selected cell, trace a loop back to 
the cell, turning corners only on basic cells. Only 
successive horizontal & vertical moves are allowed.   
Step 5. If the total EC supply is more than the total EC 
demand, record the basic cell          ,    
        in this loop and find port   with     
   . 
Otherwise, record the basic cell          ,   
        in this loop and find port   with     
   .  
Then,               with       . 
 
APPENDIX C 
The parameters of problem 1 are presented Table III and 
Table IV. 
 
REFERENCES 
[1] L. H. Lee, E. P. Chew, and Y. Luo, "Inventory-Based 
Empty Container Repositioning in a Multi-Port 
System," in INFOCOMP 2011, The First International 
Conference 
on 
Advanced 
Communications 
and 
Computation, 2011, pp. 80-85. 
[2] Economic and social commission for Asia and the 
Pacific. 
(2007). 
Regional 
Shipping 
and 
Port 
Development: Container Traffic Forecast 2007 Update  
[Online; 
accessed 
18-Dec-2012]. 
Available: 
http://www.unescap.org/ttdw/publications/tis_pubs/pub
_2484/pub_2484_fulltext.pdf 
[3] United 
Nations 
Conference 
on 
Trade 
and 
Development. (2011). Review of maritime transport  
[Online;accessed 
18-Dec-2012]. 
Available: 
http://unctad.org/en/Docs/rmt2011_en.pdf 
[4] D. P. Song et al., "On cost-efficiency of the global 
container shipping network," Maritime Policy & 
Management, vol. 32, pp. 15-30, 2005. 
[5] T. G. Crainic, P. Dejax, and L. Delorme, "Models for 
multimode multicommodity location problems with 
interdepot 
balancing 
requirements," 
Annals 
of 
Operations Research, vol. 18, pp. 277-302, 1989. 
[6] B. Bourbeau, T. G. Crainic, and B. Gendron, "Branch-
and-bound parallelization strategies applied to a depot 
location and container fleet management problem," 
Parallel Computing, vol. 26, pp. 27-46, 2000. 
[7] I. K. Moon, A. D. D. Ngoc, and Y. S. Hur, "Positioning 
empty containers among multiple ports with leasing 
and purchasing considerations," OR Spectrum, vol. 32, 
pp. 765-786, 2010. 
[8] Q. Meng and S. Wang, "Liner shipping service 
network design with empty container repositioning," 
Transportation Research Part E: Logistics and 
Transportation Review, vol. 47, pp. 695-708, 2011. 
[9] R. K. Cheung and C. Y. Chen, "A two-stage stochastic 
network model and solution methods for the dynamic 
empty container allocation problem," Transportation 
Science, vol. 32, pp. 142-162, 1998. 
[10] S. W. Lam, L. H. Lee, and L. C. Tang, "An 
approximate dynamic programming approach for the 
empty container allocation problem," Transportation 
Research Part C, vol. 15, pp. 265-277, 2007. 
[11] Y. Long, L. H. Lee, and E. P. Chew, "The sample 
average approximation method for empty container 
TABLE IV.   THE PARAMETERS OF AVERAGE CUSTOMER LADEN DEMAND 
IN DIFFERENT TRADE IMBALANCE PATTERNS FOR PROBLEM 1 
 
Original 
port   
Destination 
port   
      
Balanced  
Moderately 
imbalanced 
Severely 
imbalanced 
1 
2 
95.950 
191.900 
287.850 
3 
126.385 
252.771 
379.155 
2 
1 
95.950 
95.950 
95.950 
3 
176.833 
176.833 
176.833 
3 
1 
126.385 
126.385 
126.385 
2 
176.833 
176.833 
176.833 
 
TABLE II.   LIST OF ADDITIONAL NOTATIONS 
 
 
Description 
    
the number of surplus ports in period    
   
the number of deficit ports in period   
    
  
the index of the surplus port   in the transportation tableau of 
period   
    
  
the index of the deficit port   in the transportation tableau of period   
 
 
TABLE III.   THE COST PARAMETERS FOR PROBLEM 1 
 
Original 
port   
Destination 
port   
    
  
  
  
  
  
1 
2 
8.421 
4.396 
16.537 
3 
9.917 
2 
1 
6.761 
2.374 
12.395 
3 
5.848 
3 
1 
9.027 
1.900 
24.599 
2 
7.053 
 

177
International Journal on Advances in Systems and Measurements, vol 5 no 3 & 4, year 2012, http://www.iariajournals.org/systems_and_measurements/
2012, © Copyright by authors, Published under agreement with IARIA - www.iaria.org
repositioning with uncertainties," European Journal of 
Operational Research, vol. 222, pp. 65-75, 2012. 
[12] S. T. Choong, M. H. Cole, and E. Kutanoglu, "Empty 
container management for intermodal transportation 
networks," Transportation Research Part E, vol. 38, 
pp. 423-438, 2002. 
[13] J. X. Dong and D. P. Song, "Container fleet sizing and 
empty repositioning in liner shipping systems," 
Transportation Research Part E, vol. 45, pp. 860-877, 
2009. 
[14] D. P. Song and J. Carter, "Optimal empty vehicle 
redistribution 
for 
hub-and-spoke 
transportation 
systems," Naval Research Logistics, vol. 55, pp. 156 - 
171, 2008. 
[15] J. A. Li, K. Liu, S. C. H. Leung, and K. K. Lai, "Empty 
container management in a port with long-run average 
criterion," Mathematical and Computer Modelling, vol. 
40, pp. 85-100, 2004. 
[16] D. P. Song and Q. Zhang, "A Fluid Flow Model for 
Empty Container Repositioning Policy with a Single 
Port and Stochastic Demand," SIAM Journal on 
Control and Optimization, vol. 48, pp. 3623-3642, 
2010. 
[17] D. P. Song, "Characterizing optimal empty container 
reposition policy in periodic-review shuttle service 
systems," Journal of the Operational Research Society, 
vol. 58, pp. 122-133, 2007. 
[18] D. P. Song and C. F. Earl, "Optimal empty vehicle 
repositioning and fleet-sizing for two-depot service 
systems," European Journal of Operational Research, 
vol. 185, pp. 760-777, 2008. 
[19] D. Song, J. Dong, and M. Roe, "Optimal container 
dispatching policy and its structure in a shuttle service 
with 
finite 
capacity 
and 
random 
demands," 
International Journal of Shipping and Transport 
Logistics, vol. 2, pp. 44-58, 2010. 
[20] D. P. Song and J. X. Dong, "Empty Container 
Management in Cyclic Shipping Routes," Maritime 
Economics & Logistics, vol. 10, pp. 335-361, 2008. 
[21] D. P. Song and J. X. Dong, "Effectiveness of an empty 
container repositioning policy with flexible destination 
ports," Transport Policy, vol. 18, pp. 92-101, 2010. 
[22] Y. W. Yun, M. Y. Lee, and S. Y. Choi, "Optimal 
inventory control of empty containers in inland 
transportation system," 
International Journal of 
Production Economics, vol. 133, pp. 451-457, 2011. 
[23] J. A. Li, S. C. H. Leung, Y. Wu, and K. Liu, 
"Allocation of empty containers between multi-ports," 
European Journal of Operational Research, vol. 182, 
pp. 400-412, Oct. 2007. 
[24] Y. Ho, M. Eyler, and T. Chien, "A gradient technique 
for general buffer storage design in a production line," 
International Journal of Production Research, vol. 17, 
pp. 557-580, 1979. 
[25] R. Suri, "Perturbation analysis: the state of the art and 
research issuesexplained via the GI/G/1 queue," 
Proceedings of the IEEE, vol. 77, pp. 114-137, 1989. 
[26] F. Azadivar, "Simulation optimization methodologies," 
in Proceedings of the 31st conference on Winter 
simulation, 1999, pp. 93-100. 
[27] M. C. Fu, "Sample path derivatives for (s, S) inventory 
systems," Operations Research, vol. 42, pp. 351-364, 
1994. 
[28] Y. Wardi, R. Adams, and B. Melamed, "A unified 
approach to infinitesimal perturbation analysis in 
stochastic flow models: the single-stage case," 
Automatic Control, IEEE Transactions on, vol. 55, pp. 
89-103, 2010. 
[29] M. Chen, J. Q. Hu, and M. C. Fu, "Perturbation 
analysis of a dynamic priority call center," Automatic 
Control, IEEE Transactions on, vol. 55, pp. 1191-
1196, 2010. 
[30] C. G. Cassandras, X. C. Ding, and X. Lin, "An optimal 
control approach for the persistent monitoring 
problem," in Decision and Control and European 
Control Conference (CDC-ECC), 2011 50th IEEE 
Conference on, 2011, pp. 2907-2912. 
[31] W. P. Wong, W. Jaruphongsa, and L. H. Lee, "Budget 
allocation for effective data collection in predicting an 
accurate DEA efficiency score," Automatic Control, 
IEEE Transactions on, vol. 56, pp. 1235-1246, 2011. 
[32] D. Özdemir, E. Yücesan, and Y. T. Herer, "Production, 
Manufacturing 
and 
Logistics 
Multi-Location 
Transshipment Problem With Capacitated Production," 
European Journal of Operational Research, In press. 
 

