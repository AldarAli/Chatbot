User Density Estimation System using High Frequencies in a Specific Closed Space
Myoungbeom Chung
Division of Computer Engineering
Sungkyul University
Anyang City, South Korea
e-mail: nzin@sungkyul.ac.kr
Abstract—In this paper, we propose a user density estimation
system using high frequencies and the microphone of a smart
device in a specific closed space. High frequencies are sent to
the closed space by the server speaker of the proposed system,
and smart devices located in the space detect the high
frequencies. The smart devices detecting the high frequencies
send a message to the server system, and the system counts the
smart devices that detected the high frequencies in the space.
We tested user density with the proposed system, using 10
smart devices to evaluate performance. According to the test
results, the proposed system showed 95% accuracy. The
system can estimate exact user density in a specific closed
space, and it can be a useful technology for protecting people’s
safety and measuring space use in indoor spaces.
Keywords-high
frequencies;
inaudible
sound;
density
estimation; smart device.
I.
INTRODUCTION
Recently, along with the developments of Virtual Reality
(VR) and Information Technology (IT), many sports services
have begun to be offered, which are available in specific
closed spaces, such as VR cafés, screen baseball zones,
sports experience game spaces, and bowling pubs. In Korea,
now, 450 screen baseball zones were built and about 50 VR
cafés were opened at offline theme parks. Additionally, as a
start-up item for successful businesses, affiliate stores, such
as VR Playce [1] and VRIZ by YJM games [2] have been
appearing regularly. Therefore, today, a great number of
people go to specific closed spaces to enjoy various services,
and user density estimation technologies in specific closed
spaces are increasingly required to insure the safety of the
service users.
User density estimation means the estimation of the
number of human count in the specific space. Recent
technologies for user density estimation are divided into 2
classes. The first class counts the number of people by
analyzing video images or by detecting the motion vector of
the people [3][4]. Others use radio devices, such as Radio
Frequency Identification (RFID) tags, smart devices, sensor
nodes, etc. instead of video images, and they count the
number of each object for user density estimation [5][6].
However, when only one video image is used, the analysis
type using video images cannot count the exact number of
people, and it cannot be used in smoggy or dark spaces.
Furthermore, because there are some serious issues related to
personal privacy risks when video images are used, it is quite
difficult to apply video image analysis for user density
estimation. The first approach that uses RFID tags must
supply the supplement with a RFID tag for user density
estimation, and the approach that uses smart devices cannot
be used in indoor spaces because of the poor signal from the
smart device’s Global Positioning System (GPS). Although
the above technologies are suitable for outdoor and open
spaces, such as subways, soccer stadiums, or baseball
stadiums, they cannot be applied in specific closed spaces.
Therefore, in this paper, we propose a new user density
estimation system using high frequencies via the speaker of a
server system and the microphone of a smart device. The
microphone of the smart device can detect an audible
frequency range from 20 Hz to 22 kHz, so the smart device
can detect specific high frequencies from received sounds via
an application [7]. We use a widely available simple speaker
for the speaker of the server system, and 2 high frequencies
between 18 kHz and 22 kHz. These high frequencies are
regularly used in high frequency studies, such as smart
information service applications and data transmission using
high frequencies; these frequencies have an important feature,
which is that people cannot hear them in an indoor space
[8][9]. In our system, smart devices located in the same
indoor space receive sounds around each device, and the
devices send a message to the server when they detect the
specific high frequencies by analyzing the received sound.
Thus, because the server gathers each message from the
smart devices and counts the number of devices, the
proposed system can estimate user density in a specific
closed space. To evaluate the performance of the proposed
application
and
server
system,
we
developed
a
high
frequency detection application for smart devices and a user
density estimation server system, and we conducted an
experiment on user density estimation using 10 smart
devices. The results show that the proposed system is useful
as a user density estimation technology in specific closed
spaces because the accuracy of the proposed application and
server system is over 95%. Therefore, as the proposed
system is a new user density estimation technology using
inaudible high frequencies and the microphones of smart
devices, it can be a useful technology to protect people’s
safety in closed spaces, such as VR cafés, screen baseball
zones, sports experience game spaces, etc.
25
Copyright (c) IARIA, 2018.     ISBN:  978-1-61208-627-9
MMEDIA 2018 : The Tenth International Conference on Advances in Multimedia

This paper is organized as follows. In Section 2, we
describe the proposed application based on smart devices
and a server system. In Section 3, we describe an experiment
using the proposed application and server system and discuss
the results of the experiment regarding performance. Finally,
in Section 4, we present the conclusions and our further
research.
II.
USER DENSITY ESTIMATION SYSTEM USING HIGH
FREQUENCIES
In this section, we explain the proposed application based
on smart devices and a server system for user density
estimation in a specific closed space. The total flow of the
proposed system is shown in Figure 1. In Figure 1, the
speaker of the server system generates 1 specific pair of high
frequencies (over 18 kHz) in a specific closed space over a
fixed number of seconds (①), and the smart devices in the
space collect the nearby sound via the microphone of each
smart device. The collected
sounds are converted
to
frequencies using Fast Fourier Transform (FFT) [10], and
each smart device sends the pair of high frequencies and its
own GPS information to the server system when it detects
the specific pair of high frequencies over 18 kHz (②). The
server gathers the data for the pair of high frequencies and
the GPS information from each smart device, and then it
counts the number of smart devices located in the specific
closed space at the same time (③).
The specific pair of high frequencies over 18 kHz is
selected as two high frequencies of 100 Hz units between 18
kHz and 22 kHz (total: 41 types of pairs). To avoid
interference
from
other
high
frequencies,
the
interval
between each high frequency is over 600 Hz. Thus, the pair
of high frequencies can be composed of a total 595 types,
such as 18.0 kHz–18.7 kHz, 18.0 kHz–18.8 kHz, … , 21.3
kHz–22.0 kHz. The composed pairs of high frequencies are
generated by the speaker of the proposed server system and
produced n times over k seconds. k is the duration of the pair
of high frequencies and n is their repetition time. The
produced type of pair of high frequencies is shown below in
Figure 2.
17.0
18.0
19.0
20.0
21.0
22.0
1
2
3
4
5
6
sec
kHz
k
n
Figure 2. Example of the proposed pair of high frequencies for user density
estimation.
In Figure 2, the pair of high frequencies is 19.0 kHz and
20.0 kHz, k is 5 seconds, and n is 2 times. The pair of high
frequencies is generated by the speaker of the server system,
and each smart device located in the specific closed space
checks whether the pair of high frequencies consistently
exists or not. If a smart device detects the pair of high
frequencies, it waits for the fixed m seconds and detects the
pair of high frequencies again to confirm that it is the same
pair. Then, if the first and second pairs of high frequencies
are the same, the smart device sends the pair’s high
frequency value and the smart device’s GPS information to
the server system.
Figure 1. Total flow of the proposed application and server system.
Smart devices
Server
Data gathering
from smart devices
Data counting
Speaker
Collecting sound via built-in microphone
FFT from collected sound
Detection of specific high frequency
①
②
③
26
Copyright (c) IARIA, 2018.     ISBN:  978-1-61208-627-9
MMEDIA 2018 : The Tenth International Conference on Advances in Multimedia

Next, the server system confirms whether the values of
the pair of high frequencies from the speaker and from the
smart device are the same or not. If they are the same, the
server system calculates each distance from the speaker’s
GPS coordinates to the smart device’s GPS information. If
the distance is within a critical distance (r) using Euclidean
distance, the smart device is located in the specific closed
space and the server system counts the smart device. Thus,
the proposed application and server system can estimate user
density in the specific closed space.
III.
EXPERIMENTS AND EVALUATION
This section explains the proposed application based on
smart devices for user density estimation. We describe the
experiment for user density estimation and analyze the
results of the experiment using the proposed application and
server system. The screen composition of the proposed
application is shown in Figure 3. In Figure 3, the graph
located on the left-hand side of the figure shows the bin
value of the high frequencies from the collected sound data,
and we confirmed that 18.1 kHz and 19.5 kHz stand out
among the other high frequencies. The text located on the
right-hand side of Figure 3 is the smart device’s GPS
information, the detected pair of high frequencies, the set
duration time (k seconds), and the slider bar for setting
duration time k. In Figure 3, because we assumed that n was
2 times and m was 1 second, if we set the slider bar to 3, k is
3 seconds and the application detects the first pair of high
frequencies during (k–1)/2 seconds. Then, the application
waits for 1 second and detects the second pair of high
frequencies during (k–1)/2 seconds again. For example, if we
set 3 as k seconds, the application checks the first pair of
high frequencies for 1 second, waits for 1 second, and checks
the second pair of high frequencies again for 1 second.
Next, we continued the experiment using the proposed
application server system. The specific closed space was a 7
× 4 m laboratory, and the speaker of the server system was
located in the top corner of the laboratory, as illustrated in
Figure 4. The space had a table, a hanger, four desks, and
four chairs. A speaker which was named Harman Kardon
Omni 20+ was located at left top corner of the space.
Figure 4. The floor plan of laboratory for experiment
The pair of high frequencies was 18.0 kHz and 19.0 kHz,
k was 3.0 seconds, and m was 1.0 seconds. We used 10
smart devices of various models, such as iPhone 7, iPhone 6,
and Galaxy s7. The server hardware was Intel(R) Core(TM)
i5 CPU 750, 8G RAM, and the server environment was
Apache 2.2.14, PHP 5.2.12, and MySQL 5.1.39. Each smart
device was running the proposed application in background
mode, and they were located in various positions around the
laboratory, such as on the desk, on the chair, in the inside
pocket of a jacket hung from a hanger, in front of a computer
monitor, or on the floor. We generated the pair of high
frequencies 100 times using the speaker of the server system
GPS
37.38051, 126.92716
High Frequencies
18.1kHz & 19.5kHz
Time duration : 3.0 sec
①
②
Figure 3. Screen composition of the proposed application for user density estimation.
27
Copyright (c) IARIA, 2018.     ISBN:  978-1-61208-627-9
MMEDIA 2018 : The Tenth International Conference on Advances in Multimedia

in the laboratory; Figure 5 shows the detection results of the
pair of high frequencies from each smart device.
Count 100
99
98
95
100 100
96
98
100
98
80
85
90
95
100
Figure 5. Detection results of the pair of high frequencies from each smart
device.
In Figure 5, i7 means iPhone 7, i6 means iPhone 6, i6s
means iPhone 6s, G7 means Galaxy s7, and G8 means
Galaxy s8. The count does not refer to the detection number
of the pair of high frequencies; it refers to the number of
times a signal was sent to the server system when each smart
device detected the pair of high frequencies. Most smart
devices detected the pair of high frequencies over 95 times.
We can see that the fourth i6 showed detection 95 times, and
the seventh G7 showed detection 96 times. Because these
two devices were located in the inside pocket of a jacket, we
expected that these devices would have more difficulty than
the others in detecting the pair of high frequencies.
Next, using Euclidean distance (r: 10 m), we checked the
results from the server system to see whether or not all of the
smart devices were located in the same place as the data
from the pair of high frequencies. Because the fourth i6 and
seventh G7 sent the data to the server system 95 and 96
times, respectively, the server system showed 95 times that
ten smart devices were located within the same place at the
same time. Thus, the proposed application and server system
showed 95% accuracy from this experiment, and we believe
that the proposed system can be a useful technology for user
density estimation in a specific closed space.
IV.
CONCLUSIONS AND FUTURE WORK
In this paper, we have proposed a new user density
estimation system using pairs of high frequencies from a
server system and the microphones of smart devices. In the
experiment, the server system generated the pairs of high
frequencies in the specific closed space, and various smart
devices detected the pairs of high frequencies and sent the
frequencies’ data and the smart devices’ GPS data to the
server system. From this process, the server system was able
to count the number of smart devices located in the same
space at the same time, and it was able to estimate user
density in the specific closed space. Therefore, the proposed
application and server system could be useful systems to
estimate user density in closed spaces, and it could be a
useful technology to protect user safety in closed spaces,
such as VR cafés, screen baseball zones, sports experience
game
spaces,
and
bowling
pubs.
Because,
when
an
emergency such as a fire occurs or building collapse, the
proposed method guides to disaster relief staff the exact
location of people in the closed space.
In future research, we will study a user density estimation
system for multiple closed spaces in the same building and
develop a visualization of the density results from multiple
closed spaces from the server system. And, we will compare
to our proposed method and the other user density estimation
technologies using more smart devices which are moving or
stopping in closed spaces such as sports game spaces,
bowling pubs, and VR cafes. Moreover, we will study how
the accuracy of the proposed application and server system
can be improved.
ACKNOWLEDGMENT
This research project was supported in part by the
Ministry
of
Education
under
Basic
Science
Research
Program
(NRF-2013R1A1A2061478)
and
(NRF-
2016R1C1B2007930), respectively.
REFERENCES
[1]
VR Playce, http://www.vrplayce.co.kr/, Online access April
12th 2018.
[2]
VRIZ
by
YJM
games,
http://english.yonhapnews.co.kr/news/2017/02/15/020000000
0AEN20170215009900320.html, Online access April 12th
2018.
[3]
V. Lempitsky, A. Zisserman, "Learning to count objects in
images," In Advances in neural information processing
systems, pp. 1324-1332, 2010.
[4]
H. Wang, T. Wang, K. Chen, and J.-K. Kämäräinen, "Cross-
granularity
graph
inference
for
semantic
video
object
segmentation," International Joint Conference on Artificial
Intelligence (IJCAI), 2017.
[5]
Y. Cong, H. Gong, S. C. Zhu, and Y. Tang, "Flow
mosaicking: Real-time pedestrian counting without scene-
specific
learning,"
In
Computer
Vision
and
Pattern
Recognition (CVPR), June 2009.
[6]
F. Li et al., "A reliable and accurate indoor localization
method using phone inertial sensors," Proceedings of the 2012
ACM Conference on Ubiquitous Computing. ACM, Sep.
2012, pp. 421-430, ISBN: 978-1-4503-1224-0
[7]
M. B. Chung, "An Advertisement method using inaudible
sound of speaker," Journal of the Korea Society of Computer
and Information, vol. 20, no. 8, pp. 7-13, August 2015.
[8]
J. B. Kim, J. E. Song, and M. K. Lee, “Authentication of a
smart phone user using audio frequency analysis,” Journal of
the Korea Institute of Information Security and Cryptology,
vol.22, no.2, pp.327-336, April 2012.
[9]
M. B. Chung and H. S. Choo, “Near wireless-control
technology between smart devices using inaudible high-
frequencies,” Multimedia Tools and Applications, vol.74,
no.15, pp.5955-5971, August 2015.
[10] A. Bellini et al., "High frequency resolution techniques for
rotor
fault
detection
of
induction
machines,"
IEEE
Transactions
on
Industrial
Electronics,
vol.55,
no.12,
pp.4200-4209, 2008.
28
Copyright (c) IARIA, 2018.     ISBN:  978-1-61208-627-9
MMEDIA 2018 : The Tenth International Conference on Advances in Multimedia

