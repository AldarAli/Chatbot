Indoor Location Estimation based on IEEE 802.15.7 Visible Light Communication 
and Decision Trees  
David Sánchez-Rodríguez1,2, Itziar Alonso-González1,2, Carlos Ley-Bosch1,2, Javier Sánchez-Medina3, Miguel 
Quintana-Suárez1 and Carlos Ramírez-Casañas1,2  
Department of Telematics Engineering1 
Institute for Technological Development and Innovation in Communications2 
Institute for Cybernetics3 
University of Las Palmas de Gran Canaria 
e-mail: david.sanchez@ulpgc.es 
 
 
Abstract— Indoor positioning estimation has become an 
attractive research topic due to the growing interest in location-
aware services. Many research works have been proposed on 
solving this problem by using wireless networks. Nevertheless, 
there is still much work needed to achieve high accuracy levels. 
In the last years, the emergence of visible light communication 
brings a brand new approach to high accuracy indoor 
positioning. Among its advantages, this new technology is 
immune to electromagnetic interference and also allows 
knowing the received optical power accurately. In this paper, we 
propose 
a 
fingerprinting 
indoor 
location 
estimation 
methodology based on decision trees. Along with the method, we 
also share some experimental results using the received signal 
strength obtained from an IEEE 802.15.7 simulator developed 
by our research group. Results are encouraging. The tested 
model (classifier) yielded a 93% accuracy, with an average error 
distance for misclassified instances of 37 centimeters.  
Keywords-Indoor Location; Visible Light Communication; 
Decision Trees; Received Signal Strength. 
I. 
INTRODUCTION 
Indoor localization has gained considerable attention over 
the past decade due to the emergence of numerous location-
aware services. These new services have made it possible to 
use applications capable of sensing their location and 
dynamically adjusting their settings and functions [1]. Many 
indoor localization approaches based on globally deployed 
radiofrequency systems, such as WLAN, Bluetooth and 
UWB, have been proposed, mainly because of their low cost 
and mature standardization state. Nevertheless, they usually 
deliver an accuracy of up to two meters because multipath 
propagation [2]. Visible light communication (VLC) is 
experiencing a growing interest due to improvements in solid 
state lighting and a high demand for wireless communications. 
VLC can offer a higher positioning accuracy [3] mainly 
because of two reasons: this kind of networks is not affected 
by electromagnetic interferences and the received optical 
power is more stable than radio signals and can be accurately 
known. For example, authors in [4] proposed a system with a 
positioning error about 10 centimeters using a location code 
and a spatial power distribution map where RSS 
measurements are gathered every 5 centimeters. 
Indoor positioning techniques for VLC are mainly 
classified into two groups based on geometric properties: 
lateration and angulation [5]. Lateration techniques estimate 
the target location by measuring distances from the receiver to 
multiple LEDs base stations with known coordinates. The 
distances can be estimated involving the time of arrival 
(TOA), time difference of arrival (TDOA) and the received 
signal strength (RSS). On the other hand, with angulation 
techniques or angle of arrival (AOA) the target location is 
estimated by measuring angles to multiple base stations. 
Nevertheless, these techniques often require additional 
hardware, time synchronization between emitter and receiver, 
knowing 
every 
base 
station 
coordinates 
and 
extra 
computation. Thus, fingerprinting techniques combined with 
VLC can be an alternative to the aforementioned techniques 
because they estimate positioning by matching online 
measured data with pre-measured location-related data, such 
as RSS. Hence, only RSS information is needed and extra 
sensors are unnecessary. In fact, fingerprinting is one of the 
most commonly used techniques for RF indoor location [6]. 
Localization based on fingerprinting is usually carried out in 
two phases. The first phase (offline phase) consists on the 
sampling of RSS measurements for every emitter and each 
reference location (VLC receiver). During the second phase 
(online phase), the particular receiver position is estimated by 
feeding new measurements to the positioning model built with 
previously acquired samples. Most research differs in the 
latter phase. In this paper, we propose an indoor location 
estimation method based on an ensemble model of decision 
trees. We present some preliminary results showing the 
achieved high accuracy and low computational complexity. 
On the other hand, in 2011, Institute of Electrical and 
Electronic Engineers (IEEE) published the IEEE 802.15.7 
standard, which defines Physical (PHY) and Medium Access 
Control (MAC) layers for short-range wireless optical 
communications using visible light [7]. Within the last few 
years, many studies on VLC based positioning have been 
published. Nevertheless, to the best of our knowledge, to this 
date there is no any published indoor positioning research 
using this standard. This paper is the first work to use decision 
trees in IEEE 802.15.7 VLC networks for indoor location 
estimation.  
With the present work, our contribution is the following: 
we propose an ensemble model of decision trees based indoor 
75
Copyright (c) IARIA, 2016.     ISBN:  978-1-61208-514-2
ICWMC 2016 : The Twelfth International Conference on Wireless and Mobile Communications (includes QoSE WMC 2016)

positioning methodology together with some promising 
results. Furthermore, we make use of the IEEE 802.15.7 
standard on VLC to obtain RSS values, which may be a useful 
piece of information for other researchers and practitioners at 
this stage of (un)deployment of such standard. 
The rest of the paper is organized as follows. In Section 2, 
we describe our simulator that implements the IEEE 802.15.7 
standard. Next, in Section 3, we describe the ensemble model 
of decision trees used for VLC indoor location estimation. In 
Section 4, we describe the two phases of our indoor 
positioning method based on an ensemble model of decision 
trees. In Section 5, we show some experimental results that 
demonstrate the high accuracy of our approach. Finally, we 
sum up the conclusions and we present the future work. 
 
II. 
SIMULATION MODEL BASED ON IEEE 802.15.7 
We built our IEEE 802.15.7 simulator using OMNET++ 
simulation framework from the model developed by [8], 
designed for sensor networks based on IEEE 802.15.4 
standard. We can do that due to the similarities that exist 
between both standards IEEE 802.15.7 and IEEE 802.15.4. 
OMNeT++ provides built-in support tools for recording 
and analysis and visualization of simulation results. Several 
data can be chosen for simulation results, such as throughput, 
delay, packet loss and RSS. 
The developed simulation model has been designed with 
the following premises:  
- 
IEEE 802.15.7 star topology has been chosen, due to 
its importance and wide range of applications. 
- 
For the MAC layer, we opted to use the superframe 
structure, since it allows the use of both contention 
(CAP) and no contention (CFP) access methods. In 
addition, the use of the superframe enables devices to 
enter the energy save state during the idle period. 
- 
A VPAN identifier is assigned to each emitter in order 
to identify each coordinator (LED lamp).  
Next subsections describe the most important features in 
our simulator, for a better comprehension of the presented 
results. 
 
A. Optical channel model 
The transmission medium is modeled as free space 
without obstacles. We chose the directed line of sight (LOS) 
link configuration to model the optical signal propagation, 
requiring a LOS between each device and the coordinator. We 
have considered only the direct component of the received 
signal to calculate the received power, despising the possible 
influence of reflections. According to the results presented in 
[9], at least 90% of total received optical power is direct light 
in VLC when using a receiver field of view (FOV) of 60 
degrees. Therefore, to ensure the validity of our implemented 
model, we have configured all optical receivers using a 60 
degrees FOV value. 
 
 
 
TABLE I.  PHY LAYER PARAMETERS 
Parameter 
Value 
Transmission rate 
1.25 Mbps 
Optical clock rate 
3.75 MHz 
Coordinator optical transmission power   
15 W 
Half Power Angle θ1/2 
60o 
Field of Vision (FOV) 
60o 
Photo detector area (A) 
10 mm2 
Photo detector responsivity (R) 
0.54 A/W 
Optical concentrator gain (G) 
15 
Optical filter transmission coefficient (T) 
1 
 
The adopted optical channel model facilitates reaching 
high transmission speeds, since the effects of multipath 
distortion on the optical signal are not considered. 
Considering only the direct component of the signal has the 
additional benefit of improving the efficiency of the 
implemented simulation model. The computational load 
required to run simulations of scenarios with multiple nodes 
including the functionality of different layers of the 
architecture is reduced significantly. 
 
B. PHY layer simulation parameters 
Table 1 shows the main configuration parameters of PHY 
layer used in all simulation scenarios. We selected the PHY 
II operating mode, intended for both indoor and outdoor 
environments, using MCS-ID number 16, since support for 
the minimum clock and data rates for a given PHY is 
mandatory. Because of the optical channel model used, 
transmitters' directivity is characterized by its half power 
angle, θ1/2 while receivers' directivity is defined by its FOV. 
According to [9], both parameters are assigned a value of 60 
degrees, to ensure validity of the implemented channel 
model, since the calculation of received optical power takes 
in account only the direct component of the signal. In order 
to simplify the calculation process of the model, the values 
used for the concentrator gain (G) and the transmission 
coefficient of the optical filter (T) are set up as constant 
values, so they do not depend on the angle of incidence ψ. 
The rest of the values selected to characterize VLC 
transmitters and receivers are commonly used values in 
literature, similar to those used in [10][11].  
 
III. 
ENSEMBLE MODEL OF DECISION TREES 
Indoor positioning has been a very active research area 
where several data mining techniques have proved useful to 
extract knowledge from raw data [12][13]. To solve this 
problem, we propose a general approach based on decision 
trees classifications. 
Decision trees build classification models in the form of a 
tree structure. In general, they can handle both categorical and 
numerical data. A decision tree has internal nodes and leaf 
nodes. An internal node includes a condition or function of 
any feature of the dataset, which breaks down the dataset into 
76
Copyright (c) IARIA, 2016.     ISBN:  978-1-61208-514-2
ICWMC 2016 : The Twelfth International Conference on Wireless and Mobile Communications (includes QoSE WMC 2016)

several subsets, corresponding to two or more branches. Each 
leaf is assigned to one class representing the classification 
decision. For instance, in the location problem, the received 
optical power from luminaries is used in the internal node 
conditions, and the locations or reference points are used in 
the leaf nodes. Samples are classified by navigating from the 
root of the tree down to a leaf, according to the outcome of the 
condition or function along the path [14]. 
On the other hand, ensemble models are methods that 
combine the capabilities of multiple models to achieve better 
prediction accuracy than any of the individual model could do 
on its own. Ensemble methods generate multiple base models, 
and the final prediction is produced as the result of a 
combination of them, in some appropriate manner, from the 
prediction of each base model. For instance, the output of each 
base model is weighted. The success of the ensemble model is 
based on the ability of generating a set of base models that 
make errors that are as uncorrelated as possible. 
In our indoor localization method, we use a weak classifier 
based on the C4.5 algorithm [15] to generate a decision tree as 
a base model. Then, the adaptive boosting (AdaBoost) 
algorithm [16] is used to build an ensemble model based on 
previous base models, that is a location estimation model 
formed by multiple weighted decision trees. In a previous 
work, we demonstrated that this combination of machine 
learning techniques provides excellent results for indoor 
localization [17].  
 
IV. 
INDOOR LOCALIZATION METHOD 
In this Section, we describe our positioning method based 
on an ensemble model of decision trees, and it is divided into 
two phases. The first phase is the training phase (offline 
phase). Coordinators send beacon frames and RSS samples 
are collected at reference locations (receivers) to build a 
dataset. From this dataset, the ensemble model is built. The 
second stage is the test phase (online phase) where a receiver 
infers its position by using the online RSS observations.  
A. Training phase 
In this phase, we aim at building an ensemble model of 
decision trees using the RSS measurements dataset as training 
set. Several simulations are carried out at each reference 
location to calculate different values of RSS. Each simulation 
is performed with a random orientation vector of each receiver 
to obtain different values. RSS data are denoted by φi,j(τ) and 
indicate the τ-th RSS value measured from i-th coordinator at 
the j-th receiver. The database can be represented by ψ as in 
(1): 
 
𝜔 = (
𝜑1,1[𝜏]
⋯
𝜑1,𝑅[𝜏]
⋮
⋱
⋮
𝜑𝐴,1[𝜏]
⋯
𝜑𝐴,𝑅[𝜏]
) 
(1) 
                         
where A is the number of coordinators, R is the number of 
receivers or reference locations, τ = 1, ..., N is the index of 
RSS samples and N is the number of RSS samples at each 
reference location. 
After that, once that RSS dataset of the environment is 
compiled, an ensemble model of decision trees is built using 
boosting technique. 
B. Test phase 
In this phase, a dataset formed by a RSS sample from each 
coordinator is taken as input of ensemble model of decision 
trees to infer the current location. Using similar notations, the 
online measurements can be represented as in (2): 
 
𝜔𝑟 = (
𝜑1,𝑟
⋮
𝜑𝐴,𝑟
) 
(2) 
 
where the location r is unknown. 
 
V. 
EXPERIMENTAL RESULTS 
Our method was tested in a simulation environment that 
models a 4 by 4 by 3 meters room. As shown in Fig. 1, the 
environment consists of 16 coordinators or LED lamps (red 
triangles) configured as 4 x 4 grids placed 1 meter apart from 
each other on the ceiling. On the lower part, we set up 100 
receivers (blue circles) in a 10 x 10 grid configuration, with a 
36 cm separation from each other. In order to consider 
different distances between receivers and coordinators, the 
receivers plane is set up at three different heights: 75, 100 and 
125 centimeters from the floor. Receivers orientation was 
randomly produced for each simulation as follows: they are 
pointing out to the ceiling with an initial orientation vector 
[0,0,1] and a random (-0.2,0.2) offset is applied to each axis 
in each simulation. Thus, each receiver has a different 
orientation in each simulation. 
Eleven simulations were performed on each three vertical 
layers. One RSS measurement was estimated at each receiver 
and simulation. This leads to 3.300 RSS measurements. From 
this dataset, training and test dataset were random split, 
picking the same proportion of samples at each class 
Figure 1. Network scenario with 16 coordinators and 100 receivers. 
77
Copyright (c) IARIA, 2016.     ISBN:  978-1-61208-514-2
ICWMC 2016 : The Twelfth International Conference on Wireless and Mobile Communications (includes QoSE WMC 2016)

(stratified split).  In order to test the robustness of the method, 
different training size datasets were used, from 50% to 90% 
of the whole dataset. The simulation parameters are provided 
in Table 1. 
Fig. 2 shows the received optical power (lux) at 1 meter 
from the floor with sixteen coordinators. As it can be seen 
there is enough lighting to receive the beacon frame in every 
reference location. 
For each training dataset, an ensemble model based on 
decision trees was generated using Weka tool in an Intel i7 2.2 
GHz/8GB 
non-dedicated 
Windows 
machine. 
The 
classification trees were created by the C4.5 algorithm 
(implemented 
in 
Weka 
by 
the 
classifier 
class: 
weka.classifiers.trees.J48). The boosting method used was the 
metalearning AdaBoostM1 algorithm implemented by the 
Weka classifier class weka.classifiers.meta.AdaBoostM1 with 
number of iterations equal to 10. For the validity of simulation 
results, all experiments were run based on 10-fold cross 
validation. 
Experiments were focused to determine the location 
method accuracy. The error is the expected distance from the 
misclassified instance and the real location. The error is 
calculated by the Euclidean distance between these points, and 
the arithmetic mean was computed from the results of the 
experiments. Being a classification problem, an error simply 
means that a receiver was estimated to be in a wrong 
positioning cell, in the receivers grid. 
Table II shows experimental results in terms of correctly 
classified instance percentage and average error distance for 
each training dataset size. As expected, the elapsed time to 
build each model increases with the training dataset size. 
Nevertheless, this not meaningful, because the maximum time 
is about thirty seconds and it must take into account that the 
model is generated only once, in the offline phase. On the 
other hand, using only five samples at each receiver for 
training (50% training dataset size) the model has an accuracy 
 
TABLE II.  
EXPERIMENTAL RESULTS 
Training 
Dataset 
Size (%) 
Time to 
build 
Model 
(s) 
Correctly 
Classified 
Instances 
(%) 
Average 
Error 
Distance ± 
std (cm) 
Average 
Error 
Distance ± 
std (cm) 
of  
Misclassified 
Instances 
50 
20.96 
88.55 
4.7 ± 0.131 
39.4 ± 0.075 
60 
23.26 
89.66 
4.5 ± 0.124 
37.75 ± 0.051 
70 
26.65 
90.44 
3.8 ± 0.113 
37.4 ± 0.045 
80 
31.8 
92.16 
3.3 ± 0.109 
37.08 ± 0.069 
90 
32.73 
93.33 
2.8 ± 0.099 
37.02 ± 0.058 
 
about 88% and an average error distance of 4.7 cm.  
Nevertheless, an average error distance of 39.4 cm is reached 
if misclassified instances are only considered. Obviously, 
better results are achieved by increasing training dataset size, 
however, the accuracy is only improved about a 5% from 50% 
to 90% dataset size, and the average error distance of 
misclassified instances improves about 2.4 cm. Fig. 3 shows 
the cumulative distribution function (CDF) for 90% training 
dataset size. As it can be seen, most of instances are correctly 
classified and it is about 93%. Fig. 4 shows the CDF of 
misclassified instances for 90% training dataset size. As it can 
be seen, the maximum error distance is about 50 cm. 
Furthermore, 86% of misclassified instances have an error 
distance less than 37 cm, that is, most of misclassified 
locations are the nearest neighbours (receivers) of exact 
locations.  
 
VI. 
CONCLUSIONS 
In this paper, we have demonstrated that decision trees 
provide a high accuracy for indoor location estimation in VLC 
networks. This is mainly because the visible light is less 
susceptible to multipath effects making the propagation and 
Figure 2. Distribution of the received optical power at 1 meter 
from the floor. 
Figure 3. CDF of performance for 90% training dataset size. 
78
Copyright (c) IARIA, 2016.     ISBN:  978-1-61208-514-2
ICWMC 2016 : The Twelfth International Conference on Wireless and Mobile Communications (includes QoSE WMC 2016)

the received optical power more predictable. With regard to 
accuracy, about 93% of instances are correctly classified and 
average error of 2.8 cm. Furthermore, the ensemble model of 
decision trees achieves an average error distance of 
misclassified instances of 37 cm, taking account that the 
receivers are placed in a grid with a 36 cm separation from 
each other. On the other hand, the accuracy of the ensemble 
model improves with the training dataset size, and its effect 
on the elapsed time to get the model is not meaningful. 
Since the average error distance of misclassified instances 
cannot be less than the distance among receivers when 
decision trees are used, in our ongoing work, we are planning 
to use other techniques of data mining, such as regression, to 
reduce the error distance. 
 
ACKNOWLEDGMENT 
This research was partially supported by the Research 
Program of University of Las Palmas de Gran Canaria 
(ULPGC2013-15). 
 
REFERENCES 
[1] R. Want and B. Schilit, “Expanding the Horizons of Location-
Aware Computing”, IEEE Computer, pp. 31-34, August 2001 
[2] P. Bahl and V. N. Padmanabhan, “RADAR: an in-building RF-
based user location and tracking system”, IEEE Conference on 
Computer Communications (INFOCOM), pp. 775-784, 2000, 
doi: 10.1109/INFCOM.2000.832252.  
[3] J. Armstrong, Y. A. Sekercioglu, and A. Neild, “Visible light 
positioning: a roadmap for international standardization”, 
IEEE Communications Magazine, 51(12), pp. 68-73, 2013. 
[4] Y. Won, S. H. Yang, D. H. Kim, and S. K. Han, “Three-
dimensional optical wireless indoor positioning system using 
location code map based on power distribution of visible light 
emitting diode”, IET Optoelectronics, 7(3), pp. 77-83, 2013. 
[5] W. Xu, J. Wang, H. Shen, H. Zhang, and X. You, “Indoor 
Positioning for Multiphotodiode Device Using Visible-Light 
Communications”, IEEE Photonics Journal, 8(1), pp. 1-11, 
2016.  
[6] V. Honkavirta, T. Perala, S. Ali-Loytty, and R. Piché, “A 
comparative survey of WLAN location fingerprinting 
methods”, Proceedings of the 6th Workshop on Positioning, 
Navigation and Communication (WPNC 2009) Hannover, 
Germany, pp. 243–251, 2009. 
[7] S. Rajagopal, R. D. Roberts, and S. K. Lim. IEEE 802.15.7 
visible light communication: modulation schemes and 
dimming support. Communications Magazine, IEEE, 50(3), 
pp. 72–82, 2012. 
[8] F. Chen, N. Wang, R. German, and F. Dressler, “Performance 
Evaluation of IEEE 802.15.4 LR-WPAN for Industrial 
Applications”, Fifth Annual Conference on Wireless on 
Demand Network Systems and Services, pp. 89-96, 2008. 
[9] T. Komine and M. Nakagawa, “Fundamental analysis for 
visible-light communication system using LED lights”, IEEE 
Transactions on Consumer Electronics, Vol.50, Issue 1, pp. 
100–107, 2004. 
[10] D. Deqiang, K. Xizheng, and X. Linpeng, “An Optimal Lights 
Layout Scheme for Visible-Light Communication System”, 
8th International Conference on Electronic Measurement and 
Instruments, pp. 2-189 - 2-194, 2007.  
[11] D. Tronghop, J. Hwang, S. Jung, and Y. Shin, “Modeling and 
analysis of the wireless channel formed by LED angle in visible 
light 
communication”, 
International 
Conference 
on 
Information Networking, pp. 354-357, 2012. 
[12] M. Youssef and A. Agrawala, “The Horus location 
determination system”. Wireless Networks, 14, pp. 357–374, 
2008. 
[13] Y. Chen, Q. Yang, J. Yin, and X. Chai, “Power-efficient 
access-point selection for indoor location estimation”, IEEE 
Trans. Knowl. Data Eng, 18, pp. 877–888, 2006. 
[14] O. Z. Maimon and L. Rokach, “Data Mining and Knowledge” 
Discovery Handbook; Springer: New York, NY, USA, Volume 
1 , 2005. 
[15] J. R. Quinlan, “C4.5: Programs for Machine Learning”, 
Morgan Kaufmann: San Francisco, CA, USA, Volume 1, 1993. 
[16] Y. Freund, R. Schapire, and N. Abe, “A short introduction to 
boosting”, J. Jpn. Soc. Artif. Intell, 14, pp. 771–780, 1999. 
[17] D. Sánchez-Rodríguez, P. Hernández-Morera, J. M. Quinteiro, 
and I. Alonso-González, "A Low Complexity System Based on 
Multiple Weighted Decision Trees for Indoor Localization", 
Sensors, no. 6, pp. 14809-14829, 2015. 
 
Figure 4. Misclassified instances CDF of performance for 90% 
training dataset size. 
79
Copyright (c) IARIA, 2016.     ISBN:  978-1-61208-514-2
ICWMC 2016 : The Twelfth International Conference on Wireless and Mobile Communications (includes QoSE WMC 2016)

