Novel 3-Stage Scheduler for Real Time Trafﬁc in
an OFDMA System with Delay and Retransmission
Constraints
Suman Kumar, Krishnamurthy Giridhar
Dept. of Electrical Engineering
Indian Institute of Technology Madras
Chennai, 600036, India
Email: {suman, giri}@tenet.res.in
Sheetal Kalyani
Centre of Excellence in Wireless Technology
IITM Research Park
Chennai, 600113, India
Email: sheetal@cewit.org.in
Abstract—Emerging
wireless
communication
systems
use
MIMO-OFDM with adaptive modulation and Hybrid Automatic
Repeat Request (HARQ) techniques to enables high bit rate and
low packet error rate. In this work, a 3-Stage packet scheduling
algorithm that is HARQ aware is proposed, which supports real
time service with multi-level delay constraints and retransmission
constraints in OFDM systems. For performance analysis, three
Quality of Service (QoS) parameters namely packet loss rate,
fairness, and throughput are studied. Corresponding to these
three metrics and depending upon the delay and retransmission
constraints, a 3-Stage scheduling strategy is proposed. It is
assumed that the packets are lost due to violation of the delay
constraint and/or channel induced error, even after allowing the
maximum number of retransmissions. Simulation result shows
that this novel 3-Stage scheduler achieves a balance between
the three QoS metrics, and could therefore be preferred over
Modiﬁed Largest Weighted Delay First, Proportion Fair, and
Max Rate schedulers, which can not simultaneously satisfy all
the three QoS metrics.
Index Terms—Proportion Fair, Max Rate, MLWDF, HARQ,
Throughput, Fairness, PLR
I. INTRODUCTION
Orthogonal Frequency Division Multiple Access (OFDMA)
technology enables frequency agile resource allocation where
a set of sub-carriers can be allocated to a user terminal
based on the scheduling logic used. Hybrid Automatic Repeat
Request (HARQ) is essentially a combination of Forward Error
Correction (FEC) with Automatic Retransmission Request
(ARQ). The Third generation partnership project Long term
evolution (3GPPLTE) uses OFDM with link adaptation and
HARQ techniques to enable low packet error rate. Therefore,
it is essential to have a HARQ packet scheduler. In some of
the early work on wireless packet schedulers, errors in wire-
less transmission have not been considered. However, unless
HARQ attempts are given some priority by the schedular, it is
well known that overall performance of the application would
suffer [1], [2].
The Max Rate rule schedules those user whose channel
condition (In interference limited deployment typical in re-
use 1 OFDMA cellular system, it is the post processing
Signal to Interference Noise Ratio that is used in deciding
which user gets scheduled. For brevity, we refer this here
simply as channel condition.) is better than the other users
and thereby maximizes the throughput. A user whose channel
condition is bad, gets scheduled rarely and thus Max Rate
does not guarantee fairness. To increase the Fairness among
users Proportional Fair (PF) scheduler [3] was proposed. It
schedules the user by comparing the ratio of current data
rate to average data rate of a particular user so that fairness
can be addressed. Along with fairness and throughput, packet
delay is a key parameter to measure the performance of highly
delay sensitive, real time application like video streaming. PF
scheduler as such does not consider packet delay. Modiﬁed
Largest Weighted Delay First (MLWDF) algorithm [4] is able
to handle delay sensitive trafﬁc well. It schedules the user by
comparing the combination of packet delay, current data rate
and average data rate in an optimal way.
In this paper, we consider all the three Quality of Service
(QoS) parameters namely: (i) packet loss rate (PLR), (ii)
fairness and (iii) sum throughput. Corresponding to the three
metrics we propose a scheduling strategy which has three
stages. From the quality of service (QoS) perspective of real
time trafﬁc, it is essential to give priority to minimize packet
loss rate (PLR), maximize fairness and maximize throughput
simultaneously that is what this 3-Stage scheduler aim to do.
The 3-Stage scheduler is compared for real time trafﬁc with
the Max Rate, the PF, and the MLWDF algorithm. Using
simulation results we show that the proposed scheduler gives
a good compromise between the three QoS metrics.
The remainder of the paper is organized as follows. In
Section 2, the LTE-like simulation model are presented that is
considered in this paper. Section 3 discusses about the 3-Stage
scheduler followed by simulation results are shown in Section
4, while conclusion are given in Section 5.
II. LTE-LIKE SIMULATION MODEL
Fig. 1. depicts the downlink frame structure LTE Standard.
On frequency axis total bandwidth is divided into N sub bands
and in time axis into transmission time interval (TTI) each with
length of 1 ms. Here 1 sub band contains 3 physical resource
208
Copyright (c) IARIA, 2012.     ISBN:  978-1-61208-203-5
ICWMC 2012 : The Eighth International Conference on Wireless and Mobile Communications

Fig. 1.
Shows OFDMA framing and channelization
block (PRB) and 1 PRB has 12 sub-carriers and 14 OFDMA
symbols. The simulation of 3-Stage, MLWDF, PF and Max
Rate have performed using seven hexagonal cells of 10 MHz
bandwidth with 50 PRBs and 2 GHz carrier frequency. There
are 3 sectors in a cell and each sector contains 10 users. Users
are uniformly located within the cell and constantly moving
at a constant speed of 8.33 Km/h in random directions. It is
assumed that each user reports its instantaneous downlink SNR
values on each PRB and at the beginning of each TTI to the
serving node. The reported instantaneous downlink SNR value
is used to determine the feasible data rate for one PRB. The
3GPP LTE Downlink system parameters are given in Table I.
An incremental redundancy HARQ protocol is used. The
HARQ process takes 2ms, i.e., 2 TTI round trip time and
maximum number of retransmission is limited to 4. It is
assumed that the scheduling interval is 1 TTI i.e. 1ms and
the number of PRBs that may be allocated to a user in each
scheduling interval is variable.
MLWDF [1], PF [4], Max Rate [4] algorithms are proposed
for the single carrier transmission. We modiﬁed these algo-
rithms to support multi-carrier transmission in the downlink
LTE system. In this simulation, retransmissions takes place
for each algorithm, if transmission of any packet fails. The
following QoS in equations (1), (2), (3) are used for perfor-
mance analysis.
Average throughput =
1
N ∗ T
PN
i=1
PT
t=1t puti(t)
(1)
PLR =
PN
i=1
PT
t=1 pdi
PN
i=1
PT
t=1 pai
(2)
Fairness = 1
N
(PN
i=1 t puti)2
PN
i=1(t puti)2
(3)
where t puti(t), pdi , pai are the throughput, total size of
discarded packets and the total size of all packets that have
TABLE I
SIMULATION PARAMETERS
Parameters
values
Carrier Frequency
2 GHz
Bandwidth
10 MHz
Number of Sub-carriers
600
Number of PRBs
50
Number of Sub-carriers per PRB
12
Slot Duration
1ms
Scheduling Time(TTI)
1ms
Number of OFDMA Symbols per Slot
14
FFT size
1024
HARQ scheme
Incremental
redundency
Maximum
Allowed
retransmission
number
4
Total number of User
210
Number of Interferer cell
2
arrived into the buffer of user i at time t respectively. T and
N are the total number of slots for which simulation has done
and total number of users respectively. Referred to [5].
III. DESCRIPTION OF 3-STAGE SCHEDULER
3-Stage scheduler divides the users into three stage based
on how close the packets are from transmission deadline.
T FTi= Time for Transmission [2] is deﬁned as the time
duration up to which packet i can stay in the buffer for
transmission. It has an integer value normalized by TTI
duration.
T FLi(n) = Time duration upto which packet is not dropped.
Equations (4) and (5) shows analytical description of T FTi
and T FLi(n).
T FTi = k ∗ T T I
(4)
T FLi(n) = T FTi − Wi(n)
(5)
Where Wi(n) is waiting time for a Head of Line (HOL)
packet in ith buffer in nth TTI and k is an integer. The
proposed 3-Stage scheduler has following steps:
Step A. Divide the users into three stages depending upon
the value of Kmax (maximum value of k among all user)
and T FLi(n) such that distribution of T FLi(n) along the
stages is in Geometrical Progression (GP). Stage 1 contains the
users whose T FLi(n) is one. Stage 2 contain the users whose
T FLi(n) value are 2, 3 or 2, 3, 4 or 2, 3, 4, 5 (depending upon
the value of kmax) and the remaining users will be in stage 3.
Distribution of users for different value of Kmax is given in
Table II, users will be distributed similarly for higher values of
Kmax. GP is used here, because it gives a good compromise
209
Copyright (c) IARIA, 2012.     ISBN:  978-1-61208-203-5
ICWMC 2012 : The Eighth International Conference on Wireless and Mobile Communications

TABLE II
DISTRIBUTION OF USERS BASED ON TFL
TFL
TFL
TFL
stage1
1
1
1
stage2
2, 3
2, 3, 4
2, 3, 4, 5
stage3
4, 5, 6, 7
5, 6....13
6, 7...21
Kmax ≤7
8≤Kmax
≤13
14≤Kmax
≤21
among the three QoS metrics as shown by extensive simulation
results, some of which are shown in section IV . Instead of GP,
other progressions can be used to divide the users into stages
depending on the QoS requirement. For example if we keep
more number of users in the third stage compared to what GP
provides, it will give more throughput than GP gives. However
this increase will come at the cost of higher packet loss rate
and degraded fairness. Similarly if we put more number of
users into second stage performance of fairness may improve
at the cost of degradation of the performance of packet loss
rate and throughput.
In summary the purpose of the three stages are: -
Stage 1: To minimize the Packet Loss Rate.
Stage 2: To maximize the Fairness.
Stage 3: To maximize the Throughput.
From the QoS perspective of real time trafﬁc it is essential
to give priority to minimize the packet loss rate, maximize the
Fairness and maximize the throughput respectively therefore
we schedule stages 1, 2 and 3 respectively.
Step B. Schedule the users of stage 1:- Consider the
channel matrix, where each column corresponds to the
different user of stage 1 and each row corresponds to a sub
band. Cij denotes the number of bits can be transmitted
through sub band i to the user j. Depending upon the
modulation and coding scheme levels, Cij will have N
different Number of bits values i.e. NOB1, NOB2, NOB3,
NOB4.........NOBN. Deﬁne coordinate of each Cij which
is deﬁned as (si, uj) and coordinate group of NOBi i.e
CGNOBi which contains coordinate of all Cij which is equal
to NOBi. Assuming NOB1 < NOB2 < NOB3 < NOB4
<.........< NOBN, then to improve QoS CGNOBN must be
allocated prior to the CGNOBN−1 and so on. Among the
Cij in coordinate group CGNOBi, Cij is allocated when
its coordinate is unique in that particular group. Otherwise
choose an unique combination from all possible combinations
such that sum throughput is maximized and allocate them.
Here in Table III NOB3 is 7, NOB2 is 6 and so on.
Coordinate Groups are deﬁned by
CGNOB3= {(s1,u3),(s2,u1),(s3,u1)}
CGNOB2= {(s1,u2),(s2,u2),(s3,u3)}
To minimize the PLR CGNOB3 should be allocated ﬁrst.
Since only coordinate(s1,u3) is unique so subband 1 is
TABLE III
EXAMPLE OF A SUB-BAND ALLOCATING IN STAGE 1
user 1
user 2
user 3
subband 1
5
6
7
subband 2
7
6
5
subband 3
7
5
6
Allocated
band
Subband
3
Subband
2
Subband
1
allocated to user 3. Now user 1 can be served by subband 2
or subband 3 so following are the possible combinations
combination 1: (s2,u1) + (s3,u2) = 12
combination 2: (s2,u2) + (s3,u1) = 13
choose combination 2 since sum throughput is maximum and
allocate them.
Step C. Schedule the users of stage 2:-
Schedule the users of stage 2 when its Cij is more then Cavg
in round robin fashion so that fairness can be maximized.
Cavg =
1
M∗N
PM
i=1
PN
j=1 Cij
Where N = no of users in stage 2 and
M = number of sub bands left.
Step D. Schedule the users of stage 3:
Among all the users of stage 3 schedule the user whose Cij
value is equal to NOBN. There may be a case where a
user contains more than one Cij, whose value is equal to
NOBN in that case we schedule the user more than one time
provided available bits for transmission are sufﬁcient. Again
we schedule the user whose Cij value is equal to NOBN−1
followed by NOBN and so on. This process will continue till
sub-band left.
IV. SIMULATION RESULT AND DISCUSSION
We simulate downlink physical layer Long Term Evolution
release 8 [6] along with the parameter mentioned in Section
II. Four types of real-time trafﬁc sources with different delay
constraints are used, as given in Table IV. Fig. 2. shows PLR
performance of 3-Stage, PF, MLWDF and Max Rate with the
increasing number of arrival bits. 3-Stage scheduler improves
PLR performance by giving more priorities to the HARQ users
and the users closing to transmission deadline. A signiﬁcant
degradation of the PLR performance in the Max Rate and PF
are because they do not consider delay of packets. As MLWDF
consider waiting time of packet so PLR of MLWDF is just
followed by 3-Stage scheduler.
Fig. 3. shows average user throughput of the 3-Stage, PF,
MLWDF, and Max Rate. From the ﬁgure, it can be observed
that among the PF, MLWDF, Max Rate, and 3-Stage, Max Rate
achieves the highest throughput as it consider only channel
210
Copyright (c) IARIA, 2012.     ISBN:  978-1-61208-203-5
ICWMC 2012 : The Eighth International Conference on Wireless and Mobile Communications

condition. The proposed scheduler gives throughput slightly
lower than Max Rate but higher than PF. MLWDF returns the
lowest throughput as it consider both channel condition and
waiting time of a packet however all four schedulers achieve
almost same throughput performance at a higher number of
arrival bits per frame.
The fairness performance of each scheduling algorithm is
shown in Fig. 4. It can be observed that the 3-Stage scheduler
achieves a fairness almost equal to that of PF and MLWDF.
The Max Rate returns the lowest fairness as it only considers
the best channel condition for the scheduling decision.
TABLE IV
TFT FOR FOUR REAL-TIME TRAFFIC SOURCES
Service
Trafﬁc class
TFT
Voice
Conversational
200ms
Gaming
Conversational
400ms
Audio streaming
Streaming
1500ms
Video streaming
Streaming
2000ms
0
1000
2000
3000
4000
5000
6000
7000
8000
9000
10000
0.01
0.012
0.014
0.016
0.018
0.02
0.022
0.024
0.026
0.028
0.03
Number of arrival bit per frame
Packet loss rate
PLR OF DIFFERENT ALGORITHM
 
 
PF
3 STAGE
MAX RATE
MLWDF
Fig. 2.
Shows plr vs. no of arrival bit per frame.
V. CONCLUSION
This paper investigated the performance of proposed al-
gorithm along with well known scheduling algorithm in the
downlink 3GPP LTE system. Using the TFL parameter, an
efﬁcient scheduling scheme that always prioritizes urgent real
time trafﬁc users and HARQ users in OFDMA environment
has developed. Simulation results have shown that the pro-
posed scheduler scheme gives a good compromise among the
three QoS metrics.
2000
2200
2400
2600
2800
3000
3200
3400
1600
1800
2000
2200
2400
2600
2800
3000
3200
Number of arrival bit per frame
Throughput
THROUGHPUT OF DIFFERENT ALGORITHM
 
 
PF
3STAGE
MAXRATE
MLWDF
2200
2300
2400
2500
2000
2050
2100
2150
2200
 
 
Fig. 3.
Shows Average throughput vs. no of arrival bit per frame.
1600
1800
2000
2200
2400
2600
2800
3000
3200
3400
0.915
0.92
0.925
0.93
0.935
0.94
0.945
0.95
Number of arrival bit per frame
Fairness
FAIRNESS OF DIFFERENT ALGORITHM
 
 
PF
3 STAGE
BESTBAND
MLWDF
Fig. 4.
Shows fairness vs. no of arrival bit per frame.
REFERENCES
[1] M. Andrews, K. Kumaran, K. Ramanan, A. Stolyar, P. Whiting, and
R. Vijayakumar, “Providing quality of service over a shared wireless link,”
IEEE Communications Magazine, vol. 39, no. 2, pp. 150–154, feb 2001.
[2] J. Park, S. Hwang, and H. Cho, “A packet scheduling scheme to support
real-time trafﬁc in OFDMA systems,” in IEEE 65th Vehicular Technology
Conference, 2007. VTC2007-Spring.
IEEE, 2007, pp. 2766–2770.
[3] A. Jalali, R. Padovani, and R. Pankaj, “Data throughput of CDMA-HDR a
high efﬁciency-high data rate personal communication wireless system,”
in IEEE 51st Vehicular Technology Conference Proceedings, 2000. VTC
2000-Spring Tokyo, vol. 3.
IEEE, 2000, pp. 1854–1858.
[4] H. Ramli, R. Basukala, K. Sandrasegaran, and R. Patachaianand, “Per-
formance of well known packet scheduling algorithms in the downlink
3GPP LTE system,” in 2009 IEEE 9th Malaysia International Conference
on Communications (MICC).
IEEE, 2009, pp. 815–820.
[5] H. Ramli, K. Sandrasegaran, R. Basukala, and T. Afrin, “HARQ aware
scheduling algorithm for the downlink LTE system,” in 2011 4th Inter-
national Conference on Modeling, Simulation and Applied Optimization
(ICMSAO).
IEEE, 2011, pp. 1–4.
[6] Long Term Evolution Release 8, “www.3gpp.org/LTE.”
211
Copyright (c) IARIA, 2012.     ISBN:  978-1-61208-203-5
ICWMC 2012 : The Eighth International Conference on Wireless and Mobile Communications

