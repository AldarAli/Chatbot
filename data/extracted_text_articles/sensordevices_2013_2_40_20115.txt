Design of Indirect Time-of-Flight Based Lidar for Precise Three-Dimensional 
Measurement Under Various Reflection Conditions 
 
Junhwan Jang, Sungui Hwnag, Kyihwan Park  
School of Mechatronics 
Gwangju Institute of Science and Technology 
Gwangju, South Korea 
e-mail: khpark@gist.ac.kr 
 
 
 
Abstract—In the indirect TOF method, the distance traveled by 
light can be obtained on the basis of the phase difference 
between the reference signal and the measured signal. To 
utilize the lidar as a distance measurement sensor, measuring 
distance, resolution, and accuracy of the lidar should be 
considered most importantly. Optical system of the lidar 
should be optimally designed since a high intensity of 
measured signal increases the measuring distance and 
accuracy. Furthermore, electronic circuit design is also 
considered importantly in addition to the optical system design 
because the varying signal of the photoelectric current for the 
measuring distance can cause an inaccurate result of distance 
measurement. Different amplitudes of the signals due to 
different distance and object reflectivity cause additional 
electronic phase delays in the demodulation circuit in addition 
to the phase delay corresponding to the distance to be 
measured because of a constant gain bandwidth product 
limitation. In this study, optical system design, signal 
processing, and intensity control method are proposed, which 
can be applied to the lidar to achieve high resolution and 
linearity performance.  
 
Keywords- Time-of-flight; Lidar;  Intensity control; 
 
I. 
 INTRODUCTION 
Time-of-flight(TOF) based lidars are widely used in 
engineering fields such as robot navigation, automatic guided 
vehicle, and three-dimensional measurement applications in 
several industries because they have the advantages of non-
contact, wide range, and high precision measurement [1].  
Time-of-flight(TOF) methods are classified into direct and 
indirect TOF methods. For the distance measurement, the 
direct TOF method directly measures time interval between 
the emitted and detected signals, which are very short pulsed 
lights [2][3]. Thus, it requires techniques for generating the 
short pulsed light and time resolution of picoseconds for 
obtaining a millimeter resolution, which is hard to be 
implemented at a low cost. In the indirect TOF method, the 
distance can be determined by using a phase shift of a 
modulated light with either a sinusoidal signal or a pulsed 
signal [4][5]. Since the time interval can be obtained by the 
phase difference, it does not need techniques that the direct 
TOF method requires. Therefore, indirect TOF based sensors 
recently receive attention as 3D imaging systems due to its 
advantages of compactness and low cost with reasonable 
accuracy [1]. 
In the indirect TOF method, the distance traveled by light 
can be obtained on the basis of the phase difference between 
the reference signal and the measured signal. The modulation 
frequency of the signal is inversely proportional to the 
distance. Therefore, maximum measurable distance and 
distance resolution are determined by the modulation 
frequency. In other words, when a higher modulation 
frequency is used, a shorter measurable distance and a higher 
distance resolution can be obtained [6]. 
To utilize the lidar as a distance measurement sensor, 
measuring distance, resolution, and accuracy of the lidar 
should be considered most importantly. Optical system of the 
lidar should be optimally designed since a high intensity of 
measured signal increases the measuring distance and 
accuracy. Therefore, it is important to understand how the 
optical component layout affects the system performances. 
Optical component design for co-axial and bi-axial 
mechanisms are considered in this work.  Furthermore, 
electronic circuit design is also considered importantly in 
addition to the optical system design because the varying 
signal of the photoelectric current for the measuring distance 
can cause an inaccurate result of distance measurement. 
When different colored object are measured, the intensities 
of the measured signals vary greatly even at the same 
distance. The different amplitudes of the signals due to 
different distance and object reflectivity cause additional 
electronic phase delays in the phase demodulation circuit in 
addition to the phase delay corresponding to the distance to 
be measured because of a constant gain bandwidth product 
limitation. Therefore, it is important to maintain the signal 
amplitude to be constant. In this paper, optical system design, 
electronic signal processing, and intensity control method are 
proposed, which can be applied to the lidar to achieve high 
resolution and linearity performance. 
 
 
25
Copyright (c) IARIA, 2013.     ISBN:  978-1-61208-297-4
SENSORDEVICES 2013 : The Fourth International Conference on Sensor Device Technologies and Applications

II. 
OPERATING PRINCIPLE 
 
In the indirect TOF method, the distance that light travels 
can be determined using the phase difference between the 
reference and measured signals, as shown in Fig. 1. 
 
 
 
Figure 1. System configuration of the indirect TOF based lidar 
 
When light travels a distance d, light reflected from an 
object is delayed by the phase, φ. The phase difference 
between the reference and measured signals is proportional 
to the distance traveled. When the modulated frequency of 
the reference signal is f, the distance d is obtained in terms of 
phase φ and f as 
d = c
2f  • φ
2π                                (1) 
where c (=3 x 108 m/s) is the speed of light. According to 
Eq. (1), the distance resolution is related to the modulated 
frequency. Hence, the higher the modulated frequency used, 
the better the distance resolution that can be obtained. 
 
III. 
THE INDIRECT TOF BASED LIDAR DEVELOPED 
A. Optical system 
To have a high accuracy of distance using the lidar, a 
high intensity measured signal should be received because 
the intensity determines the signal to noise ratio. Hence, 
optical design is one of the most important issues to be 
considered for design of the lidar for a given mechanical and 
electronic specifications. However, expanding the size of 
optical components to obtain high intensity is a limited way 
due 
to 
compact 
system 
configuration 
and 
various 
applications. In this section, optical system designs are 
presented according to detection range and application area.   
 
 
(a)                                                      (b) 
Figure 2. Optical system layouts of (a) the co-axial and (b) bi-axial types 
Typically, there are two types of optical systems, co-axial 
and bi-axial types. Figure 2 shows the configuration of the 
co-axial and bi-axial type optical systems. In case of the co-
axial type, all optical components, the detector, the 
condenser lens and the emitter, are on the same optical axis. 
Figure 2 also shows the results of the ray tracing of a 
detected beam spot at the focal position [7]. A Ø 50 
condenser lens with a focal length of 50 mm was used. As 
shown in Fig. 2 (a), from the short range to the long range, 
all reflected signals can be focused on the detector. Hence, 
the co-axial type optical system is usually utilized with a 
mirror scanner for 3D applications.  
However, the emitter part can make a shade to the focal 
plane by blocking the center of the condenser lens. Thus, 
optical power loss is caused by the shadow effect, which 
decreases the signal to noise ratio and results in a low 
distance accuracy. In addition, the back beam from the 
scanning mirror causes an optical crosstalk problem. When 
there are crosstalk problems, the sensor performance is easily 
deteriorated. For example, when the reflected signal from the 
object is weaker than the optical crosstalk signal from the 
scanning mirror, the distance cannot be obtained. Therefore, 
it is important to design the emitter part as small as possible 
without the optical crosstalk problem.  
In order to solve the shadow effect of the coaxial type, a 
bi-axial type optical system is considered. As shown in Fig. 2 
(b), the emitter part is located next to the condenser lens. As 
a result, the problem of intensity loss due to the shadow 
effect is removed. However, the returning beams are focused 
not in the detector center in short ranges as shown in Fig. 2 
(b) because the condenser lens is not aligned with the emitter. 
The deviation from the center is more severe when a shorter 
distance is measured. Therefore, a bigger detector area is 
required to use for a short distance measurement. This bi-
axial type optical system is more suitable for long distance 
detection since it can receive sufficient reflected beam 
intensity compared to the coaxial type optical system. 
However, it has a disadvantage that its structure becomes 
large in size when a rotating scanner should be used for 2D 
and 3D applications because the mirror scanner should be at 
least twice larger than that used in the co-axial type due to 
the fact that the mirror scanner should cover a cross section 
areas of the emitted part and condenser lens as well. As an 
alternative, a gimbal type scanner should be used to move 
the entire optical system for scanning, which makes the 
system heavy and large. Figure 3 shows the distance 
accuracy, obtained from each configuration. The experiment 
was performed with 40MHz modulation frequency, Ø 50 
condenser lens, and a white object. The bi-axial type optical 
system, which has no intensity loss, is advantageous for 
long range detection. However, when using the bi-axial type 
optical system, the short range detection is difficult, and the 
system becomes complicated. Hence, it is necessary to 
select an appropriate optical system according to detection 
range and application area. 
 
26
Copyright (c) IARIA, 2013.     ISBN:  978-1-61208-297-4
SENSORDEVICES 2013 : The Fourth International Conference on Sensor Device Technologies and Applications

 
 
Figure 3. Distance accuracy according to optical system types 
 
B. Demodulation processing 
 
If assuming that a laser diode is modulated with a 
frequency of ωsig and an amplitude of Vr. A signal emitted 
from the laser diode, Vref can then be described as 
 
Vref = Vr sin ωsig t.                            (2) 
 
A signal which is reflected from an arbitrary distance and 
measured by the photodetector, Vmea becomes 
 
Vmea = V
~
m sin (ωsig t +φd).                    (3) 
 
Here, φd represents the phase difference, which includes 
the distance information. In addition, V
~
m  is the amplitude of 
the measured signal, which varies due to the surface 
reflectivity and measured distance. Thus, using Eq. (1), 
measured distance can be determined by means of phase 
difference φd. Since high frequency signal gives better 
resolution according to Eq. (1), usually highly modulated 
frequency is used as ωsig for high performance of the lidar.  
Several demodulation methods have been proposed to 
obtain φd, such as a direct in-phase and quadrature 
demodulation [8], under-sampling [9], and multiple step 
phase demodulation methods [10]. In this study, a multiple-
step phase demodulation method is used. In this method, 
another reference signal is needed to shift the frequency ωsig 
to an intermediate frequency, ωi. A demodulation reference 
signal has an amplitude of Vd and a slightly different 
modulation frequency, ωd. Then, the demodulation reference 
signal is described as  
 
Vdem = Vd sin ωd t.                            (4) 
 
By mixing the measured signal and the demodulation 
reference signal, the frequency-shifted signal Vi is obtained 
as 
 
Vi = V
~
m sin (ωsig t +φd) • Vd sin ωd t 
    = 1
2 V
~
m Vd cos(ωi t +φd) – 1
2 V
~
m Vd cos(ωsig t+ωd t+φd). (5) 
 
Where ωi = ωsig - ωd . The second term of the second row in 
Eq. (5) can be removed by using a low pass filter. 
Consequently, the filtered output is represented as 
 
(Vi)F = 1
2 V
~
m Vd cos (ωi t +φd)                   (6) 
 
In addition, a reference signal for obtaining φd can be 
defined as (Vi)R = 1
2 VrVd cos (ωi t) by using the same 
processing. Then, the phase difference can be determined by 
means of comparison of (Vi)F with (Vi)R . 
 
C. Phase detection with the time counting method 
 
 
Figure 4. (a) (Vi)R and (Vi)F  (b) Time counting processing of VP  
 
The obtained phase difference, φd should be changed to 
analog or digital signals to determine the measured distance 
via signal processing. The reference and measured signals 
are first converted to square waves as shown in Fig. 4 (a). 
Then, a new signal Vp, which is phase difference of two 
signals, can be obtained by commercial phase detectors. In 
this study, we used the time counting method[6] because the 
phase difference can be directly obtained as digital values 
without the noise effect. In the time counting method, 
converted square waves are considered as digital signals. In 
addition, pulse width of Vp is counted by a digital time 
counting circuit with a high frequency signal as shown Fig. 4 
(b). Since the pulse width of Vp is directly measured by a 
digital processor, the phase difference can be converted to a 
digital signal without other processing. Moreover, it is not 
affected by pulse noises because it only measures time. 
Therefore, the time-counting method is capable of high-
resolution and high-speed performance.  
 
D. Intensity control 
In the demodulation process for obtaining φd by using an 
analog circuit, many electronic components are implemented 
for mixing, filtering, amplification, and other types of 
27
Copyright (c) IARIA, 2013.     ISBN:  978-1-61208-297-4
SENSORDEVICES 2013 : The Fourth International Conference on Sensor Device Technologies and Applications

processing. Since the amplitude of measured signal, V
~
m has a 
wide dynamic range according to distance changes and 
varying object reflectivity, an additional electronic phase 
delay φ’(V
~
m) is generated in the demodulation processing. In 
other words, distance errors are caused due to distance 
changes and varying object reflectivity. 
There are primarily two reasons for the additional phase 
delay. The first reason is due to gain bandwidth product 
limitation of electronic components because V
~
m  has different 
voltage inputs according to different distances and object 
reflectivity. The second reason is a walk error. When 
measured signal is converted to a square wave digitally by 
comparing its amplitude with fixed positive and negative 
threshold values, additional phase delay,  φ’(V
~
m) is generated 
according to the varying amplitude in addition to the phase 
delay corresponding to the distance to be measured. Hence, 
the real demodulated signal,  (Vi)’F  is 
 
(Vi)’F = 1
2 V
~
m Vd cos (ωi t + φd + φ’(V
~
m) )            (7) 
 
From the Eq. (7), we know that the phase delayof the 
measured distance becomes different at even the same 
distance when the reflectivity varies. It is a problem to be 
considered for the linearity performance of the lidar since a 
phase error of 1° signifies a 10 mm distance error when 40 
MHz frequency is used for the modulation signal, as 
calculated from Eq. (1). Thus, the electronic phase delay, 
which causes distance errors must be reduced as much as 
possible. 
 
 
Figure 5. A block diagram of the intensity control method 
 
To reduce the electronic phase delay, an intensity control 
method is proposed as shown in Fig. 5 [11]. Since the cause 
of distance errors is basically the varying amplitude of 
measured signal, in the proposed method, the amplitude of 
the modulated signal, Vr is controlled by means of a 
feedback signal to maintain the amplitude of measured signal 
to be constant. When the amplitude of measured signal 
reflected from an object becomes smaller than the reference 
signal of the controller, Vr is increased via the feedback 
control in order to keep the amplitude of the measured signal 
constant, and vice versa. Therefore, a constant amplitude, 
Vcont. can be obtained at the detector regardless of the 
distance change and object reflectivity.  
The demodulated signal in the proposed method is then 
represented as 
 
{(Vi)’F}controlled= Vcont. cos (ωi t + φd + φ’(Vm) )        (8) 
 
As indicated in Eq. (8), although a phase delay, φ’(Vm)  is 
still generated during the demodulation processing, it is 
constant. Thus, the phase delay does not affect the measured 
distance because it can be eliminated by shifting the phase of 
the reference signal, using a known distance.  
 
IV. 
EXPERIMENTAL RESULTS 
For the verification of the performance of the intensity 
control method, an object located at 3 m was measured with 
the modulation signal of 40 MHz as shown in Fig. 6.      
 
 (a) 
 
(b)                                                       (c) 
Figure 6. (a) A measured object (b) the non-contolled scanning result (c) 
the controlled scanning result 
 
28
Copyright (c) IARIA, 2013.     ISBN:  978-1-61208-297-4
SENSORDEVICES 2013 : The Fourth International Conference on Sensor Device Technologies and Applications

Clear difference between non-controlled and controlled 
results are appeared at short distance because deviation of 
measured intensity becomes larger when the measured 
distance get shorter based on the inverse square law of 
distance[1]. Since the measured intensity also changes 
according to the laser beam incident angle on the object, the 
non-controlled scanning result shows shape distortion due to 
distance errors, caused by the varying amplitude of measured 
signal, even though the object color is the same. On the other 
hand, the controlled scanning result shows that the object 
was scanned without the shape distortion.  
 
 
 
Figure 7. Scanning result for 3D measurement application 
 
For the verification of 3D measurement application, 
various objects were scanned with the modulation frequency 
of 20 MHz and a condenser lens of Ø 50 as shown in Fig. 7 
In addition, intensity control was applied for the precise 
measurement. As a result, the scanning results shows that 
objects were measured without shape distortions although 
scanned objects have different colors and diverse shapes. 
 
V. 
CONCLUSION 
For precise 3D measurement using the lidar, accuracy, 
resolution and linearity performances should be considered. 
In this study, optical system design, signal processing and 
intensity control method were proposed, which can be 
applied to the indirect TOF based lidar for high accuracy, 
resolution and linearity performance. 
Optical system is one of the most important factors for the 
design of the lidar. In this study, appropriate optical systems 
were considered according to demanded detection range and 
distance resolution as shown in experimental results.  
Demodulation processing and phase detection methods 
were presented for highly accurate distance measurement. 
Using the multiple step phase demodulation method, the high 
frequency modulation signal can be shifted to lower 
frequency bandwidth. It makes the signal processing easier, 
and noises are effectively removed during this processing. In 
the time counting method, analog signals, which have the 
phase information, can be directly inputted as digital signals. 
Besides, it is advantageous for noise effect because it only 
measures time interval corresponding to the phase difference. 
Therefore, these methods are reasonable for development of 
high performance lidars at a low price. 
Intensity control method was proposed to resolve non-
linearity problem caused by varying distance and object 
reflectivity. As a result, distance errors were significantly 
reduced, and we could obtain the exact 3D images without 
shape distortions. The proposed methods are expected to be 
utilized for other optical sensors as well as lidar sensors. 
 
ACKNOWLEDGMENT 
This work was supported by the National Research 
Foundation of Korea (NRF) grant funded by the Korea 
government (MEST) (No. 2011-0017876)  
 
REFERENCES 
 
[1] MC. Amann, T. Bosch, M. Lescure, R. Myllylä and M. Rioux, 
“Laser ranging: a critical review of usual techniques for 
distance measurement,” Opt. Eng. Vol. 40, No. 1, 2001, 
pp.10-19. 
[2] A. Kilpela, R. Pennala and J. Kostamovaara, “Precise pulsed 
time-of-flight laser range finder for industrial distance 
measurements,” Review of Scientific Instruments, Vol. 72, 
2001,  pp. 2197-2202. 
[3] H. Ailisto, et al., “Scannerless imaging pulsed-laser range 
finding,” Journal of Optics, Vol. 4, No. 6, 2002, pp.337-346. 
[4] P. Matteo and S. David, “Figures of Merit for Indirect Time-
of-Flight 
3D 
Cameras 
Definition 
and 
Experimental 
Evaluation,” Remote Sensing, Vol. 3, No. 11, 2011, pp.2461-
2472. 
[5] S. Bellisai, F. Guerrieri, S. Tisa, “3D ranging with a high 
speed imaging array,” Ph.D. Research in Microelectronics and 
Electronics (PRIME) Conference on, 2010, pp.1-4. 
[6] Y. Heesun, S. Hajun, P. Kyihwan, “A phase-shift laser 
scanner based on a time-counting method for high linearity 
performance,” Review of Scientific Instruments , Vol.82, 
No.7, 2011,  pp.075108-075108-4. 
[7] Warren J. Smith, “Modern Optical Engineering,” 4th ed., 
SPIE press, 2007. 
[8] Y. Heesun and P. Kyihwan, “Development of a laser range 
finder using the phase difference method,” Proceedings of 
SPIE, Vol. 6049, 2005. 
[9] S. Poujouly, B. Journet and D. Placko, “Digital laser range 
finder: phase-shift estimation by undersampling technique,” 
IECON/99 Proc. 25th IEEE, Vol. 3, 1999,  pp.1312-1317. 
[10] Y. Heesun, Y. Woosub, K. Seonggu, H. Jinpyo and P. 
Kyihwan, “A multiple phase demodulation method for high 
resolution of the laser scanner,” Review of Scientific 
Instruments, Vol. 80, 2009, pp.056106 -056106-3. 
[11] J. Junhwan, H. Sungui, P. Kyihwan, “Intensity control of a 
phase-shift based laser scanner for reducing distance errors 
caused by varying surface reflectivity,” Review of Scientific 
Instruments , Vol.82, No.12, 2011, pp.126102-126102-3. 
 
29
Copyright (c) IARIA, 2013.     ISBN:  978-1-61208-297-4
SENSORDEVICES 2013 : The Fourth International Conference on Sensor Device Technologies and Applications

