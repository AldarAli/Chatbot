Ultra-wideband Indoor Positioning Based on Triangle Midpoint 
Algorithm 
Wen Piao Lin  
Dept. of Electrical Engineering 
Chang Gung University 
Tao-Yuan, Taiwan 
 e-mail: wplin@mail.cgu.edu.tw 
Yu-Fang Hsu 
Dept. of Electronic Engineering 
Chienkuo Technology University 
Changhua, Taiwan 
e-mail: yfshi@ctu.edu.tw
 
Abstract—In this paper, we present an experimental indoor 
positioning system consisting of three anchor nodes and a tag, 
which uses a microprocessor with an ultra-wideband wireless 
transceiver device. The scheme based on the time-of-arrival 
technique and triangle midpoint algorithm provides accurate 
localization in a limited indoor area. The average localization 
error of the proposed positioning system placed in the indoor 
space of 732cm×488cm×220cm is 12.87cm. The experimental 
results demonstrated that the proposed system has the 
characteristics of high precision localization and 
less 
computation time.  
Keywords-indoor positioning; ultra-wideband (UWB); time-of-
arrival (TOA); triangle midpoint algorithm(TMA). 
I. 
 INTRODUCTION 
Many different positioning technologies are applied to 
the indoor environment for research, including Radio 
Frequency Identification Devices (RFID) [1][2], infrared 
sensors [3], Zigbee [4], Wireless Networks (Wi-Fi) [5], low 
Power Bluetooth [6] and so on. These different technologies 
are usually selected from the Received Signal Strength 
Indicator (RSSI) to achieve indoor positioning. Signals are 
relatively easy to be blocked by objects and cause poor 
penetration. They are easily affected by multiple path 
interferences, and the accuracy is mostly low. Therefore, it is 
necessary to set multiple reference points in the indoor 
environment or build the database in advance to improve the 
indoor positioning accuracy. 
Ultra-wideband (UWB) wireless transmission technology 
has excellent transmission quality in complex indoor 
environments and has the advantages of high transmission 
speed, excellent resistance to multi-path interference, low 
power, high penetration, and high time accuracy [7]-[9]. 
UWB transceiver utilizes a very short Radio Frequency (RF) 
pulse to achieve high bandwidth connections. It can execute 
an accurate measurement of time delay and distance 
difference [9][10]. Many algorithms for UWB indoor 
positioning have been proposed such as calculating the 
Time-Of-Arrival (TOA) or Time-Difference-Of-Arrival 
(TDOA) schemes [12]. From the above, it is known that 
UWB is quite suitable for indoor positioning, and the 
positioning accuracy is high, even reaching a minimum error 
of 10 cm. 
 This research mainly uses a microprocessor to control 
UWB device, and then uses TOA triangulation method, 
combined with a fast positioning Triangle Midpoint 
Algorithm (TMA) to implement an accuracy indoor 
positioning system. First, a single tag based on a single base 
station measures its positioning accuracy and Environmental 
Parameter Calibration (EPC). After that, three base stations 
are placed in the three corners of the laboratory space, and 
the distances of the tags are respectively captured to test the 
arrival time method. Finally, the test results input into 
computer to evaluate and explore the positioning accuracy 
and computation time.  
This paper is organized as follows; the indoor wireless 
positioning system is presented in Section II. Then, the UWB 
positioning scheme is briefly explained in Section III. After 
that, the implementation of the positioning algorithm is 
described in Section IV. Then, experimental setup and results 
are discussed in Section V. Finally, Section VI concludes the 
paper. 
II. 
INDOOR WIRELESS POSITIONING SYSTEM 
 
 
 
Figure. 1. Block diagram of UWB Indoor wireless location system 
 
Figure 1 is a block diagram of UWB indoor wireless 
positioning system. The green ellipse is the base station that 
is an anchor. In the middle of the figure, the gray inverted 
triangle is a tag to be located. The base station is placed in 
three corners of the experimental space and connected to the 
computer using Universal Asynchronous Receiver and 
Transmitter (UART) through a Transistor-Transistor Logic-
Universal Serial Bus (TTL-USB) module. Then the 
measured data are written in JAVA programming language 
of TOA triangulation positioning scheme, and finally by the 
coordinate system to calculate a positioning point and its 
41
Copyright (c) IARIA, 2018.     ISBN:  978-1-61208-653-8
SMART 2018 : The Seventh International Conference on Smart Cities, Systems, Devices and Technologies

error for real-time operation. The tag and anchors are 
integrated by the Arduino microprocessor with a UWB 
device (DW1000) as shown in the inset of Figure 1. The 
control program is programming in the microprocessor and 
communicates with the UWB device via the Serial Peripheral 
Interface Bus (SPIB). The base station and the tag are a 
wireless signal transmission using ultra-wideband pulses. 
 The DW1000 [13] is a single chip radio transceiver 
Integrated Circuit (IC) compliant with the IEEE 802.15.4-
2011 UWB standard. It facilitates real time location of assets 
into an accuracy of +/- 10 cm using either two-way ranging 
TOA measurements or one-way TDOA schemes. Moreover, 
DW1000 spans 6 radio frequency bands from 3.5 GHz to 6.5 
GHz and also supports data rates of 110 kbps, 850 kbps and 
6.8 Mbps. The transmitting or receiving signal for the 
DW1000 is used as a semi-directive antenna. The signal will 
be transmitted in an arc towards the antenna's facing side. 
This means that the back of the antenna has poor signal. It is 
a factor that affects the accuracy of the distance 
measurement on the anchor and needs to be taken into 
account.    
III. 
UWB POSITIONING SCHEME 
       This section describes various methods of implementing 
UWB two-way ranging scheme between two nodes. In all of 
the schemes that follow one node acts as initiator, initiating 
a range measurement, while the other node acts as a 
responder listening and responding to the initiator, and 
calculating the range.  
A. Single-sided Two-way Ranging 
Single-Sided Two-Way Ranging (SS-TWR) involves a 
simple measurement of the round trip delay of a single 
message from one node to another and a response sent back 
to the original node. The operation of SS-TWR is as shown 
in Figure 2, where Tag initiates the exchange and Anchor A 
responds to complete the exchange and each device 
precisely timestamps the transmission and reception times 
of the message frames, and so can calculate time Tround A, 
and Treply A , by simple subtraction. The resultant TOA, TprorA, 
may be estimated by the equation:  
 
                   (1) 
and then multiplied by the speed of light c can be obtained 
the distance DA between the two devices: 
 
                               (2)  
                                     
 
 
            Figure. 2. Single station SS-TWR scheme 
B. Double-sided Two-way Ranging 
Double-Sided Two-Way Ranging (DS-TWR), is an 
extension of the basic SS-TWR in which two round trip 
time measurements are used and combined to give a TOA 
result which has a reduced error even for quite long 
response delays. Figure 3 shows the DS-TWR of multiple 
stations for single tag [13]. It can be seen in the graph that 
the tag sends a poll message which is received by three 
anchors in the infrastructure who reply in successive 
responses with packets RespA, RespB and RespC after 
which the tag sends the Final message received by all three 
anchors.  This allows the tag to be located after sending only 
2 messages and receiving 3. Anchor A and the tag can 
calculate the corresponding time TpropA, and then multiplied 
by the speed of light c can be obtained the distance DA 
between the two devices: 
 
         (3) 
 
                                
                                (4) 
 
 
Figure. 3. Multiple station DS-TWR scheme 
 
Similarly, between anchor B, anchor C and the tag can 
calculate the corresponding time TprorB and TprorC, and then 
multiplied by the speed of light c can be obtained the 
distance of DB and DC between the two devices. 
IV. 
POSITIONING ALGORITHM 
      The concept of the Triangle Centroid Algorithm (TCA) 
was first proposed by Prof. Nirupama Bulusu of the 
University of Southern California [14]. The main reason is 
that if unknown nodes can receive signals from N anchor 
nodes, unknown nodes can consider as anchor nodes and the 
triangle centroid of the polygons formed by overlapping 
places [15]. However, the actual space has a high degree of 
complexity. In the real environment, the distance from the 
tag to the base station is slightly larger than the actual value. 
The circle drawn according to the TOA method not only 
intersects at one point but overlaps with the triangle area in 
the figure. Figure 4 shows the principle diagram of TCA 
where A, B, C are base stations, and T is the target tag. 
      The three-circle intersections obtained from the TOA 
method in all cases can locate in the same triangle as the 
previous section, and the target can estimate by triangle 
42
Copyright (c) IARIA, 2018.     ISBN:  978-1-61208-653-8
SMART 2018 : The Seventh International Conference on Smart Cities, Systems, Devices and Technologies

centroid algorithm. When F anchor leaves far away, the area 
of the three-circle interaction will not approximate as a 
triangle-shaped DEF. When TCA is used to estimate the 
target coordinates, the accuracy will decrease because of too 
narrow triangles. Therefore, we propose a TOA Triangle 
Midpoint Algorithm (TMA) to improve positioning 
accuracy.  
    From Figure 4, we can speculate that the tag position will 
be very close to the arc DF and arc EF so that the tag will 
fall in the upper right corner of the yellow area near the arc 
DE. Here, we propose to use the point M of the intersection 
DE as the method of positioning coordinates to improve the 
error of the TCA. 
 
 
              Figure. 4. The Principle diagram of the TCA 
 
The coordinates of D(xd, yd) shown in the Figure 3 can 
be inferred from the triangle formula 
 
 
   
             
                    (5) 
 
 
 
Similarly, the coordinates of E(xe, ye) are derived. Finally, 
we find the coordinates of the midpoint M(xm, ym) of arc DE 
as coordinates of the target after positioning: 
 
 ,  
                           (6) 
The TMA software processing flow is shown in Figure 5. 
When the base station starts up, it will enter the standby state 
and determine whether there is a message in the tag. If no 
signal is received, it will continue to standby. Otherwise, the 
base station will synchronize with the tag. After bi-
directional ranging performs after synchronization, the 
distance data is obtained. The TOA positioning calculation is 
performed using the JAVA programming language. The next 
step is to establish a coordinate system and place the three 
groups of base station positions as the center of the circle at 
the origin (0, 0), the X-axis point (X, 0) and the Y-axis point 
(0, Y). The distances measured by the three groups of base 
stations and tags plot as a radius, and then the TMA is used 
to locate and calculate the intersection points D and E 
between the origin circle and the other two circles. Second, 
calculate the midpoint M between the two points D and E, 
and finally, use M as the positioning coordinate. After 
ending the algorithm, determine if the tag is offline. If the tag 
is disconnected, the base station returns to the standby state. 
If the tag continues to transmit, the bidirectional ranging is 
continued. 
 
           
 
          
                Figure. 5. Flow chart of TMA scheme 
V. EXPERIMENTAL SETUP AND RESULTS 
In this experiment, a 12×8 coordinate system was 
established on a lab room space of 732cm×488cm×220cm by 
a 61cm×61cm square grid on the ceiling. The base station 
placed in the three corners of the lab and connected it to the 
computer, and then measure the distance of the tag 
unilaterally as shown in Figure 1. The measured distance is 
estimated by the of the computer positioning algorithm. 
Finally, the positioning error is calculated by the coordinate 
system.  
A. One-to-One Ranging Test 
One-to-one obstacle-free distance test between devices 
was first performed. The measured actual distance starts 
from 50 cm, and then an experiment is conducted every 50 
cm. The test results were recorded, and 30 test values were 
averaged as test values until the actual distance was up to 10 
m. A total of 20 one-to-one accessibility measurements are 
performed. Figure 6 is the error calculated from the one-to-
one accessibility test value versus actual value. It can be 
found that the error is less than 6% at a distance which is less 
than 6 m. The converted error is approximately 20 to 30 cm. 
When the distance is more than 6 meters, the error starts to 
increase gradually.   
 Since the one-to-one ranging distance between devices 
directly affects the positioning accuracy, we correct the 
measured values from 0.5m to 10m interval for every 0.5m. 
The value is corrected as the demarcation point between the 
43
Copyright (c) IARIA, 2018.     ISBN:  978-1-61208-653-8
SMART 2018 : The Seventh International Conference on Smart Cities, Systems, Devices and Technologies

X 
Y 
minimum value of the subsequent segment and the 
maximum value of the previous segment; for example, the 
average value of 30-data measured at distance of 6.5m is 
6.889m, and the minimum value is 6.68m. The measured 
error is 0.389m. Next, the maximum value of 30-data 
measured at distance of 6m is 6.39m. Therefore, we can 
calculate that the demarcation point will be (6.68+6.39)/2 
=6.54m. When the measured distance is greater than 6.54 m, 
the measured value must be deducted 0.389m. The error of 
the one-to-one distance test after correction is about 0.1m, 
and the accuracy is much improved. 
  
  
               Figure. 6. Calibration of localization error 
The height of the tag on the Z axis will affect the 
accuracy of the distance measurement. When the distance 
between two nodes on the XY plane is 6m, the error is 
0.082m under the height of 1m on the Z axis. And when the 
distance between two nodes is 1m, the error is 0.414m under 
the height of 1m on the Z axis. Therefore, in order to 
improve the accuracy of the three-dimension measurement, 
tag position should be as far as possible with three anchors in 
the same plane. 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
      
 
     Figure. 7. TCA localization of tag at (5, 3) 
B. TCA Localization Test       
 
Figure. 8. TCA localization of tag at (7, 5)   
 
TABLE I.  LOCALIZATION ERROR FOR VARIOUS 
ALGORITHMS 
Coordinates 
Error (cm) 
of triangle 
centroid 
algorithm 
Error(cm) 
of triangle 
midpoint 
algorithm  
Error 
(cm) of 
inner 
triangle 
centroid 
algorithm  
(1,2) 
23          
26.19 
20.22 
(3,1) 
3.31 
10.85 
10.84 
(3,6) 
24.3 
8.048 
7.88 
(5,3) 
1.92 
16.99 
14.58 
(7,3) 
19.95 
13.59 
12.11 
(7,5) 
63.68 
8.57 
8.54 
(10,7) 
188.45 
14.48 
14.48 
(11,3) 
80.49 
10.03 
9.98 
(11,5) 
145.55 
6.93 
6.93 
(12,6) 
202.96 
13 
12.92 
Average 
error (cm) 
75.36 
12.87 
11.85 
Standard 
deviation 
72.91 
5.36 
3.76 
 
We placed three base stations on the origin (0, 0), Y-
axis (0, 8), and X-axis (12, 0); the tag is placed at different 
points in the coordinates. When a positioning coordinate of 
the tag is located at (5, 3) shown in Figure 7, the calculated 
positioning coordinate after TCA execution is (4.97, 2.99). 
The error is converted to approximately 1.92 cm; however, 
when the positioning coordinate of the tag is located at (7, 5) 
shown in Figure 8, the calculated positioning coordinate after 
TCA execution is (6.43, 4.12). The actual error is converted 
to approximately 63.68 cm. Finally, when the positioning 
coordinate of the tag is located at (11, 5), the calculated 
coordinate after TCA is (9.73, 2.98). The actual error is 
converted to about 145.55 cm. From test results when the tag 
44
Copyright (c) IARIA, 2018.     ISBN:  978-1-61208-653-8
SMART 2018 : The Seventh International Conference on Smart Cities, Systems, Devices and Technologies

is located far away from the XY coordinates, the positioning 
using the TCA scheme will be invalid. The main reason is 
that the triangle completed by the TCA is too narrow, 
resulting in the measurement error is greater when the tag is 
far away from the XY coordinates. The detailed 
experimental results of 10 coordinate points by TCA scheme 
are shown in Table 1.    
C. TMA Localization Test   
To solve the problem when the tag is placed on the X 
and Y coordinates with larger values, the triangle is too 
narrow and long to decrease accuracy shown in Figure 8. 
Therefore, we propose a solution for the midpoint of the 
triangle. The intersection of the red circle and the blue circle 
and the intersection of the red circle and the green circle are 
selected, and the middle point is taken as the rear coordinate 
after positioning shown in Figure 9. This can avoid the large 
change of the blue circle and the green circle.   
                 
 
Figure. 9. TMA localization of tag at (7, 5)      
 
When a positioning coordinate of the tag is located at 
(7, 5) shown in Figure 9, the calculated positioning 
coordinate is (7.09, 5.1). The error is converted to about 
8.57 cm. When the positioning coordinate of the tag is 
located at (11, 5) shown in Figure 10, the calculated 
positioning coordinate is (11.1, 5.04), and the error is 
converted to about 6.93 cm. The detailed experimental 
results of 10 coordinate points by TMA scheme are shown 
in Table 1. 
 
 
Figure. 10. TMA localization of tag at (11, 5) 
 
D. Comparison of Algorithm 
To understand the performance of proposed TMA, we 
write a computer program to compare localization error for 
various algorithms. The Inner Triangle Centroid Algorithm 
(ITCA) [16] published by Nantong University of China.  
The comparison error is the distance between the 
coordinates of the tag calculated by each algorithm and the 
actual position of the target. A total of ten points in the 
ordinates take for ranging experiments. Finally, the average 
error and standard deviation figure out. It can be seen from 
Table 1 that the accuracy of the ITCA is the highest with an 
average error of approximately 11.848 cm. The accuracy of 
 
Figure. 11. Computation time for different algorithms 
45
Copyright (c) IARIA, 2018.     ISBN:  978-1-61208-653-8
SMART 2018 : The Seventh International Conference on Smart Cities, Systems, Devices and Technologies

TMA is slightly lower than that of the ITCA. The average 
error is about 12.869 cm. Moreover, the TCA performs well 
in some coordinates at the positioning (3, 1) and positioning 
(5, 3). However, when the target is farther away from the 
origin, the TCA cannot accurately locate the target. The 
average error is 75.36 cm. 
       The computation time of the algorithm at the 
positioning (11, 5) shown in Fig. 11 that the algorithm of the 
proposed TMA is simple and requires only 13.654 s for 
positioning; and the algorithm of ITCA is comparatively 
complexity, therefore, takes 33.28 s to execute it once. It 
can be seen that the accuracy of proposed algorithm is very 
high. At the same time, the simple calculation process can 
be reduced the computation time.  
VI. 
CONCLUSION 
This study experimented and demonstrated a high-
precision indoor positioning system based on time-of-arrival 
technique and triangle midpoint localization algorithm in a 
limited indoor space. We characterized existing ultra-
wideband localization algorithm schemes and explored a 
high-accuracy algorithm method. According to experimental 
results that the accuracy of the one-to-one ranging between 
the anchor and a tag is almost within 10 cm. Moreover, the 
average error of the ultra-wideband positioning systems is 
about 12.87 cm to use the triangle midpoint localization 
algorithm in a laboratory space of 732cm×488cm×220cm. 
Finally, we also compare the execution time of various 
positioning algorithms. The experimented results show that 
the proposed algorithm has a simple calculation process 
which can reduce the computation time and reach a real-time 
process.  
  The security aspects in the positioning can be treated at 
the positioning algorithm. Cryptographic techniques could be 
used for improving the security and privacy of location 
information in the actual applications. This issue still largely 
lacks sufficient solutions and can be expected as a future 
work item.  
REFERENCES 
[1] X. Liu, M. Wen, G. Qin, and R. Liu, “LANDMARC with 
improved k-nearest algorithm for RFID location system”, IEEE 
International Conference on Computer and Communications, pp. 
2569-2572, 2016. 
[2] S. Sahin, H. Ozcan, and K. Kucuk, “SmartTag: an indoor 
positioning system based on smart transmit power scheme using 
active tags”, IEEE Access, vol. 6, pp. 23500 -23510, Mar. 2018.   
[3] Y. Kobiyama, Q. Zhao, and K. Omomo “Privacy preserving 
infrared sensor array based indoor location awareness”, IEEE 
International Conference on Systems, Man, and Cybernetics,  pp. 
001353-001358, 2016. 
[4] C. H. Chu, et al., “High-accuracy indoor personnel tracking 
system with a zigbee wireless sensor network”, Seventh 
International Conference on Mobile Ad-hoc and Sensor 
Networks, pp. 398-402, 2011. 
[5] X. Ge and Z. Qu, “Optimization WIFI indoor positioning KNN 
algorithm location-based fingerprint”, 7th IEEE International 
Conference on Software Engineering and Service Science, pp. 
135-137, 2016. 
[6] M. E. Rida, F. Liu, Y. Jadi, A. Algawhari, and A. Askourih, 
“Indoor location position based on bluetooth signal  strength”, 
2nd International Conference on Information Science and 
Control Engineering, pp. 769-773, 2015. 
[7] S. Gezici, Z. Tian, and G. B. Giannakis, “Localization via ultra-
wideband radios: a look at positioning aspects for future sensor 
networks”, IEEE Signal Processing Magazine, vol. 22, no. 4, 
pp. 70-84, 2005. 
[8] D. B. Jourdan, D. Dardari, and M.Z. Win, “Position error bound 
for UWB localization in dense cluttered environments”, IEEE 
Transactions on Aerospace and Electronic Systems, vol. 44, no. 
2, pp. 613-628, 2008.  
[9] D. Munoz, F. Bouchereau, C. vargas, and R. Enriquez-Caldera, 
“Position location techniques and applications”, Academic 
Press, Elsevier Inc., 2009. 
[10] S. Gezici, et al., “Localization via ultra-wideband radios: a look 
at positioning aspects for future sensor networks”, IEEE 
Signal Processing Magazine, vol. 22, no. 4, pp. 70–84, 2005. 
[11] C. Falsi, D. Dardari, L. Mucchi, and M. Win, “Time of arrival 
estimation for UWB localizers in realistic environments”, 
Journal on Applied Signal Processing, pp. 152–152, 2006. 
[12] M. M. Saad, C. J. Bleakley, M. Walsh, and T. Ye, “High 
accuracy location estimation for a mobile tag using one-way 
UWB signaling”, Ubiquitous Positioning, Indoor Navigation, 
and Location Based Service, pp.1-8, 2012. 
[13] DW1000 User Manual, DecaWave Ltd, Dublin, version 2.05, 
2015. 
[14] N. Bulusu, J. Heidemann, and D. Estrin, “GPS-less Low cost 
outdoor localization for very small devices”, IEEE Personal 
Communications Magazine, vol.7, no.5, pp.28-34, 2000. 
[15] Z.-M. Wang and Y. Zheng, “The study of the weighted 
centroid localization algorithm based on RSSI”, International 
Conference on Wireless Communication and Sensor Network, 
pp. 276-279, Dec. 2014. 
 [16] W. Pei, J. Ping, J. He, and H. Zhang, “Ultra-wideband indoor 
localization based on inner triangle centroid algorithm”, J. of 
Computer Applications, vol. 37, no. 1 pp. 289-293, 2017. 
 
 
                                                                                   
 
46
Copyright (c) IARIA, 2018.     ISBN:  978-1-61208-653-8
SMART 2018 : The Seventh International Conference on Smart Cities, Systems, Devices and Technologies

