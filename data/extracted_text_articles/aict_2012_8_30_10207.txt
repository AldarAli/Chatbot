Correlated M/G/1 Queue modelling of  Jitter  Buffer 
in TDMoIP
Usha Rani Seshasayee and Manivasakan Rathinam
Department of Electrical Engineering
Indian Institute of Technology Madras
Chennai-600 036, India.
e-mail: ee08d001, rmani@ee.iitm.ac.in
Abstract— Time Division Multiplexing over Internet Protocol 
(TDMoIP) is a pseudowire technology for emulating TDM 
circuits over Internet Protocol (IP) networks. In such 
networks, timing and synchronization plays a key role in 
achieving the required jitter in terms of variance of 
interdeparture interval. A jitter buffer is used at the receiver, 
to circumvent the impairment of the packet networks: delay, 
jitter and loss. But, out of these, delay and loss can’t be 
compensated for, while QoS in IP networks is used to minimize 
them. The jitter (or variance of packet delay) can be reduced to 
a tolerable level at the receiving Inter Working Function. A 
tradeoff between delay and jitter is required to achieve the 
desired jitter. This paper presents the condition under which 
the jitter buffer at the receiver is to be operated for minimum 
output variance in a TDMoIP framework, to achieve minimum 
slip rate and thus better voice quality. The receiver jitter 
buffer is modeled as a correlated M/G/1 queueing system with 
EARMA correlations between the interarrival and the service 
times. The motivation for the above correlation structure is 
that, given the correlations within the service intervals, the 
EARMA correlation results in reduction of variance in the 
interdeparture interval. This is a step towards achieving CBR 
upstream. The key advantage of using EARMA correlation is 
that the analysis of such a correlated queue is analytically 
tractable. The variance of the interdeparture times of the 
above queue is presented. The analysis of the departure 
process, the waiting times of incoming packets of this 
correlated queue and the relevant simulations show that if the 
variance of the interdeparture time process constituting output 
TDM stream is to be less than that of the interarrival time 
process of the jitter buffer, which is modeled as M/G/1 queue, 
then the mean waiting time of the packets in the jitter buffer 
would be greater than that of independent (M/M/1) case. The 
values of the parameters of the M/G/1 queue which minimizes 
the variance of interdeparture interval are identified. Our 
study also included a G/G/1 queue in which interarrivals are 
also correlated.
Extensive simulations demonstrate our 
analytical results.
Keywords-TDMoIP; Jitter; Correlated queue.
I.
INTRODUCTION 
Time Division Multiplexing (TDM) circuits have been 
the backbone of voice communications over the past several 
decades. TDM is a reliable, hard partitioned circuit switched 
technology and offers low delay services for real time 
interactive digital telephony. But, the bandwidth is used 
inefficiently in TDM. For efficient bandwidth utilization, 
there has evolved a ‘converged’ network catering to all 
services that is packet based. In such a network, digitized 
voice is carried over packet switched infrastructure. The 
transition from circuit switched to packet switched would 
take place in a phased manner, as legacy networks could not 
be replaced overnight. Industries and academia are trying to 
provide solution to this as TDM over Packet Switched 
Network 
infrastructure. 
In 
this 
work, 
we 
address 
synchronization in Time Division Multiplexing over Internet 
Protocol (TDMoIP).
Time Division Multiplexing over Internet Protocol [1, 2, 
3] is a technology wherein a logical circuit is realized in an 
IP network, which links two TDM islands. The TDM traffic 
at the transmitter is packetized into constant bit sized frames 
and transmitted across an IP network. When the packet 
carrying the TDM payload traverses the IP network, it 
experiences random delay due to the queueing at the 
intermediate routers. It is because of this, that the packets at 
the receiver arrive randomly, an effect called as packet delay 
variation/jitter. To compensate for this, jitter buffer of large 
enough size is used. A mismatch between the read and the 
write clocks at the input and the output of this buffer, due to 
large delay variation will cause overflow or underflow of the 
jitter buffer. Such clock mismatch can lead to observable 
defects on the end service, e.g. frame slips when 
interworking with existing PSTN and narrowband ISDN (N-
ISDN) networks [2]. Synchronization in the data link layer of 
the ISO stack is therefore an important issue in such 
networks.
The area of timing and synchronization is well 
researched. Clock recovery schemes can be categorized into 
synchronous and asynchronous. In case of synchronous 
schemes [4], the sender delivers via the outgoing stream, the 
information on the frequency difference between a source 
clock and reference clock, which is generated out of a 
common clock available to both sender and the receiver. The 
original source clock is recovered using this frequency 
difference. Asynchronous schemes recover the source clock 
from one of the following: buffer level [5], time difference of 
arrival of packets [2]. Hybrid techniques which combine any
191
Copyright (c) IARIA, 2012.     ISBN:  978-1-61208-199-1
AICT 2012 : The Eighth Advanced International Conference on Telecommunications

Figure 1. A conventional model for clock recovery for TDMoIP
of two methods have also been studied [6]. All of the above 
schemes attempt to recover the source clock in the physical 
layer. For achieving synchronization at the data link layer of 
the ISO stack, in this paper, we use [7] a queueing model, 
where frames arriving from the transmitter are queued in the 
jitter buffer and served such that the variance of the 
interdeparture process of the outgoing frame stream is 
minimum.
The rest of the paper is organized as follows. Section 2 
briefly describes conventional and proposed model for 
TDMoIP. Section 3 discusses the proposed model in detail. 
An analytical expression for variance of the departure 
process at the receiver is also presented. We are the first one 
to look at the departure process of a correlated queue, to 
characterize jitter in packet networks. Section 4 gives the 
simulation results for interarrival times being independent as 
well as, correlated. In Section 5, conclusions are drawn and 
future work is outlined.
II.
CONVENTIONAL MODEL FOR TDMOIP
TDMoIP is a technology wherein TDM frames such as 
E1/T1 are packetized and sent across a layer 2/3 virtual 
circuit, in which the QoS is provisioned such that these TDM 
encapsulated packets are given the highest priority. These 
packets upon traversing the packet network experiences 
delay variability, which is caused by the queueing delays at 
the intermediate routers. These packets having the TDM 
payload, on arriving at the receiver are stored in a jitter 
buffer, which is meant to mitigate the effect of the packet 
network.
A.
Schematic for TDMoIP
The scheme for clock recovery at the physical layer [2] is 
shown in Fig. 1. For TDMoIP, there is no common clock 
present at the transmitter and receiver. The receiver has to 
estimate the transmitter clock from the received data stream. 
This is accomplished using a phase-locked loop (PLL). The 
PLL locks the phase of the receiver clock to that of the 
transmitter or would manipulate the arrival pattern to get
accurate receiver clock. Thus the function of the PLL is to 
compensate for any frequency deviation. The main problem 
encountered in packet networks is the queueing delay (which 
is variable for each packet), introduced by packet routers and 
switches. It is because of this varying delay that the constant 
bit rate TDM stream does not appear periodic. A frequency 
estimate of the transmitter clock is done based on the 
measurements of the packet arrivals to mitigate the effects of 
packet delay variations using various techniques. This 
frequency estimate is used as reference for the PLL. The 
PLL locks the receiver clock’s phase to that of the 
transmitter. The clock from the PLL is used to derive the 
Constant Bit Rate (CBR) bit stream. Therefore, the better the 
estimate of frequency, the more periodic will the received 
stream be. The variance of the frequency estimate should be 
low for proper synchronization.
B.
Literature survey
When there is no common network clock, the 
asynchronous clock recovery schemes are applicable. They 
are also called as adaptive clock recovery schemes. An 
adaptive clock recovery method based on jitter buffer level 
was studied in [5]. In this jitter buffer level based method, 
the clock is recovered by calculating the receiving rate of the 
IP packets. In another adaptive scheme, the time difference 
of arrivals of the packets is filtered and source clock is 
recovered with minimum variance as in [2]. There are hybrid 
techniques, which combine two of the above methods to 
minimize the error in clock recovery and also to increase its 
convergence rate [6]. The schemes mentioned here recover 
clock at the physical layer. Minimizing variance of the inter-
packet time at either of the two layers, physical or data link 
of the ISO stack will reduce jitter in the outgoing stream.
For achieving synchronization at the data link layer of 
the ISO stack, in this paper we use [7] a queueing model, 
where payloads are extracted from the TDM encapsulated IP 
packets arriving from the transmitter, are queued in the jitter
192
Copyright (c) IARIA, 2012.     ISBN:  978-1-61208-199-1
AICT 2012 : The Eighth Advanced International Conference on Telecommunications

buffer. They are served such that the variance of the inter-
departure process of the outgoing packet stream is minimum.
C.
The Jitter buffer model
Figure 2. FIFO, Single server queue
The receiver jitter buffer is modeled as a single server, 
first in first out (FIFO) queue where {Xn} is the interarrival 
time process, {Sn} is the service time process, with 
correlation between the two processes, as shown in Fig. 2. 
The interdeparture time process of this queue should have 
minimum variance so that there is proper synchronization at 
the receiver.
Jacobs [7] gives the waiting time distribution for a 
correlated queue having correlations between interarrival and 
interdeparture times under heavy traffic conditions. We use 
the above model for modelling the jitter buffer and study the 
interdeparture process in such a queue. We are the first one 
to look at departure process, its statistics and to use the same 
in a jitter buffer model. For the analysis of the simulation 
data of the queue [8] is used. We include here in our studies 
a queue with non-Poissonian arrival process, to be more 
realistic.
III.
OUR QUEUE MODEL
A.
Research solution: The EARMA queue model
A M/G/1 queue is a queueing system with a single 
server, arrival process being Poisson, service times 
following a general distribution and having an infinite 
buffer space. The jitter buffer is modeled as a M/G/1 queue 
with exponential autoregressive and moving average 
(EARMA) [7] correlations between the interarrival times 
and the service times. The following table gives the 
notations used for the correlated queue.
TABLE I. 
                THE EARMA QUEUE
Symbols
Description
{Xn}
Sequence of independent exponentially distributed 
random variables with positive finite mean -1, where Xn 
is the interarrival time between the n th and the n-1 th
arrival of the packet at the receiver jitter buffer
{En}
Sequence of independent exponential random variables 
with positive finite mean -1
{Jn}
Sequence of  Bernoulli random variables  with 
P(Jn=1)=1- ; 01
Symbols
Description
{Kn}
Sequence of  Bernoulli random variables  with 
P(Kn=1)=1-ar ;0ar<1
{Sn}
The service time process, where Sn represents the service 
time of the n th packet, following a general distribution 
and having a  positive finite mean  -1
{Bn}
An auto regressive  process, where B0 has an exponential 
distribution with mean  -1
We consider a single server queue with FIFO discipline, 
as the packets that are sent from a single source arrive in the 
order transmitted inspite of the random delay. The 0th packet 
arrives at t=0 and finds the server free. Packets are of 
constant size, an E1 frame per packet. Henceforth, the word 
packet goes synonymous with the word frame and treated as 
an entity arriving at the queue.
In order to reduce the variance of the departure process, 
we introduce a positive correlation between service intervals 
and interarrival times (X and Y are said to be positively 
correlated when X increases Y also increases). This would 
mean that a queue with large buffer occupancy would be 
served faster and vice versa. All these would reduce variance 
of interdeparture times. A correlation structure which 
satisfies our requirement is the EARMA correlation. Hence, 
the service time of the n th packet, Sn is taken to be:
)
(
1
n
n
n
n
B
J
E
S





                                                                                        (1)
where, 
n
n
n
ar
n
K X
B
B


1

                                                     (2)
Also, note that statistical correlation is also imposed 
within the service times themselves. These models have the 
advantage that the marginal distributions and correlation 
structure of the sequences are specified separately, so that we 
can compare them with an independent (M/M/1) case with 
the same distribution. The covariance within service times is 
obtained from (1) and (2) as
...........
3,2,1
) ;
1(
)
,
(
2
2





k
S
S
COV
k
ar
n k
n

 
                     (3)     
The covariance between the interarrival and service times 
is obtained from (1) and (2) as
1
.,
..........
3,2,1,0
);
1
)(
1(
)
(
)
,
(
1







n
k
COVS X
ar
k
ar
n k
n


 
        (4)
The variance of the interdeparture time process should be 
as less as possible so that the output data stream containing 
the TDM payload would be closer to CBR as was sent by the 
transmitter. Larger variance in the inter-departure times 
would lead to underrun or overrun of the jitter buffer in the 
upstream node causing clock slips. In effect, all these would 
result in low quality of voice signal carried by the TDM pipe.
By using more sophisticated clock recovery algorithms, 
recovered TDM clocks can be made to comply with ITU-T 
G.823 and G.824 specifications for T1/E1 jitter and wander 
control while simultaneously delivering optimal latency.
193
Copyright (c) IARIA, 2012.     ISBN:  978-1-61208-199-1
AICT 2012 : The Eighth Advanced International Conference on Telecommunications

B.
Departure process
Departure process is important in the analysis of 
TDMoIP synchronization algorithm. The variance of the 
interdeparture time should be minimum as possible so that 
the output stream would appear periodic with minimum 
packet delay variation. Table II gives the variables related to 
the departure process.
TABLE II. 
  DEPARTURE PROCESS OF THE QUEUE
Symbols
Description
{Dn}
Sequence of random variables with positive finite mean 
-1, where Dn is the interdeparture time between the n th  
and  the   n-1  th packet at the output of the receiver jitter 
buffer
{Wn}
The waiting time process, where Wn is the waiting time of 
the nth packet in the Queue
From the queueing theory results [9, 10, 11], the inter-
departure time process can be written in terms of the 
interarrival, waiting and service times. Let {Dn} be the inter 
departure time process, where Dn is the interdeparture  
between the n th and the n-1 th departure of packets at the 
output of the receiver jitter buffer, then
1
1







n
n
n
n
n
n
S
S
W
W
X
D
                                          (5)
From the above equation, the variance of the 
interdeparture time process is written in terms of the variance 
and covariance terms as given below. Other covariance terms 
which are not present in this equation tend to zero because 
the two variables in them are independent. So we have,
]
]. [
[
2
)
1(
2
)
)(
)(1
2 1(
2
]
]. [
. [
2
)
,
(
2.
)
,
(
2.
)
(
2.
)
(
)
(
1
1
2
2
1
2
2
1
n
ar
ar
n
n
n
n
n
n
n
n
n
n
W
W
S
X
S
S
COV
X
S
COV
Var S
Var X
D
Var



































                               
     (6)
The variance of Poisson arrival process is -2.Therefore, 
the condition for the variance of inter-departure time process, 
which is stationary, to be less than the variance of the 
interarrival time process from (6) is obtained as:

2 
1
)
1(
)
)(1
1(
1
)
(
]
[


 














ar
ar
Wn
                                  
      (7)
Equation (7) is satisfied only when the parameters are 
related as: ρar > (2-β)-1, especially under heavy traffic limit 
conditions. But under such a condition, the mean waiting 
time would be definitely be greater than the independent 
case. Thus, there is a tradeoff between the mean waiting time 
and the variance of the interdeparture time process. The 
study of the variance of the departure process is done more 
precisely here, than in [12].
C.
Correlated interarrivals
The queue was studied with interarrival times being 
correlated as in [13], as it was found in [14], that the 
interarrivals are correlated in packet networks. The jitter 
buffer is modeled as a G/G/1 queue, with correlation within 
the interarrrival times. Table III gives the variables related to 
the correlated arrival process.
TABLE III. 
CORRELATED INTERARRIVAL TIMES
Symbols
Description
{Gn}
Sequence of independent exponentially distributed 
random variables with positive finite mean -1
{Hn}
Sequence of Bernoulli random variables with 
P(Hn=1)=1-;  0<1
The interarrival time between the n-1 th and the n th 
arrival, Xn  is given by:
n
n
n
n
G H
X
X


1

                              
                     (8)
IV.
SIMULATION RESULTS
The correlated M/G/1 queue with EARMA correlations 
was simulated for different traffic intensity and correlation 
parameter values in MATLAB. The graph for the ratio of 
mean waiting time of this correlated queue to the mean 
waiting time of the independence (M/M/1) case was plotted. 
Also, the ratio of the variance of the departure process to the 
arrival process was plotted, in the same graph. The 
simulation results are interpreted clearly than in [12].
     
Figure 3. Ratio of the mean waiting time of the correlated M/G/1 to the 
M/M/1 queue and ratio of the variance of the departure process to the 
arrival process, for various correlation parameter values, ar;  =0.25;  
traffic intensity, =0.9 Erlangs.
194
Copyright (c) IARIA, 2012.     ISBN:  978-1-61208-199-1
AICT 2012 : The Eighth Advanced International Conference on Telecommunications

As seen above, under heavy traffic condition, the ratio of 
the variance of departure process to the arrival process of this 
queue decreases when strong correlation is imposed between 
the interarrival and service times and goes well below a 
factor of 1. But the ratio of the waiting time of this queue to 
the independent case increases when there is strong 
correlation between the interarrival and service times. The 
correlation parameter, ar= (2-)-1=0.57, when =0.25 is the 
point from where the variance of the departure is less than 
that of the arrival process. Therefore, as seen from Fig. 1, 
high correlation parameter values yields lesser variance, but 
the waiting time is more.
Figure 4. Ratio of the mean waiting time of the correlated M/G/1 to the 
M/M/1 queue and ratio of the variance of the departure process to the 
arrival process, for various correlation parameter values, ar;  =0.25;  
traffic intensity, =0.6 Erlangs.
As is seen from Fig. 4, even under light traffic condition, 
the ratio the variance of the departure process is less than 
arrival process for strong correlation, that is, higher values of 
ar. The correlation parameter values at which the mean 
waiting time ratio and the variance ratio are unity are same,
as for the heavy traffic condition as in Fig. 3. That is, the 
correlation parameter, ar= (2-)-1=0.57, when =0.25 is the 
point  from where the variance of the departure is less than 
that of the arrival process.       
Figure 5. Ratio of the mean waiting time of the correlated M/G/1 to the 
M/M/1 queue and ratio of the variance of the departure process to the 
arrival process for various traffic intensity values,  (Erlangs);  =0.25;  
correlation parameter, ar=0.95.
Fig. 5 depicts  a condition where the correlation 
parameter is selected such that the variance of the departure 
process is less compared to the arrival process but the mean 
waiting time is more compared to the independent case. That 
is, our objective of minimum jitter variance is achieved.
Figure 6. Ratio of the mean waiting time of the correlated G/G/1 to the 
M/M/1 queue for various traffic intensity values,  (Erlangs);  =0.25;  
correlation parameter, ar=0.95; interarrival time correlation parameter, 
=0.65.
195
Copyright (c) IARIA, 2012.     ISBN:  978-1-61208-199-1
AICT 2012 : The Eighth Advanced International Conference on Telecommunications

Fig. 6 depicts a condition where the correlation 
parameters β and ρar are selected for a particular interarrival 
time correlation parameter, α such that the mean waiting 
time is more compared to the independent case. High mean 
waiting time renders low variance of the departure process. 
This aids in achieving lesser jitter. Under heavy traffic 
conditions, the ratio of the mean waiting time of the 
correlated G/G/1 to the M/M/1 queue reduces. For this 
particular value of the interarrival time correlation parameter, 
it is better not to operate the queue under heavy traffic 
condition, so as to achieve our objective of lesser variance.
Figure 7. Ratio of  the variance of the departure process to the arrival 
process for various traffic intensity values,  (Erlangs);  =0.25;  
correlation parameter, ar=0.95; interarrival time correlation parameter, 
=0.65.
Fig. 7 depicts a condition where the correlation 
parameters are selected such that the variance of the 
departure process is less than the independent case, for a 
particular value of the interarrival time correlation parameter.
The queue behaviour, when there is auto-regressive 
correlation (correlation value, =0.65) between interarrival 
times shows that the mean waiting time of this correlated 
queue is greater than the mean waiting time of the M/M/1 
queue at a correlation parameter value, between the 
interarrival and the service time, which is different from the 
one presented earlier. Whereas, the variance of the departure 
process of this queue is less than the variance of the arrival 
process. Only when the correlation between the interarrival 
times is less, the objective of lesser variance of the departure 
sequence is achieved.
V.
CONCLUSION AND FUTURE WORK
A correlated M/G/1 is used for modelling the jitter buffer 
in TDMoIP and a set of parameters of the queue is identified 
to achieve our objective of minimum variance of the 
departure process. The correlation parameters are obtained to 
achieve the desired output variance. This work is extended to 
arrivals being correlated, as interarrival times are correlated 
in packet networks and their simulation results are presented. 
Obtaining the analytical expressions relating the correlation 
parameter of the interarrival time and the queue statistics can 
be a future work. A feedback mechanism to control the 
various correlation parameters to achieve the desired voice 
quality can also be considered.
ACKNOWLEDGMENT
The authors would like to thank the anonymous 
reviewers for their valuable comments.
REFERENCES
[1]
H. M. Ahmed, “Adaptive Terminal Synchronization in Packet 
Data Networks,” IEEE Globecom, pp. 728-732, 1989. 
[2]
J. Aweya, D. Y. Montuno, M. Ouellette  and K. Felske, “
Clock recovery based on packet inter-arrival time averaging,”
Comp. Comm., vol. 29, pp. 1696–1709, 2006.
[3]
Y. J. Stein, “TDM Timing,”  RAD Data Comm., August 
2006.
[4]
R. C. Lau and P. E. Fleischer, “Synchronous Techniques for 
Timing Recovery in BISDN,” IEEE Trans. Comm., vol. 43, 
pp. 1810–1813, Feb. 1995.
[5]
R. P. Singh and  S. H. Lee, “Adaptive Clock Synchronization 
Schemes for real-time traffic in broadband packet networks,” 
EUROCON 88, pp. 84-88, Jun. 1988.
[6]
S. Zhu and Y. Xu, “The Study and Analysis of Joint Adaptive 
Clock Recovery Mechanism for TDMoIP,” ICNSC,  pp. 533-
538, Apr. 2008.
[7]
P. A. Jacobs, “Heavy traffic results for single-server queues 
with dependent (EARMA) service and interarrival times, ” 
Adv. Appl. Prob, Ireland, vol. 12, pp. 517-529, 1980.
[8]
A. M. Law, “Statistical analysis of the output data,” Oper.  
Res., vol. 31, no. 6, pp. 983-1029, Nov. 1983.
[9]
L. Kleinrock, “Queueing Systems,” vol. 1, John Wil. & Sons., 
1975.
[10] J. W. Cohen, “The Single Server Queue,”  vol. 8, North-
Holland, 1982.
[11] J. Medhi, ”Stochastic Models in Queueing theory,” second 
edition,  Acad. Press, 2003.
[12] S. Usha Rani and  R. Manivasakan, “On the Departure 
Process of Jitter Buffer in TDMoIP,” Proceedings of the 18th
Nat. Conf. on Comm., February 2012.
[13] R. Manivasakan, U. B. Desai and A. Karandikar, “Broadband 
Teletraffic Characterization using Correlated Interarrival time 
Poisson Process (CIPP),” J. Ind. Inst. Sci., vol. 79, no. 3, pp. 
233-249, 1999.
[14] W. E. Leland, M. S. Taqqu, W. Willinger and D. V. Wilson,  
“On the self-similar nature of Ethernet Traffic,” ACM 
SIGCOMM, Comp. Comm. Rev., vol. 25, pp. 202-213, 1995.
196
Copyright (c) IARIA, 2012.     ISBN:  978-1-61208-199-1
AICT 2012 : The Eighth Advanced International Conference on Telecommunications

