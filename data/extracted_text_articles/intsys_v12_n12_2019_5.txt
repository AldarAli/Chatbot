50
International Journal on Advances in Intelligent Systems, vol 12 no 1 & 2, year 2019, http://www.iariajournals.org/intelligent_systems/
2019, © Copyright by authors, Published under agreement with IARIA - www.iaria.org
Light-Fidelity (Li-Fi)  
LED assisted navigation in large indoor environments  
 
Manuela Vieira, Manuel Augusto Vieira, Paula Louro, 
Alessandro Fantoni  
ADETC/ISEL/IPL,  
R. Conselheiro Emídio Navarro, 1959-007  
Lisboa, Portugal 
CTS-UNINOVA  
Quinta da Torre, Monte da Caparica, 2829-516,  
Caparica, Portugal 
  
e-mail: mv@isel.ipl.pt, mv@isel.pt, plouro@deetc.isel.pt,  
afantoni@deetc.isel.ipl.pt  
 
Pedro Vieira 
ADETC/ISEL/IPL,  
R. Conselheiro Emídio Navarro, 1959-007  
Lisboa, Portugal 
Instituto das Telecomunicações  
Instituto Superior Técnico, 1049-001,  
Lisboa, Portugal 
e-mail: pvieira@isel.pt 
 
 
Abstract— In this work, a Light Emitting Diode (LED) 
assisted navigation system for large environments is presented. 
The LEDs are used both for room illumination purposes and 
as transmitters if modulated at high frequencies. The payload 
data together with the identifiers, IDs, assigned to the physical 
location of the transmitters are broadcast using an On-Off 
Keying (OOK) modulated scheme. The mobile receiver is a 
double p-i-n/pin SiC photodetector with light controlled 
filtering properties. Coded multiplexing techniques for 
supporting communications and navigation together on the 
same channel are analysed. A demonstration of fine-grained 
indoor localization is simulated. Different indoor layouts for 
the LEDs are considered. Square and hexagon mesh are tested, 
and a 2D localization design, demonstrated by a prototype 
implementation, is presented. The results showed that the 
LED-aided Visible Light Communication (VLC) navigation 
system makes possible not only to determine the position of a 
mobile target inside the unit cell but also in the network and 
concomitantly 
to 
infer 
the 
travel 
direction 
in 
time. 
Bidirectional 
communication 
was 
tested 
between 
the 
infrastructure and the mobile receiver. 
 
Keywords- 
Visible 
Light 
Communication; 
Indoor 
positioning; Square and hexagonal topologies; SiC technology; 
Optical sensor, Navigation system; Bidirectional communication. 
I. 
INTRODUCTION 
Light Fidelity (Li-Fi) is a technology for wireless 
communication between devices using light, to transmit data 
and position. VLC/LiFi can play a significant role by 
bringing redundancy to traditional RF solutions. It brings 
strong value-added features in terms of: complexity and 
cost, selectivity, quality of link, high precision positioning 
and security. Nevertheless, one of the limitations of LiFi 
existing solutions is that LiFi have been developed mainly 
for indoor applications [1]. With the rapid advancement of 
smart equipment, location based services that employ 
different 
kinds 
of 
communication 
and 
positioning 
technologies to localize the walker and to provide relevant 
services, start to develop. Although Global Positioning 
System (GPS) works extremely well in an open-air 
localization, it does not perform effectively in indoor 
environments, due to the disability of GPS signals to 
penetrate in in-building materials. Nowadays, indoor 
positioning methods are mainly based on Wi-Fi, Bluetooth, 
Radio-frequency 
identification 
(RFID), 
visible 
light 
communications (VLC) and inertia navigation [2, 3, 4, 5, 6]. 
Although many methods are available such as WiFi-based 
[7, 8] and visual indoor topological localization [9, 10], they 
require dense coverage of WiFi access points or expensive 
sensors, like high-performance cameras, to guarantee the 
localization accuracy.  
VLC is a data transmission technology [11, 12, 13, 14]. 
VLC can easily be employed in indoor environments such 
as 
offices, 
homes, 
hospitals, 
airplanes/airports 
and 
conference rooms. Compared with other positioning 
methods, indoor VLC based positioning, has advantages, 
since it can use the existing LED lighting infrastructure with 
simple 
modifications. 
Due 
to 
the 
combination 
of 
illumination and communication, a lot of investigations 
have been attracted in VLC applications [15, 16, 17]. The 
system considers both positioning and lighting, thus it will 
save energy and realize high accuracy positioning with low 
cost at the same time. Besides that, due to the advantage of 
electromagnetic free, VLC based positioning is a green 
positioning method.  
In the sequence, we propose to use modulated visible 
light, carried out by white low cost LEDs, to provide 
globally consistent signal-patterns and engage indoor 
localization. The LEDs are capable of switching to different 
light intensity levels at a very fast rate. The switching rate is 
fast enough to be imperceptible by a human eye. This 
functionality can be used for communication where the data 
is encoded in the emitting light in different ways [18]. A 

51
International Journal on Advances in Intelligent Systems, vol 12 no 1 & 2, year 2019, http://www.iariajournals.org/intelligent_systems/
2019, © Copyright by authors, Published under agreement with IARIA - www.iaria.org
photodetector can receive the modulated signals and decode 
the data. This means that the LEDs be twofold of providing 
illumination as well as communication.  
The requirement of managing access to multiple devices 
in VLC is different from other types of networks. This is 
because the size of a cell can vary depending on how 
illumination is provided. The task of squaring the circle 
proposed by ancient geometers was proven to be impossible. 
The triangle of largest area of all those inscribed in a given 
circle is equilateral. The cells of a beehive honeycomb are 
hexagonal. So, research is necessary to design LED 
arrangements that can optimize communication performance 
while meeting the illumination constraints for a variety of 
indoor layouts, using four-code assignment for the LEDs in 
an extended equilateral triangle, square or diamond mesh. 
The main idea is to divide the space into spatial beams 
originating from the different light sources, and identify 
each beam with a unique timed sequence of light signals. 
The receiver, equipped with an a-SiC:H pinpin photodiode, 
determines its physical position by detecting and decoding 
the light signals. The overlap of different light beams at the 
receiver is used as an advantage to increase the positioning 
accuracy. Fine-grained indoor localization can enable 
several applications; in supermarkets and shopping malls, 
exact location of products can greatly improve the 
customer's shopping experience and enable customer 
analytics and marketing [19, 20].  
Luminaires equipped with multi colored LEDs can 
provide further possibilities for signal modulation and 
detection in VLC systems [21]. The use of Red-Green-Blue 
(RGB) LEDs is a promising solution as they offer the 
possibility of Wavelength Division Multiplexing (WDM) 
which can enhance the transmission data rate. A WDM 
receiver have been developed [22, 23]. The device is based 
on tandem a-SiC:H/a-Si:H pin/pin light controlled filter. 
When different visible signals are encoded in the same 
optical transmission path, the device multiplexes the 
different optical channels, performs different filtering 
processes 
(amplification, 
switching, 
and 
wavelength 
conversion) and finally decodes the encoded signals 
recovering the transmitted information. 
In this paper, a LED-assisted indoor positioning and 
navigation VLC system, for large indoor environment is 
proposed. The principle of the positioning scheme and the 
algorithm to decode the information are described and 
experimental results are presented. A 2D localization 
design, demonstrated by a prototype implementation is 
tested. Fine-grained indoor localization is demonstrated 
using square and hexagonal topologies. Finally, conclusions 
are addressed. The proposed, composed data transmission 
and indoor positioning, involves wireless communication, 
smart sensoring and optical sources network, building up a 
transdisciplinary 
approach 
framed 
in 
cyber-physical 
systems. 
II. 
SYSTEM CONFIGURATION  
A VLC system consists on a VLC transmitter that 
modulates the light produced by LEDs and a VLC receiver 
based on a photosensitive element that receive and analyses 
the transmitted modulated signals. The transmitter and the 
receiver are physically separated, but connected through the 
VLC channel. For VLC systems, Line of Sight (LoS is a 
mandatory condition. 
LED bulbs work as transmitters, broadcasting the 
information. An optical receiver extracts its location to 
perform positioning and, concomitantly, the transmitted data 
from each transmitter. Multiple LEDs can transmit 
simultaneously 
to 
the 
same 
receiver 
using 
joint 
transmission. To synchronize the signals from multiple 
LEDs, the transmitters use different ID´s, such that the 
signal is constructively at the receiver. 
A. Shapes and topologies 
Different shapes, for the unit cell, are proposed based on 
the joint transmission of four modulated LEDs: the square, 
the hexagonal. The unit cells, for the analyzed topologies, 
are displayed in Figure 1.  
 
R
G
V
B
1
2
4
5
6
7
8
9
3
a) 
1
2
3
4
5
6
7
B
8
R
G
G’
R’
B’
9
2
4
5
6
7
8
3
1 9
B0
B’0
R0
R’0
G0
G’0
V
b) 
 
Figure 1. Top-down view of unit cells (LED array = RGBV color spots) 
having each one four modulated RGBV-LEDs located at the corners of the 
grid. a) Square cell. b) First hexagon ring. 
In Figure 1a, the proposed LED arrangement employs 
four modulated LEDs placed at the corners of a square grid. 

52
International Journal on Advances in Intelligent Systems, vol 12 no 1 & 2, year 2019, http://www.iariajournals.org/intelligent_systems/
2019, © Copyright by authors, Published under agreement with IARIA - www.iaria.org
In Figure 1b, a cluster of three diamond cells sharing the 
violet node, fill the space with a hexagon, leading to the 
hexagonal topology. The estimated distance from the ceiling 
lamp to the receiver is used to generate a circle around each 
transmitter on which the device must be located in order to 
receive the transmitted information (generated location and 
coded data). 
In all topologies, the grid sizes were chosen to avoid 
overlap in the receiver from adjacent grid points. To 
improve its practicality, the tested geometric scenario for the 
calculations, in both topologies, uses a grid in smaller size 
(2 cm between adjacent nodes). To receive the information 
from several transmitters, the receiver must be positioned 
where the circles from each transmitter overlap, producing 
at the receiver, a MUX signal that, after demultiplexing, acts 
twofold as a positioning system and a data transmitter. The 
generated regions, defined onwards as footprints, are 
pointed out in Figure 1 and reported in Table I.   
TABLE I FINE-GRAINED CELL TOPOLOGY. 
Footprints 
regions 
Square 
topology 
Hexgonal 
topology 
P#1 
RGBV 
RGV 
R’G’V 
P#2 
RGB 
RBV 
R’B’V 
P#3 
RG 
G’BV 
GB’V 
P#4 
RBV 
RGB0V 
R’G’B’0V 
P#5 
BV 
RG0BV 
R’ G’0B’V 
P#6 
GBV 
R0G’BV 
R’0GB’V 
P#7 
GV 
RGBV 
R’G’B’V 
P#8 
RGV 
RG’BV 
R’GB’V 
P#9 
RG 
RGB’V 
R’GB’V 
 
In the hexagonal topology, each node has six neighbors, 
so, eighteen footprints are possible. Twelve at the edges of 
the six equilateral triangles where four circles overlap (#P4 
to #P9) and six at their centroids (#P1 to #P3), where only 
three channels are received. Taking into account the XY 
symmetry (Figure 1b), the R, G and B nodes and their 
symmetric (R’G’B’) must be considered. When the received 
channels come from outside the hexagon edges (first ring), 
the nodes are label with 0 (see Figure 1b). When the signal 
comes only from one LED, the coordinates of the LED are 
assigned to the device’s reference point. If the device 
receives multiple signals, i.e., if it is in an overlapping 
region of two or more LEDs, it finds the centroid of the 
received coordinates and stores it as the reference point.  
 
 
This is the so called fine-graining of the unit cell. 
For data transmission commercially available white 
RGB-LEDs and a violet (V: 400 nm) LED were used. The 
output spectrum of the white LED contains three peaks 
assigned to the colors red (R: 626 nm), green (G: 530 nm) 
and blue (B: 470 nm), that mixed together provide the white 
perception to the human eye. Each chip, in the trichromatic 
LED, can be switched on and off individually for a desired 
bit sequence. The luminous intensity is regulated by the 
driving current for white perception. They exhibit a wide 
divergence angle (2x60º), since they are also designed for 
general lighting and allow a wide delivery of the VLC 
signal around the surrounding area. The driving current of 
each emitter is controlled independently, suppling the 
respective coding sequence and frequency [14]. In both 
topologies, the driving current of the emitters having the 
same wavelength was always the same. 
 
B. Cellular topologies for large environments 
When the rooms are very large, such as in supermarkets 
or large shopping malls, the positioning technique (four-
code assignment for the LEDs), is applied in the whole 
room.  
Thinking about the design, the wall structure could be 
continued 
to 
form 
the 
tiles 
and 
a 
complete 
communication/illumination can be created. For cellular 
design, a regular shape in needed over the serving area. 
Squares, equilateral triangles, regular hexagons or a 
combination of this would be demanding, because the shape 
makes efficient use of space. They cover the entire area 
without any gaps decreasing the interference between the 
same code [ 24 ]. Since each cell is projected to use 
wavelengths only within its boundaries, the same 
wavelengths can be reused in other close cells without 
interference. 
Like squares, regular hexagons also fit together without 
any gaps to tile the plane. Ceiling plan for the LED array 
layout is shown in Figure 1 (LED array = RGBV color 
spots).  
Two topologies were set for the unit cell: the square, 
(Figure 2a) and the hexagonal (Figure 2b). In the first, the 
proposed LED arrangement employs four modulated LEDs 
placed at the corners of a square grid.  
The unit cell Ci,j is repeated in the horizontal and vertical 
directions in order to fill all the space. In the second 
topology (Figure 2b), the hexagonal, the same LED array 
was used, but in a no-orthogonal system. We select a pair 
inclined at 120 degrees to be the axes, labelled as X and Y. 
We have readdressed the nodes, in the oblique Cartesian 
system. Consequently, in both topologies, each node, X i,j, 
carries its own color, X, (RGBV) as well as its ID position 
in the network (i,j). 

53
International Journal on Advances in Intelligent Systems, vol 12 no 1 & 2, year 2019, http://www.iariajournals.org/intelligent_systems/
2019, © Copyright by authors, Published under agreement with IARIA - www.iaria.org
R1,2
G1,1
V2,3
V2,1
R1,4
B2,2
G1,3
R3,2
G3,1
G3,3
V4,3
V4,1
B4,2
G1,5
V2,5
G3,5
V4,5
R5,2
G5,1
R5,4
G5,3
G5,5
B4,4
B2,4
R3,4
a) 
 
 
 
G1,1
V2,2
G3,3
G1,-1
V-2,-2
G-3,-3
R0,1
R0,3
G1,3
R2,3
V0,2
B1,2
R2,1
B3,0
G3,1
B3,2
G-1,1
R-2,1
B-1,2
R0,-1
R0,-3
V0,-2
B-1,-2
Y
X
XY
B1,-2
G-1,-1
G-1,-3
R-2,-3
R-2,-1
G-3,-1
B-3,-2
V0,0
V2,0
V-20
B1,0
B-1,0
B-3,0
R2,-1
I
II
III
IV
V
VI
b) 
Figure. 2. Illustration of the proposed scenarios (LED array = RGBV color 
spots): a) Clusters of cells in orthogonal topology (square). b) Clusters of 
cell in hexagonal topology.  
 
C. The OOK modulation scheme 
A dedicated four channel LED driver, with multiple 
outputs, was developed to modulate the optical signals. The 
modulation of the emitted light was done through the 
modulation of the driving electrical current of the 
semiconductor chips of each LED. The modulator converts 
the coded message into a modulated driving current signal 
that actuates the emitters of each violet and tri-chromatic 
LEDs. A graphical user interface allows the control of the 
system, which includes the setting of the driving current, bit 
sequence and frequency of each emitter. 
An on-off keying modulation scheme was used. The 
frame structures are illustrated in Figure 3, for both 
topologies. 
For both, the frame is built based on three separate 
blocks; the synchronism (Sync), the ID address of the 
transmitter (ID) and the message to transmit (payload data). 
A 32 bit codification was used. The first five bits are 
used for time synchronization. The same synchronization 
header [10101], in an ON-OFF pattern, is imposed 
simultaneously to all the emitters. Each color signal 
(RGBV) carries its own ID-BIT, so, the next bits give the 
coordinates of the emitter inside the array (Xi,j). Cell’s IDs 
are encoded using a binary representation for the decimal 
number. In the square topology (Figure 3a), six bits are 
used: the first three for the binary code of the line and the 
other three for the column. In the hexagonal topology  to 
code the positive and the negative coordinates "sign and 
magnitude" representation was used, setting bit to 0 is for a 
positive number, and setting it to 1 is for a negative number.  
0,0
0,5
1,0
1,5
2,0
2,5
C1,2
payload data
ID
Sync.
[data transmission]
[10101][r r r c c c]
V2,3
B2,2
G1,3
R1,2
 
 
Codeword (RGBV)
Time (ms)
 
a) 
0.0
0.5
1.0
1.5
2.0
2.5
payload data
ID
Sync.
[data transmission]
[10101] [xxxx yyyy]
V0,0
B1,0
G-1,-1
R0,-1
 
 
Codeword (RGBV)
Time (ms)
 
b) 
Figure 3. Frame structure. Representation of one original encoded 
message, in a time slot. a) Square topology; R12 ; G1,3 ;  B2,2 and V2,3 are the 
transmitted node packet from the C1,2 array in the network.. b) Hexagonal 
topology; R0,-1 ; G-1,-1; B1,0 and V0,0  are the transmitted node packet of the 
unit cell in the network. 

54
International Journal on Advances in Intelligent Systems, vol 12 no 1 & 2, year 2019, http://www.iariajournals.org/intelligent_systems/
2019, © Copyright by authors, Published under agreement with IARIA - www.iaria.org
The remaining bits in the number indicate the absolute 
value. So, the next eight bits (ID) are assigned, respectively, 
to the x and y coordinate (i,j) of the emitter in the array 
(Figure 3b). For instance, R12  emitter sends a six ID_BIT 
[001 010] in the square topology while in the hexagonal one 
the eight ID bits are [0001 0010]. For both, the last bits in 
the frame are reserved for the message send by the Xij node 
(payload data). A stop bit is used at the end of each frame. 
D. The VLC receiver 
The VLC receiver is an important component of a VLC 
system, as its performances are the ones that determine the 
overall systems performances. The VLC receiver, at the end 
of the communication link, is responsible to extract the data 
from the modulated light beam. It transforms the light signal 
into an electrical signal that is later decoded to extract the 
transmitted information.  
 
 
a) 
 
400
450
500
550
600
650
700
0.1
1
R
G
B
V
Front violet background
2800 Wcm
-2
 
 
Gain (
V)
Wavelength (nm)
 Front bias
 
b) 
Figure 4. a) Double pi´n/pin configuration and device operation.  b)  
Spectral gain under violet front optical bias (αV). The arrows point towards 
the optical gain at the analyzed R, G, B and V input channels. 
The VLC receiver is a two terminal, p-i'(a-SiC:H)-n/p-
i(a-Si:H)-n 
photodiode 
packed 
in 
two 
transparent 
conductive contacts (TCO).  
The 
deposition 
conditions, 
optoelectronic 
characterization and device optimization are described 
elsewhere [13]. The configuration and operation is 
illustrated in Figure 4a. Due to the different absorption 
coefficient of the intrinsic absorption layers, both front and 
back diodes act as optical filters confining, respectively, the 
optical carrier produced by the blue and red light, while the 
optical carriers generated by the green light are absorbed 
across both (see arrow in Figure 4a).  
The device operates within the visible range using for 
data transmission the modulated low power light supplied 
simultaneously by the RGBV LEDs located at the nodes of 
the array. A mix of R, G, B, and V pulsed communication 
channels (input channels; transmitted data), each one with a 
specific bit sequence, impinges on the device and are 
absorbed accordingly to their wavelengths. The combined 
optical signal (MUX signal; received data) is analyzed by 
reading out the generated photocurrent under negative 
applied voltage and violet background lighting, applied 
from the front side of the receiver [22, 25]. The optical bias 
enhances de long wavelength channels (R, G) and quenches 
the low ones (B,V). In Figure 4b, the spectral gain defined 
as the ratio between the photocurrent with and without 
applied optical bias, is displayed. The arrows point towards 
the gain at the analyzed R, G, B and V input wavelength. 
The results show that the device acts as an active filter, 
under irradiation. It is interesting to notice that, as the 
wavelength increases, the signal strongly increases. This 
nonlinearity is the main idea for the decoding of the MUX 
signal at the receiver. 
III. 
EXPERIMENTAL RESULTS AND DISCUSSION 
A. Coding/Decoding techniques 
In Figure 5, the normalized received data due to the 
mixture of the four R, G, B, and V input channels, i.e., the 
MUX code signal in a stamp time, are displayed, for the 
square topology. 
In Figure 5a, the bit sequence was chosen to allow all the 
on/off sixteen (24) possible combinations of the four input 
channels. For three times slots (t1, t2, t3), in Figure 5b, the 
MUX signal acquired by a receiving positions P#9, P#1, and 
P#5 (see Table I), is displayed. The decoded packet of 
transmitted information is presented in the top of both 
figures. Results from Figure 5a show that the MUX signal 
presents as much separated levels as the on/off possible 
combinations of the input channels, allowing to decode the 
transmitted information [26]. All the ordered levels (d0-d15) 
are pointed out at the correspondent levels, and are 
displayed as horizontal dotted lines. In the right hand side of 
Figure 5a, the match between MUX levels and the 4 bits 
binary code assigned to each level is shown. Results show 
that each possible on/off state corresponds to a well-defined 
level. Hence, by assigning each output level to a 4-digit 
binary code, [XR, XG, XB, XV], with X=1 if the channel is on 
and X=0 if it is off, the signal can be decoded.  The MUX 
signal presented in Figure 5a, is used for calibration 
purposes. Comparing the calibrated levels with the different 
generated levels (Figure 5b), in the same frame of time, a 

55
International Journal on Advances in Intelligent Systems, vol 12 no 1 & 2, year 2019, http://www.iariajournals.org/intelligent_systems/
2019, © Copyright by authors, Published under agreement with IARIA - www.iaria.org
simple algorithm [ 27 ] is used to decode the multiplex 
signals.  
0.0
0.5
1.0
1.5
2.0
2.5
0.2
0.4
0.6
0.8
1.0
1.2
d15
d14
d13
d12
d11
d10
d9
d8
d7
d6
d5
d4
d3
d2
d1
d0
   V
   B
   G
   R
0 0 0 0
0 0 0 1
0 0 1 0
0 0 1 1
0 1 0 0
0 1 0 1
0 1 1 0
0 1 1 1
1 0 0 0
1 0 0 1
1 0 1 0
1 0 1 1
1 1 0 0
1 1 0 1
1 1 1 0
1 1 1 1
R G B V
 
 
Normalized MUX signal
Time (ms)
 
 
a) 
 
0.0
0.5
1.0
1.5
2.0
2.5
1.0
RGBV
[0011]
[1100]
[1111]
ID
Sync
Payload data
#5 (t1)
#9 (t3)
#1 (t2)
V4,3
B4,4
G3,3
R3,4
C3.3
 
 
IMUX nor
Time (ms)
 
b) 
Figure 5. MUX/DEMUX signals under 390 nm front irradiation. On the 
top the transmitted channels packets [R, G, B, V] are decoded. a) 
Calibration cell. b) MUX signal in three successive instants (t1, t2, t3). 
In Figure 5b, the MUX signal, when the receiver is 
located in positions P#5, P#1 and P#9 confirms the 
decoding process. After decoding the MUX signals, the 
localisation of the receiver is straightforward. Taking into 
account, the frame structure (Figure 3), the position of the 
receiver inside the navigation cell and its ID in the network 
is revealed [28]. The ID position, in the unit cell, comes 
directly from the synchronism block, where all the received 
channels are, simultaneously, on or off. The 4-bit binary 
code ascribed to the higher level identifies the receiver 
position in the unit cell (Table I). Those binary codes are 
displayed in the right hand of the Figure 5b. For instance, 
the level [1100] corresponds to the level d12 where the red 
and the green channels are simultaneously on. The same 
happens to the other footprints (P#1 and P#9) (see arrows 
and dash-dot lines in Figure 5a). Each decoded message 
carries, also, the node address of the transmitter. So, the 
next block of six bits, in the square topology or eight in the 
hexagonal one, gives de ID of the received node. In P#5 the 
location of the transmitters, in the network, are B4,4 and V4,3 
while in P#1 the assigned transmitters are R3,4, G3,3, B4,4 and 
V4,3. The last block is reserved for the transmission of the 
message (payload data). A stop bit (0) is used always at the 
end of each frame. 
B. LED-aided navigation system 
An interconnection network consists of set of nodes and 
communication 
links 
for 
the 
data 
transmissions. 
Synchronisation and communication between processing 
nodes is effectively implemented by message passing. A 
challenge in LED-based navigation system is the way to 
improve the data transmission rate while maintaining the 
capability for accurate navigation. The input of the aided 
navigation system is the MUX signal, and the output is the 
system state estimated at each time step (t). To compute 
the point-to-point exposure along a path, we need the data 
along the path.  
As a proof of concept, the suitability of the proposed 
navigation data bit transition was tested, in the lab. The 
solution was to move the receiver along a known pattern 
path. For each transition, two code words are generated, the 
initial (i) and the final (f). If the receiver stays under the 
same region, they should be the same, if it moves away they 
are different. The signal acquisition on the different 
generated locations was performed and the transition actions 
were correlated by calculating the ID position codes in the 
successive instants. 
In Figure 6a the simulated path is illustrated and in 
Figure 6b and Figure 6c MUX/DEMUX signals in six 
successive instants are displayed. Decoding, when the four 
channels overlap (P#1), is set on the top of the figures to 
direct into the packet sent by each node. In the right hand of 
the figures, the assigned 4-bit binary code is depicted at the 
successive instants. 
Results show that, as the receiver moves between 
generated point regions, the received information pattern 
changes. Note that, between two consecutive data sets, there 
is one navigation data bit transition (a channel is missing or 
added). We observe that when the receiver initially moves 
from P#3 to P#1, the green, G1,3 and the violet, V2,3, 
channels are added and the 4-bynary bit code changes from 
[1010] to [1111]. In Figure 6c, the MUX signals acquired in 
three posterior instants (t4, t5, t6) are displayed. At t3 the 
assigned 4-bit [RGBV] code is [0011], changes to [1111] at 
t5 and at t6 it is [1101]. The wavelength of the received 
emitters, during the transmission, and so the different 
locations of the receiver inside the cell are assigned as: P#5 
(BV), P#1 (RGBV) and P#8 (RGB) (see Table I). 
 

56
International Journal on Advances in Intelligent Systems, vol 12 no 1 & 2, year 2019, http://www.iariajournals.org/intelligent_systems/
2019, © Copyright by authors, Published under agreement with IARIA - www.iaria.org
R12
V23
B22
G13
1
1
1
1
2
2
4
5
4
5
5
6
6
6
8
8
8
9
9
9
9
8
4
2
4
6
2
3
7
G33
R32
3
3
4
2
2
2
9
9
1
1
1
1
1
7
4
6
6
8
8
8
8
5
7
2
2
8
6
6
6
4
4
4
5
V43
5
B42
V41
G11
V21
7
7
G31
7
B44
R14
B24
3
R34
3
3
 
a) 
0.0
0.5
1.0
1.5
2.0
2.5
0.0
0.5
1.0
RGBV
[0011]
[1111]
[1010]
ID
Sync
Payload data
P#5 (t3)
P#1 (t2)
P#3 (t1)
V2,3
B2,2
G1,3
R1,2
C1,2
 
 
Normalized MUX signal 
Time (ms)
b) 
0.0
0.5
1.0
1.5
2.0
2.5
0.0
0.5
1.0
RGBV
[0011]
[1101]
[1111]
ID
Sync
Payload data
P#8 (t6)
P#5 (t4)
P#1 (t5)
V2,3
B2,2
G3,3
R3,2
C2,2
 
 
Normalized MUX signal
Time (ms)
c) 
Figure 6 a) Fine-grained indoor localization and navigation in 
successive instants. Signal acquisition across cell C2,2 at t1, t2 and 
t3, On the top the transmitted channels packets  are decoded [R, G, 
B, V]. 
Each decoded message carries the node address of the 
transmitter. The location in the network is decoded through 
the ID-BIT that carries the address of the node. Looking into 
the next block of six bits, their position in the network is 
assigned as: R3,2 G3,3B2,2V2,3 and linked with C2,2 cell. 
Comparing both P#1 in Figure 6b and Figure 6c, we notice 
that although the position inside the navigation cell is the 
same (same level) the location inside the network is 
different. In Figure 6b the nodes R1,2 [001 010], G1,3 [001 
011], B2,2 [010 010] and V2,3 [010 011] are recognized and 
linked respectively, to the cell C1,2  while in Figure 6c the 
assigned nodes are R3,2 G3,3B2,2V2,3 belong to C2,2. At t4 and 
t5 the same two channels are received and linked with P#5, 
in both figures, the assigned nodes are, B2,2 V2,3, same 
position but in different cells (same level in both figures). 
Figures 7b and 7c display the MUX/DEMUX signals 
acquired, in a hexagonal environment (Figure 2b), at six 
successive instants. The receiver was moved along a known 
pattern path as described in Figure 7a, the arrows illustrate 
the simulated path in six successive instants (t1 to t6). Fine-
grained indoor localization and LED based navigation is 
illustrated. At the right hand of both figures, the 4-bit binary 
codes are pointed out at the correspondent levels.  
Taking into account Figure 1b and the frame structure 
(Figure 3b), results show that at t1 the receiver was located 
at P#1 [1101]/ R0,-1 G-1,-1 V0,0. At t2, it arrives to P#7 
[1111]/R0,-1 G-1,-1 B1,0V0,0, then, at t3, moves towards P#2, 
[1011]/ R0,-1 B1,0V0,0. At t4, goes to P#7 [0111]/ G1,1 B1,0V0,0 
and at t5, arrives to P#6 [1111]/R2,1 G1,1 B1,0V0,0. At t6, the 
receiver enters in the second ring, where the 4-binary code 
[1110] locates the position inside the cell (P#A) and the ID-
BIT of the received channels, R2,1 G1,1 B1,0 , its position 
inside the network. The main results show that, for both 
topologies, the location of a mobile receiver is achieved 
based on the LED-based navigation system. At the client’s 
end, positioning bits are decided by the received MUX 
signal (wavelengths and ID address of the received 
channels). Fine grained localization was achieved by 
detecting the wavelengths of the received channels in each 
cell (Table I). Nine sub-regions fill each square cell while in 
the hexagonal, due to the existing XY symmetry, eighteen 
possible sub-regions can be designed.  
The use of the square, hexagonal or both topologies 
depends on the layout of the environment. In Figure 8, and 
for a shopping mall, an example of the mix of both is 
illustrated. Here, the different areas transmit payload data 
according to the areas they are located. In concentric 
layouts, to fill all the space with hexagon, it presents 
advantages (cosmetics, machines and vegetables areas). 
Here, the client can move around and walk between the 
different rings toward the outside region. In an orthogonal 
layout (hall), the square topology is the best. It allows 
crossroads and the client can walk easily in the horizontal, 
vertical or both directions. 
 

57
International Journal on Advances in Intelligent Systems, vol 12 no 1 & 2, year 2019, http://www.iariajournals.org/intelligent_systems/
2019, © Copyright by authors, Published under agreement with IARIA - www.iaria.org
1
2
3
4
6
R
G
B
V
t6
X
Y
5
A
t1
1
2
3
4
5
6
8
(0,0)
a) 
 
 
0.0
0.5
1.0
1.5
2.0
2.5
0.0
0.5
1.0
P#2 (t3)
P#1 (t1)
P#7 (t2)
[1011]
[1101]
[1111]
RGBV
Payload data
ID
Sync
V0,0
B1,0
G-1,-1
R0,-1
 
 
Normalized MUX signal
Time (s)
b) 
 
0.0
0.5
1.0
1.5
2.0
2.5
0.0
0.2
0.3
0.5
0.6
0.8
0.9
1.1
1.2
P#A (t6)
P#3 (t4)
P#6 (t5)
[1110]
[0111]
[1111]
RGBV
Payload data
ID
Sync
V0,0
B1,0
G1,1
R2,1
 
 
Normalized MUX signal
Time (s)
c) 
Figure 7 
a) Fine-grained indoor localization and navigation, as illustrated 
by the arrows. b) Signal acquisition at t1, t2 and t3. c) Signal acquisition at 
t4, t5 and t6  On the top the transmitted channels packets [R, G, B, V] are 
decoded 
 
Cosmetics 
Hall
Red
Green
Blue
Violet
Transmitters
 
Figure 8 
Fusion of hexagonal and square topologies. Example of a 
ceiling plan. in a shopping mall, with different layout areas. A four-code 
assignment for the RGBV LEDs is used as positioning technique. 
C. Bidirectional communication 
Bidirectional communication between infrastructure 
and the mobile receivers can be established. Downlink 
communication occurs from the ceiling lamps to the mobile 
receiver.  
 
Figure 9 
Frame structure representation. a) Codification used to in a 
request message in P#1. R3,4 , G3,3, B2,4 and V2,3 are the transmitted node 
packet, in a time slot. b) Encoded message response of a local controller 
emitter to the traveler at P#1\ R3,4 , G3,3, B2,4 and V2,3. 
Uplink communication is defined from the receiver to a near 
indoor billboard linked to the control manager. Each emitter 
broadcasts a message with its ID and payload data which is 
received and processed by the receiver. Using a white 
polychromatic LED as transmitter, the receptor sends to the 
local controller a message “request” with its location (ID) 
and adds its queries as payload data (right track, shops, 

58
International Journal on Advances in Intelligent Systems, vol 12 no 1 & 2, year 2019, http://www.iariajournals.org/intelligent_systems/
2019, © Copyright by authors, Published under agreement with IARIA - www.iaria.org
products, etc,). For path coordination, the local controller 
emitter sends the “response” message with the required 
information. 
In Figure 9a an example of the codification used in a 
“request” message is illustrated. Thus, R3,4 , G3,3, B2,4 and V23 
are the transmitted node packets, in a time slot, inside the 
cell in position P#1. In Figure 9b, a “response” message 
from the controller emitter located at the billboard is 
displayed. The second block (INFO) in a pattern [000000] 
means that a response message is being sent by the 
controller manager. The third block (6 bits) identifies the 
receiver (ID) for which the message is intended. Here, the 
controller [000000] responds to a request of a traveller 
located in position P# 1 (R3,4 , G3,3, B2,4 and V23) (see Figure 
2a). 
In Figure 10, the MUX signal assigned to a “request” 
and a “response” message are displayed. In the top the 
decoded information is presented. In the right side, the 
match between the MUX signal and the 4-binary code is 
pointed out. 
0.0
0.5
1.0
1.5
2.0
2.5
0.0
0.5
1.0
 INFO 
#3
#3
0 1 1 0 1 0
0 1 1 0 1 0
0 1 0 0 1 0
0 0 0 0 0 0
0 1 0 0 1 0
0 0 0 0 0 0
Response
Request
[0000]
[0010]
[1000]
  ID    
B2,2
R3,2
RGBV
[1010]
 Sync
      Payload Data    
B2,2
R3,2
 
 
I MUX nor
Time (ms)
 
Figure 10. MUX/DEMUX signals assigned to a “request” and a 
“response” message. On the top the transmitted channels packets 
[Xi,j] are decoded. 
Here, in a time slot, the traveler, in position #3 (R3,2 , 
B2,2), sends to the central controller the message “request” 
in order to add the points of interest (shops or the right 
track). After that it is advised, through a “response” 
message, that the request was received, how to reach its 
destination and how to use location based advertising. 
 Taking into account the frame structure, results show 
that the codification of both signals is synchronized (Sync). 
The request message includes the complete address of the 
traveler (Sync+ID) and the help need (Payload Data). In the 
“response” message the block (ID), in a pattern [000000], 
means that a response message, from the local manager, is 
being sent. The next block (6 bits) identifies the address 
(INFO) for which the message is intended and finally in the 
last block appears the requested information (Payload Data). 
Here, the emitter controller [000000] responds to a request 
of a passenger located in position # 3 (R3,2 , B2,2) and sends 
to him the requested information. 
IV. 
CONCLUSIONS AND FUTURE TRENDS 
We have proposed a VLC LED-assisted navigation 
system for large indoor environments. For illumination 
purposes, data transmission and positioning, white LEDs 
were used. An a-SiC:H/a-Si:H pin/pin SiC optical 
MUX/DEMUX mobile receiver decodes the data and based 
on the synchronism and ID of the joint transmitters it infers 
its path location. A four-code assignment for the LEDs was 
proposed. Two cellular networks were tested and compared: 
the square and the hexagonal. Results show that, in large 
indoor environments, the use of VLC technology allows 
different cellular topologies where locations together with 
data transmission are achieved. The choice of one or both 
topologies depends 
mainly on the layout of the 
environment. Bidirectional communication between the 
infrastructure and a mobile receiver was also tested. 
Minding the benefits of VLC, it is expected that this type 
of communication will have an important role in positioning 
applications. Moving towards real implementation, the 
performances of such systems still need to improve. As a 
future goal, we plan to finalize the embedded application, 
for experimenting in several network layouts. 
ACKNOWLEDGEMENTS 
This work was sponsored by FCT – Fundação para a 
Ciência e a Tecnologia, within the Research Unit CTS – 
Center 
of 
Technology 
and 
systems, 
reference 
UID/EEA/00066/2013  
The projects: IPL/2018/II&D_CTS/UNINOVA_ISEL and 
by: 
IPL/IDI&CA/2018/LAN4CC/ISEL, 
are 
also 
acknowledge. 
  
REFEEENCES 
 
[1] Vieira M., Vieira M. A., Louro P., Vieira P., Fantoni 
A., “Light-Fidelity (Li-Fi) Optical Sensing and 
Detection in Large Indoor Environments,”The Ninth 
International 
Conference 
on 
Sensor 
Device 
Technologies and Applications, SENSORDEVICES 
2018. 
[2] Yang, C. and Shao, H. R., “WiFi-based indoor 
positioning,” IEEE Commun. Mag., vol. 53, no. 3, 150–
157 (Mar. 2015). 
[3] Lin, X. Y., Ho, T. W., Fang, C. C. , Yen, Z. S., Yang, 
B. J., and Lai, F., “A mobile indoor positioning system 
based on iBeacon technology,” in Proc. Int. Conf. IEEE 
Eng. Med. Biol. Soc., 4970–4973 (2015). 
[4] Huang, C. H., Lee, L. H., Ho, C. C., Wu, L. L., and Lai, 
Z. H., “Real-time rfid indoor positioning system based 
on Kalman filter drift removal and heron-bilateration 

59
International Journal on Advances in Intelligent Systems, vol 12 no 1 & 2, year 2019, http://www.iariajournals.org/intelligent_systems/
2019, © Copyright by authors, Published under agreement with IARIA - www.iaria.org
 
location estimation,” IEEE Trans. Instrum. Meas., vol. 
64, no. 3, 728–739, (Mar. 2015). 
[5] Hassan, N. U., Naeem, A., Pasha, M. A., Jadoon, T., 
and Yuen, C., “Indoor positioning using visible led 
lights: A survey,”ACM Comput. Surv., vol. 48, 1–32 
(2015). 
[6] Harle, R., “A survey of indoor inertial positioning 
systems for pedestrians,” Commun. Surv. IEEE 
Commun. Surveys Tuts., vol. 15, no. 3, 1281–1293, 
(2013). 
[7] Sun, Y. X., Liu, M., and Meng. Q. H., “Wiﬁ signal 
strength-based robot indoor localization,” in IEEE 
International 
Conference 
on 
Information 
and 
Automation (2014). 
[8] Bahl P. and Padmanabhan V. N., “Radar: an in-building 
rf-based user location and tracking system,” in Proc. of 
IEEE INFOCOM, (2000). 
[9] Liu M., and Siegwart, R., “Dp-fact: Towards 
topological mapping and scene recognition with color 
for 
omnidirectional 
camera,” 
in 
Robotics 
and 
Automation (ICRA), IEEE International Conference, 
3503 –3508 (2012). 
[10] Liu, M., Qiu, K., Li, S., Che, F., Wu, L., and Yue, C. P., 
“Towards indoor localization using visible light 
communication for consumer electronic devices,” in 
Proceedings of the IEEE/RSJ International Conference 
on Intelligent Robots and Systems (IROS), Chicago, the 
USA (2014) 
[11] Ozgur E., Dinc, E., Akan, O. B., “Communicate to 
illuminate: State-of-the-art and research challenges for 
visible 
light 
communications,” 
Physical 
Communication 17 72–85, (2015). 
[12] Armstrong, J., Sekercioglu, Y., Neild, A., "Visible light 
positioning: 
a 
roadmap 
for 
international 
standardization," Communications IEEE, vol. 51, no. 
12, pp. 68-73, (2013). 
[13] Panta K., Armstrong, J., “Indoor localisation using 
white LEDs,”Electron. Lett. 48(4), 228–230 (2012). 
[14] Komiyama, T., Kobayashi, K., Watanabe, K., Ohkubo, 
T., and Kurihara, Y., “Study of visible light 
communication system using RGB LED lights,” in 
Proceedings of SICE Annual Conference, IEEE, 2011, 
pp. 1926–1928. 
[15] Wang, Y., Wang, Y., Chi, N., Yu, J., and Shang, H., 
“Demonstration of 575-Mb/s downlink and 225-Mb/s 
uplink 
bi-directional 
SCM-WDM 
visible 
light 
communication using RGB LED and phosphor-based 
LED,” Opt. Express 21(1), 1203–1208 (2013). 
[16] Tsonev, D., Chun, H., Rajbhandari, S., McKendry, J., 
Videv, S., Gu, E., Haji, M., Watson, S., Kelly, A., 
Faulkner, G., Dawson, M., Haas, H., and O’Brien, D., 
“A 3-Gb/s single-LED OFDM-based wireless VLC link 
using a Gallium Nitride μLED,” IEEE Photon. Technol. 
Lett. 26(7), 637–640 (2014). 
 
[17] O’Brien, D., Minh, H. L., Zeng, L., Faulkner, G., Lee, 
K., Jung, D., Oh, Y. and Won E. T., “Indoor visible 
light communications: challenges and prospects,” Proc. 
SPIE 7091, 709106 (2008). 
[18] Schmid, S., Corbellini, G., Mangold, S., and Gross, T. 
R., “An LED-to-LED Visible Light Communication 
system with software-based synchronization,” in 2012 
IEEE Globecom Workshops, 1264–1268 (2012). 
[19] Jovicic, A., Li, J., and Richardson, T., “Visible light 
communication: opportunities, challenges and the path 
to market,” Communications Magazine, IEEE, vol. 51, 
no. 12, pp. 26–32 (2013). 
[20] S T. Komine and M. Nakagawa, “Fundamental analysis 
for visible-light communication system using led 
lights,” Consumer Electronics, IEEE Transactions on, 
vol. 50, no. 1, pp. 100–107, (2004). 
[21] Monteiro E., and Hranilovic, S., “Constellation design 
for color-shift keying using interior point methods,” in 
Proc. IEEE Globecom Workshops, Dec., 1224–1228 
(2012).  
[22] Vieira, M., Louro, P., Fernandes, M., Vieira, M. A., 
Fantoni A., and Costa, J., “Three Transducers 
Embedded into One Single SiC Photodetector: LSP 
Direct Image Sensor, Optical Amplifier and Demux 
Device” Advances in Photodiodes InTech, Chap.19, 
403-425 (2011). 
[23] Vieira, M.A., Louro, P., Vieira, M., Fantoni, A., and 
Steiger-Garção, A., “Light-activated amplification in 
Si-C tandem devices: A capacitive active filter model” 
IEEE sensor journal, 12, NO. 6, 1755-1762 (2012). 
[24] Vieira M. , Vieira, M. A., Vieira, P., Louro P., 
“Coupled data transmission and indoor positioning by 
using transmitting trichromatic white LEDs and a SiC 
optical MUX/DEMUX mobile receiver,” Proc. SPIE. 
10231, Optical Sensors 2017, 102310G. (May 16, 
2017) doi: 10.1117/12.2265189 (2017). 
[25] Vieira, M. A., Vieira, M., Silva, V., Louro, P., Costa, J., 
“Optical signal processing for data error detection and 
correction using a-SiCH technology” Phys. Status 
Solidi C 12, No. 12, 1393–1400 (2015). 
[26] Vieira, M. A., Vieira, M., Silva, V., Louro, P. and 
Barata, M., “Optoelectronic logic functions using 
optical bias controlled SiC multilayer devices”. MRS 
Proceedings, 1536, 91-96 (2013). 
[27] Vieira, M. A., Vieira, M., Costa, J.,  Louro, P., 
Fernandes, M., Fantoni, A., “Double pin Photodiodes 
with two Optical Gate Connections for Light 
Triggering: A capacitive two-phototransistor model,” in 
Sensors & Transducers Journal Vol. 10, Special Issue, 
February  2011, 96-120 (2011). 
[28] Vieira, M. A., Vieira, M., Louro, P.; Silva, V., Vieira, 
P., "Optical signal processing for indoor positioning 
using a-SiCH technology," Opt. Eng. 55 (10), 107105 
(2016), doi: 10.1117/1.OE.55.10.107105 (2016).  

