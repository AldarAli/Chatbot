Modeling the Dynamics of Insulin-Glucose Subsystem Using a Multi-agent
Approach Based on Knowledge Communication
Sebastian Meszyński, Oleksandr Sokolov
Faculty of Physics, Astronomy and Informatics
Nicolaus Copernicus University
Toruń, Poland  
{sebcio, sokolov}@fizyka.umk.pl
Abstract — Mathematical analytical modeling and computer
simulation of the physiological system is a complex problem
with a great number of variables and equations. The objective
of the present research is to describe the insulin-glucose
subsystem using multi-agent modeling based on intelligence
agents. Such an approach makes the modeling process easy
and clear; moreover, new agents can easily be added to the
investigations.
Keywords
-
multiagent
paradigm;
compartments;
normoglycemia; insulin-glucose system; physiology.
I.
INTRODUCTION
Expert systems have emerged as developed methods of
artificial intelligence in the eighties of the last century. The
most-widely used definition of an expert system is the one
which defines an expert system as a computer program that
uses the procedures for requesting a solution to non-
algorithmic problems, or, in other words, problems requiring
the participation of experts in the field (experts) in order to
benefit from their knowledge or expertise. At the moment,
expert systems are these computer programs which perform
complex
tasks
with
high
requirements
on
intellectual
capacity, and manipulate large amounts of input data. The
basic features distinguishing expert systems from other
computer programs are as follows:
•
the use of knowledge instead of the data. It is stored
separately and independently from the rest of the
executive system.
•
the knowledge base is created and stored in a
symbolic form. Any kind of inference is conducted
on the basis of the symbolic computations that can
be compared to the manipulation of human natural
language. A symbolic representation of knowledge is
understood as all kinds of rules, semantic networks.
•
the reasoning often involves drawing conclusions
from the so-called meta-knowledge and are used for
learning
mechanisms
-
possessed
knowledge
becomes
enlarged
(generalization)
with
a
new
phenomenon or is updated in the form of a
replacement of the wrong rules with the valid rules;
such systems are also able to justify given answers
corresponding
to
explanations
of
a
deductive
process.
Extended possibilities of expert systems in the fields of
the knowledge-acquirement speed, the analysis of the
potential solutions to a problem and the decision concerning
a definitive answer, led to the development of multi-agent
systems. The main difference between systems and multi-
agent systems is based on the indirect contact of expert
systems with the environment. Input does not come from
sensors, but from an additional agent which is usually
human. Multi-agent systems are complex systems, from
communication and cooperation among agents themselves to
pursuit
of
a
common
objective.
This
design
allows
troubleshooting of a diffuse character or computationally
complex one. When teaching multi-agent systems, the
concept of agent is presented as an autonomous object with
the initiative of action based on the observation of the
environment in which it is located. It also has the ability to
use the resources of this environment, and the motivation is
to solve the problem posed in front of it. This definition
forces the agent to know sensor inputs through which it can
receive signals from the environment, and effectors which
will be able to influence the surrounding environment. The
most important task of the agent is to decide which of the
possible courses of action is the best at the time of
knowledge about the problem to achieve this goal.
This branch of science concerns the resolution of the
nature diagnostic problems and therapeutic nature using a
large base of knowledge and a broad spectrum of causes and
effect relationships between different states of health of the
patient and the interaction between different treatments
[1][2][3] which should simultaneously be performed as part
of the patients’ overall treatment plan. This rather specific
branch of science is based on expert knowledge - here the
doctor is a good candidate to use artificial intelligence
systems. These systems are an addition to proper disease
diagnosis, correct diagnosis, and proper treatment process in
order to overcome the disease or reduce complications of the
disease. Examples of medical problems should also mention
the following: databases of patients, search for medical
knowledge, support for medical decisions, evaluation of the
efficacy, etc. At the same time, the use of multi-agent
systems is implemented in order to eliminate the drawbacks
of the previous solutions in medical systems that showed a
limited autonomy, limited interaction with the environment
and a smaller store of knowledge to solve a problem. The
new directions of research focus, for example, on the
treatment of advanced stage by many physicians at the same
55
Copyright (c) IARIA, 2015.     ISBN:  978-1-61208-437-4
INTELLI 2015 : he Fourth International Conference on Intelligent Systems and Applications

time. See [4][5][6][7][8]. The examples of the use of these
systems in order to improve the quality of treatment can be
found in many works. They can also be used as part of the
healthcare system, ranging from sending ambulances to
optimize the route, choosing a hospital that is best equipped
with the apparatus necessary for the patient transported, to
supporting drug treatment and analysis of its implications.
More information on the application of multi-agent
systems in medicine and related sciences can be found in
publications [9][10][11]. In the publication [12], multi-agent
systems have been subjected to critical analysis as a result of
which it is possible to define the areas of application
describing artificial intelligence systems and limitations that
must be taken into consideration in order to benefit from
these opportunities.
II.
THE USE OF MULTI-AGENT SYSTEM IN
PHARMACOKINETICS
A. Compartments theory
A separate group of medical problems are the methods of
description, analysis and prediction of the dynamics of the
selected substances in a human body. The most common
methods used for the description and analysis of these
phenomena are based on differential equations, whose
construction and analysis are based on major or minor
assumptions and approximations. One of the said methods is
described by using a compartments model, as illustrated in
Fig.1. On the basis of such a model, the appropriate
equations describing the dynamics of the system created are
built. The modeling assumes the existence of so-called
compartments in the body where a uniform concentration of
the substance to be analyzed is located.
In some models, the number of compartments may be
higher
due
to
an
attempt
to
approach
mathematical
description of transport of the substance in the body to real
physiological value, and fostering real pharmacokinetics of
the substance. In the description, the multi-compartments
model is a particularly useful application of matrix (1)
which, in the final finished form, allows the calculation of
each point of the interest stream.
However, it should be emphasized that a task of this type
is difficult, or, at least, problematic.
ௗ࢓(௧)
ௗ௧
= ࡭࢓(ݐ)+ࡲࢊ(ݐ)  (1) 
satisfying the initial conditions:
࢓(ݐ=0)=࢓(0)  (2) 
Finally, it can be shown that the solution is determined
by the formula:
࢓(ݐ)=݁࡭௧࢓(0) + ∫ ݁࡭(௧ିఛ)
௧
଴ࡲࢊ(߬)݀߬ (3) 
Given the complexity of physiological systems, one often
seeks to get a quantitative result rather than qualitative.
B. The compartment model in terms of multi-agent
paradigm
In this view, the agent is to be understood as any
clearance reflecting the specified area of the body which
changes the concentration of the test substance. The agent’s
behavior
is
defined
by
the
function
describing
the
distribution of substances seen as a change in its output
stream φ01. If the agent represents a compartment through
which a certain amount of the tested substance flows, then
this agent (its behavior) is defined by an appropriate
transmittance reflecting changes in the output to changes in
the agent at the entrance agent – Fig. 2.
Figure 2.
Agent concept diagram representing the compartment:
a) the agent as the source of the substance,
b) the agent intermediary in the flow of the substance.
The description of one compartment agent model means
determining the flux distribution function φ01 and the time
step t defining the rate of change of the flux. In addition, one
must declare the initial conditions - in this case the level of
drug concentration c(0) at t = 0. The initial level determines
the value at which the stream will begin to change over time.
Because the function is defined as the behavior of the agent,
it will show the direction and the rate of change. The flow of
the elimination of substances is given by:
߮଴ଵ = ݂(ݐ)=݇଴ଵ݉ଵ(ݐ)  (4) 
Figure 1.
An example of a compartment model (the model has three
compartments here).
56
Copyright (c) IARIA, 2015.     ISBN:  978-1-61208-437-4
INTELLI 2015 : he Fourth International Conference on Intelligent Systems and Applications

and, by using the formula for the change of mass over
time:
ௗ௠భ(௧)
ௗ௧
= −݇଴ଵ݉ଵ(ݐ)  (5) 
We obtain the function to determine changes in the
weight of the agent:
݉ଵ(ݐ)=݉ଵ(0)݁ି௞బభ௧ 
 
(6) 
where m1(0) represents the mass of a drug at time t = 0.
Therefore, the effluent of the agent can be represented as:
߮଴ଵ(ݐ)=݇଴ଵ݉ଵ(ݐ)=݇଴ଵ݉ଵ(0)݁ି௞బభ௧ 
 (7) 
One can also specify the variation of weight of the U01(t)
excreted with the agent in the process of elimination:
ܷ଴ଵ(ݐ)=∫߶଴ଵ݀ݐ=݉(0)(1−݁ି௞బభ௧)
௧
଴
 
 (8) 
For the purposes of multi-agent simulation environment,
the time t is a discrete time in which the agent generates a
"signal" for the appropriate behavior.
tκ+1 = tκ + ∆t  
 
(9) 
where ∆t is the time step increment function describing 
the agent behavior.
Figure 3.
Simulation graphs for the equations (6) (7) (8) and the value
generated by the agent.
III.
THE OVERALL CONCEPT OF MULTI-AGENT MODEL
A. Multi-agent concept
The section below will focus on the concept of a multi-
agent system where the work is aimed at the restoration of
glucose homeostasis. The amount of glucose supplied from
the gastrointestinal tract into the blood depends on the
amount, composition and frequency of meals. On the other
hand, the energy demand of tissues and organs is variable.
The concentration of glucose in the blood of a healthy
individual is maintained within relatively narrow limits of
about 4.5 - 9.0 mmol/L (81 - 162 mg/dL). Mechanisms of
preventing glucose concentration decline in the blood as well
as its excessive growth are extremely important for the
proper functioning of the body. These mechanisms act on the
substrate, hormonal, and nervous system.
The principle of the mechanism of the substrate is
directly controlled by the change of glucose in tissues
depending on the flow to the cells, or the availability of the
other substrates.
As a part of the hormonal control, the most important
hormone lowering blood glucose – insulin – should be
considered. The effect of insulin in the liver mainly involves
stimulation
of
glycogen
synthesis,
and
inhibition
of
gluconeogenesis. The insulin found in muscle and fat will
affect the glucose transporter proteins across cell membranes
stimulating glucose uptake by these tissues as well as
stimulating glucose oxidation and glycogen synthesis [13].
The indirect effects of insulin uptake, oxidation and size of
the glycogen involves its rate inhibiting effects of lipolysis
and oxidation of fats [14][15]. The nervous control of blood
glucose is mediated by two branches of the autonomic
nervous
system.
The
parasympathetic
nervous
system
stimulates glycogen synthesis in the liver and secretion of
insulin, contributing in this way to lower blood glucose.
The activation of this system is associated with the
consumption of a meal (olfactory stimuli, taste), and the
presence of food in the gastrointestinal tract.
Based on the above-described three ways of adjusting the
level of glucose in the blood, we propose a multi-agent
model that reflects, as much as possible, the mechanism of
action
and
structures
responsible
for
normoglycemia.
Considering the above, we propose a layered multi-agent
model which closes an appropriate regulatory mechanism in
each layer.
The proposed model consists of three layers – Fig. 4:
•
layer 1 - base layer where the agents representing the
cell are located. This layer reflects the basic building
block of individual cell structure of the body's
organs. This layer processes occur on/in a cell scale .
Layer 1 can be called the cells layer.
•
layer
2
-
layer
of
organs,
which
enables
communication between them through biochemical
signals. It is the layer of the actual process of
normoglycemia.
Layer
2
can
be
called
the
physiological layer.
•
layer 3 - layer representing the selected areas of the
brain directly related to the stabilization process of
glucose. This layer simulates the processes involving
information flow control of the glucose and insulin
dynamics in the blood, and provides the opportunity
to simulate the psychological stimuli that affect
blood sugar levels. Layer 3 can be called the
psychological layer.
57
Copyright (c) IARIA, 2015.     ISBN:  978-1-61208-437-4
INTELLI 2015 : he Fourth International Conference on Intelligent Systems and Applications

Figure 4.
The idea of layered multi-agent model.
In the described approach, the emphasis is on the
modeling of organs which play an active role in glucose
homeostasis.
It should be stipulated that having this layer representing
the single-cell level create the opportunities for simulation
also in the cellular scale and molecular - if incorporated into
the cell interaction and exchange between biochemical
information.
Adopted layers number 2 and 3 are constructed in
accordance with the agents representing organs involved in
normoglycemia,
and
the
environment
fuzzy
logic
programming language to build a simple knowledge base.
The multi-agent environment is built on the basis of the
JADE environment and programming language Java. The
agents act as the appropriate organ (pancreas, liver, adipose
tissue, gastrointestinal tract as a source of food, and insulin-
independent mechanism for glucose utilization). Each agent
is assigned its own task, in the form of behavior described by
using the tool, or knowledge base. The first description
applies to a situation in which the agent is the source
medium, i.e. food in the form of glucose. Then the agent is
treated as the one producing its own interior medium which
then goes into the environment common to all agents.
Specific interactions between agents are shown in Fig. 5.
This approach allows to make more complex and advanced
analysis than the models based on differential equations. The
use of this type of multi-agent model has many advantages
over analytical methods:
•
Rules can be easily modified
•
The
objective
function
and
the
definitions
of
limitations may be more complex
•
The attributes of individual organs / agents can be
easily defined
•
More opportunities to analyze simulation results.
Such agents are obtained by subtracting from the
differential
equation
members
who
bring
changes
representing the response of the organ increases or decreases
in glucose and / or insulin to the equation. Fig. 6 presents a
concept for the equation based on Hardy-Stolwijk to show a
method of identifying agents that are presented in Fig. 5.
Figure 5.
A schema connection beetwean agents-organ.
Figure 6.
Equation of Stolwijk-Hardy model used to separate the
functional parts of multi-agent system.
B. Agent dynamic models based on fuzzy logic rules
Each agent of glucose-insulin model answers to its
behavior and products the output according to its inner state.
For instance, the agent representation of Stolwijk&Hardy
model gives the members of the right side of the equations
an output of the agent. These members have parameters
(alfa, beta, etc.) whose values depend on the case modeled
(healthy, or ill man). Moreover, during the simulation, we
have the same values of these parameters that produce the
linear response and not always are realistic (the STELLA
model is used for this correction).
We propose generating the appropriate output using
fuzzy rule bases that can produce any complex nonlinear
58
Copyright (c) IARIA, 2015.     ISBN:  978-1-61208-437-4
INTELLI 2015 : he Fourth International Conference on Intelligent Systems and Applications

function. Moreover, such an approach can be easily accepted
by a medic due to their simplicity and clearness.
The simplest way to provide fuzzy rule base is illustrated
in the example of memberߴ݃݅ of Stolwijk&Hardy model.
Agent 4 is response to this output.
If parameterߴ=ܥ݋݊ݏݐ, we can use the memberߴ݃݅ as
the simplest output. In other cases, we have to use “If”
condition, or rule (for instance, in the cases of healthy man,
or type-II diabetes one). In a more complex behavior, we
have to construct the set of rules (rule base).
The fuzzy rule base considers all variables as fuzzy sets
with appropriate membership functions. Moreover, we can
perfectly avoid now the parameterߴ, which is not easy to
understand for a medic.
Let us consider the fuzzy sets for variables insulin ݅ and
glucose g. After normalization, the membership functions for
these variables can be shown as in Fig.7.
Figure 7.
Membership funcitons of variables insulin and glugose
(normalized).
The rules can be formed in Mamdani or Taskagi-Sugeno
manner. In Mamdani model, we use fuzzy sets both in
premise and conclusion of the rules. Fig. 8 shows the
variables connection.
Figure 8.
Structure of agent’s rules.
Therefore, in our case, we could create 9 rules for fuzzy
sets of variables insulin ݅ and glucose ݃ with 3 membership
functions. The rules have the following form:
If Insulin is Small and Glucose is High then Glucose is
Middle.
The set of rules for agent 4 is shown in Fig. 9.
Figure 9.
A set of rules for agent 4.
The Mamdani style inference is shown in Figure 10.
Figure 10.
Inference engine of Mamdani model.
The function of agent output is shown in Figure 11.
Figure 11.
Surface of rule base mapping.
The advantages of the approach above include easiness
and clearness for agent output description (we connect only
semantic variables like insulin ݅ and glucose ݃ without
additional coefficients likeߴ) on one hand, and complex
nonlinear behavior of the agent, on the other.
IV.
RESULTS
Thanks to our proven analytical methods for solving the
equations in Fig. 6, we achieve an objective method for
determining the benefit of the resulting simulation based on a
the multi-agent system. In order to verify the correct
operation of multi-agent system, it was asked to write the
software multi-agent system in JAVA with using JADE
multi-agent environment. As a result of the development of
59
Copyright (c) IARIA, 2015.     ISBN:  978-1-61208-437-4
INTELLI 2015 : he Fourth International Conference on Intelligent Systems and Applications

the agents that have been implemented in philosophy
according to Fig. 5, simulation results such as shown in
Fig. 12 were obtained.
Figure 12.
The results created based on work of multi-agent system.
V.
CONCLUSION AND FUTURE WORK
The agent approach allowed us to modify the dynamic
model of insulin-glucose system in the direction of modeling
of inner behavior of each agent and communication with
each other. Such modeling gives the possibility to address
more complex behavior (not only with coefficients in the
equations like in Fig. 6 but using fuzzy relations between
parameters).
With the presented approach, we obtained satisfactory
results that coincide with the results obtained from the
simulation of the analytical equations. The use of fuzzy logic
allows
to
dispense
with
rigidly
assigned
coefficients
(parameters) models, allowing a more flexible approach. One
can take into account many factors that can shape the
response
to
individual
agents
to
changes
in
their
environment, through which this study should understand the
changes
in
insulin
sensitivity,
body
weight
changes,
efficiency of secretion of insulin, glucose half-life, e.g. Our
next efforts will be directed towards the communication
among agents for exchange of information about current
states and to take a common decision.
REFERENCES
[1]
B. L. Iantovics, “A Novel Mobile Agent Architecture. Proceedings of
the 4th In- ternational Conference on Theory and Application of
Mathematics and Informatics,” Albac county, Acta Universitatis
Apulensis, Vol. 11, 2006, pp. 295–306.
[2]
B.
L.
Iantovics,
“Cooperative
Medical
Diagnosis
Systems.
Proceedings of the International Conference Interdisciplinarity in
Engineering,” Tg. Mures, 2005, pp. 669–674.
[3]
R. Unland, “A Holonic Multi-Agent System for Robust, Flexible, and
Reliable Medical Diagnosis,” In: R. Meersman, Z. Tari (Eds.):
OTMWorkshops 2003, Springer- Verlag, LNCS, Vol. 2889, 2003, pp.
1017–1030.
[4]
J. Ferber, “Multi-Agent Systems: An Introduction to Distributed
Artificial Intelligence,” Addison Wesley, 1999.
[5]
A. Vesnenko, I. Popov, A. A. Pronenko, “Topo-Typology of the
Struc- ture of Full-Scaled Clinical Diagnoses in Modern Medical
Information
Systems
and
Technologies,”
Plenum
Publishing
Corporation Cybernetics and Systems Analysis, Vol. 38, 2002, No. 6.
[6]
B. L. Iantovics, “A Novel Diagnosis System Specialized in Difficult
Medical Diag- nosis Problems Solving,” Emergent Proprieties in
Natural and Artificial Systems, Understanding Complex Systems,
Springer-Verlag, Heidelberg, 2006, pp. 187–197.
[7]
St. Kirn, “Ubiquitous Healthcare: The OnkoNet Mobile Agents
Architecture,”
In:
M.
Aksit,
M.
Mezini,
R.
Unland
(Eds.):
Proceedings of the 3rd International Conference Netobjectdays.
Objects, Components, Architectures, Services, and Applications for a
Networked World (NODe 2002), Springer-Verlag, Germany, LNCS,
Vol. 2591, 2003.
[8]
J. Huang, N. R. Jennings, J. Fox, “An Agent-Based Approach to
Health Care Management,” International Journal of Applied Artificial
Intelligence, Vol. 9, 1995, No. 4, pp. 401–420.
[9]
P. Redou, S. Kerdelo, C. Le Gal, G. Querrec, V. Rodin, J. F. Abgrall,
J. Redou, “Reaction-agents : first mathematical validation of a multi-
agent system for dynamical biochemical kinetics,” Lecture notes in
computer science, springer, 2005, 3808, pp.156-166.
[10] V. Rodin, G. Querrec, P. Ballet, F. Bataille, G. Desmeulles, J. F.
Abgrall, J. Tisseau, “Multi-Agents System to model cell signalling by
using Fuzzy Cognitive Maps,” Application to computer simulation of
Multiple Myeloma., 2009 Ninth IEEE International Conference on
Bioinformatics and Bioengineering.
[11] M. A. de Cerqueira Gatti, C. J. Pereira de Lucena, “An Agent-Based
Approach for Building Biological Systems: Improving the Software
Engineering for Complex and Adaptative Multi-Agent Systems,”
Monografias em iência da Computação, number 14/07, ISSN 0103-
9741.
[12] F.
Amigonil,
V.
Schiaffonati,
“Multiagent-Based
Simulation in Biology: A Critical Analysis,”
[13] D. Kelley, A. Mitrakou, H. Marsh, F. Schwenk, J. Benn, G.
Sonnenberg, M. Arcangeli, T. Aoki, J. Sorensen, M. Berger, “Skeletal
muscle glycolysis, oxidation, and storage of an oral glucose load,”
J. Clin. Invest. 81, 1563–157110.1172/JCI113489.
[14] P. J. Randle, P. B. Garland, C. N. Hales, E. A. Newsholme, “The
glucose fatty-acid cycle. Its role in insulin sensitivity and the
metabolic disturbances of diabetes mellitus,” Lancet. 1963;1:785–
789.
[15] M. Roden, T. B. Price, G. Perseghin, K. F. Petersen, D. L. Rothman,
G. W. Cline, G. I. Shulman, “Mechanism of free fatty acid-induced
insulin resistance in humans,” J Clin Invest 97: 2859-2865, 1999
60
Copyright (c) IARIA, 2015.     ISBN:  978-1-61208-437-4
INTELLI 2015 : he Fourth International Conference on Intelligent Systems and Applications

