Strict Priority Scheduler for Rate Controlled Transmission
Lukasz Chrost and Agnieszka Brachman
Silesian University of Technology
Gliwice, Poland
lukasz.chrost@polsl.pl, agnieszka.brachman@polsl.pl
Abstract—The paper proposes a modiﬁcation to the strict
priority scheduler, to guarantee the Quality of Service (QoS) of
a network with variable and undetermined bandwidth capacity.
The proposed modiﬁcations make it possible to accomplish
QoS along the path. The presented solution allows providing
the minimum guaranteed transmission rates for all active ﬂows
with the respect to their priorities and to provide the fair share
of the additional bandwidth. The scheduler also rejects ﬂows,
for which the minimum rate requirements exceed the available
bandwidth. Moreover, a simple algorithm for mapping the
WiMAX trafﬁc classes to the strict n-priority scheduler bands
is described. This allows providing WiFi - WiMAX internet-
working with the QoS support. The presented test results show
that the proposed scheduler preserves the deﬁned, minimum
transmission rates and improves the performance of the delay
and throughput.
Keywords-packet scheduling; strict priority scheduler; Qual-
ity of Service; wireless network.
I. INTRODUCTION
Nowadays, the real-time trafﬁc occupies a signiﬁcant per-
centage of the available bandwidth and Internet must evolve
to support the new applications. For the newly developed
applications and services such as VoD (Video on Demand),
VoIP (Voice over IP), VTC (Video-Teleconferencing), in-
teractive games, distributed virtual collaboration, remote
classrooms, grid computing, etc., the best effort delivery is
unacceptable, since in case of a congestion the Quality of
Service (QoS) and Quality of Experience (QoE) declines
to an unsatisfactory level. Therefore, the main and crucial
objective of the future Internet is to change the best effort
network into the Quality of Service controlled network.
Various applications may have different, sometimes strin-
gent requirements in terms of throughput, packet losses
and/or delays. It brings out the necessity to provide different
priorities to different applications, users or data ﬂows, or
to guarantee a certain level of performance to a data ﬂow;
in short, to provide the Quality of Service (QoS). Some
real time trafﬁc application will not be commercially viable
without the QoS guarantees. Enabling the differentiated
resource allocation is also very important from the providers
point of view. The predominant form of pricing currently in
practice in the Internet is per achievable throughput. A fee is
charged for the amount of bandwidth to access the network.
Therefore, the ability to provide the exact, required part of
the available bandwidth is crucial. Accomplishing this task
may seem easy, however the problem arises in case of the
unpredictable and variable environment.
Providing the minimum transmission rates is particularly
difﬁcult in the wireless networks. The varying conditions
of the wireless channel lead to the unpredictable trans-
mission channel parameters, i.e., the available bandwidth.
The physical radio transmission is based on the emission
of the electromagnetic waves. Radio waves decrease in the
amplitude as they propagate and pass through the obstacles.
In the urban environments the large throughput variations
may arise even in a Line-Of-Sight (LOS) conditions. This
happens especially due to the moving vehicles in the radio
path as well as due to the multi-path effect.
WiFi [1] and WiMAX [2] are two common, low cost
technologies for providing the ubiquitous wireless Internet
access. WiFi provides high data rates up to 100 Mbps, within
the short ranges, usually used within buildings. WiMAX is
designed to offer throughput up to 70 Mbps, in 5 km range,
used for covering the large outdoor locations. Integrating
these two technologies is considered for the next generation
network technology [3]. To provide the WiMAX-WiFi inter-
networking a new solution for the last WiFi hop is necessary.
WiFi is especially prone to the bandwidth degradation
due to the varying conditions in the transmission channel,
due to the modulation changes. The knowledge of the
currently available bandwidth is crucial for providing the
guaranteed rates and/or delays. The bandwidth estimation
algorithms try to provide an accurate estimation of the
available bandwidth. However, due to the high variability
of the wireless channel throughput, most current techniques
produce relatively inaccurate results and long convergence
times.
The main contribution of this paper is the strict priority
scheduler designed to provide the minimum guaranteed
transmission rate for all active ﬂows with the respect to
their priorities and to provide fair share of the additional
bandwidth. The scheduler also rejects ﬂows, for which the
minimum rate requirements exceed the available bandwidth.
The proposed solution is applicable for the WiFi wireless
network, to accomplish QoS along the path. It is simple to
implement and does not require the bandwidth estimator.
Additionally, we provide a simple algorithm for mapping
the WiMAX trafﬁc classes to the strict n-priority scheduler
in order to provide the WiFi - WiMAX internetworking with
1
Copyright (c) IARIA, 2012.     ISBN:  978-1-61208-183-0
ICN 2012 : The Eleventh International Conference on Networks

the QoS support.
The rest of the paper is organized as follows. Section II
reviews the similar solutions and the priority schedulers
designed for the real-time services and link-sharing service
provisioning. In Section III, the proposed strict priority
scheduler is presented and the proof-of-concept tests are
depicted and explained. Section IV is devoted to the descrip-
tion of mapping of WiMAX classes to the strict n-priority
scheduler band. Finally, the paper is concluded and the future
work perspectives are presented in Section V.
II. RELATED WORK
Scheduling algorithm determines the allocation of the
bandwidth among the users, ﬂows or the service classes.
Packet scheduling algorithms are widely discussed in the
literature.
The QoS and packet scheduling are addressed by the
DiffServ (Differentiated Services) architecture [4]. For the
DiffServ several queuing and scheduling methods are asso-
ciated, namely the priority scheduling and the Weighted Fair
Queuing (WFQ).
The methods based on the priority scheduling are de-
scribed in [5], [6]. Priority scheduling can reduce the packet,
delay, jitter and loss for the high priority trafﬁc. The Strict
Priority (SP) scheduling is a simple and common solution.
It provides the preferential treatment for the high priority
classes, however at the cost of starving the lower priority
trafﬁc. The SP serves the high priority trafﬁc queue, until it
is empty and then moves to the lower priority queues. SP
discipline itself is not controllable, therefore it cannot handle
the starvation problem. Several modiﬁcations have been
proposed to alleviate this problem. Authors in [7] propose to
assign a parameter to each priority queue, which determines
the extent, to which the priority queue is served. Their
Probabilistic Priority (PP) discipline provides the minimum
average throughput and the delay guarantees. However the
algorithm does not assume that the resources may be scarce.
WFQ attempts to provide a share of bandwidth for each
class or ﬂow in proportion to their speciﬁed rates. WFQ and
its variants are described in [8]–[11].
The Weighted Fair Queuing (WFQ) [9] is a packetized
Generalized Processor Sharing (GPS) algorithm [9], [12],
which works as follows. All trafﬁc is classiﬁed into the so-
called trafﬁc classes i. Classes can be either individual ﬂows
or a bunch of ﬂows with similar transmission requirements.
Each class is assigned a positive weight φi, which speciﬁes
the minimum share of the available bandwidth C. This
weight is also used for the distribution of the excess capacity,
when a particular class does not fully use its bandwidth’s
share. Each backlogged trafﬁc class, i.e., the class that has
the packets waiting for the transmission in its queue or class,
which packet is in service, receives the guaranteed service
rate ri:
ri =
φi
P φC,
where P φ is the sum of the weights for all trafﬁc classes.
GPS offers the protection among trafﬁc classes, along
with the full statistical multiplexing. GPS is an idealized
scheduler, based on the assumption, that the capacity is
inﬁnitely divisible, which means that several packets can
be served at the same time. Since in reality, the trafﬁc is
composed of the discrete packets sent in sequence, GPS
cannot be implemented in a real system.
The packet scheduling is crucial for providing any QoS
guarantees for the multiple service classes or priorities.
Majority of proposed solutions requires information con-
cerning the current bandwidth. The knowledge of bandwidth
capacity is elementary. If it is not possible to guarantee the
required, adequate performance, i.e., of a voice conversation,
it is more beneﬁcial to block the call rather than accept
and experience excessive delays and packet drops. Therefore
rejecting unﬁtting ﬂows is a desired feature. To provide the
efﬁcient and stable transmission through the heterogeneous
network, rate control, applied to all active ﬂows, is necessary.
Providing Qos in WiMAX-WiFi integrated network is
very challenging. WiMAX standard incorporates QoS fea-
tures into the Media Access Control (MAC) layer. It imple-
ments the signalling and bandwidth allocation algorithms,
thanks to which, the trafﬁc with the different QoS require-
ments may be jointly regulated to make the best use of the
available bandwidth. On the other hand, WiFi provides only
the prioritized QoS introduced by the 802.11e enhancement
[13], without any bandwidth-share guarantees.
The problem of the WiMAX and WiFi integration is
discussed in [14]. Authors present an integrated Access
Point, which combines the WiMAX subscriber station and
WiFi Access Point. However the authors do not provide any
scheduling strategy. In [15], an integration model based on
the trafﬁc mapping and signalling is presented. The authors
describe the scheduling algorithm, which provides the QoS
in terms of the delay bound for the real time trafﬁc and the
buffer bound for the non real time trafﬁc. Nonetheless, they
do not consider the bandwidth variations.
III. STRICT PRIORITY SCHEDULER WITH THE MINIMUM
AND MAXIMUM RATES GUARANTEES
The proposed strict priority-based scheduler with the
minimum and maximum rates guarantees is designed to
provide the following:
• Enforcement of the minimum guaranteed transmission
rates for the existing ﬂows, according to their priority.
• Rejection of the non-provisioned ﬂows.
• Equal distribution of the additional bandwidth among
active ﬂows, up to their maximum transmission rates.
• Fast detection of the bandwidth capacity degradation.
2
Copyright (c) IARIA, 2012.     ISBN:  978-1-61208-183-0
ICN 2012 : The Eleventh International Conference on Networks

Figure 1.
Strict priority based system
The aforementioned functionality is especially important
for variable transmission channels, i.e., wireless networks.
This method also allows passive estimation of the available
bandwidth, however only if the link utilization is high.
The strict priority based system consists of the data
queue and two virtual token bucket queues (the minimum
rate token queue and the maximum rate token queue) for
each transmission ﬂow. The schematic representation of the
algorithm is depicted in Figure 1. The virtual token queues
are the standard TBF (Token Bucket Filter) queues. Tokens
are added to the bucket every 1/ratemin and 1/ratemax
seconds. If there is no ratemax deﬁned, the corresponding
queue is always full. The parameters ratemin and ratemax
are determined by the external system. All queues have size
limits.
Every cycle requires up to three passes and ends if the
packet is dequeued. The ﬁrst two passes start from the queue
with the highest priority. The ﬁrst pass searches for the pack-
ets belonging to the ﬂow with the non-empty minimum rate
token bucket queue. The second (optional) pass looks for the
packets belonging to the ﬂows, with non-empty minimum
rate token bucket queue, which were previously rejected
(if the system supports re-enabling rejected transmissions).
Third pass picks the packets belonging to the ﬂows with
the empty minimum rate token bucket queue and the non-
empty maximum rate token bucket queue. This pass may
be scheduled according to the round robin algorithm or any
other algorithm, which may provide fair share of additional
bandwidth regardless of the ﬂows’ priorities. In the proposed
solution the modiﬁed Round Robin (RR) mechanism is
used. The modiﬁed RR scheduler selects the packets in
the third pass, however only from the queues, which were
left nonempty in the earlier pass. RR does not provide any
fairness, therefore if necessary, another algorithm may be
applied, i.e., Deﬁcit Round Robin (DRR).
When the packet of n bytes is dequeued, n tokens are
removed from both token buckets - if the packet is selected
in the ﬁrst or in the second pass - or from the maximum
rate token bucket - if packet is selected in the third pass.
Subsequently, the packet is sent to the network.
Figure 2.
Scheduler testbed
The system is designed for handling ﬂows with the
unique priority. If there are two or more identical priorities,
several approaches are possible, that is: random priorities,
hash priorities or priorities set successively, according to
the arrival time. The Type of Service (TOS) ﬁeld in the
IPv4 header may be used to identify and store the packets’
priorities.
Implementation is based on the Linux kernel 2.6.39. The
priority scheduler and the token bucket ﬁlter are imple-
mented as the Trafﬁc Control modules.
A. Test results
Proof-of-concept tests were run to verify the scheduler
performance. The test environment is depicted in Figure 2.
SENDER is a station with a single Pentium III 800 MHz
under Linux 2.6.39 with the modiﬁed trafﬁc control module,
described in the previous Section. 150 service ﬂows with the
unique priority were governed by SP SCHEDULER. Each
queue has capacity for 10ms of trafﬁc with regard to their
minimum transmission rates. The overall bandwidth is ∼ 90
Mbps. Trafﬁc is generated using D-ITG on VMware to avoid
throttles.
Figures 3 and 4 present the results for the test with
trafﬁc pattern composed of 150 UDP connections, sent with
constant bit rate 1200 kbps each and the packet size set
to 1400 B. All ﬂows start at the same time. The minimum
rate was set to 600 kbps (ﬁg. 3) and 950 kbps (ﬁg. 4). In
the ﬁrst case all ﬂows ﬁt to the overall bandwidth, in the
second approximately the ﬁrst 90 ﬂows are able to achieve
the minimum transmission rate.
When the minimum rates of all ﬂows ﬁt to the overall
bandwidth, the minimum transmission rate is provisioned for
all ﬂows and the additional bandwidth is shared according to
the modiﬁed RR algorithm. The average, experienced delay
is similar for all provisioned ﬂows.
Under the over-provisioned scenario around 60% of all
ﬂows achieves the desired transmission rate. The non-served
ﬂows experience large delays till they are blocked.
Figures 5 and 6 present results for a similar test but with
the TCP transport protocol.
Since TCP implements its own rate control using the
window-based mechanism, it adjusts the sending rate. Flows
adjust the transmission rate to the offered bandwidth share.
3
Copyright (c) IARIA, 2012.     ISBN:  978-1-61208-183-0
ICN 2012 : The Eleventh International Conference on Networks

Figure 3.
Average throughput and delay for 150 UDP connections, CBR = 1200 Kbps, packet size = 1400B, minimum rate = 600 Kbps
Figure 4.
Average throughput and delay for 150 UDP connections, CBR = 1200 Kbps, packet size = 1400B, minimum rate = 950 Kbps
The ﬂows with higher priority experience lower delays in
both cases.
IV. MAPPING OF WIMAX CLASSES TO STRICT
N-PRIORITY SCHEDULER BAND
As shown in the previous section, the multi-pass strict
priority scheduler can provide good bandwidth for multiple
streams with low jitter. However, in case of the heteroge-
neous networks, a single, consistent QoS conﬁguration sys-
tem is required. WiMAX already contains an expanded QoS
deﬁnition set describing different types of trafﬁc classes.
However, the classes are not usable neither in the standard
WiFi network, nor, directly, in the strict-priority extended
one. Fortunately, a simple class-to-priority mapping is pos-
sible.
The prosed algorithm provides a simple means of mapping
the WiMAX trafﬁc class to the strict n-priority scheduler
band. To achieve that, we introduce a Φ vector describing
scheduler bands. The Φi <> 0 if the particular band has
a WiMAX QoS SF mapped, and 0 otherwise. The actual
mapping is done by an external, system-wide mechanism
with the regard to several rules:
1) The 1’s have to form continuous series inside Phi
vector, with i denoting the ﬁrst, and j denoting the
last mapped position.
2) For n bands and m classes, i = n/2−m/2, that is the
’1’ should occupy the central part of the Phi vector.
3) The incoming classes are mapped to the position k,
where (i − 1) < k < (j + 1).
4) If the SF leaves the system, its class should be
unmapped.
5) In case of the mapping/unmapping, the vector shift
may be required to fulﬁl 2. The chosen direction shall
require the minimum number of bands to be remapped.
The actual mapping is based on WiMAX’s QoS class
hierarchy described in Table I of φ values. The decimal
fraction is set according to the maximum delay parameter
for a given service ﬂow, while the whole part is deﬁned by
its class, i.e., UGS service ﬂow with the maximum delay of
3ms has a φ value of 0.003.
The external mechanisms selects new k to form an
increasing sequence of Φi..j,k SF vector mappings, where
Φk = φ.
A schematic diagram depicting mapping process of in-
4
Copyright (c) IARIA, 2012.     ISBN:  978-1-61208-183-0
ICN 2012 : The Eleventh International Conference on Networks

Figure 5.
Average throughput and delay for 150 TCP connections, packet size = 1400B, minimum rate = 600 Kbps
Figure 6.
Average throughput and delay for 150 TCP connections, packet size = 1400B, minimum rate = 950 Kbps
Class
φ value
Unsolicited Grant Service (UGS)
0.0
Extended Real-Time Polling Service (ertPS)
0.0
Real-Time Polling Service (rtPS)
2.0
non-Real-Time Polling Service (nrtPS)
4.0
Best Effort
4.0
Table I
MAPPING OF THE WIMAX QOS TRANSPORT CLASSES TO φ
PARAMETER VALUE. THE FRACTION PART IS DEFINED BY THE
MAXIMUM DELAY PARAMETER DESCRIBING SPECIFIC SF.
coming SF has been presented in Figure 7. The mapping
process requires a k value to be selected for the new SF.
V. CONCLUSION AND FUTURE WORK
The paper proposed a modiﬁcation to the strict priority
scheduler, which provides the minimum and maximum
transmission rates for all active ﬂows. Various tests were
performed, which include the performance measurements
for the UDP and TCP trafﬁc in the provisioned and
over-provisioned scenarios. The designed solution has been
shown to distribute the available bandwidth according to the
predeﬁned requirements.
The main disadvantages of the proposed solutions are:
packet-based operation and performance-related concerns -
each cycle requires, at worst case, passing each queue three
times. Another problem arises if the scheduler rejects the
ﬂows and there is no backward communication. In such a
case, the rejected ﬂows waste bandwidth up to the hop with
the strict priority scheduler.
In further studies, we plan to enhance the scheduler to
satisfy the delay requirements using adequate buffer sizing.
The proposed scheduler needs also veriﬁcation under more
sophisticated scenarios including: varying bandwidth rate to
imitate transmission in the wireless network, varying packet
size and diversiﬁed minimum rate requirements.
ACKNOWLEDGMENT
The material is based upon work supported by the Polish
National Science Centre under Grant No. N N516 479240.
5
Copyright (c) IARIA, 2012.     ISBN:  978-1-61208-183-0
ICN 2012 : The Eleventh International Conference on Networks

Figure 7.
Diagram depicting the process of mapping incoming WiMAX
service ﬂow to multi-pass strict priority scheduler band.
REFERENCES
[1] “IEEE
standard
for
information
technology-
telecommunications
and
information
exchange
between
systems-local
and
metropolitan
area
networks-speciﬁc
requirements - part 11: Wireless LAN medium access
control (MAC) and physical layer (PHY) speciﬁcations,”
IEEE Std 802.11-2007 (Revision of IEEE Std 802.11-1999),
pp. C1–1184, December 2007.
[2] “IEEE Standard for Local and Metropolitan Area Networks
Part 16: Air Interface for Fixed Broadband Wireless Access
Systems,” IEEE Std 802.16-2004 (Revision of IEEE Std
802.16-2001), pp. 0 –857, 2004.
[3] M. Jamil, S. Shaikh, M. Shahzad, and Q. Awais, “4G: The
future mobile technology,” in TENCON 2008 - 2008 IEEE
Region 10 Conference, nov. 2008, pp. 1 –6.
[4] S. Blake, D. Black, M. Carlson, E. Davies, Z. Wang, and
W. Weiss, “An Architecture for Differentiated Service,” RFC
2475 (Informational), Internet Engineering Task Force, Dec.
1998, updated by RFC 3260.
[5] Z. Rosberg and F. Sabrina, “Rate control of multi class
priority ﬂows with end-to-end delay and rate constraints for
QoS networks,” Computer Networks, vol. 53, no. 16, pp.
2810–2824, Nov. 2009.
[6] A. E. Kamal and H. S. Hassanein, “Performance evaluation
of prioritized scheduling with buffer management for differ-
entiated services architectures,” Computer Networks, vol. 46,
no. 2, pp. 169–180, Oct. 2004.
[7] Y. Jiang, C. Tham, and C. Ko, “A probabilistic priority
scheduling discipline for high speed networks,” in 2001
IEEE Workshop on High Performance Switching and Routing.
IEEE, 2001, pp. 1–5.
[8] A. Demers, S. Keshav, and S. Shenker, “Analysis and sim-
ulation of a fair queueing algorithm,” SIGCOMM Comput.
Commun. Rev., vol. 19, pp. 1–12, August 1989.
[9] A. Parekh and R. Gallager, “A generalized processor sharing
approach to ﬂow control in integrated services networks-the
multiple node case,” in INFOCOM ’93. Proceedings.Twelfth
Annual Joint Conference of the IEEE Computer and Commu-
nications Societies. Networking: Foundation for the Future.
IEEE, 1993, pp. 521–530 vol.2.
[10] J. Bennett and H. Zhang, “WF2Q: worst-case fair weighted
fair queueing,” in INFOCOM ’96. Fifteenth Annual Joint
Conference of the IEEE Computer Societies. Networking the
Next Generation. Proceedings IEEE, vol. 1, Mar. 1996, pp.
120–128 vol.1.
[11] J. F. Lee, M. C. Chen, and Y. Sun, “WF2Q-M: Worst-case
fair weighted fair queueing with maximum rate control,”
Computer Networks, vol. 51, no. 6, pp. 1403–1420, 2007.
[12] A. Parekh and R. Gallager, “A generalized processor sharing
approach to ﬂow control in integrated services networks-
the single node case,” in INFOCOM ’92. Eleventh Annual
Joint Conference of the IEEE Computer and Communications
Societies, IEEE, May 1992, pp. 915–924 vol.2.
[13] “IEEE Standard for Information Technology - Telecommuni-
cations and Information Exchange Between Systems - Local
and Metropolitan Area Networks - Speciﬁc Requirements
Part 11: Wireless LAN Medium Access control (MAC) and
Physical Layer (PHY) Speciﬁcations Amendment 8: Medium
Access Control (MAC) Quality of Service enhancements,”
IEEE Std 802.11e-2005 (Amendment to IEEE Std 802.11,
1999 Edition (Reaff 2003), pp. 1 –189, 2005.
[14] S. Frattasi, E. Cianca, and R. Prasad, “An Integrated AP
for Seamless Interworking of Existing WMAN and WLAN
Standards,” Wirel. Pers. Commun., vol. 36, pp. 445–459,
March 2006.
[15] G. Prasath, K. Raghu, and M. Ma, “Integration of WLAN
and WiMAX with base station assisted QoS,” in Wireless
and Optical Communications Networks, 2008. WOCN ’08.
5th IFIP International Conference on, may 2008, pp. 1 –5.
6
Copyright (c) IARIA, 2012.     ISBN:  978-1-61208-183-0
ICN 2012 : The Eleventh International Conference on Networks

