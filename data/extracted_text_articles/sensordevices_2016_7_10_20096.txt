White Light Interferometry: Correlogram Correlation for Surface Height Gauging 
Noise stability 
 
Ilia Kiselev and Michael Drexel 
Breitmeier Messtechnik GmbH 
NanoFocus AG 
Ettlingen, Germany 
email: {kiselev, drexel}@breitmeier.de
 
 
Abstract—Established methods to gauge the surface height by 
the white light interferometry do not use the full information 
contained in a correlogram. As the result, the envelope 
evaluation methods suffer from susceptibility to noise, whereas 
the phase methods are prone to the “2-pi ambiguity”. In the 
approach of the present paper, the surface position is 
determined via the correlation of the local correlogram with a 
reference correlogram, thus benefiting from its complete 
information. Accuracy and tolerance to noise of this method is 
by more than one order of magnitude higher, than that of the 
envelope methods; the 2-pi ambiguity has not revealed itself so 
far. Another advantage of the suggested method is the 
immediate availability of a suitability criterion for a local 
correlogram – the correlation coefficient with the reference 
correlogram.   
Keywords-Interferometry; 
Surface 
Topology; 
Noise 
Immunity. 
I. 
 INTRODUCTION  
Among sensor device technologies, the white light 
interferometry (WLI) is established as one of the most 
popular methods of surface topography evaluation. The 
challenging problem is false evaluations of the surface 
height, which are affected by different kinds of noise 
inevitably appearing during any measurement. On the one 
hand, there is a continuous search for data evaluation 
methods that are immune to noise, on the other hand, being 
aware of error inevitability, one is looking for a possibility to 
assess the confidence level of the surface height evaluation – 
on every pixel of the optical field - in order to sort out 
improper ones [1]. Although the assessment of the 
confidence level does not prevent appearance of false height 
estimations, yet it allows preventing false conclusions during 
a further surface topology analysis. 
The WLI data are primarily represented by a set of 
correlograms from different pixels. There are two commonly 
recognized ways of correlogram processing to estimate the 
surface height: the method of the correlogram envelope 
maximum/centroid 
calculation 
and 
the 
method 
of 
correlogram phase tracking [1][2]. Both methods have their 
own advantages and shortcomings: the first is robust when 
applied to rough torn surfaces but shows higher variations 
caused by the data noise [3]; the second one, vice versa, is 
known providing low variations / high reproducibility but 
cannot be applied to rough surfaces being prone to the 2-pi 
ambiguity [2]. Disadvantages when applying these methods 
are actually to be expected - both make use only of a part of 
the information contained in the signal. The way to go is to 
involve the complete information in a single evaluation 
procedure. There are continuous attempts to combine both 
methods in order to profit from the advantages of both of 
them [4], yet both kinds of shortcomings remain. 
The intention of the present study is to obtain a data 
evaluation procedure, which uses complete correlogram 
information, and to obtain improvement in both the noise 
tolerance and the confidence level assessment. It is suggested 
to find - in the measured intensity z-distribution – the 
interval which is most similar to the known reference 
correlogram of the interferometer. The position of the 
interval will give the position of the surface and the level of 
similarity would give the confidence level for this height 
estimation. This is exactly what is provided by the cross-
correlation function between the measured intensity 
distribution and the reference correlogram: it gives both the 
position of maximal resemblance and the level of similarity. 
Note that this method uses the complete information 
contained in the correlogram signal: both phase and envelope 
information, since its complete form is involved in 
correlation analysis. Thus, the noise stability of the 
correlogram cross-correlation method is expected to be as 
good as with the phase method, and as in the envelope 
evaluation methods no phase ambiguity should appear. 
In Section II, a short description of the method is given; 
the results of a testing of the method by correlogram and 
noise simulation are given in the subsection “A” of Section 
II; in subsection “B”, the results of an application of the 
method to measurements on smooth surface are presented. In 
this way, the subsection “A” describes mainly the influence 
of measurement noise whereas the consideration of 
subsection “B” concerns both the instrumental noise and the 
surface reflection variations.   
II. 
REALIZATION OF CORRELOGRAM CORRELATION 
METHOD AND TESTING OF ITS STABILITY AGAINST NOISE. 
The cross-correlation function has been used as the gauge 
of the correlogram packet position and the level of similarity. 
The employed normalized cross-correlation function is given 
by 
91
Copyright (c) IARIA, 2016.     ISBN:  978-1-61208-494-7
SENSORDEVICES 2016 : The Seventh International Conference on Sensor Device Technologies and Applications

 
 
 
(1) 
where I is a measured pixel-correlogram, I0 is the reference 
correlogram, z is the interferometer scan coordinate. Of 
course, the cross-correlation has been calculated on the 
digitalization net, originally with the step of interferometer 
frame distance ∆z. In fact, the MATLAB function xcov has 
been employed to calculate K. The position of absolute 
maximum of K has been interpreted as the local height of 
surface relative to that of reference surface which produces 
the correlogram I0. The value Kmax < 1 (= maximum 
correlation coefficient) gives the confidence level for the 
current pixel.  
Certainly, 
the 
scan 
discretization 
interval 
of 
interferometer ∆z produces a too rough net: the surface has to 
be localized much more accurately. Therefore, an 
interpolation of intermediate points has been performed 
producing a net 10 times denser. In this study, a proper 
interpolation has been performed to keep the spectrum of the 
function unchanged by the interpolation. Specifically, digital 
Fourier transform of the original function is performed; the 
present harmonics are kept unchanged, but supplemented 
with harmonics of higher frequencies and zero amplitude; 
finally the reverse transformation produces the function on 
the dense net. It can be proven that such an interpolation of 
the correlograms followed by the calculation of their cross-
correlation gives the same result as the primary calculation 
of cross-correlation on the rough net followed by the 
interpolation. The latter variant lowers computation costs, 
and being much more effective, has been used in present 
study. Further accuracy elevation is achieved by the 
parabolic interpolation on the three points near the maximum 
of K. 
A. Simulation 
A simulation has been carried out in order to obtain the 
surface height assessment at different noise levels. The 
correlograms have been simulated on a digitalization net zi 
just as the harmonic modulated with the Gaussian envelope: 
 
 
 
(2) 
 
where A is an arbitrary amplitude; z0 is the position of the 
correlogram maximum, Wλ is half-width of the correlogram; 
λ0 is its main wave length, σnoise is the noise dispersion, rand 
is the function producing normally-distributed random 
values with zero mean value and the unit dispersion. Thus, 
white noise has been used, not in complete correspondence 
with 
the 
distortion 
noise 
produced 
by 
surface 
inhomogeneities which reveal themselves mainly in 
additional phase shifts [5], but representing well the 
instrumental noise.  
Figure 1, (a)-(c) shows how the noise of different level 
distorts the correlograms. The correlogram corruption grows 
from a slight disturbance at the relative level of 0.01 to a 
very substantial packet spoiling at the 0.1-level and to 
complete correlogram distraction at the level 0.3. Following 
values have been used for the simulation: ∆z = 40 nm; λ0 = 
300 nm; Wλ = 2λ0. For the presented correlogram correlation 
(CC) method, the correlogram without noise ((2), σnoise = 0) 
has been used as reference correlogram. 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
Figure 1. Correlogram corruption at different noise levels: (a) – noise 
dispersion σnoise is 0.01 of the double correlogram amplitude; (b) σnoise = 
0.1; (c) σnoise = 0.3. The red lines show the corresponding envelope. 
For the comparison with the results of the correlogram 
correlation method, the signal envelopes have been 
calculated using the known formula of square summation of  
correlogram with its Hilbert transform [1]. The two most 
common methods to determine the correlogram position 
have been used: the parabolic approximation of half-height 
envelope followed by the determination of its maximum and 
,
( )
( )
)
(
)
(
2
0
2
0
∫
∫
∫
∞
∞
−
∞
∞
−
∞
−∞
+
=
z dz
I
z dz
I
dz
z
I z I
K
τ
[
]
{
}
[
]
( ),
)
)(
(2
cos
)
log(2) (
exp
0
0
2
0
rand i
z
z
W
z
z
A
I
noise
i
i
i
σ
λ
π
λ
+
−
×
−
−
=
(b) 
(c) 
(a) 
92
Copyright (c) IARIA, 2016.     ISBN:  978-1-61208-494-7
SENSORDEVICES 2016 : The Seventh International Conference on Sensor Device Technologies and Applications

the calculation of the half-height envelope centroid. No 
filtration of the envelope [5] has been applied relying on the 
averaging which is automatically provided by these two 
envelope position evaluation methods owing to usage of the 
complete half-height envelope.   
As expected, the height determination has been exact at 
zero noise level by all the tested methods. The mean values 
of deviations of height estimation from the height z0 
specified in (2) have been calculated as the average over 
1000 repetitions. These deviations appearing when using the 
correlogram correlation method and the two envelope 
evaluation methods are presented in Figure 2. 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
Figure 2.  Mean deviation obtained by the two envelope methods and the 
correlogram correlation method.  
Following conclusion can be drawn from the data of Figure 
2: 
a) For white noise, the deviation of the correlogram 
correlation method is approximately 1.5 orders of 
magnitude below the errors produced by the envelope 
methods.  
b) In practice, the noise levels of about 0.1 are not rare. 
At these levels the errors of envelope methods are 
already inacceptable while that of CC are still just 
about 2-3 nm.  
c) It is known that the deviations of the phase method are 
about 7 times smaller than that of envelope methods 
[1]. Here the inaccuracy of CC is still lower. 
d) Within the CC method, the confidence estimation is 
readily available, and can be used to screen out the 
worst corrupted correlograms when calculating the 
mean value of surface height. Such a screening has 
been performed, and the result is given in Figure 2. 
The threshold maximal correlation coefficient with the 
reference correlogram here has been 0.5. All 
correlograms of lower correlation have been omitted. 
Moreover, the height deviation values produced by the 
remaining correlograms have been weighted for the 
averaging; the maximal correlation coefficients with 
the reference correlogram have been used to get the 
weights. Up to the noise level of 0.1, the error level is 
practically the same as that of pure CC, but at the noise 
level 0.3 the error is still moderate (56 nm) while other 
methods fail completely. 
The deviations from unity of the averaged correlation 
coefficients obtained by the CC for the noise levels of 0.03, 
0.10, 0.30, are correspondingly: 0.018, 0.16, 0.63. The values 
of coefficients at the lower noise level are practically 
indistinguishable from 1. 
B. Measurement on  a smooth surface 
For a validation with experimental data, a measurement 
on polished Si wafer has been evaluated. The Mirau 
interferometer, Breitmeier Messtechnik GmbH, with the 
interferometer objective Nikon CF IC EPI of x10 
magnification has been employed for this measurement.  The 
frame area of the objective is 0.66x0.89 mm2. The low 
camera resolution of 518x692 pixels has been chosen in 
order to keep data amounts reasonable. The diode light 
source has a spectrum energy distributed in the range of 490 
- 740 nm.  The sampling step size of 40 nm, minimal for the 
instrument, has been chosen. A typical correlogram is shown 
in Figure 3, on the top. On the bottom of the figure, the 
correlogram which has been chosen to be the reference one 
for the CC method is depicted. It has been just arbitrarily 
picked among the available correlagrams of the same data 
stack as one which seemingly contains low noise and form  
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
Figure 3.  A typical correlogram measured on smooth surface (picture 
above) and the correlogram used as the reference correlogram (below). 
0.01
0.1
1
10
100
1000
10000
0.001
0.01
0.1
1
Noise level
Averaged error, nm
Envelope, maximum
Envelope, centroid
Correlogram correlation
CC with screening
93
Copyright (c) IARIA, 2016.     ISBN:  978-1-61208-494-7
SENSORDEVICES 2016 : The Seventh International Conference on Sensor Device Technologies and Applications

distortions. The reference correlogram is already devoid of 
the mean level and slope and shortened in length, in order to 
exclude surplus noise. Comparing the correlogram pictures 
in Figure 3 with those of the simulation, the noise level can 
be roughly estimated to be about 0.02. The evaluated 
distributions of surface heights along a stretch of the optical 
field are illustrated in Figure 4. 
The height dispersion provided by the envelope 
maximum estimation method is 5.6 nm, the dispertion 
provided by the envelope centroid method – 9.6 nm, and of 
the CC method it is 0.45 nm. Thus, the CC demonstrates an 
accuracy 12 times higher, than that of the envelope method. 
The dispersions found correspond well to the results of the 
simulation given in Figure 2, assuming the estimated noise 
level is in the vicinity of 0.02.  
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
Figure 4. Surface heights obtained by envelope and correlogram correlation 
methods on a smooth Si surface along a line segment of the optical field. 
The CC method is expected to have still higher superiority: 
its dispersion seemingly contains also a fraction of the real 
surface height variation. This part in the height dispersion by 
the envelope method is apparently negligible. Therefore, 
there is no correlation between the height profiles measured 
using both methods: their correlation coefficient amounts 
just to 0.08. Notice that the accuracy improvement by CC in 
relation to the envelope method again exceeds the accuracy 
gain commonly provided by the phase method as compared 
to the envelope method [1]. 
For a practical realization of the CC method, a reference 
correlogram is needed. Ideally, it should be measured on a 
smooth surface of the material in question and then properly 
averaged over a set of pixels. In this case, it contains also the 
particularities of surface reflection. Often it is sufficient to 
employ just one of the correlograms measured on the 
surface. Furthermore, because the form of a noiseless 
correlogram is mainly determined by the instrument itself, it 
is expected that an on mirror measured I0 will work in the 
majority of situations. Thus, there is no problem to obtain the 
reference correlogram in the practice. Especially not in a 
standard industrial application, where many surfaces are 
routinely inspected and the same I0 can be used unless the 
WLI needs a recalibration. A doubt could arise when 
thinking about using the CC method because of an allegedly 
high computation time for the cross-correlation function. But 
if done employing the very quick procedure of the fast 
Fourier transform (direct and reverse), it is, in fact, not time 
expansive. Moreover, the procedure can be further 
developed, say, resettled in the frequency domain in order to 
get a still quicker performance. 
III. 
CONCLUSION AND FUTURE WORK 
The introduced correlogram correlation method uses the 
complete information contained in the correlogram and thus 
is supposed to have a noise immunity at least not lower, than 
that of the phase method. The noise immunity implies 
tolerance to both the measurement disturbances and 
imperfections of local surface reflection. At the same time, it 
is not supposed to exhibit a phase ambiguity. The first 
supposition is confirmed in the present study with the help of 
simulations and a measurement on a smooth surface: the 
accuracy of the CC method exceeds that of the envelope 
method by more than one order of magnitude. The 
confirmation of the absence of an ambiguity is a matter of 
further research, involving the evaluation of measurements 
on rough surfaces and possibly simulations.  
It is demonstrated that the CC method can be used, when 
analyzing data with a noise level at which the employment of 
the envelope estimation methods is impossible.  
Another advantage of the method is that it automatically 
provides a measure to be used for screening of inapt 
correlograms from further evaluations – the coefficient of 
correlation with a reference correlogram. This confidence 
parameter can be used for further surface structure 
evaluations. It is shown here that its application allows 
height evaluation even from very corrupted correlograms.  
 
REFERENCES 
[1] P. de Groot, "Principles of interference microscopy for the 
measurement of surface topography," Advances in Optics and 
Photonics, vol. 7, 2015, pp. 1-65. 
[2] P. de Groot, "Interference microscopy for surface structure 
analysis," in Handbook of Optical Metrology: Principles and 
Applications, T Yoshizawa, Ed., Boca Raton: CRC Press, 
2015, pp. 797–809. 
[3] T. Dresel, G. Häusler, and H. Venzke, "Three-dimensional 
sensing of rough surfaces by coherence radar," Appl. Opt., 
vol. 31, 1992, pp. 919–925. 
[4] J. Schmit and A. G. Olszak, "Challenges in white-light phase-
shifting interferometry," Proc. SPIE 4777 Interferometry XI: 
Techniques and Analysis, SPIE Press, June 2002, pp. 118–
127, doi: 10.1117/12.472230. 
[5] J. Seewig, T. Böttner, and D. Broschart, "Uncertainty of 
height information in coherence scanning interferometry," 
Proc. SPIE 8082, Optical Measurement Systems for Industrial 
Inspection VII, SPIE Press, May 2011, pp. V-1 - V-9, 
doi:10.1117/12.895006.
 
94
Copyright (c) IARIA, 2016.     ISBN:  978-1-61208-494-7
SENSORDEVICES 2016 : The Seventh International Conference on Sensor Device Technologies and Applications

