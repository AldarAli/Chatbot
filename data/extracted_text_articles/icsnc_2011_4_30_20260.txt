Overcoming EPC Class 1 Gen 2 RFID limitations
with p-persistent CSMA
Leonardo D. S´anchez M. and V´ıctor M. Ramos R.
Universidad Aut´onoma Metropolitana
Networking and Telecommunications Research Team
Iztapalapa, Mexico City
{cbi209382362,vicman}@xanum.uam.mx
Abstract—Nowadays, Radio Frequency IDentiﬁcation (RFID)
is
a
widely
spread
technology
used
in
a
diverse
set
of
applications. One of the main problems faced by RFID networks
is tag collision. This occurs when two or more tags respond
simultaneously to the RFID reader, causing errors and bringing
retransmissions in the wireless channel, increasing the delay
required to identify the whole set of tags in the coverage range of
the reader. There are two standards for RFID tag identiﬁcation:
ISO 18000-7 and EPC Class 1 Gen 2. We propose in this paper
a p-persistent CSMA mechanism for RFID tag identiﬁcation;
we also compare our mechanism with the EPC Class 1 Gen
2 as well as with a non-persistent CSMA approach that has
been proposed in the literature. We show that the mechanism we
propose provides a lower identiﬁcation delay than the two other
mechanisms. Furthermore, our mechanism uses less identiﬁcation
cycles than its non-persistent CSMA counterpart.
Keywords− RFID, EPC Class 1 Gen 2, p-persistent CSMA.
I. INTRODUCTION
Nowadays, Radio Frequency IDentiﬁcation (RFID) is a
technology used on a wide set of applications. According
to [1], 1.3 billion of RFID tags have been built in 2005,
and by the end of the last year the amount of tags grew
up to 33 billion [1]. Some examples of RFID applications
are: public transportation, access control, asset tracking,
item identiﬁcation, counting tasks and automated inventory
management.
One of the main advantages of RFID compared to barcodes
is its ability of identifying objects in a wireless fashion with
no contact or a direct sight line among the communicating
devices. Since RFID is now widely used, the identiﬁcation
process must be done in a faster and efﬁcient way. To that end,
it is crucial to ﬁnd better collision resolution mechanisms for
RFID networks. This way, the identiﬁcation process as well
as power consumption are improved.
There are two standards for RFID tag identiﬁcation: ISO
18000-7 and EPC Class 1 Gen 2. We propose in this paper
a p-persistent CSMA mechanism for RFID tag identiﬁcation;
we also compare our mechanism with the EPC Class 1 Gen
2 (EPC-Gen 2 from now on) as well as with a non-persistent
CSMA approach that has been proposed in the literature. In
Section II, we present a review of the state of the art in RFID as
well as the problem of tag collisions. In Section III, we depict
the related work about collision resolution of RFID tags. We
propose ﬁnally in Section IV our p-persistent CSMA protocol
for RFID; we also compare numerically our mechanism with
the EPC-Gen 2 standard as well as with a non-persistent
CSMA approach that has been proposed in [2]. The results
described in Section V show that our protocol overperforms
the other two proposals in terms of identiﬁcation delay as well
as in the average number of identiﬁcation cycles. We execute
simulations for a wide number of tags in the coverage range
of the reader. We ﬁnally conclude our paper in Section VI and
describe our future work.
II. RFID AND TAG COLLISIONS
An RFID network is composed of two sets of devices that
communicate through radio-frequency (RF) waves: a set of
tags joined to objects that need to be identiﬁed, and one or
more readers. A reader has storage and processing abilities, it
sends read commands within a given coverage range in order
to identify the whole set of tags inside such range. Tags are
devices having a unique identiﬁer; they store information about
the object they are attached to. RFID tags may be classiﬁed
as:
• Active tags: They account with high processing and
storage abilities. They include a power source for data
transmission and are also responsible of sensing the
channel and detect collisions.
• Passive tags: They have limited processing, storage and
data transmission characteristics. They have no power
source; instead they get power through the energy
induced by electromagnetic waves sent by the reader.
Besides, they have no sensing capabilities nor-or sensing
functions.
• Semi-passive tags: They use internal batteries to power
their circuits and rely on the reader to supply its power
for broadcasting.
Based on the type of application, a given type of RFID tag is
chosen. Passive tags are frequently used due to their low cost.
However, semi-passive and active tags are rapidly gaining an
important place in the RFID market.
A. The tag identiﬁcation problem
A tag identiﬁcation process consists of a broadcast message
sent by the reader to request tags their IDs and/or their stored
data. By receiving such broadcast message, the tags send
their response to the reader. If just one tag responds, the
88
ICSNC 2011 : The Sixth International Conference on Systems and Networks Communications
Copyright (c) IARIA, 2011.     ISBN: 978-1-61208-166-3

Multiple Access / Anti-Collision Protocols
SDMA
TDMA
FDMA
CDMA
CSMA
Asynchronous
Synchronous
Pure ALOHA
its variants
and
Slotted ALOHA
its variants
and
Tree Based
Protocols
FSA
ISO
EPC
Gen 2
18000-7
Fig. 1.
RFID collision resolution protocols’ taxonomy
reader will receive only one message. If several tags respond
simultaneously, there will be collisions in the RF channel.
Such problem is known as tag collision and is one of the
main research problems on RFID networks. The time taken to
identify the whole set of tags within the range of the reader
is known as the identiﬁcation delay; this is one of the most
important performance measures in this kind of networks.
Besides tag collisions, there are also reader-reader collisions
and reader-tag collisions. The former occurs when there is
interference between the signals of two or more readers. The
latter occurs when two or more readers want to communicate
with the same tag [3].
Currently, the tag collision problem is solved by imple-
menting a collision resolution protocol speciﬁed either by the
EPC-Gen 2 standard or by the ISO 18000-7 standard. The
former being used for passive as well as for active RFID
environments, and the latter for active RFID environments. In a
recent work [4], we have presented a comparison between our
p-persistent CSMA protocol and the ISO 18000-7 standard.
In this paper, we restrict ourselves to comparing our work
with the EPC-Gen 2 standard and the non-persistent CSMA
approach we cited before.
III. RELATED WORK
The wireless nature of RFID networks implies the use
of a collision resolution protocol at the MAC level of the
network stack. Thus, the aim of a collision resolution protocol
for an RFID network is to coordinate the access to the
transmission medium. We present in Fig. 1 a taxonomy of
collision resolution protocols on the basis of medium access
and then on the type of protocol used.
A. ALOHA-based protocols
ALOHA-based protocols are probabilistic protocols exhibit-
ing low values on the identiﬁcation delay. However, such
protocols have the problem of tag starvation due to their
aleatority; such problem happens when a tag has not been
identiﬁed in a long period of time.
The most widely used protocols in this class are Pure
ALOHA (PA), Slotted ALOHA (SA), and Framed-Slotted
ALOHA (FSA). These protocols impact directly the perfor-
mance of RFID networks. The two standards used for RFID
networks are based on a modiﬁed version of Framed-Slotted
ALOHA.
1) Framed Slotted Aloha (FSA): The FSA protocol is
based on the SA protocol which assumes that time is slotted
and grouped into frames. A slot is a time interval where
tags are allowed to transmit their ID [5]. FSA executes
several identiﬁcation cycles (IC) in order to identify the whole
set of tags within the coverage range of the reader. Every
identiﬁcation cycle consists of one frame. A frame is a time
interval elapsed between reader requests; it is formed of a
given number of slots [5]. FSA improves PA and SA by
limiting tags to transmit once per frame in order to avoid
frequent tag-to-tag collisions.
FSA starts with the reader broadcasting the frame size, N.
Once tags know N, every tag generates a random number
uniformly distributed between [0 . . .N-1]. The generated num-
ber corresponds to the slot of time where tags transmit their
ID. When two or more tags transmit in the same slot, there
is a collision; this event generates a new identiﬁcation cycle.
Such identiﬁcation cycle is particularly intended for the tags
that generated such collision. Furthermore, if there is only one
transmission during a slot, the corresponding tag is correctly
identiﬁed by sending an ACK message; this avoids including
the same tag in the next identiﬁcation cycle.
2) The EPC-Gen 2 standard: The EPCGlobal organization
has proposed the EPC-Gen 2 standard for RFID networks.
In [6], the “Gen 2” collision resolution protocol is independent
of the type of RFID device in which it is implemented, being
either passive or active.
Similar to the ISO 18000-7 standard, the EPC-Gen 2
standard proposes to use FSA as a collision resolution protocol
for RFID networks. However, EPC-Gen 2 suggests a speciﬁc
algorithm for adapting the frame size. EPC-Gen 2 works on an
environment of 1 reader and N tags. The identiﬁcation process
starts when the reader sends a startup command; then every
tag responds to such command causing a collision. When the
reader detects the collision, it starts a new identiﬁcation cycle.
An identiﬁcation cycle starts with the broadcast of a Query
packet by the reader including the value of Q ∈ [0, . . . , 15],
this is useful to indicate that the size of the current frame is
2Q slots. From this point, the tags choose a time slot r in the
interval [0, 2Q − 1]; this selection process is randomly done
according to a uniform distribution. The value of r represents
the frame slot in which every tag transmits its ID. The start
of every slot into a frame is controlled by the reader with the
transmission of a QueryRep packet, with the exception of
the ﬁrst slot which starts after the Query command. Thus,
the tags use r as a counter which decrements its value after
receiving every QueryRep packet. When the r value of a tag
reaches zero, the tag sends its ID; such event generates three
possible cases:
• If two or more slots choose the same time slot, there
will be a collision. On one side, the reader detects the
collision and sends a QueryRep packet. On the other
side, the involved tags update r according to r = 2Q −1.
• If there is only one reply in a given slot, there will be a
successful identiﬁcation. Thus, the reader responds with
an ACK packet. Even if all the tags receive such packet,
89
ICSNC 2011 : The Sixth International Conference on Systems and Networks Communications
Copyright (c) IARIA, 2011.     ISBN: 978-1-61208-166-3

Fig. 2.
Frame adapting mechanism for Q.
only the “winner” tag will respond with a Data packet.
Afterwards, once the reader receives the Data packet it
responds with a QueryRep packet.
• If there is no response before the reader ﬁnishes reading
the time slot, the reader assumes an empty slot and starts
a new one by sending a QueryRep command.
This process continues slot after slot until the end of the
identiﬁcation cycle, i.e., until the end of the frame. At the
end of each frame, the reader adjusts Q based on the number
of empty slots, the number of slots with only one response,
the number of slots with multiple responses, and consequently
the size of the subsequent frame. The identiﬁcation process
ﬁnishes when the whole set of tags has been identiﬁed, i.e.,
when all the slots of the frame have been ﬂushed.
Fig. 2 depicts the EPC-Gen 2’s frame adapting mechanism.
As we can see, such mechanism increments Q for every slot
in which there was a collision, and decrements it for every
empty slot in the current frame. The standard proposes the use
of C ∈ [0.1, . . . , 0.5] to control the frame adapting mechanism
in a slot-by-slot fashion. However, it does not specify how to
choose C, it only recommends using high values of C for low
values of Q and vice-versa.
B. Non-persistent CSMA
In [2], the authors propose the use of non-persistent
CSMA for RFID. They extend such protocol to work on
an environment of one reader with several tags. The work
presented by the authors is based on a contention window for
the identiﬁcation process; this is equivalent to an FSA frame
in the context of ALOHA-based protocols. They implement
a distribution function that is used also in [7] so as every
tag randomly chooses a micro-slot in a contention window to
transmit its ID.
The Sift distribution (1) associates the probability pr to the
micro-slot r as a function of its location in the contention
window and the maximum number of tags. In this way, the
probability of choosing the ﬁrst micro-slots is low while
Collection
command
ID-Tag i
Collection command
       ACK-Tag i
Micro-slot
Identification cycle
Time
ID-Tag i
Subset of tags that have selected a
Micro-slot
micro-slot into the contention window
 intervals
Micro-slot
 intervals
Successful identification
Successful identification
Fig. 3.
Non-persistent CSMA with Sift distribution for active RFID
environments.
selecting the last micro-slots turns to be high. So, pr is given
by:
pr = αr(1 − α)k
1 − αk
(1)
with r ∈ [1, . . . , K] and α = M −1/(K−1). K is the size of the
contention window, and M represents the maximum number
of contenders.
We now describe how this protocol works: the reader
broadcasts an ID-request including the size of the contention
window and the maximum number of contenders, which is a
priori unknown. After receiving this message, the tags choose
a micro-slot in the contention window according to (1) so as to
transmit their ID in the chosen micro-slot. Afterwards, every
tag sense the channel until the value of the micro-slot chosen
and then they transmit if and only if the medium remained
free. In other case, a tag leaves until the transmission of the
next command by the reader. If there is no collision, the reader
sends an ACK-Collection command which indicates that
the tag has been already identiﬁed, and thus requesting more
IDs. The same process is repeated for the tags that remain
unidentiﬁed. Fig. 3 depicts the non-persistent CSMA protocol
with Sift distribution.
Under this mechanism, the contention window size remains
constant during all the identiﬁcation process and only one
tag is identiﬁed per identiﬁcation cycle. The results shown
in [2] show that non-persistent CSMA with Sift distribution
overperforms the EPC-Gen 2 standard with respect to the
identiﬁcation delay.
IV. p-PERSISTENT CSMA FOR ACTIVE RFID
ENVIRONMENTS
p-persistent CSMA is a slotted scheme where a station that
wishes to transmit senses ﬁrstly the channel. If the channel
is idle, the station transmits with probability p and delays its
transmission until the next slot with probability q = 1 − p. If
the next slot is free, a transmission occurs or it is delayed with
probabilities p and q, respectively. This process is repeated
until the end of the contention window, or until the beginning
of a new transmission by another station. In this last case,
the protocol behaves as if a collision had occurred. If at the
beginning of a transmission a station detects a busy channel,
90
ICSNC 2011 : The Sixth International Conference on Systems and Networks Communications
Copyright (c) IARIA, 2011.     ISBN: 978-1-61208-166-3

it waits until the next time slot and then follows the algorithm
just described.
In order to extend the behavior of p-persistent CSMA for
RFID, we have that there are N tags in the coverage range
of a reader which we need to identify in an ordered fashion
by using a congestion window of a ﬁxed size. The reader
broadcasts a command of data collection along with the size
of the contention window. Following the reception of this
command, every tag chooses a time slot in the contention
window according to a Sift distribution. Then, every tag
computes the transmission probability corresponding to the
selected time slot. If it decides to transmit, then it senses the
channel during a time equal to a given number of micro-slots
according to a Sift distribution, and transmits if and only if the
channel remains idle after such period of time. Otherwise, it
withdraws until the next collection command; i.e., until a new
identiﬁcation cycle. If there is no collision, the reader sends an
ACK to tell a tag that it has already been identiﬁed and asks
for more IDs. In this way, the transmission probability not
only reduces the number of participants within a contention
micro-slot, but it also allows for tag save energy. This is the
key difference between the non-persistent CSMA protocol and
our p-persistent approach.
By observing the results reported in [2], we observe that an
increase in the number of tags is proportional to the number of
collisions, even if the probability of choosing the ﬁrst micro-
slots is very low. In that sense, we see that we require that the
transmission probability of each tag is a function of the time
micro-slot chosen. Thus, by following the Sift distribution,
once a tag has selected one of the ﬁrst micro-slots to transmit,
the probability that this tag does not transmit is close to zero.
In order to assign different transmission probabilities to time
micro-slots in a contention window, we use in our proposal
(2) so that every tag computes the transmission probability, pt,
based on the contention window size and the time micro-slot
chosen in the contention window as well. Once pt is computed,
every tag decides its transmission based on this probability and
a random number.
pt = K − r
K
,
(2)
where K is the total number of time micro-slots in the
contention window and r ∈ [1 . . . K] is the time micro-slot
chosen for transmission.
The Sift distribution in our scheme offers the advantage
that when a tag chooses one of the ﬁrst time micro-slots, the
probability of a decision change is practically zero.
One difﬁculty faced by our scheme is to decide when there
are no more tags to identify, since using the transmission
probability does not allow us to be sure of this fact. In order to
solve this problem, when the ﬁrst identiﬁcation cycle is empty,
we make the transmission probability equal to one. This way,
we are sure that all the tags in the coverage range of a reader
are actually identiﬁed.
We can see in Fig. 4 the building blocks of our p-persistent
CSMA mechanism with Sift distribution.
Identiﬁcation cycle
Time
Identiﬁcation 
command
ID-Tag i
ACK-Tag i
Upper limit of the probability for
selecting the current slot
Upper limit of the probability for
transmitting in the current slot
Micro-slots
interval
Micro-slot
Fig. 4.
p-persistent CSMA with Sift distribution for active RFID
environments
.
A. Performance parameters
We focus on the identiﬁcation delay as a performance
parameter for comparing our proposal with the non-persistent
CSMA protocol as well as with the EPC-Gen 2 standard. The
identiﬁcation delay is the time needed to identify the whole
set of tags in the coverage range of the reader. Since the time
taken by an identiﬁcation cycle is a function of the number of
slots and the number of messages between the reader and the
tags, we transform the identiﬁcation cycles to absolute time.
The parameters we consider are the same as in [2].
When working with EPC-Gen 2, the empty slots and the
slots with collision are shorter than the slots that have a correct
ID. So, if for example the channel capacity is 40 kbps, a slot
with a correct ID lasts for 2.505 ms and the empty slots as
well as slots with collision last for 0.575 ms.
For non-persistent CSMA and p-persistent CSMA, we
consider that one identiﬁcation cycle lasts the sum of the
following times:
• The time taken by a data recollection command (0.55
ms).
• The time taken by an ID packet (1.4 ms).
• A micro-slot time (0.1 ms), and
• The time duration of an ACK packet, in case of a
successful identiﬁcation (1.4 ms).
We assume that tags have a coherent CCA (Clear Channel
Assessment), i.e., that the channel is busy when a packet’s
preamble is detected. We also consider that the network is free
of the capture effect. The capture effect on RFID refers to the
event when two or more tags try to transmit simultaneously to
a reader, and one of the tags achieves its transmission because
it is under better physical conditions like a higher transmission
power or because it is closer to the reader.
We implement EPC-Gen 2 with the mechanism speciﬁed
in [6], non-persistent CSMA and our p-persistent CSMA with
a contention window size equal to 8 micro-slots and M equal
to 64. We execute 300,000 simulations for each protocol and
we obtain conﬁdence intervals of 95% with a precision less
to 1 ms. We also vary the number of tags from 10 to 100.
Furthermore, since we are simulating a widely used standard
91
ICSNC 2011 : The Sixth International Conference on Systems and Networks Communications
Copyright (c) IARIA, 2011.     ISBN: 978-1-61208-166-3

0
20
40
60
80
100
0
0.1
0.2
0.3
0.4
0.5
0.6
0.7
0.8
Number of Tags (N)
Average Identification Time (seconds)
Comparative results probt=(NTimeSlot−r)/(NTimeSlot);
 
EPC Q
CSMA NO P k=8
CSMA P k=8
(NtimeSlot-r)
(NtimeSlot)
N
Fig. 5.
Identiﬁcation delay of EPC-Gen 2, non-persistent CSMA and p-
persistent CSMA.
for RFID systems, our results are valid for any type of active
RFID tag.
V. RESULTS
We present in Fig. 5 the performance comparison between
the three protocols we are evaluating. At the beginning of the
plot, our protocol exhibits a small degradation on performance
compared to the non-persistent CSMA approach, but as the
number of tags increases our protocol clearly improves its
performance.
In general, the results we get show that our proposal
improves the performance of non-persistent CSMA and the
EPC-Gen 2 standard. This is because our proposal uses less
identiﬁcation cycles than the non-persistent CSMA approach
since the identiﬁcation delay is directly proportional to the
number of identiﬁcation cycles, even if our proposal uses
a bit more micro-slots than non-persistent CSMA. Due to
the timescale in Fig. 5, it might seem that the improvement
obtained with p-persistent CSMA is little; however, if the
time taken by an identiﬁcation cycle is increased then the
improvement is clearer.
Fig. 6 shows a plot that compares the number of identiﬁca-
tion cycles between non-persistent and p-persistent CSMA.
VI. CONCLUSIONS
We have presented in this work a proposal of p-persistent
CSMA with Sift distribution for its use on active RFID
environments. We compared our protocol with a non-persistent
CSMA approach previously proposed in the literature as well
as with the widely known EPC-Gen 2 standard. Our results
show an improvement of up to 2% in terms of identiﬁcation
time compared to non-persistent CSMA.
We observed that the time taken by an identiﬁcation cycle
directly impacts the performance of every protocol, because a
bigger amount of messages is exchanged between the reader
0
20
40
60
80
100
0
20
40
60
80
100
120
140
160
Número de Marcas(N)
Número Promedio de Ciclos de Identificación
Resultados Comparativos probt=(NTimeSlot−r)/(NTimeSlot);
CSMA NO P k=8
CSMA P k=8
(NTimeSlot - j)
(NTimeSlot)
Comparative results
Average identiﬁcation cycles
Number of tags (N)
Fig. 6.
Identiﬁcation cycles used by non-persistent and p-persistent CSMA.
and the tags. So, by reducing the number of identiﬁcation
cycles the performance is improved. Finally, the improvement
we got with p-persistent CSMA is clearer when the time spent
during the identiﬁcation cycles increases.
Our future work will focus on ﬁnding the value of p that
optimizes the identiﬁcation process; i.e., jointly maximizing
the throughput while minimizing the loss rate. Furthermore,
even if additional performance parameters (e.g., bandwidth,
loss rate) are directly related with the identiﬁcation delay, we
will also explore the behavior of our approach with respect
those parameters as well. We believe that future versions
of RFID standards (i.e., ISO 18000-7 and EPCGen-2) for
collision resolution may consider CSMA variants in their
proposals.
REFERENCES
[1] S. A. Ahson and M. Ilyas, RFID Handbook: Applications, Technology,
Security, and Privacy.
CRC Press, 2008.
[2] J. Vales-Alonso, F. J. Gonz´alez-Casta˜no, E. Egea-L´opez, M. V. Bueno-
Delgado, A. Mart´ınez-Sala, and J. G. Haro, “Evaluaci´on de CSMA no
persistente como protocolo anticolisi´on en sistemas RFID activos,” in
Primeras Jornadas Cient´ıﬁcas sobre RFID, 2007, pp. 313–320.
[3] G. Maselli, C. Petrioli, and C. Vicari, “Dynamic tag estimation for
optimizing tree slotted ALOHA in RFID networks,” in Proceedings of
the 11th International Symposium on Modeling, Analysis and Simulation
of Wireless and Mobile Systems (MSWiM), 2008, pp. 315–322.
[4] L. S´anchez and V. Ramos, “p-persistent CSMA as a collision resolution
protocol for active RFID environments,” in Proceedings of the IEEE/IFIP
WOCN, May 2011.
[5] M. A. Bonuccelli, F. Lonetti, and F. Martelli, “Instant collision resolution
for tag identiﬁcation in RFID networks,” Ad Hoc Networks, vol. 5, no. 8,
pp. 1220–1232, 2007, recent Research Directions in Wireless Ad Hoc
Networking.
[6] EPCGlobal, “Class 1 Generation-2 UHF RFID Air Interface Protocol
Standard Speciﬁcations,” 2004.
[7] K. Jamieson, H. Balakrishnan, and Y. C. Tay, “Sift: A MAC protocol for
event-driven wireless sensor networks,” Wireless Sensor Networks, 2006.
92
ICSNC 2011 : The Sixth International Conference on Systems and Networks Communications
Copyright (c) IARIA, 2011.     ISBN: 978-1-61208-166-3

