Bit Error Rate Performance of ESPAR
antenna-based Single-RF Diversity for
IEEE802.15.4
Tomoya Kozu, Satoshi Tsukamoto, Minoru Okada
Nara Institute of Science and Technology, Ikoma 630-0192 Nara Japan
E-mail: tomoya-ko@is.naist.jp, satoshi-t@is.naist.jp, mokada@is.naist.jp
Abstract—This paper presents a single-RF diversity scheme
for spread spectrum receiver based on IEEE 802.15.4 standard.
The proposed scheme employs an Electronically Steerable Passive
Array Radiator (ESPAR) antenna with periodically changing
directivity at the symbol rate. IEEE 802.15.4 focuses on a
low power consumption short range communication systems.
However, the bit error rate performance is not good enough in a
severe multipath fading environment. Diversity is a well-known
technique to compensate the performance degradation due to
multipath fading. However, the complexity for diversity reception
is a major problem. In this paper, we propose a new single-
RF diversity scheme using ESPAR antenna with periodically
changing directivity. The proposed scheme is capable of obtaining
the diversity gain in a frequency selective fading environment and
it solves the slow convergence rate problem in the conventional
ESPAR antenna based diversity scheme. Computer simulation
result and theoretical analysis show that the proposed scheme
gives diversity gain.
Index Terms—IEEE802.15.4, Zig-Bee, diversity, ESPAR
I. INTROCUTION
Diversity is a efﬁcient technique capable of mitigating the
performance degradation due to fading and is used in wide
range of wireless communication systems such as mobile
communication, Wireless LAN (Local Area Network), and
PAN (Personal Area Network) systems.
In case of space diversity, signals are received by two or
more antennas, and the received signals are combined in order
to reduce the attenuation. The received signal occasionally
attenuated and its strength falls below the thermal noise level
due to fading. Since the amount of attenuation due to fading
is different from each other when the antennas are spatially
separated, the probability of deep fade after combining can
be reduced and drastically improves the transmission perfor-
mance.
There are a lot of combining technique for diversity re-
ception such as selection combining, equal gain combining,
and maximum ratio combining. Among them, the maximum
ratio combining diversity is known to be the optimum in terms
of maximizing the signal to noise power ratio (SNR) after
combining.
However, the maximum ratio combining has a major draw-
back in terms of required hardware complexity. The maximum
ratio combining receiver requires RF (Radio Frequency) front-
end, ADC (Analog to Digital Converter), and baseband de-
modulation circuitry for each antenna branches, that is, it rises
the power consumption of the receiver. In case of handheld
terminals where the power consumption is strictly limited, it
is difﬁcult to apply the maximum ratio combining diversity.
In order to solve this problem, switch diversity scheme was
used. It ﬁrst chooses either one of the elements, and change the
element when the received signal strength falls below the pre-
determined threshold. Although the switch diversity scheme
is efﬁcient in terms of reducing the hardware complexity,
the diversity gain is small compared to the maximum ratio
combining. Furthermore, it is not capable of tracking the fast
variation of the channel because of the nature of feedback
control.
Recently, the passive array antenna called ESPAR (Elec-
tronically Steerable Passive Array Radiator) antenna has been
proposed [1]. ESPAR antenna is composed of a director and
the parastic elements which are placed in the vicinity of the
director. The parastic elements are terminated by the varactor
diode. The beam pattern can be controlled by changing the
reactance values of the varactor diode.
A diversity receiver using ESPAR antenna has been pro-
posed. The principle operation of the diversity is the same as
that of the switch diversity. That is, it inherits the diversity
gain and tracking problems in the switch diversity.
In order to solve this problem, we propose a diversity
using fast directivity controlled ESPAR antenna. A part of
authors has already proposed a fast directivity contolled ES-
PAR antenna based diversity receiver for OFDM (Orthogonal
Frequency Division Multiplex) [2]. This scheme makes efﬁ-
cient use of ICI (Inter-Channel Interference) caused by the
fast motion of directivity. This ICI can be eliminated because
the motion of directivity is known at the receiver. By using
the MMSE (Minimum Mean Square Error) frequency domain
equalizer after FFT (Fast Fourier Transform), we can get an
implicit diversity gain. Since this scheme does not require
feedback control and switching, we can solve the problems in
switch diversity. Furthremore, the proposed scheme is efﬁcient
in a severe frequency selective fading channel.
This paper proposes a diversity receiver based on fast
directivity controlled ESPAR antenna for IEEE 802.15.4
which employs direct sequence spread spectrum. In IEEE
802.15.4, 250kbit/s of binary data are divided into 4-bit blocks
and mapped onto the 16-level symbol. Then the transmitter
43
AICT 2011 : The Seventh Advanced International Conference on Telecommunications
Copyright (c) IARIA, 2011.     ISBN: 978-1-61208-123-6

To Receiver
Bias Voltage
Fig. 1. A typical ESPAR antenna structure
chooses one of the 16 spreading sequences depending on the
symbol. The proposed scheme changes the steering pattern
of the ESPAR antenna at 62.5kHz which is the same as the
symbol rate of the IEEE 802.15.4 standard. Despite OFDM
systems, IEEE 802.15.4 is robust to the distortion due to fast
variation of the channel, the proposed scheme gives the diver-
sity gain without equalizations. Other elements in the vicinity
of the director are terminated by the variable capasitors. These
elements are referred to as the parastic elements. Therefore,
the steering beam pattern varies depending on the bias voltages
applied to the variable capasitors.
The rest of paper is organized as follows. Section 2 illus-
trates the principle of ESPAR antenna followed by the physical
layer signaling of the IEEE 802.15.4 standard in Section
3. Section 4 proposes an ESPAR-antenna based diversity
scheme for IEEE 802.15.4. Section 5 shows the bit error rate
performance of the proposed scheme by computer simulation.
II. PRINCIPLE OF ESPAR ANTENNA
Fig. 1 shows a typical conﬁguration of ESPAR antenna.
ESPAR antenna is composed of three quarter-wavelength
monopole antennas. Although ESPAR antenna has one RF
port, it is capable of steering the beam pattern similar to the
well-known adaptive array antennas having multiple RF ports.
The ESPAR antenna in Fig. 1 is composed of three monopole
antennas, each of which is quarter-wavelength antenna. The
director at the middle of the array is connected to the RF
input of the receiver. Two other elements in the vicinity of
the director are terminated by the variable capasitors. These
elements are referred to as the parastic elements. The phase
of the induced currents ﬂows at the parastic elements can be
controlled by the reactance value according to the bias volt-
ages. Therefore, the steering beam pattern varies depending on
the bias voltages applied to the variable capasitors connected
to the parastic elements.Since the variable capacitors, which
terminate to parastic elements,are passive devices, and their
reactance value are controlled by the bias voltages.ESPAR
antenna does not consume the power in principle.
As applications of ESPAR antennas, estimation of the arrival
direction of the signal using MUSIC (multiple signal classiﬁ-
cation) method or ESPRIT (estimation of signal paramters via
bit to
symbol
symbol to
sequence
OQPSK
modulator
s(t)
b
m
c(m)
Fig. 2. Block diagram of the transmitter based on IEEE 802.15.4 PHY standard
h0
h1
ESPAR antenna
variable
reactance
oscillator
f = 62.5kHz
MSK
demodulator
MF0
MF1
MF15
choose
max
symbol
to bit
Zig-Bee Receiver
g(t)
r(t)
uk
ˆm
ˆb
y(0)
y(1)
y(15)
Fig. 3. Block diagram of the proposed receiver
rotational invariance technique) method have been proposed
[3,4]. Hasuike et al. [5] proposed on use of ESPAR antenna for
wireless ad-hoc network in order to reduce radio interference.
However, this method require modiﬁcations in MAC layer
protocol.
The diversity receiver based on ESPAR antenna has also
been proposed as mentioned in introduction. However, the
conventional ESPAR antenna-based diversity receiver is not
efﬁcient in terms of diversity gain and tracking capability.
III. IEEE 802.15.4 PHY STANDARD
Fig. 2 illustrates the block diagram of the transmitter based
on IEEE 802.15.4 physical layer standard. Four-bit block
b = (b0, b1, b2, b3) is mapped onto the 16-level symbol
according to the conversion formula, m = 23b3 + 22b2 +
2b1 + b0 at the bits-to-symbol converter. One of 16 spreading
sequences is chosen according to the symbol at the symbol-to-
sequence converter. The output sequence is given by c(m) =
(c(m)
0
, c(m)
1
, . . . , c(m)
31 ). This spreading sequence is applied to
OQPSK (Offset Quadrature Phase Shift Keying) modulator
to generate the transmit signal. The output of the OQPSK
modulator in the equivalent low pass expression is given by
s(t) =
∑
k
c2kf(t−2kTb)+j
∑
k
c2k+1f(t−(2k+1)Tb), (1)
where a sinusoidal waveform is chosen as a spreading chip
pulse waveform. The pulse waveform is given by
f(t) =



cos
( πt
2Tb
)
;
(|t| ≤ Tb)
0;
(|t| > Tb)
(2)
where Tb = 1/(2 × 106) = 5 × 10−7 is the chip duration.
IV. PROPOSED ESPAR ANTENNA-BASED DIVERSITY
RECEIVER
Fig. 3 shows the block diagram of the proposed ESPAR-
antenna-based diversity receiver for IEEE 802.15.4. The steer-
ing beam pattern varies at a frequency of Ts = 1/(32Tb) =
62.5kHz, which is the same as the symbol rate.
44
AICT 2011 : The Seventh Advanced International Conference on Telecommunications
Copyright (c) IARIA, 2011.     ISBN: 978-1-61208-123-6

In the following, we assume a slow Rayleigh fading channel.
The received signal at the output of the ESPAR antenna is then
given by
r(t) = (h0 + h1g(t)) s(t) + z(t),
(3)
where hi (i = 0, 1) represents the attenuation and phase
rotation due to fading. In Rayleigh fading channel, hi is a zero-
mean complex Gaussian random variable. g(t) is the channel
variation due to the change in the steering beam pattern of
the ESPAR antenna. Furthermore, z(t) is an additive white
Gaussian noise (AWGN) component. By substituting Eq. (1),
we can rewrite the received signal as
rk = (h0 + h1gk) dk + zk,
(4)
where
dk =
{ ck
(even k)
jck
(odd k)
,
(5)
where rk = r(kTb), gk = g(kTb), and zk AWGN component
after sampling.
The received signal is then applied to the non-coherent MSK
(Minimum Shift Keying) demodulator. The output of the MSK
demodulator is given by
uk = ℑ
[
rkr∗
k−1
]
.
(6)
The output, uk is applied to the bank of 16 matched ﬁlters
(MFs). The impulse response of the m-th MF is given by
q(m)
2k
=
{
−1
(c(m)
2k−1 = c(m)
2k )
+1
(c(m)
2k−1 ̸= c(m)
2k )
(7)
q(m)
2k+1 =
{
+1
(c(m)
2k
= c(m)
2k+1)
−1
(c(m)
2k
̸= c(m)
2k+1) .
(8)
The output of the m-th MF is then given by
y(m) =
N−1
∑
k=0
q(m)
k
uk.
(9)
The output of the m-th MF, y(m), is fed to the maximum value
selector. The symbol which maximizes the MF output m = ˆm
is supposed to be transmitted at the maximum value selector.
The estimated symbol is applied to the symbol-to-bit converter
to convert the bit stream, ˆb.
V. ERROR RATE ANALYSIS
Now, let us deﬁne the received signal after sampling as
wk = (h0 + h1gk) + z′k. The received signal is represented
in vector-form as:
w = [w0, w1, . . . , wN−1]T ,
(10)
Then, the m-th MF output can be expressed in quadratic form
as:
y(m) = wHFw,
(11)
where
F =


0
1
0
· · ·
0
1
0
1
0
· · ·
0
0
1
0
1
0
...
...
...
...
...
...
...
0
· · ·
0
1
0
1
0
· · ·
0
1
0


,
(12)
is a matrix representing the demodulator and MF.
The covariance matrix of w is given by
R
=
1
2E
[
w∗wT ]
=
[ρik]i,k=0,1,...,N−1 ,
(13)
where the i-th row, the k-th column element is given by
ρik =
{ b + σ2
z
(i = k)
b
2 (1 + g∗
i gk)
(i ̸= k) ,
(14)
where b is the average received signal power, and σ2
z is the
variance of the AWGN component.
Now we can derive the pairwise error probability that the
m′ is transmitted when m was transmitted. Suppose that the
probability density function of X = y(m) is deﬁned as p(X).
The pairwise error probability is given by
P {m → m′}
=
∫ 0
−∞
p(X)dX
=
∫ 0
−∞
∫ ∞
−∞
G (ξ) exp (−jξX) dξdX
=
∫ ∞
−∞
G (ξ)
ξ
dξ
(15)
where G(ξ) is the characteristic function of X = y(m), and
given by
G (ξ) =
1
det (I − 2jξR∗F)
(16)
Let C = {λ| det(A − λI) = 0} be a set of all the eigen-values
of A = 2R∗F. The characteristic function is further rewritten
as
G (ξ) =
[ ∏
λ∈C
(1 − jλξ)
]−1
(17)
From the above analysis, the pairwise error probability is given
by
P {m → m′} =
∑
λ∈Cm


∏
λ′ ∈ C
λ′ ̸= λ
(
1 − λ′
λ
)


−1
(18)
where Cm = {λ|λ ∈ C, ℜ[λ] < 0} of A is a set of eigenvalues
whose real components are negative.
45
AICT 2011 : The Seventh Advanced International Conference on Telecommunications
Copyright (c) IARIA, 2011.     ISBN: 978-1-61208-123-6

Fig. 4. Bit Error Rate Performance of the Proposed Diversity Receiver
10-7
10-6
10-5
10-4
10-3
10-2
10-1
100
10-3
10-2
10-1
100
101
Symbol Error Rate
Normalized Frequency fsTs
Eb/N0=40dB
Eb/N0=30dB
Eb/N0=20dB
Fig. 5. Error Rate Performance against the normalized frequency for directivity
change
10-6
10-5
10-4
10-3
10-2
10-1
 10
 15
 20
 25
 30
 35
 40
Symbol Error Rate
Eb/N0 (dB)
N=1
N=2
N=3
N=4
N=5
N=7
Fig. 6. Error Rate Performance against the number of elements
VI. NUMERICAL AYALYSIS
In this section, we analyze the bit error rate performance of
the proposed diversity receiver by computer simulation. In the
following, we assume that the function corresponding to the
fast time variation of steering beam pattern is given by
gk = exp
(j2παt
Ts
)
(19)
where α is the beam pattern variation frequency normalized
by the symbol rate (1/Ts = 62.5kbit/s).
Fig. 4 shows the bit error rate performance of the proposed
scheme. In this ﬁgure, we assume α = 1. We can conﬁrm that
proposed scheme gives diversity gain.
Now, the bit error rate against the steering beam pattern
variation frequency is shown by making use of Eq. (18).
Fig. 5 shows the symbol error rate performance against the
normalized variation frequency. We can not get the diversity
gain when the normalized frequency of beam pattern variation
is less than 0.5. This is because the received signal strength
variation is reduced. On the other hand, the symbol error rate
drastically degrades when the normalized frequency exceeds
5 since the distortion due to beam pattern variation affects
the detection. From this result, we have to set the normalized
frequency for 0.5 < α < 5. It also shows that it is no need to
synchronize the frequency to symbol rate.
In the discussions above, we assume the two-element ES-
PAR antenna. However, further improvement in error rate
performance could be possible if we use two or more parastic
elements. Now, let us assume that the control frequency for
l-th parastic element is kα. Fig. 6 shows the impact of the
number of ESPAR antenna elements to the symbol error rate
performance. From this ﬁgure, we can further improve the
error rate performance.
VII. CONCLUSION
This paper proposed the single-RF diversity receiver using
fast steering beam pattern controlled ESPAR antenna for
IEEE 802.15.4. The proposed scheme is capable of obtaining
diversity gain by changing the steering beam pattern at the
frequency of symbol rate. Computer simulation result showed
that the proposed scheme efﬁciently get the diversity gain in a
Rayleigh fading environment. Further improvement is possible
by increase in the number of parastic elements.
ACKNOWLEDGMENTS
The authors would like to thank Dr. Ueba, President of ATR
Wave Technology Laboratory for supporting this project. This
study was supported by Industrial Technology Research Grant
Program in 2010 from New Energy and Industrial Technology
Department Organization (NEDO) of Japan.
REFERENCES
[1] K. Gyoda and T. Ohira,“ Design of electronically steerable passive array
radiator (ESPAR) antennas, ” Proc. Antennas and Propagation Society
International Symposium, Salt Lake City, UT, USA, vol. 2, pp. 922-
925, July 2000.
46
AICT 2011 : The Seventh Advanced International Conference on Telecommunications
Copyright (c) IARIA, 2011.     ISBN: 978-1-61208-123-6

[2] S. Tsukamoto and M. Okada, “
Single-RF maximal ratio combining
diversity for OFDM system using an ESPAR antenna whose direction
is oscillated in the symbol time, ” Proc. of Thailand-Japan Microwave
forum 2009, Bangkok, Thai, FR7-2, August 2009.
[3] C. Plapous, Jun Cheng, E. Taillefer, A. Hirata and T. Ohira,“ Reactance
domain MUSIC algorithm for electronically steerable parasitic array
radiator, ”
IEEE Trans. Antennas and Propagation, vol. 52, issue 12,
pp. 3257-3264, Dec. 2004.
[4] E. Taillefer, A. Hirata and T. Ohira, “
Reactance-domain ESPRIT
algorithm for a hexagonally shaped seven-element ESPAR antenna, ”
IEEE Trans. Antennas and Propagation, vol. 53, issue 11, pp. 3486-
3495, Nov. 2005.
[5] K. Hasuike, S. Horisawa and S. Tawara,“
An Adaptive MAC and
Directional Routing Protocol for Ad Hoc Wireless Networks Using
ESPAR Antenna, ”
in Proceedings of ACM MobiHoc, pp. 243-246,
2001.
[6] J. G. Proakis, ” Digital Communications - Fourth Edition, ” McGraw-
Hill, Singapore, 2001.
[7] IEEE Standard for Information technology — Telecommunications and
information exchange between systems — Local and metropolitan area
networks — Speciﬁc requirements, Part 15.4: Wireless Medium Access
Control (MAC) and Physical Layer (PHY) Speciﬁcations for Low-Rate
Wireless Personal Area Networks (WPANs), IEEE Std 802.15.4-2006,
2006.
47
AICT 2011 : The Seventh Advanced International Conference on Telecommunications
Copyright (c) IARIA, 2011.     ISBN: 978-1-61208-123-6

