Modeling Handover Latency in PMIPv6-based Protocols with Timed Petri Nets
Nivia Cruz Quental
Department of Computer Science, Centro de Inform´atica (CIn)
Universidade Federal de Pernambuco (UFPE)
Recife, Brasil
Email: ncq@cin.ufpe.br
Abstract—Performance evaluation of networking protocols is gen-
erally related to metrics like latency, signaling overhead, packet
loss, throughput, among others. Speciﬁcally for latency modeling,
most of analytical modeling techniques involve considering the
handover latency as a sum of all delays of each signaling message
in the handover. However, it may not reﬂect the reality of
various protocols based on Proxy Mobile Internet Protocol version
6 (PMIPv6), which may consider asynchronous and parallel
messages. Petri Nets are state-transition systems capable of
expressing parallelism, synchronization, and allowing evaluation
of properties of the systems modeled. The Timed Petri Net
extension can additionally express time elapsing, which makes it
a powerful tool for performance evaluation. This paper proposes
to employ Timed Petri Nets to model PMIPv6-based protocols,
and, therefore, to bring attention to the main advantages of this
formalism for performance evaluation.
Keywords–PMIPv6; Timed Petri Nets; Mobility; Modeling.
I.
INTRODUCTION
The Internet Engineering Task Force (IETF) has proposed
the PMIPv6 [1] protocol to address issues related to energy
saving and high latency found in Mobile IP (MIP). PMIPv6
considers two entities: the Mobile Access Gateway (MAG),
which tracks the current Mobile Node (MN) location; and
Local Mobility Anchor (LMA), which plays a similar role
as the MIP’s Home Agent for its domain. Signaling between
MAG and LMA is responsible for the MN binding update.
Several PMIPv6 extensions have been proposed to reduce
packet loss during handover, as in Fast Handovers for PMIPv6
(FPMIPv6) [2]. Other proposals handle localized routing as in
Optimized PMIPv6 (O-PMIPv6) [3]. Multihoming aspects are
considered by the Transient Binding for PMIPv6 (TPMIPv6)
protocol [4].
In order to evaluate these protocols, one may use measure-
ments, simulation, or analytical modeling techniques. While
measurements and simulation may give ﬁne-grained details
about network behavior, the use of analytical modeling may
raise protocol design issues in earlier stages of the development
in a shorter time than the other techniques.
This paper presents a proposal for modeling network-based
mobile protocols at the IP layer using Timed Petri Nets.
Petri Nets are a formalism generally employed to analyze the
behavior of various types of systems, from product lines to
programming languages. Petri Nets are capable of expressing
parallelism and synchronization, and to check for possible
deadlocks in systems [5]. Timed Petri Nets are an extension
to that formalism that allows performance assessment [6].
Applying Timed Petri Nets to these protocols allows proto-
col designers to anticipate important issues about reliability,
robustness and performance in an expressive and simple way.
The remainder of this paper is organized as follows. Section
II presents some of the main PMIPv6-based protocols; in
Section III, we discuss related work on modeling the handover
latency for those protocols; in Section IV, we introduce a
proposal for modeling some PMIPv6-based protocols using
Timed Petri Nets, followed by the conclusion in Section V.
II.
IPV6 MOBILITY MANAGEMENT
In order to accomplish handover between two different
networks, in addition to link layer procedures, it is necessary to
update routing tables, IP addressing, and handle authentication
issues. These mobility management procedures are done by
mobility protocols at the network layer. The most well-known
mobility protocol is the MIP, which proposes the MN to
keep the original IP address while moving beyond its original
network, also known as Home Network. The Home Agent
(HA) entity is the coordinator of the network. When the MN
visits a foreign network, it receives a Care-of address (CoA)
in order to be reachable by its HA in the foreign network.
MIP has standards for both IPv4 and IPv6. Figure 1 presents
the signaling for the MIP handover. After a new attachment,
the MN receives the CoA information. Then, the Binding
Update (BU) and Binding Acknowledgment (BA) messages are
exchanged. They are responsible for the update of the HA’s
binding table.
HA
FA
BA
BU
Movement detection
New attachment
CoA Configuration
MN
Figure 1. Mobile IP signaling ﬂow.
The MIPv6 Fast Handovers (FMIP) [7] is a MIP extension
that intends to reduce handover latency through anticipation of
the address conﬁguration step during the movement detection
phase. The Hierarchical MIPv6 [8] protocol seeks to reduce
latency handling local and global mobility separately. This
avoids unnecessary signaling overhead while there is intra-
domain mobility with the help of a Mobility Anchor Point.
107
Copyright (c) IARIA, 2017.     ISBN:  978-1-61208-546-3
ICN 2017 : The Sixteenth International Conference on Networks (includes SOFTNETWORKING 2017)

Since MIP requires that the MN has the protocol imple-
mentation in its operational system and, therefore, leads to an
additional energy consumption, the IETF Distributed Mobility
Management (DMM) working group proposed the PMIPv6
protocol [1]. PMIPv6 introduces two types of entities: MAG
and LMA. A MAG detects movements of MNs and, thus, start
binding update signaling. The LMA plays a similar role to the
HA from MIP. Thus, PMIPv6 reduces the signaling overhead
and the energy consumption on the MN side. Additionally,
PMIPv6 does not require modiﬁcations in the operating system
of the MN, being more adaptable to legacy devices. Figure 2
presents the PMIPv6 message ﬂow for the handover. After the
link layer handover, the previous MAG (PMAG) detects the
detachment of the MN. Then, the MN asks the new MAG
(NMAG) for a new route through the Rtr Sol message
from the Internet Control Message Protocol (ICMP). Then,
the NMAG requests the binding update to the LMA through
the Proxy Binding Update (PBU) message. The LMA then
responds with the Proxy Binding Acknowledgment (PBA)
message. Finally, the NMAG may announce the new route
to the MN sending the Rtr Adv ICMP message.
L2 dettach
Dereg PBU
Rtr Sol.
PBU
PBA
Tunnel
Rtr Adv. 
MN
PMAG
NMAG
LMA
Figure 2. PMIPv6 signaling ﬂow.
The FPMIPv6 protocol [2] adds a buffering scheme and
a new tunnel between the PMAG and the NMAG while
handover control messages are being exchanged. The main
purpose of FPMIPv6 is to reduce packet loss during handover.
FPMIPv6 may work in two modes: predictive or reactive. In
the predictive mode, shown in Figure 3, PMAG sets up a tunnel
with the NMAG through the HI (Handover Indication) and
HACK (Handover Acknowledgment) messages as the link of
the MN is about to be switched. After the node associates with
the new network, NMAG exchanges signaling with the LMA,
just like in PMIPv6. In the reactive mode, the tunnel setup
occurs after the node connects to the link of the new network.
In that case, the NMAG starts the signaling with the PMAG
in order to conﬁgure the tunnel. This can be seen in Figure 4.
The rest of the signaling is as in PMIPv6. Although FPMIPv6
may reduce packet loss, the signaling overhead introduced may
increase the handover latency.
III.
HANDOVER LATENCY MODELING AND RELATED
WORK
Analytical modeling is a very powerful technique for
performance evaluation of mobile network protocols. This is
based on mathematical concepts and helps to predict systems
behavior in a variety of scenarios in a short time.
L2 dettach
MN
PMAG
NMAG
LMA
RA
Tunnel
PBA
PBU
Rtr Sol.
HACK
HI
Tunnel
Figure 3. FPMIPv6 signaling ﬂow in the predictive mode.
L2 dettach
MN
PMAG
NMAG
LMA
RA
Tunnel
Tunnel
HACK
HI
Rtr Sol.
PBU
PBA
Figure 4. FPMIPv6 signaling ﬂow in the reactive mode.
McNair, Akyildiz, and Bender [9][10] propose a frame-
work to evaluate the performance of their proposal of two-
path handover technique for MIPv6. The framework considers
mathematical equations to calculate the speciﬁc operations of
the proposed handover technique, bandwidth utilization and
disruption time, that is, the time when the communication
between nodes is interrupted because of the data path switch.
These metrics are based on the latency measured between two
network entities:
T = M + (Tw + M) ×
q
1 − q ,
(1)
where M is the time to deliver a message, including process-
ing, transmission, and propagation delays; q is the probability
of link failure, and Tw is the waiting time to determine if a
message is lost. Hussien et al. [11] utilizes that modeling to
evaluate the performance of a Quality of Service (QoS) exten-
sion for MIPv6 (DiffServ-MIPv6) developed by the authors.
Hussain, Bakar, and Salleh consider equations to model
handover latency to evaluate an intra-domain PMIPv6-based
handover technique for vehicular network using Media In-
dependent Handover (MIH) [12]. The latency equivalent to
the signaling exchanged between MN and MAG (TRS) and
between MAG and LMA (T P MIP v6
LU
) is as follows:
TRS = 1 + Pf
1 − Pf
M RS
S
Bwl
+ Twl

,
(2)
T P MIP v6
LU
= nh
M P BU
S
Bwd
+ Twd

,
(3)
108
Copyright (c) IARIA, 2017.     ISBN:  978-1-61208-546-3
ICN 2017 : The Sixteenth International Conference on Networks (includes SOFTNETWORKING 2017)

where Pf is the probability of link failure, M RS
S
and M P BU
S
are the size of the Rtr Sol and PBU messages, Bwl and Bwd
are the wireless and wired bandwidths, Twl and Twd are the
wireless and wired propagation delays, and nh is the number
of hops between the LMA and the MAG.
Makaya and Pierre [13] evolve the model in [9] considering
the buffering aspects of FPMIPv6 and the queue delay in the
handover latency equation. Thus, according to the authors, the
latency of a signaling message exchanged between two nodes
x and y (Tx−y) may be measured as follows:
Tx−y = 1 + q
1 − q
Msize
Bwl
+ Lwl

+
Hx−y
Msize
Bw
+ Lw + Tq

.
(4)
The ﬁrst part of the sum is the wireless overhead and
it must be excluded if neither x nor y is a wireless device.
The second part is the overhead in the wired medium. The
H(x−y) is the distance in hops between the two entities x and
y. The parameter q is the probability of failure of the wireless
link, Msize is the average length of a message, and Bwl
and Bw are the wireless and wired bandwidths, respectively.
The propagation delay in wireless and wired media are Lwl
and Lw, respectively. The average queuing delay in each
router is represented by Tq. Handover latency is the sum
of the latency of all signaling messages exchanged during
a handover. Taghizadeh et al. [14] apply the model in [13]
to an analytical modeling framework for PMIPv6-based inter-
domain protocols.
These contributions have in common the fact that the
handover latency is calculated as the sum of all delays gen-
erated by each handover signaling message. This may seem
appropriate for protocols like MIP and PMIPv6, where the
signaling ﬂow comprises synchronous messages. However, for
PMIPv6-based protocols where there may be asynchronous
messages, or messages that may be sent in parallel, these mod-
els may lead to incorrect assumptions. Thus, formal methods
that are expressive enough to represent resource consumption
and parallelism, like Petri Nets, may be the best suitable
solution to model such protocols. Singh et al.[15] analyze
several generations of mobile network systems, namely, GPRS,
LTE and MANET using Petri Nets. The authors do not evaluate
the performance of such technologies, however, they verify
if they are robust and deadlock-free. Lakos [16] proposes to
model MIPv4 networks in Mobile Petri Nets, a variation of
Petri Nets that makes possible to represent the network divided
into subsystems. Lakos does not present any performance
evaluation, however, the author highlights the advantages of
the graphical representation instead of a pure textual notation.
Dutta et al. [17] use Timed Petri Nets to model the MIP
binding update, including link-layer network association, CPU,
memory, and bandwidth consumption. However, to the best of
our knowledge, there are no studies about performance evalu-
ation of PMIPv6-based protocols using Timed Petri Nets. It is
important to ﬁll that gap, since Petri Nets are a powerful mean
to evaluate properties, resource management and synchroniza-
tion in systems and, when associated to the cited mathematical
models, it can help to predict systems performance.
IV.
TIMED PETRI NET MODELING
In this section, the handover process in several PMIPv6-
based protocols is represented as a Timed Petri Net. Each
place in the Petri Net (represented by circles) reproduces a
handover step achieved. Each timed transition of the Petri
Net (represented by white rectangles) reproduces a signaling
message exchanged between network entities with a delay
calculated as in any latency modeling seen in Section III. The
token (represented by a small circle inside a place) controls
the state change. When there is a token in the ﬁrst place of the
Petri Net, it means that a new handover is about to start. The
arcs in the Petri Net (represented by arrows) connect places to
transitions and determine how many tokens a transition may
produce to the subsequent place. Every time a transition is
ﬁred, it consumes a token from the previous place connected
to it.
Figure 5 presents the Timed Petri Net for the PMIPv6
handover. This is equivalent to the signaling presented in
Figure 2. At this time, the T_L2Trigger transition will ﬁre
after the link-layer handover time elapses. The T_TxRtrSol
transition represents the ICMP message that the MN sends to
its MAG. In that state, the L3HOStart place would have
a token and the network layer handover could start. The
T_TxPBU transition will ﬁre after the delay equivalent to the
delivery of the PBU message. The token would be removed
from the L3HOStart place and a new token would appear in
the P1 place, representing that the LMA is in a state ready to
send the PBA message. Then, the T_TxPBA transition waits
the equivalent PBA signaling delay to ﬁre. The Timed Petri
Net is modeled as a directed circuit, that is, the last transition
is connected to the ﬁrst place. It may be helpful to simulate
various iterations and, thus, to calculate average values.
Figure 5. Timed Petri Net for PMIPv6 signaling.
Figure 6 presents the Timed Petri Net for the FPMIPv6
handover in the predictive mode. This is equivalent to the
signaling presented in Figure 3. It is important to notice
that the beginning of the tunnel setup depends only on the
T_L2Trigger transition and the binding update may start
only after the transition T_TxRtrSol ﬁres. From this mo-
ment, the tunnel setup between MAGs and the binding update
process may occur in parallel, as is expected in the FPMIPv6
predictive mode. That situation makes clear the advantage of
using a Timed Petri Net model over modeling the handover
latency as a sum of signaling delays. The parallelism is
clearly expressed, which makes the model closer to the way
the protocol is expected to work than with other modeling
approaches.
Figure 7 presents the Timed Petri Net for the FPMIPv6
handover in the reactive mode. This is equivalent to the
signaling presented in Figure 4. In that case, the tunnel setup
109
Copyright (c) IARIA, 2017.     ISBN:  978-1-61208-546-3
ICN 2017 : The Sixteenth International Conference on Networks (includes SOFTNETWORKING 2017)

Figure 6. Timed Petri Net for FPMIPv6 signaling in the predictive mode.
between MAGs takes place after the T_TxRtrSol transition
ﬁres. In this model, the T_TxPBU transition may ﬁre only
after the T_TxHI ﬁres, since it is sent by the same entity.
This is represented by two arcs pointing to T_TxPBU. That
dependency is not modeled in the predictive mode, since the
tunnel setup occurs sooner, and, therefore, the HI message
would always be sent before the PBU message.
Figure 7. Timed Petri Net for FPMIPv6 signaling in the reactive mode.
It is important to notice that the use of Timed Petri
Nets makes clear the main differences between PMIPv6 and
FPMIPv6, and the FPMIPv6 proactive and reactive modes, due
to its graphic features. It does not mean, though, that latency
modeling as in related work may be discarded. Instead, the
latency equations must be used to ﬁnd a suitable value for
each timed transition. With these two modeling techniques
associated, one may obtain results that are closer to the ones
that can be found in a real world environment.
V.
CONCLUSIONS AND FUTURE WORK
This paper proposed Timed Petri Nets as a tool for
modeling PMIPv6-based protocols. Timed Petri Nets are a
formal language capable of representing resource consumption,
parallelism, synchronization, and time elapsing. This makes
Timed Petri Nets helpful when studying the differences among
protocols in a simple and clear way. Thus, protocol designers
can raise design issues before investing in a deployment
environment for testing.
This paper described a work in progress. Therefore, as
future steps, a study on the characterization of signaling delays
is expected. This will make possible to infer the corresponding
probability distribution function and to model these protocols
using Stochastic Petri Nets [18], where steady state results may
be collected. Buffering mechanisms and data ﬂow may be as
well considered in future work. Modeling of O-PMIPv6 and
T-PMIPv6 are further expected.
REFERENCES
[1]
S. Gundavelli, K. Leung, V. Devarapalli, K. Chowdhury, and B. Patil,
“Proxy mobile IPv6,” RFC 5213, aug 2008, retrieved: March 2017.
[Online]. Available: http://tools.ietf.org/html/rfc5213
[2]
H.
Yokota,
K.
Chowdhury,
R.
Koodli,
B.
Patil,
and
F.
Xia,
“Fast
handovers
for
proxy
mobile
IPv6,”
RFC
5949,
september
2011,
retrieved:
March
2017.
[Online].
Available:
http://tools.ietf.org/html/rfc5949
[3]
A. Rasem, C. Makaya, and M. St-Hilaire, “O-PMIPv6: efﬁcient han-
dover with route optimization in proxy mobile IPv6 domain,” in Proc.
IEEE 8th International Conference on Wireless and Mobile Computing,
Networking and Communications, 2012, pp. 47–54.
[4]
M. Liebsch, A. Muhanna, and O. Blume, “Transient binding for proxy
mobile IPv6,” RFC 6058, mar 2011, retrieved: March 2017. [Online].
Available: http://tools.ietf.org/html/rfc6058
[5]
M. Bouhalouanea, S. Larbib, and H. Haffaf, “Combining bond graphs
and petri nets formalism for modeling hybrid dynamic systems,” in
Proc. 10th International Conference on Future Networks and Commu-
nications, 2015, pp. 252–259.
[6]
C. Chao and A. Thomaz, “Timed petri nets for ﬂuent turn-taking over
multimodal interaction resources in human-robot collaboration,” The
International Journal of Robotics Research, vol. 35, no. 11, 2016, pp.
2529–2538.
[7]
E.
R.
Koodli,
“Mobile
IPv6
fast
handovers,”
RFC
5568,
july
2009,
retrieved:
March
2017.
[Online].
Available:
http://tools.ietf.org/html/rfc5568
[8]
H.
Soliman,
C.
Castelluccia,
K.
ElMalki,
and
L.
Bellier,
“Hierarchical mobile IPv6 (HMIPv6) mobility management,” RFC
5380, october 2008, retrieved: March 2017. [Online]. Available:
http://tools.ietf.org/html/rfc5380
[9]
J. McNair, I. Akyildiz, and M. D. Bender, “Handoffs for real-time
trafﬁc in mobile IP version 6 networks ,” in Proc. First Global
Telecommunications Conference, 2001, pp. 3463–3467.
[10]
——, “An inter-system handoff technique for the IMT-2000 system,”
in Proc. IEEE INFOCOM, 2000, pp. 208–216.
[11]
L. F. Hussien, A. Aisha-Hassan, M. H. Habaebi, O. O. Khalifa, and S. A.
Hameed, “Development of analytical approach to evaluate (DiffServ-
MIPv6) scheme,” Research Journal of Applied Sciences, Engineering
and Technology, vol. 7, no. 12, 2014, pp. 2529–2538.
[12]
H. N. Hussain, K. A. Bakar, and S. Salleh, “A novel intra-domain
continues handover solution for inter-domain pmipv6 based vehicular
network,” International Journal of Advanced Computer Science and
Applications, vol. 2, no. 12, 2011, pp. 12–18.
[13]
C. Makaya and S. Pierre, “An analytical framework for performance
evaluation of ipv6-based mobility management protocols,” IEEE Trans-
actions on Wireless Communications, vol. 7, no. 3, 2008, p. 7.
[14]
A. Taghizadeh, T.-C. Wan, R. Budiarto, F. T. Yap, and A. Osman,
“A performance evaluation framework for network-based IP mobility
solutions,” International Journal of Innovative, Computing, Information
and Control, vol. 8, no. 10, 2012, pp. 7263–7288.
[15]
S. Singh, G. Singh, V. Narasimhan, and H. S. Pabla, “Petri net mod-
elling and analysis of mobile communication protocols UMTS, LTE,
GPRS and MANET,” in Proc. International Conference on Computer
Communication and Informatics, 2014, pp. 1–9.
[16]
C. Lakos, “Modelling mobile IP with mobile petri nets,” in Transactions
on Petri Nets and Other Models of Concurrency III, K. Jensen, Ed.
Berlim: Springer Berlin Heidelberg, 2009, vol. 5800, pp. 127–158.
[17]
A. Dutta, B. Lyles, H. Schulzrinne, and J. Wang, “Systems modeling
for IP-based handoff using timed petri nets,” in Proc. 42nd Hawaii
International Conference on System Sciences, 2009, pp. 1–10.
[18]
M. A. Marsan, “Stochastic Petri nets: An elementary introduction,” in
Advances in Petri Nets 1989, G. Rozenberg, Ed.
Berlin, Heidelberg:
Springer Berlin Heidelberg, 1990, pp. 1–29.
110
Copyright (c) IARIA, 2017.     ISBN:  978-1-61208-546-3
ICN 2017 : The Sixteenth International Conference on Networks (includes SOFTNETWORKING 2017)

