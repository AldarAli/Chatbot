Layer Optimization for DHT-based Peer-to-Peer Network 
Jun Li *, Cuilian Li, Zhaoxi Fang 
Department of Telecommunication 
Zhejiang Wanli University 
Ningbo, China 
xxllj, licl@zwu.edu.cn, zhaoxifang@gmail.com 
Haoyun Wang  
College of Information Science & Technology  
Nanjing Agricultural University  
Nanjing, China 
Wanghy@njau.edu.cn
 
 
Abstract—Hierarchical architecture has been found to facilitate 
effective search in P2P network and ensure system scalability in 
P2P application deployment. However, the lack of appropriate 
size ratio of super nodes layer and ordinary nodes layer makes 
the system search performance far from being optimal. Taking 
advantage of node heterogeneity, this paper presents a search 
delay model to characterize the two-layer P2P architecture using 
DHT at the top level. With the proposed models, optimal layer 
division can be achieved. Simulation analysis and numerical 
results validate the proposed model and solution.  
Keywords—Peer-to-Peer; Layer Division; Distribiuted Hash Table 
(DHT) 
I. 
 INTRODUCTION 
With the dramatic increase of Internet bandwidth and 
application of Peer-to-Peer (P2P) technology in Internet 
telephony, VoIP (Voice over IP) technology has developed 
rapidly and become a very popular communication vehicle 
due to its low cost and convenience to Internet users. Skype[1], 
the perfect combination of P2P and VoIP, sets a good 
paradigm to inspire a generation of P2P based solutions for 
satisfactory real-time multimedia services over Internet. 
Unlike file-sharing system with multiple replications of 
resources, VoIP user is unique in the system, thus it is more 
difficult and costly to locate the exact user, whereas the fast 
reach to the desired user is one of the key issues to user-
perceived Quality of Service (QoS). In addition, VoIP P2P 
infrastructure is expected to accommodate millions of users 
and should be well scaled owing to its possible global 
application. Therefore, such a P2P infrastructure has to secure 
the specific requirements such as low lookup delay, high hit 
rate, and light workload. 
Current decentralized P2P networks can be generally 
classified into two broad categories, structured and 
unstructured [2]. Purely unstructured P2P systems, such as 
earlier Gnutella [3], tend to either cost significant overheads 
or generate enormous query traffic in the exhaustive search, 
though they are characterized as high robustness and easy 
maintenance, which is the key reason that they are favored in 
the P2P paradigm. In contrast, structured P2P networks use 
distributed hash table (DHT) [4,5,6,7] for accurate object 
placement and lookup, but they are very sensitive to the 
dynamics of the network [8], owing to the fact that routing 
efficiency in DHTs is based on the consistent maintenance of 
routing tables. Typically, high dynamics bring dramatically 
high costs. Therefore, both of systems could not scale well, 
neither could achieve low lookup delay and high successful hit 
rate. Hierarchical structure that uses DHT to organize P2P 
network (say Chord) in the top level may address the 
performance problems such as scalability and resilience, 
motivated by the fact that participating nodes in P2P system 
differ a lot in uptime, bandwidth, etc. [9].  
To further exploit the hierarchical DHT and develop the 
best performance for VoIP application, it is critical to address 
the problem of effective layer division. Thus, we propose the 
analysis model and give out the optimal size ratio between the 
number of super nodes (SNs) and ordinary nodes (ONs), 
taking into account the metric of total search delay under the 
constraints of SN capacity. Our study is expected to 
significantly reduce the mean lookup delay and effectively 
facilitate large-scale deployment of DHT based P2P lookup 
service by providing administrative autonomy nodes. 
The rest of the paper is structured as follows. Section II 
discusses the related work. We present the models of total 
search delay in Section III, and solve the optimization 
problem in Section IV with simulation support. Finally, 
Section V concludes the paper.  
II. 
RELATED WORK 
There have been some studies on the hierarchical P2P 
network. Garces-Erice et al. [10] explored a general 
framework for hierarchical DHTs, instantiating Chord at the 
top level. They also analyzed and quantified the improvement 
in lookup performance of hierarchical Chord, considering the 
node failure. Yuh-Jzer Joung et al. [11] presented a two-layer 
structure Chord2 to reduce maintenance costs, taking 
heterogeneity into account. Their work is distinguished to 
other hybrid architecture in the aspect that each layer forms an 
individual Chord ring.  
On the basis of analyzing the promising super-node based 
P2P network, Yung-Ming Li et al. [12] firstly investigated the 
issue of sizing and grouping decisions from the perspective of 
P2P network organizers, due to the important role they play in 
determining network performance. Their work mainly focused 
on network scale determination, and grouping decisions were 
mentioned as well in the context of symmetric interconnection 
structures: isolated, chained and complete. However, the work 
doesn’t aim for deployment. Since P2P network is self-
organized with total autonomy, it is not very practical to 
predetermine or design the scale of the network. Motivated by 
the work of Li Xiao et al. [13], we focus on studying the 
grouping decision to improve performance of the P2P network 
and thus make it scalable, taking advantage of the node 
heterogeneity. Our work differs from theirs on two aspects: (1) 
382
ICN 2011 : The Tenth International Conference on Networks
Copyright (c) IARIA, 2011              ISBN:978-1-61208-113-7

We study DHT based upper layer, while they focused on the 
unstructured upper overlay instead. (2) We optimize the 
scheme by considering lookup delay with the capability 
constraint of the super node, while they tried to make a 
tradeoff between workload of super node and overall P2P 
network. Zoels et al. [14] proposed an analytical framework to 
analyze the same hierarchical P2P architecture as we are 
studying on. They evaluated the costs of the whole network as 
well as each participant, in order to determine an optimal layer 
division of a given system, similar to the way that work [13] 
applied. Recently, the authors of [15,16] further presented an 
analytical model for DHT-based two-tier P2P overlay and 
determined optimal fraction of superpeers in the system, 
aiming at minimizing the total traffic without overloading any 
peer. Complementary to their work, our goal is to minimize 
lookup delay of the system. 
III. MODELING LOOKUP DELAY  
A. Hierarchical structure model 
In the considered two-layer hierarchical architecture, the 
participants are categorized as Ordinary Nodes (ONs) and 
Super Nodes (SNs). Those with longer uptime, better process 
capacity, network bandwidth and storage are elected as SN 
from the ONs. Each SN is responsible for its cluster and 
connects with all the nodes in the cluster. Meanwhile, the SN 
participates to form DHT-based SN network to facilitate upper 
layer searching (refer to Figure 1).  
(3) locate
 
Figure 1.  Search model in Hierarchical P2P network 
Only the SN maintains up-to-date information on all 
resources (nodes in the context of VoIP) available in the 
cluster. Every search query is generated at one of the nodes 
(including SN) in the cluster, and first processed at the local 
SN on a first-come, first-served basis. For a specific query, 
SN first examines the resource in its cluster. If not satisfied, 
the query will be forwarded to other SNs and searched in the 
upper SN network. Figure 1 depicts the search operations of a 
hierarchical P2P network. Node E sends a query to its 
responsible SN. If the target node is within the cluster, say 
node C, SN will locate it by examining its resource list. If the 
query could not be satisfied in the cluster, say target node I, 
SN will search in the upper DHT-based P2P network 
(instantiating Chord in this paper). Once the desired node is 
located, direct connection could be established between the 
two nodes. 
Consider a P2P hierarchical network with N participating 
nodes, in which 
 nodes are SNs and 
 nodes are ONs. 
Let 
NSN
ON
N
η  denote the layer size ratio, that is 
, the 
number of nodes that each SN takes care of. We 
have
ON /
SN
N
N
η =
1
1
NSN
N
η
=
+
, 
1
NON
N
η
η
=
+
, which denote the ratio of the 
number of SNs and ONs to that of the participating nodes, 
respectively. Without loss of generality, we assume that all the 
nodes in the same category (SN or ON) are statistically 
identical. 
In this section, we characterize the impact of layer size 
ratio η  on probability of SN failure and then model total 
search delay under the constraint of available SN capacity. 
B. Probability of SN failure 
In [6], node availability is calculated by dividing the 
number of probes that a host responds to by the total number 
of probes in Overnet, which is structured on a DHT called 
Kademlia. According to their measurement results, assuming 
x is node availability, the CDF (Cumulative Distribution 
Function) of node availability could be well modeled by 
power distribution of the form
, where k mostly falls in the 
interval of (0.
 within normal observation period 
(illustrated in Figure 2).  
kx
3,1)
0
0.1
0.2
0.3
0.4
0.5
0.6
0.7
0.8
0.9
1
0
0.1
0.2
0.3
0.4
0.5
0.6
0.7
0.8
0.9
1
Node availability
Percentage of nodes
k=0.4
k=0.5
k=0.6
k=0.8
k=1
 
Figure 2.  Node availability modeled by power distribution with varying 
observation time period 
That is, the percentage of nodes whose node availability 
not exceeding value x is
. Equally, the percentage of nodes 
whose node failure exceeds value (1-x) is
. Given layer 
size ratio 
kx
kx
η , the ratio of the number of SNs to that of all the 
participating nodes is 
1
1
NSN
N
η
=
+
. Since SNs typically have 
longer uptime than ONs and therefore achieve higher node 
availability, we have 
1
1 1
kx
η
−
=
+
, and 
1
1
k
x
η
η
⎛
⎞
= ⎜
⎟
⎝ +
⎠
 
That is, givenη , the minimum node availability for an SN 
is(
)
1
/ (1
) k
η
+η
. Accordingly, failure rate of each SN will not 
exceed
(
)
1
1
/ (1
) k
η
η
−
+
. In the worst case, all SNs have 
 
383
ICN 2011 : The Tenth International Conference on Networks
Copyright (c) IARIA, 2011              ISBN:978-1-61208-113-7

failure rate
(
)
1
1
/ (1
) k
p
η
η
= −
+
. 
C. Modeling and analyzing search delay 
In SN based hierarchical structure, search delay consists of 
two parts: (1) queuing delay at the SNs, (2) propagation delay 
during search operation, including propagation delay between 
ON and its responsible SN, and search propagation delay in 
SN overlay network. As locality-aware mechanism has been 
studied and widely applied in P2P paradigm [17], we can 
introduce locality-awareness upon ONs joining SN and the 
mean latency between an ON and its responsible SN 
 
is trivial compared to the mean latency between SNs in the 
upper layer. As to search propagation delay, we define the 
metric of lookup hops in SN upper network as the hops taken 
from sending query to receiving response, instead of the 
mostly measured hops from sending query to reaching the 
responsible node in flat P2P network, for the sake of fair 
comparison. Thus, one more hop in P2P network to forward 
the result back would be included.  
[
Intra ]
E T
We characterize the mean lookup hops in the upper SN 
network in this subsection. Then we model queuing delay at 
an SN. Finally the total search delay is proposed. 
1) Modeling lookup hops in upper SN network 
Taking Chord for instantiation as the upper DHT based SN 
network, we quantify the mean lookup latency in Chord 
network according to Garces-Erice’s work [10], and get the 
result by calculating in Matlab, as illustrated in Figure 3. 
0.9
0.8
0.7
0.6
0.5
0.4
0.3
0.2
0.1
0.0
40
30
20
10
0
Probability of failure rate (p)
M ean num ber of hops per lookup (E[H ])
2^15
2^16
2^6
2^7
2^8
2^9
2^10
2^11
2^12
2^13
2^14
Nodes
 
Figure 3.   Mean number of hops per lookup 
Let [
]
E hop  denote the mean overall lookup hops taken in 
the SN network, i.e. 
, where 
[
]
[
] 1
E hop
= E H
+
[
]
E H  is the 
mean lookup hops from the requesting SN to the target SN, 
and we add one hop for the target SN tracking back to the 
querying SN. 
[
]
E H is obtained according to the work [10] 
with Chord population 
/ (1
)
NSN
N
η
=
+
 in the upper layer.  
Apparently, 
[
]
E H  varies with N, node failure rate p and 
layer size ratio η . Since failure rate p relies on η  value, 
[
]
E H is the function of η when N is given. 
2) Modeling queuing delay at SN 
Standard queuing model is applied to evaluate the delay 
occurring at each SN. The service time for search process at 
SN is assumed to follow an exponential distribution with 
service rate μ . Previous research  [18] suggests that Poisson 
process is valid for modeling arrivals of user-initiated requests. 
Dang et al. [19] also provide evidence that VoIP call arrival 
forms Poisson process. We therefore assume that requests 
follow a Poisson process. Since requests from all the nodes are 
independent Poisson processes, the aggregate request arrival at 
an SN is also a Poisson process and the search at SN can be 
modeled as an M/M/1 queue. 
Let 
qf be the query arrival rate from each node, the 
aggregate requests arriving at each SN consist of those from 
its cluster 
(
1)
i
qf
λ
η
=
+
 and those forwarded traffic in the 
upper DHT network
eλ . The aggregate request arrival rate 
is
i
e
λ
λ
λ
=
+
. We assume that each SN shares the overall 
lookup workload in Chord evenly, since SNs are distributed 
uniformly and independently in the identifier space in light of 
the Chord algorithm. Thus,  
(1
/ (
1)) [
]
(1
)(1
) [
]
1
q
e
q
SN
Nf
N
E hop
f
E hop
N
N
η
η
λ
η
−
−
=
=
+
−
−
 
Where 
/ (
1)
N
η
−
 is the expected node availability within 
the local cluster, as the probability of the target node which 
the initiated node seeks for is uniformly distributed among all 
the participating nodes. Therefore, 1
 is the 
expected probability that the query has to be forwarded and 
circulated in the upper SN network. The expected sojourn time 
(queuing delay) at an SN is as follows 
/ (
1)
N
−η
−
1
1
[
]
(1
)(1 (1
/ (
1))( [
] 1))
w
q
E T
f
N
E
μ
λ
μ
η
η
=
=
−
−
+
+
−
−
+
H
E H
(1) 
with the constraint of 
. 
/
1
μ λ >
 Let
( )
(1
)(1 (1
/ (
1))( [
] 1))
f
N
η
η
η
=
+
+
−
−
+
, then we 
have
( )
/
q
f
f
η
< μ
. We examine the derivation of
( )
f η , i.e. 
1
2
( )
1 (1
)( [
])
[
](1
)(1
)
1
1
f
E hop
E hop
N
N
η
η
η
η
+
′
′
= +
−
+
+
−
−
−
. 
As illustrated in Figure 3, 
[
]
E H is increasing with respect 
to network scale. Furthermore, the increment of lookup hops 
with different failure rate (especially failure rate <0.5, which 
is easily achieved in SN upper network) is similar to that of 
failure free 
p = 0
. We assume that 
 
1
[
]
log
1
2
1
2ln 2(1
N
E hop
1
)
η
η
′
⎛
⎞
′
+
= −
⎜
⎟
+
+
⎝
⎠

, thus we have   
1
2
1
( )
1
(1
) [
]
(1
)
1
2ln 2
1
2
(1
) [
]
0
1
1
f
E hop
N
N
E hop
N
N
η
η
η
η
η
+
′
= +
−
−
−
1
−
−
+
>
−
+
>
−
−
 
That is, 
( )
f η
is monotonously increasing with respect 
toη . For 
max
η
<η
 , where 
ηmax
 is the upper bound of value 
η ,
1
[
]
( )
w
q
E T
f
f
μ
η
=
−
×
is thus monotonously increasing 
with respect to η  as well. We can have the same result as 
illustrated in Figure 4, where
, 
,
, 
N = 216
k = 0.7
1/ 60
qf =
μ = 15,20,25,30
 respectively, for instantiation.  
Normally, available SN service capacity μ and request 
arrival rate of each node 
qf  are given, thus we can find upper 
 
384
ICN 2011 : The Tenth International Conference on Networks
Copyright (c) IARIA, 2011              ISBN:978-1-61208-113-7

bound
ηmax
, according to 
( )
/
q
f
f
η
= μ
. Let 
max
η
<η
, then the 
constraint 
( )
/
q
f
f
η
< μ
 is satisfied. Herein,
ηmax
 is a critical 
parameter, as queuing delay increases sharply when
max
η
→η
. 
Numerical Results: Some numerical results of 
ηmax
 
calculation are presented as follows. Set failure parameter 
k=0.7, N= 2048, 8192 and 65536 respectively. We vary the 
value of 
/
qf
μ
to determine the corresponding upper bound 
ηmax
 and the results are illustrated in Figure 5. With the 
identical
/
qf
μ
, the larger the network scale, the least the 
ηmax
can be obtained, leading to the narrower interval for 
choosing η . As the P2P network is toward expanding 
dramatically over time suggested by the present P2P networks, 
the issue should be seriously taken into account when 
designing P2P network architecture or dynamically adjusting 
η  in runtime. In addition, the upper bound 
ηmax
 is increasing 
with respect to the value 
/
qf
μ
, which indicates that better 
SN capacity can enlarge the possible η  value interval if the 
request rate is fixed.  
0
10
20
30
40
50
60
70
80
90
100
0
0.05
0.1
0.15
0.2
0.25
Layer size ratio
Queuing delay at an SN (s)
15
20
25
30
Service rate of SN
 
Figure 4.  Queuing delay at SN vs. η  with varying μ  
100
200
300
400
500
600
700
800
900
1000
0
50
100
150
200
250
300
350
400
Ratio of SN service capacity to arrival rate
Upper bound of layer size ratio
2048 nodes
8192 nodes
65536 nodes
 
Figure 5.  
ηmax
vs. given 
 
/
qf
μ
3) Total lookup delay 
Assuming that the propagation between ON and SN within 
a cluster is negligible compared to the propagation between 
SNs, i.e. 
, as ON joins SN with locality-awareness, 
the total mean lookup delay can be expressed as follows: 
[
]
0
E TIntra
≈
[ ]
[
]
(1
)( [
]
( [
]
)( [
]
1))
1
1
w
w
w
E T
E T
E T
E T
D E H
N
N
η
η
=
+
−
+
+
−
−
Where
[
]
1
E Tw
N
η
−
 is for the query which is satisfied 
within the local cluster, thus total lookup delay is the queuing 
delay 
[
E Tw ]
 at the responsible SN with the hit rate
1
N
η
−
.  
Otherwise, the query will be forwarded by the SN and 
searched in the upper SN network. In addition to the queuing 
delay at the responsible SN, each hop in the upper DHT search 
network will take
[
E Tw ]
+ D
, where D is the latency between 
two arbitrary nodes in the P2P network. Altogether there are 
( [
] 1)
E H +
hops in average as aforementioned. We therefore 
have total lookup delay (
for 
those searching in the external of the cluster. 
[
]
( [
]
)( [
] 1))
w
w
E T
E T
D E H
+
+
+
Substitute [
E Tw ]
 to Equation (2) and rewrite it. We have 
1
(1
)( [
] 1)
1
[ ]
(1
)(1
(1
)( [
] 1))
1
(1
)( [
] 1)
1
q
q
p
E H
N
E T
f
E
N
D
E H
T
T
N
η
η
μ
η
η
+
−
+
−
=
H
−
+
+
−
+
−
+
−
+
=
+
−
  
(3) 
  We define two types of delays: total queuing delay at 
SNs 
and total search propagation delay
qT
p
T , which is 
incurred by the hopping time in the SN network. 
IV. SOLUTION TO OPTIMAL LAYER SIZE RATIO 
In this section, we present the optimization problem and 
solve the optimal layer size ratio according to the above 
analysis, demonstrated by numerical results in Matlab. 
Simulation is conducted to support the proposed model.   
A. Problem statement 
The problem of seeking for optimal layer size ratio for the 
hierarchical architecture is to find the optimal ratio of the 
number of ONs to the number of SNs, which could achieve 
the least total lookup time under the constraint of the 
available SN’s capacity. That is, it is an optimization problem 
stated as follows: 
max
min
[ ]
min
[ ]
. .
. .
. .
E T
E T
i e
s t
s t
η
η
λ
μ
⎧
⎧
⎨
⎨
<
<
⎩
⎩
  
 
 
(4) 
Herein, μ  is the average available service capacity of SN. 
From the Equation (3), 
[ ]
E T is dependent of
[
]
E H , μ , η , 
qf  and D. According to the previous analysis, 
[
]
E H  relies 
on layer size ratio η solely for a specific network with N 
nodes. Typically, parameters of μ , D and
qf  are given for a 
specific system, so
[ ]
E T  is the function of η . Intuitively, we 
can find the optimal value of η  at the minimum of
[ ]
E T . 
B. Solving optimal layer size ratio  
King[20] estimates RTT (Round Trip Time) between any 
two hosts in the Internet by estimating the RTT between their 
domain name servers. Since the edges in P2P network are not 
physical communication links, but instead only virtual links 
between the peers, the nodes could be geographically 
+
(2) 
 
385
ICN 2011 : The Tenth International Conference on Networks
Copyright (c) IARIA, 2011              ISBN:978-1-61208-113-7

dispersed. Therefore, the latency between two P2P nodes is 
just as the latency between any arbitrary hosts, and we have 
the mean delay between two SNs in P2P network 
0.078 second, by analyzing the current available data. 
D =
For specific network with given node capacity limitation, 
since parameters are predetermined by the system, we 
therefore have the optimal η value to achieve the minimum 
lookup delay under the constraint of SN capacity. We 
examine the mean overall lookup hops 
[ ]
E T  with the varying 
layer size ratioη , which is the unique impacting factor if 
network size N is determined. Take a network with 
 nodes 
for instance, and set typical parameter values as follows: 
. Figure 6 illustrates the 
trends of the mean overall lookup delay with the varying
16
2
0.7,
1/ 60,
0.078,
15
q
k
f
D
μ
=
=
=
=
η . 
Total search delay 
[ ]
E T  decreases when η  is low, while 
increases as η  goes higher. Onceη  is approaching
ηmax
,
[ ]
E T  
increases steeply as queuing delay at SNs is increasing 
dramatically.  
In addition, we can find that SN search propagation delay 
[
]
D
× E hop
 decreases with respect toη , and the curve of the 
value turns to be flatter as η  increases.  The reason lies in the 
fact that as η  increases, the number of SN 
/ (1
)
NSN
N
η
=
+
 
decreases. Fewer SNs are involved in search process in the 
upper SN layer, leading to fewer search hops and higher 
search efficiency. Besides, larger η  means fewer SNs, which 
results in better capacity and lower failure rate of SNs, further 
reducing lookup hops as illustrated in Figure 3. Therefore, 
[
]
E H  decreases with the increase of η , so does 
[
]
E hop .  
However, the total queuing delay is dominated in the share 
of total lookup delay when η  is large, especially in the case 
that available capacity is low compared with the arrival rate, 
the curve is more dependent on the queuing delay. While 
queuing delay is increasing with respect to η , and 
approaching infinite theoretically when 
max
η
→η
.  
0
20
40
60
80
100
120
0
1
2
3
4
5
6
7
8
Layer size ratio
Delay(s)
SN search propagation delay
Total lookup delay
SN queuing delay
 
Figure 6.  Delay varying with respect to η  
We can find that the curve of aggregate search delay is 
concave and there exists a minimum value of delay with 
correspondingη . In this case, for example, we observe that 
promising η  falls in the interval of [20, 50]. The optimal 
value is 
η = 30
and the least total search delay is only around 
1.15 seconds accordingly, even SN is with poor capacity in 
this example. 
It is noticeable that the curve is not smoothly decreasing as 
expected since a small increase can be seen when the number 
of SNs 
/ (1
)
N
+η
just exceeds a binary exponential value
. 
The underlying reason is as follows: once the number of SNs 
crosses the next power of 2, the round function makes the 
curve incontinuous and the mean overall lookup hops slightly 
increase at the point. 
2i
Finally, we examined a variety of instances of parameters 
such as network size N, arrival rate and capacity of SN. The 
results keep similar, except that 
ηmax
 is changing and leading 
to the varying scope and shift of the solution interval for the 
optimal η . 
C. Simulation validation 
In order to validate the established model, we modify and 
construct the two-layer P2P architecture using Chord as the 
top searching network based on P2PSim [21] simulation 
environment. In the P2P architecture, SNs are organized into 
Chord ring on the top layer, whereas the ONs directly connect 
to SNs with locality awareness. SN’s available service 
capacity is not distinctly specified. 
We tested the mean lookup delay in modified P2Psim 
environment with the maximum overall node population, i.e. 
N=2048 due to the limitation of the P2PSim. We set 
1/ 60,
10
qf
μ
=
=
. The simulation results of mean search 
delay mostly fall between SN search propagation delay and 
total search delay calculated by our model, as illustrated in 
Figure 7.  Since SN capacity is not limited, the queuing delay 
could be very low. It is shown that simulation result can 
support our modeling and validate the solution.  
0
20
40
60
80
100
0
0.2
0.4
0.6
0.8
1
1.2
1.4
Layer size ratio
Delay (s)
SN search propagation delay
Total search delay
SN queuing delay
Simulation result of search delay
 
Figure 7.  Simulation and modeling results of overall mean lookup hops vs. 
layer size ratio 
V. 
CONCLUSION AND FUTURE WORK 
Two-layer P2P organization with DHT (say Chord) at the 
top level is a promising hierarchy to improve performance of 
P2P network and satisfy numerous P2P applications, 
especially for VoIP deployment. This paper proposes the 
performance models by analyzing total lookup delay with 
queuing delay at SNs and propagation delay in upper DHT 
based searching network. Based on the models, an optimal 
 
386
ICN 2011 : The Tenth International Conference on Networks
Copyright (c) IARIA, 2011              ISBN:978-1-61208-113-7

layer size ratio can be achieved to minimize the overall 
lookup delay under the constraint of available SN service 
capacity by means of numerical results. Our simulation 
results support the proposed models and solutions. The 
crucial issues such as system maintenance and churn disposal 
will be studied as our future work. 
ACKNOWLEDGMENT 
The paper is partially supported by Zhejiang Natural 
Science Foundation under Grant Y1080935 and Y1101123. 
Ningbo 
Natural 
Science 
Foundation 
under 
Grant 
2010A610121 and 2010A610174 
REFERENCES 
[1]  
S. Baset and H. Schulzrinne, "An Analysis of the Skype Peer-to-Peer 
Internet Telephony Protocol", Proceedings of 25th IEEE International 
Conference on Computer Communications, INFOCOM 2006, 
Barcelona, Spain, pp. 1-11, 2006. 
[2] 
EK. Lua, J. Crowcroft, M. Pias, R. Sharma, and S. Lim, "A survey and 
comparison 
of 
peer-to-peer 
overlay 
network 
schemes," 
Communications Surveys & Tutorials, IEEE, vol. 7, no. 2, pp. 72-93, 
2005. 
[3]  
 "Gnutella," http://gnutella.wego.com/, 2003. [retrieved: November 3, 
2010] 
[4]  
S. Ratnasamy, P. Francis, M. Handley et al., "A scalable content-
addressable network," Proceedings of the 2001 Conference on 
Applications, 
Technologies, 
Architectures, 
and 
Protocols 
for 
Computer Communications (SIGCOMM'01), San Diego, California, 
USA, pp. 161-172, 2001. 
[5]  
I. Stoica, R. Morris, D. Liben-Nowell, D. Karger, M. Kaashoek, F. 
Dabek, and H. Balakrishnan, "Chord: a scalable peer-to-peer lookup 
service for Internet applications", ACM SIGCOMM 2001, 2001, pp. 
149-160. 
[6]  P. Maymounkov, and D. Mazieres, "Kademlia: A peer-to-peer 
information system based on the XOR metric", Proceedings of the 
First International Workshop on Peer-to-Peer Systems (IPTPS’02), pp. 
53-65, 2002. 
[7]  
B. Zhao, J. Kubiatowicz, and A. Joseph, "Tapestry: an infrastructure 
for fault-tolerant wide-area location and routing," University of 
California, Berkeley, Report No. UCB/CSD-01-1141, April 2001. 
[8]  S. Rhea, D. Geels, T. Roscoe, and J. Kubiatowicz, "Handling churn in 
a DHT", Proceedings of the 2004 USENIX Annual Technical 
Conference (USENIX'04), Boston, Massachusetts, USA, pp. 127-140, 
2004. 
[9]  
K. P. Gummadi, R. J. Dunn, S. Saroiu, and et al., "Measurement, 
Modeling, and Analysis of a Peer-to-Peer File-Sharing Workload", 
Proceedings of the 19th ACM Symposium on Operating Systems 
Principles (SOSP-19), Bolton Landing, NY, pp. 314-329, 2003. 
[10]  L. Garces-Erice, E. W. Biersack, K. W. Ross, P. A. Felber, and G. 
Urvoy-Keller, "Hierarchical P2P systems", Proceedings of ACM/IFIP 
International Conference on Parallel and Distributed Computing 
(Euro-Par), 2003, pp. 1230-1239. 
[11]  Y. J. Joung, and J. C. Wang, "Chord2: A two-layer Chord for reducing 
maintenance overhead via heterogeneity," Computer Networks, vol. 
51(2007), pp. 712-731, 2007. 
[12]  Y. M. Li, Y. Tan, and Y. P. Zhou, "Analysis of Scale Effects in Peer-
to-Peer Networks," Networking, IEEE/ACM Transactions on, vol. 16, 
no. 3, pp. 590-602, 2008. 
[13]  X. Li, Z. Zhuang, and Y. H. Liu, "Dynamic layer management in 
superpeer architectures," IEEE Transactions on Parallel and 
Distributed Systems, vol. 16, no. 11, pp. 1078-1091, 2005. 
[14]  S. Zoels, Z. Despotovic, and W. Kellerer, "Cost-Based Analysis of 
Hierarchical DHT Design", Sixth IEEE International Conference on 
Peer-to-Peer Computing, 2006 (P2P 2006), 2006, pp. 233-239. 
[15]  S. Zoels, Z. Despotovic, and W. Kellerer, "On hierarchical DHT 
systems–An analytical approach for optimal designs," Computer 
Communications, vol. 31, no. 3, pp. 576-590, 2008. 
[16]  S. Zoels, Q. Hofstatter, Z. Despotovic, and W. Kellerer, "Achieving 
and maintaining cost-optimal operation of a hierarchical DHT system", 
IEEE International Conference on Communications, 2009.ICC'09. 
IEEE, 2009, pp. 1-6. 
[17]   B. Y. Zhao, A. Joseph, J. Kubiatowicz, "Locality aware mechanisms 
for large-scale networks", In Proceedings of the FuDiCo’02, pp. 80-83, 
2002. 
[18]  V. Paxson, and S. Floyd, "Wide area traffic: the failure of Poisson 
modeling," IEEE/ACM Transactions on Networking (TON), vol. 3, 
No. 3, pp. 226-244, 1995. 
[19] T. D. Dang, B. Sonkoly, and S. Molnar, "Fractal Analysis and 
Modeling of VoIP Traffic," NETWORKS, pp. 13-16, 2004. 
[20]  K. P. Gummadi, S. Saroiu, and S. D. Gfibble, "King: Estimating 
Latency between Arbitrary Internet End Hosts", Proceeding of 
SIGCOMM Internet Measurement Workshop, Marseille, France, 2002 
[21]   "p2psim," http://pdos.csail.mit.edu/p2psim/. [retrieved: November 16, 
2010] 
 
 
387
ICN 2011 : The Tenth International Conference on Networks
Copyright (c) IARIA, 2011              ISBN:978-1-61208-113-7

