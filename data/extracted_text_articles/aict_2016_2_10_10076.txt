User Experience Evaluation Based on Arbitration QoS Parameters in Video Stream
Using NetFPGA in a Controlled Environment
Rafael S. Jaca´una
Federal University of Sergipe (UFS)
Sergipe - Brazil
e-mail: rjacauna@gmail.com
Edward David Moreno
Universidade Federal de Sergipe (UFS)
Sergipe - Brasil
e-mail: edwdavid@gmail.com
Ricardo Jos´e P. de B. Salgueiro
Universidade Federal de Sergipe (UFS)
Sergipe - Brasil
e-mail: ricardo.salgueiro@gmail.com
Abstract—A streaming video has some features that are different
from others, such as the occupation of a large amount of
bandwidth, and the possible scenes variation with a consequent
increase or decrease in the amount of transmitted bytes. Appli-
cations for the video streaming transmission (YouTube, Vimeo,
Netﬂix, Telecine Play, etc) have aroused the interest of the
scientiﬁc community regarding to the networks behavior. The
purpose of this paper is to measure, through a video stream, the
user experience, also known as Quality of Experience (QoE) based
on the arbitration of QoS parameters in a controlled environment
using NetFPGA.
Keywords–QoS; QoE; DiffServ; Correlation Models; NetFPGA.
I.
INTRODUCTION
This paper presents some initial results that validate the
environment tests in a simple scenario, with only one cus-
tomer receiving the streaming video server. Its purpose is
to measure the user experience in a controlled environment
through Differentiated Services techniques (DiffServ) to adjust
the routing of packets between client and server, following
the appropriate adjustments according to the QoS parameters
(Jitter, packet loss, latency and bandwidth) and their applica-
tion (codec, latency, resolution). In our work, we have inserted
one NetFPGA hardware among routers to compose a cloud of
higher performance without QoS treatment.
From researches based on Alreshodi et al. [1] and Arousi
et al. [2] works on QoS/QoE correlation models, it was
possible to realize that these authors did not address papers
related to wireless networks; Gahbiche et al. [3] investigated
external/environmental factors that could affect the user ex-
perience without considering the QoS requirements of the
network layer; Bingjin et al. [4] and Kyeong et al. [5] have
developed/implemented methods for evaluating QoS, using
simulators like the Object-Oriented Modular Network Simula-
tor (OMNET) [6]. They used those simulators to shape the
effect of trafﬁc from Internet Services Providers (ISP). On
the other side, Valente [7] proposed a prototype for QoS/QoE
provisioning of wireless networks, using NS2 for its evidences.
The objective of this paper is to demonstrate the user
experience in a real world scenario with router vendors that
have contributed to the adoption of open Standards, as the
Cisco example on the RFC 2475 and 2597 recommendations,
which determine the behavior of the packet to each passage
among routers on the Internet.
It is important to mention that the paper has been divided
into six Sections: the ﬁrst one is related to the introduction;
the second one is dedicated to QoS and QoE concepts. The
NetFPGA board characteristics are described in Section 3.
Section 4 presents the scenario used in the experiment, and
some preliminary results have been presented in Section 5.
The last one, Section 6, suggests some ways to cover and to
assess the proposed problem.
II.
QUALITY OF SERVICE AND QUALITY OF EXPERIENCE
Works on the user experience analyze the seven layers of
the Open Systems Interconnection (OSI) reference model. In
this paper only two layers will be considered: the network and
the application ones. According to Siller and Woods [8], we
can see a pseudo-layer over both, and inside it the authors
designed the user experience. These academics have deﬁned
QoS as ”the experience perceived by the user being presented
by the Application Layer, which acts as a front-end user
presenting overall results of the individual Quality of Service”.
Hohlfeld et al. [9] deal with the speciﬁcs of the differences
between QoS and QoE, i.e., the ﬁrst one is centered on the
network, while the second one, centered on the user. The
QoE depends on a multidimensional perceptual space that
includes: factors of inﬂuencing system (such as QoS measures,
transport protocols, or speciﬁc parameters of devices); the
inﬂuence of human characteristics (such as humor, personality
traits or expectations) and the context characteristics (location,
activities or costs) [9].
Quality of Experience is based on the Mean Opinion
Scores(MOS) Methodology. However, in Seshadrinathan et
al. [10] work, the research focuses on the difference of the
Difference MOS (DMOS). This technique was based on the
Video Quality Assessment (VQA) that considers the objective
aspects and the subjective human perceptions [10].
A. Quality of Service
The network layer allows the transfer of packets between
origin and destination, which might go through several hops
routers in order to get to the destination. In terms of services of
this layer, TCP/IP model seeks to deliver the same packets with
the ”least effort”. There are two ways of implementing services
on this layer: the oriented and the connectionless ones. Despite
of the Internet adopting connectionless services, Tanenbaum
[11] makes a highlight in four aspects that must be resolved
regarding the QoS:
1)
What network applications are required;
2)
How to regulate trafﬁc entering the network;
3)
How to reserve resources in routers to ensure perfor-
mance, and;
20
Copyright (c) IARIA, 2016.     ISBN:  978-1-61208-473-2
AICT 2016 : The Twelfth Advanced International Conference on Telecommunications

4)
If the network can accept more trafﬁc safely. No
isolated technique deals, effectively, with all these as-
pects. In practice, there are two versions of QoS that
are widely used in many Internet routers: Integrated
Services and Differentiated Services.
1) Integrated Services: It is a service designed for unicast
and multicast applications that are able to deliver multimedia
ﬂows through the Resource Reservation Protocol (RSVP) [11].
This, in turn, it operates as following: each group of stations is
assigned and addressed. For each transmitter that sends data,
these places address to the group in their own packets; then a
routing algorithm, through a multicast, builds a spanning tree
covering all members (this algorithm is not part of RSVP).
The Integrated Services have the key requirements admission
control and the resource reservation. In essence, real-time
services require some sort of service guarantee, but it is
important to be careful on the use of this term. It would be
more appropriate to use ”enough” or even ”acceptable” [12].
2) Differentiated Services: This service is based on the
”class” concept, where there is no need for resource reservation
to ”ensure” the packet delivery, hence there will be no channel
exclusivity after the connectionless establishment. It can be
offered in a cloud of routers belonging to the same domain.
Classes are deﬁned as ”Per-Hop Behaviors” (PHB) [11], each
hop is a router, and each packet that is to arrive at a hop, after
being sent back to the network, will not have any guarantee of
delivery to the destination. This is a function of the Transport
layer.
B. Quality of Experience
Siller and Woods [8] have deﬁned QoE as ”the experience
perceived by the user that is being presented by the Application
layer, which acts as a front-end of the user who has the overall
result of quality individual services”.
The QoE can be measured in all layers of the OSI model,
as it was presented in the Introduction part. The most common
action is to control the parameters of the network layer
(bandwidth, delay, loss and change) to prevent the user to
receive a stream with any low quantity during the playback.
As it will be presented in the next Section, subjectivity in the
user perception is a factor in his/her experience, like how to
evaluate his/her level of satisfaction during the involvement in
a particular site, or his/her enjoyment in a game, in real time
[13].
C. Correlation between QoS and QoE models
There are two methodological approaches to evaluate the
correlation between QoS and QoE models. They are the
objective and the subjective assessments [1]. These techniques,
whenever are observed separately, do not evaluate properly
the user experience. The models evaluated by Alreshoodi and
Woods were:
•
IQX hypothesis (exponential interdependence of qual-
ity): based on a generic formula in which the pa-
rameters of QoS and QoE are connected through an
exponential relationship [14].
•
VQM (Video Quality Metric)-based Mapping Model:
function n dimensional QoS (in which ”n” is the
number of different QoS parameters) [15].
•
QoE Model using Statistical Analysis method: it is
a technique employed that correlates QoS parameters
and estimates QoE perceptions, and identiﬁes the
degree of inﬂuence of each of the QoS parameters
on user perception [2].
•
QoE Models based on Machine Learning methods: It
is a new approach for the construction and adaptive
QoE prediction models using classiﬁcation algorithms
in machine learning, with trained data for subjective
tests [16].
•
QoE model using Crowdsourcing for subjective tests:
it is based on Microworkers platform, it allows driving
surveys on-line tests as YouTube [17].
•
QoE model using a Resource Arbitration System: it
is based on the integration between the Network and
Application layers (NQoS and AQoS) [8].
•
QoE model considering equipment and environment
factors: it is a technique that can be used when the
source signal interference in the environment wireless
(such as frame error rate, and delay variation) can
occur. Different QoS parameters can be applied to the
user equipment. Then, parameters such as noise, jitters
and ambient light forming the interference environ-
ment in which QoE different parameters are used [4].
•
QoE model based on Quantitative and Qualitative
Assessment: this model is a combination of both of
these approaches. The Set Gross Theory (RST) has
been used here for the Quantitative Evaluation, while
CCA framework (catalogue, categorize and analyze)
has been used for the Qualitative one [1].
For ﬁnishing this section, we would like to highlight that
it is necessary that the methodology for evaluating the user
experience includes the QoS requirements. This work has
studied the relationship between QoS and QoE inﬂuencing this
experience, since all the authors that studied this subject have
been treating these issues, most of them, by focusing between
network layer and the application one. Issues on physical layer
also have directly inﬂuenced the outcome after a broadcast, like
the Cyclic Redundancy Check (CRC) errors during a Voice
Communication over IP (VoIP).
Those who worked in the telephony industry during the
migration to VoIP, were able to observe what the biggest
problems were during this transition. There were constant
complaints from the users related to interference during phone
calls. The main reason was the CRC errors, and the main cause
was related to the cabling, which was totally obsolete.
III.
FEATURES OF THE NETFPGA
The NetFPGA board, designed to assist researchers in re-
search projects for computer networks, is ﬂexible and operates
at the rated speed of the Ethernet interfaces.
NetFPGA is the concept of Field Programmable Gate Array
(FPGA) dedicated to computer networks. The NetFPGA has
been increasing since its inception in 2001, being available
in 03 plate versions: NetFPGA, 1G-CML, NetFPGA 10G and
NetFPGA SUME. The NetFPGA 1G version was discontinued.
The NetFPGA 1G-CML model will be soon presented.
21
Copyright (c) IARIA, 2016.     ISBN:  978-1-61208-473-2
AICT 2016 : The Twelfth Advanced International Conference on Telecommunications

A. NetFPGA CML model
This model was designed to operate under a PCIe 4X
second generation interface. This model has four (04) Gigabit
Ethernet ports, incorporating the Kintex-7 325TFPGA, Xil-
inx. This platform had been designed to support NetFPGA
architecture, developed by Stanford University, with reference
models available through GitHub NetFPGA community. It is
totally compatible with the Xilinx Vivado software and ISE
Suite Design, as well as embedded software projects of Xilinx
SDK. The board has the following characteristics:
•
A FPGA (physical chip);
•
Four network ports Gigabit Ethernet;
•
Quad Data Rate Static Random Access Memory
(QDRII+ SRAM) - 36MBit (4.5MBytes);
•
Double-Date Rate Random Access Memory (DDR3
DRAM), capable of 512MBytes;
•
PCI Express Gen. 2;
•
SD card storage and memory ﬂash BPI (Byte Periph-
eral Interface)
•
Expansion Interface (FMC and PMOD connectors);
•
Additional features such as PIC micro-controller and
USB, RTC, chip with Crypto authentication;
•
PCIe standard Form Factor;
•
Flexible, open source.
The purpose of using this hardware is to make it available
to implement routing algorithms both at software (through
Microbloze processor), and hardware levels, using the FPGA
resources.
B. FPGA Conﬁguration
All system programming logic is stored in SRAM Memory,
and for the fact that it is a type of volatile memory, the device
is setup each time it is powered up. The data conﬁguration
is known as bit-stream, whose formats are used as ”bit”
or ”mcs”. It can be conﬁgured via BPI ﬂash, USB drive
off-board or via PC. Another very important feature is the
Hardware Description Language (HDL), that allows to create
an Intellectual Property (IP), in which the most populars are
VHDL and Verilog, or use the creation of others. Among
the possible uses for the NetFPGA card, we can mention
an IP for Image and Video Processing Manipulation (Image
Characterization).
IV.
PROPOSED SCENARIO
In order to simulate the closest testing environment of
an Internet user, the following scenario has been created as
depicted in Figure 1.
Figure 1. Proposed scenario.
In Fig. 1, the ”VLC Server” represents a streaming server
executing the VLC software; the ”Devices WiFi” represents
the devices on the LAN; R1 and R2 are the border routers
that will make the QoS requirements. The Cloud NetFPGA
represents the various Internet routers, allowing the passage
of simulated trafﬁc generated by one of the following tools:
iPerf, Harpoon or RUDE/CRUDE.
A. Real Scenario
The routers used in our test environment are the Cisco 1841
model. The streaming server is an HP Pavillion desktop, with
Intel i3 CPU and 4GB RAM. The physical connection between
VLC server and R1 is Fast-Ethernet (100Mpbs), as well as
the connection between routers and the NetFPGA cloud. The
wiﬁ devices are smartphones, notebooks and desktops with
interface, and infrastructure as a router DLINK DIR-610
802.11n model, and that device it is connected to the router
R2 via Fast-Ethernet. In order to capture frames, we will use
Wireshark version 1.10.6 for the analysis of packets, forensic
tool CapAnalysis 1.2.1 for the captured packets from the
NetFPGA board interfaces, and for the Cisco routers counters
analysis, we use the ManageEngine NetFlow Analyzer Tool.
The PRTG tool has been evaluated here, although it has shown
some inconsistencies regarding the counter reading on routers.
B. Expected Experiments
Through this research, it has been aimed to measure the
quality of the user experience, such as, for most part of them,
the mobile device, as well as smartphones and laptops. The use
of a residential router reﬂects, in general, the infrastructure in
the user’s homes. Tanenbaum has mentioned that with 1Mbps,
it is possible to watch a video from the Internet, using data
compression, with reasonable quality [11]. If somebody wants
to watch movies in High Deﬁnition (HD) quality with at
the same rate, it probably will not be a pleasant experience
since high-deﬁnition movies occupy an average of 2.5Mbps
bandwidth. This situation is critical in some countries, like
Brazil, where the average bandwidth contracted is 1Mbps [18].
V.
PRELIMINARY ANALYSIS
This preliminary analysis consisted on watching two differ-
ent movies, in order to realize their characteristics and aspects.
The ﬁrst ﬁlm, ” Insurgent”, was played with a resolution of
1,920 x 800 dip per inch (dpi), frame rate equal to 23.97
frame per second (fps) and codec H.264. During playback,
the image was freezing for several seconds, but the audio
quality was good at all times. The second one, ”The Silver
Dollar”, was presented at a resolution of 632 X 352 dpi,
MPEG4 codec, frame rate equal to 25 fps and the movie
was reproduced satisfactorily. In the ﬁrst case, the codec
has the characteristic of consuming a lot of processing, both
for the image compression and decompression, but it uses
low bandwidth (something around 2,5 Mbps). However, the
MPEG-4 codec, from ”The Silver Dollar” movie, did not
present frame loss. Fig. 2 depicts the bandwidth consumed in
this same movie (lower curve), and the amount of bandwidth
consumed in transmitting the ”Insurgent” movie. It is important
to highlight that in both cases, we had a 100Mbps bandwidth,
and we had used 2.5Mbps, but the user experience in the ﬁrst
movie was not satisfactory.
22
Copyright (c) IARIA, 2016.     ISBN:  978-1-61208-473-2
AICT 2016 : The Twelfth Advanced International Conference on Telecommunications

Figure 2. Use the channel during the transmission of movies.
In both cases, by unchecking the ”activate transcoding”
option at the VLC server, all processing happens to be executed
on the client. When the resolution of the movie is performed in
FULL HD mode, the CPU consumption increases considerably
enough to stop its reproduction for several seconds. If this
option has been checked, the processing reduces and the
movie playback becomes acceptable, but it will depend on
the processor speed and the amount of memory on the user
device.
VI.
CONCLUSION
In this paper we have shown that the problem associated to
QoE is strongly dependent on multidimensional spaces, such
as QoS measures, transport protocols and speciﬁc parameters
of used devices, besides the inﬂuence of human and contextual
factors. In spite of these dependences, many of the studies and
researches have forgotten this correlation. For this reason, in
our proposal we have suggested a real scenario for measuring
the user experience in an environment controlled by Differ-
entiated Services techniques to adjust the routing of packets
between clients and servers, with appropriate adjustments to
the QoS parameters (jitter, packet loss, latency and bandwidth)
and application (codec, latency, resolution). We have used
a NetFPGA hardware which is inserted among routers to
represent a high performance cloud.
This experiment showed that it was necessary to make
adjustments in the Internet layer and Application. Despite the
low consumption of the channel, the ﬁlm presented in FULL
HD had frames loss during playback. A probable cause was
the high consumption in the CPU processing on the client to
decompress the bit-stream generated by the H.264 protocol.
Another possible factor was the adjustment of the latency for
video playback on the user device. If the player has been
conﬁgured with low latency, frame loss increased considerably;
if set to maximum latency, losses frames were reduced by the
same proportion.
For future works we would like to suggest a deeper study
and research about the real contribution and usage of NetFPGA
in this experiment, to measure the quality of communication
and different real scenarios using different QoE and QoS
models.
ACKNOWLEDGMENT
It is important to thank CNPq, CAPES, FAPITEC, UFS
and IFS for their ﬁnancial support and help.
REFERENCES
[1]
M. Alreshoodi and J. Woods, “Survey on QoE\QoS Correlation Models
for Multimedia Services,” International Journal of Distributed and
Parallel systems, 2013.
[2]
S. Aroussi and A. Mellouk, “Survey on machine learning-based QoE-
QoS correlation models,” 2014 International Conference on Computing,
Management and Telecommunications, ComManTel 2014, 2014, pp.
200–204.
[3]
H. Gahbiche Msakni and H. Youssef, “Is QoE estimation based on QoS
parameters sufﬁcient for video quality assessment?” 2013 9th Interna-
tional Wireless Communications and Mobile Computing Conference,
IWCMC 2013, 2013, pp. 538–544.
[4]
B. Han, X. Zhang, Y. Qi, Y. Gao, and D. Yang, “QoE model based
optimization for streaming media service considering equipment and
environment factors,” Wireless Personal Communications, vol. 66, 2012,
pp. 595–612.
[5]
H. long Kim, B. K. Kim, H. H. Choi, and S. G. Choi, “Implementation
of QoS control system with QoE parameters on multimedia services,”
Advanced Communication Technology (ICACT), 2010 The 12th Inter-
national Conference on, vol. 2, 2010, pp. 1035–1040.
[6]
K. S. Kim, “The effect of ISP trafﬁc shaping on user-perceived
performance
in
broadband
shared
access
networks,”
Computer
Networks, vol. 70, 2014, pp. 192–209. [Online]. Available: http:
//dx.doi.org/10.1016/j.comnet.2014.06.001
[7]
W. M. Valente, “Arcabouc¸o para Aprovisionamento de QoS e QoE
em Redes Sem Fio Heterogˆeneas WiMAX / Wi-Fi com Garantia de
Equidade entre Vaz˜oes Arcabouc¸o para Aprovisionamento de QoS e
QoE em Redes Sem Fio Heterogˆeneas WiMAX / Wi-Fi com Garantia
de Equidade entre Vaz˜oes,” Dissertac¸˜ao, UFPA, 2011.
[8]
M. Siller and J. Woods, “Improving quality of experience for
multimedia services by QoS arbitration on a QoE framework,” pp.
1–7, 2003. [Online]. Available: http://citeseerx.ist.psu.edu/viewdoc/
download?doi=10.1.1.194.7031{\&}rep=rep1{\&}type=pdf
[9]
O. Hohlfeld, E. Pujol, F. Ciucu, A. Feldmann, and P. Barford, “A
QoE Perspective on Sizing Network Buffers,” Proceedings of the 2014
Conference on Internet Measurement Conference - IMC ’14, 2014,
pp. 333–346. [Online]. Available: http://dl.acm.org/citation.cfm?doid=
2663716.2663730
[10]
K. Seshadrinathan, R. Soundararajan, A. C. Bovik, and L. K. Cormack,
“Study of subjective and objective quality assessment of video.” IEEE
transactions on image processing : a publication of the IEEE Signal
Processing Society, vol. 19, no. 6, Jun. 2010, pp. 1427–41.
[11]
J. W. Tanenbaum, Andrew S; David, Redes de Computadores, 5th ed.,
P. P. Hall, Ed.
S˜ao Paulo: Pearson Education do Brasil, 2011.
[12]
X. P. R. Brad, ISI, D. Clark, MIT, S. Shenker, “Integrated Services in
the Internet Architecture: an Overview Status of this Memo,” p. 28,
1994. [Online]. Available: https://www.rfc-editor.org/rfc/rfc1633.pdf
[13]
P. Brooks and B. r. Hestnes, “User measures of quality of experience:
Why being objective and quantitative is important,” IEEE Network,
vol. 24, no. April, 2010, pp. 8–13.
[14]
P. Fiedler, M., Hossfeld, T., Tran-Gia, “A generic quantitative relation-
ship between quality of experience and quality of service,” Network,
IEEE, vol. 24, no. April, 2010, pp. 36–41.
[15]
M. Pinson and S. Wolf, “A new standardized method for objectively
measuring video quality,” Broadcasting, IEEE Transactions on, vol. 50,
no. 3, Sept 2004, pp. 312–322.
[16]
M. Katsarakis, V. Theodosiadis, and M. Papadopouli, “On the Evalu-
ation of a User-centric QoE-based Recommendation Tool for Wireless
Access,” Department of Computer Science, University of Crete, and
Institute of Computer Science, Foundation for Research and Technology
- Hellas, Tech. Rep., 2014.
[17]
T. Hoßfeld, M. Seufert, M. Hirth, T. Zinner, P. Tran-Gia, and R. Schatz,
“Quantiﬁcation of YouTube QoE via crowdsourcing,” Proceedings -
2011 IEEE InternationalSymposium on Multimedia, ISM 2011, 2011,
pp. 494–499.
[18]
CETIC.BR, “Velocidade M´axima para Download Contratualmente
Fornecida Pelo Provedor de Internet nos ´Ultimos 12 Meses,” 2014.
23
Copyright (c) IARIA, 2016.     ISBN:  978-1-61208-473-2
AICT 2016 : The Twelfth Advanced International Conference on Telecommunications

