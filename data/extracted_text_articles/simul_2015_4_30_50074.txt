Resource Management and Optimization Efﬁciency
Issues in a Simulation Software Package
Havatzelet Cohen1, Daniel Khankin1, Shlomo Mark1, Shaul Mordechai2
1 Shamoon College of Engineering, Beer Sheva 84100, Israel. {havatzelet, daniehe, marks}@sce.ac.il
2 Ben-Gurion University, Beer Sheva 84105, Israel. shaulm@bgu.ac.il
Abstract—This work is a component of a larger project that
attempts to map the primary factors impacting the software
development process of simulation software. In this paper, we
describe resource management and optimization efﬁciency reper-
cussions stemming from the perfective maintenance approach
as identiﬁed in the development of auxiliary functionality in an
advanced Monte Carlo simulation tool that examines the addition
of a diamond head attachment to a ﬁber optic in order to increase
the efﬁciency of the ﬁber. We found that adding a diamond head
did increase the efﬁciency of the ﬁber optic, but that modiﬁca-
tions necessary to implement the additional functionality in the
software required drastically greater computational resources.
Index Terms—Optimization Efﬁciency; Perfective Maintenance;
Monte Carlo Simulation.
I. INTRODUCTION
The
perfective
maintenance
of
a
software
product
constitutes the modiﬁcation of the software to improve the
effectiveness of the product by adding functionality, as well
as improved performance and maintainability. In this paper,
we describe the adjust approach for perfective maintenance
as
expressed
in
Three-Dimensional
Fiber
Optic
Probe
Spectroscopy simulation software (FOPS3D). This software
is a complementary scientiﬁc software tool that simulates the
effects on the absorbance level of the evanescent ﬁeld of an
optical ﬁber with a tapered thickness. In FOPS3D, we use
the Monte Carlo approach by ﬁring rays chosen randomly
according to a speciﬁed distribution into an optical ﬁber. The
number of collisions encountered within the unclad section
are counted and averaged over the (large) number of rays
ﬁred into the ﬁber (histories) in order to yield the average
relative absorbance.
In previous work [1][2], the ﬁrst requirement of the
investigation was the development of software that can
simulate
the
effect
of
tapered
ﬁber
thickness
on
ray
absorbance.
The
Fiber
Evanescent
Wave
Spectroscopy
(FEWS) software tool was designed with reference to this
requirement. Progress in the research [3][4] required an
examination of the effect of ﬁber bending on the absorbance
level
and
thereby
led
to
new
demands
for
additional
functionality permitting user manipulation of the spatial
presentation of the tapered ﬁber. This added capability was
a necessary component of research performed for improving
the efﬁciency of the ﬁber. For this objective, the developer
required a change from a combinatorial geometry to a
computer graphics approach. A supplementary enhancement
required by the developer, to examine the effects of the
attachment of a diamond head to the optical ﬁber, led us to
develop a new version of FOPS3D software that incorporated
Diamond Head functionality
in other words, a perfective
maintenance to the FOPS3D software.
Simulation software development takes place within the
domain of scientiﬁc software development. At the beginning
of the article, we examined the main features of FOPS3D and
how it generally relates to scientiﬁc simulation software. In
this paper, we aim to isolate a particular concern, which is the
transformation of a geometrical problem into a graphical one
as presented through the model of an optical ﬁber. Geometry
has two primary display options, one of which is combinatory
geometry (CG) with predeﬁned structures that we can use to
describe a system.
Using
CG
as
the
geometric
approach,
poses
many
challenges, one of which is describing complex geometric
systems. The most direct way to describe such a system is to
use a graphical module to represent the system graphically
and to scrutinize the results, as we did with the optical ﬁber.
While, in terms of development, this is a more straightforward
approach, it is more vulnerable to the intrinsic limitations
in
software
and
hardware.
Therefore,
the
development
of
scientiﬁc
software
within
the
strictures
of
software
engineering must take into account many factors, such as
efﬁcient use of computing power, software maintainability,
Graphics Processing Unit (GPU) rendering capabilities, etc.
In Subsections A of Section II, we provide a detailed
physical description of, and exact speciﬁcations for, the
system being simulated. In Subsections II-B we cover the
mathematical constants that were employed for the work.
Subsection II-C covers the Monte Carlo approach to the
simulation process. In Section III, we discuss the development
of the perfective maintenance of the simulation. Finally, in
Section IV, we discuss the lessons learned from the process
and the course of future development.
II. PHYSICAL BACKGROUND
Previous work [5][6] found that there is a signiﬁcant dif-
ference in the molecular structure of benign lesions spectra
as compared with the spectra of malignant cancerous regions.
For diagnostic purposes, this discovery led to the application
of ﬁber evanescent wave spectroscopy (FEWS) based on the
84
Copyright (c) IARIA, 2015.     ISBN:  978-1-61208-442-8
SIMUL 2015 : The Seventh International Conference on Advances in System Simulation

phenomenon of attenuated total reﬂection (Figure 1) ) and to a
development of a software simulation tool in order to simulate
effects on the absorbance of the evanescent ﬁeld of an optical
ﬁber.
Figure. 1. Ray propagates when n1 < n2 and angle > criticalangle
A. Fiber System Description
The simulation system includes ﬂexible optic ﬁbers, a ray
source emitter, and a diamond head in order to improve
efﬁciency. The main properties of the ﬁbers are ﬁber length,
unclad section length, ﬁber radius, unclad part radius, and
reﬂection coefﬁcients. The simulated Infrared (IR) source
emits rays into the ﬁber. The middle section, which is the
region of interest, has its jacket and cladding removed. As
shown in Fig. 2, the taper is conical, narrowing down to a
thinner cylindrical midsection, with the index of refraction of
the core n1, the liquid index of refraction n2, and ncl of the
cladding.
Figure. 2. Tapered midsection
The simulation system allows for user deﬁned properties
such as the radius of the simulated ﬁber, the radius of the
unclad part of the ﬁber, its bending angle, and whether to
add a diamond head. Next, the simulated IR source emits
rays according to a radial distribution. This is simulated with
Monte Carlo techniques. The light beam is propagated through
the ﬁber and hits the ﬁber medium. The simulation history is
deﬁned by the hits of the IR beam in the unclad part that
successfully travel through the ﬁber up to the light sensor.
The unbiased mean value of hits is used for calculating the
Fresnel transmission coefﬁcient. In the simulation tool, the
use of the diamond, increases the number of beam hits in the
unclad part by reﬂecting a signiﬁcant part of the beam back
to the unclad section of the ﬁber. All of these manipulations
can be performed in the simulation, as well as the capability
to adjust the radius of the unclad part relative to the rest of the
ﬁbers radius. The speciﬁcations of the ﬁber with the diamond
head were taken from an existing ﬁber with a diamond head
(Figure 3).As constants in the simulation, we employed a
diamond head that is 1 cm long and a ﬁber with a length
of 10 cm.
Figure. 3. a) Fiber without Diamond Head. (b) Fiber with Diamond Head.
B. Radiation Source and Absorbance Analysis
In order to describe and sample each incoming ray, we need
the radial distance, r, and angle θ, relative to the z axis, when
r is a Gaussian distribution for a beam waist as given by [7]:
I(r) = Ioe−8r2/r2
o
(1)
where rθ is the radius of the laser aperture and I0 is the
irradiance at the center of the aperture. In order for evanescent
to propagate the incident angle must be less than the critical
angle of the cladded section, the light will be totally reﬂected
without attenuation. The angular distribution given by [8] is:
p(θ) ∝
 sinθ/cos2θ,
θ < θcl
0,
θcl
(2)
According to the BeerLambert law, the transmitted power
P(z) along a ﬁber is given by [9]:
P(z) = P0e−γz
(3)
where P0 is the power at the input face of the ﬁber, and γ is
the effective evanescent absorption coefﬁcient (which varies
for different orientations of the ray) which obey:
γ(θ) =
αγn2cosθcotθ
2πr2
1cos2θc
p
(sin2θ − sin2θc)
(4)
where θc is the critical angle of the unclad section θc =
sin−1p
n1/n2 and α is the absorption coefﬁcient of the
cladding material at the given wavelength λ given by[10]:
α = Ae−γv/v0
(5)
where v is the optical wave number (1/λ) and A, γ and v0
are constants given in data tables [11]. For a simple tube of
constant radius, γ(θ) can be computed by integration of (4)
over the power distribution of (2). This is very difﬁcult and
also inapplicable for a tapered section, where the incidence
angles change at each collision with the interfacing surface
especially when we use non-point source emitted rays.
C. Monte Carlo Approach
In the Monte Carlo simulation, rays are ﬁred into the ﬁber
according to the radial and angular distributions as per (1)
and (2), respectively. Three Cartesian coordinates indicate the
ray location and two angles deﬁne the direction of the ray
movement. In order to deﬁne the new location, we deﬁne three
variables:
85
Copyright (c) IARIA, 2015.     ISBN:  978-1-61208-442-8
SIMUL 2015 : The Seventh International Conference on Advances in System Simulation

1) Location, deﬁned by the vector ⃗r
2) Direction of Movement
⃗u = (sinθcosφ, sinθsinφ, cosθ)
where the angles θ, φ are deﬁned relative to the Z axis.
3) Distance to the Geometric Boundary ds.
At the geometric boundary, we obtain changes in the
direction of the beam and if the ray hits the ﬁber within
the unclad section, the ensuing collisions are counted. The
simulation process is based on the realization of the beam
movement in a three-dimensional virtual ﬁber. We employ the
Monte Carlo approach to FEWS by ﬁring rays according to a
given distribution into an optical ﬁber with an unclad section.
In the simulation software tool, we modeled the absorbance at
each point of reﬂection, and the net absorption - if θ is above
the critical angle of the unclad section, the ray is discarded;
otherwise, the number of collisions encountered within the
unclad section are counted and multiplied by γ/α to provide
the absorbance ”weight.” This ﬁgure is averaged (by histories)
over a large number of rays ﬁred into the ﬁber to yield the
average relative absorbance.
III. THE PERFECTIVE MAINTENANCE RESULTS
The ﬁrst software simulation tool was the FEWS application
(Figure 4). The FEWS application was built in order to
simulate effects on the absorbance of the evanescent ﬁeld of an
optical ﬁber with tapered thickness. The conﬁguration consists
of an IR source that plots rays into a tapered ﬁber that has
had its cladding removed in its middle (tapered) part to allow
contact with the sample.
Figure. 4. The ﬁrst software simulation tool
In order to improve the absorbance of the ray, one of the
very ﬁrst suggestions was to tapper the ﬁber by ﬂattening
the middle section so that the ﬁber would have a thinner and
ﬂattened midsection (Figure 2). Rachelin [1], who investigated
experimentally the hypothesis that changes to a ﬁber optic,
such as the narrowing of its midsection, will increase the
absorbance value due to an increased number of reﬂections,
found a correlation between the absorbance and the thickness
of the ﬂattened part.
The ﬁrst simulation tool (FEWS) was built as a prototype
in order to reproduce these results by calculating the effect
of the tapered thickness of an optical ﬁber on the absorbance
of the evanescent ﬁeld of an infrared signal using a Monte
Carlo approach. The prototype was found as a suitable [2]
tool for analyzing FEWS when the results were in agreement
with previous experimental and analytical calculations, that
the absorbance increases as the narrowed thickness decreases
(Figure 5).
Figure. 5. Average Relative Absorbance for Fiber with Narrowed Midsection
[2]
As a result, we were required to improve and to extend the
capabilities of the tool for ﬁber with geometries that are more
complex as well as to spectroscopy involving more complex
physical phenomena.
Progress in the research required continuing development of
the software simulation tool. Development demanded changes
that focused mainly on the ability to examine the effect of
bending the ﬁber on the absorbance level. This new require-
ment led to the construction of new software that can cope
better with future changes to development requirements. Due
to the relatively simple geometry that was being investigated
(i.e., a cylindrical ﬁber with a trapped area), in the early
version of the FEWS software, we were able to utilize the
well-known geometric description method of CG fundamentals
(e.g., bodies and regions).
The new requirements mandated allowing the user to change
the spatial presentation of the tapered ﬁber in order to improve
the efﬁciency of the ﬁber. These demands obligated the devel-
oper to substitute the geometrical description approach with
more efﬁcient approach and we choose to use the computer
graphics approach. Utilizing the graphical approach, the user
determines the geometrical dimensions of the ﬁber and can
also deform the spatial presentation of the ﬁber. In order to
meet these graphical demands, the FOPS3D [4] software tool
was built. FOPS3D is a full three-dimensional tool utilizing a
computer graphics approach that can simulate any geometrical
manipulation of the ﬁber. The simulation tool was developed
in Java language, utilizing the object oriented and event driven
concepts of the language. The graphics were programmed
using OpenGL. The FOPS3D simulation software product was
approved only after passing all testing phases, including a
black box testing phase process of validation and veriﬁcations
against Rachelins [1] results and the FEWS software results
[2].
86
Copyright (c) IARIA, 2015.     ISBN:  978-1-61208-442-8
SIMUL 2015 : The Seventh International Conference on Advances in System Simulation

One of the conclusions that was reached during a FOPS3D
study of a cylindrical ﬁber with a bended trapped area (Fig-
ure 6) was that the transition from a CG approach to a
computerized geometric method resulted in a drastic, but still
reasonable, delay in obtaining the results.
Figure. 6. FOPS3D a full three-dimensional tool [4]
As previously described, further research was required in
order to improve the efﬁciency of the optical ﬁber. Progress
in the research led to a focus on improving efﬁciency without
the need for bending the ﬁber. One possibility was the addition
of a diamond head to the ﬁber tip, based on the theory that a
diamond head would increase the absorbance value due to the
diamond characteristic of total internal reﬂection. That is, the
diamond would reﬂect the ray back into the ﬁber to allow for
greater ﬁber efﬁciency(Figure 7).
Figure. 7. (a) The real ﬁber used to build the simulated diamond head (b)
Ray reﬂected from the diamond head back to the ﬁber
The requirement for the use of a diamond head led us to add
a new functionality to the FOPS3D, functionality that allowed
us to add a diamond head to the ﬁber. In other words, the new
functionality was a perfective maintenance to the FOPS3D
software(Figure 8).
Figure. 8. The new version of FOPS3D with the diamond head
The new version of FOPS3D (containing the diamond head
functionality), was utilized in the simulation of an un-tapered
ﬁber in order to compare absorbance levels with and without a
diamond head. We found that absorbance levels increased by a
factor of 2.24 when the diamond head was utilized. In addition,
in the case of a tapered ﬁber with a 0.3 radius, absorbance
levels improved by a factor of 1.52, when the diamond head
was utilized.
IV. CONCLUSION AND FUTURE WORK
The transition from combinatorial geometry to a computer
graphics approach allowed us greater freedom and convenience
in depicting the 3D geometric structure of the optical ﬁber.
In developing the ﬁrst version of FOPS3D, we found that it
required a tremendous number of calculations which caused
a very signiﬁcant, but reasonable, delay in obtaining results.
This fact did not prevent us from continuing the development
of the software. Moreover, in order to reduce the CPU work-
load and increase performance, we decided to preform these
calculations on a GPU.
However, we found that with the addition of the diamond
head functionality in the new version of POFS3D, computing
efﬁciency (measured as the average time to calculate one
history) was 2.4 times slower, and above all, required much
greater computational resources, such as the extension of
RAM memory, the use of a dedicated GPU, and, ultimately,
required utilizing computers with multiple processors working
in parallel.
In our evaluation of the perfective maintenance process,
we found that the required added functionality was success-
fully implemented. However, from a software engineering
standpoint, our criteria were not met, especially because
the perfective required considerably greater resources. This
determination raised a question about the long-term feasibility
of the entire process. In conclusion, extending the functionality
of a scientiﬁc software product necessarily requires dedi-
cated efforts to achieve the efﬁcient use and management of
computational resources (computing power, memory, GPU,
processors, etc.), as well as efforts to mitigate the complexity
of the algorithmic process. That is, particularly for long-term
maintenance, the development process must take into account
the corresponding need for improvements to the softwares
capacity to contend with the increased complexity of the
algorithmic process.
Scientiﬁc software product developers must confront a par-
ticular challenge at the initial stage of the perfective mainte-
nance process in that, at the outset of the process, there is
a circumscribed capacity to prognosticate the full scope, re-
quirements, and efforts (including the necessary computational
resources and algorithmic complexity) that will be mandated.
Often, until the actual computation is preformed, it is not clear
what the most appropriate conﬁguration will be and what will
be needed in terms of computing resources, as expressed in this
study. Our work is at present continuing in order to improve
the simulation process and to optimize the perfective process.
87
Copyright (c) IARIA, 2015.     ISBN:  978-1-61208-442-8
SIMUL 2015 : The Seventh International Conference on Advances in System Simulation

One direction we have taken in our efforts is the modiﬁcation
of the simulation algorithms into distributed versions, such
as would allow us to better utilize the resources of emerging
cloud technologies.
REFERENCES
[1] Y. Raichlin, L. Fel, and A. Katzir, “Evanescent-wave infrared spec-
troscopy with ﬂattened ﬁbers as sensing elements,” Optics letters,
vol. 28, no. 23, pp. 2297–2299, 2003.
[2] M. Mann, S. Mark, Y. Raichlin, A. Katzir, and S. Mordechai, “Op-
timization of ﬁber-optic evanescent wave spectroscopy: a monte carlo
approach,” Applied spectroscopy, vol. 63, no. 9, pp. 1057–1061, 2009.
[3] D. Khankin, S. Mordechai, and S. Mark, Monte Carlo Simulation
Tool of Evanescent Waves Spectroscopy Fiber-Optic Probe for Medical
Applications (FOPS 3D).
INTECH Open Access Publisher, 2011.
[4] D. Khankin, S. Mordechai, and S. Mark, “Optimization efﬁciency of
monte carlo simulation tool for evanescent wave spectroscopy ﬁber-optic
probe,” Advances in Optical Technologies, vol. 2012, 2012.
[5] D. C. Malins, N. L. Polissar, and S. J. Gunselman, “Tumor progression
to the metastatic state involves structural modiﬁcations in dna markedly
different from those associated with primary tumor formation,” Proceed-
ings of the National Academy of Sciences, vol. 93, no. 24, pp. 14 047–
14 052, 1996.
[6] Z. Hammody, S. Argov, R. Sahu, E. Cagnano, R. Moreh, and
S. Mordechai, “Distinction of malignant melanoma and epidermis using
ir micro-spectroscopy and statistical methods,” Analyst, vol. 133, no. 3,
pp. 372–378, 2008.
[7] E. Hecht, “Optics (international edition),” 2002.
[8] A. Snider and J. Love, “Optical waveguide theory,” Carman and Hall,
New York, 1983.
[9] V. Ruddy, B. MacCraith, and J. Murphy, “Evanescent wave absorption
spectroscopy using multimode ﬁbers,” Journal of Applied Physics,
vol. 67, no. 10, pp. 6070–6074, 1990.
[10] T. Deutsch, “Absorption coefﬁcient of infrared laser window materials,”
Journal of Physics and Chemistry of Solids, vol. 34, no. 12, pp. 2091–
2104, 1973.
[11] R. W. Waynant and M. N. Ediger, Electro-optics handbook.
Citeseer,
2000.
88
Copyright (c) IARIA, 2015.     ISBN:  978-1-61208-442-8
SIMUL 2015 : The Seventh International Conference on Advances in System Simulation

