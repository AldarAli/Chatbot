A Novel Approach to Indoor Location Systems
Using Propagation Models in WSNs
Gomes Gonçalo
Instituto Superior Técnico
Inesc-ID
Lisbon, Portugal
Email: gon.ls.gm@gmail.com
Sarmento Helena
Instituto Superior Técnico
Inesc-ID
Lisbon, Portugal
Email: helena.sarmento@inesc-id.pt
Abstract— This paper describes a location system for persons
and objects in an indoor environment, where wireless nodes can
include sensors and provide unique identiﬁers. The system nodes,
using ZigBee technology, can function as RFID tags, having
each one a unique EPC identiﬁcation number. Sensors can be
associated with the wireless nodes Zigbee to create applications
for home, health and trafﬁc control.
Existemt location systems are analyzed, with emphasis on
indoor location systems.The implemented location algorithm
includes a propagation model based on the wall attenuation factor
together with triangulation.
A variety of tests were carried out in an indoor environment.
Results demonstrate that the location system is viable, showing
itself to be effective, ﬂexible and easily adaptable to various
locations.
Keywords - Location, Propagation, Triangulation, WAF, ZigBee,
Wireless.
I. INTRODUCTION
History shows that progress and technological development
are inevitable, actually becoming a need in the globalise world
of nowadays. Telecommunications are currently essential in
world economy operations of any modern society, being,
wireless network systems one of the greatest developments
in the area of communications. An example of such a net-
work, is a WSN (Wireless Sensor network), where spatially
distributed autonomous devices, equipped with sensors, are
used in environment monitoring, trafﬁc control, healthcare,
home automation, etc. RFID (Radio Frequency Identiﬁcation)
is also a wireless technology. The development of RFID,
besides the advantages in several areas, has also been a starting
point to technological evolution in location systems. There
has been a rising interest in location techniques that has
been motivating allot of research in this area. In location
systems there are two types of scenarios: outdoor location
and indoor location. Each one of these scenarios presents
itself with different characteristics and challenges, being that
indoor location systems are the hardest to implement given its
complexity and all the factors that have to be considered. RFID
and WSN can be used together. Furthermore, generations of
RFID tags include sensors, and WSNs that require automatic
identiﬁcation mechanisms [1].
Lately, there has been a growing interest in the integration
of RFID and WSN (Wireless Sensor Network) systems. These
technologies can originate the development of a variety of
applications, particularly in terms of location, in residential
environments, corporate environments and critical infrastruc-
tures worldwide [1]. ZigBee is a wireless technology that is
well suited for WSN. Besides, it can be used to build active
RFID tags. The use of RFID technology with ZigBee protocol
provides the study of effective, low energy consumption, and
ﬁnancially accessible location systems. In this paper we will
explore the use of Zigbee in order to build an indoor location
system. Based in this system that locates objects in indoor
environments, objects can be identiﬁed and sensing variables
can be measured.
It’s precisely the fusion of RFID with WSN that is the
starting point of this work. The goal is make use of the RFID
capabilities in automatic identiﬁcation of people and objects,
based on a ZigBee network, to develop an indoor location
system. In order to develop a location system it’s necessary to
study the existing location methods and algorithms, especially
those that focus in indoor location. It’s important to maximize
the advantages offered by the use of RFID and ZigBee
together. Knowing that the goal is to achieve a system that
is both easily adaptable to various location environments and
ﬂexible, it’s necessary to give more attention to the location
methods that use electromagnetic waves propagation models.
A starting point to the development of an indoor location
system is the deﬁnition of the location method. In this paper,
we propose a location system that uses triangulation together
with a propagation model. The main obstacles in using trian-
gulation are: the selection of three network devices and the
estimation of the distance between ﬁxed and mobile devices.
The goal in the selection of the three network devices is to have
them as closest as possible to the mobile device improving
the accuracy of the system. In order to estimate the distance
between ﬁxed and mobile devices, RSSI (Received Signal
Strength Indicator) measures are made so that the distance
can be estimated through the use of a propagation model. The
use of RSSI leads to a certain degree of inaccuracy due to
multipath effect, mainly caused by the indoor environment of
a building as well as the distance between a transmitter and a
receiver.
The paper is organized as follows. After this introduction,
251
International Journal on Advances in Networks and Services, vol 2 no 4, year 2009, http://www.iariajournals.org/networks_and_services/

section 2 presents the state of the art concerning location
systems, emphasizing indoor location. The indoor propagation
models are described in section 3. Section 4 presents the
developed system. In section 5, the system characterization
is presented, being the results discussed in section 6. Section
7 presents some conclusions.
II. LOCATION SYSTEMS
The success of the GPS system for monitoring and locating
objects in outdoor environments, encouraged the application of
similar techniques to indoor environments. Unfortunately these
techniques are not a valid option for indoor location [2]. These
difﬁculties motivate much research to develop new techniques.
With the enormous growth and widespread use of short range
wireless technologies, such as Bluetooth for wireless personal
area networks (WPAN), WIFI (802.11) for wireless local area
networks (WLAN) and ZigBee for wireless sensor networks
(WSN), many academic and commercial systems are based
measurement of the radio signal propagation.
In [3] present a widely accepted taxonomy to classify
location techniques adopted by existent location systems. This
taxonomy divides the techniques in three different groups:
triangulation, proximity and scenario analysis.
A. Taxonomy
1) Triangulation: Triangulation is a technique of determin-
ing the location of a object, based on geometric properties of
triangles and mathematical formulation. Two different tech-
niques of triangulation exist: lateration and angulation. Later-
ation uses distances and angulation uses angles to determine
the position of an object in a coordinate system (ﬁgure 1).
Fig. 1.
Lateration
Lateration determines the position of an object by measur-
ing its distance from multiple reference positions. In a bi-
dimensional coordinate system distances to 3 non-collinear
need to be measured (ﬁgure 1). Lateration systems measure
distances with different techniques: direct measurement, using
a physical action; time-of-arrival, measuring the time it takes
a signal to travel between the object and the reference point at
a known velocity; or attenuation, measuring the attenuation in
the propagation of a radio signal between the object and the
reference point. As the strength of radio signals is inversely
proportional to the square of the distance from the source,
distance is calculated based on send and receive strength.
Angulation uses angles to determine the position of an
object. In a 2- dimensional Cartesian coordinate system, two
angles and the distance between the reference points are used
(ﬁgure 2).
Fig. 2.
Lateration
2) Proximity: Proximity based localization techniques ob-
tain the position of an object by identifying a known reference
near the object. Detection of proximity is usually achieved
by: detecting physical contact with the object, using sensors;
monitoring wireless cellular access points, identifying when
an object is in the range of an access point; or by observing
automatic identiﬁcation systems. If an object is identiﬁed by
an automatic system, its location can be inferred.
3) Scene Analysis: Scene analysis techniques are based
on the observation of the environment where the objects
are to be located. The characteristics of the environment are
observed and then compared to the characteristics of a previous
observation, in order to determine the location of the objects.
Static scene analysis typically consists of ﬁrst phase where
a pre-characterization of the environment is carried out. Ob-
tained data are stored in a database. Observed characteristics
are compared to the stored data to derive the location. Differ-
ential scene analysis tracks the difference between successive
scenes to estimate location.
4) Location Fingerprinting: Location ﬁngerprinting is a
static scene analysis technique that uses radio frequency
measurements to characterize the environment. Multiple radio
nodes are distributed in the entire location area, usually
according to a rectangular grid of points.
During the pre-characterization phase, generally called off-
line phase, measurement of the received signal strength (RSS),
from multiple ﬁxed nodes, is performed. The collection of
RSS values at a point on the grid is called the location
ﬁngerprint of that point. Location ﬁngerprints are stored in
a database. As RSS values ﬂuctuate along the time, several
values are measured and statistical processing is applied to
build a reliable database. During the second phase, the on-
line phase, the object to be located (mobile node) collects the
RSS values collected from multiple ﬁxed points. An algorithm
estimates the location of the object and reports the estimated
position information. The most common algorithm to estimate
the location computes the Euclidean distance between the
measured RSS values and the location ﬁngerprints. Other
252
International Journal on Advances in Networks and Services, vol 2 no 4, year 2009, http://www.iariajournals.org/networks_and_services/

deterministic, such as nearest neighbor or neural networks and
probabilistic algorithms based on statistical learning theory
and Bayesian interference are also used.
III. INDOOR PROPAGATION MODELS
In radio frequency indoor location system, time and angle
of arrival methods are not used because signals are affected
by the multipath effect. Triangulation is implemented based on
the attenuation methods, using models to relate the received
power with distance.
Indoor electromagnetic waves propagation, especially inside
a building, is characterised by reﬂections, diffractions and
dispersion in the internal structures. The transmitted signals
arrive to the receiver through multiple paths, originating ﬂuc-
tuations in the received signal. This effect, called multipath
propagation, is affected by the type of materials used in the
construction of the building and by the surrounding objects.
Therefore, it is very difﬁcult to predict the strength of the
received signal.
There are models that take into accounty the constructive
and destructive nature of multipath to relate the received power
with the distance between transmitter and receiver. Rayleigh
Fading Model [4] and Rician Distribution Model [5] are widely
used, but they present some drawbacks. The Rayleigh Fading
Model describes the small-scale rapid amplitude ﬂuctuations
in the absence of a strong received component. It assumes that
all signals reaching the receivers have equal strength, which
is not a realistic approach. A dominant line-of-sight (LoS)
component is not accounted for by this distribution. The Rician
Distribuition Model takes in account that a strong path exists
in addition to the low level scattered path. This model is very
appealing, but it is very difﬁcult to determine its parameters,
as this requires to physically isolate the direct wave from the
scattered components [2].
A. Wall Attenuation Factor Model (WAF)
The WAF model [2] is quite attractive, given its ability to
describe the slow fading phenomenon and the attenuation in
the signal propagation introduced in indoor environments. It
derives from the ﬂoor attenuation model (FAF) [6], where
an attenuation factor is used to estimate the signal intensity
in different ﬂoors of a building. In the WAF model the
attenuation factor permits to predict the behaviour of the signal
propagation, when walls are the main obstacle [2]. Equation
1 indicates how the attenuation inﬂuences the received signal
strength.
P(d)[dBm] = P(d0)[dBm] − 10n log
 d
d0

−
 nW ∗ WAF
, nW < C
C ∗ WAF
, nW ≥ C
(1)
In equation 1, n indicates the rate at which the attenuation
of the signal increases with the propagation distance, P(d0) is
the received signal strength at a distance of reference d0 and d
is the distance between the transmitter and the receiver. In the
attenuation factor, the C parameter accounts for the number of
walls for which the attenuation factor (WAF) stops inﬂuencing
the signal; nW is the number of obstructions (walls) between
the transmitter and the receiver; and WAF is the value for the
attenuation of each wall.
B. The Adjusted Motley-Keenan Model
The adjusted Motley-Keenan model [7] was developed
based on the Motley-Keenan model [8]. This last model,
represented by equation 2, is similar to the WAF model, but
does not limit the number of walls inﬂuencing the signla
attenuation. In equation 2, PLd is the the attenuation at 1
meter of distance between transmitter and receiver, n the
attenuation decay rate with distance, N the number of walls
between transmitter and receiver, and ki the number of type i
walls, having attenuation of Lwi.
PL(d)[dB] = PLd[dB] + 10n log(d) +
N
X
i=1
kiLwi
(2)
The adjusted Motley-Keenan model also considers the thick-
ness of the walls. In equation 3, L0 is the attenuation of
a reference wall with thickness e0, and ei is the thickness
of a wall of type i placed between the transmitter and the
receiver. The adjusted term substitutes, i in equation 2, the
term
N
X
i=1
kiLwi in order to account for the thickness of the
walls originating equation 4.
AdjustedTerm =
N
X
i=1
kiL02log3

Fig. 3.
Network Topology
The IEEE 802.15.4 standard deﬁnes three types of network
topologies: star topology, peer-to-peer topology and mesh
network [14]. Figure 3 shows the three topologies.
The star topologies require at least one FFD (Full Function
Device) device functioning as network (WPAN - Wireless
Personal Area Network) coordinator. The communication is
established between devices and the network coordinator.
The WPAN coordinator is normally powered by the electric
network and the remaining devices (FFD or RFD (Reduced
Function Devices)) by batteries.
In peer-to-peer topologies there also exists a WPAN coordi-
nator, being that in this topology all devices can communicate
with each other. The conﬁguration can be found in control
and industrial monitoring applications using WSNs. A mesh
network is no more than a particular case of the peer-to-peer
topology, where most of the devices are FFDs.
Given this, and because ZigBee distinguishes the concept
of physical devices (FFD, RFD) using the notion of logical
devices, we propose a network that consists of a mobile device
that acts as a ZigBee Coordinator and several ﬁxed devices
acting as ZigBee End Devices. The ZigBee Coordinator is
the ﬁrst type of logical device, assuming a role much similar
to a coordinator in the IEEE 802.15.4 coordinator and is
responsible for: initiation, maintaining and manage a network.
In the ZigBee hierarchy, next in line is the ZigBee End Device
that is the ﬁnal point in the network structure [15]. The
proposed network topology is very similar to the peer-to-peer
topology in the IEEE 802.15.4, where the goal is to have all
the devices capable of communicate with each other.
We propose a system that is composed of a central server
that executes the location algorithm as well as initiates the
network. The central server can be located in the mobile
device, allowing the device to locate himself, or any other
location in the network being that because we are using ZigBee
technology all the devices can communicate with each other.
B. Propagation Model
We use a propagation model based on the WAF propagation
model [2], making the WAF parameter equal to zero (equation
5). The walls are not always an obstacle between the mobile
and the ﬁxed devices. Therefore, we adopt equation 5 instead
of equation 1, but with different n and P(d0) than those used
in equation 1.
Figure 1 presents an example where obstructions can exist
in a certain direction but not in other directions, in the
circumference. Therefore, only at the distances and in the
directions where there is a presence of a wall the WAF factor
is accounted for. Through this method it’s possible to obtain
a wide range of different WAF values for the same distances.
During the ﬁrst phase, where RSS values are collected to
determine n and P(d0) in equation 3, the RSS values that
are affected by the presence of a wall are identiﬁed (through
visual inspection of the location environment).
To those RSS values the value of the WAF factor (previously
determined for respective distances and directions) will be
subtracted in order to minimize the inﬂuence of the walls
on the characterization of the RF signal in the location
environment. This way the WAF factor is taken into account
and it is reﬂected on the determined n and P(d0) parameters,
instead of being a constant (equation 1) used at determined
distances in all directions [17].
P(d)[dBm] = P(d0)[dBm] − 10n log
 d
d0

(5)
Fig. 4.
Line of Sight
C. Location Algorithm
The goal for this location algorithm is to allow the location
of the mobile device within certain areas of the indoor envi-
ronment. The proposed algorithm is not intended for a precise
location of the mobile device but to distinguish where in a
certain division of a room the device is located.
Knowing that, the developed location algorithm is divided
in two steps. Firstly, a propagation model is used to calculate
the distances between the ﬁxed devices and the mobile device,
based on the received signal strength indicator (RSSI). This
phase involves the deﬁnition of the propagation models param-
eters. These parameters are deﬁned based on a previous char-
acterization of the of RF signals in the location environment
in terms, by collecting the RSS values. This characterization is
much like the off-line phase used in scenario analysis methods
[3]. Next, knowing the distances between the ﬁxed and mobile
devices and using a triangulation algorithm (see section D), it
is possible to determine the location of the mobile device.
D. Triangulation Algorithm
To use the system, it is necessary to deﬁne the coordinate
system and the position of the ﬁxed nodes (base stations).
We adopt a 2D system, assuming that all nodes are at the
same height. Knowing the positions of at least three ﬁxed
254
International Journal on Advances in Networks and Services, vol 2 no 4, year 2009, http://www.iariajournals.org/networks_and_services/

devices and their distances to the mobile device it is possible
to calculate the coordinates (x,y) where the mobile device is
located.
In order to estimate the three ﬁxed devices that are closer to
the mobile device, the centroid of a polygonal area as well as
RSSI are used. The vertices of the polygon are ﬁxed devices
which received a beacon message from the mobile device. A
preference index (FDI - Fixed Device Index) is then created
so that "best" ﬁxed devices that received the beacon messages
can be chosen [16]. The FDI of FDi (Fixed Device) is deﬁned
by the following equation:
FDIi = (1 − α)

1 −
 distc
i
distmax

+ α RSSIRi
RSSImax
(6)
where disti
c are the Euclidian distances between the centroid
of a polygon and FDi and α is a small number (0 ≤ α ≤ 1).
The values for distmax and RSSImax are deﬁned as:
distmax = max∀i{distc
i}
(7)
and
RSSImax = max∀i{RSSIRi}
(8)
where FDi is an FD which received a beacon message from
the mobile device. Given FDIs, the triangulation algorithm
selects the three FDs with the highest FDI values for triangu-
lation.
We implemented the Dynamic Triangular Algorithm (DTN)
[10]. It is well suited for small environments it is allow
complexity algorithm a requires a reduced processing time.
The DTN algorithm needs at least three sensor nodes to
estimate the location of mobile device. The method discards
the worst RSSI values measured by the devices and uses the
best three to estimate location. It chooses the ﬁxed device
which receives the greatest RSSI value and assumes that
the mobile devices location is in the mapping circle of that
ﬁxed device. The mapping circle is the estimation distance d1
between the mobile device and the closest ﬁxed device. The
DTN ﬁnds the angle θ on the mapping circle by using a cost
function to pick one that best matches the observed distance.
The DTN has the following steps:
1) Generation of the mapping circle: It ﬁnds the possible
locations of the mobile device (x1+d1cosθ, y1+ d1sinθ) on the
mapping circle by using the possible distances d2θ and d3θ
between mobile user and the ﬁxed nodes.
2) The distance of the mobile device estimation: Finds the
error between estimation distances (d2 and d3) and possible
distances (d2θ and d3θ).
3) The coordinates of the mobile device approximation:
Determines the cost functions at each angle θ and the θ
increases 1 degree each time. The DTN then searches the
minimum cost function, and the θ of the minimum cost
function is the estimation angle on the mapping circle. The
angle θ on the mapping circle is the estimation location of the
mobile device. Figure 5 describes the procedure of the DTN
location algorithm.
Fig. 5.
Dynamic Triangular Algorithm Procedure
E. Prototype Implementation
The ﬁnal system will include ﬁxed nodes and mobile nodes.
Fixed devices will be placed in pre-deﬁned positions. They
will be implemented as embedded systems. Mobile nodes can
be implemented has embedded systems or objects and persons
equipped with ZigBee tags. Mobile devices are the target for
location and identiﬁcation. Nodes will have a unique EPC
(Electronic Product Code) identiﬁcation number [9].
Five ZigBee nodes compose the developed prototype with
four ﬁxed nodes and one mobile node. For prototyping pur-
poses, we used a notebook connected to a ZigBee interface
through a RS-232 interface.
Fixed nodes and the ZigBee interface of the mobile node
are PCB boards supporting commercially available ZigBee
255
International Journal on Advances in Networks and Services, vol 2 no 4, year 2009, http://www.iariajournals.org/networks_and_services/

Fig. 6.
Dynamic Triangular Algorithm
devices. The developed PCB board also include batteries, a
RS232 interface and a USB interface. Programming of ZigBee
devices and EPC code assignment is done through RS232.
The USB port is used to power the mobile device through a
notebook. Fixed nodes are RFD (Reduced Function Device)
programmed as ZigBee End Devices. They work indepen-
dently and are powered by batteries. The mobile device is a
FFD (Full Function Device), being programmed as a ZigBee
Coordinator. When starting, the mobile device transmits a
signal in order to allow the ﬁxed nodes, to detect it. The
mobile device is responsible to transmit the received radio
signal strength indicator (RSSI) to the software application
that executes the location algorithm in order to determine the
mobile location.
The software application also initialises the wireless net-
work, establishing the communication between ZigBee de-
vices. Due to hardware limitations we connected the mobile
device directly to a notebook, powering the device through
the USB port and using the RS-232 port to communicate. A
future and more advanced system would be controlled by a
server that would execute all the tasks, being the notebook no
longer needed.
V. SYSTEM CHARACTERIZATION
The prototype was installed and tested in a residential
environment. The location area is shown on Figures 7 and
8. Table I shows the coordinates for each ﬁxed device. EB1
is located at the origin of the referential.
Fixed Devices
Coordinates (x,y) in meters
Device 1
(0;0)
Device 2
(4,8;5,8)
Device 3
(0;5)
Device 4
(3,7;0)
TABLE I
FIXED DEVICES COORDINATES
As can be seen on Figure 7, we decided to use a small
area. This approach minimizes the location error. In fact, the
indoor range of ZigBee devices is limited and when distances
increase location errors also increase. Although, it is possible
Fig. 7.
Location Environment
Fig. 8.
Set of small location environments
to locate objects in a much larger area, using several small
areas, as presented on Figure 8. Using similar small areas
with small obstruction also makes easier to characterize the
environment. However, the number of ﬁxed devices need to
be increased. (The number of devices shown in Figure 8 only
has the purpose of illustrating the general idea behind the use
of small areas!)
In order to evaluate the capabilities and reliability of the lo-
cation system we analyse the prototype in different situations:
without the WAF factor, introducing the WAF factor and and
using an average value for the WAF factor.
The characterization of RF signals is essential to the location
system, only doing this it is possible to predict the signal
behaviour during propagation and determine the propagation
model parameters (n and P(d0)). This characterization is
made through the collection of RSS values in a previous
256
International Journal on Advances in Networks and Services, vol 2 no 4, year 2009, http://www.iariajournals.org/networks_and_services/

location stage (off-line).
To determine the propagation model parameters, we fol-
lowed the scenario analysis described in [11]. Measuring the
strength of the received signal (RSS) at the ﬁxed devices,
transmitted by the mobile device, we repeated this process
moving the mobile device across the location area. RSS values
were obtained in three ﬁxed devices and, for each one, in
three different directions (as presented on Figure 9). The use
of three devices instead of all four is enough to determine the
propagation model parameters.
Propagation model parameters were calculated for each
device individually and for all devices together. Therefore,
there is a speciﬁc equation for each device and an equation
that can be used for all devices.
Fig. 9.
Direction of collected RSS values
A. Parameter of attenuation WAF
In order to calculate the WAF value, RSS values were
measured, for the same distance, with and without a wall be-
tween the ﬁxed and mobile nodes. The WAF is the difference
between the two RSS values. Table II presents WAF values ,
for each device and all devices together, obtained for different
distances.
Distance (meters)
Device 1
Device 2
Device 3
2,5
-
4,25 dB
-
3
4,42 dB
11,5 dB
13,67 dB
3,5
17,42 dB
-
6,5 dB
4
-
18,08 dB
8,83 dB
TABLE II
WAF PARAMETERS
Table III shows the average value of WAF for each ﬁxed
device and for the set of values of all devices together.
B. Characterization of RF signals without WAF
RSS values were collected in each ﬁxed node and in all three
different directions. This RSS values permitted, by logarithmic
Fixed Devices
Average WAF
Device 1
10,92 dB
Device 2
11,28 dB
Device 3
9,67 dB
All Devices
10,58 dB
TABLE III
AVERAGE WAF PARAMETERS
regression, to calculate the attenuation ratio and the received
signal strength at the distance of 1 meter. Figure 10 illustrates
the use of logarithm regression and table IV presents the values
obtained for the ﬁxed devices.
Fig. 10.
Collected values for device 3
Without WAF
Attenuation Factor (n)
RSS at 1m (P(d0))
Device 1
2,382
-45,50 dBm
Device 2
3,637
-40,32 dBm
Device 3
2,806
-48,08 dBm
All Devices
3,027
-44,50 dBm
TABLE IV
CALCULATED PARAMETERS WITHOUT WAF
With the calculated values in the tested situation it was
possible to plot the characteristic of the RF signal in terms of
the distance using the theoretical model (propagation model)
and compare it with the experimental collected RSS values.
The following graphics (Figures 11 and 12) compare the
theoretical model with the average of the collected RSS values
at different distances.
Fig. 11.
Average Collected Values VS. Theoretical Model
C. Characterization of RF signals with WAF
This characterization is very similar to the ﬁrst one and
uses the same collected RSS values, but with the difference
257
International Journal on Advances in Networks and Services, vol 2 no 4, year 2009, http://www.iariajournals.org/networks_and_services/

Fig. 12.
Average Collected Values VS. Theoretical Model
that WAF values are now taken into account (Table I). Table
V shows the calculated values of the propagation model
parameters through logarithmic regression and Figures 13 and
14 show the graphics that compare the theoretical model with
the average of the collected RSS values at different distances.
With WAF
Attenuation Factor (n)
RSS at 1m (P(d0))
Device 1
2,012
-45,77 dBm
Device 2
2,803
-41,12 dBm
Device 3
2,391
-48,07 dBm
All Devices
2,255
-45,21 dBm
TABLE V
CALCULATED PARAMETERS WITH WAF
Fig. 13.
Average Collected Values VS. Theoretical Model
Fig. 14.
Average Collected Values VS. Theoretical Model
D. Characterization of RF signals with average WAF factor
This characterization is very similar to the ﬁrst two and uses
the same collected RSS values, but with the difference that
the average WAF values are now taken into account (Table
II) . The results were not very different then those fo the
characterization of RF signals with WAF factor.
VI. RESULTS
After the characterizations the location algorithm was tested.
In order to do that the mobile device was placed on two
different and random positions. The algorithm was tested
without the introduction of WAF, with WAF and with the
average value of WAF. The tests were also made for each
ﬁxed device separately and for the set of values of all devices
together, in this case all ﬁxed devices were characterised by
the same propagation model equation. The tests revealed errors
from 2,5 to 0,25 meters when using the developed propagation
model Tables VI and VII).
Point A
Wout/
W/
All Wout/
All W/
(1,8;4) m
WAF
WAF
WAF
WAF
Mob. Node
(3,14;7,25)
(2,29;6,52)
(6,54;6,50)
(3;-3,63)
Coord.
Coord.
(1,34;3,25)
(0,50;2,52)
(4,74;2,50)
(1,20;-0,37)
Error
Dist.
3,51
2,57
5,36
1,26
Error
TABLE VI
LOCATION RESULTS FOR POINT A
Point B
Wout/
W/ Avg.
All Wout/
All W/
(0,7;4) m
WAF
WAF
WAF
Avg. WAF
Mob. Node
(0,54;5,65)
(0,27;4,25)
(0,72;5,86)
(0,83;4,23)
Coord.
Coord.
(-0,16;1,65)
(-0,43;0,25)
(0,02;1,86)
(0,13;0,22)
Error
Dist.
1,66
0,50
1,86
0,26
Error
TABLE VII
LOCATION RESULTS FOR POINT B
Analysing Figures 11, 13 and 16 we can observe that,
for certain locations, the introduction of the WAF parameter
increased the error. However, in general, the theoretical model
(equation 5) is a good approximation of the collected RSS
values. The graphics relative to the deviations of the collected
RSS values and theoretical model (Figures 16 and 18) conﬁrm
the previous statement. A decrease in RSS values (which
translates into a decrease in error), can be observed on Figure
15 when WAF parameter is introduced. This decreased is also
noticed when using the average WAF parameter.
Its also veriﬁed in the standard deviation of the collected
values that at the same distance the fact that the RSS values are
not always the same, inﬂuences the parameters of the model
introducing an additional error. Its also veriﬁed that when the
set of values of all devices together is used to calculate the
model parameters it does not produce very different results of
those presented when each ﬁxed device has his own equation.
In general comparing the developed system with other
systems, that mainly use location ﬁngerprint techniques, it is
258
International Journal on Advances in Networks and Services, vol 2 no 4, year 2009, http://www.iariajournals.org/networks_and_services/

possible to assume that the developed system produces results
similar to other systems. Table VIII shows the typical error
of other location systems. Although the location environment
in which the systems were tested was larger than the one
used in this paper, the fact that location ﬁngerprint techniques
usually produce more accurate results reinforces the good
results achieved by the developed location system.
Location Systems
Algorithm Type
Error
RADAR[2]
Nearest Neighbour
2.13 meters
Youssef[12]
Bayesian
2.13 meters
XIANG[13]
Bayesian, RSS distribution model
1.83 meters
TABLE VIII
COMPARISON WITH LOCATION SYSTEMS
Fig. 15.
Standard Deviation of the collected RSS values for device 3
Fig. 16.
Deviation between the collected RSS values and theoretical model
for device 3
Fig. 17.
Standard Deviation of the collected RSS values for all devices
VII. CONCLUSION
This paper describes a location system for persons and
objects in an indoor environment, using ZigBee technology.
Fig. 18.
Deviation between the collected RSS values and theoretical model
for all devices
ZigBee nodes can function as RFID tags, having each one a
unique EPC identiﬁcation number. Sensors can be associated
with the Zigbee wireless nodes to create applications for home,
health and trafﬁc control.
Location is determined, using a propagation model, based
on the WAF model, together with a triangulation algorithm.
Tests demonstrate an increase in accuracy when the WAF
parameter is used in the propagation model. Even the use
of an average value for WAF or a set of values proved to
be effective. The same equation parameters can be used for
each ﬁxed device, avoiding the need to collect RSS values for
each ﬁxed device. This becomes very important when a new
location system is to be installed in a new environment, where
the building architecture is similar.
It is important to remark that signal characterization is cru-
cial to ensure a good performance by the propagation model.
The more values of RSS are collected the more accurate the
model becomes. On the other hand, it can be demonstrated that
with a relative small number of collected values it is possible
to develop an effective ﬂexible system, with errors from 2.5
to 0.25 meters when using the developed propagation model.
Results also show that in the moment that the location
is initiated, it is important to collect several RSS values in
order to obtain an average RSS value in that time interval.
The wide range of values that can be collected in the same
position can vary enough to generate signiﬁcant errors. This
variation is due to multipath that as the tendency to increase
with distance. The closer the devices are of each other the more
easily can the propagation model be characterised. This fact
proves that the adopted concept of using a small set of location
environments that together make a bigger environment, is a
valid option. This concept is especially interesting in a ZigBee
using system, being that these networks can have thousands
of devices associated to them, reducing the distances between
the devices, all this at a low cost and low energy consumption.
A more advanced system would be able to track the mobile
device instantaneously. The system could be controlled by a
central server that managed the ZigBee network and processed
all the information needed to the location algorithm. In a
future system it would be possible to obtain not only a
EPC identiﬁcation number but a wide range of information
regarding the location environment.
259
International Journal on Advances in Networks and Services, vol 2 no 4, year 2009, http://www.iariajournals.org/networks_and_services/

REFERENCES
[1] "European Policy Outlook RFID", in Conf. RFID: Towards th Internet of
Things, Berlin, June 25-26, 2007.
[2] P.Bahl and V. N. Padmanabhan. "RADAR: An in-building RF-based user
location and tracking system. in Proc. IEEE INFOCOM , 2000, pages
775-784.
[3] J. Hightower and G. Borriello, "A Survey and Taxonomy of Location
Systems for Obiquitous Computing". Technical Report UW-CSE 01-08-
03, University of Washington, Computer Science and Engineering, August
24, 2001.
[4] H. Hashemi, The Indoor Radio Propagation Channel, Proceedings of the
IEEE, Vol. 81, No. 7, pages 943-968 July 1993.
[5] S. 0. Rice, Mathematical analysis of Random Noise, Bell Systems
Technical Journal, Vol. 23 (1944), Vol. 24 (1945).
[6] Seidel S. Y., Rappaport T. S.,914 MHz path loss prediction models for
indoor wireless communications in multiﬂoored buildings. IEEE Transac-
tions on Antennas and Propagation, v. 40, no.2, pages 207-216, February
1992.
[7] A. G. M. Lima and L. F. Menezes. Motley-Keenan Model Adjusted to
the Thickness of the wall, pages 180-182.
[8] Mikas F., Zvanovec S., Pechac P. Measurement and prediction of signal
propagation for WLAN systems. Czech Technical University in Prague,
2002.
[9] "European Policy Outlook RFID", in Conf. RFID: Towards th Internet of
Things, Berlin, June 25-26, 2007.
[10] Ren C. Luo, Ogst Chen and Shi H. Pan. "Mobile User Localization in
Wireless Sensor Network Using Grey Prediction Method", Department of
Electrical Engineering, Nation Chung Cheng University, Taiwan, 2005.
[11] K. Kaemarungsi and P. Krishnamurthy, Modeling of Indoor Position-
ing Systems Based on Location Fingerprinting. in Proc. IEEE INFO-
COM,2004.
[12] M. A. Youssef, A. Agrawala, and A. U. Shankar, WLAN location
determination via clustering and probability distributions", in Proc. IEEE
International Conference on Pervasive Computing and Communications
(PerCom ’03), Dallas, Fort Worth, TX, Mar. 23-26, 2003, pp. 23-26.
[13] Z. Xiang, S. Song, J. Chen, H. Wang, J. Huang, and X. Gao, A wireless
LAN-based indoor positioning technology", IBM Journal of Research and
Development, vol. 48, no. 5/6, pp. 617-626, Sept./Nov. 2004.
[14] "Part 15.4: Wireless Medium Access Control (MAC) and Physical Layer
(PHY) Speciﬁcations for Low-Rate Wireless Personal Area Networks
(WPANs)", IEEE Standard for Information technology
Telecommunica-
tions and information exchange between systems, September 8, 2006.
[15] P. Kinney, "ZigBee Technology: Wireless Control that Simply Works",
in Conf. Communications Design Conference, October 2, 2003.
[16] L. Yujin, P. Jaesung, "Practical Indoor Positioning System Using Re-
ceived Signal Strength in IEEE 802.15.4 Networks", 2009.
[17] G. Gomes, H. Sarmento, "Indoor Location System using ZigBee Tech-
nology", in Conf. SENSORCOMM 2009, June, 2009.
260
International Journal on Advances in Networks and Services, vol 2 no 4, year 2009, http://www.iariajournals.org/networks_and_services/

