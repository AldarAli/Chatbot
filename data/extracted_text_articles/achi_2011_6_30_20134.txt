Enhanced Stability of Three-Users Multirate Distributed Haptic Cooperation via
Coordination to Average Peer Position
Ramtin Rakhsha
Department of Mechanical Engineering
University of Victoria
Victoria, BC, V8W 3P6, Canada
rrakhsha@uvic.ca
Daniela Constantinescu
Department of Mechanical Engineering
University of Victoria
Victoria, BC, V8W 3P6, Canada
danielac@me.uvic.ca
Abstract—Distributed networked haptic cooperation may be-
come unstable when the number of interacting users increases
because the effective coordination gain for the shared virtual
object increases. The average position coordination strategy
maintains the coordination gain of the shared virtual object
constant regardless of the number of cooperating participants.
Therefore, the average position strategy is expected to increase
the stability region of networked haptic cooperation among
multiple users. This paper conﬁrms through analysis and
experiments that AP coordination maintains the three-users
haptic cooperation stable for larger coordination gains than
traditional virtual coupling coordination. The stability analysis
is performed in a multirate control framework. Multirate
control is deployed to support high sampling rate of the
peer force feedback loops in the presence of a low network
update rate. The experiments report a one degree of freedom
manipulation of a virtual cube by three cooperating users.
Keywords-Networked haptic cooperation; distributed control;
multirate control; coordination to averaged position.
I. INTRODUCTION
The rapid growth of the computer networking infrastruc-
ture has inspired haptics researchers to develop methods
to add the sense of touch to applications like defence [6],
cooperative industrial design [10], surgical teletraining [18],
telerehabilitation [22], emotion recognition [3] and multi-
user on-line computer games [12]. Such applications demand
that multiple networked users be enabled to cooperate in a
shared virtual environment, i.e., be enabled to simultane-
ously interact with the virtual environment and with each
other. Simultaneous haptic interaction in a shared virtual en-
vironment can be supported through client-server communi-
cations and centralized control of the interaction, or through
peer-to-peer communications and distributed haptic control.
The client-server connectivity maintains better consistency
among the interacting users and is typically deployed to
support cooperation among more than two users [4], [5],
[16]. Nonetheless, it incurs double communication delay and
can render only much lower contact stiffness even for small
network delay [9]. Peer-to-peer communications and distrib-
uted control of the interaction are preferable for realistic
force feedback in rigid shared virtual environments [9].
Existing architectures for distributed control of networked
haptic cooperation [9], [19], [20] typically coordinate each
peer’s local copy of the shared virtual object (SVO) to all
other SVO copies. The coordination of each SVO copy to
the other SVO copies may lead to instability because the
impedances of the many coordinating controllers compound
and may exceed the Z-width [8] of the users’ haptic in-
terfaces, i.e., the maximum impedance that the interfaces
can stably display to their respective users. However, little
research addresses this difﬁculty. Recent work in [14],
[15] introduces a passivity-based framework for optimizing
the distributed connectivity and for computing virtual cou-
pling [1], [7] parameters that guarantee stable cooperation
among a ﬁxed number of operators. The work in [14],
[15] hinges on a passive mechanical integrator [13] whose
extension to rigid body interaction is unclear.
In prior work [17], we have introduced a distributed haptic
control architecture whose SVO coordination gain at all peer
sites is independent of the number of participants involved
in the cooperation. In that architecture, the local SVO copy
at each user has been coordinated to a SVO representative
whose motion has been computed by averaging the motion
of all other SVO copies. In the preliminary study [17], the
average position (AP) coordination strategy has been con-
trasted through simulations to virtual coupling coordination.
In this paper, we present analytical and experimental support
that AP coordination maintains three-users networked haptic
cooperation stable for larger coordination gains than tradi-
tional virtual coupling coordination. The paper considers op-
erators connected across a network with limited bandwidth
and constant and relatively small communication delay [9]. It
deploys multirate control in order to support a high sampling
rate of the peer force feedback loops in the presence of a low
network update rate. The paper uses lifting [2], [9] to derive
the state transition matrix of the multirate three-users haptic
cooperation system with AP coordination and to carry out
an eigenvalue-based analysis of its stability. Experimental
one degree of freedom (DOF) cooperative manipulations
of a virtual cube by three cooperating users are presented
to validate the analytical results. Although the analysis
136
ACHI 2011 : The Fourth International Conference on Advances in Computer-Human Interactions
Copyright (c) IARIA, 2011.     ISBN: 978-1-61208-117-5

and experiments presented in the paper involve one DOF
networked haptic cooperation, the AP coordination strategy
is readily applicable to cooperative rigid body manipulations.
This is because the AP coordination is independent of the
SVO simulation algorithms and because virtual coupling
control is suitable for rigid body coordination [8].
Section II overviews the traditional virtual coupling and
the AP coordination strategies for three-users networked
haptic cooperation. Section III presents the steps involved
in developing the multirate state space model of three-users
haptic cooperation across a network with low update rate
and small and constant network delay, and uses the multi-
rate state transition matrix to compare the stability regions
of the two coordination techniques. Section IV validates
the analytical results through experiments in which three
networked users manipulate a shared virtual cube together.
Section V presents the conclusions drawn from this work
and the directions for future work.
II. COORDINATION OF THREE-USERS DISTRIBUTED
NETWORKED HAPTIC COOPERATION
In distributed networked haptic cooperation, the users
interact through manipulating a SVO together. The control
of such cooperation is achieved through coordinating all
peers’ local copies of the SVO. Virtual coupling control [1],
[7] has typically been selected to coordinate the SVO
copies [9], [19], [20]. The extension of virtual coupling
coordination to three-users networked haptic cooperation
is schematically depicted in Fig. 1. This ﬁgure illustrates
that the virtual environment at each peer includes a copy
of the SVO and an avatar of the peer’s haptic interface.
The SVO damping is assigned to each local copy, and the
SVO mass is equally divided among all copies. The avatar
inherits the dynamics of the haptic interface. The dynamics
of two-users distributed networked haptic cooperation with
virtual coupling coordination are presented in [21], and
their extension to three-users interaction inserts a virtual
coupler between each pair of peers, as shown in Fig. 1. One
problem with this control architecture is that the effective
coordination gain for each SVO copy becomes larger as the
number of users increases and may exceed for Z-width of
the haptic interface and thus, destabilize the cooperation.
To address this shortcoming, we have proposed the AP
coordination strategy [17].
In the AP scheme, the SVO copy of each peer is co-
ordinated to the average position of all other SVO copies.
The AP coordination strategy is illustrated schematically in
Fig. 2 for the local SVO copy of Peer 1 and for three-users
networked haptic cooperation. In this ﬁgure, notation is used
as follows: mHD1 and bHD1 are the mass and damping of
the haptic device of Peer 1; mO1 and bO1 are the mass and
damping of the SVO copy of Peer 1’s; KC1 and BC1 are
the stiffness and damping of the contact between Peer 1
and its local SVO copy, respectively; KT and BT are the
stiffness and damping gains of the virtual coupler which
coordinates the distributed SVO copies. As in traditional
virtual coupling coordination, the SVO mass mO is equally
distributed among the SVO copies and the SVO damping
bO is assigned to each SVO copy, i.e., mO1 =
mO1
3
and
bO1 = bO.
According to Fig. 2, the dynamics of three-users distrib-
uted networked haptic cooperation with AP coordination are:
• for the haptic device of Peer i:
mHDi ¨xHDi + bHDi ˙xHDi = Fhi − FCi,
(1)
where Fhi is the force applied by Peer i to its haptic
interface and FCi is the contact force between Peer i
and its SVO copy;
• for Peer i’s copy of the SVO:
mOi ¨xOi + bOi ˙xOi = FCi − FTi,
(2)
where FTi is the coordination force applied by the AP
coordination controller to Peer i’s copy of the SVO.
In Equations (1) and (2), the contact and coordination forces
are computed using:
FCi = KCi(xHDi − xOi) + BCi( ˙xHDi − ˙xOi)
(3)
and:
FTi = KT(xOi − xOid) + BT( ˙xOi − ˙xOid).
(4)
In Equation (4), xOid and ˙xOid are the desired position and
velocity of the SVO copy of Peer i and, according to the
AP strategy, are computed through averaging the motion
commands coming from the other two peers:
xOid =
P3
j=1,j̸=i xOjn
2
and
˙xOid =
P3
j=1,j̸=i ˙xOjn
2
(5)
Lastly, the motion commands are the delayed position and
velocity of the sending peer:
xOin(t) = xOi(t − Td)
and
˙xOin(t) = ˙xOi(t − Td), (6)
and Td is the network delay. In this paper, the network
delay is assumed constant and equal in all communication
channels, and an integer multiple of the network packet
update interval Tn.
III. STABILITY ANALYSIS
Because of network bandwidth limitations, the packet
update rate is generally lower than the typical 1 KHz haptic
rate required for realistic force feedback, especially in rigid
virtual environments. Therefore, three-users networked hap-
tic cooperation is a system with two sampling intervals: the
(fast) sampling interval of the local force feedback loops at
the peer users, Tc, typically equal to 0.001 s; and the (slow)
sampling interval of the network updates, Tn, typically
equal to 0.008 s [9]. Its stability can be investigated using
eigenvalue analysis of its multirate state transition matrix.
137
ACHI 2011 : The Fourth International Conference on Advances in Computer-Human Interactions
Copyright (c) IARIA, 2011.     ISBN: 978-1-61208-117-5

Network
Virtual Coupler
Avatar
Local Contact
Shared
Virtual
Object
Shared
Virtual
Object
Shared
Virtual
Object
Peer 1
Peer 2
Peer 3
Figure 1.
Traditional virtual coupling coordination of distributed haptic cooperation among three users.
Network
Peer 1
mO1
bO1
KC1
Bc1
KT
BT
Shared
Virtual
Object
mHD1
bHD1
Figure 2.
AP coordination of haptic cooperation among three users as
applied at Peer 1.
In turn, this matrix can be computed through deriving the
state space model of the multirate haptic cooperation system
using the lifting approach in [2] and [9]. The derivations are
brieﬂy presented in the following sections. They assume a
communication delay in each direction equal to one network
update interval, i.e., Td = Tn = 0.008 s.
A. Open-loop Continuous-time State-space Representation
The continuous-time state-space representation of the
open-loop three-users networked haptic cooperation system
is obtained from the dynamics of the users, of the haptic
interfaces and of the SVO copies by grouping the system
inputs and outputs into fast and slow sub-vectors, hereafter
denoted with c and n indices respectively. Speciﬁcally, the
system inputs comprise the contact forces, updated at the
fast haptic rate (Equation (3)), and the SVO coordination
forces, including both fast and slow updated components
(Equation (4)):
uT = (uT
c
uT
n )T
(7)
where:
uT
c = (FC1
FT1c
FC2
FT2c
FC3
FT3c)T
(8)
uT
n = (FT1n
FT2n
FT3n)T
(9)
FTic
=
KTxOi + KTxOi
(10)
and:
FTin
=
−KTxOid − KTxOid.
(11)
The state vector comprises the states of all haptic interfaces
and SVO copies:
xT = (xpeer1
xpeer2
xpeer3 )T
(12)
where:
xT
peeri = (xHDi
˙xHDi
xOi
˙xOi)T ;
i = 1, 2, 3.
(13)
The output vector is:
yT = (yc
T
yn
T )T ,
(14)
where:
yc
T = x T ,
(15)
yT
n = (ypeer1n
ypeer2n
ypeer3n)T
(16)
and
yT
peerin = (xOid
˙xOid)T ;
i = 1, 2, 3.
(17)
Hence, the continuous-time state-space model of open-
loop three-user networked haptic cooperation with AP coor-
dination is:
˙x12×1 = A12×12x12×1 + B12×9 u9×1
y18×1 = C18×12x12×1
(18)
138
ACHI 2011 : The Fourth International Conference on Advances in Computer-Human Interactions
Copyright (c) IARIA, 2011.     ISBN: 978-1-61208-117-5

B. Discrete-Time State-Space Representation
Following the approach [2] and assuming that the network
sampling interval is an integer multiple of the sampling
interval of the peers’ force control loops and that the force
feedback and network update sampling times are synchro-
nized, the discrete-time state-space representation of the
open-loop system can be written in the form:
xD96×1[k + 1] = AD96×96 xD96×1 [k] + BD96×51 uD51×1 [k]
yD102×1[k] = ˆCD102×96 xD96×1[k] + ˆDD102×51 uD51×1[k]
(19)
where k is the k-th network update interval and more details
about the derivations of the system matrices AD, BD, ˆCD
and ˆDD can be found in [9]. Furthermore, by augmenting
the state vector with the delayed inputs [9], computational
and communication delays are incorporated into the discrete-
time open-loop model in Equation (19).
C. Stability Analysis
For three-users networked haptic cooperation, the feed-
back matrix FD comprises the contact and SVO coordination
forces and is computed using the approach [2]. Thereafter,
the stability of the multirate closed-loop system can be
derived through eigenvalue analysis of the closed-loop state
transition matrix Acl
D , calculated via:
Acl
D = ADaug + BDaug FD (I − DDaugFD)−1CDaug
(20)
where ADaug, BDaug, CDaug and DDaug are the state tran-
sition matrices obtained after augmentation with computa-
tional and communication delays. Speciﬁcally, the three-
users networked haptic cooperation system is stable if and
only if all eigenvalues of Acl
D are inside the unit circle:
°°eig(Acl
D )
°° < 1
(21)
The stability regions for cooperation with AP and with
virtual coupling coordination are presented: (i) in Fig. 3
for the case of Proportional coordination, when damping is
injected as SVO damping (BT = BCi = 0 Ns/m); and (ii) in
Fig. 4 for the case of Proportional-Derivative coordination,
when damping is injected as coordination and local contact
damping (BT = BCi = 2 Ns/m). The numerical computa-
tions are carried out considering that the haptic devices has
mass mHDi = 0.1 kg and physical damping bHDi = 5.0 Ns/m
and for a SVO with mass mO = 0.6 kg and damping
bO = 5.0 Ns/m. The sampling interval of the force feedback
loops at all peers is Tc = 0.001 s and the network update
interval is Tn = 0.008 s. The computational delay is equal
to one sampling interval of the force feedback loop, i.e.,
TV E = Tc = 0.001 s. The communication delay is equal to
one network update interval, i.e., Td = Tn = 0.008 s.
Fig. 3 illustrates that the Proportional AP coordination
maintains the cooperation stable for KT gain twice as large
as the KT gain of Proportional virtual coupling coordination.
The increase in the KT gain afforded by the AP strategy
0
500
1000
1500
2000
0
500
1000
1500
2000
2500
KT (N/m)
KC (N/m)
3−users − AP coordination
3−users − Virtual Coupling
2−users
Stable
(a) Computational delay.
0
500
1000
1500
2000
0
500
1000
1500
2000
2500
KT (N/m)
KC (N/m)
3−users − AP coordination
3−users − Virtual Coupling
2−users
Stable
(b) Computational and communication delay.
Figure 3.
Stability region for three-users haptic cooperation with Propor-
tional SVO coordination.
0
1000
2000
3000
4000
0
1000
2000
3000
4000
KT (N/m)
KC (N/m)
3−users − AP coordination
3−users − Virtual Coupling
2−users
Stable
(a) Computational delay.
0
1000
2000
3000
4000
0
1000
2000
3000
4000
KT (N/m)
KC (N/m)
3−users − AP coordination
3−users − Virtual Coupling
2−users
Stable
(b) Computational and communication delay.
Figure 4.
Stability region for three-users haptic cooperation with
Proportional-Derivative SVO coordination.
139
ACHI 2011 : The Fourth International Conference on Advances in Computer-Human Interactions
Copyright (c) IARIA, 2011.     ISBN: 978-1-61208-117-5

is smaller compared to the virtual coupling strategy when
Proportional-Derivative coordination is deployed. This re-
sult conﬁrms the negative impact of delayed damping on
stability. Both ﬁgures also attest to the negative impact on
system stability of the communication (network) delay.
IV. EXPERIMENTS
This section contrasts the AP coordination strategy to
traditional virtual coupling coordination through controlled
three-users cooperative manipulations. The controlled ex-
perimental cooperations are performed on a platform that
enables point interaction between the networked users and
the shared virtual environment. The platform comprises three
FALCON NOVINT haptic devices, each connected to a
respective computer and providing 3DOF force feedback to
users. All computers run Windows XP on an Intel Core 2
Duo CPU at 2.67 Ghz with 2 GB RAM. The computers are
in the same laboratory and communicate over the network
via the UDP protocol. Given the proximity of the three
computers, the network delay is negligible and a Wide Area
Emulator (WANem) running on a separate computer imple-
ments the network environment. The shared virtual environ-
ment is generated as a C++ console application. It comprises
a shared virtual cube in a rigid enclosure that constrains
the cube to move horizontally along a single direction. To
ensure the “same” users during successive experiments, the
user-applied forces are replaced by forces commanded to
the actuators through software. Since the haptic devices are
impedance-type interfaces, the forces commanded through
software eliminate the adaptive damping associated with the
user manipulations of the haptic devices and represent a
worst-case scenario for stability [11].
In the experiments, Peer 1 is located on the right side of
the cube and pushes the cube to the left with constant force
Fh1 = 4 N. Peer 2 and Peer 3 are on the left side of the
cube and push the cube to the right with constant and equal
forces Fh2 = Fh3 = 2 N. The experiment starts with the
users not in contact with the virtual cube. Fig. 5 depicts
the snapshot of initial experimental conditions displayed
at Peer 1. The virtual cube has mass mO = 0.3 kg and
hence, the local cube copies at the three peers have mass
at each peer mOi = 0.1 kg. The sampling interval of the
force control loop is Tc = 0.001 s, and the network update
interval is Tn = 0.008 s. The network delay is considered
negligible. The stiffness and damping of the local contacts
are KC = 3900 N/m and BC = 0.05 Ns/m, respectively.
The SVO coordination gains are KT = 2000 N/m and
BT = 1.0 Ns/m.
Experimental three-users networked haptic cooperation
results are shown in Fig. 6a for AP coordination of the SVO,
and in Fig. 6b for traditional virtual coupling coordination.
These results illustrate that the cooperation is stable for AP
coordination, and unstable for virtual coupling coordination.
Thus, they validate the ability of the AP coordination
Figure 5.
Snapshot of initial experimental conditions displayed to Peer 1.
0
1
2
3
4
5
−5
0
5
10
time (sec)
Local Peer
First Remote Peer
Second Remote Peer
(a) AP coordination.
0
1
2
3
4
5
−5
0
5
10
time (sec)
Local Peer
First Remote Peer
Second Remote Peer
(b) Virtual coupling coordination.
Figure 6.
Controlled experimental three-users cooperation.
strategy to maintain the networked cooperative manipulation
stable for stiffer coordination gains.
V. CONCLUSION
This paper has investigated the stability of the average po-
sition (AP) coordination strategy for three-users networked
haptic cooperation. The AP strategy maintains the SVO
coordination gain constant regardless of the number of
cooperating participants. For three-users networked haptic
cooperation, the paper has validated through analysis and
experiments that AP coordination maintains the interaction
stable for larger coordination gains. The stability analysis
has been based on the eigenvalues of the state transition
matrix of the three-users multirate haptic feedback system.
The experiments have illustrated a one DOF cooperative
manipulation of a virtual cube. Regardless of the one DOF
140
ACHI 2011 : The Fourth International Conference on Advances in Computer-Human Interactions
Copyright (c) IARIA, 2011.     ISBN: 978-1-61208-117-5

analysis and experiments, the AP coordination strategy is
readily applicable to rigid body cooperative haptic manipu-
lations.
Upcoming work investigates the transparency of AP co-
ordination and techniques to improve it in the presence
of signiﬁcant network delay, as well as its stability for
cooperation across networks with variable delay and packet
loss.
ACKNOWLEDGMENT
This work has been supported through an NSERC Dis-
covery Grant.
REFERENCES
[1] R. J. Adams and B. Hannaford. Stable haptic interaction with
virtual environments. IEEE T Robot Autom, 5(3):465–474,
1999.
[2] M. Araki and K. Yamamoto. Multivariable multirate sampled-
data systems: state-space description, transfer characteristics,
and nyquist criterion. IEEE T Autom Contr, 31(2):145–154,
1986.
[3] J.N. Bailenson, N. Yee, S. Brave, D. Merget, and D. Koslow.
Virtual interpersonal touch: expressing and recognizing emo-
tions through haptic devices.
Hum.-Comput. Interact.,
22(3):325–353, 2007.
[4] G. Bianchini, M. Orlandesi, and D. Prattichizzo.
An LMI
framework for analysis and design of multi-dimensional hap-
tic systems. In IEEE Conf Decision Contr, pages 4564–4569,
Cancun, MEXICO, 2008.
[5] G. Bianchini, M. Orlandesi, and D. Prattichizzo.
Stability
analysis and design of multi-dimensional haptic systems. In
IEEE Symp Haptic Interf Virt Envir Teleop Syst, pages 177–
184, Reno, NV, 2008.
[6] M. Capps, P. PMcDowell, and M. Zyda.
A Future for
Entertainment-Defense Research Collaboration. IEEE Com-
puter Graphics Applic, 21(1):37–43, 2001.
[7] J. E. Colgate and G. G. Schenkel. Passivity of a class of
sampled-data systems: application to haptic interfaces.
J
Robotic Syst, 14(1):37–47, 1997.
[8] J.E. Colgate and M.C. Stanley. Issues in the haptic display
of tool use. In IEEE/RSJ Int Conf Intell Robot Syst, pages
140–145, Pittsburgh, PA, 1995.
[9] M. Fotoohi, S. Sirouspour, and D. Capson.
Stability and
performance analysis of centralized and distributed multi-rate
control architectures for multi-user haptic interaction. Int J
Robot Res, 26(9):977–994, 2007.
[10] M. Glencross, C. Jay, J. Feasel, L. Kohli, M. Whitton, and
R. Hubbold. Effective cooperative haptic interaction over the
Internet. In IEEE Virt Real Conf, pages 115–122, Charlotte,
NC, 2007.
[11] B. Hannaford and R. Anderson. Experimental and simulation
studies of hard contact force reﬂecting teleoperation. In IEEE
Int Conf Robot Autom, pages 24–29, Scottsdale, AZ, 1988.
[12] Y.B Kim, S.H. Han, S.J. Kim, E.J. Kim, and C.G. Song.
Multi-player virtual ping-pong game. In Int Conf Artif Real
Telexistence, pages 269–273, 2007.
[13] D.J. Lee and K. Huang. On passive non-iterative variable-
step numerical integration of mechanical systems for haptic
rendering. In ASME Dyn Syst Contr Div Conf, pages 1147–
1154, 2008.
[14] D.J. Lee and K. Huang.
Passive-set-position-modulation
framework for interactive robotic systems.
IEEE T Robot,
26(2):354–369, 2010.
[15] D.J. Lee and K. Huang.
Peer-to-peer control architecture
for multiuser haptic collaboration over undirected delayed
packet-switching network. In IEEE Int Conf Robot Autom,
pages 1333 –1338, Anchorage, AK, 2010.
[16] S. Lee and JW. Kim.
Transparency Analysis and Delay
Compensation Scheme for Haptic-based Networked Virtual
Environments. Comput Commun, 32(5):992–999, 2009.
[17] Z. Li and D. Constantinescu. Networked Haptic Cooperation
among Multiple Users via Virtual Object Coordinatino to
Averaged Position of Peer Copies.
In IEEE Int Workshop
Haptic Audio Vis Env Games, pages 170–175, Lecco, Italy,
2009.
[18] P. Mitra and G. Niemeyer. Haptic Simulation of Manipulator
Collisions Using Dynamic Proxies.
Presence: Teleop Virt
Envir, 16(4):367–384, 2007.
[19] G. Sankaranarayanan and B. Hannaford.
Experimental
comparison of internet haptic collaboration with time-delay
compensation techniques. In IEEE Int Conf Robot Autom,
volume 1, pages 206–211, Pasadena, CA, 2008.
[20] G. Sankaranarayanan and B. Hannaford. Experimental Inter-
net Haptic Collaboration using Virtual Coupling Scheme. In
IEEE Symp Haptic Interf Virt Envir Teleop Syst, pages 259–
266, Waltham, MA, 2008.
[21] G. Sankaranarayanan and B. Hannaford. Experimental Inter-
net Haptic Collaboration using Virtual Coupling Scheme. In
IEEE Symp Haptic Interf Virt Envir Teleop Syst, pages 259–
266, Waltham, MA, 2008.
[22] H. Sugarman, E. Dayan, A. Weisel-Eichler, and J. Tiran.
The Jerusalem Telerehabilitation System, a New, Low-Cost,
Haptic Rehabilitation Approach.
CyberPsychology Behav,
9(2):178–182, 2006.
141
ACHI 2011 : The Fourth International Conference on Advances in Computer-Human Interactions
Copyright (c) IARIA, 2011.     ISBN: 978-1-61208-117-5

