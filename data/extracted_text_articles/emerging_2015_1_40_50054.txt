Enhancing Ultrasonic Robot Positioning Accuracy with Parallel Codes Acquisition 
of Composite Pseudo-noise Sequences 
 
Jen-Fa Huang, Chun-Chieh Liu, Kun-Fong Lin  
 
Advanced Optoelectronic Technology Center,  
Institute of Computer and Communications Engineering  
Department of Electrical Engineering  
National Cheng Kung University, Tainan, Taiwan  
Email: huajf@ee.ncku.edu.tw 
 
Abstract—Ultrasonic robot positioning with composite codes 
acquisition is investigated in this paper. The indoor robot 
positioning system was previously examined with single 
Pseudo-noise (PN) signal sequence. In views of correlation 
acquisition, the longer the code acquisition time, the longer the 
path estimation distance, and the worse the robot positioning 
accuracy. Under comparable period lengths, acquisition time 
for composite PN codes can be shorter than that of pure PN 
codes, thus can largely enhance the robot positioning accuracy. 
In the devised system configuration, three transmitters 
continuously send out their ultrasonic coding signals to the 
robot receiver. The robot evaluates its current position by 
measuring time difference of arrival (TDOA) among the three 
paths. Optimization algorithms can then be undertaken over 
the measured TDOAs to obtain more accurate robot location. 
Based on correlation characteristics of the proposed composite 
PN codes, we finally make a general analysis on codes 
acquisition time to the robot positioning accuracy.  
Keywords -- Indoor positioning system; Composite M-
sequences; Parallel codes acquisition; Time difference of arrival 
(TDOA).  
 
I.  INTRODUCTION  
With the mature technology, the functionality of robots is 
more and more pluralism. For example, the navigation robot, 
the cleaning robot, and other service type of robots, when 
robots execute their task, they need to move around. 
Therefore, the accuracy of positioning is very important, and 
the error of measurements between robot and sensor must be 
solved. For example, the multipath propagation is caused by 
the interference, because the ultrasonic wave is transmitted at 
all direction. As a result, multipath propagation will occur 
when the ultrasonic wave collide obstacles. Transmitting 
signals may be cut by obstacles so that a longer distance and 
a large time delay are produced. Time of Arrival (TOA) 
[1][2] and Time Difference of Arrival (TDOA) [3][4] 
positioning are easily influenced by errors so that the 
positioning accuracy is reduced.  
In order to improve indoor ultrasonic positioning 
accuracy, so the robot object can be more precise positioning, 
and capture ultrasonic signals in the process. How to confirm 
the capture of ultrasound echo signals to the correct sources 
and reduce errors is the most important issue to study.  
Several previous works that have used the coding 
techniques of the ultrasonic signal to determine the robot 
position, using PN sequences [5][6], Gold sequences [7], 
Loosely Synchronous (LS) sequences [8], Golay codes [9] 
and Barker codes [10]. These works represent the 
development of a Local Positioning System (LPS), based on 
the transmission of ultrasonic signals.  
Pérez et al. [8] explored characteristics of LS sequences 
which exhibit an Interference-Free Window (IFW) within 
correlation functions to construct an ultrasonic beacon-based 
LPS, as well as to reduce the multipath effect. Hernández et 
al [9] developed system which used Golay codes in the 
ultrasonic signal processing and obtained features of 
arbitrary long pseudo-orthogonal sequences with no cross-
interference. Hossain et al. [10] found pairs of Barker code 
with low cross-correlation so that they can be used in multi-
user environment.  
Huang et al [11] proposed a coding scheme of composite 
PN code sequences to encode the transmission signals. Such 
composite codes possess characteristics of mutual codes 
orthogonality and can asynchronously cancel the mutual 
interference among transceivers. With sophisticated balanced 
correlation detections, matched codes with high correlation 
magnitude can get unique code identification and unmatched 
codes will be rejected in the receiver end. De Angelis et al. 
[12] investigated an acquisition system to solve the problem 
of having more than one BS in the same PN code acquisition 
system to make it necessary to discriminate between correct 
detection and false alarm events.  
In this paper, we simulate an indoor ultrasonic robot 
positioning scheme based on Direct Sequence Spread 
Spectrum 
(DSSS) 
system. 
Through 
DSSS 
system 
architecture, we make our higher power and narrow band of 
the original signal into a low power and broadband signals. 
Each transmitter is controlled by central controller. The 
central controller will select the assigned composite code 
sequences for the corresponding transmitter’s unique code 
identification. The robot calculates the number of frame peak 
between local code replica and received summed sequence. 
The number of frame peak offers estimates of the robot 
distance to the corner transmitters. With such estimates of 
transceiver distance, the robot executes TDOA calculation 
and optimization to obtain its absolute location.  
The paper is organized as follows. In Section II, we 
introduce composite code architecture in detail. Important 
correlation characteristics are investigated for parallel codes 
acquisition to estimate robot distance to transceivers. In 
Section III, composite PN codes are assigned to indoor 
19
Copyright (c) IARIA, 2015.     ISBN:  978-1-61208-422-0
EMERGING 2015 : The Seventh International Conference on Emerging Networks and Systems Intelligence

corner transceivers to determine the absolute position of 
robot object by hyperbolic triangulation of the distance 
obtained from the measurement of the difference in TDOA 
among a transceiver and the others. In Section IV, with 
parallel codes acquisition scheme, we analyze the accuracy 
of the positioning and expect to improve the accuracy of the 
indoor positioning systems. Finally, in Section V, we present 
our discussions and conclusions. With parallel PN codes 
acquisition, robot positioning error is found much reduced to 
provide more precise movement behaviors.  
 
II. COMPOSITE CODE SEQUENCES  
Composite code sequences constructed with M-sequence 
codes are a particular set of PN sequences. This family of 
composite sequence codes possesses high magnitude of auto-
correlation and low value of cross-correlation characteristics. 
We assigned different composite codes to transceiver in a 
DSSS system and controlled by central controller, and 
signals can be sent simultaneously and be separated at the 
receiver.  
In this paper, we propose a coding method for DSSS 
indoor robot positioning system. The assigned transceiver 
composite codes are made up of M-sequence component 
codes. There are many groups of composite codes that the 
ultrasonic transceiver can be assigned with. Now, we select 
two M-sequence codes to illustrate a composite code set of 
them. Let C1 be an (n1, k1) binary M-sequence code and C2 be 
an (n2, k2) binary M-sequence code, where code periods n1 
and n2 are relatively prime. Let C1(X) ∈ C1 and C2(X) ∈ C2 
denote the basis code words or code vectors in code space C1 
and C2. Let TiC1(X) denote the i-chips cyclic right-shift of 
C1(X), 0≤ i ≤ n1-1, and TjC2(X) the j-chips cyclic right-shift 
of C2(X), 0≤ j ≤ n2-1. With n=n1n2, let code vector TiC1(X) ∈ 
C1 repeat itself n/n1=n2 times and TjC2(X) ∈ C2 repeat itself 
n/n2=n1 times, we obtain the repeated binary M-sequences of 
common period n=n1n2:  
(𝑇𝑖𝑪1(X))
𝑛
= (𝑇𝑖𝑪1(X), 𝑇𝑖𝑪1(X), ⋯ , (𝑛2 times))      (1) 
(𝑇𝑗𝑪2(X))
𝑛
= (𝑇𝑗𝑪2(X), 𝑇𝑗𝑪2(X), ⋯ , (𝑛1 times))     (2) 
By combining (1) and (2) in a chip-by-chip modulo-2 
addition, we get a composite code vector defined with the 
above component M-sequences  
(𝐶(𝑖,𝑗)(X))
𝑛
= (𝑇𝑖𝑪1(X))
𝑛
⊕ (𝑇𝑗𝑪2(X))
𝑛        (3) 
The notation “⊕” represents a modulo-2 summation. The 
composite code vector of (3) are non-maximal length codes 
though their constituent component codes are maximal-
length ones. In the above equations, we have defined 
(TiC1(X))n and (TjC2(X))n the repeated component M-
sequence codes while (C(i,j)(X))n the composite codes made 
up from the above repeated M-sequences codes. Figure 1 
depicts a schematic shift register circuit for composite M-
sequence codes C(i,j)(X) = TiC1(X)⊕TjC2(X), where TiC1(X) 
codes are generated in the upper branch with recursion 
connection h1(X) = 1+X+X2 while TjC2(X) codes be 
generated in the lower branch with feedback connection 
h2(X) = 1+X+X3.  
 
Figure 1. Shift register generator for composite codes C(i,j)(X) = 
TiC1(X)⊕TjC2(X).  
On the receiver side, the goal is to capture the matched 
code signal to estimate position distance while reject 
interference from other unmatched signal codes. As 
depicted in Figure 2, we devise a parallel codes acquisition 
circuit for the robot receiver. Balanced correlators 
detection/subtraction scheme is adopted. In the upper circuit, 
the received signals will perform correlation operation with 
local code signal C1 = (1, 1, 0) and 𝑪̅1 = (0, 0, 1) to capture 
acquisition peaks with every 3 bits cycle shift. In the lower 
circuit, the received signals will perform correlation 
operation with local signal code C2 = (1, 1, 1, 0, 0, 1, 0) and 
𝑪̅2 = (0, 0, 0, 1, 1, 0, 1) to capture acquisition peaks with 
every 7 bits cycle shift. The acquisition peaks combined 
from the upper and the lower correlators will appear at the 
common periodicity of 21 bits cycle shift. By using this 
method, the receiver can remove interference of other 
signals and capture the relative signal C1 ⊕ C2 = 
(1,1,0, …) ⊕ (1,1,1,0,0,1,0, …).  
 
Figure 2. Parallel acquisition circuit for composite codes TiC1(X)⊕TjC2(X).  
The composite codes C(i,j)(X) = TiC1(X) ⊕TjC2(X) can be 
partitioned into proper subsets for assignment to ultrasonic 
transceiver sets. For example, on referring Table I, with 0≤ 
i ≤ n1-1 and 0≤ j ≤ n2-1, we see the possible code vectors 
TiC1(X) and TjC2(X) in Tables I(a) and I(b), and the modulo-
2 combined composite M-sequence codes in Table I(c). 
With respect to Table I(c), transceiver #1 can be allocated 
with composite codes (TiC1⊕T0C2), transceiver #2 with 
composite codes (TiC1 ⊕ T2C2), and transceiver #3 with 
composite codes (TiC1 ⊕ T5C2). Alternative transceiver 
codes assignment can also be adopted.  
20
Copyright (c) IARIA, 2015.     ISBN:  978-1-61208-422-0
EMERGING 2015 : The Seventh International Conference on Emerging Networks and Systems Intelligence

TABLE I. (a). TiC1(X) CODE SEQUENCES; (b). TjC2(X) CODE SEQUENCES; (c). COMPOSITE CODE SEQUENCES C(i,j)(X) = TiC1(X) ⊕TjC2(X). 
  
 
III. ROBOT POSITIONING SYSTEM ARCHITECTURE  
In views of correlation acquisition, the longer the code 
acquisition time, the longer the path estimation distance, 
and the worse the robot positioning accuracy. According 
to the proposed composite coding scheme, we devise a 
parallel composite codes acquisition scheme to implement 
the indoor robot positioning system; the position of a 
target can be captured from the distances between the 
ultrasonic transceivers and a receiver of a target.  
Figure 3 depicts a conceptual schematic of the 
proposed indoor robot positioning system. In the 
transmitter, the ultrasonic transceivers are installed at the 
corners and connected to central controller. Three 
composite PN codes structured from relatively prime-
length M-sequence codes are assigned to different 
transceivers. These composite codes are modulated with 
ultrasonic carrier wave to generate transmission signals.  
 
Figure 3. Overview of the indoor positioning system.  
The reason we use ultrasound instead of higher 
frequency modulation signals is for easy visualizing robot 
codes acquisition under our limited PN code lengths in 
the transceivers. Take as comparative numerical figures 
for the high and low modulation rates. With 21-chip 
lengths per code frame and suppose 5-frames time is 
needed to confirm code acquisition. On using RF chips 
rate of 2000-kHz (2x106 chips/sec), the estimated object 
distance will be 21x5/2x106 = 5x10-5m. This figure is 
hardly distinguishable on the robot distance to the 
transceiver. But on using ultrasonic chips rate of 20-Hz 
(20 chips/sec), the same code length and acquisition 
frame will yield an estimated object distance of 21x5/20 = 
5m. This figure is something acceptable. In practice, 
acquisition chips period length in mobile positioning can 
reach up to 213-1 = 8191 chips per frame to yield a 
distinguishable object distance.  
In the robot receiver, in order to calculate the distance 
from each transceiver, the robot needs to separate the 
incoming signals from different transceivers. The robot 
bears the same ultrasonic carrier wave and composite PN 
codes as those of the transceiver signals, which are called 
the replica signals. On correlating received code signals 
with local replica signals, the robot can separate 
correlation peaks for the matched transceiver code from 
correlation nulls for the unmatched ones. This procedure 
for correlation detection of code signals is called code 
acquisition.  
The robot positioning block chart for acquiring signal 
codes and estimating their flight time is as shown in 
Figure 4. In coding/modulating part of Figure 4(a), every 
transceiver performs ultrasonic signal modulation with 
assigned signature code, and emits this ultrasonic signal 
continuously. Once the signal is received by the robot, the 
21
Copyright (c) IARIA, 2015.     ISBN:  978-1-61208-422-0
EMERGING 2015 : The Seventh International Conference on Emerging Networks and Systems Intelligence

receiver turns the signal from analog to digital, and 
demodulates it into a corresponding code sequence. Since 
the receiver needs to identify the intended sequence code 
among all received signals, the demodulated code 
sequence is connected to three parallel correlators to 
calculate with each assigned code. Figure 4(b) depicts 
conceptual block chart on correlation decoding processes 
in the robot side. The output correlation passes through a 
peak detector to estimate the time of flight from 
transceiver to the robot. The robot then evaluates its 
current position by measuring time difference of arrival 
(TDOA) among the three transceiver paths.  
 
 
 
Figure 4. Block chart for robot positioning system; (a). Signals coding in 
transceivers; (b). Correlation acquisitions in the robot.  
With regard to the block diagram of Figure 4 for robot 
positioning system, we will give detailed descriptions on 
codes correlation acquisition/detection, acquisition time 
difference and time error, and relative distance/locations 
determination of robot object in the following subsections.  
 
A. Code acquisition with correlation detection  
After the transmission signals transmit to the receiver, 
the received signals have a transmission time delay so that 
the received signals are not synchronous with the replica 
signal. Therefore, how to capture the relative signal and 
ignore the interference is the main course. We provide 
solutions to overcome the interference and improve the 
accuracy in the following sections. 
For code acquisition, we note that the correlation 
characterizations of the assigned composite codes are 
related with their code weights. If code vectors TiC1(X) 
and TjC2(X) have the respective code weights w1 and w2, 
then composite code C(i,j)(X) = TiC1(X)  ⊕ TjC2(X) 
possesses the following code weights  
W(𝐶(𝑖,𝑗)) = 𝑤1(𝑛2 − 𝑤2) + 𝑤2(𝑛1 − 𝑤1)           (4)                      
=
{  
  
𝑛1(𝑛2+1)
2
,                𝑖𝑓 𝑤1 = 0,   𝑤2 = (𝑛2 + 1)/2.
𝑛2(𝑛1+1)
2
,               𝑖𝑓 𝑤1 = (𝑛1 + 1)/2,   𝑤2 = 0.
(𝑛1𝑛2−1)
2
,   𝑖𝑓 𝑤1 = (𝑛1 + 1)/2,   𝑤2 = (𝑛2 + 1)/2.
  (5) 
Here, we have taken advantage that a binary (nl =2ml-1, 
kl = ml) M-sequence code has all of its nl nonzero code 
vectors the same code weight of (nl+1)/2 = 2ml-1. 
Corresponding to the weight distribution of (5), the 
periodic correlation between composite codes 𝐶𝑢
(𝑖𝑢,𝑗𝑢) and 
𝐶𝑣
(𝑖𝑣,𝑗𝑣) can be derived to be  
𝜃𝑢,𝑣 = {
(
𝑛1𝑛2−1
2
) , 𝑖𝑓 𝑢 = 𝑣
(
𝑛1𝑛2−𝑛2−2
4
) , (
𝑛1𝑛2−𝑛1−2
4
) , (
𝑛1𝑛2−1
4
) , 𝑖𝑓 𝑢 ≠ 𝑣
     (6) 
From the above correlations distribution of (6), we see 
that correlations between reference transceiver and 
interfering transceivers can be separated by correlation 
operation to track the desired transceiver sequences. 
When the robot receives the incoming ultrasonic 
signals the receiver demodulates the received signals and 
performs correlation operations between the demodulated 
PN sequences and the replica signals stored in the 
correlators. The correlation computation will offer codes 
acquisition information on the periodic correlation peaks, 
and the receiver calculates the delay time and the codes 
acquisition error accordingly. Figure 5 illustrates the 
possible correlation spectra for composite signal sequence 
been acquired with M-sequence component codes 
C1(X)=U(X) and C2(X)=V(X). Here we take as example the 
composite signal sequence of period length n1.n2=21 and 
component M-sequences C1(X) and C2(X) of period 
lengths n1=3 and n2=7. These code sequences will 
respectively be assigned to the corner transceivers and the 
central robot.  
 
Figure 5. Correlation spectra to illustrate time span for the worst and  
22
Copyright (c) IARIA, 2015.     ISBN:  978-1-61208-422-0
EMERGING 2015 : The Seventh International Conference on Emerging Networks and Systems Intelligence

the best code acquisitions.  
The robot receiver carries out correlation operations 
between received PN sequence and local M-sequence 
C1(X); and in parallel, the robot receiver carries out 
correlations between received PN sequence and local M-
sequence C2(X). If no correlation peak occurred in either 
operation, the corresponding local code will advance one 
chip to another code pattern to continue its correlation 
computation. On the other hand, if an individual low-level 
correlation peak occurred, the local code will advance one 
period cycle of the current code pattern to continue its 
correlation computation. This process will continue until a 
high-level common correlation peak is obtained. The local 
codes in the robot will keep continuing their code 
sequences advancement for upto three to five common 
period lengths (3~5 frames) to confirm the final code 
acquisition status.   
 
B. Code acquisition time difference and time error  
In the indoor positioning environment, transmission 
signals interfere with each other. Every transceiver has 
different code sequence. In order to capture the relative 
code sequence to confirm the received signal which the 
transceiver transmitted. We determine the time between 
two adjacent peaks interval whether the corresponding 
transmission signal. If the time interval satisfies the 
correlation characteristic of the relative signal, we use this 
signal to calculate the time of flight and the time error of 
code acquisition.  
On advancing code chips for correlation peaks, instant 
time ta in Figure 5 depicts the worst case of code 
acquisition in which twenty-chip advancement is needed 
to reach an initial common correlation peak. Apparently, 
the common correlation peak is not captured very soon by 
the peak detector so that the time span of code acquisition 
takes much longer. On the other hand, instant time tb in 
Figure 5 depicts the best case of code acquisition in which 
only one-chip advancement will reach the initial common 
correlation peak. In this case, the common correlation peak 
can be quickly captured by the peak detector so that the 
span time of code acquisition is significantly shortened.  
A flow chart for the above correlation acquisition 
processes is as shown in Figure 6. Received summed 
sequence of period 21 is parallelly correlated with local 
PN sequences of period lengths 3 and 7. If not getting a 
correlation peak in either correlator, implies unmatched 
local and received sequence codes, one-chip relative shift 
is advanced and correlation magnitude is again calculated. 
But if a correlation peak is obtained in either correlator, 
matched local and received sequence codes is assumed, 3- 
or 7-chips relative shift is advanced and correlation 
magnitude is again calculated. The processes continue 
until a highest correlation peak occurs at the common code 
frame length of 21 chips. From then on, further 
confirmation of high peak correlation over 3~5 code 
frames will assure a complete code acquisition.  
 
Figure 6. Flow chart for composite PN codes’ correlation acquisitions.  
In actual, codes correlation acquisition are not 
necessarily in the best or the worst acquired time, but may 
fall in the possible instant between the two extremes. 
Therefore, we will use probability distribution to analyze 
the possible cases to estimate the average of the time spent. 
We will further take the average of the time span to 
improve the indoor positioning accuracy. In the proposed 
positioning system, the main impact factor is the 
correlation characteristics of the composite PN sequence 
codes because the codes periods are not in symmetrical 
lengths. The time of flight between indoor transmitters and 
robot receiver are measured from the time instant the 
ultrasonic signals been emitted from corner transceivers to 
the time instant the acquisition peak detection been 
confirmed at the robot.  
The time error of code acquisition is caused by the 
system that spends time searching for the relative sequence. 
Because the sequence is not sure to fall in the best or the 
worst acquired time so we need to calculate this acquired 
time to estimate the time error of code acquisition. We 
assume the time error of code acquisition about 2~3 code 
cycle lengths. Therefore, every signal has a different time 
error of code acquisition because of different code length. 
For example, the M-sequence code length n1=31 spends 
about 62~93 bits shift time to capture the signal and the 
composite code n2=3×7 spends about 42~63 bits shift 
time to capture the signal. In our positioning method, we 
use these values of the time error of code acquisition to 
enhance our indoor positioning accuracy.  
 
23
Copyright (c) IARIA, 2015.     ISBN:  978-1-61208-422-0
EMERGING 2015 : The Seventh International Conference on Emerging Networks and Systems Intelligence

C. Determine the position of the robot receiver  
In order to obtain the position of the robot, the range 
measurement is acquired by TDOA of the ultrasonic 
signals of the transceivers. The TDOA will be biased by 
the time error of code acquisition that can degrade the 
positioning estimate. Therefore, the time error of code 
acquisition needs included in the calculation. Figure 7 is 
taken to illustrate three transceivers functions in 
expression (7) below to locate the position of an object 
receiver.  
 
Figure 7. Overviews of TDOA evaluation.  
Assume that, r1, r2 and r3 are the estimated time of 
flight obtained from the number of frame peak between 
local and received code sequences. Once we get these 
estimates, we subtract them to each other to obtain T12, 
T13, and T23. We then substitute these flight time 
differences into (7) to solve the TDOA:  
𝑑𝑖𝑗 = 𝑐 ∗ (∆𝑇𝑖𝑗 + 𝑒𝑖𝑗),    where 𝑖 ≠ 𝑗                        
= √(𝑥𝑖 − 𝑥)2 + (𝑦𝑖 − 𝑦)2 − √(𝑥𝑗 − 𝑥)
2 + (𝑦𝑗 − 𝑦)
2    (7) 
where (x, y), (xi, yi) and (xj, yj) are respectively the real and 
the estimated position of robot receiver to the i-th and j-th 
transceiver, i,j = 1, 2, 3; dij are the value of TDOA; c is the 
ultrasonic wave speed; ∆Tij is time difference measured by 
code acquisitions; and eij is the value of the time error of 
code acquisition to subtract with each other. The equations 
above represent hyperbolas, and their intersection gives 
the estimated positioning of the receiver.  
The solution of equation derived a wide variety of 
algorithms because finding the solution is not easy as the 
equations are nonlinear. There are many methods to solve 
equations in this research problem. One direct solving 
method is Taylor-series method (TSA). It is the 
simplifying method, but the solutions are not divergent or 
converge toward a local suboptimal result if the unsuitable 
initial point was given. Fang Algorithm (Fang), Chan 
Algorithm (Chan), and Total Least Squares Algorithm 
(LTS) provides better performance than TSA. In order to 
optimize location result, evolution computing techniques 
will be applied to this working. Evolution computing 
techniques are based on principles of biological evolution, 
such as natural selection and genetic inheritance, such as 
Genetic Algorithm (GA), Particle Swarm Optimization 
(PSO), and Artificial Bee Colony algorithm (ABC).  
 
IV. NUMERICAL SIMULATION RESULTS  
In order to analyze the positioning accuracy between 
traditional M-sequence code and composite M-code which 
we proposed, we use M-sequence code length n1=31 and 
composite code length n2=3×7 to simulate. The robot was 
placed in the coordinate (x=3m, y=3m and z=0m). The 
three transceivers are located at three corners (x=0m, 
y=0m and z=5m) (x=0m, y=10m and z=5m) and (x=8m, 
y=0m and z=5m), in the numerical simulation, we assume 
the robot on the ground so we don’t consider the z-axis. 
Transceiver #1 is assigned with composite codes (T0C1⊕
C2) = (1, 1, 0, …) ⊕ (1, 1, 1, 0, 0, 1, 0, …), transceiver #2 
assigned with signature codes (T1C1⊕C2) = (0, 1, 1, …) ⊕
(1, 1, 1, 0, 0, 1, 0, …), and transceiver #3 assigned with 
signature codes (T2C1⊕C2) = (1, 0, 1, …) ⊕ (1, 1, 1, 0, 0, 
1, 0, …).  
  
Figure 8. Correlations of composite signal with component signature 
codes; (a). with M-sequence code C1 = (1,1,0); (b). with M-sequence 
code C2 = (1,1,1,0,0,1,0).  
Figure 8 illustrates the receiver performs the 
correlation operation with transceivers #1. The periodicity 
of Figure 8(a) is 3 bits shift and the periodicity of Figure 
8(b) is 7 bits shift, therefore their common periodicity is 
21 bits shift. From Figure 8, the first red line is the first 
common peak of code acquisition, which will change with 
the first incoming frame because the order of frame may 
not be C1 = (1, 1, 0). Therefore, the receiver will search for 
24
Copyright (c) IARIA, 2015.     ISBN:  978-1-61208-422-0
EMERGING 2015 : The Seventh International Conference on Emerging Networks and Systems Intelligence

next common peak by common periodicity 21 bits shift to 
capture their relative signals. These time spent are the 
error time of code acquisition. Once the receiver captures 
the peaks completely, the receiver estimates its error time 
of code acquisition of signals and time of flight.  
Figure 9 illustrates correlation operations of robot 
receiver with transceivers #1-#3 on the relative composite 
codes. The cycle of peak is 21 bits shift as shown in Figure 
9. The different numbers of cycle is caused by the different 
distance between the receiver and transceivers. We use 
these data to estimate the numbers of cycle, and calculate 
the time of flight and the error of code acquisition.  
  
Figure 9. Robot correlation operations with transceivers; (a). with 
transceiver #1 on composite codes (T0C1⊕C2); (b). with transceiver #2  
on codes (T1C1⊕C2); (c). with transceiver #3 on codes (T2C1⊕C2).  
Table II shows estimates of time of flight and robot 
distance to the three transceivers. Through calculating the 
number of frame peak between local code and received 
sequence, we estimate the time of flight and then the 
distance between transceivers and the robot. The estimated 
position errors are not over 10-cm, thus achieves our goal 
on enhancing indoor robot positioning accuracy. 
TABLE II. ESTIMATE OF THE DISTANCE BETWEEN 
TRANSCEIVERS AND THE ROBOT.  
 
For comparison, we assign the central robot and the 
corner transceivers with comparative M-sequence codes of 
period length n=31. Figure 10 gives possible correlation 
spectra on correlating received code sequence from 
transceiver #1 and local signature codes in the robot. Note 
that, with such conventional PN code sequences, two-
levels of correlation magnitude is possible and single 
branch correlator circuit can be taken for codes acquisition 
operation.  
  
Figure 10. Correlation operation with transceiver #1 on 31 bits  
M-sequence code.  
On comparing Figures 9 and 10, we find that the 
number of frame cycles of 31 bits M-sequence code is less 
than those using composite codes to do correlation 
operations at the same distance. Because of a large code 
length cycle, the receiver spends much shift time to 
capture the signal so that the error time of code acquisition 
is more than using composite code to do correlation 
operation. The mean of the distance errors is about 20 cm, 
so using composite code is more precise than using M-
sequence code.  
 
V. CONCLUSIONS  
 We have proposed a composite code acquisition to 
implement indoor ultrasonic robot positioning based on 
DSSS system. Each transceiver is modulated the ultrasonic 
signal with a 3×7 bits composite code, which has a 
particular auto-correlation and cross-correlation in a cycle. 
By using code acquisition the robot receiver detects the 
arrival time of codes and the error time of code acquisition, 
and the robot will use these information to determine its 
absolute location.  
 By comparing our solution with traditional M-
sequence code, we find that composite codes behave more 
advantages. First, the code length is more flexible, it is not 
limited by 2m-1. Second, other robot users are difficult to 
acquire the location of the designated robot because the 
code combination is more complex. Third, under the same 
location distance, the positioning accuracy and the code 
acquisition time-error are more precise with composite 
coding than the conventional M-sequence coding. This is 
25
Copyright (c) IARIA, 2015.     ISBN:  978-1-61208-422-0
EMERGING 2015 : The Seventh International Conference on Emerging Networks and Systems Intelligence

because correlation acquisition takes more cycles than that 
using pure M-sequence codes.  
 
REFERENCES 
[1] 
P. C. Chen, “A non-line-of-sight error mitigation 
algorithm in location estimation,” Proc. IEEE Wireless 
Communications and Networking Conference, Sept. 1999, 
vol. 1, pp. 316-320.  
[2] 
S. Al. Jazzar, J. Caffery, and H. R. You, “A scattering 
model based approach to NLOS mitigation in TOA 
location systems,” Proc. IEEE Vehicular Technology 
Conference, May, 2002, vol. 2, pp. 861-865.  
[3] 
Aatique, Muhammad, “Evaluation of TDOA techniques 
for position location in CDMA systems,” Diss., Virginia 
Polytechnic Institute and State University, 1997.  
[4] 
K. Sanhae, L. Jungwoo, Y. Myungsik, and S. Yoan, "An 
improved TDoA-based tracking algorithm in mobile-
WiMAX systems," 20th IEEE International Symposium 
on Personal, Indoor and Mobile Radio Communications, 
Sept. 13-16, 2009, pp. 561-565.  
[5] 
J. K. Werner and B. Markus, “Using Pseudo-random 
Codes for Mobile Robot Sonar Sensing,” the 3rd IFAC 
Symposium on Intelligent Autonomous Vehicles (IAV’98), 
Madrid, Spain, March 25-27, 1998, pp. 231-236.  
[6] 
A. Heale and L. Kleeman, “A Sonar Sensing with Random 
Double Pulse Coding,” Australian Conference on Robotics 
and Automation, Melbourne, Australia, Aug. 30 – Sept. 1, 
2000, pp. 81-86.  
[7] 
J. M. illadangos, J. Urena, M. Mazo, A. Hernandez, F. 
Alvarez, J. J. Garcia, C. De Marziani, and D. Alonso, 
“Improvement of ultrasonic beacon-based local position 
system using multi-access techniques.” IEEE International 
Symposium on Intelligent Signal Processing (WISP 2005), 
Algarve, Portugal, Sept. 1-3, 2005, pp.352-357.  
[8] 
M. C. Pérez et al., "Ultrasonic beacon-based Local 
Positioning System using Loosely Synchronous codes," 
IEEE International Symposium on Intelligent Signal 
Processing, (WISP 2007), October, 2007, vol. 1, no. 6, pp. 
3-5.  
[9] 
M. C. Pérez, J. Urena, A. Hernández, C. De Marziani, A. 
Jimenez, J. M. Villadangos, F. Alvarez,  “Ultrasonic signal 
processing using configurable computing,” 15th Triennial 
World Congress of the International Federation of 
Automatic Control (IFAC 2002), Barcelona, 2002.  
[10] Md. Alamgir Hossain, Md. Shariful Islam, and Md. Sadek 
Ali, “Performance Analysis of Barker Code based on their 
Correlation 
Property 
in 
Multiuser 
Environment,” 
International Journal of Information Sciences and 
Techniques (IJIST), January, 2012, vol.2, no.1, pp. 27-39.  
[11] J. F. Huang, K. S. Chen, Y. C. Lin, and C. Y. Li, 
“Reconfiguring Waveguide-Gratings-based M-Signature 
Codecs to Enhance OCDMA Network Confidentiality,” 
Optics Communications, February, 2014 vol. 313C, pp. 
223-230.  
[12] G. De Angelis, G. Baruffa, and S. Cacopardi, "Parallel PN 
code acquisition for wireless positioning in CDMA 
handsets," the 5th advanced satellite multimedia systems 
conference (asma) and the 11th signal processing for 
space communications workshop (spsc), September 13-15, 
2010, pp.343-348.  
26
Copyright (c) IARIA, 2015.     ISBN:  978-1-61208-422-0
EMERGING 2015 : The Seventh International Conference on Emerging Networks and Systems Intelligence

