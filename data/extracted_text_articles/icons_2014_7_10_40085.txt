Electrical Adjustable Beds Testing Automation to Identify Mechanical and 
Electrical Defects 
 
Mohamed M. El Rayes 
Research and Development Dept. 
ECTI Co. 
6th of October City, Giza, Egypt  
mohamed-rayes@hotmail.com 
Tarek M. Tawfik 
Walden University 
Minneapolis, Minnesota, USA  
tarek@mustemail.com 
 
Tamer M. Nassef 
Computer and Software Engineering Dept. 
Misr University for Science and Technology 
6th of October City, Giza, Egypt 
tamer@ieee.org 
 
 
Abstract— Designing and tuning a system to automate testing 
and identifying both mechanical and electrical defects appears 
to be conceptually intuitive, but can be hard in practice, if 
multiple objectives are to be achieved. This paper addresses 
the design of a system to detect the main design and industrial 
problems and to test reliability on an adjustable bed. The test 
can be processed with different types of data on multiple 
configurations that will allow tracing backward the exact 
actions, which the tester performed to the point, where the bug 
was discovered.  
Keywords—adjustable beds testing automation; electrical 
testing; mecanichal faults detection; Actuator testing. 
I. 
INTRODUCTION 
Traditional mechanical and electrical testing methods are 
performed by utilizing electrical and mechanical measuring 
devices and require the tester to be physically present to 
analyze the captured data [1]. Recently some studies 
especially in bioengineering field are using electrical sensors 
to build automated systems, these systems are used to 
increase computational analysis accuracy by processing the 
medical, biological, chemical, electrical, and materials 
information with both hardware and software sensory setup 
for their studies [2, 3] and other studies are using only 
numerical methods to test and evaluate the mechanical 
information of an artificial organs and implants with 
software based on biomechanical theories [4, 5]. Both of 
these methods can be merged to test and evaluate a realistic 
product based on electrical and mechanical theories. 
The purpose of this study is to reduce the human factor in 
testing and design a tool to automate testing and to identify 
mechanical and electrical defects in the adjustable bed by 
analyzing the recorded data of the motor electrical 
measurements, where most of other methods are based on 
semi-automated tool that cannot ignore the human factor. 
This tool allows to record and playback manual tests as 
the playback allows us to reproduce bugs. This test can be 
run with different types of data on multiple configurations 
and then we can trace backward the exact actions that the 
tester performed to the point where the problem was 
discovered. The tool can record also many test cases 
separately and rerun them according to the need to regression 
test a specific part or function of the mechanical system. This 
system combines software and hardware systems to provide 
a fully automated test. The testing system includes an 
automatic wireless control unit, voltage and current 
measurement for motors in the actuator and video/audio 
recording. The tool supports care and feeding of regression 
tests by the ability to automate a test and repeat it 
indefinitely according to the input change and automatically 
verify the test results and compare it to the expected results 
[6].  
Test 
automation 
guarantees 
sustainability 
in 
the 
regression testing process which accelerates bugs and error 
detection. Mechanical problems appear as changes in the 
actuator motors current, so if we can measure the current 
passing in the motors with high speed, we can identify the 
locations of mechanical faults. Mechanical designers are 
interested in analyzing the dynamics of moving parts during 
the test and hear the noise coming out of them, which can 
indicate problems in the product. These operations must be 
synchronized precisely and do not take much of the 
computer resources. To automate the whole process, the 
wireless control unit must be under control of the software. 
A device was designed to simulate human presses on control 
unit buttons and that device can be configured through a 
USB interface and store that configuration during the test to 
minimize required computer resources. The following 
sections will give a quick description of the system and its 
specifications. 
An adjustable bed as shown in Fig. 1 refers to the 
"superstructure" or underlying support base for a sleep 
surface. The mattress rests on the adjustable bed, just like it 
would on top of a foundation. 
 
123
Copyright (c) IARIA, 2014.     ISBN:  978-1-61208-319-3
ICONS 2014 : The Ninth International Conference on Systems

 
Figure 1.  Adjustable Bed 
Adjustable beds typically feature a lever system that 
allows for adjustable movement at the head and foot. The 
bed 
is 
segmented 
into 
three 
portions 
that 
move 
independently 
to 
accommodate 
individual 
sleeping 
preferences. The head & foot portions should be able to 
achieve an incline of 65 degrees to the head section and 45 
degrees to the foot section.  The Adjustable bed is equipment 
with a remote control with 6 buttons to adjust the required 
bed position as shown in the following figures. 
 
 
Figure 2.  Adjustable Bed Remote Control 
 
Shown below is the mechanical functions related to the 
numbering of the remote control in Fig. 2. 
 
1: Head Up 
2: Head Down 
3: Leg Up 
4: Leg Down 
5: Both Up 
6: Both Down 
 
II. 
MATERIALS AND METHODS 
A. SYSTEM HARDWARE 
The hardware consists of three modules, first ones is used 
for activating buttons of the wireless control unit with a pre-
defined sequence and uses low current and no mechanical 
parts. The second is a current sensing circuit that produces a 
voltage proportional to the current flowing in the actuator. It 
also includes a voltage divider to enable voltage measuring, 
and the third module is a multi-channel A/D converter that 
has a Universal Serial Bus (USB) interface. It can take up to 
100 readings per second for both current and voltage and 
angular position feedback, which is enough to detect any 
mechanical or electrical errors. All these modules are under 
control of a Personal Computer (PC) application that 
configures and stores all that data and synchronizes them 
with the video and audio recording. The software has 
functions to display the data and analyze them. 
1) First Module: Automatic Remote Control Unit 
This device consists of an MCU, which has an embedded 
USB transceiver, transistor switches to simulate buttons of 
the control unit and other components required for the circuit 
operation. It connects to the wireless control unit directly and 
the user can disconnect it and use the wireless control unit as 
an ordinary remote control. 
The USB transceiver in the MCU is configured to operate 
at full speed (USB 2.0) and the connection is accomplished 
using HID USB protocol [7]; it provides easy and fast 
communication between the MCU and the PC. The software 
sends orders to the MCU, which always checks the received 
data while being connected to the PC. The MCU reads the 
configuration from the software and stores them in its 
EEPROM to avoid reconfiguration if the device is turned off. 
The configuration contains a sequence of button functions 
with different pressing time and delays between them and the 
number of cycles (number of repetition to that sequence). 
The MCU stores the number of completed cycles in its 
EEPROM every 20 cycles to prevent data loss in long tests if 
the power goes down. 
TABLE I.  
COMMANDS USED TO CONTROL THE MCU OF THE FIRST 
MODULE 
Command 
Effect 
Start 
Starts the test sequence 
Stop 
Stops the test sequence 
Read Sequence 
Reads the saved sequence and the current step 
Button 
Pressed 
Time 
Sets the time of pressing a single button in manual 
control mode 
 Continue 
Resumes the stopped sequence 
Restart  Current 
Sequence 
Restarts the current sequence. It does not affect the 
cycle  
Disconnect and 
Save  
Disconnects the device from the PC and saves 
sequence to EEPROM 
Set Cycles 
Sets the cycles number 
Reset 
All 
Operations 
Restarts the sequence and resets the cycles counter. 
Read 
Saved 
Cycle Counter 
Read the cycles counter saved in the EEPROM 
Press a Button 
Press one of the six buttons in the remote control 
unit (manual control) 
. 
To simulate the six buttons on the control unit, we need 
six transistor switches [8]. The used transistors are MOSFET 
transistors which are turned on by the MCU. Bipolar 
transistors can be used, but MOSFET ones almost do not 
draw current form the MCU, so they save power. The idea is 
that transistor drain-to-source impedance is low when it is in 
the on mode and very high in the off mode, so it simulates 
the buttonsoperation sequence very well. 
 
124
Copyright (c) IARIA, 2014.     ISBN:  978-1-61208-319-3
ICONS 2014 : The Ninth International Conference on Systems

 
Figure 3.  Circuit Diagram for the first module. 
2) Second Module: Current and Voltage sensing 
The main function of this module is to condition the 
analog signals to be measured by other digital device, by 
converting these signals to suitable forms. 
 
 
Figure 4.  High-current sensing solution using an operational amplifier. 
Current sensing circuit is simply a current to voltage 
converter. As A/D converters accept analog voltage only as 
an input, we have to convert the current to voltage with 
proper value. 
The circuit topology is easy and familial [9]. The Op-
Amp is rail-to-rail input/output type. The values of the 
resistors are selected to provide an output, which will not 
exceed 5V for our application that has a maximum 
continuous current of 3 amperes. This value will enable us to 
use the embedded A/D converter in the MCU. The Op-Amp 
is selected to have a fast response to make sure that the 
output will quickly settle at the right value. The current 
passes through the transistor and is controlled by the Op-
Amp which is converted to a voltage value by a resistor. 
Voltage sensing is easier than current sensing in general. 
In our application, the maximum allowed voltage is 30V, so 
the values of the voltage divider resistors are selected to 
provide a maximum of 5V at the output when the input is 
30V. The resistors values should be high to minimize power 
dissipation in the resistors. 
3) Third Module: High Speed Multichannel A/D 
Converter with USB interface 
The third device consists of two low-cost MCUs 
operating at their maximum speed (48MHz). The first MCU 
is responsible for converting the analog signals to digital 
ones. For our application, we just need four A/D channels for 
our application, but there is one additional channel at the 
circuit for future use. The second MCU is responsible for 
USB communication. The device uses the USB HID 
protocol and it is optimized to send short reports at the 
maximum available speed. 
The first two input channels are used for current and 
voltage sensing. The other two input channels are used for 
angular position feedback. It is critical to monitor the angular 
position of head and foot part of the bedduring the test to 
determine the effect of each test profile on the specified 
angle. The job is simply done by using two low cost 
potentiometers fixed on the axes of the moving parts. The 
outputs of these potentiometers are connected to the channels 
three and four of the A/D converter. 
The communication between the two MCUs is done 
through a non-standard parallel connection optimized to 
guarantee maximum data transfer rate. 
This configuration allows fast and reliable measuring of 
the current and voltage values. 
 
 
Figure 5.  Circuit Diagram for the third module PCB. 
B.  SYSTEM SOFTWARE 
The testing software contains all the features we need for 
various tests in one package. The program was written using 
C# programming language.The first section is the automatic 
remote control with its configuration, controls and readings 
of the stored data. The table in the middle of the user 
interface window is used to enter the required sequence of 
buttons. The same table is used for reading the stored 
sequence in the device and indicating the current step. The 
buttons on the left, as shown in Fig. 6, are used to manually 
press a button on the wireless control unit through the 
software. There are other fields to configure the button 
pressing time and the required number of cycles and reading 
the current number of cycles. 
125
Copyright (c) IARIA, 2014.     ISBN:  978-1-61208-319-3
ICONS 2014 : The Ninth International Conference on Systems

The second section contains the controls of the available 
tests. The tests are: running the testing sequence only, 
current and voltage measuring and video and audio 
recording. The user can choose one or more of these tests 
and click on the start button and program will send orders to 
all required devices using USB HID protocol [10] (except 
the camera and the microphone) and return error message if 
any device is not connected or has a problem. The other 
control buttons are stop, resume, restart or reset the test. The 
outputs of the program are stored into an AVI extension for 
video and audio and TXT files for current and voltage 
measurements. 
The challenging and most important things in this section 
are timing, synchronization and computer processor 
utilization. The application uses the multi-threading concept 
to provide fast and efficient processor power utilization. The 
software was carefully designed to make sure that the tests 
are running simultaneously and their data are recorded with 
precise timing. Tests data are saved to output files every 10 
minutes to allow easy review. 
An especial test that will help in the review process is the 
live measuring test. It gives order to the required button and 
measures the current in the actuator while graphing the 
received data on the screen. This can help the testing 
engineer to see the motion of the tested part and the current 
of the motor at the same time, so detecting mechanical errors 
may become easier with this tool. 
 
 
Figure 6.  GUI of the computer application. 
The program contains a special section for reviewing the 
tests data. The program reads the output current and voltage 
value and graphs them with high resolution, which can be 
adjusted to show more details if required. It detects the 
beginning and ending of every actuator stroke and calculates 
the time elapsed during each stroke and shows it in the 
graph. It can calculate the average of current or voltage 
values during a specific time. 
III. 
RESULTS 
Examples of mechanical and electrical problems that can 
be detected are: 
 
Mechanical Misalignment of assembled parts. 
 
Linear guides Surfaces defects. 
 
Actuator Gear reduction system mechanical 
defects. 
 
Actuator motor Armature-related anomalies 
which can include commutator bar defects, riser 
defects and shorted turns or coils in the armature 
circuit 
 
Figure 7.  Current Curve Diagram 
The above diagram shows the DC Current versus time 
curve concerning the Actuator motor measurements to the 
leg movement section of the adjustable bed, the bed leg bend 
to 45 degrees over an average time of 15 seconds. 
By visually analyzing the curve pattern, we can diagnose 
the mechanical and electrical defects to the adjustable bed 
shown in Fig. 7 as follows: 
a) at t=1 the curve spike to near 4 A which is 
considered a normal behavior to the peak in 
rush/peak starting current of a brushless DC motor 
which typically will be a function of circuit 
resistance and power resource. 
b) The ascending pattern of the curve indicates the load 
variations with regard to the angular position of the 
adjustable bed foot section which is also considered 
a normal behavior. 
c) At t=6 there is a sudden spike in the current 
consumption which is an unusual behavior indicating 
a mechanical defect. By mechanically analyzing the 
defect at the given point of time we found that this 
was caused by a defect in surface geometry in the 
linear actuator bracket. 
d) From t= 12.5 until the end of the cycle there is a 
disturbed pattern in the curve, we found that there is 
a problem in the linear guide which gives the bed the 
wall hugger capability which slides the bed toward 
the wall, leaving the bed close to nightstand. 
126
Copyright (c) IARIA, 2014.     ISBN:  978-1-61208-319-3
ICONS 2014 : The Ninth International Conference on Systems

IV. 
CONCLUSION 
The use of data-driven automation approaches and 
frameworks further increases testing efficiency and can 
underpin effective configuration testing [11]. This tool is 
useful in various mechanical systems that uses a DC motor 
actuator as it support automated testing which serve in 
estimating product reliability, analyze current and voltage 
curves to diagnose mechanical and electrical defects, 
perform aging tests on different operational profiles, perform 
regression testing by reproducing defects at any given time 
or mechanical position, perform usability and load testing. 
Test automation can accelerate the testing cycle and promote 
product quality. Testing automation gave us a guarantee that 
each test case is always executed in the same way and in the 
same environment. When executing a test case manually, 
some steps could be missed, or intentionally omitted. This 
can result in not only missing some defects, but also can lead 
to reporting invalid defect which can result in not only 
missing some defects, but also can lead to reporting invalid 
defect. 
 
REFERENCES 
[1] N. Petschenik, System Testing with an Attitude, Dorset 
House, Chapter 2, March 2004, ISBN-13: 978-0932633460. 
[2] M. Tayel, S. A. Elaskary, and T. M. Nassef, “A Bio-Sensory 
System for Increase Implant Longevity for Occlusal 
Analysis,” Proc. Advances in Computational Tools for 
Engineering Applications (ACTEA 12), IEEE Press, Dec. 
2012, pp. 07-10, doi: 10.1109/ICTEA.2012.6462908. 
[3] T. M. Nassef, M. B. Tayel, and S. A. Elaskary, “A Proposed 
Sensory Setup to Increase Computational Analysis Accuracy 
for 
Dental 
Applications,” 
Proc. 
Computer 
Medical 
Applications (ICCMA 13), IEEE Press, Jan. 2013, pp. 01-06, 
doi: 10.1109/ICCMA.2013.6506145. 
[4] L. A. Shinawi, A. Al-Dharrab, T. M. Nassef, and S. B. Tayel, 
“A novel computational analysis of computer milled 
zirconium implant abutment head design under reinforced 
implant supported overdenture,” Proc. Computer Medical 
Applications (ICCMA 13), IEEE Press, Jan. 2013, pp. 01-10, 
doi: 10.1109/ICCMA.2013.6506144. 
[5] Y. M. Alkhiary, T. M. Nassef, I. A. Yassine, S. B. Tayel, and 
A. E. Kh. Ezzat, “A New Numerical Model to Analyze Stress 
Distribution of TMJ Disc from 2-D MRI Scans,” Advances in 
Computing, vol. 02, no. 05, Dec. 2012, pp. 66-77, doi: 
10.5923/j.ac.20120205.01. 
[6] N. Garg, Test Automation using HP Unified Functional 
Testing, 1st ed., Chapter 4, AdactIn Group Pty Limited, 
August 2013, ISBN-13: 978-0992293505. 
[7] Compaq Computer Corporation, Hewlett-Packard Company, 
Intel Corporation, Lucent Technologies Inc., Microsoft 
Corporation, NEC Corporation, and Koninklijke Philips 
Electronics N.V., Universal Serial Bus Revision 2.0 
Specification, April 2000. 
[8] A. S. Sedra and K. C. Smith, Microelectronic Circuits, 6th 
ed., 
Oxford 
University 
Press, 
2009, 
ISBN-13: 978-
0195323030. 
[9] N. Zhao, W. Liao, and H. Sino, “High-Side Current Sensing: 
Three Solutions,” Analog Dialogue, vol. 44, no. 4, Dec. 2010, 
pp. 15-19, ISSN: 0161-3626, ©Analog Devices, Inc., 2011. 
[10] F. L. Fischer, “Open source HID USB driver for C#,” 
Aug.2007, 
<http://www.florianleitner.de/index.php/category/csharp/>,  
retrieved: Jan. 2014. 
[11] J. Kent, “Generation of Automated Test Programs Using 
System Models,” Proc. Quality Week, 1999, [7th European 
conference on Software Testing Analysis & Review took 
place at the Intercontinental Hotel in Barcelona, Spain, 8-
12  November 1999]. 
 
 
 
127
Copyright (c) IARIA, 2014.     ISBN:  978-1-61208-319-3
ICONS 2014 : The Ninth International Conference on Systems

