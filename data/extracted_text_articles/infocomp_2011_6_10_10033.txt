Augmented Reality for
Urban Simulation Visualization
Vincent Heuveline, Sebastian Ritterbusch, Staffan Ronnås
Engineering Mathematics and Computing Lab (EMCL)
Karlsruhe Institute of Technology (KIT)
Karlsruhe, Germany
{vincent.heuveline, sebastian.ritterbusch, staffan.ronnas}@kit.edu
Abstract—Visualizations of large simulations are not only
computationally intensive but also difﬁcult for the viewer to
interpret, due to the huge amount of data to be processed.
The case of urban wind ﬂow simulations proves the beneﬁts
of mobile Augmented Reality visualizations, both in terms
of selection of data relevant to the user and facilitated and
comprehensible access to simulation results. This is achieved
by a novel visualization method, presenting simulations based
on current city model data correctly localized in real-world
images.
Keywords-Scientiﬁc Visualization; Augmented Reality; Nu-
merical Simulation; Urban Airﬂow; Geographical Information
Systems (GIS).
I. INTRODUCTION
The development of scientiﬁc computing including nu-
merical simulation and interactive 3D visualization has today
become an essential tool in many applications including in-
dustrial design, studies of the environment and meteorology,
and medical engineering. The increasing performance of
computers has played an important role for the applicability
of numerical simulation but has also led to a data explosion.
At present, the use of simulation software and the inter-
pretation of visualization results usually require dedicated
expertise. The large amount of data available leads to two
problems for the end-user, which are discussed in this paper.
On the one hand, handling and selection of the appropriate
data requires a suitable user interface. On the other hand,
the amount of perceptible information is limited, and thus
visualizations of large data sets need very intuitive methods
to be understandable.
Geographical Information Systems (GIS) are playing an
increasing role for urban planning [1]. Their improved ac-
curacy joined with the increasing performance of computing
systems are making accurate large scale urban simulations
feasible. In this paper we present the results of the joint work
with the city council of Karlsruhe for simulations in an urban
environment as an illustrative example setting, with focus on
the advantages of mobile Augmented Reality visualization
of large numerical simulations. The proposed visualization
methods serves as a technology for solving problems of
large scale data visualizations. Additionally, it also open the
path to making results of numerical simulations accessible
to decision makers and to the citizen at large, both from
the technical and the comprehensional perspective. The
general availability of smartphones and tables equipped
with GPS, cameras and graphical capabilities fulﬁlls the
technical requirements on the client side for implementing
the presented visualization methods. This allows for an
intuitive exploration of large scale simulations. The ongoing
standardization process of GIS for city modeling in the
CityGML consortium [2] enable standardized simulation
and visualization services for world-wide use based on the
presented methodology in future.
The novel approach of providing scientiﬁc results on
mobile devices was developed in the Science to Go project
aiming to deliver numerical simulation on the spot.
In this paper, we present related papers and projects, and
how they relate to the proposed concept. This is followed
by the methodology of the visualization method, with details
on the needed steps of preprocessing, simulation, augmented
visualization, interaction and the server-client framework.
The text ends with the conclusion and acknowledgements
for partners and funding for the project.
II. RELATED WORK
The Touring machine [3] was one of the ﬁrst mobile
solutions for augmented reality illustrating the potential
of enhancing real life images in real-time for exploration
of the urban environment. The approach was to display
information overlays on the camera image, which is still
popular in augmented reality applications of today [4], [5].
This concept is well suited to present textual or illustrative
information, but is not directly suited for visualization of
simulation results as presented in this paper. The availability
of dedicated graphical processing units on mobile devices
have led to augmented reality visualizations of pre-deﬁned
3D objects [6] as they have been found beneﬁcial in labo-
ratory setups [7]. This is the basis for visualization of 3D
structures representing the results of simulations. The use
of augmented reality visualization for environmental data is
presented in the HYDROSYS framework [8], providing a
method to combine measurements and simulation data with
115
INFOCOMP 2011 : The First International Conference on Advanced Communications and Computation
Copyright (c) IARIA, 2011.     ISBN: 978-1-61208-161-8

geographic information. Similar to the work presented in this
paper, this framework emphasizes the need for simulation
information on-site. The conceptional need for combining
simulation results with data from geographic information
systems is also a driving force for the CityGML project [1],
which has applications to natural disaster management. The
augmented reality visualization of urban air ﬂow phenomena
in an indoor virtual reality laboratory setting based on
physical mock-up building blocks is presented in [9].
III. METHODOLOGY
The integration of scientiﬁc visualizations into real world
camera images is demanding from the perspectives of data
preprocessing, mobile device positioning and the actual
augmented reality visualization. The difﬁculties arise from
the need to combine real-world and virtual geometries
aligned with each other, and then to incorporate scientiﬁc
visualizations of results from numerical simulations in the
resulting image.
Simulating a phenomenon with a numerical method re-
quires the computational domain to be determined. In our
approach, the real world is represented by virtual city-
models, which are converted into mesh data using sophis-
ticated preprocessing techniques well known in the context
of bio-medical simulations (see e.g., [10], [11]). Based on
a mathematical model for airﬂow, a ﬁnite element CFD
simulation is then set up and run using the HiFlow3 simula-
tion software [12]. Using accurate position and orientation
of camera images based on sensor fusion techniques as
discussed and illustrated in [4], a consistent Augmented
Reality visualization of the simulation results can then be
produced.
The proposed visualization methods for interaction with
large numerical simulation on mobile devices are based on
a client-server framework where speciﬁc demands have to
be taken into consideration.
A. Preprocessing
The “3D-Stadtmodell Karlsruhe” [13] was started in 2002
as an improved database of geographic information to meet
the demands of the urban administration. It consists of
several data sets of varying purpose, coverage, accuracy
and detail, starting with a terrain model without buildings,
and including large brick models for the cityscape, up to a
photo-realistic model, as seen in Figure 1. The city model is
currently progressing towards an integration into a CityGML
[1] based representation.
Since none of the models were created for use by nu-
merical simulation software, extensive pre-processing steps
are necessary. In general two or three models have to be
combined to create a suitable computational domain, as seen
in Figure 2. Special care was necessary to deal with model
enhancements that had been made mainly for visual effects.
For instance, there were closed window planes in garages
Figure 1.
Photo-realistic building in the Karlsruhe 3D city model
Figure 2.
Computational geometry based on the Karlsruhe 3D City Model
facing the outside world on both sides with zero width,
which are very signiﬁcant for wind ﬂow simulations around
buildings. Although such irregularities could be avoided by
imposing strict conditions on the city models, in general
we cannot expect available city models to conform to these
conditions, since they were originally created for visual plan-
ning. To avoid problems arising from these kinds of artifacts,
an emphasis was put on the use of robust and performant
region growing methods that are well known from medical
applications such as for the realistic computational ﬂuid
dynamics simulations of the nose and lungs (see e.g.,[10],
[11]).
Another challenge for enabling widespread use of simu-
lation in urban environment is the non-availability of highly
accurate city models. This condition can be weakened to
the availability of high resolution models in the main areas
of interest, since widely available low accuracy models
are sufﬁcient for the necessary peripherical simulation in
the surrounding area. In spite of the varying detail of the
models, the very accurate geographic alignment offers the
opportunity for an automated data source selection and
preprocessing workﬂow.
116
INFOCOMP 2011 : The First International Conference on Advanced Communications and Computation
Copyright (c) IARIA, 2011.     ISBN: 978-1-61208-161-8

Figure 3.
Numerical simulation results of urban wind ﬂow
B. Simulation
The instationary Navier-Stokes equations are solved in a
sufﬁciently large computational domain surrounding the area
of interest with suitable artiﬁcial boundary conditions for
assumed wind ﬂow conditions. At the walls of buildings the
velocity is set to zero.
The model is formulated as an initial boundary value
problem for the velocity ⃗u (⃗x, t) and the pressure p (⃗x, t)
in Equation 1.
∂t⃗u − ν∆⃗u
+ (⃗u · ∇) ⃗u + ∇p = 0
(⃗x, t) ∈ Ω × (0, T) ,
∇ · ⃗u = 0
(⃗x, t) ∈ Ω × (0, T) ,
⃗u = ⃗uin
(⃗x, t) ∈ Γin × (0, T) ,
(−Ip + ν∇⃗u) · ⃗n = 0
(⃗x, t) ∈ Γout × (0, T) ,
⃗u = 0
(⃗x, t) ∈ Γ × (0, T) ,
⃗u (⃗x, 0) = ⃗u0 (⃗x)
⃗x ∈ Ω .
(1)
The parameter ν in this model is the kinematic viscosity,
which is assumed to be constant over the entire domain. An
artiﬁcially high value was used to keep the Reynolds number
small for the computations that are illustrated in Figure 3.
The visualization is based on the open source packages VTK
[14], ParaView [15] and HiVision [16].
C. Augmented Reality Visualization
The visualization method is based on the accurate align-
ment of the viewer’s position and the orientation of his
camera view with the three-dimensional city model and the
numerical simulation. Beside the accurate localization, the
methodology of reality augmention is also of high relevance
for the comprehensibility and credibility of the visualization.
In the setup considered here only the graphics representing
the ﬂow ﬁeld are to be embedded in the real-life image,
and therefore the city model and the computational mesh
should not be visible. Yet, the simulation results that are
covered by buildings in the city model must be removed
from the image. Therefore, the occluded simulation results
Figure 4.
Masked numerical simulation visualization
Figure 5.
Enhanced augmented reality visualization
are masked by the city model, which itself remains invisible
leading to a masked visualization as displayed in Figure 4,
where the transparent areas are left black.
The masked visualization can then be composed onto the
camera view leading to the augmented numerical simulation
visualization in Figure 5, which was extended with the
computational domain for illustration. The resulting image is
very informative and gives insight into the simulation results.
Since the displayed part of the simulation coincides with the
viewer’s position, the data selection is most intuitive and the
full simulation can be explored by simply wandering around
in the computational domain.
D. Interaction and User Interface
The interaction and the user interface is crucial for
usability and comprehension. The proposed model is to
present the mobile device as a window to the Augmented
Reality and the results of the numerical simulation. This
leads to challenges as outlined in [4] that can be addressed
using sophisticated mathematical methods such as ﬁltering,
simulation and parameter identiﬁcation. Only the increasing
computing power available in modern mobile devices such
as smartphones and tablets enable the use of such costly
algorithms in real-time leading to haptic user interfaces.
The camera view in space is deﬁned by six parameters,
117
INFOCOMP 2011 : The First International Conference on Advanced Communications and Computation
Copyright (c) IARIA, 2011.     ISBN: 978-1-61208-161-8

Figure 6.
Mathematical methods enable intuitive user interfaces
the three-dimensional position and the three viewing angles.
Therefore at least six dimensions of sensor data is needed to
control the user interface. Besides GPS, the latest generation
of mobile devices contain spatial accelerometers as well as
spatial magnetometers as a minimum. Taken together, they
provide the six degrees of freedom in sensor data, enabling
a new approach to an intuitive interface, which can be im-
proved by any other additional sensors such as gyroscopes or
camera based marker detection. Figure 6 illustrates that this
step covers the real-time fusion of various sensor readings
to gain the position and orientation information that is the
basis for the Augmented Reality visualization.
Interaction with a numerical simulation consists not only
of moving around and changing the view; it is highly
desirable to also offer access to visualization parameters,
such as what quantities are displayed, the method used, and
potentially to enable changing some simulation parameters.
From the view of the user interface, the touchscreen inter-
faces of modern mobile devices offer endless possibilities
for manipulation of visualization and simulation parameters.
Another crucial issue is the interactivity that is offered to the
user: the presented visualization needs to be updated fre-
quently, but is limited by the available network bandwidth.
E. Client-Server Framework
In general, the computation of large scale simulations
and their visualizations need dedicated hardware and infras-
tructure, and is therefore traditionally only available to a
small group of experts. The proposed visualization method
overcomes this drawback by a client-server approach where
the display, data selection and user interface is on a mobile
device, but the actual simulation results and visualization
remains on a high performance server infrastructure. The
clients are connected to the visualization service on the
servers by wireless or cellular networks as illustrated in
Figure 7, which are limited by the available bandwidth. In
a direct image transport a refresh rate of several frames
per second is feasible on UMTS networks. Additional
compression methods leading to higher refresh rates using
Figure 7.
Interaction model
signiﬁcantly lower bandwidth are currently being developed
by the authors in the framework of the newly starting
European Project MobileViz in collaboration with industrial
partners.
For widespread use of the simulation and visualization
models, the necessary computing power can be provided
by a cloud service, delivering the service of simulation and
visualization on demand. The versatility and modularity of
HiFlow3 combined with the automated robust pre-processing
of 3D city models and parallelized rendering servers for
scientiﬁc visualization are the basis for a versatile and
reliable service.
IV. CONCLUSION
In this paper, we have presented a novel visualization
method for large-scale scientiﬁc computing illustrated by
the example of urban air ﬂow simulation. The use of mobile
devices opens the path to intuitive access to and interaction
with numerical simulations that are highly comprehensible
due the embedding in to the real-life camera view as Aug-
mented Reality visualizations. By this, results of numerical
simulations will be available to decision-makers and citizens,
raising the impact and improving the communication of
scientiﬁc results. The presented methods are backed by
a client-server framework and offer business models for
simulation and visualization on demand in a cloud-based
setup.
V. ACKNOWLEDGMENTS
The Karlsruhe Geometry project is a collaboration of the
Liegenschaftsamt of the city council of Karlsruhe with the
Engineering Mathematics and Computing Lab (EMCL) and
was supported by the KIT Competence Area for Informa-
tion, Communication and Organization. The development of
intuitive user interfaces for scientiﬁc applications on mobile
devices is part of the Science to Go project, which received
funding from the Apple Research & Technology Support
(ARTS) programme.
118
INFOCOMP 2011 : The First International Conference on Advanced Communications and Computation
Copyright (c) IARIA, 2011.     ISBN: 978-1-61208-161-8

REFERENCES
[1] T. Kolbe, G. Gröger, and L. Plümer, “Citygml: Interoperable
access to 3d city models,” in Geo-information for Disaster
Management, P. Oosterom, S. Zlatanova, and E. Fendel, Eds.
Springer Berlin Heidelberg, 2005, pp. 883–899, 10.1007/3-
540-27468-5_63.
[2] T. H. Kolbe, “Representing and exchanging 3d city models
with citygml,” in Proceedings of the 3rd International Work-
shop on 3D Geo-Information, Lecture Notes in Geoinforma-
tion & Cartography, J. Lee and S. Zlatanova, Eds.
Seoul,
Korea: Springer Verlag, 2009, p. 20.
[3] S. Feiner, B. MacIntyre, T. Hollerer, and A. Webster, “A
touring machine: prototyping 3d mobile augmented reality
systems for exploring the urban environment,” in Wearable
Computers, 1997. Digest of Papers., First International Sym-
posium on, oct 1997, pp. 74 –81.
[4] J. B. Gotow, K. Zienkiewicz, J. White, and D. C. Schmidt,
“Addressing challenges with augmented reality applications
on smartphones,” in MOBILWARE, 2010, pp. 129–143.
[5] D. Schmalstieg, T. Langlotz, and M. Billinghurst, “Aug-
mented reality 2.0,” in Virtual Realities, G. Brunnett, S. Co-
quillart, and G. Welch, Eds.
Springer Vienna, 2011, pp.
13–37, 10.1007/978-3-211-99178-7_2.
[6] D. Wagner, T. Pintaric, F. Ledermann, and D. Schmalstieg,
“Towards massively multi-user augmented reality on hand-
held devices,” in In Third International Conference on Per-
vasive Computing, 2005.
[7] R. Azuma, Y. Baillot, R. Behringer, S. Feiner, S. Julier, and
B. MacIntyre, “Recent advances in augmented reality,” IEEE
Computer Graphics and Applications, vol. 21, no. 6, pp. 34–
47, 2001.
[8] A. Nurminen, E. Kruijff, and E. E. Veas, “Hydrosys - a mixed
reality platform for on-site visualization of environmental
data,” in W2GIS, 2010, pp. 159–175.
[9] H. Graf, P. Santos, and A. Stork, “Augmented reality frame-
work supporting conceptual urban planning and enhancing
the awareness for environmental impact,” in Proceedings of
the 2010 Spring Simulation Multiconference, ser. SpringSim
’10.
New York, NY, USA: ACM, 2010, pp. 181:1–181:8.
[10] M. J. Krause, “Fluid Flow Simulation and Optimisation with
Lattice Boltzmann Methods on High Performance Computers:
Application to the Human Respiratory System,” Ph.D. disser-
tation, Karlsruhe Institute of Technology (KIT), Universität
Karlsruhe (TH), Kaiserstraße 12, 76131 Karlsruhe, Germany,
July 2010.
[11] K. Inthavong, J. Wen, J. Tu, and Z. Tian, “From CT Scans
to CFD Modelling - Fluid and Heat Transfer in a Realistic
Human Nasal Cavity,” Engineering Applications of Compu-
tational Fluid Mechanics, vol. 3, no. 3, pp. 321–335, 2009.
[12] H. Anzt, W. Augustin, M. Baumann, H. Bockelmann, T. Gen-
genbach, T. Hahn, V. Heuveline, E. Ketelaer, D. Lukarski,
A. Otzen, S. Ritterbusch, B. Rocker, S. Ronnås, M. Schick,
C. Subramanian, J.-P. Weiss, and F. Wilhelm, “Hiﬂow3 -
a ﬂexible and hardware-aware parallel ﬁnite element pack-
age,” in Parallel/High-Performance Object-Oriented Scientiﬁc
Computing (POOSC’10), accepted.
[13] T.
Hauenstein,
“Das
3D-Stadtmodell
Karl-
sruhe,”
in
INTERGEO,
2009.
[Online].
Available:
http://www.intergeo.de/archiv/2009/Hauenstein.pdf 29.7.2011
[14] “VTK - The Visualization Toolkit,” http://www.vtk.org/
29.7.2011.
[15] “ParaView
-
Open
Source
Scientiﬁc
Visualization,”
http://www.paraview.org/ 29.7.2011.
[16] S. Bönisch and V. Heuveline, “Advanced ﬂow visualization
with hivision,” in Reactive Flows, Diffusion and Transport,
R. e. a. Rannacher, Ed.
Springer, Berlin, 2006.
119
INFOCOMP 2011 : The First International Conference on Advanced Communications and Computation
Copyright (c) IARIA, 2011.     ISBN: 978-1-61208-161-8

