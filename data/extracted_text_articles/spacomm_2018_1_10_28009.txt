Multi-User Scheduling for Narrow Band Internet of Things
Shu-Feng Cheng∗, Hsin-An Hou†, Li-Chun Wang‡, Kai-Ten Feng§ and Jen-Yuan Hsu¶
∗‡§Department of Electrical and Computer Engineering
National Chiao Tung University, Hsinchu, Taiwan
†¶Industry and Technology Research Institute, Taiwan
∗Email: cherishu999.eed02g@g2.nctu.edu.tw
†Email: hsinan hou@itri.org.tw
‡Email: lichun@g2.nctu.edu.tw
§Email: ktfeng@mail.nctu.edu.tw
¶Email: jyhsu@itri.org.tw
Abstract—In this paper, we investigate the performance issue of
massive Internet of Things (IoT) by evaluating to what extent
the number of devices can be accommodated. We build a system
level simulator based on the 3GPP TR 45.820 Narrow-Band IoT
standard. We ﬁnd that the current First In First Out (FIFO)
approach can serve 630 devices per base station assuming that one
device can be served at a time. Then, we develop the scheduling
techniques - maximal delay tolerance and α-maximum tolerance
for a system-level performance analysis. Our experiment results
show that the proposed scheduling techniques outperform at least
2.8 times compared with the FIFO policy.
Keywords–NB-IoT; Scheduling; Resource allocation.
I.
INTRODUCTION
The Internet of Things (IoT) aims to enable all devices
(i.e., electronics, transportation, sensors and home appliances)
to communicate to each other without requiring human or com-
puter interactions. By analyzing and exchanging the collected
data from these IoT devices, various services can be integrated
and be leveraged with each other to improve user experiences.
The Fifth Generation (5G) communications systems provide
faster speed and higher capacity than current 4G systems.
Therefore, the IoT market is expected to have 30 billion
connected devices by 2025 [1].
Low-Power Wide-Area Network (LPWAN) is one of the
wireless communications for massive IoT devices. Some tech-
nologies, such as Long Range Wide Area Network (Lo-
RaWAN), Sigfox and NB-IoT are designed to support a long
range service for the devices subject to the constraint of
battery life. However, LoRaWAN and Sigfox are proprietary
product. Any non-mobile operator customers can utilize them
to deploy the private network on the unlicensed frequency
band. Therefore, these two technologies are suitable for the
uncentralized local deployment. To completely realize the
scenario of everything connected, we need the centralized
signaling control to manage the data collected by the sensor.
Therefore, the Narrowband IoT (NB-IoT), which is a cellular
IoT, is proposed by the 3rd Generation Partnership Project
(3GPP) [2]. It follows the LTE standards to design some part
of the new speciﬁcation for NB-IoT. In this way, the NB-
IoT can be integrated in the existing LTE speciﬁcations [3]
to coexist with the LTE system. The technical details tightly
related to the LTE speciﬁcations are presented by Rohde &
Schwarz [4]. In [5], the authors have evaluated and analyzed
that the NB-IoT system can provide the extended coverage of
20 dB. The device and network requirements of the NB-IoT
system are listed as follows:
•
Extreme low data rate support ∼ few kbps
•
Long delay tolerance < 10s
•
Ultra-low complexity
•
Long Battery Life > 10 years
•
Low Cost < 5 USD
•
High Cell Capacity ∼ 52k user/cell site
•
Extended Coverage link budget ∼ 164 dB Maximum
Coupling Loss (MCL)
•
Low Deployment and Operation Cost
•
Consistent and Meaningful User Experience
The authors in [6] have proposed a link-level performance
analysis with their inner loop and outer loop algorithms. How-
ever, the system-level performance have not been developed to
evaluate the NB-IoT system before we deploy it. Additionally,
the cell capacity for NB-IoT is still an open issue. Because the
feature of repetitions for data and control signaling in NB-IoT,
repeating data transmission will decrease the system capacity
and even reduce the number of served UEs.
However, the frame structure in the uplink is different from
the legacy LTE. A new Resource Unit (RU) is designed for
NB-IoT. Besides, the scheduling delay is required in the data
transmission because of the ultra-low complexity for NB-IoT
devices. It does not consider for scheduling in the LTE system.
Therefore, we build a simulation platform to estimate the total
number of scheduled NB-IoT UEs with considerations of both
repetition and multiple users subject to the latency requirement.
We propose the scheduling algorithms to observe the
impacts of performances metrics (e.g., UE number and system
throughput) among different scheduling policy. The scheduling
algorithms are brieﬂy summarized in the following.
•
Maximum delay tolerance: UE with early-transmitted
time is served ﬁrst based on the maximum delay
tolerance.
•
α-maximum tolerance: Only consider the data trans-
mission time of UEs is lower than the half of max-
imum delay tolerance. Policy is same as Maximum
delay-tolerance.
The remainder of this paper are organized as follows.
Section II presents the two-dimension multi-user scheduling
and the proposed scheduling algorithms. In Section III, we
introduce the ﬂow chart of the simulator and numerical results
are also discussed. Finally, we give our concluding remarks in
Section IV.
1
Copyright (c) IARIA, 2018.     ISBN:  978-1-61208-624-8
SPACOMM 2018 : The Tenth International Conference on Advances in Satellite and Space Communications

Figure 1. Cell architecture of NB-IoT system.
II.
TWO-DIM MULTI-USER SCHEDULING
Consider the uplink transmission of the NB-IoT system, as
shown in Figure 1. N uniformly distributed User Equipment
(UE) with one omni-direction antenna are served by a base
station. The Maximum Coupling Loss (MCL) between the
transmitter and the receiver is 164 dB for NB-IoT system,
which is 20 dB more than General Packet Radio Service
(GPRS).
The piece-wise linear model is adopted for numerical
analysis. The path loss model has been deﬁned as follows:
P(L)dB =
( −K + 10α1 log10(d/d0)
, d0 ≤ d ≤ dc
−K + 10α1 log10(dc/d0)
+ 10α2 log10(d/dc)
, d > dc
(1)
where K = 20 log10
λ
4πd0 is a constant path loss factor, d0 is
a reference distance, dc = 4πhthr
λ
is a critical distance, α1 and
α2 are the path loss exponents depending on the distance from
eNB to the speciﬁc UE. Note that ht and hr are the antenna
height of the transmitter and that of the receiver, respectively.
A. SNR-MCS Index Mapping
According to the above propagation model, the Signal-
Noise-Ratio (SNR) can be measured at the eNB. For higher
transmission efﬁciency and lower error rate, the eNB indicates
the UEs to adapt the Modulation and Coding Scheme (MCS)
index based on the corresponding Channel Quality Indicator
(CQI). However, there is no CQI reporting for NB-IoT. Thus,
we construct the SNR-to-MCS index mapping in Table I.
B. Repetitions Decision
To enhance the coverage performance, a NB-IoT system
repeats its transmitted data transmission to combat the signal
power attenuation. When the repetition number is doubled, the
data rate is halved and the coverage gain is increased by 3 dB.
Therefore, we decide the repetition number for the different
channel of each UE based on the bit error rate for BPSK or
QPSK modulation scheme. The repetition times for the data
transmission of UE k can be expressed as follows:
rk = 2
log√
2
Q−1(Pb)
√
2γk ,
(2)
where Pb is a desired target bit error rate, γk is the SNR of UE
k and Q−1(·) represents the inverse Q function. The maximum
repetition times is 2048.
TABLE I. SNR AND MCS INDEX MAPPING
Range of SNR values
MCS index
Lower limit
Upper limit
Value
-5
-4.16
0
-4.16
-3.32
1
-3.32
-2.48
2
-2.48
-1.64
3
-1.64
-0.80
4
-0.80
0.04
5
0.04
0.88
6
0.88
1.72
7
1.72
2.56
8
2.56
3.40
9
3.40
4.24
10
4.24
5.08
11
5.08
5.92
12
TABLE II. MCS INDEX AND SUBFRAME INDEX MAPPING
MCS
ISF
0
1
2
3
4
5
6
7
0
16
32
56
88
120
152
208
256
1
24
56
88
144
176
208
256
344
2
32
72 144 176
208
256
328
424
3
40 104 176 208
256
328
440
568
4
56 120 208 256
328
408
552
680
5
72 144 224 328
424
504
680
872
6
88 176 256 392
504
600
808 1000
7
104 224 328 472
584
712 1000
8
120 256 392 536
680
808
9
136 296 456 616
776
936
10
144 328 504 680
872 1000
11
176 376 584 776 1000
12
208 440 680 1000
C. Subframe Index Selection
The BS obtains the MCS index based on the SNR value.
Then, the UL data transmission time will be determined by the
MCS index and subframe index. The mapping table is listed
in Table II deﬁned in [7]. The values in the table indicate
that how many packet sizes can be transmitted subject to the
MCS and subframe index. The subframe index is selected for
the minimum value that greater than transmitted packet sizes
corresponding to the MCS index.
D. Scheduling Schemes
For evaluating the total scheduled UEs for NB-IoT sys-
tem, some scheduling algorithms are employed to allocate
the resource to the multiple UEs. We adopt the Minimum
Transmission Time (MTT) and First-In First-Out (FIFO) as
two basis of the scheduling schemes. The MTT policy means
the UEs with the minimum transmission time has higher
priority to be scheduled. The FIFO policy let the ﬁrst-arriving
UE will be able to get the best choices. Moreover, we propose
two scheduling policies with the consideration of the latency
2
Copyright (c) IARIA, 2018.     ISBN:  978-1-61208-624-8
SPACOMM 2018 : The Tenth International Conference on Advances in Satellite and Space Communications

Figure 2. User number of NB-IoT system.
Figure 3. System throughput of NB-IoT system.
requirement. According to the delay requirement, we obtain the
transmitted time point for each of UE in the buffer. As long as
the UEs be scheduled before that time point, the delay require-
ment will be satisﬁed. Therefore, we propose the maximum
delay-tolerance policy. The UE with early-transmitted time
point is served ﬁrst based on the maximum delay tolerance
(i.e., 10 sec). However, the UEs with long data transmission
time dominantly occupy the resource and decrease the system
performances of overall throughput and served user number.
To further enhance the system performances, we also propose
the improved scheduling policy called α-maximum-tolerance.
The parameter of α is determined by the ratio of the maximum
delay tolerance. Only the data transmission time of UEs lower
than the α of the maximum delay tolerance can be scheduled
to utilize the resource. We adopt these scheduling policies to
evaluate the system performance for the NB-IoT.
III.
NUMERICAL RESULTS
Figure 6 shows the ﬂow chart of our simulator. Table III
summarizes the used system parameters [8]–[10]. The UEs are
uniformly distributed in a single cell with the desired MCL
of 144dB. Only one UE can be scheduled to use the system
resource. We assume that all the resources are allocated to the
UEs without considering the control signal overhead. The traf-
ﬁc modeladopted in our simulator is the Mobile Autonomous
Figure 4. SNR CDF for different scheduling policy.
Reporting (MAR) periodic trafﬁc. The packet sizes for the
UEs are the random variable of Pareto distribution with the
shape parameter β = 1.5. The minimum and the maximum
packet sizes are 20 and 200 bytes, respectively. Additionally,
the mapping table and the channel model are mentioned in
Section II. Then, we discuss the simulation results of NB-
IoT system by using the aforementioned simulation platform.
Figure 2 shows the average total number of served UE
for MTT, FIFO, maximum delay-tolerance and α-maximum-
tolerance with α = 0.25, 0.5, and 0.75 scheduling policies.
The maximum number of the served UEs for these policies
are 4,746, 630, 208, 2.054, 1,894 and 1,788, respectively.
For MTT policy, the short-transmission-time UE numbers
are more than the long-transmission-time UE numbers as
shown in Figure 5(a). Although the long-transmission-time
UE is not many, the inner repetition for the UL transmission
quality results in more resource utilization. Type-2 RU has less
subcarriers than Type-1 RU. When Type-2 RU is adopted, the
higher MCS level is selected. Besides, both the repetition and
the inner repetition numbers will decrease , thereby freeing
the resources to serve other UEs. However, once the band is
narrow enough with the better channel condition, using Type-
3 RU is unnecessary The frame structure of ype-3 RU is a
long length of 8 ms time duration. Thus, the UE numbers
decreases as the Type-3 RU is used for the MTT policy. On the
contrary, the long-transmission-time UE has higher probability
to be allocated the resources as shown in Figure 5(b) for the
FIFO policy. In this way, the total UE number for FIFO is
10 times lower than that for MTT. Also, the advantage of
Type-2 RU is canceled by them. When the Type-3 RU is
used, the bandwidth is so narrow that it provides the higher
power spectrum density (PSD) gain with same UL transmit
power. Then, the total served UE number increases a little bit.
Other policies are all delay awareness according to the different
levels of the delay tolerance. Based on the differences of these
levels, the proportion of the long-transmission-time UE are
diverse as shown in Figure 5(c) and (d). Moreover, that results
in variations of the total served UE numbers for distinct RU
types. The average system throughput for the MTT, FIFO and
proposed policies are shown in Figure 3. Because of the low
packet size for NB-IoT devices, the system throughput is no
more than 10 kbps. Figure 4 shows the CDF of SNR for the
3
Copyright (c) IARIA, 2018.     ISBN:  978-1-61208-624-8
SPACOMM 2018 : The Tenth International Conference on Advances in Satellite and Space Communications

(a) MTT
(b) FIFO
(c) Maximum delay tolerance
(d) α-maximum-tolerance, α = 0.5
Figure 5. Transmission time distribution.
TABLE III. SIMULATION PARAMETERS
Carrier Frequency
900 MHz
System Bandwidth
200 kHz
BS Transmit Power
24 dBm
UE Transmit Power
23 dBm
Noise Figure
3 dB
BS Height
25 m
UE Height
1.5 m
Subcarrier Spacing
{3.75, 15} kHz
Number of Sub-carriers
{1, 3, 6, 12} for 15 kHz SCS
{1} for 3.75 kHz SCS
Shadowing Deivation
8 dB
Total Number of UEs
5000
served UE. We observe that the MTT policy is unfair for the
UEs located at the worse environment, i.e., basement or the
cell edge. These UEs have no opportunity to be served. On
the other hand, UEs at the cell edge can also be served in the
FIFO and proposed policies.
IV.
CONCLUSION
In this paper, we have developed a simulator to evaluate
the system-level performance for the NB-IoT system from the
Scheduler
Evaluation System 
Performance with Different 
Scheduling Strategy  
Number of Users
System Throughput
Fundamental Setting
User Deployment
User Configuration
Traffic Model
Scheduling Mapping Table
MCS Mapping Table
Channel Model
Figure 6. Flow chart of simulation platform.
viewpoints of latency awareness. We consider the features of
the repetition with the multiple user uplink scheduling. The
MTT policy is the best method for the UEs located in the cell
4
Copyright (c) IARIA, 2018.     ISBN:  978-1-61208-624-8
SPACOMM 2018 : The Tenth International Conference on Advances in Satellite and Space Communications

center. However, the NB-IoT devices deployed at the cell edge
cannot be served. To overcome that problem, we propose the
fairness and the delay-aware methodology. The performance
of the total served UEs for the proposed maximum delay-
tolerance policy is worse than the FIFO method due to the
consideration of latency limitation. To improve that problem,
we further propose the α-maximum-tolerance policy. With
adjusting the parameter α, the delay tolerance level will be
changed to satisfy the devices requirements. Our experimental
results show that the total scheduled UEs for the improved
policy have been raised to 2.8∼3.26 times as compared with
the FIFO. Our proposed method of the α-maximum-tolerance
can provide a fairer way to schedule the UEs. Therefore, the
system-level simulator with the proposed scheduling policies
provide the preliminary methodology to evaluate the capacity
performance for the NB-IoT system.
ACKNOWLEDGMENT
This research was supported by Industry and Technology
Research Institute of Taiwan under the 5G NB-IoT System
Validation and Enhancement Project.
REFERENCES
[1]
M. Luthra, R. Atri, M. Sadeghian, S. Malik and P. Rekhi, “Long Term
Evolution for IoT (Narrow Band LTE-Cellular IOT) A Short Note on
Design, Technology and Applications,” 2016.
[2]
3GPP TR 48.520, “Technical Speciﬁcation Group GSM/EDGE Radio
Access Network-Cellular System Support for Ultra-Low Complexity
and Low Throughput Internet of Things (CIoT), V13.1.0 (Release 13),”
Nov. 2015.
[3]
Y. P. E. Wang, X. Lin, A. Adhikary, A. Grovlen, Y. Sui, Y. Blankenship,
J. Bergman and H. S. Razaghi, “A Primer on 3GPP Narrowband Internet
of Things (NB-IoT),” in IEEE Communications Magazine, Mar. 2017,
pp. 117–123.
[4]
J. Schlienz and D. Raddino, “Narrowband Internet of Things Whitepa-
per,” 2016.
[5]
A. Adhikary, X. Lin and Y. P. E. Wang, “Performance Evaluation of
NB-IoT Coverage,” 2016 IEEE 84th Vehicular Technology Conference
(VTC-Fall), Sep. 2016, pp. 1–5.
[6]
C. Yu, L. Yu, Y. Wu, Y. He and Q. Lu, “Uplink Scheduling and
Link Adaptation for Narrowband Internet of Things Systems,” in IEEE
Access, Feb. 2017, pp. 1724–1734.
[7]
3GPP TS 36.213, “Evolved Universal Terrestrial Radio Access (E-
UTRA); Physical layer procedures, V13.1.0 (Release 13),” Sep. 2016.
[8]
3GPP TS 36.211, “Evolved Universal Terrestrial Radio Access (E-
UTRA); Physical channels and modulation, V13.1.0 (Release 13),” Sep.
2016.
[9]
3GPP TS 36.141, “Evolved Universal Terrestrial Radio Access (E-
UTRA); Base Station (BS) conformance testing, V14.4.0 (Release 14),”
June 2017.
[10]
3GPP TS 36.104, “Evolved Universal Terrestrial Radio Access (E-
UTRA); Base Station (BS) radio transmission and reception, V14.4.0
(Release 14),” June 2017.
5
Copyright (c) IARIA, 2018.     ISBN:  978-1-61208-624-8
SPACOMM 2018 : The Tenth International Conference on Advances in Satellite and Space Communications

