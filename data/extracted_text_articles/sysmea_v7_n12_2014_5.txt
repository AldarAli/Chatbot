Feasibility of Geomagnetic Localization and Geomagnetic RatSLAM
Rafael Berkvens∗, Dries Vandermeulen∗, Charles Vercauteren∗, Herbert Peremans†, and Maarten Weyn∗
∗CoSys-Lab, FTI, University of Antwerp, Paardenmarkt 92, B-2000 Antwerp, Belgium
†ENM, FTEW, University of Antwerp, Prinsstraat 13, B-2000 Antwerp, Belgium
rafael.berkvens@uantwerpen.be, dries.vandermeulen@student.artesis.be,
{charles.vercauteren, herbert.peremans, maarten.weyn}@uantwerpen.be
Abstract—The need for accurate indoor localization increases
as we get used to accessible outdoor localization, and the number
of applications depending on localization grows. Indoor localiza-
tion is challenging because of frequent line of sight obstructions
and dynamic changes in the environment. Magnetometers can
be found in many modern electronic devices and provide a
simple way to measure the geomagnetic ﬁeld intensity. Due
to distortions in this magnetic ﬁeld, these measurements often
provide enough information to enable identiﬁcation of a location
using pattern matching. We show the feasibility of using these
magnetic ﬁeld intensity measurements in localization and SLAM
applications. Our SLAM system of choice is the biologically
inspired RatSLAM, as it allows pattern matching as scene
recognition. We demonstrate a number of experiments in various
environments, including a suburban house and a university
lab. We conclude that geomagnetic localization and SLAM are
feasible in environments with many distortions in the magnetic
ﬁeld. Such locations are easier to identify than locations with
little distortions, which will have the same pattern of magnetic
ﬁeld over larger areas.
Keywords—Indoor localization; Indoor SLAM; Magnetic ﬁeld
intensity; Geomagnetic indoor localization; RatSLAM.
I. INTRODUCTION
As we state in our AMBIENT 2013 paper [1], the outdoor
global positioning system fails when used indoors. In addition,
localization systems based on a single technology are prone
to failure [2]. The last decade localization related research is
focusing more and more on indoor localization, since most
use cases concerning people or asset tracking also require an
indoor location estimation.
Indoor localization can be performed by detecting the pres-
ence of radio frequency devices, of which Wi-Fi is probably
the most common. Such technologies have been developed in
an opportunistic sensor fusion system in [3]. These systems
can be enhanced by additional localization measurements. The
earth’s magnetic ﬁeld is even more ambient than Wi-Fi access
points, and research shows that animals use this magnetic ﬁeld
for orientation [4, 5]. This leads to the idea that the earth’s
magnetic ﬁeld can be used for indoor localization, a technique
referred to as geomagnetic indoor localization.
In the ﬁeld of geomagnetic indoor localization it is actually
the distortions of the magnetic ﬁeld that are used to ﬁnd
a location [6–11]. These distortions are usually created by
concrete buildings, metal objects, electrical wires, etc. Our
own research conﬁrms these ﬁndings for different sensors and
environments [1].
If a technology can be used for localization, it can often
be used for simultaneous localization and mapping (SLAM).
In localization, a map of the environment is available, with
corresponding localization hints, such as access point locations
or signal attenuation patterns [3]. In SLAM, this map is not
available but is built simultaneously with the calculation of
a path [12, 13]. Typical algorithms of SLAM are Extended
Kalman Filter SLAM (EKF-SLAM), such as in [14]; Graph-
SLAM, such as in [15], which uses an information matrix;
and FastSLAM [16], which uses a Monte Carlo particle ﬁlter.
A biologically inspired SLAM variant is RatSLAM [17],
which is based on a rat’s hippocampus. The hippocampus is
the part of the brain where, among other things, the local-
ization and mapping is done. This functionality is mimicked
by the RatSLAM algorithm to create semimetric, topological
maps of the environment. RatSLAM’s original input is a sim-
ple web camera, which performed great even when mapping an
entire suburb [18]. The camera input has also been replaced by
a biomimetic sonar, an algorithm termed BatSLAM [19, 20].
Work has also been done to enable RatSLAM to use other
sensors, like laser range ﬁnders, depth cameras, and simple
sonars, in a sensor fusion system [21]. To summarize, the key
difference between geomagnetic localization and geomagnetic
RatSLAM is the need for an a priori known magnetic ﬁeld
intensity map for geomagnetic localization, which is not re-
quired for geomagnetic RatSLAM as such a map will be build
implicitly by the system while exploring the environment.
This paper represents an extension of the work reported
on in the paper [1] by applying the sensor model used for
localization to the RatSLAM algorithm. This way, we can
create maps suitable for geomagnetic indoor localization for a
speciﬁc environment while simultaneously localizing on that
map. Another advantage of such a system is that the magnetic
maps used for indoor localization can at all times be kept up
to date. Other geomagnetic SLAM approaches exist, one using
a Monte Carlo particle ﬁlter [22] and another using a SLAM
algorithm called FootSLAM [23, 24].
The structure of this paper is as follows. In Section II, we
give some background on the earth’s magnetic ﬁeld and details
on the RatSLAM algorithm, with a focus on the location
recognition process. In Section III, we explain our pattern
44
International Journal on Advances in Systems and Measurements, vol 7 no 1 & 2, year 2014, http://www.iariajournals.org/systems_and_measurements/
2014, © Copyright by authors, Published under agreement with IARIA - www.iaria.org

matching measurement model. In Section IV, we provide
detailed results for both localization and RatSLAM using
the earth’s magnetic ﬁeld. In Section V, we come to our
conclusion and discuss some of our future work.
II. BACKGROUND
In this section, we discuss the main techniques that support
our results, the sensing of the earth’s magnetic ﬁeld. Addi-
tionally, we describe how pattern matching localization was
performed. Lastly, we explain the RatSLAM algorithm with a
focus on the location recognition process.
A. Magnetic ﬁeld sensing
In this section, we will discuss some issues to consider
when measuring the magnetic ﬁeld. Firstly, we will brieﬂy
discuss the magnetic ﬁeld. Subsequently, we will explain how
magnetometers measure this magnetic ﬁeld and how they are
inﬂuenced. Lastly, we will focus on the indoor magnetic ﬁeld
intensity, as this is our area of interest.
1) Magnetic B ﬁeld: The earth’s magnetic ﬁeld is com-
monly called the magnetic B ﬁeld. It originates from currents
in the ﬂuid outer core of the earth, which are created by both
temperature, pressure, and composition of the ﬂuid and the
spin of the earth [10]. The magnetic B ﬁeld is deﬁned by
its direction and intensity. The direction always points to the
magnetic north; the intensity is measured in Tesla [T], and
ranges between 22 µT and 67 µT according to [25].
The geomagnetic ﬁeld vector, Bm, has seven components,
illustrated in Figure 1. The X intensity’s axis points to the
geographical north, which is at the north end of the axis around
which the earth spins. The Y intensity’s axis points to the
corresponding geographical east. The Z intensity’s axis points
to the earth’s nadir. Derived from X, Y , and Z are the total
intensity F; the horizontal intensity H, which is the projection
of F on the plane described by X and Y ; the inclination I,
which is the angle between F and the plane described by X
and Y ; and the declination D, which is the angle between
X and H [25]. Note that H will point to the magnetic north
of the earth, while X points to the geographical north of the
earth.
At our location, Antwerp, Belgium, the declination H is
0◦ 19′ and inclination I is 66◦ 25′. The average total intensity
F is 48.73 µT [1].
2) Magnetometers: The geomagnetic ﬁeld vector Bm can
be measured by magnetometers in the form of X′, Y ′, and Z′
intensities. These intensities are measured along the reference
axes of the magnetometer and can only be translated to X,
Y , and Z intensities by tilt compensation and turning the X′
intensity’s axis to the geographical north. Correspondingly, the
F and H′ intensities can be calculated as the euclidean norm:
F =
p
X′2 + Y ′2 + Z′2
(1)
H′ =
p
X′2 + Y ′2
(2)
where X′, Y ′, Z′, and H′ indicate intensities measured
relative to the orientation frame of the magnetometer. The
Y
X
D
I
H
F
Z
East
North
Nadir
Figure 1.
The components of the geomagnetic ﬁeld vector Bm, based
on [25].
F intensity is the same for any orientation. Many recent,
high level electronic devices, such as smartphones and tablets,
feature magnetometers. This widespread availability of mag-
netometers makes them attractive to use for localization ap-
plications.
For the localization research, we use two different mag-
netometers on two different platforms. These are a Honey-
well HMC5843 magnetometer, found in a Shimmer 9 DOF
Kinematic sensor, and a AK9873 magnetometer, found in
a Huawei Sonic U8650 smartphone. The behavior of both
sensors was tested to determine if the localization performance
was platform independent. For the RatSLAM research, a
similar sensor is used. This is a AK9863 magnetometer, found
in a LG Google Nexus 5 smartphone.
We will repeat here our extensive testing of the sensors used
for the localization research [1]. The ﬁrst test is conducted
in an indoor bedroom apartment where both sensors are
individually placed on a wooden desk, away from any possible
interference factors like metal objects or electronic devices.
The sensor sends data back via Bluetooth to a computer
where all data was recorded. Both sensors are placed on the
desk with their X′ intensity’s axis manually pointed towards
geographical north.
Table I shows the average magnetic ﬁeld intensity of the
ﬁrst test. Test results show that magnetic ﬁeld intensity mea-
surements are not the same for both sensor platforms. This
can be expected, as both sensors have a unique electronic
and metal composition, which might distort sensor readings.
These distortions are called hard iron effects and are caused
by the internal structure of the sensor. Compensation for
these hard iron effects is needed. If no compensation for
hard iron effects is performed and we use a different sensor
for both ofﬂine training and online localization phase, we
might have an inconsistency between the two data sets. Thus,
compensating for hard iron effects is crucial for geomagnetic
indoor localization.
Hard iron characteristics can be found by rotating the sensor
around its x′, y′, and z′ axis. These axes are deﬁned relative
to the sensor’s reference frame, hence the apostrophe, and
45
International Journal on Advances in Systems and Measurements, vol 7 no 1 & 2, year 2014, http://www.iariajournals.org/systems_and_measurements/
2014, © Copyright by authors, Published under agreement with IARIA - www.iaria.org

Table I.
AVERAGE MAGNETIC FIELD INTENSITY FOR BOTH SENSORS
DURING STATIC TEST. VALUES ARE EXPRESSED IN µT.
Intensity
Shimmer
Smartphone
X′
-1.05
0.50
Y ′
7.34
19.19
Z′
-57.61
-41.50
F
58.09
42.32
can be found in its documentation. If no hard iron effects are
present, rotating a magnetometer 360 degrees and plotting the
resulting data as y′ axis versus x′ axis, will result in a circle
centered around the origin. Figures 2 and 3 show the resulting
circles of rotating the Shimmer and the smartphone sensor in
the x′y′ plane, before and after compensating for hard iron
effects. Table II shows the compensation values for each axis
of both sensors.
After compensating both sensors for these hard iron effects
by subtracting the compensation values from the raw data, the
ﬁrst test is repeated. The results are shown in Table III. We
can see that both sensors give very similar measurements at
the same position.
Often, magnetometers are also calibrated to compensate for
the presence of external metal or electronic distortions, called
soft iron effects. For this research, this is an undesired cali-
bration as the goal of geomagnetic localization is to measure
and map these distortions.
If we do not look at the previous test data, we expect the
smartphone to have a higher variance because of its more
advanced electronic composition, which might inﬂuence the
sensitive magnetometer. We note that the shimmer sensor has
a slightly larger variance, which is unexpected. Additional
tests are conducted with all receivers of the smartphone turned
on, in an attempt to maximize the variance. Table IV shows
the magnetic ﬁeld intensity measurements of the smartphone
with receivers disabled and enabled. Note that the Bluetooth
Magnetic field intensity X' [µT]
Magnetic field intensity Y' [µT]
-40
-30
-20
-10
0
10
20
30
40
-40
-30
-20
-10
0
10
20
30
40
uncompensated data
compensated data
center
Figure 2.
Shimmer hard iron compensation.
Table II.
HARD IRON COMPENSATION FOR BOTH SENSORS. VALUES ARE
EXPRESSED IN µT.
Correction
Shimmer
Smartphone
X′
15.00
3.67
Y ′
7.25
0.16
Z′
-11.25
4.52
Magnetic field intensity X' [µT]
Magnetic field intensity Y' [µT]
-40
-30
-20
-10
0
10
20
30
40
-40
-30
-20
-10
0
10
20
30
40
uncompensated data
compensated data
center
Figure 3.
Smartphone hard iron compensation.
Table III.
AVERAGE MAGNETIC FIELD INTENSITY AND CORRESPONDING
STANDARD DEVIATION FOR BOTH SENSORS DURING STATIC TEST, AFTER
HARD IRON COMPENSATION. VALUES ARE EXPRESSED IN µT.
Intensity
Shimmer
Smartphone
µ
σ
µ
σ
X′
-0.33
0.56
-0.80
0.48
Y ′
17.12
0.52
18.01
0.51
Z′
-45.97
0.57
-44.46
0.51
F
49.06
0.57
47.98
0.52
receiver is enabled in both scenarios as it is used to send back
the data to the computer. Although the variance in the data
rises slightly when both receivers are activated, it does not
signiﬁcantly affect our measurements.
As the focus of the localization research is handheld smart-
phones, tests are conducted to see if human hand contact
would signiﬁcantly affect the measurements. During the ofﬂine
calibration phase measurements can be taken either with or
without contact by a human hand. Magnetic ﬁeld intensity
measurement are taken with and without contact by a human
hand, without changing the position of the hand. The results of
the 200 samples are presented in Table V. The test results show
that there was no signiﬁcant change between both scenarios.
Table IV.
AVERAGE MAGNETIC FIELD INTENSITY AND CORRESPONDING
STANDARD DEVIATION FOR THE SMARTPHONE MAGNETOMETER, WITH OR
WITHOUT ADDITIONAL ELECTRONIC ACTIVITY. VALUES ARE EXPRESSED
IN µT.
Intensity
Wi-Fi and GPS disabled
Wi-Fi and GPS enabled
µ
σ
µ
σ
X′
15.07
0.47
15.14
0.48
Y ′
2.35
0.43
2.43
0.54
Z′
-32.94
0.49
-32.91
0.55
F
36.31
0.50
36.32
0.56
Table V.
AVERAGE MAGNETIC FIELD INTENSITY AND CORRESPONDING
STANDARD DEVIATION FOR THE SMARTPHONE MAGNETOMETER, WITH OR
WITHOUT HUMAN HAND CONTACT. VALUES ARE EXPRESSED IN µT,
DIFFERENCES IN %.
Intensity
No hand contact
Hand contact
Difference
µ
σ
µ
σ
∆µ
∆σ
X′
14.33
0.55
14.48
0.48
98.96
114.58
Y ′
1.21
0.50
0.93
0.55
130.11
90.91
Z′
-33.80
0.52
-33.32
0.52
101.44
100.00
F
36.74
0.54
36.35
0.51
101.07
105.88
46
International Journal on Advances in Systems and Measurements, vol 7 no 1 & 2, year 2014, http://www.iariajournals.org/systems_and_measurements/
2014, © Copyright by authors, Published under agreement with IARIA - www.iaria.org

3) Indoor magnetic ﬁeld intensity: While indoor environ-
ments pose good candidates for geomagnetic localization,
magnetic ﬁeld intensity measurements must be stable over
long periods of time. [10] conducted experiments where
indoor magnetic ﬁeld intensity was measured in different
environments. The results show stable magnetic ﬁeld intensity
measurements over a 24 hour period. The experiments are
repeated three months later, and no signiﬁcant change was
detected.
To achieve indoor localization, it is important that mag-
netic ﬁeld intensities change considerably from position to
position. If the magnetic ﬁeld intensity measurements do not
change considerably, the ﬁngerprint might not contain enough
information to overcome the cumulative error of the estimated
position and indoor localization cannot be achieved [2].
A dynamic test is performed to see if magnetic ﬁeld
intensity measurements vary over the length of two hallways.
The Shimmer sensor is placed on an ofﬁce chair and is elevated
to a height of 1.2 m. This height is similar to a person holding
a smartphone. The elevation also made sure there is as little
interference as possible from the chair itself.
The chair is moved at a constant velocity of 0.3 cm/s through
the hallway. The speed is not always constant as human error
is inevitable. The ﬁrst hallway is expected to have changing
measurement values because of the reinforced concrete ﬂoor
and metal furniture in the rooms next to the hallway. The
second hallway is expected to have less varying measurements
because of the wooden ﬂoor and the absence of metal furniture.
Figures 4 and 5 show the measurements of the X′, Y ′, and
Z′ intensities taken through respectively the ﬁrst hallway and
the second hallway. The test results show changing magnetic
ﬁeld intensity measurements for hallway A. These peaks and
drops in magnetic ﬁeld intensity allow us to identify certain
areas inside the hallway and accordingly allow for localization.
The measurements of hallway B tell a different story. Since
there are no distinct ﬂuctuations to identify certain areas,
accurate localization seems improbable.
Additionally, indoor environments are places where objects
are often moved or replaced. This will result in changes
in the magnetic ﬁeld intensity maps, decreasing localization
Distance [m]
Magnetic field intensity [µT]
0
1.3
2.7
4.1
5.5
6.8
8.2
9.6
11
-60
-40
-20
0
20
40
60
X'
Y'
Z'F
Figure 4.
Magnetic ﬁeld intensity dynamic test of hallway A.
Distance [m]
Magnetic field intensity [µT]
0
1,3
2,7
4,1
5,5
6,8
8,2
9,6
11
-60
-40
-20
0
20
40
60
X'
Y'
Z'F
Figure 5.
Magnetic ﬁeld intensity dynamic test of hallway B.
performance, as discussed below.
Tests are conducted to investigate these interferences. Three
objects are tested: a perforator, a mobile phone, and a hard
drive. These objects are chosen because they can represent
normal household objects which are often moved within an
indoor environment. These differently sized objects are moved
at a constant speed towards a Shimmer sensor to investigate
the range and magnitude of the interferences. Figure 6 shows
the results of the hard drive test. The hard drive is moved
closer to the sensor at a constant speed, reaching the sensor
after 50 s. Magnetic ﬁeld intensity changes drastically as the
hard drive moves closer to the sensor. As can be expected the
change in magnetic ﬁeld intensity was less signiﬁcant for the
smaller objects. Table VI shows the interference range of all
objects.
Test results show that the size and magnetic composition
of the object determines the range and magnitude of the
interference. Small sized objects only caused interference
starting from a range of about 15 cm, while larger objects
Time [s]
Magnetic field intensity [µT]
0
5
10
15
20
25
30
35
40
45
50
-100
-50
0
50
100
150
200
X'
Y'
Z'F
Figure 6.
Metal and electronic object interference test of the hard drive.
Table VI.
METAL AND ELECTRONIC OBJECT INTERFERENCE TEST
RESULTS.
Object
Perforator
Phone
Hard drive
Average velocity [cm/s]
1.48
1.66
1.37
Start of interference [s]
29.00
24.00
23.00
Interference range [cm]
12.00
15.10
23.50
47
International Journal on Advances in Systems and Measurements, vol 7 no 1 & 2, year 2014, http://www.iariajournals.org/systems_and_measurements/
2014, © Copyright by authors, Published under agreement with IARIA - www.iaria.org

cause interference starting from about 25 cm. Small objects
have a negligible inﬂuence for a room sized environment, yet
the interference of larger objects cannot always be ignored.
B. Fingerprinting
In radio frequency (RF) based localization, ﬁngerprinting
is performed by measuring a pattern of RF signals and
matching them to a database of such measurements. These
measurements are called RF ﬁngerprints, and consist of all
pairs of received signal strength (RSS) value and media access
control (MAC) address that can be seen at a certain location.
This idea was originally published in [26].
Fingerprinting localization has an ofﬂine and an online
phase. During the ofﬂine phase, ﬁngerprints are recorded at
reference locations and stored in a database. These ﬁngerprints
together form a radio map of the environment, which is used
during the online phase. During this online phase, devices that
need to be localized measure ﬁngerprints at their location and
compare these ﬁngerprints with the radio map in the database.
Due to measurement noise and ﬂuctuations in RF signals, these
ﬁngerprints are usually not exactly the same as ﬁngerprints in
the the database, so a set of measurements is used to estimate
a true location. This method is described in more detail in [3].
As shown by [8], this localization technique can be directly
applied to magnetic ﬁeld localization. Instead of RF ﬁnger-
prints, magnetic ﬁeld ﬁngerprints are used, by measuring the
X, Y , and Z intensities of the geomagnetic ﬁeld vector Bm,
as explained above.
As described in [1], magnetic ﬁeld intensity maps were
created by measuring the magnetic ﬁeld intensity at predeﬁned
locations. The sensor remained still during these measure-
ments.
Three different locations are chosen for experimentation: the
ground ﬂoor of a suburban house, with an area of 14 × 16 m;
the second ﬂoor of a city centered apartment, with an area of
9 × 12 m; and the second ﬂoor lab at the university campus,
with an area of 6 × 19 m. These locations are chosen because
they represent distinct environments where indoor localization
might be required. It is important that all locations have
multiple rooms and are medium to large size, i.e., above 20 m2.
Figure 7 shows the recorded ﬁngerprints of the suburban
house. A slash is drawn through areas where no ﬁngerprint
measurement could be obtained because of built in cabinets,
wardrobes or other furniture. For simplicity, the color map
shows only the magnetic ﬁeld F intensity measurements
taken at one meter spacing. We do not explicitly research
the maximum accuracy of geomagnetic localization for this
feasibility research.
The ﬁngerprint in Figure 7 shows that the magnetic ﬁeld
intensity characteristics change from position to position.
There is a big metal stove located between the dining room
and the kitchen. We measured a high magnetic ﬁeld intensity
at that location, which results in a light square. A test is done
to determine if these characteristics are unique for an indoor
environment. A ﬁngerprint is created in a garden, with an area
of 4 × 6 m, and in a small part of a street, with an area of
120
100
80
60
40
20
0
[µT]
Living Room
Tv Room
Hallway
Laundry
Kitchen
Dining Room
16 m
14 m
Figure 7.
Magnetic ﬁeld F intensity ﬁngerprint map of the ground ﬂoor of
the suburban house.
5×15 m. Figure 8 shows the ﬁngerprint obtained at the street.
The outdoor results are very different from the indoor results.
The magnetic ﬁeld intensities do not change signiﬁcantly with
position. Tables VII and VIII show the magnetic ﬁeld intensity
standard deviation of the recorded measurements for both the
indoor and the outdoor ﬁngerprints. The indoor environments
clearly have more varying measurements than the outdoor
environments.
Fingerprint maps are also created to conﬁrm the ﬁndings on
metal and electronic objects’ interference mentioned above.
A ﬁngerprint is taken from a small bedroom with an area
of 3.5 × 3.5 m. Magnetic ﬁeld intensity measurements of the
X′, Y ′, and Z′ intensity are taken at 0.5 m spacing. Figure 9
shows the interior setup of the room and the resulting magnetic
ﬁeld intensity ﬁngerprint of the F intensity. As it can be seen
form this ﬁngerprint, the two speakers cause a clear magnetic
ﬁeld intensity interference pattern. The size of this distortion
15 m
5 m
Figure 8.
Magnetic ﬁeld intensity ﬁngerprint map of a part of a street. The
intensity color scale is the same as in Figure 7.
Table VII.
MAGNETIC FIELD INTENSITY STANDARD DEVIATION VALUES
FOR INDOOR LOCATIONS. VALUES ARE EXPRESSED IN µT.
Intensity
House
Apartment
Lab
X′
5.70
5.49
6.99
Y ′
4.63
5.52
4.84
Z′
5.11
4.65
8.08
48
International Journal on Advances in Systems and Measurements, vol 7 no 1 & 2, year 2014, http://www.iariajournals.org/systems_and_measurements/
2014, © Copyright by authors, Published under agreement with IARIA - www.iaria.org

Table VIII.
MAGNETIC FIELD INTENSITY STANDARD DEVIATION VALUES
FOR OUTDOOR LOCATIONS. VALUES ARE EXPRESSED IN µT.
Intensity
Garden
Street
X′
1.45
3.53
Y ′
1.28
3.30
Z′
0.55
2.65
is rather large, as speakers are often constructed with strong
magnets inside of them. After creating the ﬁrst ﬁngerprint map,
one of the speakers was moved to a different location within
the room. Subsequently, a new ﬁngerprint map was created.
Figure 10 shows the new interior setup and the resulting new
ﬁngerprint. The interference pattern of the moved speaker is
clearly visible in the new ﬁngerprint. These test results give
an example of how the repositioning and removal of objects
inside a room can form an obstacle for indoor geomagnetic
localization. When the interior setup of a room changes
signiﬁcantly, a new ﬁngerprint should be taken. Of course,
a SLAM algorithm could perform continuous mapping of the
environment, while simultaneously performing localization.
C. RatSLAM
RatSLAM is a biologically inspired SLAM algorithm, mod-
eled after spatial cognition in rats [27, 28]. It consists of three
elements, called the local view network, the pose cell network,
and the experience map, as shown in Figure 11. We will give
a brief overview of the pose cell network and the experience
map, and refer the reader to [28] for additional details. We do
present a more in-depth discussion of the local view network
as this is the only component that is modiﬁed for this research.
1) Pose cell network: The pose cell network is a three
dimensional continuous attractor network (CAN) [29, 30],
representing pose consisting of position in the plane (x, y) and
orientation (θ). The activity pattern in this network represents
the local pose estimate, or estimates if the pose is ambiguous.
It can be visualized as a cube in which activity packets are
created, moved around and destroyed. The connectivity pattern
between the nodes in a CAN is such that activity packets
can be considered as discrete blobs of activity that keep their
shape when moved around the network. The activity packets
in the pose cell network are moved in accordance with the
3.5 m
3.5 m
0
1
2
3
4
5
6
7
x-coordinates
0
1
2
3
4
5
6
7
y-coordinates
Figure 9.
Magnetic ﬁeld intensity ﬁngerprint of bedroom, with the speaker
on its original position. The intensity color scale is the same as in Figure 7.
3.5 m
3.5 m
0
1
2
3
4
5
6
7
x-coordinates
0
1
2
3
4
5
6
7
y-coordinates
Figure 10.
Magnetic ﬁeld intensity ﬁngerprint of bedroom, with the
speaker on its new position. The intensity color scale is the same as in
Figure 7.
Local view network
Pose cell network
Experience map
Measurement
Match?/New?
Odometry
Figure 11.
RatSLAM consists of three elements, called the local view
network, the pose cell network, and the experience map.
odometry information. The boundaries of the network are
wrapped around, so that an activity packet that reaches the end
of the network is wrapped back to the start. Hence, multiple
positions and orientations in the real world are mapped upon
the same nodes in the pose cell network. Extra activity is
injected by the local view network, i.e., new activity packets
are created when new sensor measurements correspond with
memorized sensory signatures, as explained below.
2) Experience map: The experience map is a graph that
represents a global topological map of the environment, based
on information from the local view network, the pose cell
network, and the odometry information. It creates new nodes
based on the state of the local view network and connects them
with new edges to nodes already present in the experience map
by using the metric odometry information. This information
is continuously updated on the basis of new sensor data, the
state of the local view network and activity in the pose cell
network. Hence, this topological map acquires semi-metric
properties, i.e., progressively more accurate (x, y) coordinates
are associated with the nodes that lie on paths that have been
repeatedly traveled. A detailed overview of the functioning of
the experience map can be found in [31].
49
International Journal on Advances in Systems and Measurements, vol 7 no 1 & 2, year 2014, http://www.iariajournals.org/systems_and_measurements/
2014, © Copyright by authors, Published under agreement with IARIA - www.iaria.org

3) Local view network: The local view network acts as
a database of scenes that have been observed during the
exploration of the environment. The measurement (see Fig-
ure 11) contains the sensor information about the current
scene; typically, the measurement is a camera image. When
a new measurement is taken, it is compared with previous
measurements as stored in the local view templates associated
with the local view cells. The activation of each local view cell
depends on the quality of this match. If the smallest difference
between the measurement and the local view cells is greater
than a certain threshold, the measurement is said to correspond
with an as yet unobserved scene. In that case, a new local
view cell is created and the measurement is copied into the
associated local view template. The local view cell is also
linked to the position of the activity packet, i.e., the local
pose estimate, in the pose cell network that is at that time
the dominant packet. Alternatively, if the difference between
the measurement and the local view cells is smaller than the
threshold, a match is said to be found with the local view cell
that had the smallest difference with the measurement. In this
case, the local view network will inject activity into the pose
cell network at the pose linked previously with this local view
cell.
When traveling through previously mapped terrain, a se-
quence of familiar scenes will be observed by the sensor.
However, if the state of the pose cell network differs too
much from the true position this will result in the creation
of a new activity packet. Indeed, activity being injected in
the particular order at the particular places in the pose cell
network corresponding with this sequence of familiar scenes
will effectively increase the activity in the newly created
activity packet. Subsequently, this activity packet will become
the strongest and the speciﬁc mechanics of the pose cell
network will suppress the old activity packet. This mechanism
avoids cumulative build-up of odometric errors in the pose
estimate when traveling through familiar terrain. Again, more
details can be found in the literature [17, 18, 27, 28, 31].
The typical camera image that serves as measurement in
the original RatSLAM implementation has been replaced by
several other sensor modalities: a biomimetic sonar system
modeled after the echolocation abilities of bats [19, 20], the
fusion of a laser range ﬁnder, a simple sonar array, a depth
camera and a normal camera [21]. In this research, we propose
to replace the camera images with magnetic ﬁeld ﬁngerprints
as used in the magnetic ﬁeld localization system.
III. METHOD
In this section, we will discuss the methods used to perform
both geomagnetic localization and geomagnetic RatSLAM.
Slightly updated, the section on geomagnetic localization is
also presented in [1].
A. Geomagnetic localization
The magnetic ﬁeld intensity results discussed above suggest
that magnetic ﬁeld intensity measurements can be used to
achieve indoor localization. It is important to note, how-
ever, that the quality of the localization often depends on
the number of measured components that can be used as
reference points [2]. Having many values to compare against
can obviously increase the chance of identifying the actual
position. The number of components that can be recorded
by a magnetometer is rather small. Only the X′, Y ′, and
Z′ intensities of the earth’s magnetic ﬁeld, in the reference
frame of the magnetometer, can be measured. There are some
practical consequences to be considered during the localization
and ﬁngerprinting phase when using these three intensities.
As stated before, a magnetometer will measure the magnetic
ﬁeld intensities relative to its own orientation. So, to use the
three intensities requires that the orientation of the sensor is
exactly the same during the ﬁngerprinting and the localization
phase. This is a requirement that cannot be met easily. A user
will walk around in different directions and the orientation
of the device will follow along with him. The way the user
holds the device is also not always the same. Determining the
orientation of the device will be key to using all three compo-
nents. If no information is available about the orientation of
the device in none of these two phases, we can only use the
F intensity. This would reduce the number of components to
be used for localization to only one.
To resolve this issue, a tilt compensated magnetometer can
be used. Such a magnetometer uses accelerometers to detect
the vertical orientation of the device by measuring the force of
the earth’s gravity. Using tilt compensation allows us to use
two components, the Z intensity and the H′ intensity [10].
To use all three components the horizontal orientation of the
device needs to be known as well. To determine the horizontal
orientation, the magnetometer can be used as a compass. A
compass can determine the direction of the magnetic north,
and can consequently determine the horizontal orientation of
the device. To do this, the user has to manually point the
device to a reference point on the map, e.g., geographic north.
By deﬁning a reference point the horizontal orientation can be
determined.
This research shows, however, that indoor environments
can cause interference in the magnetic ﬁeld intensity mea-
surements. These interferences are called soft-iron effects.
Compensation has to be done to remove these interferences to
get an accurate heading. It is important to note, that when soft-
iron compensation is done, there needs to be a clear distinction
between the compensated data and the raw data. Orientation
requires soft-iron compensation while localization requires no
soft-iron compensation.
All aforementioned information can be combined to deﬁne
a measurement model for geomagnetic indoor localization.
Deﬁning a measurement model can provide a technology
interface for sensor fusion systems [3]. Algorithm 1 describes
the measurement model. The measurement model is used to
ﬁnd the probability of a position xt = {xt, yt}, where x and
y are spatial coordinates, given a measurement zt, which can
be any of:
50
International Journal on Advances in Systems and Measurements, vol 7 no 1 & 2, year 2014, http://www.iariajournals.org/systems_and_measurements/
2014, © Copyright by authors, Published under agreement with IARIA - www.iaria.org

zt = {zX
t , zY
t , zZ
t }
(3)
zt = {zH′
t , zZ
t }
(4)
zt = {zF
t }
(5)
where X, Y , and Z indicate intensities of the magnetic B ﬁeld.
Equation (3) can be used when both tilt compensation and
heading compensation are performed. Equation (4) can be used
when only tilt compensation is performed. Equation (5) can
be used when no compensation is performed. The algorithm
uses a Gaussian kernel distribution p(zk
t |xt):
p(zk
t |xt) = exp(zk
t − zk
dB
2 ∗ σ2
)
(6)
where zdB is the ﬁngerprint in the database corresponding
with xt and k is any of X, Y , Z, H′, or F.
Algorithm 1 Geomagnetic measurement model (xt, zt).
1: function CALCULATEWEIGHT(xt, zt)
2:
if zt == {zX
t , zY
t , zZ
t } then
3:
wX = p(zX
t |xt)
4:
wY = p(zY
t |xt)
5:
wZ = p(zZ
t |xt)
6:
return wX · wY · wZ
7:
else if zt == {zH′
t , zZ
t } then
8:
wH′ = p(zH′
t |xt)
9:
wZ = p(zZ
t |xt)
10:
return wH′ · wZ
11:
else if zt == {zF
t } then
12:
wF = p(zF
t |xt)
13:
return wF
14:
end if
15: end function
Although magnetic ﬁeld intensity measurements remain
stable over long periods of time, big, moving metal objects
like an elevator cause variations in these measurements. These
sources of errors can cause a mismatch in the magnetic ﬁeld
intensity measured at the same position. The accumulated error
can be modeled as a Gaussian kernel distribution. The standard
deviation of this distribution has to represent the maximum
variation that can be expected. The standard deviation σ was
set to 2 µT as this was the maximum standard deviation
reported at 2 m from an elevator by [10].
B. Geomagnetic RatSLAM
We use our Pioneer 3DX mobile robot to collect measure-
ments and to provide a reliable odometry source for our geo-
magnetic RatSLAM implementation. The Pioneer 3DX serves
as robot platform, with a consumer grade laptop mounted
on top to save the measurements. Elevated by a cardboard
box, we place our sensor at a safe distance to avoid soft
iron interference in the magnetic ﬁeld caused by the metal
parts of the robot. The setup is shown in Figure 12. The
robot is also equipped with a laser range ﬁnder to serve as a
comparison tool using an established laser range ﬁnder based
SLAM method.
The local view network of the original RatSLAM algorithm
uses camera images to recognize scenes. This functionality
has to be replaced with an algorithm capable of recognizing
magnetic ﬁeld intensity measurements. Assuming that our
magnetometer will always be in the same position relative to
the robot, we can simplify the measurement model. Similar
to how a 60◦ angle of view camera can only observe one
direction at a time, we choose to match only to magnetic
ﬁeld intensity measurements that are oriented in the same way
during initial measurement and during subsequent comparison.
In other words, our algorithm will not attribute a high match
quality to the measurements from one location when it is being
traversed in a different orientation. This results in zt to have
only one option:
zt = {zX′
t , zY ′
t , zZ′
t }
(7)
which is different from Equations (3), (4), and (5) by always
using the magnetometer reference frame deﬁned by X′, Y ′,
and Z′, which is allowed since we only want matches when the
magnetometer has the same orientation for the measurements
being compared. In fact, we can assume Z′ = Z, since Z′ is
always oriented to nadir. We do not explicitly model it that
way, however, so that our approach is more general even for
differently oriented magnetometers. The same Gaussian kernel
distribution p(zk
t |xt) as in Equation (6) is used, with σ =
0.67 µT. This difference in standard deviation is created to be
more selective in matching local view cells.
We use the Robot Operating System (ROS, [32]) as a frame-
work to read magnetometer messages from the smartphone
and to operate the robot. The freely available OpenRatSLAM
source code [31] is modiﬁed to create RatSLAM results.
IV. RESULT
Here, we will present the results we have obtained for both
geomagnetic localization and geomagnetic RatSLAM. Firstly,
the geomagnetic localization results are shown, originating
with slight modiﬁcation from the original paper [1]. Next, we
present the new geomagnetic RatSLAM results.
Figure 12.
The Pioneer 3DX mobile robot platform.
51
International Journal on Advances in Systems and Measurements, vol 7 no 1 & 2, year 2014, http://www.iariajournals.org/systems_and_measurements/
2014, © Copyright by authors, Published under agreement with IARIA - www.iaria.org

A. Geomagnetic localization
The measurement model in Algorithm 1 is used to inves-
tigate the feasibility of geomagnetic indoor localization. To
test the feasibility we use the suburban house, the apartment,
and the university lab as experimental environments. Each
individual ﬁngerprint position and its accompanying magnetic
ﬁeld intensity measurement is used as a test position. Each
test position is compared to all measurement positions in
the ﬁngerprint using the measurement model described in
Algorithm 1. The measurement model will give a high weight
to ﬁngerprint positions that had magnetic ﬁeld intensity mea-
surements similar to the test position. The weight represents
the likelihood of the sensor reading zt given the position xt.
The ﬁnal estimated position xt is calculated as the weighted
average of all ﬁngerprint positions, using Equation (8). Posi-
tions with a high probability will contribute more to the ﬁnal
estimated position [3].
xt =
PN
i=1 w[i]
t · x[i]
t
PN
i=1 w[i]
t
(8)
where N is the number of positions.
The coordinates of the ﬁnal estimated position are compared
to the real coordinates of the test position and the error is
stored. The process will be repeated for all measurement
positions within the ﬁngerprint. The maximum, minimum and
average errors for every location are determined. The amount
of estimated positions that are within 1 m and the amount
of estimated positions that are in the same room is also
determined. Table IX shows the results that are obtained from
the three ﬁngerprints that are recorded.
It is clear from the results that using three components gives
the best localization results and results deteriorate when fewer
components are used. The maximum and minimum errors
stay relatively the same for all amounts of components. All
localization results are combined to form a cumulative density
function in Figure 13.
This test is repeated, with this difference that the room
of each test position is known. Table X shows the results
of this test. Only measurement positions in the same room
as the test positions are compared to the test position. Test
results improve signiﬁcantly, so that even using only one
component, localization close to 1 m can be achieved. These
results indicate that geomagnetic localization might be more
suited for localization within a room. Figure 14 show the
cumulative density function when the room is known.
Table IX.
GEOMAGNETIC LOCALIZATION FEASIBILITY RESULTS FOR
DIFFERENT ENVIRONMENTS, USING ONE, TWO, OR THREE COMPONENTS
IN THE MEASUREMENTS MODEL.
Properties
Suburban house
Apartment
Lab
1
2
3
1
2
3
1
2
3
mean [m]
4.8
4.3
3.1
3.7
3.3
2.5
4.5
3.4
2.5
min [m]
0.1
0.0
0.0
0.1
0.1
0.0
0.2
0.0
0.0
max [m]
9.3
9.4
8.8
7.2
7.4
7.0
10.5
11.3
11.8
< 1 m [%]
4.0
9.0
17.0
7.0
13.0
23.0
9.0
20.0
32.0
room [%]
10.0
18.0
44.0
21.0
31.0
49.0
73.0
74.0
82.0
Error distance [m]
Probability
0
2
4
6
8
10
12
0
0.1
0.2
0.3
0.4
0.5
0.6
0.7
0.8
0.9
1
Figure 13.
Cumulative density function of the error of localization. The
green line is using one component; the blue line is using two components;
the red line is using three components.
Table X.
GEOMAGNETIC LOCALIZATION FEASIBILITY RESULTS WHEN
THE ROOM IS KNOWN FOR DIFFERENT ENVIRONMENTS, USING ONE, TWO,
OR THREE COMPONENTS IN THE MEASUREMENTS MODEL.
Properties
Suburban house
Apartment
Lab
1
2
3
1
2
3
1
2
3
mean [m]
1.4
1.0
0.8
1.4
1.0
0.6
2.2
1.4
0.9
min [m]
0.1
0.0
0.0
0.0
0.0
0.0
0.1
0.0
0.0
max [m]
3.2
2.8
2.3
5.2
3.9
2.1
5.4
5.2
3.7
< 1 m [%]
30.0
47.0
67.0
35.0
50.0
74.0
21.0
42.0
61.0
Although previous results give a good indication of how
feasible geomagnetic indoor localization can be, they are
largely theoretical. To verify these ﬁndings, a more practical
test is performed. A route is recorded through the suburban
house. On this route, magnetic ﬁeld intensity measurements
are taken at roughly the same positions as where ﬁngerprint
measurements are taken. The position can not be exactly
the same as human error is inevitable. Figure 15 shows
the recorded magnetic ﬁeld intensity for the route and the
ﬁngerprint.
The results show that the recorded measurements are not
exactly the same, however, the average correlation coefﬁ-
cient between the route and the ﬁngerprint X, Y , and Z
Error distance [m]
Probability
0
2
4
6
8
10
12
0
0.1
0.2
0.3
0.4
0.5
0.6
0.7
0.8
0.9
1
Figure 14.
Cumulative density function of the error of localization when
the room is known. The green line is using one component; the blue line is
using two components; the red line is using three components.
52
International Journal on Advances in Systems and Measurements, vol 7 no 1 & 2, year 2014, http://www.iariajournals.org/systems_and_measurements/
2014, © Copyright by authors, Published under agreement with IARIA - www.iaria.org

Distance [m]
Magnetic field intensity [µT]
2
4
6
8
10
12
14
16
-60
-40
-20
0
20
40
60
x fingerprint
x route
Figure 15.
Magnetic ﬁeld intensity X measurements from ﬁngerprint map
and during route.
measurements is 0.93, which means that both recordings
are very similar. The recorded route is estimated within the
environment using Algorithm 1. Figure 16 shows the original
route in blue, and the estimated route in green. First the route
is estimated when nothing about the room is known, later
the route is estimated when the room of the measurement
is known. Table XI shows the localization results of both
scenarios.
This practical test conﬁrms the original ﬁndings. Localiza-
tion is very dependent on the amount of components that
can be used, and results are superior when only room sized
localization is required.
B. Geomagnetic RatSLAM
Our geomagnetic RatSLAM results are collected in the same
university lab as the geomagnetic localization results. We do
not provide the algorithm with any information about the
Figure 16.
Suburban house route results for three components. Left hand
side, when the room was not known. Right hand side, when the room was
known. The blue line is the recored route and the green line is the estimated
route. The intensity color scale is the same as in Figure 7.
Table XI.
ROUTE ESTIMATION RESULTS.
Properties
Global
Room known
1
2
3
1
2
3
mean [m]
2.1
2.1
1.4
1.3
1.1
0.9
min [m]
0.2
0.1
0.0
0.0
0.0
0.0
max [m]
4.22
4.2
4.5
3.1
2.6
2.0
< 1 m [%]
13.0
13.0
38.0
43.0
43.0
62.0
room [%]
25.0
31.0
56.0
N/A
N/A
N/A
speciﬁc room in which measurements are taken. A point to
point quantitative ground truth is not available for the results,
but we show the path produced with only odometry and the
path produced by Grid Mapping as qualitative comparisons.
The odometry only path is expected to perform much worse,
as it has no sensor information to recognize familiar scenes.
The Grid Mapping algorithm is freely available in the ROS
framework and described in [33]. This path is expected to
perform better than our own estimation, since it utilizes the
laser range scanner high precision data.
Four separate datasets are constructed. Three of them are
simple runs up and down the lab, starting and ending in
different rooms, lasting about 15 min each. A fourth dataset
drives up and down to different rooms in different order,
lasting about 30 min. The ﬁrst three are used to ﬁnd the correct
RatSLAM parameters, by training on two of them and check-
ing on the third, switching datasets for every parameter setup.
This approach does not guarantee that optimal parameters are
found, but decreases the chance of overﬁtting the parameters.
To additionally prevent overﬁtting, the fourth dataset is used
as ﬁnal check. Figure 17 shows a schematic overview of these
runs, drawn against the output of the Grid Mapping algorithm
applied to the fourth dataset.
The traveled path is the general output of the RatSLAM
algorithm. This will be discussed further on for the fourth,
challenging dataset, however, our focus was on the local view
network. These results are generally discussed using local view
cell matching diagrams, which are diagrams on which the local
view cell identiﬁcation number, or template ID, is drawn as a
function of time. Horizontally, the ﬁrst time a template ID is
encountered is when the local view cell is created. Subsequent
occurrences of the same template ID indicate when the local
A, E
B
D, F
C
Figure 17.
The second ﬂoor university lab laser map. The ﬁrst three
datasets consist of three runs going up and down the lab. The ﬁrst dataset
went from A to B and back; the second dataset went from C to D and back;
and the third dataset went from E to F and back. The fourth dataset went to
all rooms in different order. The general trajectory is shown as a dashed line.
53
International Journal on Advances in Systems and Measurements, vol 7 no 1 & 2, year 2014, http://www.iariajournals.org/systems_and_measurements/
2014, © Copyright by authors, Published under agreement with IARIA - www.iaria.org

view network decided a measurement to originate from a
location encountered before. Similarly, the experience node
identiﬁcation number, or experience ID, is drawn, to indicate
when exactly the experience map was informed to create a
new location or to link to an existing location.
Figure 18 shows such matching diagrams for the ﬁrst
dataset, using a camera the ﬁrst time and using magnetometer
the second time as input. We observe a similar response in
both sensors, where locations encountered while going up the
run are found to be different from locations encountered while
going down the run. As explained before, this is expected
behavior. Three parallel, diagonal lines can be seen in the
ﬁgure, once for view template matches and once for experience
node matches. The ﬁrst, left hand side of these lines indicates
new local view cells or experience nodes being created. The
second and third of these lines start when the robot reaches
location A again, as indicated in Figure 17, on the 300th
and 600th second mark. These lines indicate matches to the
originally created view templates or experience nodes. False
positive matches are labeled FP on the ﬁgure. They can be
found between the lines created by correct matches to the
originally created view templates.
We also note many more false positive local view cell
matches when using the magnetometer. This is explained by
the RatSLAM parameters, where we have chosen a local
view cell matching threshold for the magnetometer that favors
matches, including some false positive matches, above one that
ﬁnds few matches but avoids ﬁnding false positive matches.
This parameter setting improves experience node matching,
facilitating effective loop closure. A camera does not need
this coarse matching threshold, because it has a sample rate six
times higher than our magnetometer. Matches will be reported
many times more often than with the magnetometer.
The other two initial datasets showed similar results, so
we can test the obtained parameters on our more challenging
fourth dataset. An overview of our parameters can be found
in Table XII. A new local view cell will be created when
the weight calculated by our measurement model is lower
than the match threshold. The recency threshold prevents the
local view network from matching new measurements with
recently created local view cells. In other words, with a
magnetometer frequency of about 5 Hz, the last eight seconds
of measurements are ignored when creating a match. The
dimension of the pose cell network is increased to further
cope with the false positive local view cell matches. The pose
cell injection energy is how much energy is injected into the
pose cell network on each local view match. Other parameters
are left on their default values. A detailed discussion of these
parameters when using the OpenRatSLAM system can be
found in [31].
Figure 19 shows the map created using only odometry, using
our geomagnetic RatSLAM, and using Grid Mapping. The
raw integrated odometry in Figure 19a shows some structure
of the environment when observed carefully, however, it can
in no way be used for either localization or navigation. The
trajectory created using Grid Mapping in Figure 19c shows
Table XII.
PARAMETERS USED FOR THE GEOMAGNETIC RATSLAM.
Parameter
Value
Match threshold
0.5
Recency threshold
40
Pose cell xy dimension
37
Pose cell injection energy
0.03
clearly what path has actually been followed by our robot.
Do note that this trajectory was created using a high preci-
sion laser range ﬁnder, in contrast to our simple smartphone
magnetometer. The trajectory created using the magnetometer
is shown in Figure 19b. It can be divided into two parts,
the coarse lower part and the precise upper part. The lower
part of the run has fewer experience node matches, i.e., loop
closure, so that different traversals of the same location are not
matched to each other. The upper part of the run has many
more experience node matches, so that different traversals of
the same location are matched to each other.
This difference is supported by the template match diagram
in Figure 18, where less experience node matches are seen in
the region when the robot is near location A (as indicated on
Figure 17), which is the 0th, 300th, 600th, and 900th second
region. The regions in Figure 17 indicated by A, C, and E
are located in a much older section of the building, with
wooden ﬂoors and thin walls, without any ofﬁces. This causes
the magnetic ﬁeld intensity to be only slightly distorted in
these regions. Consequently, geomagnetic localization in these
regions is difﬁcult.
The upper part of Figure 19b indicates a very precise
operation of geomagnetic RatSLAM. This is a more modern
region of the building, indicating that geomagnetic RatSLAM
is feasible to use as SLAM mechanism in average indoor
environments. The created experience map can subsequently
be used for both localization and navigation tasks.
V. CONCLUSION AND FUTURE WORK
In this research, we show that the geomagnetic B ﬁeld is
feasible to use in both localization and SLAM applications.
We ﬁrst show an extensive review of platform and sensor
independence when measuring the magnetic ﬁeld intensity.
Subsequently, we show localization feasibility with tests in
various environments. Lastly, we demonstrate our newly de-
veloped geomagnetic input for the local view network of the
RatSLAM system.
Our results indicate that geomagnetic localization and geo-
magnetic RatSLAM is strongly dependent on the environment.
Environments with much magnetic ﬁeld intensity distortion
will allow more accurate localization and SLAM. Such en-
vironments are rather commonplace for indoor applications:
most modern domestic or professional environments hold
enough metal and electric devices to distort the geomag-
netic ﬁeld. Environments with little magnetic ﬁeld intensity
distortion will not provide enough information for accurate
localization and SLAM.
We also note that geomagnetic localization performs better
when used for localization within limited areas, such as rooms.
54
International Journal on Advances in Systems and Measurements, vol 7 no 1 & 2, year 2014, http://www.iariajournals.org/systems_and_measurements/
2014, © Copyright by authors, Published under agreement with IARIA - www.iaria.org

Time [s]
Template/Experience ID number
0
100
200
300
400
500
600
700
800
900
0
500
1000
1500
2000
2500
3000
Template
Experience
FP
(a)
Time [s]
Template/Experience ID number
0
100
200
300
400
500
600
700
800
900
0
500
1000
1500
2000
2500
3000
3500
Template
Experience
FP
(b)
Figure 18.
View template and experience matches for the ﬁrst dataset: (a) shows the view template matches and experience node matches created using
camera; and (b) shows the view template matches and experience node matches created using magnetometer.
Distance [m]
Distance [m]
-20
-15
-10
-5
0
5
10
15
-5
0
5
10
15
20
(a)
Distance [m]
Distance [m]
-15
-10
-5
0
5
10
0
5
10
15
20
(b)
Distance [m]
Distance [m]
-20
-15
-10
-5
0
5
10
0
5
10
15
20
25
(c)
Figure 19.
Traveled path for the fourth dataset: (a) shows the raw integrated odometery; (b) shows the experience map created by geomagnetic RatSLAM;
and (c) shows the traveled path obtained from using the laser range ﬁnder based Grid Mapping algorithm available in ROS.
This suggests a complementarity with Wi-Fi as a localization
system, which provides a rather coarse spatial localization
and is used usually to locate up to room level [3]. In further
research we will focus on fusing the virtues of these systems
into the RatSLAM local view network. We will also look into
fusing other electromagnetic sensors in the same system.
REFERENCES
[1] D. Vandermeulen, C. Vercauteren, and M. Weyn, “Indoor localization
using a magnetic ﬂux density map of a building,” in The Third Inter-
national Conference on Ambient Computing, Applications, Services and
Technologies.
Porto: IARIA, 2013, pp. 42–49.
[2] R. Mautz, “Indoor Positioning Technologies,” Ph.D. dissertation, Insti-
tute of Geodesy and Photogrammetry, 2012.
[3] M. Weyn, “Opportunistic Seamless Localization,” Ph.D. dissertation,
University of Antwerp, 2011.
[4] L. C. Boles and K. J. Lohmann, “True navigation and magnetic maps
in spiny lobsters,” Nature, vol. 421, no. 6918, pp. 60–3, Jan. 2003.
[5] H. Mouritsen, G. Feenders, M. Liedvogel, and W. Kropp, “Migratory
birds use head scans to detect the direction of the earth’s magnetic ﬁeld,”
Current biology, vol. 14, no. 21, pp. 1946–9, Nov. 2004.
[6] S. Suksakulchai, S. Thongchai, D. Wilkes, and K. Kawamura, “Mobile
robot localization using an electronic compass for corridor environment,”
in SMC 2000 Conference Proceedings. 2000 IEEE International Con-
ference on Systems, Man and Cybernetics. ’Cybernetics Evolving to
Systems, Humans, Organizations, and their Complex Interactions’ (Cat.
No.00CH37166), vol. 5.
Nashville, TN, USA: IEEE, 2000, pp. 3354–
3359.
[7] J. Haverinen and A. Kemppainen, “Global indoor self-localization based
on the ambient magnetic ﬁeld,” Robotics and Autonomous Systems,
vol. 57, no. 10, pp. 1028–1035, Oct. 2009.
[8] W. F. Storms, “Magnetic ﬁeld aided indoor navigation,” DTIC Docu-
ment, Tech. Rep., 2009.
[9] J. Chung, M. Donahoe, C. Schmandt, I.-J. Kim, P. Razavai, and M. Wise-
man, “Indoor location sensing using geo-magnetism,” in Proceedings of
the 9th international conference on Mobile systems, applications, and
services - MobiSys ’11. New York, New York, USA: ACM Press, 2011,
p. 141.
[10] B. Li, T. Gallagher, A. G. Dempster, and C. Rizos, “How feasible is the
use of magnetic ﬁeld alone for indoor positioning?” in Indoor Position-
ing and Indoor Navigation (IPIN), 2012 International Conference on.
Sydney, Australia: IEEE, Nov. 2012, pp. 1–9.
[11] M. Frassl, M. Angermann, M. Lichtenstern, P. Robertson, B. J. Julian,
and M. Doniec, “Magnetic maps of indoor environments for precise
localization of legged and non-legged locomotion,” in Intelligent Robots
and Systems (IROS), 2013 IEEE/RSJ International Conference on.
IEEE, Nov. 2013, pp. 913–920.
[12] H. Durrant-Whyte and T. Bailey, “Simultaneous localization and map-
ping: part I,” IEEE Robotics & Automation Magazine, vol. 13, no. 2,
pp. 99–110, Jun. 2006.
[13] T. Bailey and H. Durrant-Whyte, “Simultaneous localization and map-
ping (SLAM): part II,” IEEE Robotics & Automation Magazine, vol. 13,
no. 3, pp. 108–117, Sep. 2006.
[14] R. Madhavan and H. F. Durrant-Whyte, “Natural landmark-based
autonomous vehicle navigation,” Robotics and Autonomous Systems,
vol. 46, no. 2, pp. 79–95, 2004.
[15] M. Eich, R. Hartanto, S. Kasperski, S. Natarajan, and J. Wollenberg,
“Towards Coordinated Multirobot Missions for Lunar Sample Collection
55
International Journal on Advances in Systems and Measurements, vol 7 no 1 & 2, year 2014, http://www.iariajournals.org/systems_and_measurements/
2014, © Copyright by authors, Published under agreement with IARIA - www.iaria.org

in an Unknown Environment,” Journal of Field Robotics, vol. 31, no. 1,
pp. 35–74, Jan. 2014.
[16] M. Montemerlo and S. Thrun, FastSLAM: A scalable method for the
simultaneous localization and mapping problem in robotics, B. Siciliano,
O. Khatib, and F. Groen, Eds.
Springer Berlin Heidelberg New York,
2007, vol. 27.
[17] M. Milford and G. Wyeth, “Persistent navigation and mapping using
a biologically inspired SLAM system,” The International Journal of
Robotics Research, vol. 29, no. 9, pp. 1131–1153, 2010.
[18] ——, “Mapping a Suburb With a Single Camera Using a Biologically
Inspired SLAM System,” IEEE Transactions on Robotics, vol. 24, no. 5,
pp. 1038–1053, Oct. 2008.
[19] J. Steckel, D. Vanderelst, and H. Peremans, “BatSLAM: combining
biomimetic sonar with a hippocampal model,” in Proceedings of the
Robotica Conference, Guimaraes, Portugal, 2012, pp. 81–86.
[20] J. Steckel and H. Peremans, “BatSLAM: Simultaneous localization and
mapping using biomimetic sonar.” PloS ONE, vol. 8, no. 1, p. e54076,
Jan. 2013.
[21] M. Milford and A. Jacobson, “Brain-inspired Sensor Fusion for Navi-
gating Robots,” in Robotics and Automation (ICRA), 2013 IEEE Inter-
national Conference on.
Karlsruhe, Germany: IEEE, 2013, pp. 2891–
2898.
[22] I. Vallivaara, J. Haverinen, A. Kemppainen, and J. Roning, “Simul-
taneous localization and mapping using ambient magnetic ﬁeld,” in
Multisensor Fusion and Integration for Intelligent Syst. (MFI), 2010
IEEE Conf. on.
IEEE, Sep. 2010, pp. 14–19.
[23] M. Angermann and P. Robertson, “FootSLAM: Pedestrian Simultaneous
Localization and Mapping Without Exteroceptive Sensors—Hitchhiking
on Human Perception and Cognition,” Proceedings of the IEEE, vol.
100, no. Special Centennial Issue, pp. 1840–1848, May 2012.
[24] P. Robertson, M. Frassl, M. Angermann, M. Doniec, B. J. Julian,
M. G. Puyol, M. Khider, M. Lichtenstern, and L. Bruno, “Simultaneous
Localization and Mapping for Pedestrians using Distortions of the
Local Magnetic Field Intensity in Large Indoor Environments,” in
Indoor Positioning and Indoor Navigation (IPIN), 2013 International
Conference on.
Montbéliard-Belfort, France: IEEE, 2013, p. 10.
[25] S. Maus, S. Macmillan, S. McLean, B. Hamilton, M. Nair, A. Thomson,
and C. Rollins, “The US/UK world magnetic model for 2010-2015,”
British Geological Survey, Edinburgh, UK, Tech. Rep., 2010.
[26] P. Bahl and V. N. Padmanabhan, “RADAR: an in-building RF-based user
location and tracking system,” in INFOCOM 2000. Nineteenth Annual
Joint Conference of the IEEE Computer and Communications Societies.
Proceedings. IEEE., vol. 2.
Tel Aviv, Israel: IEEE, 2000, pp. 775–784
vol.2.
[27] M. Milford, Robot navigation from nature: Simultaneous localisation,
mapping, and path planning based on hippocampal models, B. Siciliano,
O. Khatib, and F. Groen, Eds.
Springer, 2008, vol. 41.
[28] G. Wyeth and M. Milford, “Spatial cognition for robots,” IEEE Robotics
and Automation Magazine, vol. 16, no. 3, pp. 24–32, Sep. 2009.
[29] S. M. Stringer, T. P. Trappenberg, E. T. Rolls, and I. E. T. de Araujo,
“Self-organizing continuous attractor networks and path integration: one-
dimensional models of head direction cells.” Network: Computation in
Neural Syst., vol. 13, no. 2, pp. 217–42, May 2002.
[30] S. M. Stringer, E. T. Rolls, T. P. Trappenberg, and I. E. T. de Araujo,
“Self-organizing continuous attractor networks and path integration:
two-dimensional models of place cells.” Network: Computation in
Neural Syst., vol. 13, no. 4, pp. 429–46, Nov. 2002.
[31] D. Ball, S. Heath, J. Wiles, G. Wyeth, P. Corke, and M. Milford, “Open-
RatSLAM: an open source brain-based SLAM system,” Autonomous
Robots, pp. 1–28, Feb. 2013.
[32] M. Quigley, K. Conley, B. Gerkey, T. Foote, J. Leibs, R. Wheeler,
and A. Ng, “ROS: an open-source Robot Operating System,” in ICRA
workshop on open source software, vol. 3, no. 3.2, 2009.
[33] G. Grisetti, C. Stachniss, and W. Burgard, “Improved Techniques for
Grid Mapping With Rao-Blackwellized Particle Filters,” IEEE Transac-
tions on Robotics, vol. 23, no. 1, pp. 34–46, Feb. 2007.
56
International Journal on Advances in Systems and Measurements, vol 7 no 1 & 2, year 2014, http://www.iariajournals.org/systems_and_measurements/
2014, © Copyright by authors, Published under agreement with IARIA - www.iaria.org

