Measurement Accuracy on Indoor Positioning System Using SS Ultrasonic Waves for
Drone Applications
Tatsuki Okada
Graduate school of Software and
Information Science
Iwate Prefectural University
020-0693,Sugo Japan
Email: g231s004@s.iwate-pu.ac.jp
Akimasa Suzuki
Department of Information Science,
Iwate Prefectural University
020-0693,Sugo Japan
Email: suzuki_a@iwate-pu.ac.jp
Abstract—This study develops a drone positioning system for use
in indoor environments, including in dark places, inaccessible
areas, and ordinary living environments where it is difﬁcult to
realize by any conventional methods. Various indoor applications
using drones have been developed for applications such as
drone communication systems and wall surface inspection, which
require remote estimation of their position. For outdoor applica-
tions, a Global Navigation Satellite System (GNSS) is generally
used to obtain the drone position. However, as the radiowaves of
the GNSS cannot reach indoors or between buildings, camera-
based methods, such as Simultaneous Localization And Sapping
(SLAM), are applied to estimate the drone’s position. The system
uses a noise-resistant, code-division-multiplexed Spread Spectrum
(SS) ultrasonic waves for three-dimensional positioning. We
develop transmitter and receiver hardware using SS ultrasonic
waves and evaluate the effect of wind and sound of the positioning
system during drone operations on the SS ultrasonic positioning.
The accuracy of the positioning system was veriﬁed through
experiments, and the results showed that a positioning accuracy
within 15 cm was possible despite the effects of downwash
generated by the drone’s wings.
Keywords–Drone; Indoor Positioning System; SS Ultrasonic
Waves; Downwash
I.
INTRODUCTION
As Unmanned Aerial Vehicles (UAV), drones can be ﬂown
autonomously or operated by remote control. Because they
can take off and land vertically in small spaces, they can
be used to perform a variety of activities in unstable places
where people and vehicles cannot enter. Previous studies
have investigated the use of drones for autonomous search
and rescue operations for victims following a disaster [1],
meteorological observations [2], and logistics such as home
delivery [3].
When used indoors, drones act as communication robots
[4]. However, an appropriate distance is required to allow
natural and smooth communication between a human and
an autonomous mobile robot. To ensure the appropriate po-
sitioning in indoor spaces, the drone’s coordinates can be
used to develop real-time centimeter-order positioning. On the
other hand, a relevant study investigated the use of drones for
periodic inspections to detect aging degradation of locations
where staff is unable to work, such as high walls of tanks
and industrial chimneys [5]. Using drones to conduct periodic
inspections is expected to reduce the high cost of these
inspections.
It is more dangerous to use drones indoors than outdoors
because it is easier to crash the drone into obstacles, such
as humans and walls. Thus, it is essential to determine the
position of the drone in relation to other objects. As horizontal
and vertical relationships are important in these applications,
it is essential to obtain absolute coordinates in space. While a
Global Navigation Satellite System (GNSS) is generally used
to obtain the absolute coordinates of a drone, the GNSS signal
is difﬁcult to detect indoors. Simultaneous Localization and
Mapping (SLAM) is often used in non-GNSS environments.
However, the ﬂight path of a routine inspection is often in a
dark place and the walls do not always follow a uniform pat-
tern, causing large errors in SLAM’s self-position estimation.
We therefore propose an indoor positioning system for
drones using spread spectrum (SS) ultrasonic waves [6]. This
system is expected to obtain 3D coordinates with an accuracy
of 10cm. However, noise from the propellers or downwash
of a drone may lower this accuracy. Downwash is the wind
created by the drone’s propellers. Therefore, this study con-
ducts an experiment to evaluate the positioning accuracy of
drone ﬂights during a periodic inspection. Section II presents
related research. Section III presents an overview of indoor
positioning systems using SS ultrasound. Section IV presents
the experiments and their results.
II.
RELEVANT STUDIES AND PREVIOUS WORKS
There is no positioning method with drones for indoor
multi environments, including dark environments with accu-
racy under 10 cm. Various sensor systems have been inves-
tigated for indoor positioning purposes, including pseudolites
[7] and beacons [8]. Of these, ultrasonic-wave-based systems
have lower cost and greater accuracy. However, because these
systems use the time-division multiplexing method with on-off
keying, which grows increasingly cumbersome as the number
of objects to be measured grows, they generally have weak
noise resistance and are slow to acquire data. Systems using SS
ultrasonic signals have therefore been investigated to overcome
these drawbacks [9] [10].
Analogous to SS radiowave systems (e.g., GPS), we have
proposed a real-time 3D positioning system using SS ultrasonic
signals with a band-limited transducer, A Low-Power Field
Programmable Gate Array (FPGA), and a small microproces-
sor [11] [12]. In previous studies, we discussed factors such
as positioning errors in indoor environments [6] and signal
66
Copyright (c) IARIA, 2020.     ISBN:  978-1-61208-795-5
VEHICULAR 2020 : The Ninth International Conference on Advances in Vehicular Systems, Technologies and Applications

degradation with band-limited transducers [13] and showed
the measurement accuracy of the positioning system using SS
ultrasonic signals. We also proposed a calculation algorithm
based on the Newton–Raphson method for continuous signals,
rather than conventional pulse signals. As a result, 3D co-
ordinates can be obtained every 80ms using Code Division
Multiple Access (CDMA) with continuous signals [14].
We evaluated the positioning accuracy of SS ultrasonic
waves using a ground-based mobile robot [15]. Other studies
have proposed using not only SS ultrasonic waves but also
image sensors for drone positioning [16] and applying drones
to limited situations such as a greenhouse [17]. Indoor posi-
tioning accuracy has been discussed using the Kinect camera,
the average positioning error was 48mm [18]. However, it is
difﬁcult to use in the dark. This study develops an indoor
positioning system using only SS ultrasonic waves that can
be used in dark places where image sensors are ineffective.
III.
INDOOR DRONE POSITIONING SYSTEM USING SS
ULTRASONIC SIGNALS
This section describes the indoor positioning method using
SS ultrasonic waves and our proposed system.
A. A method for positional calculation
Figure 1 presents the positioning calculations for the indoor
positioning system using SS ultrasonic waves. Spheres are
drawn to determine the center point on the radius between
a receiver Rc and each transmitter, and two pairs of spheres
are selected centering on Tr1 and Tr3, and Tr2 and Tr3,
respectively. From these pairs of spheres, Plane13 and Plane23
are solved as a simultaneous equation and a line of intersection
is obtained from the two planes. Last, the points at the
intersection of the line with an equation of an arbitrary sphere
are solved. Figure 2 also shows a ﬂowchart of the algorithm for
the positioning calculation in Figure 1. Two intersection points
are obtained transmitters are installed along the wall; therefore,
one solution becomes outside of the room. Thus, the other
solution becomes the position of the receiver Rc. When using
four transmitters, four position results are obtained. Thus, the
measurement position is deﬁned as an average of these results.
B. Hardware structure of a positioning system using SS ultra-
sonic waves
A 3D position can be calculated on the basis of three or
more Times Of Flight (TOF) between the transmitters and the
receiver. Figure 3 shows the system architecture of the TOF
measurement for the positioning system. The transmission
unit contains a D/A converter and an FPGA to generate
carrier waves and M-sequences. The reception unit includes
an A/D converter and an FPGA for correlation calculation,
peak detection, and time measurement.
An SS signal is generated by the transmission unit to
multiple carrier waves by M-sequences and is outputted from
a transducer after D/A conversions. At the start of the trans-
mission, a time counter is started to measure the TOF, and
correlation values are calculated from the sound data via the
A/D converter as online and real-time hardware processing.
The time counter measures the TOF by counting the sampling
times until arriving at peak correlation values, obtained by
the peak detector. Then, the 3D position of the receiver can
be calculated based on three or more TOFs between the
Figure 1. Positioning calculations for the indoor positioning system.
Figure 2. Flowchart on our position calculation
transmitters and receiver. The correlation calculator part is
installed in the hardware as shown in Figure 3. Distance
is obtained from the TOF obtained from the hardware and
dimensional position is measured. Real-time positioning is
enough available because this processing can be calculated
lightly in software using optimized expressions.
C. SS signal
In our indoor positioning system, SS signals are modulated
by binary phase shift keying using M-sequence, a pseudo-
random code sequence, with a direct sequence method. Al-
though the M-sequence of ‘0’ or ‘1’ is generated by a shift
register, we replace a value of ‘-1’ with ‘0’ for easy signal
processing. Figure 4 shows a received SS signal, where the
signals corresponding to ‘1’ and ‘-1’ are plotted in solid and
dashed lines, respectively. Each dot of Figure 4 is described
as a sample convert to digital signal; the amount of sample
including one period of carrier waves is decided on four
samples. Here, chip length tc is deﬁned as the time required to
describe 1-chip of the M-sequence; the chip length can also be
described as tc = 4/f using carrier frequency f. The length of
67
Copyright (c) IARIA, 2020.     ISBN:  978-1-61208-795-5
VEHICULAR 2020 : The Ninth International Conference on Advances in Vehicular Systems, Technologies and Applications

Figure 3. System architecture of the TOF measurement.
Figure 4. Spread spectrum ultrasonic signal.
SS ultrasonic signals becomes 29 −1 = 511 [chip] due to a 9-
bit shift register for the M-sequence in our system. These four
channels of the transmitters are generated by the following tap
positions: {4,9}, {3,4,6,9}, {4,5,8,9}, and {1,4,8,9}. In this
system, the frequency of the carrier waves is 40.2kHz.
D. Our proposed indoor positioning system using SS ultra-
sonic for drones
In this system, we use a transmitter with a closed-type
aperture (PC40-18S, Nippon Ceramic Co., Ltd.) and a “Mini”
SiSonicTMultrasonic receiver (SPM0404UD5, Knowles) as
general-purpose ultrasonic transducers.
Figure 5 shows the layout of the transmitters and receiver
for our proposed system. We use two example situations, a
dark plant and a room, as shown in Figures 5(a) and 5(b),
respectively. Figure 5(a) represents a periodical inspection at
a plant, where it is difﬁcult to install infrastructure, such
as transmitters, in the building. Transmitters are therefore
set on a cross-shaped mount, as shown in Figure 5(a), for
convenient mounting. Considering the Dilution Of Precision
(DOP), the larger the mount size, the more accurate the
expected positioning accuracy, although a larger size limits
the installation position options and is inconvenient to carry.
Figure 5(b) represents a communication drone. Transmitters
are mounted in four corners of a room. In this situation, the
transmitters are more difﬁcult to install, but the DOP is better
than the situation in Figure 5(a). In this paper, we conduct
experiments using the layout shown in Figure 5(a).
The drone is ﬁtted with a microphone and small receiving
hardware, which processes the ultrasonic waves. Figure 6
illustrates the hardware schematic mounted on the drone. The
hardware consists of an Evaluation Board (ACM204-1158C)
installed in the FPGA (Intel Cyclone IV); a transceiver for
timing the synchronization of the ultrasonic transmitter unit; a
receiver unit; a USB interface for output coordinates; an input
part to receive the ultrasonic waves, including an A/D converter
Figure 5. Measurement layout for the proposed system for (a) a dark plant
and (b) a room.
Figure 6. Receiving hardware for the drone measurements.
and ampliﬁer; and SD-RAM for the real-time correlation
calculations.
The USB interface and input part are connected to a
computer and a microphone, respectively. Ultrasonic waves re-
ceived by the microphone are converted to A/D and input into
the FPGA, where the correlation calculations, peak detection,
and TOF calculations are performed. The SD-RAM processes
the real-time correlation calculations, and the transceiver mea-
sures the TOF based on the transmission timing received from
the ultrasonic transmitter. Finally, the drone obtains the TOF
by USB UART/FIFO IC (FTDI FT232H).
IV.
POSITIONING ERROR BY DRONE NOISE AND
DOWNWASH
We conducted experiments to evaluate the effect of motor
noise, wind noise, and downwash generated by the pro-
pellers during ﬂight on the SS ultrasonic positioning. Figure
7 shows the environment used for this experiment, which
was a room 2000mm long and 4000mm wide. We used
a Mavic 2 zoom by DJITMdrone for this experiment. Four
transmitters Tr1–Tr4 were placed near the center of the room.
As shown in Figure 7, the drone’s starting point was the ﬂoor
at the left front edge of the room. The coordinates of the
transmitters were Tr1[mm] = (500, 2000, 1500), Tr2[mm] =
(1000, 1500, 1500), Tr3[mm]
=
(1500, 2000, 1500), and
Tr4[mm] = (1000, 2500, 1500). The transmitting SS signal
was ampliﬁed to 50Vp−p.
68
Copyright (c) IARIA, 2020.     ISBN:  978-1-61208-795-5
VEHICULAR 2020 : The Ninth International Conference on Advances in Vehicular Systems, Technologies and Applications

Figure 7. Layout for the positioning experiment.
Figure 8 shows the experimental environment. SS Ultra-
sonic waves are transmitted upward from Tr1–Tr4 mounted on
a tripod, and received by Rc, mounted on a bridge of wood.
Figure 9 shows the measurement point. The white and
black circles in Figure 9 denote the transmit and receive points,
respectively. Rc(1000,2000,3000)[mm], Rc(1000,2000,3500)[mm],
and Rc(1000,2000,4000)[mm] are the receiving points at the cen-
ter of the x−y plane of the four transmitters, located 1500mm,
2000mm,
and
2500mm
above
the
transmitters,
respec-
tively. Of the other receiving points, Rc(1000,1500,3000)[mm]
and Rc(1000,1500,4000)[mm] are above transmitter Tr2 and
Rc(500,2000,4000)[mm] is above transmitter Tr1.
l1, l2, l3, and l4, which are the distances between the
transmitters and a receiver (Figure 7), are measured for each
receiving point. The drone is made to hover at a position
approximately 500mm above the receiver. We examine the
accuracy when the drone is in ﬂight and when the drone is
not in ﬂight in the environment. Five trials were conducted for
each receiving point.
A. Measurement error in distance
Figure 10 shows the average differences in the distances
from the hovering drone for ﬁve trials. The vertical and
horizontal axes on each graph denote the difference in distance
from the drone compared to the measured distance from l1 to
l4 to Tr1 to Tr4, respectively. The differences in distances are
shown as absolute values, and the average difference in the
distance is shown as a black line.
The results of the experiment show that all measured
distances are obtained when the drone is ﬂying, but the mea-
surement distance is affected by the drone’s ﬂight. Figure 10(a)
shows the drone’s distance for the four transmitters, where the
receiving point is on the center of the x − y plane. A greater
distance between the transmitter and receiver indicates larger
measurement distance. Figure 10(b) compares the accuracy of
the distance measurement at the center position (1000, 2000)
with that when the drone is above Tr2 at heights of 3000mm
and 4000mm. The difference in distance measurement above
Tr2 is the same as that shown in Figure 10(a). Especially the
difference in the distance between Tr2 and Rc(1000,1500,4000),
where above Tr2, is increased by the drone hovering. Fig-
ure 10(c) shows the measurement distance at the height of
4000mm, which shows that the difference in the distance
Figure 8. A view of the experiment from above.
Figure 9. Measurement points of the receivers.
between Tr1 and Rc(500,2000,4000) increases. Compared to
Rc(1000,2000,4000), however, the average difference decreases.
These graphs indicate that a drone’s downwash and noise
have a signiﬁcant effect on the measurement distance when the
transmitter and receiver are facing each other. The difference
in the measured distance with and without drones is within
5cm.
B. Positioning Error
The experimental results were evaluated using the Root
Mean Square (RMS) of the difference between the results and
69
Copyright (c) IARIA, 2020.     ISBN:  978-1-61208-795-5
VEHICULAR 2020 : The Ninth International Conference on Advances in Vehicular Systems, Technologies and Applications

(a) at each receiver’s height on the center position
(b) center position vs.above Tr2
(c) at height of 4000mm
Figure 10. Difference in the measured distance occurred by drone ﬂight.
the installed distances. emrms is deﬁned as
emrms =
p
(dmi − di)2
(1)
where di and dmi are the measured distance and the true
distance between a receiver and i-th transmitter, respectively.
Figure 11 shows RMS positioning errors at the same
receivers shown in Figure 10 and the maximum and minimum
positioning errors as “an expression” of variance. The vertical
and horizontal axes of Figure 11 denote the RMS positioning
error and the receiver coordinates, respectively. The positioning
errors are an average of ﬁve trials.
These results indicate that the positioning error increased
when the drone is ﬂying because of downwash and ﬂight noise;
(a) at the center position
(b) on center position vs.above Tr2
(c) at a height of 4000mm
Figure 11. RMS positioning error.
however, the average errors are less than 15cm. The results of
Figures 11(a) and 11(b) conﬁrm that the greater the distance
between the transmitter and receiver, the larger the average
RMS positioning error and variance when the drone was being
ﬂown. Figure 11(c) shows that the most variance is observed
at the center of (1000, 2000, 4000).
The results of the experiment indicate that the transmission
is accurate enough to measure a drone for a periodic inner
wall inspection. We can expect more accurate positioning by
compensating for errors caused by the angle of the transmitter
and receiver and by the measurement distance [19].
70
Copyright (c) IARIA, 2020.     ISBN:  978-1-61208-795-5
VEHICULAR 2020 : The Ninth International Conference on Advances in Vehicular Systems, Technologies and Applications

V.
CONCLUSIONS
This study proposed a positioning system using SS ultra-
sonic waves for indoor applications, such as drone communi-
cation and wall surface inspection, and evaluated the effects of
the system against drone downwash and noise. The proposed
SS ultrasonic positioning system transmits and receives SS
signals using M-sequence, and the distance is measured using
the TOF method. This study mounted small hardware and
wideband microphones on the drone. The experimental results
for assuming an inner wall inspection by the drone shows that
downwash increases the positioning errors, but the errors are
less than 15cm. We can expect greater accuracy in the layout of
a communication robot because of low DOPs. Therefore, our
positioning system using SS ultrasonic waves can be applied
for drone application. We will examine the errors in positioning
with multiple drones and discuss their errors occurred by ﬂight
noise and downwash.
ACKNOWLEDGEMENTS
This work was supported by MEXT KAKENHI Grant
Number JP 10609423 and Foster Electric Company, Limited.
We would like to thank Uni-edit (https://uni-edit.net/) for
editing and proofreading this manuscript.
REFERENCES
[1]
L. Apvrille, T. Tanzi, and J.-L. Dugelay, “Autonomous drones for
assisting rescue services within the context of natural disasters,” in 31st
URSI General Assembly and Scientiﬁc Symposium, Beijing, China,
Aug 2014, pp. 1–4.
[2]
A. E. MacDonald, “A global proﬁling system for improved weather and
climate prediction,” Bulletin of the American Meteorological Society,
vol. 86, no. 12, Dec. 2005, pp. 1747–1764. [Online]. Available:
https://doi.org/10.1175/bams-86-12-1747
[3]
W. Yoo, E. Yu, and J. Jung, “Drone delivery: Factors affecting the
public’s attitude and intention to adopt,” Telematics and Informatics,
vol.
35,
no.
6,
2018,
pp.
1687
–
1700.
[Online].
Available:
http://www.sciencedirect.com/science/article/pii/S0736585318300388
[4]
U. Nagarajan, G. Kantor, and R. L. Hollis, “Human-robot physical
interaction
with
dynamically
stable
mobile
robots,”
Proceedings
of the 4th ACM/IEEE international conference on Human robot
interaction - HRI ’09, Mar 2009, p. 281–282. [Online]. Available:
http://dx.doi.org/10.1145/1514095.1514176
[5]
F. Cunha and K. Youcef-Toumi, “Ultra-wideband radar for robust in-
spection drone in underground coal mines,” in 2018 IEEE International
Conference on Robotics and Automation (ICRA), Brisbane,Australia,
Mar 2018, pp. 86–92.
[6]
A. Suzuki, T. Iyota, Y. Choi, Y. Kubota, K. Watanabe, and A. Ya-
mane, “Measurement accuracy on indoor positioning system using
spread spectrum ultrasonic waves,” 4th International Conference on
Autonomous Robots and Agents, Feb 2009, pp. 294–297.
[7]
X. G. et al., “Doppler differential positioning technology using the
bds/gps indoor array pseudolite system,” Sensors, vol. 19, no. 20, Oct
2019, p. 4580. [Online]. Available: http://dx.doi.org/10.3390/s19204580
[8]
D. Kudou, M. Horikawa, T. Furudate, and A. Okamoto, “Indoor
positioning method using proximity bluetooth low-energy beacon,”
in Proceedings of the 17th Asia Paciﬁc Industrial Engineering and
Management Systems Conference (APIEMS2016), Taiwan Taipei, Dec
2016.
[9]
M. Hazas and A. Hopper, “Broadband ultrasonic location systems for
improved indoor positioning,” IEEE Transactions on Mobile Comput-
ing, vol. 5, no. 5, 2006, pp. 536–547.
[10]
L. Segers, A. Braeken, and A. Touhaﬁ, “Optimizations for FPGA-
based ultrasound multiple-access spread spectrum ranging,” Journal
of Sensors, vol. 2020, Jun. 2020, pp. 1–26. [Online]. Available:
https://doi.org/10.1155/2020/4697345
[11]
A. Suzuki, T. Iyota, and K. Watanabe, “A performance comparison
of measurement distance between ook and ss modulation for indoor
positioning using ultrasonic transducers,” IEEE Sensors, Oct 2011.
[12]
——, “Real-time distance measurement for indoor positioning system
using spread spectrum ultrasonic waves,” in Ultrasonic Waves. InTech,
Mar 2012. [Online]. Available: https://doi.org/10.5772/30215
[13]
A. Yamane, I. Taketoshi, C. YoungWoon, K. Yuzuru, and W. Kazuhiro,
“A study on propagation characteristics of spread spectrum sound waves
using a band-limited ultrasonic transducer,” Journal of Robotics and
Mechatronics, vol. 16, no. 3, 2004, pp. 333–341.
[14]
K. Kumakura, A. Suzuki, , and T. Iyota, “Indoor positioning for moving
objects using a hardware device with spread spectrum ultrasonic waves,”
International Conference on Indoor Positioning and Indoor Navigation
(IPIN 2012), Nov 2012, pp. 1–6.
[15]
A. Suzuki, K. Kumakura, D. Tomizuka, Y. Hagiwara, Y. Kim,
and Y. Choi, “Positioning accuracy on robot self-localization by
real-time indoor positioning system with SS ultrasonic waves,”
Journal
of
the
Korea
Society
for
Power
System
Engineering,
vol.
17,
no.
5,
Oct.
2013,
pp.
100–111.
[Online].
Available:
https://doi.org/10.9726/kspse.2013.17.5.100
[16]
J. Paredes, F. ´Alvarez, T. Aguilera, and J. Villadangos, “3d indoor
positioning of UAVs with spread spectrum ultrasound and time-of-ﬂight
cameras,” Sensors, vol. 18, no. 2, Dec. 2017, p. 89. [Online]. Available:
https://doi.org/10.3390/s18010089
[17]
Z. H. et al., “A noise tolerant spread spectrum sound-based local
positioning system for operating a quadcopter in a greenhouse,”
Sensors, vol. 20, no. 7, Apr. 2020, p. 1981. [Online]. Available:
https://doi.org/10.3390/s20071981
[18]
H. Zhang, G. Chen, Z. Wang, Z. Wang, and L. Sun, “Dense 3d
mapping for indoor environment based on feature-point slam method,”
in Proceedings of the 2020 the 4th International Conference on
Innovation in Artiﬁcial Intelligence, ser. ICIAI 2020.
New York, NY,
USA: Association for Computing Machinery, 2020, p. 42–46. [Online].
Available: https://doi.org/10.1145/3390557.3394301
[19]
A. Suzuki and T. Iyota, “Angular dependence of transducers for indoor
positioning system using ss ultrasonic waves,” 2012 International Con-
ference on Indoor Positioning and Indoor Navigation, Nov 2012, pp.
1–6.
71
Copyright (c) IARIA, 2020.     ISBN:  978-1-61208-795-5
VEHICULAR 2020 : The Ninth International Conference on Advances in Vehicular Systems, Technologies and Applications

