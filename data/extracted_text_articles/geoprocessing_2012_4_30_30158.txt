Vehicle Position Determination — Using Markers and Speed Reports
Bruce Beyeler and David C. Pheanis
Computer Science and Engineering
Ira A. Fulton School of Engineering
Arizona State University
Tempe, Arizona 85287-8809 USA
Bruce.Beyeler@ASU.edu or David.Pheanis@ASU.edu
Abstract—The use of cell phones as data-collection devices
for obtaining automotive trafﬁc-ﬂow information provides the
potential for instrumenting large numbers of vehicles at a
minimal cost. Effectively incorporating cell phones as sensors
in trafﬁc-ﬂow collection systems requires a clear understanding
of the accuracy of the data produced by each cell phone.
Previous experiments and ﬁeld trials have typically measured
the accuracy of cell-phone data at large — comparing all of the
collected cell-phone reports across a given segment of the road
against data obtained with traditional techniques such as loop
detectors. The approach that we take in this research differs by
comparing each individual cell-phone report with the known
position of the vehicle at the time of the report. This paper
describes the technique we used for accurately determining the
actual speed and position of a vehicle at any given point in time
during a test trip by using published map data, speed reports
from the vehicle itself, position reports from a hand-held GPS
unit with an external antenna, and operator inputs.
Index Terms—GPS, trafﬁc ﬂow, cell phones, data collection.
I. INTRODUCTION
Rapid advances in cell-phone technology coupled with
the penetration of cell phones into the general population
provide an opportunity to utilize cell phones as mobile
probes that provide real-time trafﬁc-ﬂow information. Multi-
ple studies and experiments show the feasibility of using cell
phones to collect both basic trafﬁc-ﬂow information such
as vehicle position and speed [1][2] and additional types
of information including road conditions, bumps, braking
conditions, and the presence of honking [3].
Incorporating cell phones into trafﬁc-ﬂow data-collection
techniques involves some challenges that we must address,
most notably, determining the accuracy of the reports that
cell phones generate [4][5][1]. We can determine the accu-
racy of data reports by comparing the reports with the known
ground truth. In most cases, the ground truth for individual
vehicles is not easy to determine. Most ﬁeld tests utilize
passive collection techniques, such as inductive loops, to
provide the ground truth for comparison purposes.
Rather than compare collected data in the traditional
sense, this research focuses on individual cell-phone reports
and comparing each report with the ground truth for that cell
phone at the time of the report generation. In order to carry
out this comparison, we must determine the ground truth
for a given vehicle at any point in time. With our approach
there is no need for physical roadway support such as loop
detectors, and our approach works over the entire length of
any desired roadway, not just where sensors are available.
This paper describes the technique of combining various
inputs in order to determine the vehicle’s precise location
and speed at any point in time.
The next section of this paper discusses related work,
and Section III highlights some of the challenges that we
face while also providing an overview of our approach.
In subsequent sections we explain how we use map data,
vehicle speed data, GPS data, and operator inputs. Next we
detail the calculations that we use for determining the actual
position of a test vehicle at any given time, and then we
itemize the steps for ﬁnding the vehicle position. Finally,
we summarize the results of our work and mention what
our next steps will be going forward.
II. RELATED WORK
The growing interest in using cell phones in probe
vehicles to detect and report trafﬁc-ﬂow conditions has
generated a number of research projects and experiments.
Some of these experiments exploit the characteristics of the
cellular network to calculate a vehicle’s location and speed
[6][7] while other experiments utilize the GPS capabilities
available in most cell phones today [8][1].
While assessing the accuracy of the cell phone data, most
of these experiments compare the data collected by cell
phones with that collected by traditional means — most
often inductive loops embedded in roadways. Loop sensors
or other types of point sensors count the number of vehicles
that pass by the sensor and provide data for calculating the
average speeds and time of traversal for the segments of the
road between adjacent sensors [9]. In order to compare the
accuracy of cell phones against this traditional data, some
of these experiments average cell-phone reports over the
same segments of the road and compare them against the
data that the inductive loops provide. Other tests include
additional data such as the speed of the vehicle obtained
directly from the vehicle [10]. The resulting comparisons
provide insight into the overall accuracy of the cell-phone
reports but do not characterize the accuracy of individual
cell phones. Furthermore, this technique provides no insight
117
Copyright (c) IARIA, 2012.     ISBN: 978-1-61208-178-6
GEOProcessing 2012 : The Fourth International Conference on Advanced Geographic Information Systems, Applications, and Services

into the particular factors that directly affect a cell phone’s
accuracy.
Our overall research focuses on optimizing data-collection
strategies by incorporating knowledge about the accuracy of
individual cell phones. Minh and Kamioka suggest a similar
technique in their research with their Pinpoint approach [11].
Their concept of sending the “right” data at the “right” time
aligns closely with our research approach. A key distinction
of our research involves incorporating the reported accuracy
of individual cell phones into the reporting algorithms.
In order to characterize the accuracy of individual cell
phones under various conditions, we take a different ap-
proach from the works cited above. Our ﬁeld tests constrain
the probe vehicles to a known path and the phones to various
positions in the vehicle. In addition, we incorporate outside
information including map data, speed information from
the vehicle itself, and operator input. This paper describes
our techniques for determining the ground truth, exactly
where the probe vehicle is at any given point in time during
the experiment, for each cell-phone report — something
typically reserved for simulations. Establishing the ground-
truth data for each individual report allows us to analyze
the accuracy of each individual cell phone under a variety
of conditions.
III. CHALLENGE AND APPROACH
Measuring the accuracy of a position report from a static
(i.e., not moving) cell phone is easy. Simply put the cell
phone at a known location, and compare the position report
from the cell phone to the actual location of the cell phone.
However, to use cell phones for collecting vehicular trafﬁc-
ﬂow data, we must get reports from cell phones that are
inside moving vehicles. Multiple factors may affect the
accuracy of a cell phone’s speed-and-position reports when
the cell phone is in a moving vehicle. For example, the cell
phone may not have a consistently clear view of the sky
because of terrain, buildings, or the structure of the vehicle
itself. Also, the cell phone may not be able to produce
accurate reports due to the simple fact that the cell phone is
moving, especially when the vehicle is changing direction.
Before we can assess the accuracy of speed-and-position
reports from a cell phone in a moving vehicle, we must
somehow determine the actual speed and position of the
vehicle. Our goal in this paper is to determine the actual
speed and location of a test vehicle at any given time in a test
trip so we can measure the accuracy of a cell-phone report
whenever the cell phone makes a report. We can determine
the actual speed directly from the vehicle itself by using
the vehicle’s diagnostic interface. However, determining our
exact position on the road is a bit more of a challenge. By
combining static data published by the Arizona Department
of Transportation (ADOT) with dynamic data that we collect
during the test run, we can determine the vehicle’s actual
location at any point in time.
Our technique utilizes map data published by the Arizona
Department of Transportation (ADOT), speed data that we
collect from the vehicle, GPS data that we collect from a
hand-held GPS unit with an external antenna, and operator
input that we collect via a laptop PC in the vehicle under
test. Our data-collection procedures [12], [13], [14] dictate
that we follow the same center-line path that the ADOT
data-collection vehicles used, so we have a known path. In
addition, the test vehicle will be passing precisely located
milepost markers, and the operator will use the laptop PC
to ﬂag the milepost markers in the data log, thus giving
us a set of time-correlated positions. We can determine the
appropriate milepost marker corresponding to each item in
the operator log by using the GPS reports at or near the
time of the operator’s mark.
IV. MAP INFORMATION
ADOT provides two relevant sets of map information —
data for the centerline track and data for the milepost
markers. The data values for the centerline track provide
points in the middle of our lane along the path that we will
follow, mirroring the ADOT collection vehicles as part of our
collection strategy. The data values for the milepost markers
identify the locations (on the centerline track) of the mile
markers along the path. By marking the time when we pass
each milepost, we will be creating a set of known positions
at speciﬁc points in time.
Note that the data values for a milepost marker conve-
niently specify the geographical coordinates of the centerline
point corresponding to the mile marker, not the physical
location of the milepost marker itself. We are interested in
the position of our vehicle as it passes the milepost marker,
so the data values for the milepost markers in the ADOT data
are exactly what we need. Figure 1 shows how the centerline
points and the milepost points relate to each other.
The centerline points are not regularly spaced, but vary
according to the curvature of the road. Straight segments
of the road require relatively few data points while curved
segments of the road require multiple points. Milepost
markers, on the other hand, deﬁne regular intervals of one
mile and are evenly spaced one mile from each other.
V. VEHICLE SPEED DATA AND GPS DATA
We can retrieve the vehicle’s speed directly from the
vehicle. By tapping into the vehicle’s diagnostic port and
requesting speed data, we can collect the actual speed of
the vehicle throughout the test trip. All vehicles supporting
the onboard diagnostics (ODB-II) interface provide a basic
set of powertrain parameters — speed being one of those
parameters. The ODB-II protocol allows us to query the data
once per second, which will be frequent enough for our use
since our test vehicle will not change speed dramatically
from one second to the next.
118
Copyright (c) IARIA, 2012.     ISBN: 978-1-61208-178-6
GEOProcessing 2012 : The Fourth International Conference on Advanced Geographic Information Systems, Applications, and Services

In order to request the speed information from the vehicle,
we are using a vehicle interface adapter from Multiplex En-
gineering. This adapter converts the laptop interface (RS-232
and command packets) to SAE-J1708 diagnostic requests
(ISO-9141 signals and SAE-J1708 packet data). The data-
collection program in the laptop PC contains a thread to do
the following:
• Establish communications with the test vehicle.
• Periodically (once per second) send a request for the
speed of the vehicle.
• Read the response from the vehicle.
• Convert the response to vehicle-report format [14].
• Send the report to the logging system.
The logging software timestamps each vehicle speed
report. These reports give us a set of speed reports of the
form (v, t) where v represents the vehicle’s speed at the
time t.
Figure 1 illustrates the vehicle data collections in relation
to the map information. Notice that we collect the vehicle
data at regular intervals with a period of approximately one
second.
mp n
mp n+1
cp x
cp x+1
cp y
cp y+1
cp y+2
cp y+3
cp y+4
cp y+5
cp y+6
cp  = centerline point
mp = mile post
o = operator input
Speed
Reports
GPS
Reports
o n+1
o n
Fig. 1.
Map Info with Collected Data
We collect GPS data from a hand-held GPS unit with an
external roof-mounted antenna in a similar fashion. The GPS
unit reports its data with a period of one second. The data-
collection system receives these reports and logs them. Even
though the GPS unit reports data with the same frequency
as the vehicle speed data, the reports are not synchronized in
any manner. As the next section explains, the GPS reports
provide the location of the vehicle with more than enough
accuracy to determine exactly which milepost marker the
vehicle has just passed when the operator makes an entry to
mark the passing of a milepost. We thereby ﬁx our vehicle
position at a speciﬁc location and at a speciﬁc point in
time. Figure 1 shows how the GPS reports relate to the
map information and the speed reports.
VI. OPERATOR INPUT
Operator inputs provide the key component to determin-
ing the exact vehicle position at any point during the test
run. By creating a marker in the logs whenever the vehicle
passes a milepost, the operator establishes a set of known
positions, at each milepost marker, at speciﬁc times during
the test run [14]. The software records the operator input
in the logs as a simple landmark notation that includes the
timestamp but does not include any positional data.
We collect GPS reports from a hand-held GPS unit at
one-second intervals throughout the test trip. We use the
GPS reports only to determine the closest milepost at each
operator’s mark. Once we have determined which milepost
the operator was marking, we have established a known
position at a speciﬁc moment in time. Since the mileposts
are one mile apart, we need only enough accuracy from
the GPS reports to pick between two positions that are one
mile apart. This modest accuracy requirement is well within
the range of the hand-held GPS with an external antenna.
Figure 1 illustrates the operator inputs at each milepost
marker.
VII. DISTANCE CALCULATIONS
After we have collected the data, we have all of the
the information necessary to determine the vehicle posi-
tion at any point in time. We have a ﬁxed path, several
known milepost positions at speciﬁc points in time, and
known vehicle speed at numerous points between our known
milepost positions. The approach that we take is similar to
the one that people use in computer animation for moving
an object along a curved path [15]. We calculate the arc
length for each segment, sum those distances to obtain the
total distance traveled between known positions, determine
the scaling factors required to project the segments onto
the known path, and, ﬁnally, use the adjusted formulas to
determine the absolute position of the vehicle for any given
time t.
A. Calculating Segment Distances
Figure 2 illustrates the speed-time relation, where each
point represents one speed report — a speciﬁc speed at a
given point in time. The shaded areas below the speed line
represent the distance covered between two speed reports.
119
Copyright (c) IARIA, 2012.     ISBN: 978-1-61208-178-6
GEOProcessing 2012 : The Fourth International Conference on Advanced Geographic Information Systems, Applications, and Services

time
speed
mpx
si
si+1
si+2
s'i
}
d''i
di
}
}
d'i
Fig. 2.
Speed-Time Relation
Each speed report si has two components and occurs in
the data as the pair (v, t) where v represents the vehicle’s
velocity at time t. Individually, we will refer to these
components as vi and ti. The distance covered between
speed reports si and si+1 corresponds to the shaded area
below those two reports — di. When we need to determine
a speed at a time between ti and ti+1 we will generate an
interpolated speed report s′
i. We denote the distance between
si and s′
i as d′
i, and we denote the distance between s′
i and
si+1 as d′′
i .
We can calculate the distance covered between si and
si+1 as:
di =
Z ti+1
ti
f(t)dt
(1)
where f(t) represents the velocity of the vehicle over time.
However, the only data values that we have are the known
speeds at ti and ti+1. Given that the speed reports occur
at a rate of approximately one per second and based on
the physics of vehicles in motion, we can safely assume a
constant acceleration/deceleration between ti and ti+1. We
can therefore simplify Equation (1) to the following:
di = vavg(ti+1 − ti)
(2)
which, when given that
vavg = 1
2(vi + vi+1)
(3)
yields:
di = 1
2(vi + vi+1)(ti+1 − ti)
(4)
If the milepost reports were synchronized with the speed
reports, then we could calculate the total distance between
two mileposts by summing the distances covered by each
speed report. For example, if si occurred at mpx and
si+n occurred at mpx+1, then we could calculate the total
distance, Dx, between the two mileposts as:
Dx =
i+n−1
X
j=i
dj
(5)
Since the milepost reports typically fall between two
speed reports rather than being synchronized with a speed
report, we can generate an interpolated speed report to
coincide with the time of the milepost report (t′). If si is
the latest speed report before the milepost report, then we
can calculate the velocity for the generated speed report s′
i
at t′ as follows:
tan(Θ) = vi+1 − vi
ti+1 − ti
(6)
v′ = vi + (tan(Θ)) ∗ (t′ − ti)
(7)
v′ = vi +
vi+1 − vi
ti+1 − ti

(t′ − ti)
(8)
The generated speed report s′
i would be (t′, v′). We can
generate a similar speed report s′
i+n for the ending milepost
by using the speed report si+n that was the latest speed
report before the mpx+1 report for the next milepost marker.
For each speed report that falls just before a milepost report,
we can separate the distance into two areas, d′
i and d′′
i
as shown in Figure 2. Note that the milepost report can
be anywhere between the two speed reports. With these
deﬁnitions, we can rewrite Equation (5) for calculating the
distance between the two mileposts mpx and mpx+1 as:
Dx = d′′
i +
i+n−1
X
j=i+1
dj + d′
i+n
(9)
B. Aligning Calculations with Map Data
We can calculate the total distance between operator
inputs (two known positions at marked times) by using
Equation (9) of Section VII-A. This calculated value will
most likely be different from the actual value (from the
ADOT-provided data). A variety of factors can account
for this difference: inexactness of the operator’s marks,
speedometer error, inaccuracy of the ADOT-provided data,
etc.
Based on Equation (9), each di accounts for a given
portion of the entire length of Dx. Speciﬁcally, each di
represents di/Dx of the total distance Dx. If k is the scale
factor such that:
kDx = Lx
(10)
where Lx is the ADOT-provided distance over the same two
milepost markers, then
k = Lx
Dx
(11)
120
Copyright (c) IARIA, 2012.     ISBN: 978-1-61208-178-6
GEOProcessing 2012 : The Fourth International Conference on Advanced Geographic Information Systems, Applications, and Services

and we can rewrite Equation (9) to reﬂect the distances
scaled to yield Lx as the result:
Lx = kd′′
i +
i+n−1
X
j=i+1
kdj + kd′
i+n
(12)
VIII. DETERMINING VEHICLE POSITION
We can now determine the position of the test vehicle at
any given time t (corresponding to a report from a cell phone
whose accuracy we are trying to measure) by performing the
following steps:
• Determine the milepost reports that surround time t
(Mx, Mx+1).
• Retrieve all speed reports between and encompassing
Mx and Mx+1.
• Calculate Dx from Equation (9).
• Calculate Lx from ADOT-provided data, and determine
k from Equation (11).
• Sum the adjusted distances between Mx and the speed
report just before time t.
• Add the partial distance covered in the segment con-
taining t by generating an artiﬁcial speed report as in
Equation (8).
• Travel the known path from Mx toward Mx+1 for the
calculated covered distance.
IX. CONCLUSION
We now have a method for determining the actual position
of a test vehicle at any given point in time, so we can process
the cell-phone GPS reports and calculate the error value
for each report. In a batch-processing mode following the
conclusion of a test run, we can optimize the steps listed
above by storing the calculated distances for each individual
segment as well as the scaling values and distances between
milepost reports.
The procedures we have described in this paper provide
the foundation for evaluating the accuracy of the reports
from a cell phone in a moving vehicle. Our inputs include
ADOT data to specify a known path of travel, operator inputs
to place the vehicle at known positions at speciﬁc times, and
the speed data that the vehicle itself reports.
X. FUTURE WORK
With the ability to determine the accurate position of
a test vehicle along a traveled path at any given point
in time, we plan to take cell-phone GPS reports across a
number of test runs and begin creating accuracy models for
different types of phones under various conditions. These
models will help determine optimal methods for collecting
data and processing that data both for real-time trafﬁc-ﬂow
information and for data-mining applications.
REFERENCES
[1] J.
C.
Herrera,
D.
B.
Work,
R.
Herring,
X.
J.
Ban,
Q.
Jacobson,
and
A.
M.
Bayen,
“Evaluation
of
trafﬁc
data
obtained via gps-enabled mobile phones: The mobile century
ﬁeld
experiment,”
Transportation
Research
Part
C:
Emerging
Technologies, vol. 18, no. 4, pp. 568–583, 2010. [Online]. Available:
http://www.sciencedirect.com/science/article/pii/S0968090X09001430
[2] Hillel and Bar-Gera, “Evaluation of a cellular phone-based system
for measurements of trafﬁc speeds and travel times: A case
study from israel,” Transportation Research Part C: Emerging
Technologies, vol. 15, no. 6, pp. 380–391, 2007. [Online]. Available:
http://www.sciencedirect.com/science/article/pii/S0968090X07000393
[3] P.
Mohan,
V.
N.
Padmanabhan,
and
R.
Ramjee,
“Nericell:
rich
monitoring
of
road
and
trafﬁc
conditions
using
mobile
smartphones,” in Proceedings of the 6th ACM conference on
Embedded
network
sensor
systems,
ser.
SenSys
’08.
New
York, NY, USA: ACM, 2008, pp. 323–336. [Online]. Available:
http://doi.acm.org/10.1145/1460412.1460444
[4] D. Valerio, A. D’Alconzo, F. Ricciato, and W. Wiedermann, “Ex-
ploiting cellular networks for road trafﬁc estimation: A survey and a
research roadmap,” in Vehicular Technology Conference, 2009. VTC
Spring 2009. IEEE 69th, April 2009, pp. 1–5.
[5] Y. Yuan and W. Guan, “Using cellular network for inner-suburban
freeway trafﬁc monitoring,” in Logistics Engineering and Intelligent
Transportation Systems (LEITS), 2010 International Conference on,
November 2010, pp. 1–4.
[6] B. L. Smith and S. T. Laboratory, Cellphone probes as an ATMS tool.
Charlottesville, VA: The Laboratory, 2003.
[7] F. Calabrese, M. Colonna, P. Lovisolo, D. Parata, and C. Ratti, “Real-
time urban monitoring using cell phones: A case study in rome,”
Intelligent Transportation Systems, IEEE Transactions on, vol. 12,
no. 1, pp. 141–151, March 2011.
[8] S. Amin, S. Andrews, S. Apte, J. Arnold, J. Ban, and M. B. et.
al., “Mobile century using gps mobile phones as trafﬁc sensors:
A ﬁeld experiment,” in The 15th World Congress on Intelligent
Transportation
Systems,
November
2008.
[Online].
Available:
http://www.ce.berkeley.edu/∼bayen/conferences/its08.pdf
[9] L.
A.
Klein,
M.
K.
Mills,
D.
R.
P.
Gibson,
U.
States,
and
T.-F.
H.
R.
Center,
Trafﬁc
detector
handbook,
3rd
ed.
McLean, VA: U.S. Dept. of Transportation, Federal Highway
Administration, Research, Development, and Technology, Turner-
Fairbank Highway Research Center, 2006, vol. 1. [Online]. Available:
http://purl.access.gpo.gov/GPO/LPS91983
[10] B.
Hoh,
M.
Gruteser,
R.
Herring,
J.
Ban,
D.
Work,
J.-C.
Herrera, A. M. Bayen, M. Annavaram, and Q. Jacobson, “Virtual
trip lines for distributed privacy-preserving trafﬁc monitoring,”
in Proceeding of the 6th international conference on Mobile
systems,
applications,
and
services,
ser.
MobiSys
’08.
New
York, NY, USA: ACM, 2008, pp. 15–28. [Online]. Available:
http://doi.acm.org/10.1145/1378600.1378604
[11] Q. T. Minh and E. Kamioka, “Pinpoint: An efﬁcient approach to
trafﬁc state estimation system using mobile probes,” in Wireless
Communications Networking and Mobile Computing (WiCOM), 2010
6th International Conference on, September 2010, pp. 1–5.
[12] B. Beyeler and D. C. Pheanis, “Using gps-enabled cell phones for
trafﬁc-ﬂow data collection,” in Computers and Their Applications,
G. Hu, Ed.
ISCA, 2005, pp. 253–258.
[13] ——, “Measuring cell-phone gps accuracy,” in Computers and Their
Applications, D. J. Jackson, Ed.
ISCA, 2006, pp. 401–406.
[14] ——, “Cell-phone accuracy tests: Data-collection techniques,” in
Computers and Their Applications, B. Gupta, Ed.
ISCA, 2007, pp.
271–276.
[15] B. Guenter and R. Parent, “Computing the arc length of parametric
curves,” Computer Graphics and Applications, IEEE, vol. 10, no. 3,
pp. 72–78, May 1990.
121
Copyright (c) IARIA, 2012.     ISBN: 978-1-61208-178-6
GEOProcessing 2012 : The Fourth International Conference on Advanced Geographic Information Systems, Applications, and Services

