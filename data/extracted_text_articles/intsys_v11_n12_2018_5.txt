46
International Journal on Advances in Intelligent Systems, vol 11 no 1 & 2, year 2018, http://www.iariajournals.org/intelligent_systems/
2018, © Copyright by authors, Published under agreement with IARIA - www.iaria.org
From Compartments to Agents via Fuzzy Models  - Modeling and Analysis of 
Complex Behavior of Physiological Systems 
Sebastian Meszyński1, Oleksandr Sokolov1, Aleksandra Mreła2 
1Faculty of Physics, Astronomy, and Informatics 
Nicolaus Copernicus University 
Toruń, Poland 
2Kujawy and Pomorze University in Bydgoszcz, Faculty of Technology 
  
email: sebcio@fizyka.umk.pl, osokolov@fizyka.umk.pl, a.mrela@kpsw.edu.pl 
 
 
Abstract – It is well-known that analytical modeling and 
computer simulation of the physiological systems is a complex 
problem with a great number of variables, equations, and non-
linear relations. There are several approaches for such 
modeling. One of them is so-called compartment modeling. 
Each compartment is assumed to be a homogeneous entity, 
within which modeled entities are equivalent. Another 
approach is multi-agent modeling, which consists of creating 
agents with a more complex structure in comparing with the 
compartment and a more complex logic of behavior and 
communication. In the paper, we decided that before building 
a multi-agent model to try to describe the communication of 
the system elements using the rules of the class 'state-action' 
and transferring such relations to the properties of the agents. 
In order to analyze the dynamics of the behavior of the multi-
agent system, the matrix description method was proposed. As 
an example, we investigate in the article the different models of 
the insulin-glucose physiological system. 
Keywords – multiagent system; agent; linear algebra; matrix. 
 
I. 
 INTRODUCTION 
 
The models used for modeling of any kinds of physical 
phenomena are the tools utilized to obtain an answer to 
questions concerning the tested system, without the need for 
performing the actual experiment. Among the variety of 
models, i.e., psychological, word or physical models, there 
are also mathematical models whose relations observed in 
the system are described by mathematical formulas. The 
possibility to perform such experiments is called simulation 
(lat. simulare – simulate). It is a cheap and safe alternative or 
a complement to experiments with the system.  
The quality of simulation’s results depends entirely on 
the quality of the model. Fundamentally, there are two 
approaches to building a model representing a particular 
system. The first type of approach is based on the knowledge 
taken from literature or experience of experts in each domain 
and could be used for building more and more precise 
description of the investigated phenomenon  (more complex 
models are generated). The second one is based on 
observation of the phenomenon and its behavior on one level 
of description (using similar agents) and after that building 
the model and identification of parameters (agent-based 
approach). 
The created model in both approaches needs to be 
described in a handy form, especially if one wants to analyze 
it with the use of digital machines. Having the model built, it 
is necessary to verify the correctness of obtained results. The 
credibility of the results provided by the model can be 
acquired using verification or validation.  
This paper focuses on the use of MAS a multi-agent 
system (MAS) for the modeling of the insulin-glucose 
system responsible for the blood glucose homeostasis. Even 
by designing the simplest model based on the multi-agent 
paradigm, one must rely on a complex analysis of 
interactions between agents. For this reason, there is not one 
general formalism of description of these interactions, which 
would additionally allow an easy analysis of the functioning 
of such a multi-agent system. In most cases, the used 
approaches are chosen depending on the category of the 
problem that is solved by the system. If MAS was designed 
to address the issues of game theory, then this formalism 
would be used to analyze the multi-agent system. When 
MAS was created for optimization problems, these problems 
will be used to analyze this system [9,14]. What is presented 
in this paper is a demonstration of the use of two modeling 
techniques for the general description of a multi-agent 
system. On one hand, the theory of compartment models has 
been used to describe the interaction between the different 
body regions, called compartments. On the other hand, graph 
theory introduces a general and universal tool for describing 
the interaction between beings that can represent any 
mathematical or physical concept. Combining these two 
techniques allows us to describe the interaction between 
agents in MAS in two ways. Firstly, it could help to describe 
the dynamics of the entire multi-agent system, showing the 
connections between agents, their behavior, and the ability to 
investigate the whole system. Secondly, it makes possible to 
include in the same formalism the information associated 
with each agent. This should be understood as the ability to 
get information, about which behavior is implemented in the 
body of the agent, which is used to communicate with the 
environment, and which is only the internal behavior of the 
agent. One can also get information, about which agents are 
receivers of the messages and, which are senders of those 
messages. 

47
International Journal on Advances in Intelligent Systems, vol 11 no 1 & 2, year 2018, http://www.iariajournals.org/intelligent_systems/
2018, © Copyright by authors, Published under agreement with IARIA - www.iaria.org
 The proposed approach allows describing MAS in two 
complexity scales – the system as a whole and the agent and 
its impact on the system. The proposed advantage is a 
technique, which can extend the behavior of compartments 
using fuzzy logic and make their behavior more complex by 
describing their internal structure using agent description [1]. 
We illustrate the MAS description and communication of the 
glucose homeostasis. The selected analytical model 
(Stolwijk-Hardy model [11]) was converted to MAS in a 
lossless fashion. As a result, individual members of this 
model became the determinants of behavior of individual 
agents, and in addition, the analysis of such model was 
maintained by compartmental methods. 
The structure of the paper is following. Section II 
describes the compartment models and their applications in 
physiologic systems.  In Section III we introduce the fuzzy 
logic models and illustrate them in the example of the 
insulin-glucose system. This model will be a base of agent’s 
behavior in the next section. 
Section IV gives a short introduction to multi-agent 
systems and draws attention to components of agents and 
their communication standards. In the next section, the 
matrix representation of MAS is proposed. Section VI 
illustrates the authors’ approach with two simple examples. 
The conclusion and references summarize the article. 
 
II. 
COMPARTMENT  SYSTEMS 
 
The concept of a compartment is not unambiguous and 
may represent different features depending on what is being 
discussed. Usually, the compartment describes the structures 
of a living organism characterized by similar properties in 
relation to the test substance [5]. The compartments may be 
either separate areas of the body or substances. In the first 
case, the compartment can be considered an organ or 
intercellular space, in the latter case, it may represent blood  
 
 
 
 
Figure 1. An example compartment model  
(the model has three compartments). 
 
plasma. If the test substance is in the biological system in 
several areas of the organism and it is possible to determine 
its movement between these areas and changing its 
concentration, then such areas can be considered as separate 
compartments (Figure1). The description of the transport of 
substances in the body is considered for the mass balance (or 
concentration) in individual compartments. The main reason 
for using this description is the ability to determine the time 
course 
of 
substance 
exchange 
streams 
between 
compartments and between the body and the environment. 
The considered models are constructed assuming the 
constant volume of compartments. In this case, the mass of 
substance in the compartment is proportional to its 
concentration. The equations describing the transport can be 
summarized for both mass and concentration. The transition 
from the first description to the second one consists only in 
dividing both sides of the equation by a constant factor, 
which is the volume of the compartment. 
Considering the i-th compartment, the mass of substances 
in this compartment can be changed as a result of the 
algebraic summation of the input and output streams of this 
compartment: 
 
𝑑𝑚𝑖(𝑡)
𝑑𝑡
= ∑
𝑗=0 𝜙𝑖𝑗(𝑡)
𝑗≠𝑖
− ∑
𝑗=0 𝜙𝑗𝑖(𝑡)
𝑗≠𝑖
, 𝑖 = 1,2, … , 𝑛  (1) 
 
where 𝜙𝑖𝑗(𝑡) denotes an input stream flowing from the j-th 
compartment to the i-th compartment; 𝜙𝑗𝑖(𝑡)- the output 
stream flowing from the i-th compartment to the j -th 
compartment; n - a number of model compartments. 
By grouping the streams in the right order: resultant 
interconnection exchange rates, the elimination stream, the 
dosing flow and considering the biological availability 𝐹𝑖 
equation (1) for the mass balance of the i-th compartment 
can have the form: 
 
𝑑𝑚𝑖(𝑡)
𝑑𝑡
= − ∑ 𝜙𝑖𝑗(𝑡)
𝑗=1
𝑗≠𝑖
+ ∑ 𝜙𝑗𝑖(𝑡)
𝑗=1
𝑗≠𝑖
− 𝜙0𝑖(𝑡) + 𝐹𝑖𝑑𝑖(𝑡), 
                       𝑖, 𝑗 = 1,2, … , 𝑛                                            (2) 
 
The subscript 0 denotes the connection of a given 
compartment with the external environment, where 
𝜙𝑖0(𝑡) = 𝐹𝑖𝑑𝑖(𝑡) is the substance dosing flow to the i-th 
compartment, and 𝜙𝑜𝑖 is a stream of elimination flowing out 
of the i-th compartment. Biological availability 𝐹𝑖 is a 
fraction of the given dose 𝑑𝑖(𝑡), e.g., a medicinal substance 
that has been absorbed into the i-th compartment. This 
parameter meets the condition 0 ≤ 𝐹𝑖 ≤ 1. In cases of linear 
pharmacokinetics, this equation acquires the features of a 
differential linear equation. The following types of linear 
pharmacokinetic models can be distinguished: 
• full-time or part-time, 
• without delay or with a delay. 
In linear stationary models, the streams are of the donor 
type, i.e., they form a function of mass 𝑚𝑗(𝑡) in the 
compartment, from which they flow and are proportional to 
this mass: 
 

48
International Journal on Advances in Intelligent Systems, vol 11 no 1 & 2, year 2018, http://www.iariajournals.org/intelligent_systems/
2018, © Copyright by authors, Published under agreement with IARIA - www.iaria.org
𝜙𝑖𝑗(𝑡) = 𝑘𝑖𝑗𝑚𝑗(𝑡) 
 
where 𝑘𝑖𝑗 is the constant speed of exchange. 
The counterpart of equation (2) is a linear differential 
equation with constant coefficients: 
 
𝑑𝑚𝑖(𝑡)
𝑑𝑡
= − ∑
𝑗=1 𝑘𝑖𝑗𝑚𝑖(𝑡)
𝑗≠𝑖
+ ∑
𝑗=1 𝑘𝑗𝑖𝑚𝑗(𝑡)
𝑗≠𝑖
− 𝑘0𝑖𝑚𝑖(𝑡) +
𝐹𝑖𝑑𝑖(𝑡)𝑖, 𝑗 = 1,2, … , 𝑛  
 
 
(3) 
 
where: 𝑘𝑗𝑖, 𝑘𝑖𝑗, 𝑘0𝑖 are constant inter-compartment exchange 
rates and elimination velocities, respectively. 
In the case of the two-compartment model (Figure 2),  
 
 
 
Figure 2. An example of the two-compartment model. 
 
 
the equations describing the mass balance take the form: 
 
𝑑𝑚1
𝑑𝑡 = −(𝑘01 + 𝑘21)𝑚1(𝑡) + 𝑘12𝑚2(𝑡) + 𝐹1𝑑1(𝑡), 
 
𝑑𝑚2
𝑑𝑡 = 𝑘21𝑚1(𝑡) − (𝑘02 + 𝑘12)𝑚2(𝑡). 
 
(4) 
 
In the general case of a multi-compartment system, the 
system of equations looks like this: 
 
𝑑𝐦(𝑡)
𝑑𝑡
= 𝐀𝐦(𝑡) + 𝐅𝐝(𝑡)   
(5) 
𝐜 = 𝐂𝐦(𝑡)  
 
 
(6) 
 
satisfying the initial conditions: 
 
𝐦(𝑡 = 0) = 𝐦(0) 
The solution of equation (3) is defined by the formula: 
 
𝐦(𝑡) = 𝑒𝐀𝑡𝐦(0) + ∫ 𝑒𝐀(𝑡−𝜏)𝐅𝐝(𝜏)𝑑𝜏
𝑡
0
  
(7) 
 
Below there is an example of such a model for the 
regulation of the insulin-glucose system [13] (Bergman and 
Cobelli model) 
 
𝑑𝑔
𝑑𝑡 = −[𝑎1 + 𝑥]𝑔 + 𝑎1𝐺𝐵, 
𝑑𝑥
𝑑𝑡 = −𝑎2𝑥 + 𝑎3[𝑖 − 𝐼𝐵], 
 
 
(8) 
𝑑𝑖
𝑑𝑡 = 𝑎4[𝑔 − 𝑎5]+𝑡 − 𝑎6[𝑖 − 𝐼𝐵], 
 
in which the test substances are insulin and glucose, which 
levels we denote by i and g, respectively. Depending on the 
parameters of the model (8), simulations, as well as analyzes 
of the normal state and diseases of diabetes can be made. 
 
 
 
Figure 3. An example of insulin-glucose dynamics for a healthy person 
and person with diabetic I 
 
Analysis of the dynamics of a multi-compartment system is 
given by the state equations (5), the output equations (6) 
consists in examining the features of solving (7), 
controllability and stability by analyzing the eigenvalues of 
the fundamental matrix A. Usually, such analysis is carried 
out by using the Laplace transform. 
The optimization of the systems (5), (6) depends on 
calculating the given dose 𝐝(𝑡), by means of which the 
quality functional for the solution (7) is minimized, for 
example, the preservation of a given mass change program 
m(t)→m*(t). Well-known methods of control theory allow a 
solution, in which regulators are used, which are “tuned” 
through the selection of appropriate settings. Thus, we apply 
the classic methods of analysis and optimization. 
The advantages of the compartmental model can be 
described in a uniform description of all organs that 
communicate with each other by means of substance 
transfer. The disadvantages of such a description can be the 
inability to describe hierarchical models and the difficulty in 
estimating the values of all parameters in the case of a non-
linear model. 
 
III. 
FUZZY LOGIC MODELS 
 
Biological systems can be described using a quantitative 
or qualitative way. Unfortunately, the quantitative approach 
using the compartmental description and linear models (5) 

49
International Journal on Advances in Intelligent Systems, vol 11 no 1 & 2, year 2018, http://www.iariajournals.org/intelligent_systems/
2018, © Copyright by authors, Published under agreement with IARIA - www.iaria.org
and (6) does not bring the desired results. Due to the non-
linearity of physiological processes, the complexity and 
uncertainty of the biological system and the occurrence of 
delays and measurement deviations, it is difficult to build a 
model with correctly selected parameters. These specific 
features of the biological system force the use of a different 
type of modeling.  
Qualitative models are relatively simple and require 
basic knowledge about the modeled system to correctly map 
it. Quantitative models simulate the analyzed system very 
precisely, but they require knowledge of accurate kinetic 
data, which are sometimes not known satisfactorily or are 
simply missing. There is one more approach to building 
models - it is a semi-quantitative approach that uses tools 
such as fuzzy systems and fuzzy logic [4]. They allow the 
description of the system in a satisfactory way even when 
the data related to the kinetics of the biological process are 
not complete. This incompleteness can also be seen as the 
external and internal variability of the biological system. 
The assumptions that should be met by the modern model of 
the biological system are presented in the article by Parker 
[8], in which the author lists the elements necessary for such 
a model like that: prognostic skills within the input-output 
process, the ability to perform calculations using the Internet 
for control and optimization. 
The use of this type of modeling comes to combining 
functional blocks in a proper way (Figure 4) and 
implementing the methods used in a given simulation 
technique in their structure. 
 
 
 
 
Figure 4. Fuzzy logic model. 
 
 
The general principle of creating a system consists in 
breaking the model into several functional blocks: 
• input block – responsible for entering heterogeneous 
input data into the system and their conversion to the 
internal format (for fuzzy logic this process is a 
fuzzyfication), 
• processing block – processing of the received 
information using a knowledge base for this purpose - 
rules of fuzzy logic (for fuzzy logic these will be 
inference procedures), 
• output block – the transformation of the calculation 
result generated in the processing module to the format 
of the user-understandable model or to the format used 
by the rest of the model (for fuzzy logic this process is 
defuzzyfication). 
To create a system, it is worth to use graph models, in 
which the nodes are individual elements, and the edges are a 
substance and information transferred from one element to 
another.  
For each of the individual organs of the insulin-glucose 
system, we create sets of rules describing its behavior 
according to the knowledge of its internal state and 
parameter states in other organs.  
The rule has a structure of recursive relationships that 
combine the state at a discrete time k and k+1: 
 
If X1k = NB and X2k = ZE and… Xjk = NS Then 
Xi,k +1=PS, 
 
 
 
(9) 
 
where Xjk are variables that characterize the content of 
substances in the body j, and NB-negative big, NS-negative 
small, ZE-zero, PS-positive small, ... are linguistic variables 
that use the membership functions to determine the full range 
of the value of the respective substance. 
 
 
 
Figure 5. Dynamic of glucose transportation. 
 
Type (9) rules allow creating dynamic relationships, for 
example, for the insulin-glucose system (Figure 5). Each 
block of the system contains a model of fuzzy logic. 
One of the main advantages of the fuzzy model is a very 
simple way of describing the communication of organs of 
the physiological system in the form of rules (9) and the 
selection of parameters as membership functions of 
linguistic variables. The disadvantage of such a system is 
the difficulty of analyzing and creating the optimal control 
of such a system. 
IV. 
MULTI-AGENT SYSTEMS 
 
We present here the basic ideas concerning multi-agent 
systems. 
 
A. Concept of the  multi-agent system and agent   
MASs are complex systems of agents communicating 
and cooperating with each other. This construction of the 

50
International Journal on Advances in Intelligent Systems, vol 11 no 1 & 2, year 2018, http://www.iariajournals.org/intelligent_systems/
2018, © Copyright by authors, Published under agreement with IARIA - www.iaria.org
systems enables solving problems of a diffuse or complex 
calculation. In the studies applying multi-agent systems, the 
concept of an agent is presented as an autonomous object 
having the initiative of action based on the observation of the 
environment, in which it is located. It also has the ability to 
use the resources of the environment and the motivation to 
solve the problem it has to face. Such definition of the agent 
forces it to have inputs called sensors (through which it will 
be able to receive signals from the environment) and 
effectors, which can be used to influence the surrounding 
environment. The most important task of the agent is to 
decide, which of the possible courses of action is best, at the 
time of acquired knowledge about the problem, in order to 
achieve the goal. 
The issue „agent” is wide and diverse. Nowadays, the 
term is so broadly used that is best described as comprising a 
heterogeneous body of research and development [2,7]. 
Different communities refer to it in various ways. Some 
scientists will characterize agents as initiatives and reactivity 
of objects; others emphasize independent learning and 
communication skills. What can also be invoked is the 
characteristic that unifies modeling agent the most – it is 
their decentralization. An extensive discussion of multi-agent 
systems can be found in positions [15,12].  
In contrast to the dynamic system or actions based on 
models, MAS does not have a special place of centralization 
where the dynamics of the system is fixed. In addition, the 
global behavior of the whole system is determined based on 
the individual behavior of all agents. Each agent has its own 
internal behavior as a set of rules and behaviors for 
interacting with the environment and other agents. This 
description creates a dynamic interaction of agents based on 
the rules. 
In many situations, there is a doubt linked to the lack of 
understanding of the philosophy of using multi-agent 
systems and returning toward object-oriented programming. 
What is characteristic of multi-agent systems can be 
presented in the following subparagraphs:  
• Agents possess internal awareness and defined goals to be 
achieved. The goals can, but do not have to be identical 
to the objectives of the other agents who are in the same 
environment. In such case, information obtained from 
another agent can be considered only if it is coincident 
with its own objective.  
• An agent is a dynamic instance, which adapts its activity 
to instantaneous changes in the environment and has 
certain fixed parameters and characteristics only for it 
that do not change regardless of the extent of the changes 
observed in the environment. 
• Each agent possesses at least one strand, which is 
responsible for its behaviorism.  
The general difference between instance of an agent and 
an object lies in the fact that the object has variables that 
change, while the agent variables can be changed only when 
the agent accepts the request of the sender to change the 
value of a variable in an immediate way or after the act of 
negotiation. 
 
B. Communication in multi-agent system 
 
In an environment where there is more than one agent, 
there must be a mechanism for the exchange of information 
between the environment and the agent, and between agents. 
Communication mechanisms are essential for the agents 
grouped in structures that facilitate co-operation so that they 
could 
achieve 
their 
goals. 
Since 
the 
multi-agent 
environments [6,10] are dynamic environments, it is 
necessary to introduce a mechanism that would allow for 
informing the agents of the existence of other participants in 
the system. The literature [3] distinguishes the following 
approaches: 
• Yellow pages, where agent can place information about 
services it provides, 
• White pages – the list of all agents in the environment,  
• Broker – intercessory agent. 
To create a message and then send it to another agent in 
such a way they can receive it and understand it, it is 
necessary to define a common communication language. It 
should be noted that the communication language, which is 
independent of the field, is separated from the language of 
messages content. Among the communication standards the 
most popular ones include: 
• KQML 
(Knowledge 
Query 
and 
Manipulation 
Language), 
• ACL (Agent Communication Language). 
 
Among the examples of the language of message content, 
the following should be distinguished: 
• 
KIF (Knowledge Interchange Format), 
• 
FIPA standards:  
− SL (Semantic Language), 
− CCL (Content-Language). 
Having 
a 
tool 
for 
communication, 
agents 
can 
communicate with each other to achieve a common or an 
opposing goal. In the first case, we have to deal with the 
concept of co-operation, in the second case - with the 
competition concept. As a rule, multi-agent systems are 
designed to solve complex problems, in which agents have 
control (or can observe) only over a certain part of the 
environment (Figure 1). If MAS can solve the problem, the 
agent has to have knowledge and control over the entire 
environment. To do this, the agents are organized into a 
structure, in which they can interact with each other. 
Interactions between structures and agents are supposed to 
bring them benefits. Each agent has its preferences for the 
state, in which environment it should be (this is its goal). To 
describe this preference, the concept of utility ν was 
introduced, which causes the state of alignment of the 
environment Ω due to the agent's preferences.  
 
 
ν : Ω → ℜ 
 
 
(10) 
 
The environment that corresponds to preferences of the 
agent will have greater utility value (in other words: the 
agent will “feel better”). 
 

51
International Journal on Advances in Intelligent Systems, vol 11 no 1 & 2, year 2018, http://www.iariajournals.org/intelligent_systems/
2018, © Copyright by authors, Published under agreement with IARIA - www.iaria.org
V. 
MATRIX DESCRIPTION OF THE MULTI-AGENT SYSTEM 
 
The paper key objective is to propose a modeling 
glucose-insulin paradigm in the form of MAS starting with a 
mathematical description and finishing the implementation 
of the program. This solution shows how we can implement 
features of agents for both the macro and micro processes in 
homeostasis of glycemia. Moreover, at the same time, we 
can allow operating on two scales: organs and cells scale. 
This approach results in a new quality of information. To 
describe the multi-agent system, the authors used the 
approach describing compartment modeling and using the 
rationality of graph theory. This approach simplifies the 
interpretation of what is happening in the multi-agent 
system, therefore, the behaviors of individual agents and 
their influence on other agents can be easily identified in the 
considered system. 
This approach simplifies the interpretation of what is 
happening in the multi-agent system, therefore, the behaviors 
of individual agents and their influence on other agents in the 
considered system can be easily identified. 
The analysis of MAS is a difficult task to implement due 
to the existence of the asynchronous relationships between 
agents occurring in the system. Additionally, each agent, 
which takes an active part in MAS has at least two 
behaviors: the first one is to receive incoming messages from 
other agents, and the other one is used by it to send the 
information to the chosen agent. By verification of the 
model, one can understand two aspects. The first one 
concerns information about the acceptable range of internal 
parameters of the model, which guarantees the stability of 
the model for the incoming information/extortion from 
outside. The second aspect concerns the range of input set, 
which 
ensures 
the 
correct 
stability 
and 
expected 
representation of the behavior of the modeled system. 
We propose to describe MAS by using a comparison of 
network 
connections 
between 
the 
agents 
with 
the 
connections between vertices forming a graph. Nomenclature 
of the vertices is extended by the occurrence of behaviors 
that identifies the agent’s behavior. In this perspective of the 
problem, the graph, which describes the interactions between 
agents with their associated behaviors is obtained. The 
assumptions are: 
• Behaviors implemented in a given agent create a set of 
behaviors for the agent, which is a subset of behaviors 
occurring in the multi-agent system: 
 
  ∑ 𝐴 ∈ Φ  
                               
     (11) 
 
    Φ ⊆ Ω 
          
                                             (12) 
 
 
where: 
A - represents some behavior of an agent, Φ - 
represents a set of behaviors of a given agent, Ω - 
represents a set of behaviors of a multi-agent system.  
• Agents who present the same behaviors are not 
identical with each other. It causes independent actions 
in the terms of time and each agent using the same 
behavior performs them in various time slots. 
 
• 
Graph A=(V,E); |V|=n, |E|=m represents MAS basing on 
the assumption that: 
o 
n: number of graph vertices (number of agents), 
o 
m : number of behaviors appearing in MAS. 
 
• 
Adjacency matrix K∈M(n×n;N) is defined in such a 
way that value in i-th line and in j-th column equals: 
o 
0: if there is no communication between agents  
(no connection), 
o 
1: if there is communication between agents 
(connection). 
Whereby: 
o 
kii represents the cyclical route of agent i-th, 
o 
kij represents the route from agent i-th to agent j-
th. 
• 
The sum of the same behaviors is one behavior: 
  
∑ 𝐴1𝑖
𝑖
= 𝐴1                 
     (13) 
 
• 
Behavioral 
matrix 
𝐴 ∈ 𝑀(𝑛 × 𝑛; 𝐵) 
(where 
B 
designates the set of behaviors within the scope of the 
multi-agent system) is defined in such a way that a value 
in i-th line corresponds to behavior responsible for 
communication between agent i-th and agent j-th, 
whereby: 
o 
Behavior Aii represents internal behavior 
(cyclical) of agent i-th, 
o 
Behavior Aij represents information exchange 
from agent i-th to agent j-th. 
 
Taking the above assumptions into consideration, it is 
possible to describe MAS with the use of matrix equation: 
 
𝐴𝑇𝐾 + 𝐷 = Φ 
                    (14) 
 
where: 
AT is the transpose of a matrix of agents’ behaviors; K is a 
matrix of connections between agents; D is a matrix of 
agents’ internal behaviors; Φ is a matrix representing the 
multi-agent system.   
Analysis of the above equation will be presented on 
examples of multi-agent system. Both examples will rely on 
a different number of behaviors occurring in the multi-agent 
system. 
 
VI. 
EXAMPLES 
 
In this paragraph, authors demonstrate examples of the 
use of a matrix to describe MAS and to select unknown 
behavior. 

52
International Journal on Advances in Intelligent Systems, vol 11 no 1 & 2, year 2018, http://www.iariajournals.org/intelligent_systems/
2018, © Copyright by authors, Published under agreement with IARIA - www.iaria.org
A. The example of two-agent description based on  the 
matrix representation  
Let us consider the multi-agent system, where two agents 
A1 and A2 have predefined behaviors, and  A11 and A22 are 
internal behaviors and A12 and A21 are external behaviors 
(Figure 6). 
 
 
 
Figure 6. Two-agent system. 
 
For the following example, adequate matrixes will be 
defined: 
𝐴 = [𝐴21 − 𝐴12
𝐴12
𝐴21
𝐴12 − 𝐴21]  
       () 
 
𝐴𝑇 = [𝐴21 − 𝐴12
𝐴21
𝐴12
𝐴12 − 𝐴21]  
() 
 
𝐾 = [0
1
1
0]  
() 
 
𝐷 = [𝐴11
0
0
𝐴22]  
() 
Substituting to equation (15) we obtain a representation of 
MAS in the form of:  
 
[Φ] = [𝐴11 + 𝐴21
𝐴21 − 𝐴12
𝐴12 − 𝐴21
𝐴22 + 𝐴12]  
() 
 
Conducting a detailed analysis of the matrix Φ we receive 
information about: 
• First minor (φ1) of a matrix Φ represents internal and 
incoming behaviors to agent A1: 
 
𝜑1 = 𝐴11 + 𝐴21 
() 
• Second minor (φ2) of a matrix Φ represents behaviors of 
data exchange between agents A1 and A2: 
 
𝜑2 = 𝐴21 − 𝐴12 
() 
• Third minor (φ3) of a matrix Φ represents data exchange 
between agents A1 and A2: 
 
𝜑3 = 𝐴12 − 𝐴21 
() 
• Fourth minor (φ4) of a matrix Φ represents internal and 
incoming behaviors to agent A2: 
 
𝜑4 = 𝐴22 + 𝐴12 
() 
• Trace of a matrix represents behaviors occurring in the 
multi-agent system: 
 
𝑇𝑟[Φ] = 𝐴11 + 𝐴21 + 𝐴22 + 𝐴12 
() 
The examples were designed to show the application of 
(14) to describe MAS and the equivalence with the use of a 
graph. Description using matrixes is helpful in such a way 
that, in a compact form, it contains a representation of the 
dynamics of the multi-agent system. It is not relevant what 
type of behaviors are written using matrix A. That is why 
the authors consider this record as universal. The results 
matrix Φ contains much information, from which one can 
restore the functioning of the multi-agent system, basing 
solely on the content of individual cells of the matrix. 
Individual cells φi make it possible to obtain information on 
what types of behavior are present in the agent - whether 
they are its own internal behaviors (e.g., A11) or behaviors 
associated with taking or receiving information to/from 
another agent (e.g., A21). Additionally, the sum of the 
behavior of a given line (e.g., φ1 + φ2) is interpreted as the 
behavior occurring in the agent (e.g., for A1). The results 
matrix can also determine whether, in the multi-agent 
system, there is at least one bidirectional communication 
between agents. To verify whether in MAS the exchange of 
information occurs, it is necessary to check whether the 
following identity is met: 
 
𝑇𝑟[Φ] = ∑ 𝜑𝑖
𝑖
 
() 
To verify the above relationship, the examples discussed 
earlier can be used: 
𝐴11 + 𝐴21 + 𝐴22 + 𝐴12 = 𝐴11 + 𝐴21 + 𝐴22 +
                𝐴12 ⇔ 𝑇𝑟[Φ] = ∑ 𝜑𝑖
𝑖
  
()
 
 
 
B. The example of matrix representation for identification 
of desired  behavior   
 
The experiment is quite specific. This uniqueness is 
based on the use of the matrix record, introduced in Section 
III, to determine unknown behavior in the multi-agent 
system. The experiment was based on a two-agent 
representation of the glucose homeostasis system. The first 
agent represents the entire mechanism of normoglycemia in 
the case of type 1 diabetic patient. The second agent 
represents insulin delivery in the form of external 
administration (Figure 7). The purpose of this experiment is 

53
International Journal on Advances in Intelligent Systems, vol 11 no 1 & 2, year 2018, http://www.iariajournals.org/intelligent_systems/
2018, © Copyright by authors, Published under agreement with IARIA - www.iaria.org
to define the behavior responsible for sending "information" 
from Agent A1 to Agent A2 so that the dose of insulin 
delivered contributes to the metabolism of glucose. 
 
 
 
Figure 7. Diagram of MAS for the experiment. 
 
Based on the concepts introduced in the section above, 
we can define the appropriate arrays, and so the matrix A: 
 
𝐴 = [−𝐴12
𝐴12
0
𝐴12] 
 
    (26) 
 
matrix K: 
 
𝐾 = [0
1
0
0]                                     (27) 
 
matrix D: 
 
𝐷 = [𝐴11
0
0
𝐴22]  
                   (28) 
 
The matrix of MAS is defined by the corresponding 
relation between the previously mentioned matrices so that 
the system matrix is: 
 
Φ = [𝐴11
−𝐴12
0
𝐴22 + 𝐴12]                  (29) 
 
The trace of the matrix: 
 
𝑇𝑟𝜙 = 𝐴22 + 𝐴11 + 𝐴12                 (30) 
 
 
In this particular case, the meaning of the individual 
behavior is as follows: 
• Behavior A11 is responsible for the insulin production 
that will eventually be introduced into the system. This 
behavior may also represent a buffer that stores a 
certain amount of insulin. 
• Behavior A22 represents all the phenomena occurring in 
the glycemic homeostasis system, along with the ways 
of insulin utilization. 
• Behavior A12 is responsible for the exchange of 
information (from agent A1 to agent A2) - this behavior 
should be determined. 
The purpose here is to define the behavior A12 
   in such a way as to ensure insulin levels of φA2=7 [uIU/ml] 
for Agent A2. Below, a procedure to achieve our goal is 
presented: 
 
1. Simulation for the conditions specified for a person with 
type 1 diabetes (without insulin infusion) (Figure 10). 
 
2. Transform the pattern (22) into a form that allows us to 
calculate the desired behavior. In this case, we get: 
 
𝐴12 = 𝜑𝐴2 − 𝐴22                             (31) 
 
3. Perform curve fitting procedure (Figure 14) to the points 
obtained. This procedure was performed in MATLAB 
environment using the “fctool” command. The fit was done 
using a linear function. The following form of function is 
given: 
 
𝑓(𝐴12) = −0,0914𝑡 + 6,14                      (32) 
 
 4. The last step was to implement the equation described in 
(24) into the body of the insulin dispensing agent. The 
simulation was started and a comparative analysis of data 
from the insulin-free model and from the model, in which the 
found behavior A12. 
Below are the following drawings corresponding to the 
mentioned above points. 
 
 
Figure 8. Simulation result for a person with type 1 diabetes - without  
insulin. 
 
As can be deduced from Figure 10, the concept of using a 
matrix description to identify unknown behaviors is the most 
appropriate approach.  
 
 
 
Figure 9. Chart for variability of behavior A12. 
 
Using (22), it is possible to select unknown behavior in such 
a way that the preset value can be maintained throughout the 
system under consideration. By focusing on the selected part 
of matrix φ, there is an opportunity to declare such an 
unknown behavior that will result each value from the agent 
the minor describes. This is the second case presented in this 

54
International Journal on Advances in Intelligent Systems, vol 11 no 1 & 2, year 2018, http://www.iariajournals.org/intelligent_systems/
2018, © Copyright by authors, Published under agreement with IARIA - www.iaria.org
experiment. As a result of matching A12, it has become 
possible to maintain insulin levels of 7 [µIU/ml] by the agent 
A2.  
 
 
 
Figure 10. Simulation results for two cases: without insulin (blue 
curve), including the behavior of insulin dosing into the multiple 
agent system (red curve). 
 
 
Of course, the quality of the curve fitting to the measurement 
points (Figure 8 and 9) directly affects the quality of the 
results generated by the multi-agent system. 
 
VII. CONCLUSIONS 
 
In this paper, we consider the problem of investigation 
of the complex biological system using compartment, fuzzy 
and multi-agent approaches. 
We performed the analysis of MAS with the use of 
graph theory and matrix calculus. This approach can help us 
analyze the operation of such system in two ways: 
quantitative and qualitative ones. The use of matrix record 
enables performance of analysis of the internal multi-agent 
system involving the assignment of behaviors to particular 
agents. External analysis of MAS with the use of introduced 
record allows the description of the relation between agents 
and selection of such unknown behavior of an agent, which 
will meet the intended purpose or criterion implemented by 
the multi-agent system. In the second example, it is shown 
how using matrix equation allows finding the desired 
behavior of multi-agent system. For the general case, in 
which the agents (and the multi-agent system) process 
several volumes, each of these factors must be represented 
by a separate graph of accurate dependency. Generally 
speaking, each value can represent a different graph of 
connections between agents, and agents can have different 
numbers and behaviors intended to process these values. 
Matrix equation (15) proposed by authors, will be the 
subject of further work towards stability study of the multi-
agent system. 
REFERENCES 
[1] S. Meszyński, and O. Sokolov, “Modeling of Complex 
Multiagent Behavior Using Matrix Representation,” INTELLI 
2017, The Sixth International Conference on Intelligent Systems 
and Applications, pp.32-37, July 23-27, 2017 - Nice, France, 
https://www.iaria.org/conferences2017/ProgramINTELLI17.htm
l. 
[2] P. Agre, “Computational theories of interaction and agency,” 
Mit Press, 1996. 
[3] F. Bellifemine, A. Poggi, and G. Rimassa, “Developing multi-
agent systems with JADE,” International Workshop on Agent 
Theories, Architectures, and Languages, Springer Berlin 
Heidelberg, 2000. 
[4] W. J. Bosl, “Systems biology by the rules: hybrid intelligent 
systems for pathway modeling and discovery,” BMC systems 
biology, 1(1):13, 2007. 
[5] C. Cobelli, G. Toffolo, and E. Ferrannini, “A model of glucose 
kinetics and their control by insulin, compartmental and 
noncompartmental 
approaches,” 
Mathematical 
biosciences, 
72(2):291–315, 1984. 
[6] A. Helleboogh, G. Vizzari, A. Uhrmacher, and F. Michel, 
“Modeling dynamic environments in multi-agent simulation,” 
Autonomous Agents and Multi-Agent Systems 14.1: 87-116, 
2007. 
[7] H. S. Nwana, “Software agents: an overview,” The Knowledge 
Engineering 
Review, 
1996, 
11(3), 
pp. 
205–244. 
doi: 
10.1017/S026988890000789X. 
[8] R. S. Parker and F. J. Doyle, “Control-relevant modeling in 
drug delivery,” Advanced drug delivery reviews, 48(2):211–228, 
2001. 
[9] S. Parson and M. Wooldridge, “Game Theory and Decision 
Theory in Multi-Agent Systems,” Kluwer Academic Publisher, 
2000. 
[10] T. Seth and U. Wilensky, “NetLogo: Design and 
implementation of a multi-agent modeling environment,” 
Proceedings of agent, vol. 2004. 
[11] S. Soylu, K. Danişman, I.E. Saçu, and M. Alçi, “Closed-loop 
control of blood glucose level in type-1 diabetics: A simulation 
study,” Electrical and Electronics Engineering (ELECO), 2013 
8th International Conference on. IEEE, 2013. 
[12] P. Stone and M. Veloso, “Multiagent systems: A survey from 
a machine learning perspective,” Autonomous Robots 8.3: pp. 
345-383, 2000. 
[13] G. Toffolo, R.N. Bergman, D.T. Finegood, C. R. Bowden, and 
C. Cobelli, “Quantitative estimation of beta cell sensitivity to 
glucose in the intact organism: a minimal model of insulin 
kinetics in the dog,” Diabetes, 29(12):979–990, 1980. 
[14] P. J. Wangerman and F. R.  Stengel, “Optimization and 
Coordination 
of 
Multiagent 
Systems 
Using 
Principled 
Negotiation,” Journal of guidance, control, and dynamics, vol. 
22, No. 1, 1999. 
[15] M. Wooldridge, “An introduction to multiagent systems,” 
John Wiley& Sons, 2009. 

