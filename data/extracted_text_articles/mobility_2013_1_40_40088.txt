A3-Based Measurements and Handover Model for
NS-3 LTE
Budiarto Herman, Dmitry Petrov, Jani Puttonen, Janne Kurjenniemi
Magister Solutions Ltd.
Jyv¨askyl¨a, Finland
Emails: {budiarto.herman, dmitry.petrov, jani.puttonen, janne.kurjenniemi}@magister.ﬁ
Abstract—This paper presents a Long Term Evolution (LTE)
handover algorithm implementation based on Reference Signal
Received Power (RSRP) measurements and Event A3 on top of
the LTE module of NS-3 network simulator. Many simulation
scenarios in various research projects rely on user mobility. How-
ever, until recently complete realisation of relevant functionality
has been missing in free and open source tools such as NS-
3. Detailed modeling of RSRP measurements, including sliding
window averaging, time-to-trigger and hysteresis evaluations
are considered in this paper. Received simulation results are
veriﬁed through comparison with other publication, suggesting
a promising direction for further studies of dynamic scenarios.
Long term evolution; handover; simulation; ns-3
I.
INTRODUCTION
Long Term Evolution (LTE) is a standard for radio tech-
nology developed by the 3rd Generation Partnership Project
(3GPP). It is a signiﬁcant change from the previous 3G/UMTS
technology, providing higher data rates, simpliﬁed network
architecture, and improved user mobility.
Simulation of a realistic LTE wireless network requires
User Equipment (UE) mobility modeling, including UE mea-
surements and handover. However, detailed modeling of this
procedure has only been found in commercial or proprietary
LTE simulators. This adds considerable cost to academia and
researchers who are interested in the subject. Moreover, the
source code of these simulators are not publicly available,
imposing difﬁculties for professional community to study and
verify the produced simulation results.
At least three prominent free and open source LTE simu-
lators have been available at the moment of publication. Each
of them has its own limitations in modeling user mobility.
For instance, link and system level simulators from University
of Vienna [1] have not modeled mobility. LTE-Sim [2] has in-
cluded a modeling of handover procedure, but it has been based
on Signal-to-Interference-Ratio (SIR) and location, which is
not in accord with 3GPP speciﬁcation. The LTE module of NS-
3 has been developed within LENA project [3] and its recent
development version is featuring a handover algorithm based
on Reference Signal Received Quality (RSRQ) measurements
and Event A2. This feature, however, has not been revealed in
the stable release of NS-3 because it is still in the development
phase.
We have extended the handover modeling in NS-3 by utiliz-
ing Reference Signal Received Power (RSRP) measurements
and Event A3, as designed in [4]. In the case of RSRP as
the measurement of choice, Event A3 is deﬁned as a reporting
triggering event which is ﬁred when there exists a neighbouring
cell which measured RSRP is better than measured RSRP of
the serving cell by certain offset [5]. The aim of this extension
is to develop a measurements and handover model according
to 3GPP speciﬁcation, thus enabling detailed mobility studies
with NS-3.
Moreover, the functionality we are introducing into the
simulator is vital for Self-Organizing Networks (SON) and
Cognitive Networks (CN), which have been under intense
study in recent years. Many of SON and CN algorithms
depend on information from Radio Access Network (RAN)
signal levels and coverage. In addition, according to the 3GPP
speciﬁcation, UE must have the ability to provide RSRP and
RSRQ measurements in Evolved UTRAN LTE [6]. Therefore,
the developed measurement and reporting mechanisms can be
used in the future for the study of SON and CN features.
LTE is based on distributed architecture, where Evolved
NodeBs (eNodeB) are responsible for handover decision.
Handover algorithms have serious impact on the cellular
network performance. Taking into account that LTE is targeted
to operate in different propagation environments, UE-based
measurements should be carefully studied to enable robust
handover in wide range of UE speed. Furthermore, an opti-
mal tradeoff between number of handovers (signaling load,
amount of connection disruptions) and signal quality in large
realistic scenarios should be found. This requires utilisation of
system level simulators with detailed implementation of UE
measurement procedure.
The rest of the paper is organised as follow. Section
II elaborates on the design of RSRP- and Event A3-based
handover model developed for NS-3. In order to test the model,
several simulation scenarios have been studied, as described
in Section III. Finally, Section IV presents the conclusion and
several ideas for future research.
II.
HANDOVER MODELING
In contrast with 3G/UMTS standard, handover in LTE
is speciﬁed as hard handover or “break-before-connect”. It
is a UE-assisted and eNodeB-triggered procedure [7]. The
handover model considered in this paper is based on this
speciﬁcation, and is presented in Figure 1 as a series of oper-
ations and message exchanges between UE, source eNodeB,
and target eNodeB. Several steps of the procedure have been
already provided out-of-the-box by NS-3. This paper is reusing
this functionality while focusing on the ﬁrst stages, which
include the measurement reports and handover decision.
20
Copyright (c) IARIA, 2013.     ISBN:  978-1-61208-313-1
MOBILITY 2013 : The Third International Conference on Mobile Services, Resources, and Users

Fig. 1.
Modeling of handover procedure in NS-3, where the shaded box
indicates the part studied in this paper.
Measurement reports in the model are generated as follows.
UE makes periodical measurements of RSRP at every time
period Tm from each identiﬁed cell over the whole bandwidth.
These measurement samples are then forwarded from the
physical layer (PHY) (RSRP ChunkProcessor in Figure 2)
to the Radio Resource Control (RRC) layer. RRC applies
time averaging to the measurements from every speciﬁc cell
(SlidingWindow). Sliding window always holds the averaged
value from n = Tf
Tm measurements within the time window Tf.
Thus, every time a new measurement sample comes, the
oldest one is discarded. The objective of this averaging is to
reduce the inﬂuence of channel fading component on RSRP
measurements. As a result, the rate of ping-pong handovers in
the system is expected to decline.
In event-triggered handover procedure, each UE evaluates
the Event A3 condition every time a new averaged mea-
surement sample is available (A3Evaluator). The evaluated
condition is the entering condition of Event A3: whether the
Fig. 3.
Sample RSRP trace.
TABLE I.
VARIABLE PARAMETERS
Parameter
Values
Time-to-trigger
50, 200, 400 ms
Hysteresis
1, 3, 6 dB
UE speed
3, 30 kmph
Sliding window size (Tf )
200, 400 ms
RSRP measured from a neighbouring cell becomes an offset
better than the RSRP measured from the serving cell [5]. The
offset is represented as hysteresis. This condition must stay
true for at least a certain duration of time, which is called the
time-to-trigger.
The actual Event A3 is triggered immediately after the
time-to-trigger. The UE generates a measurement report and
transmit it as an RRC message to the serving cell. This report
typically contains measurement results of at least the serving
cell, but is extendable with measurement results of neighboring
cells. The whole process is demonstrated in Figure 3, which
shows the trace of averaged RSRP measurements from serving
Cell1 and neighbouring Cell2 before and after handover.
In practice, the eNodeB is responsible for deciding whether
or not a handover is needed. In our case, we assume that
an Event A3-triggered measurement report indicates that han-
dover is really needed. Upon receiving this report, source cell
immediately prepares a handover to the target cell. The rest of
the handover procedure is performed as illustrated in Figure 1.
III.
SIMULATION RESULTS
We conducted a simulation campaign in order to validate
the developed measurement and handover model. The main
focus of the study was on conﬁrming whether the available
handover-related parameters, shown in Table I, behave as
theoretically expected. Simulation assumptions were loosely
based on 3GPP case 1 [8], as summarised in Table II.
The number of handovers and number of ping-pong han-
dovers were the metrics collected from each simulation. The
simulation regarded ping-pong handover as two consecutive
handovers by a UE, which occurred within a short period of
time (in this particular case, 2 s), provided that the ﬁrst one is a
handover from cell A to cell B, while the second one is from
21
Copyright (c) IARIA, 2013.     ISBN:  978-1-61208-313-1
MOBILITY 2013 : The Third International Conference on Mobile Services, Resources, and Users

Fig. 2.
Implementation of measurements and handover model.
TABLE II.
SIMULATION PARAMETERS
Parameter
Value
Cellular layout
7 three-sectored sites in hexagonal layout
(21 cells in total)
Inter-site distance
500 m
Cell Tx power
30 dBm
Path loss model
L = 128.1 + 37.6 · log10 R
Channel fading
Typical urban
Carrier frequency
2 GHz
System bandwidth
5 MHz (25 RBs)
Trafﬁc
Only control messages, no data trafﬁc
Error model
None
UE distribution
10 UEs distributed randomly in front of each
eNodeB (210 UEs in total)
UE movement pattern
Constant speed to random direction
(changing direction every 5 s)
UE
measurement
interval
(Tm)
50 ms
Simulation duration
70 s
cell B back to cell A. Consequently, a series of handovers
within cells A–B–A–B counts as two ping-pongs.
Figure 4 and 5 show the average number of handovers
per user per second for UE speed of 3 kmph and 30 kmph
respectively. It is obvious that the increase in hysteresis pa-
rameter value signiﬁcantly reduces the number of handovers.
This behaviour was also observed in [9].
The number of handovers is also sensitive to time-to-
trigger. As seen from the same ﬁgures, the increase of time-
to-trigger has the effect of reducing the number of handovers.
[9] and [10] observed the same behaviour.
Time-to-trigger variation is also known as one of the means
to manipulate the number of ping-pong handovers [9]. This is
demonstrated in Figure 6, which depicts the proportion of ping-
pongs over the total number of handovers in the simulation.
Filtering period has also been identiﬁed as a parameter
for tuning handover rates. Fast moving UE typically requires
shorter ﬁltering period than slow moving UE. It has been
Fig. 4.
Simulation results with UE speed of 3 kmph and sliding window
size Tf of 200 ms.
Fig. 5.
Simulation results with UE speed of 30 kmph and sliding window
size Tf of 200 ms.
conﬁrmed that longer ﬁltering period reduces the number of
handovers [11]. In our study, the sliding window size Tf plays
the same role as ﬁltering period, and its effect to handover rate
is presented in Figure 7.
IV.
CONCLUSION AND FUTURE WORK
In this paper, we have described the measurement and
handover modeling on top of NS-3 LTE module. Simulation re-
sults have been presented in order to verify the implementation.
The effect of handover parameters such as hysteresis, time-to-
trigger, and ﬁltering can be clearly seen from the results. For
22
Copyright (c) IARIA, 2013.     ISBN:  978-1-61208-313-1
MOBILITY 2013 : The Third International Conference on Mobile Services, Resources, and Users

Fig. 6. Rate of ping-pong handovers in simulations with UE speed of 30 kmph
and sliding window size Tf of 200 ms.
Fig. 7.
Effect of Tf to handover rate in simulations with hysteresis of 3 dB
and time-to-trigger of 50 ms.
instance, simulation runs with small hysteresis and short time-
to-trigger produced large number of handovers, especially of
ping-pong type. The number of handovers can be substantially
reduced with proper parameterisation. This proves that the
simulated behaviour demonstrated by our model is sensitive to
these parameters and in accord with results from several other
published research works in the ﬁeld. In the future, it will also
be possible to conduct a comparison study of our results with
alternative realisation of measurement and handover model,
which is under development in NS-3.
It is necessary to mention that we have not yet considered
some of the important mobility related statistics in LTE. In
particular, features such as Radio Link Failure (RLF) and
proper modeling of handover failures provide important input
for SON and CN studies. For example, sleeping cell detection
relies on analysis of UE measurements and RLF occurrences in
the network [12]. We are aiming to incorporate RLF into NS-3
LTE module on top of the measurement and handover models
presented in this paper, which altogether will be utilised in our
CN research.
REFERENCES
[1]
C. Mehlf¨uhrer, J. Colom Ikuno, M. ˇSimko, S. Schwarz, M. Wrulich,
and M. Rupp, “The Vienna LTE simulators - enabling reproducibility
in wireless communications research,” EURASIP Journal on Advances
in Signal Processing, vol. 2011, no. 1, pp. 1–14, 2011.
[2]
G. Piro, L. Grieco, G. Boggia, F. Capozzi, and P. Camarda, “Simulating
LTE cellular systems: An open-source framework,” Vehicular Technol-
ogy, IEEE Transactions on, vol. 60, no. 2, pp. 498–513, 2011.
[3]
N. Baldo, M. Miozzo, M. Requena-Esteso, and J. Nin-Guerrero, “An
open source product-oriented LTE network simulator based on ns-3,”
in Proceedings of the 14th ACM international conference on Modeling,
analysis and simulation of wireless and mobile systems, ser. MSWiM
’11.
New York, NY, USA: ACM, 2011, pp. 293–298.
[4]
K. Dimou, M. Wang, Y. Yang, M. Kazmi, A. Larmo, J. Pettersson,
W. Muller, and Y. Timner, “Handover within 3GPP LTE: Design
principles and performance,” in Vehicular Technology Conference Fall
(VTC 2009-Fall), 2009 IEEE 70th, 2009, pp. 1–5.
[5]
LTE; E-UTRA; RRC; Protocol speciﬁcation (release 11), 3GPP Std. TS
36.331, 2013.
[6]
LTE; E-UTRA; Physical layer; Measurements (release 11), 3GPP Std.
TS 36.214, 2013.
[7]
LTE; E-UTRA and E-UTRAN; Overall description; Stage 2 (release
11), 3GPP Std. TS 36.300, 2013.
[8]
E-UTRA; Further advancements for E-UTRA physical layer aspects
(release 9), 3GPP Std. TR 36.814, 2010.
[9]
M. Anas, F. Calabrese, P. Mogensen, C. Rosa, and K. Pedersen, “Per-
formance evaluation of received signal strength based hard handover for
UTRAN LTE,” in Vehicular Technology Conference, 2007. VTC2007-
Spring. IEEE 65th, 2007, pp. 1046–1050.
[10]
C.-C. Lin, K. Sandrasegaran, H. A. M. Ramli, R. Basukala, R. Patacha-
ianand, L. Chen, and T. Afrin, “Optimization of handover algorithms in
3GPP long term evolution system,” in Modeling, Simulation and Applied
Optimization (ICMSAO), 2011 4th International Conference on, 2011,
pp. 1–5.
[11]
M. Anas, F. Calabrese, P.-E. Ostling, K. Pedersen, and P. Mogensen,
“Performance analysis of handover measurements and layer 3 ﬁltering
for UTRAN LTE,” in Personal, Indoor and Mobile Radio Communi-
cations, 2007. PIMRC 2007. IEEE 18th International Symposium on,
2007, pp. 1–5.
[12]
F. Chernogorov, J. Turkka, T. Ristaniemi, and A. Averbuch, “Detection
of sleeping cells in LTE networks using diffusion maps,” in Vehicular
Technology Conference (VTC Spring), 2011 IEEE 73rd, 2011, pp. 1–5.
23
Copyright (c) IARIA, 2013.     ISBN:  978-1-61208-313-1
MOBILITY 2013 : The Third International Conference on Mobile Services, Resources, and Users

