The Use of Image Processing Techniques for Detection of Weed in Lawns
Lorena Parra (1), (2), Virginia Torices (3), José Marín (3), Pedro Vicente Mauri (2), Jaime Lloret (1)
(1)
Instituto de Inv. para la Gestión Integrada de Zonas Costeras (IGIC), Universitat Politècnica de València (UPV). C/
Paranimf, 1, 46730 Grau de Gandia, Gandia
(2)
Instituto Madrileño de Investigación y Desarrollo Rural, Agrario y Alimentario (IMIDRA), Finca El Encin, Autovía
del Noreste A-2, Km. 38.200, 28805 Alcalá de Henares, Madrid
(3)
Universidad Politécnica de Madrid. Escuela Técnica Superior de Ingeniería Agronómica, Alimentaria y de
Biosistemas. Av. Puerta de Hierro, 2, 28040 Madrid
Email: loparbo@doctor.upv.es, virtorices@gmail.com, jmarin@areaverde.es, pedro.mauri@madrid.org, jlloret@dcom.upv.es
Abstract—The presence of weed plants in lawns disrupts their
behavior and correct growth. Moreover, it implies a lack of
uniformity, which is one of the most important factors of the
lawns. The early detection of weeds is crucial to minimize the
need for phytosanitary products. Image processing techniques
and machine vision are widely used in many different areas
such as agriculture, industry, or object identification. In this
paper, we propose the use of image processing techniques to
detect undesired grass species in the lawn. We utilize a drone
with an Arduino module to take pictures. The obtained images
are used to determine the best option to detect the presence of
weeds. Pictures from different grass species with and without
undesired weed species are used. The Red, Green and Blue
(RGB) layers of each picture are mathematically combined in
order to obtain a new raster layer to automatically detect the
weed. Two different methods are used. Different equations
offer different results depending on the weed species. We can
detect two big groups of weeds with the first or with the second
method, according to their color. Finally, the proposed
formulas are verified with pictures taken with different solar
conditions. An aggrupation method to minimize the false
positives is shown.
Keywords-grass lawns; weed plants; image processing; RGB
bands; drone.
I.
INTRODUCTION
In order to maintain a great appearance for grass surfaces,
certain requirements need to be addressed. Due to the
activities that are carried out on the grass or around it, the
grass suffers from compaction and the leaves are broken.
Some of the activities performed on the lawns are: certain
sports, entertainment, and enjoyment in residential areas or
in public gardens. The users of the lawns demand a series of
requisites, being the most important one the visual aspect of
the lawns. The visual aspect can be expressed as the
uniformity of the lawn, the greenness of the grass and the
absence of grassless patches.
The existence of weeds in lawns is a problem. On the one
hand, the weed presence implies a lack of uniformity on the
surface. This lack of uniformity is the first cause of users’
disappointment. On the other hand, the weeds will generate
competition between them and the grass species. For this
reason, it is necessary to carry out specific actions to solve
the weed problem as soon as possible.
It is crucial to detect the appearance of weeds during the
first days. Otherwise, the weed can infest huge areas of the
lawn and it will be more difficult to eradicate. Nowadays, the
best available techniques to detect weeds are the aerial
images of the visual inspection of the lawns. The first option,
the use of satellite images, offers multispectral images.
Nonetheless, they have small spatial resolution and small
temporal resolution. Thus, when we detect the weeds with
the satellite image it may be too late and would be necessary
to apply the phytosanitary treatment to a large area. The
second option, the visual inspection, is useful for small areas
as a private garden. Nevertheless, for big areas such as golf
camps or big public gardens, this solution is not applicable.
Therefore, the use of pictures obtained with drones and their
analysis can be a solution for large surfaces. The use of
image processing is widely used in many different areas and
for countless purposes. In agriculture, it has been used for
illness detection [1] and for fruit maturity evaluation [2]. In
aquaculture, it has been used for feed falling detection [3].
Moreover, it is used for face detection [4] and car license
plate identification [5].
The aim of this paper is to present the use of image
processing techniques for detecting the presence of weeds in
lawns. Thus, a series of pictures were obtained from different
lawns with the presence and absence of weed. All the
pictures were taken under the same solar conditions.
Different grass species and different weed species appear in
the pictures. Part of the pictures will be used to train our
system and the rest of them to verify our findings. The goal
is to use this methodology to automatize the monitoring of
lawns in terms of weed detection. Therefore, it will be
possible to detect the weed and apply the phytosanitary
products only in the affected area.
The rest of this paper is organized as follows. Section II
presents the related work. Section III describes the proposal.
Section IV addresses the obtained results. Section V
summarizes the conclusion and future work.
II. RELATED WORK
In this section, we are going to compare other techniques
utilized to detect weed in different crops.
The detection of weeds is an important issue for
agriculture. Therefore, many scientists have work on their
50
Copyright (c) IARIA, 2019.     ISBN:  978-1-61208-696-5
ICONS 2019 : The Fourteenth International Conference on Systems

identification using pictures. The use of drones has increased
the possibilities, and, in recent years, several papers have
been published.
The use of image processing to determine the presence of
weeds in maize fields was presented by X. P. Burgos-Artizzu
in 2011 [6]. They detail a computer vision system that can be
used with videos. They test their system under different light
conditions. The system detects 95% of the weeds and 80% of
the crops. A. Paikekari et al. presented in 2016 [7] an image
processing methodology for weed detection. First, they use
color to differentiate soil and grass. Then, the resultant image
is converted into a greyscale picture to apply an edge
detection technique. Finally, the resultant image of the edge
detection is divided into 25 blocks. The analysis of each
block determines if it contains weed with narrow leaves,
weed with wide leaves, or crop. In 2018, J. Gao et al. [8]
presented the use of aerial picture with an ultra-high
resolution to detect intra and inter-row weed. They use a
semi-automatic object-based image analysis with random
forests. In addition, they use techniques to classify soil,
weed, and crop. The authors applied this proposal to maize
crop fields. The utilized pictures show the maize in the first
days of growth. Their results have a coefficient of correlation
of 0.895 and a squared mean error of 0.026. J. Marín et al. in
2017 applied simple image processing techniques in different
publications to detect the grass coverage in lawns [9][10].
They work with the histograms of the grass pictures to
determine the weight of the grass and the level of coverage
(high, low, very low).
On the other hand, there are other types of studies
focused on identifying different leaves affections. One
example is the work developed by V. Khanaa and K. P.
Thooyamani in 2017 [11]. They proposed an algorithm based
on image processing. Their algorithm was able to detect
different leave diseases, such as bacterial pith necrosis, early
blight, white trail, and target spot among others.
III. PROPOSAL
In this section, we detail the proposed system for lawns
monitoring. The system is composed of a drone that flies
over the lawn and takes photos. Then, the pictures are
evaluated to determine where there are weeds in the lawn to
program the application of phytosanitary products.
A. Drone
Our system uses a drone to take pictures of the lawn [12].
As long as we need that spatial resolution of 1mm, we
should select a drone with a high spatial resolution flying at
height altitude or drone with lower spatial resolution flying
at a lower height. In order to calculate the flying height
according to the camera resolution, we can use the equations
proposed by Marin et al. in [10]. We are going to use an
Arduino camera with 640X480 pixels and the flying height
will be 2.3m.
It is important to note that for our proposal we are going
to use a drone with no camera. We will add the above-
mentioned camera connected to an Arduino node. The
Arduino node will be in charge of taking pictures and
analyzing them. On the other hand, the flying issues will be
operated by the drone processor, not by the Arduino node.
Thus, we can split the task into different processors and our
system can be adaptive to different situations.
B. Image processing
Once the pictures were gathered by the drone, the node
analyzes them. As we need a fast analysis because the
processor should analyze the data during the flight, it is
necessary to focus on simple image processing techniques.
Therefore, we reduce our possibilities to the operations
involving the RGB data of each pixel in the picture. These
types of operations are common when we work with satellite
images, which are multispectral images. Our challenge is to
detect weed plants in the lawns with the combination of only
3 picture bands. The proposed system is shown in Figure 1,
where one can see the different obtained bands and their
names. Red, green and blue bands are named as Band 1, 2
and 3.
The first issue to be considered is that it is not possible to
work with threshold values of only one of the layers because
these values are greatly affected by sun exposure, the
presence of clouds, and even the day of the year. Thus, we
need to work with a mathematical combination of different
bands to avoid this problem. The second issue is related to
the values of the pixels. Each pixel has a value between 0
and 255 in each one of the bands. This value has no decimals
and can only have a positive value. When we apply the
mathematical combination, these rules are maintained, the
resultant value of each pixel will be a positive value with no
decimals. The last issue is the need of finding a way to
assign values of 0 to the pixels that contain soil of dead
grass. This should be done in order to avoid having false
positives.
C. Studied lawns
The proposed system was tested in Finca El Encin,
research facilities of the Instituto Madrileño de Investigación
y Desarrollo Rural, Agrario y Alimentario (IMIDRA) in
Spain. There are small experimental plots where other
scientists are testing multiple grass combinations. During
their research, different weed plants appear in their lawns.
We use their experimental plots to take pictures of different
types of lawns with and without the presence of weed plants.
By using this experimental plot, we ensure that we will have
lawns with different types of grass and under different
environmental conditions.
IV. RESULTS
In this section, we show the obtained pictures and their
processing to determine the presence or absence of weeds.
First, we show the process to obtain the equations to detect
the weed. Finally, we present its verification.
D. Image processing: soil removal
The
image
processing
method
is
shown
in
this
subsection. First, Table 1 presents the RGB pictures in four
different cases. The first one is a lawn with low grass
51
Copyright (c) IARIA, 2019.     ISBN:  978-1-61208-696-5
ICONS 2019 : The Fourteenth International Conference on Systems

coverage and with the presence of weeds at the top-center
part. The weed has darker coloration than the grass.
Furthermore, it presents higher relative values in the blue
band, compared with the rest of the grass. Picture 2 is taken
in a lawn with high grass coverage. There is a weed plant at
the bottom-left of the picture. As in the previous case, the
weed plant has more bluish coloration.
Figure 1.
System description.
In picture 3, we can see a lawn with low grass coverage
and with the presence of the weed plant in the bottom right
of the picture. In this case, the weed plant has more
yellowish coloration, compared with the grass. Finally,
picture 4 represents typical lawns with no weed plants; but,
under light water stress. Thus, there are some parts of the
grass that have yellowish coloration due to the lack of water.
The first issue that we can pay attention to is the fact that
the soil has higher values of brightness in the red band than
in the green band. Therefore, considering that the values of
the pixels only can be positive and without decimals, we
divide the green band into the red band obtaining a new
raster, which gives us information about the soil/plant
coverage, see (1). The result of this mathematical relation
between bands can be seen in Table I. Grass pixels have
values higher than zero and are colored in green. The soil
pixels have values of zero and are colored in yellow.
Unfortunately, the grass that is stressed or has been
strongly compacted has a similar color as the soil and it is
classified as soil. For our application, it is not a problem,
because the important part for us is the green grass and the
green weeds.
(1)
A. Image processing: weed detection
The next step is to find a mathematical relation, which
gives, as a result, a new raster with different values for pixels
of grass and pixels of weed.
As we have two different types of weed, the ones with
more bluish color, and the ones with more yellowish color
than the grass. Consequently, we will need two different
equations to detect the presence of weeds. One equation for
the bluish weed, the ones that appear in pictures 1 and 2 of
Table 1, and another equation for yellowish weed as the one
that appears in picture 3 of Table I. The first equation, (2),
will be used to detect the bluish weed. This resultant raster
after applying (2) will have high pixel values where there is a
bluish weed. Thus, the equation has to maximize the data of
pixels with higher relative blue values. Then, the data from
blue band should be divided under the data from red and
green band. As in the dividend of the equation (Blue
brightness value of the pixel) has lower values that the
divisor (Green x Red brightness values of pixels), and the
pixels can only be a natural number almost all the pixels
have the value of zero. Thus, no differences were found. In
order to increase the value of the dividend, we square the
dividend. Nevertheless, the value of the dividend is still
lower than the value of the divisor in the majority of the
cases and most of the pixels have a value of zero in the
resultant raster. Finally, we cube the divisor. Then, we obtain
a new raster with different values for different coverage
surfaces. The last step is to apply (1) to the used formula.
The obtained raster combination that is used to detect bluish
weeds can be seen in (2).
On the other hand, we have the picture with yellowish
weed. To detect them we should use the opposite steps that
in the preceding paragraph, we have to use the data from
green and red bands for the dividend and the data from the
blue band for the divisor. As in this case, the values of the
dividend are always higher than the values of the divisor, it is
not necessary to neither square nor cube any of them. As in
the previous case, it is necessary to add the soil/plant
coverage correction factor. Therefore, the proposed formula
that can be used to detect the yellowish weed is given by (3).
ܵ݋݈݅ݎ݁݉݋ݒ݈ܽ=ܤܽ݊݀2ܤܽ݊݀1
ൗ
52
Copyright (c) IARIA, 2019.     ISBN:  978-1-61208-696-5
ICONS 2019 : The Fourteenth International Conference on Systems

(2)
(3)
The result of applying (2) and (3) to the pictures of Table
I can be seen in Table II. We apply both formulas to all of
the pictures to show the effectiveness of each formula for
generating a new raster that contains information about weed
presence. The different colors represent different values in
the raster. The pixels with yellow tones have lower pixel
values. On the contrary, the pixels with purple and blue
colors have the highest values. In the RGB picture, the weeds
position is indicated with red circles. As it is expected, the
pixels that contain bluish weeds (Picture 1 and Picture 2 in
Table I and Table II), present higher values in the resultant
raster after apply (2) than the pixels that contain grass or soil.
The pixels of the resultant raster that have higher brightness
values are represented in purple and blue colors. Meanwhile,
the pixels with low brightness values are colored in yellow
and light yellow. We can see that in Pictures 1 and the
resultant raster of (2) present higher pixel values, colored in
blue, in the area where there are weed plants. The resultant
raster of (3) presents highest values in the pixels, which
represents one of the grass species in Picture 1. In Picture 2,
there is no specific area that contains pixels with high values.
For Picture 3, we can see that the pixels of the raster
obtained with (2), which have the highest values, are not
related with the presence of weeds. However, in the raster
obtained with (3) we can clearly identify the presence of the
weed plant. We can see that one of the grass species present
in the lawn of Picture 3, are giving high values (red color).
But the purple and blue colors are only related with the weed
presence.
Finally, the resultant raster of the picture from the lawns
without weed do not present any areas with high values. In
the case of resultant raster of (2) there are some pixels with
high values but they appear along the raster, not joined in
one area as in the other cases. Meanwhile, in the raster of (3)
almost all the pixels present low values and few pixels have
high values.
TABLE I. FIGURES UTILIZED TO OBTAIN EQUATIONS FOR WEED DETECTION
Picture nº
1
2
3
4
RGB
picture
Soil/Grass
Coverage
TABLE II. RASTER OBTAINED AFTER APPLY THE FORMULAS OF (2) AND (3) FOR WEED DETECTION
Picture nº
1
2
3
4
RGB
picture
Result of
apply (2)
Result of
apply (3)
ܹ݁݁݀ = ቀܤܽ݊݀33
ൗܤܽ݊݀2×ܤܽ݊݀1
ቁ × ቀܤܽ݊݀2ܤܽ݊݀1
ൗ
ቁ
ܹ݁݁݀ = ቀܤܽ݊݀2×ܤܽ݊݀1ܤܽ݊݀3
ൗ
ቁ × ቀܤܽ݊݀2ܤܽ݊݀1
ൗ
ቁ
53
Copyright (c) IARIA, 2019.     ISBN:  978-1-61208-696-5
ICONS 2019 : The Fourteenth International Conference on Systems

In all the cases, there are some pixels that do not belong
to weed that have high values and may be considered as a
false positive. However, as long as these pixels are isolated
and their neighbors have low values it can be easily solved
by using smoothing techniques.
As the higher values indicate the presence of weeds, in
the verification test we are only going to consider the pixels
with the highest values. We will use the natural breaks,
jenks, to divide the pixels into 5 groups and only the last
group will indicate the presence of weeds.
E. Verification process
One of the major advantages of the proposed system is
that its results should not be affected by changes in the solar
exposition. Thus, we are going to verify the obtained formula
with pictures gathered in another time period with different
environmental conditions. Moreover, in the verification test,
we are going to evaluate the use of the smooth technique to
reduce the false positives.
To smooth the resultant raster we are going to aggregate
the data. There are different available options in terms of the
cell factor and in terms of the aggregation technique. In our
case, we are going to test cell values of 5 and 10, and
aggregation techniques of minimum, mean, and media.
The used pictures and the results of the verification can
be seen in Table III. Again, the position of weed is indicated
with a red circle in the RGB picture. Picture 5 was gathered
on a sunny day and represents a lawn with low grass
coverage, with two types of soil (light and dark brown) and
the presence of a lot of weed plants. Some of the weeds of
Picture 5 are a bluish weed, then, the results are after apply
(2). Picture 6 was done a day with less solar radiation. The
picture represents a lawn with some grass patches and the
presence of yellowish weed at the bottom of the picture.
Therefore, the verification is done with (3). Finally, Picture 7
represents a lawn with regular grass coverage on a cloudy
day. In Picture 7, no weed plants are present, the results are
obtained with (2). We select (2) because it is the one that
gives more false positives in the previous test.
The results with the cell value of 10 have not been
presented because they were not representative. We are
going to present in Table III the results of the aggregation
with a cell value of 5. First, we present the results of the
aggregation technique that uses the mean as a result. This
technique is quite accurate in terms of identifying the leaves
of the weed plants. However, there are still some false
positives, which identifies as a weed plant normal grass
leaves. The false positives are more visible in the case of
Picture 7, where there was no weed. The aggregation
technique that uses the median, as a result, has less false
positives. But, it is less precise in terms of weed plant leaves
identification. Finally, if we use the minimum as a result,
there are no false positives. Nevertheless, this results with
this technique have some false negatives.
Thus, depending on the application and the produces
effects on the case of false positives and false negatives, we
can use one aggregation technique or other. For our
application, as the point is to maximize the grass quality by
minimizing the phytosanitary products usage, we prefer to
have false positives than false negatives. Therefore, we
propose to use the aggregation technique that uses the
median as a result.
V. CONCLUSION
In this paper, we have presented our proposal for weed
detection in lawns using image processing. The objective is
to detect the weed plants to apply the phytosanitary products
just to the affected area and not to the entire lawn.
We use a mathematical combination of the RGB layers to
obtain new raster data that can be used to detect the weed.
First, we found a formula that can be used to remove the soil
from the pictures. Then, after analyzing the RGB values of
the weed plants and the grass, we realize that there are two
big groups of weed plants. The ones with a bluish coloration
and the ones with a yellowish coloration, compared with the
grass. Thus, we need to use two different formulas to detect
the weed. Finally, we verify the proposed method of two
equations and apply aggregation techniques to minimize the
number of false positives.
The future works will be related to the identification of
different weed species. Moreover, we will work with other
image
processing
techniques
including
the
boundary
detection and its combination with our current findings.
ACKNOWLEDGMENT
This work is partially found by the European Union with
the Fondo Europeo Agrícola de Desarrollo Rural (FEADER)
– Europa invierte en zonas rurales, the MAPAMA, and
Comunidad de Madrid with the IMIDRA, under the mark of
the
PDR-CM
2014-2020”
project
number
PDR18-
XEROCESPED.
REFERENCES
[1]
J. Lloret, I. Bosch, S. Sendra, and A. Serrano, "A wireless
sensor network for vineyard monitoring that uses image
processing", Sensors, 2011, vol. 11, no 6, pp. 6165-6196.
[2]
P. D. Surya and K. J. Satheesh, "Assessment of banana fruit
maturity by image processing technique", Journal of food
science and technology, 2015, vol. 52, no 3, p. 1316-1327.
[3]
L. Parra, L. García, S. Sendra, and J. Lloret, "The Use of
Sensors for Monitoring the Feeding Process and Adjusting the
Feed Supply Velocity in Fish Farms", Journal of Sensors,
2018, vol. 2018.
[4]
H. Li, Z. Lin, X. Shen, J. Brandt, and G. Hua, "A
convolutional neural network cascade for face detection",
Proceedings of the IEEE Conference on Computer Vision and
Pattern Recognition. 2015. pp. 5325-5334.
[5]
G. Maria, E. Baccaglini, D. Brevi, M. Gavelli, and R.
Scopigno, "A drone-based image processing system for car
detection in a smart transport infrastructure", Electrotechnical
54
Copyright (c) IARIA, 2019.     ISBN:  978-1-61208-696-5
ICONS 2019 : The Fourteenth International Conference on Systems

Conference (MELECON), 2016 18th Mediterranean. IEEE,
2016. pp. 1-5.
[6]
X. P. Burgos-Artizzu, A. Ribeiro, M. Guijarro, and G.
Pajares,
"Real-time
image
processing
for
crop/weed
discrimination in maize fields", Computers and Electronics in
Agriculture, 2011, vol. 75, no 2, pp. 337-346.
[7]
A. Paikekari, V. Ghule, R. Meshram and V. B. Raskar, "Weed
detection using image processing", International Research
Journal of Engineering and Technology (IRJET), 2016, vol. 3,
no 3, pp. 1220-1222
[8]
J. Gao et al. "Fusion of pixel and object-based features for
weed mapping using unmanned aerial vehicle imagery",
International
journal
of
applied
earth
observation
and
geoinformation, 2018, vol. 67, pp. 43-53.
[9]
J. F. Marín Peira, et al. "Automation in the characterization of
the cultivation of lawns in urban grasslands", Proccedings of
the IX Congresso Ibérico de Agroengenharia, Braganza,
Portugal, 4 – 9 Sept. 2017.
[10] J. F. Marín Peira et al. "Urban Lawn Monitoring in Smart
City Environments". Journal of Sensors, 2018, vol. 2018.
[11] V. Khanaa and K. P. Thooyamani, "An Efficient Weed and
Pest Detection System", Indian Journal of Science and
Technology, 2015, vol. 8, no 32.
[12] C. C Baseca, J. R. Díaz, J. Lloret, Communication Ad Hoc
protocol for intelligent video sensing using AR drones, 9th
International Conference on Mobile Ad-hoc and Sensor
Networks (MSN 2013), Dec 11 - 13, 2013. Dalian, China
TABLE III. PICTURES AND OBTAINED RASTERS IN THE VERIFICATION PROCESS
Picture nº
5
6
7
RGB
picture
Aggregate
data:
Cell size 5
Aggregation
type:
Mean
Aggregate
data:
Cell size 5
Aggregation
type:
Media
Aggregate
data:
Cell size 5
Aggregation
type:
Minimum
55
Copyright (c) IARIA, 2019.     ISBN:  978-1-61208-696-5
ICONS 2019 : The Fourteenth International Conference on Systems

