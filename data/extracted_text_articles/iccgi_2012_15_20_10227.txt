PMIPv6-based Inter-Domain Handover using Efficient Buffering Scheme 
Daeseon Park  
Department Of Computer Science and Engineering, 
Korea University,  
Seoul, South Korea 
daesun88@korea.ac.kr 
Minsoo Woo / Sung-Gi Min* 
Department Of Computer Science and Engineering, 
Korea University,  
Seoul, South Korea 
{geniiwoo, sgmin*}@korea.ac.kr
 
 
Abstract—Global 
Handover 
(HO) 
requirement 
between 
domains is increasingly in demand to provide home network 
accessibility in remote places. This necessity will lead 
continuous services between different domains by the Proxy 
Mobile IPv6 (PMIPv6)-based mobility. In this paper, we 
introduce the enhanced inter-domain HO mechanism using the 
efficient buffering scheme to provide continuous services and 
buffered data backup mechanism for the data delivery to 
reduce the inter-domain HO delay between different PMIPv6 
domains. The simulation result shows that the efficient 
buffering scheme and the buffered data backup mechanism 
deliver buffered data among the different domains right after 
completion of inter-domain handover. 
Keywords-PMIPv6; 
handover; 
inter-domain; 
buffering 
scheme; backup mechanism. 
I. 
 INTRODUCTION 
MIPv6 [1] was proposed to meet the global mobility 
demand by the development of wireless communication 
technology and the commodity of hand-held mobile devices. 
IETF introduced Proxy Mobile IPv6 (PMIPv6) for the 
network-based mobility protocol since MIPv6 has the long 
Layer 2 and Layer 3 handover latency due to the Mobile IP 
signaling message involving Mobile Node (MN).  
Localized mobility without requiring the MN to 
participate in any mobility related signaling messages is 
PMIPv6’s [2] purpose, which provides a network-based 
mobility. Mobile Access Gateway (MAG) typically residing 
in the access router detects the attachment of the MN to the 
access link when the MN enters the PMIPv6 domain. MAG 
verifies if the MN is eligible to the network-based mobility 
management service by RADIUS [3] or Diameter [4] 
protocol when a MN attachment is detected. MAG sends a 
Proxy Binding Update (PBU) including MN information and 
Proxy-CoA to the Local Mobility Anchor (LMA) for the 
registration of MN after an authentication & authorization 
procedure with AAA server. When LMA responds the Proxy 
Binding Acknowledgement (PBA) message including home 
network prefix to MAG, bi-direction tunnel is finally 
established for the data delivery from or to the MN between 
LMA and MAG. Moreover, Router Advertisement (RA) 
with home network prefix of MN is sent to MN after home 
network prefix registration for MN is done in MAG. If the 
address analysis for the home network prefix received from 
MAG is successful in MN, MN can eventually communicate 
with Correspondent Node (CN). 
A PMIPv6-based HO and data forwarding in the inter-
domain was proposed in [5] for the inter-domain HO 
solution. Draft NetLMM-Neumann [5] suggests the home 
LMA as Session Mobility Anchor (SMA) to handle all 
incoming and outgoing packets for MN during of mobility 
session. LMA of new PMIPV6 domain initializes a tunnel 
for SMA in the home domain to continue serving as an 
anchor point for MN after inter-domain HO procedures. That 
is, SMA in the home domain acts as the anchoring end point 
for the LMA of visited domain when the inter-domain HO 
occurs. 
In [6], there was a PMIPv6-based inter-domain roaming 
scenario just from the home domain to visited domain with 
two concatenated tunnels between visited MAG and home 
LMA via visited LMA. 
Our proposal will extend [6] to the PMIPv6-based inter-
domain HO scenarios including between visited domains and 
returning to the home domain from the visited domain and 
the efficient buffering scheme and buffered data backup 
mechanism will be applied to reduce the inter-domain HO 
delay.  
The remainder of this paper is organized as follows: In 
Section II, the related works are explained. Section III will 
describe the proposed schemes. In Section VI, performance 
of analysis of our scheme is studied. Concluding remarks 
will be given in Section VII. 
II. 
RELATED WORKS 
Soochang [6] introduced a PMIPv6-based inter-domain 
roaming mechanism using concatenated tunnel construction 
from visited MAG to visited LMA and from home LMA to 
visited LMA when MN moves to a visited domain. Visited 
MAG sends PBU message including home LMA address of 
MN received from the home AAA response message via 
visited AAA server when MN is attached to the visited MAG 
and MN is recognized as roaming user after interacting with 
the visited AAA server. Inter-domain tunnel is additionally 
established between visited LMA and home LMA when 
visited LMA and home LMA exchanges the PBU/PBA 
message. In [6], two concatenated tunnels are required to 
roam from the home domain to the visited domain. Two 
tunnels were composed of one intra-domain tunnel from 
visited MAG to visited LMA and one inter-domain tunnel 
from visited LMA to home LMA. 
Hyo-beom [7] proposed efficient buffering scheme to 
prevent the HO packet loss within the same PMIPv6 intra-
domain. This scheme introduced the ARQ handling function 
327
Copyright (c) IARIA, 2012.     ISBN:  978-1-61208-202-8
ICCGI 2012 : The Seventh International Multi-Conference on Computing in the Global Information Technology

similar to Go-Back-N to implement the buffered data 
delivery without duplicated packets between MAG and 
LMA. Home MAG (MAGh) and home LMA (LMAh) 
exchange the PBU/PBA message to construct the bi-
directional tunnel when a MN is attached in home MAG. 
ARQ anchor handler in LMAh makes buffer per MN, 
temporarily stores every packet in each buffer and sends 
buffered packets to MAG including the sequence number 
located in IP-in-IP encapsulation header with destination 
option header according to [5]. On receiving a packet from 
LMA, The ARQ handler of MAGh sends packets to MN and 
responds the delivered sequence number to LMA. Then, 
ARQ anchor handler of LMAh will remove the delivered 
packets from the buffer by the reported sequence number. In 
PMIPv6 [2], efficient buffering scheme using the sequence 
number to check duplicated packets is required to provide 
the seamless mobility in ARQ handler of MAG and ARQ 
anchor handler of LMA since the HO start time of MN is not 
predictable in the network side. 
III. 
PROPOSED SCHEMES 
Roaming scenario was only proposed for a PMIPv6-
based MN roaming scenario from the home domain to the 
visited domain in [5][6]. Our proposal extends [6] to the 
PMIPv6-based inter-domain HO scenarios including HO 
case between visited domains and HO case for the returning 
to the home domain using the sequence number-based 
efficient buffering scheme and buffered data backup 
mechanism to prevent the packet loss between domains. To 
distinguish PBU message from the LMA of another PMIPv6 
domain and PBU message from MAG within the same 
PMIPv6 domain, flag S will be set to indicate the inter-
domain PBU message, which is originated from another 
LMA in the different PMIPv6 domain according to [5]. 
Sequence number-based efficient buffering scheme in [5] 
can be extended to inter-domain HO using buffered data 
backup mechanism. Sequence number is allocated to the 
packet, which is sent to MAG through tunnel from the LMA 
to identify the packet. MAG reports to LMA whether packet 
is delivered to MN or not by ACK message using two flags; 
flag RR (Receiver Ready) is set for the periodic report by the 
expiry of timer in MAG and the other flag REJ (Reject) is set 
to inform LMA of the fact that there is the first missing 
packets after successful delivery for the immediate report. 
Namely, setting flag REJ in ACK message may indicate the 
HO preparation.  
Figure. 1 shows the example of the sequence number- 
based buffering management in the inter-domain HO.  When 
LMAh receives the data 1 destined to MN, LMAh allocates 
the sequence number 1 to the received packet to identify the 
packet, which is sent to the MAG through the tunnel and 
LMAh temporarily stores the data D(1) and sequence 
number S(1) per MN. Sequence number S(1) is sent to the 
MAG included in the IP-in-IP encapsulation header with 
new destination option header. S(2)/D(2) and S(3)/D(3) are 
subsequently sent to MAG and stored in LMAh. If MAGh 
detects the packet D(3) is not sent to MN, delivery failure is 
immediately reported to LMAh  using the flag REJ(3) in the 
ACK message. In other words, it means that D(1) and D(2) 
are appropriately sent to MN and needs to remove the data 
D(1) and D(2) in the buffer. To prevent buffer overflow, flag 
RR in the ACK message is used for the periodic packet 
delivery status report to the LMAh by the expiry of the RR 
timer in the MAGh; RR(6) indicates that MAGh already 
delivered all packets to MN and buffered data less than those 
indexed with sequence number 6 should be cleared in the 
buffer of LMAh. Since data are not delivered to MN and 
MAGh returns the flag REJ(6) and REJ(7) to LMAh during 
the inter-domain HO, all the buffered data are delivered to 
new LMAv via the inter-domain tunnel after MN attachment 
to new domain and the establishment  of inter-domain tunnel 
between LMAh and LMAv. All buffered data are eventually 
flushed to MN through the new MAGv. Sequence number- 
based buffer management is restarted in the new LMAv 
according to the packet delivery status report from the new 
MAGv after the inter-domain HO. 
A. PMIPv6-based HO from Home to Visited Domain 
Figure. 2 shows that MAGv1 performs the authentication 
step with visited 1 AAA when MN moves to visited domain 
1. It redirects authentication messages to home AAA server 
according to the service level agreement between two AAA 
servers since the visited 1 AAA server knows that MN is 
involved in home AAA by the realm portion of user NAI 
(username@realm). Response messages including LMAh 
address information from home AAA server are sent to 
MAGv through the visited 1 AAA. For the construction of 
inter-domain tunnel between LMAv and LMAh, MAGv1 
sends the PBU including LMAh address information to 
LMAv. LMAv sends the PBU message with flag S set to 
LMAh address received from MAGv for inter-domain tunnel 
establishment. Hence, after responding the PBA message to 
LMAv and transmitting the RA message to MN, LMAh can 
finally send the sequence number-based buffered data to 
LMAv for flushing the buffered data through MAGv 
according to the efficient buffering scheme. On flushing the 
data, LMAv newly acts as ARQ anchor handler and MAGv 
serves as ARQ handler. 
B. PMIPv6-based HO between Visited Domains 
In Figure. 3, buffered data in LMAv1 should be firstly 
returned to LMAh in HO scenario from visited domain 1 to 
visited domain 2 in order to prevent the inter-domain tunnel 
from extending the repeated ARQ handler from the home 
domain to another visited domain via visited domain 1. 
LMAv1 returns the buffered data to LMAh after receiving 
the PBU with flag S set from the home domain according to 
buffered data backup scheme. When MN moves to visited 
domain 2 and is attached to MAGv2, MAGv2 will send the 
PBU to LMAv2 for the establishment of inter-domain tunnel 
between LMAh and LMAv2 and then, LMAv2 will notify 
LMAh that the inter-domain HO occurs by sending the PBU 
with  flag  S  set  to  LMAh,  LMAh  requests  the  LMAv1  to  
return the sequence number-based buffered data to LMAh by 
sending PBU with flag S set. After inter-domain tunnel 
establishment between LMAv2 and LMAh, LMAh can 
eventually transfer the sequence number-based buffered data 
to the LMAv2, which requested the PBU for the buffered 
328
Copyright (c) IARIA, 2012.     ISBN:  978-1-61208-202-8
ICCGI 2012 : The Seventh International Multi-Conference on Computing in the Global Information Technology

data flushing through the MAGv2. Old intra-domain tunnel 
between MAGv1 and LMAv1 is terminated by predefined 
timer. According to this backup mechanism from the 
previous LMAv2 to LMAh for the buffered data,  LMAv2, 
which acts as new ARQ anchor handler does not need to 
know the information of previously anchored LMA 
information and it is not required to trigger additional 
signaling message between AAAh and LMAh for the 
buffered data delivery. 
C. PMIPv6-based HO for Returning to Home Domain 
Figure. 4 indicates that MN can directly receive the 
buffered data from LMAh when MN comes back from the 
visited domain 2 to the home domain and is attached to 
MAGh because buffered data in previous LMA is already 
transferred to LMAh according to the buffered data backup 
mechanism. Predefined timer also terminates the old intra-
domain tunnel between MAGv and LMAv. 
IV. 
EXPERIMENTS 
The simulation using NS-3 network simulator was 
performed 
in 
IEEE 
802.11 
wireless 
environments. 
Simulation network topology is shown by Figure. 5.  
There are three inter-domain HO scenarios and each 
domain has one LMA connected with each different domain 
and two MAGs are linked each other within domain. The 
link delay of all wired links is 10msec and the link capacity 
is 50Mbps for the wired links and 11Mbps for the wireless 
links according to the 802.11a standard. As for the wireless 
delay, propagation delay model is applied to the simulation. 
MN moves with velocity 10m/sec across the PMIPv6 
domains from the home domain to the visited domain 2 via 
visited domain 1 and then finally returns to the home domain. 
CN is attached with link capacity 50Mbps & link delay 
100msec and communicates with MN through CBR over 
UDP with rates 1 Mbps. Sequence number will be measured 
to check the packet delivery in the simulation because ARQ 
anchor handler in LMA makes buffer per MN, temporarily 
stores every packet in each buffer and sends buffered packets 
to MAG including the sequence number located in IP-in-IP 
encapsulation header with destination option header 
according to [5]. In the simulation, inter-domain HO delay 
will be compared to the test case without efficient buffering 
scheme and buffered data backup mechanism to measure the 
sequence number for the packet delivery performance in the 
following cases: inter-domain HO to visited domain, inter-
domain HO between visited domains, and inter-domain HO 
returning to the home domain. 
 
Home Domain
Visited Domain 2
Visited Domain 1
LMA #1
LMA #2
LMA #3
MAG #1
MAG #2
MAG #3
MAG #4
MAG #5
MAG #6
MN
MN
MN
MN
MN
MN
HO Case #3
(Visited2ÆHome)
CN
Internet
 
Figure 5.  A network topology for simulation. 
Sequence No.
Time [sec]
900
1050
10.2
10.4
10.6
9.8
10
11.2
11.4
11.6
10.8
11
850
950
1000
Packet delivered period by buffering scheme
Packet undelivered period without buffering scheme
 
Figure 6.  Received sequence number after inter-domain HO from home 
domain to visited domain 1 with buffering scheme when CN sends packets 
to MN. 
Figure. 6 shows that inter-domain HO occurs around 
10.39s from the home domain to the visited domain 1. 
Buffered packets are delivered from LMAh to LMAv1 
through the inter-domain tunnel for the data flushing in 
10.59s before MAG in the visited domain 1 can deliver 
packets to MN without the efficient buffering and buffered 
data backup scheme in 10.77s.  
329
Copyright (c) IARIA, 2012.     ISBN:  978-1-61208-202-8
ICCGI 2012 : The Seventh International Multi-Conference on Computing in the Global Information Technology

Sequence No.
Time [sec]
20.80 21.00 21.20 21.40
22.00 22.20
21.60 21.80
22.40 22.60
2075
2000
1975
2025
2050
Packet delivered period by buffering scheme
Packet undelivered period without buffering scheme
 
Figure 7.  Received sequence number after inter-domain HO from visited 
domain 1 to visited domain 2 with buffering scheme when CN sends 
packets to MN. 
Figure. 7 shows that inter-domain HO occurs around 
21.50s from visited domain 1 to visited domain 2. Buffered 
packets are delivered from LMAv1 to LMAv2 through the 
LMAh using the backup mechanism for the buffered data 
flushing in 21.69s before MAG in the visited domain 2 can 
deliver packets to MN without the efficient buffering and 
buffered data backup scheme in 21.87s. 
Sequence No.
Time [sec]
52.20
52.80 53.00
52.40 52.60
53.20 53.40
5150
5100
5125
5075
5175
5200
51.80 52.00
51.60
Packet delivered period by buffering scheme
Packet undelivered period without buffering scheme
 
Figure 8.  Received sequence number after inter-domain HO from visited 
domain 2 to home domain with buffering scheme when CN sends packets 
to MN. 
Figure. 8 shows that inter-domain HO occurs around 
51.12s from visited domain 2 to the home domain. Buffered 
packets are delivered from LMAv2 to LMAh for the data 
flushing in 52.42s before MAG in the visited domain 1 can 
deliver packets to MN without efficient buffering and 
buffered data backup scheme in 52.65s. 
 
MN
MN attachment
Home Domain
Different Domain
LMAh
MAGh
MAGv1
LMAv1
CN
PBU/PBA
Data #1
S(1)
D(1)
D(1) / ACK(1)
S(1) / D(1)
Data #2
D(2) / ACK(2)
S(2) / D(2)
S(1) S(2)
D(1) D(2)
Data #3
D(3) / No resp. (3)
S(3) / D(3)
S(1) S(2) S(3)
D(1) D(2) D(3)
REJ(3)
S(3)
D(3)
D(4) / ACK(4)
S(4) / D(4)
Data #5
D(5) / ACK(5)
S(5) / D(5)
S(3) S(4)
D(3) D(4)
RR(6)
S(3) S(4) S(5)
D(3) D(4) D(5)
Expiry of RR timer
Data #4
D(6) / No resp. (6)
S(6) / D(6)
Data #7
D(7) / No resp. (7)
S(7) / D(7)
Data #6
Inter-domain HO
S(6)
D(6)
S(6) S(7)
D(6) D(7)
REJ(6)
REJ(7)
MN attachment
PBU/PBA
PBU/PBA
S(6) S(7)
D(6) D(7)
Data #8
S(6) / D(6), S(7) / D(7)
D(6) / ACK(6), D(7) / ACK(7)
S(8)
D(8)
S(8) / D(8)
D(8) / ACK(8)
RR(9)
D(9) / ACK(9)
Buffered Data Backup via Inter-domain Tunnel
 
Figure 1.  A sequence number and buffered data management in the inter-domain HO 
330
Copyright (c) IARIA, 2012.     ISBN:  978-1-61208-202-8
ICCGI 2012 : The Seventh International Multi-Conference on Computing in the Global Information Technology

MN
MN Attachment
AAA Request
AAA Response w/ LMAh and Framed-IPv6-Prefix of MN
PBA
PBU
PBA
RA
MN detachment
AAA Response w/ LMAh information and Framed-IPv6-Prefix of MN
Old ARQ handler sends last 
sequence number to anchor 
ARQ handler in LMAh
Anchor ARQ handler stores or 
removes data according to 
received sequence number
PBU
New ARQ handler for packet 
delivery status and delivered 
packet report in MAGv
Data
ARQ handler in LMAv interacts 
with new ARQ handler in MAGv
after processing the flushed data
Flushing the 
buffered data
Visited Domain 1
Home Domain
tunnel clear message
AAAv
LMAv1
MAGv1
MAGh
LMAh
AAAh
S(n)
S(n+1)
S(n+2)
D(n)
D(n+1)
D(n+2)
S(n+2)
S(n+3)
D(n+2)
D(n+3)
 
Figure 2.  A call flow for HO from home to visited domain. 
MN Attachment
AAA Request
MN detachment
AAA Request
AAA Response
PBU
PBA
PBU
PBA
RA
Anchor ARQ handler  
for buffering data in 
LMAh
New ARQ handler 
manages the packet 
delivery status and 
delivered sequence 
report in MAGh
Old anchor ARQ 
handler flushes 
the buffered 
data to MAGh
AAA Response / LMAh information and Framed-IPv6–Prefix of MN
Visited Domain 2
Visited Domain 1
PBU
PBA
Main anchor ARQ 
handler needs to 
reorder the 
buffered data and 
newly  received 
from CN to flush to 
MAGv2 
Inter-domain tunnel clear message
Tunnel clear message
Home Domain
MAGv1
LMAv1
AAAv1
MN
MAGv2
LMAv2
AAAv2
MAGh
LMAh
AAAh
S(n+4) S(n+5)
D(n+4) D(n+5)
S(n+5) S(n+6)
D(n+5) D(n+6)
Old ARQ handler sends last 
sequence number to anchor 
ARQ handler in LMAh
 
Figure 3.  A call flow for HO from visited domain 1 to visited domain 2. 
331
Copyright (c) IARIA, 2012.     ISBN:  978-1-61208-202-8
ICCGI 2012 : The Seventh International Multi-Conference on Computing in the Global Information Technology

MN Detachment
RA
Anchor ARQ handler 
flushes the buffered 
data to MAGh
Data
Old ARQ handler sends last 
sequence number to anchor 
ARQ handler in LMAh
MN Attachment
PBU
PBA
Anchor ARQ handler  for 
buffering data in LMAv
New ARQ handler manages the 
packet delivery status and delivered 
sequence report in MAGh
PBU
PBA
AAA Request
AAA Response
Flushing the buffered 
data using already exist 
inter-domain tunnel
Inter-domain tunnel clear message
Tunnel clear message
Visited Domain 2
Home Domain
MN
MAGv2
LMAv2
AAAv2
MAGh
LMAh
AAAh
S(n+6) S(n+7)
D(n+6) D(n+7)
S(n+7) S(n+8)
D(n+7) D(n+8)
 
Figure 4.  A call flow for HO from visited domain 2 to home domain. 
V. 
CONCLUSIONS 
Our proposal expands Draft NetLMM-Neumann [5] and 
Soochang [6] to inter-domain HO scenarios including the 
case between visited domains and the case for the returning 
to the home domain by using the buffered data backup 
scheme. In inter-domain HO between visited domains, 
buffered data backup mechanism is proposed to prevent 
inter-domain tunnel from extending the sequential buffered 
data relay through the multiple LMA to reach the target 
LMA. For the seamless mobility and service continuity in 
the inter-domain HO, efficient buffering scheme [7] in the 
intra-domain HO is extended to inter-domain HO scenario. 
The simulation results show that efficient buffering 
scheme provides the reduction of inter-domain HO delay and 
the enhancement of seamless services by supporting the 
sequence number-based data management between MAG 
and LMA and the buffered data delivery from the old LMA 
to new target LMA through the inter-domain tunnel.  
 
REFERENCES 
[1] C. Perkins, Ed., D. Johnson, and J. Arkko, “Mobility Support 
in IPv6,” RFC6275, July 2011. 
[2] S. Gundavelli, Ed., K. Leung, V. Devarapalli, K. Chowdhury, 
and B. Patil ”Proxy  Mobile  IPv6,” RFC5213, August 2008. 
[3] J.Salowey and R.Droms, “RADIUS delegated-IPv6-Prefix 
attribute,” RFC4818, April 2007. 
[4] P. Calhoun, J. Loughney, E. Guttman, G. Zorn, and J. Arkko, 
“Diameter base protocol,” RFC3588, September 2003. 
[5] N. Neumann, X. Fu, and J. Lei, “Inter-Domain Handover and 
Data Forwarding between Proxy Mobile IPv6 Domains,” 
draft-neumann-netlmm-inter-domain-02, March 2009. 
[6] Soochang P. and Euisin L., “Inter-Domain Roaming 
Mechanism Transparent to Mobile Nodes among PMIPv6 
Networks,” Vehicular Technology Conference (VTC 2010-
Spring), pp. 1608-1611, May 2010. 
[7] Hyo-Beom L., Sung-Gi M., Kyoung-Hee L., and Hyun-Woo 
L. “PMIPv6-Based NEMO Protocol with Efficient Buffering 
Scheme,” Ubiquitous Information Technologies and 
Applications (CUTE), pp. 1-6, December 2010.  
332
Copyright (c) IARIA, 2012.     ISBN:  978-1-61208-202-8
ICCGI 2012 : The Seventh International Multi-Conference on Computing in the Global Information Technology

