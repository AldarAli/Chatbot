Images Processing Techniques and Data Analysis Applied to High-Power Laser
Systems
Bertrand de Boisdeffre, Mihai Caragea, Ioan Dancus, Daniel Ursescu
ELI-NP project, Laser department
Horia Hulubei National Institute for Physics and Nuclear Engineering
Magurele, Romania
e-mail: bertrand.boisdeffre@eli-np.ro, mihai.caragea@nipne.ro, ioan,dancus@eli-np.ro, daniel.ursescu@eli-np.ro
Abstract — Extreme-Light Nuclear Physics (ELI-NP) facility in
Romania is part of the pan-European distributed facility that
addresses laser physics research with emphasis in the field of
nuclear physics (in Romania), secondary radiation sources (in
the Czech Republic) and attosecond light science (in Hungary).
At ELI-NP, experiments will be carried out by using a High-
Power Laser System (HPLS) delivered by Thales Company.
Within the HPLS,
cameras
acquire images at
different
frequencies (from 10 frames per second to 1 frame per
minute). They contribute to more than 90% of the data
produced each day (around 700 gigabytes). These data are
stored in Hierarchical Data Format 5 (HDF5) files on different
servers located in the HPLS network. Thus, in this paper, we
aim at presenting how digital image processing techniques
applied on images can be used to reduce the amount of data
that should be stored at the ELI-NP data center. The ensemble
of these techniques were grouped and structured in order to
form a laser beam detection algorithm. The algorithm was
tested on different laser beam intensity profiles (Near-Field
and Far-Field). As a conclusion, this paper offers a perspective
upon the future development of testing quantitatively the
algorithm and improving it.
Keywords-laser; image processing; HDF5; data analysis.
I.
INTRODUCTION
Research in the field of laser physics has been growing
for the last thirty years especially after the development of
the chirped pulse amplification technique [1]. The latter was
recognized
as
one
of
the
most
important
scientific
achievements being awarded the Nobel Prize in Physics in
2018. In 2006, the European Strategy Forum on Research
Infrastructures decided to build a pan-European distributed
research facility, the Extreme Light Infrastructure (ELI) [2].
The implementation phase is on-going in three countries (the
Czech Republic, Hungary and Romania). If the three pillars
aim to host different but complementary experiments, all of
them are making use of High-Power Laser Systems (HPLS).
Such a system is currently being implemented in Romania by
Thales.
The HPLS at ELI-NP is partially functional and the data
acquired through its complex Distributed Control System
(DCS) are already available. The DCS contains more than
one hundred laser diagnostics instruments. Complementary
metal–oxide–semiconductor (CMOS) cameras are the key
instruments when considering the volume of data produced.
Some of these cameras are not triggered externally, resulting
in the acquisition of images without any laser beams. Our
main goal is to eliminate data (images) without valuable
information
by
implementing
a
laser
beam
detection
algorithm. To
our knowledge, this problem was
not
addressed in other laser facilities. Most of the time, the
methods found in the literature aim to perform alignment
tasks [3][4] and are based on alignment loop using
weighting centroid and pointing algorithms [5]. Specific
needs, such as laser beam classifications, led to the
development of other techniques based on convolutional
neural network, as presented in [6].
Our approach is quite different because we cannot
assume
that
the
image
contains
a
beam
a
priori.
Additionally, the dataset we have to process is large and
diverse because the images come from different laser
subsystems and may capture different profile intensity
measurements
(e.g.,
Near-Field
and
Far-Field).
Our
algorithm is primarily relying on region-based segmentation
[7] and is similar to the autofocus algorithm presented by
Gu [8]. If the first part of the two algorithms (filtering and
segmentation techniques) is the same, the last part is not. We
consider indeed that the laser beam cannot always be
modelled as a circle or an ellipse. This assumption was
made after we conducted a visual analysis of the laser beam
images already available from the HPLS, in particular when
looking at Far-Field beam intensity profiles. Instead, we
propose to use a convex-hull algorithm [9] that was tested
on few images samples.
The structure of the paper is the following: in Section II,
we present the structure of the data that had to be processed.
Section III describes how a laser beam detection algorithm
has
been
developed
by
using
threshold
segmentation
techniques combined with non-linear filtering and convex
hull algorithm. The paper concludes with the work to be
carried out in the future in order to improve the current
algorithm.
II.
DATA STRUCTURE
The data stored by the HPLS DCS are using a specific
Hierarchical Data Format, HDF5 [10]. The HDF5 format is
based on an Abstract Data Model relying on three key
49
Copyright (c) IARIA, 2019.     ISBN:  978-1-61208-697-2
MMEDIA 2019 : The Eleventh International Conference on Advances in Multimedia

concepts: File, Group, and Dataset. They are presented in
Figure 1.
The File is a storage container for organizing objects of
mainly two types: Groups and Datasets. A Group is similar
to a filesystem directory and contains Groups or Datasets
linked together with parent-child relationships. Finally, the
dataset is a multidimensional array of data elements. Each
dataset relies on diverse properties that characterize it. All
the images to be analyzed by the algorithm presented in the
next section are stored in such HDF5 files.
III.
LASER BEAM DETECTION ALGORITHM
The laser beam detection algorithm is divided into four
main steps:
1)
Access to input data and creation of python numpy
array
2)
Segmentation with a threshold algorithm
3)
Noise filtering with a median filter
4)
Beam detection with the convex hull algorithm
A.
Access to input data and creation of numpy array
The access to the data is made by opening the HDF5 file
with the use of the h5.py python modules. The matrix of
pixels contained in the HDF5 file is stored as a numpy
array. This array is used as an input for the algorithm.
Numpy array was selected because it uses less memory than
classical python lists [11] and a vast number of python
packages for image processing were developed around it
[12][13].
B.
Selection of a threshold algorithm
To isolate a specific object/region in an image, several
segmentation techniques exist. In this study, we focused on
two threshold techniques: minimum-threshold algorithm and
Otsu threshold algorithm [14].
1)
Minimum threshold algorithm
The algorithm can be explained by the formula below:
g(x,y) = f(x,y), 
if  f(x,y) ≥ T 
g(x,y) = 0,
if f(x,y) < T
-
f(x,y): value of the pixel located at the (x,y) coordinates
in the original image
-
T: threshold value
-
g(x,y): value of the pixel located at the (x,y) coordinates
after processing
Usually, the laser beams are modeled with Gaussian, or
Super-Gaussian
distributions
[15].
When
considering
Gaussian beams, the maximum intensity is located at the
center of the beam. The diameter can be measured either at
“Full-Width-Half-Maximum” (FWHM), either at “1/e2”. In
the first measurement, the optical intensity drops to ½ of the
maximum intensity value. In the second case, the optical
density drops to 13.5% (1/e2) of the maximum intensity.
These beam diameters measurements are represented in
Figure 2.
Based on these measurements, we defined two threshold
values:
-
T1 = I(FWHM) = I0/2
-
T2 = I(1/e2 ) = I0*1/e2
I0: peak intensity of a Gaussian beam
After empiric tests, it appears that the threshold value T2
is better - the shape of the original beam is preserved - than
T1 (see Figure 3).
2)
Otsu threshold algorithm
This threshold algorithm is named after its inventor
(Nobuyuki Otsu). The algorithm is quite complex, but the
main idea can be expressed as follows: the algorithm
calculates automatically the optimized threshold value to be
applied on an image. This calculus is based on the histogram
of the image.
Nevertheless, the algorithm “assumes” a
bimodal distribution of the histogram (the image should be
divided
between
background
and
foreground
pixels).
Figure 3. a) Original image; b) image processed with the
“1/e2” threshold; c) image processed with “FWHM” threshold
Figure 1. Simplified view of the HDF5 structure
Figure 2. Intensity of a Gaussian beam with the
representations of the beam diameters at FWHM and 1/e2
50
Copyright (c) IARIA, 2019.     ISBN:  978-1-61208-697-2
MMEDIA 2019 : The Eleventh International Conference on Advances in Multimedia

Additionally, the algorithm needs a sharp valley between the
two peaks of the histogram and cannot work if the
background and foreground pixels are too different in terms
of size (e.g., a small object in comparison with its
background). To implement the Otsu algorithm, the scikit-
image module was used. “Near-Field” and “Far-Field” beam
profile images were processed with this technique (see
Figure 4). The threshold values computed for the images are
available in the Table 1.
TABLE I. EXAMPLE OF THRESHOLD VALUES DEPENDING ON
THE THRESHOLD ALGORITHM
Image
Type of
image
1/e2 threshold
value
Otsu
threshold
value
a)
Far-Field
470
948
b)
Near-Field
214
296
The Otsu threshold tends to eliminate more information
than the minimum threshold “1/e2” (due to a higher
threshold value). This is acceptable for “Near-Field” beam
profiles but becomes more problematic for the “Far-Field”
beam profiles.
As a conclusion, the images are segmented in two
regions: beam (“white region”) and background (“black
region”). To identify the surface of the “white region”, the
convex hull algorithm is used, however not without a pre-
filtering, as we will observe in the next paragraph.
C.
Median filtering
The application of threshold methods has a drawback.
When a “noise” is present on the original image, both
threshold techniques tend to amplify it and produce a “salt”
noise (see Figure 5). To eliminate this noise, a median filter
[16] is used after the thresholding process. The size of the
median filter windows has an influence on the “white
segmented region”. The median filter tends to smooth the
region and the bigger the window is, the smaller the “white
region” becomes. Different sizes were tested: from 3 to 15.
After the filtering process, the image is segmented in two
regions. In an ideal scenario, the white region (laser beam)
is either circular, either slightly elliptic and could be easily
characterized by its smaller inner/outer circle/ellipse. The
reality is quite different because laser beams can have “non-
canonic” geometrical forms (see image a) in Figure 4),
“critical points” that we define as points located in the white
region but having a zero value (see Figure 5).
D.
Convex hull algorithm and preliminary results
To overcome the issues previously mentioned, we
propose to find the smallest convex set that will contain all
the points of the “white region”. In other words, the set will
represent the smallest convex polygon containing all the
points of the “white region”.
The advantage of this
technique is that the polygon will be much closer to the
form of the laser beam than the classical inner/outer
circle/ellipse/rectangle, etc., but only if the image was
correctly segmented and filtered before. Figure 6 shows the
problematics encountered when applying this algorithm.
In Figure 6, the polygon containing the white region is
filled in yellow. In picture c), the polygon covers almost the
entire image due to the noise that was not filtered. In picture
Figure 4. Left column, original images; middle-column,
images processed with “1/e2 threshold; right column, images
processed with Otsu threshold
Figure 5. Example of image with a salt noise obtained after
threshold algorithm processing
Figure 6. a) Original image; b) & d) segmented image w/out
& w/ median filtering; c) & e) results of the convex hull
algorithm
51
Copyright (c) IARIA, 2019.     ISBN:  978-1-61208-697-2
MMEDIA 2019 : The Eleventh International Conference on Advances in Multimedia

e), the polygon shape is close to the original beam shape.
Once the polygon is determined, its properties (centroid,
perimeter, surface, etc.) can be measured. The resulted
properties can be used to characterize the laser beam.
Finally, the laser beam detection algorithm was tested on an
empty image. The result is presented in Figure 7.
The image b) In Figure 7 does not contain any polygon,
which is equivalent to the fact that no beam was detected.
IV.
CONCLUSIONS
The results obtained with the laser beam detection
algorithm are encouraging, but are based on a few image
samples. This is the reason why quantitative methods for
measuring the information lost during the processing will be
tested in the near future. We envisage using the following
region-based metrics: Overall Pixel accuracy and Jaccard
Index. Additionally, future work will be necessary to
implement a real-time algorithm. At this moment, the
algorithm is an offline processing made at the ELI-NP data
center in order to sort images with beam and images without
beam. With a real-time algorithm running directly on the
server acquiring images, it would be possible to store only
valuable data in the ELI-NP datacenter.
ACKNOWLEDGMENT
This research was supported by the Romanian Ministry
of Research and Innovation through the Sovarex project. We
would like to thank the director of the project, Mihnea Dulea,
for his constant support and Thales Services and Thales
Systems Romania, in particular Andrei Gradinariu and
Dominique Peter who made the data available to the IFIN-
HH team.
REFERENCES
[1]
D. Strickland and G. Mourou, “Compression of amplified
chirped optical pulses” Phil. Trans. Optics Communications,
Volume 56, number 3, pp. 219-221, December 1985
[2]
G. Mourou, G. Korn, W. Sandner and J.L. Collier , “ELI -
Extreme Light Infrastructure Science and Technology with
Ultra-Intense Lasers Whitebook”. [Online] Available from:
https://eli-laser.eu/media/1019/eli-whitebook.pdf
[3]
R. Ziano, J-B. Accary, B. Ploetzeneder, R. Versaci and B.
LeGarrec, “Alignment system for high-power large aperture
laser systems”, Proc. SPIE High-Power, High-Energy, and
High-Intensity Laser
Technology II,
Volume 9513,
id.
95130J, May 2015, doi: 10.1117/12.2178479
[4]
K. C. Wilhlelmsen, A. A. S. Awwal, S. W. Ferguson, B.
Horowitz, V. J. Miller-Kamm, C. A. Reynolds, “Automati
Alignment System for the National Ignition Facility”, Proc.
ICALEPCS 2007, Oct. 2007, pp. 486-490
[5]
A. A. Awwal R. R. Leach, V. J. Miller-Kamm, K. C.
Wilhelmsen and R. Lowe-Webb, “Image processing for the
Automatic Alignment at the National Ignition Facility”, OSA
Technical
Digest,
paper
SM2M.3,
doi:
10.1364/CLEO_SI.2016.SM2M.3
[6]
M.
Kaur
and P.
Goyal,
“A review on
region
based
segmentation”, Int. J.Sci. Res., vol. 4, pp. 3194 - 3197, April
2015
[7]
Z. Alom, A. A. S. Awwal, R. Lowe-Webb and T. M. Taha,
“Optical
beam
classification
using
deep
learning:
A
comparison with rule- and feature-based classification”, Proc.
SPIE Optics and Photonics for Information Processing XI,
Volume
10395,
id
103950J
Sep.
2017,
doi:
10.1117/12.2282903
[8]
C. C. Gu, H. Cheng, K. J. Wu, L. J. Zhang and X. P. Guan,
“A High Precision Laser-Based Autofocus Method Using
Biased Image Plane for Microscopy”, Journal of Sensors,
Volume 2018, id 8542680, doi: 10.1155/2018/8542680
[9]
D. McCallum and D. Avis, “A linear algorithm for finding the
convex hull of a simple polygon”, Information Processing
Letters, Volume 9, pp. 201-206, December 1979.
[10] The HDF Group. Hierarchical Data Format, version 5, 1997-
NNNN
http://www.hdfgroup.org/HDF5/,
[retrieved:
Feb.,
2019]
[11] S. Van der Walt, S. C. Colbert and G. Varoquaux, “The
Numpy
array:
a
structure
for
efficient
numerical
computation”, Computing in Science & Engineering, Volume:
13
,
Issue:
2
,
March-April
2011,
pp.
22-30,
doi:
10.1109/MCSE.2011.37
[12] K. J. Millman and M. Aivazis, “Python for Scientists and
Engineers”, Computing in Science & Engineering, Volume
13,
Issue
2,
March-April
2011,
pp.
9-12,
doi:10.1109/MCSE.2011.36
[13] F. Pedregosa, “Scikit-learn: Machine Learning in Python”,
Journal of Machine Learning Research, Oct. 2011, pp.
2825−2830 
[14] N. Otsu, “A threshold selection method from gray-level
histograms”, IEEE Trans. Sys., Man., Cyber, Volume 9, Jan.
1979, pp. 62–66, doi: 10.1109/TSMC.1979.4310076
[15] D. L. Shealy and J. Hoffnagle, “Laser beam shaping profiles
and propagation”, Applied Optics, Volume 45, Issue 21, Aug.
2006, pp. 5118-5131, doi: 10.1364/AO.45.005118
[16] J. W. Tukey, “Exploratory Data Analysis”. Reading, MA.
AddisonWesley, 1977.
Figure 7. a) Original image; b) result of the beam detection
algorithm
52
Copyright (c) IARIA, 2019.     ISBN:  978-1-61208-697-2
MMEDIA 2019 : The Eleventh International Conference on Advances in Multimedia

