QoS Control Method for W-LAN Ad Hoc Network
With Automatic Contention Window Adjustment
Masaki Hanada, Moo Wan Kim
Tokyo University of Information Sciences
Chiba, Japan
e-mail : mwkim@rsch.tuis.ac.jp
Hidehiro Kanemitsu
Waseda University
Tokyo, Japan
e-mail : Kanemih@ruri.waseda.jp
Kazuo Hajikano
Daiichi Institute of Technology
Kirishima, Japan
e-mail : k-hajikano@daiichi-koudai.ac.jp
Hee-Dong Kim
Hankuk University of Foreign Studies
Yongin, Korea
e-mail : kimhd@hufs.ac.kr
Abstract—This paper proposes a new QoS control method for
the ad hoc Wireless LAN (W-LAN), which adjusts the
Contention Window (CW) size dynamically based on the
required and achieved bit rate. By the proposed method, a
node with higher bit rates can have better chance to send the
data
in
order
to
satisfy
the
Quality
of
Service
(QoS)
requirement. This paper also shows the effectiveness of the
proposed method based on the results of computer simulations.
Keywords-QoS;
IEEE802.11b/a;
Ad
Hoc
Network;
Contention Window; Required Bit Rate
I.
INTRODUCTION
With
the
increase
in
the
demand
of
multimedia
communications in the area of wireless networks, a number
of studies about the Quality of Service (QoS) control have
been performed [1]-[10]. Especially, Wireless LAN (W-
LAN) has been expected to be an important communication
technology because new high speed specifications have been
realized continuously. IEEE802.11, the standard of W-LAN,
has a Distributed Coordination Function (DCF) access
method. DCF is based on Carrier Sense Multiple Access
with Collision Avoidance (CSMA / CA) and its outline is as
follows:
(1) When the sender node attempts to transmit a frame,
it first senses the channel status.
(2) If the channel is idle during the period of Distributed
Inter Frame Spacing (DIFS), the sender node
transmits the frame.
(3) If the channel is busy, then the sender node waits
until the channel becomes idle. After the channel
becomes idle, it still waits for the period of DIFS.
Then, it determines the back-off time defined within
the Contention Window (CW) which is necessary to
reduce collisions.
(4) When the back-off time reaches zero, then the sender
node starts to transmit the frame and the destination
node replies with an Acknowledgment (ACK) to the
sender node after waiting for the period of Short
Inter Frame Spacing (SIFS).
In this procedure, all nodes have statistically equal
probability to acquire transmission opportunity. So, IEEE
802.11
defines
a
QoS
framework
called
Enhanced
Distributed Channel Access (EDCA) which changes the CW
size based on four traffic access categories, namely, Voice,
Video, Best Effort Data and Background Data. Voice traffic
has the smallest CW after collision or completion of previous
transmission. But EDCA does not include any consideration
about the difference of node’s required bit rate.
There are several studies regarding QoS of IEEE802.11.
The paper by L. Romdhani et al. [8] proposed Adaptive
EDCF (AEDCF) for ad hoc networks, which gradually
adjusts the expansion rate of the CW after collision and
diminishes the rate of CW after successful transmission.
DCF and EDCA are known to work relatively well when the
traffic load is not so heavy, but when the medium is saturated,
they no longer work effectively because EDCA does not
have a mechanism to alleviate collisions. AEDCA works
25% better in high traffic load conditions than EDCA by
simulation. Another paper by J. Maeda et al. [9] proposed to
change the CW based on the required bit rate and frame size.
This assumes the Access Point (AP) collects the required bit
rates and calculates the CW for each node.
We propose a similar strategy to [9] and we introduce a
required bit rate driven CW adjustment. The CW is updated
dynamically by the achieved bit rate [10]. We expect this
feedback mechanism to contribute to a fairness of bandwidth
allocation by taking the actual network conditions into
account.
The rest of this paper is organized as follows. Section II
describes the proposed QoS control method. Section III
shows the effectiveness of the proposed method based on
the evaluation result. Section IV describes the conclusion of
this paper.
II.
PROPOSAL OF QOS CONTROL METHOD
In the CSMA/CA procedure, the back-off time is
determined as follows:
Back-off Time = Random () * Slot Time
13
Copyright (c) IARIA, 2016.     ISBN:  978-1-61208-454-1
ICDT 2016 : The Eleventh International Conference on Digital Telecommunications

Random ( ) is the function to generate a random number
of integer values based on the uniform distribution in the
range [0, CW].
The main purpose of proposed method is to make the
following Achievement Ratio equal, as much as possible,
for nodes requiring different bit rate.
Achievement Ratio = Achievement throughput
Requited throughput
Let us consider the example of two nodes, where the
requirement bit rate of node 1 is twice as large as the
required bit rate for node 2. In case of the standard method,
the Achievement Ratio of node 1 is higher than that of node
2 because the standard does not have any method to
consider the difference of the node’s required bit rate. So,
our proposal is based on the idea that the value of CW is
determined by considering the difference of the required bit
rate and it is also changed
adaptively based on the
transmission result (e.g., successfully transmitted frame
number ).
The CW for node i after time d (i.e., CWi (t+d) ) is
determined by (1).
CWi (t+d) = CWi (t) + (FSi – Fi)*FL / (Fi*ST) (1)
where
FL = Transmission time of one frame
ST = Slot Time
Fi = Target transmission frame number of Node i
during time d which is calculated by (2)
FSi = Successfully transmitted frame number of Node i
during time d
In (1), Fi is defined as follows:
Fi = Σ (Tj * Ri * FSi ) / (Rj * Ti )
(2)
J
where
= Achieved throughput of Node i
= Required throughput of Node i
Equations (1) and (2) present the algorithms used to
adjust CW. Each node in the network notifies the other
nodes of its values for CW/ required bit rate/achieved bit
rate
before
starting
communication.
Then,
all
nodes
determine their CW (t+d) by (1), and start communication
based on CSMA / CA procedure. Therefore, by the back-off
time control of the proposed method, the back-off time of
the node with lower required bit rate will be longer and the
back-off time of the node with higher required bit rate will
be shorter.
III.
COMPUTER SIMULATION
A.
Simulation Method
Computer simulation has been performed to evaluate the
proposed method based on IEEE802.11b and 11a. Table 1
shows
the
network
parameters.
Nominal
Maximum
Throughput is the maximum transmission rate by the IEEE
standard and any other parameters follow standard unless it
is explicitly mentioned. Frame generation for each node is
assumed to follow the Poisson distribution.
Two groups of nodes have been assumed, and each group
has 10 nodes.
All nodes in Group 1 share the same
throughput requirement and Group 2 also share the same
throughput which is twice higher than Group 1. Table 2 for
802.11b and Table 3 for 11a show the simulation cases from
light load to very saturated load. The Required Throughput
per Node is the generated throughput at each node of each
group.
The Total Load is the sum of these generated
throughputs. In these simulations, a total of 20 nodes built
one ad-hoc network. Any node is in radio ranges of all other
nodes, so there are no hidden nodes and RTS/CTS are not
applied. These simulations assume ideal radio environment
without any interferences or background noise. Also, it does
not consider free space loss of radio propagation.
This
simulation is intended to evaluate the proposed MAC layer
mechanism.
TABLE 1
NETWORK PARAMETERS
IEEE 802.11 Standard
11b
11a
Mode
Ad-hoc
Ad-hoc
Nominal Max.
Throughput (Mbps)
11
54
SIFS Period (μsec) 
10
16
DIFS Period (μsec) 
50
34
Slot Time (μsec) 
20
9
CW Max
1023
1023
CW Min
31
15
Frame Size (byte)
1000
1000
Simulation Time (sec)
60
60
TABLE 2
SIMULATION CASES PARAMETER FOR 802.11b
802.11b
Case
1
Case
2
Case
3
Case
4
Required
Throughput
per Node
(Mbps)
Group
1
0.2
0.3
0.36
0.5
Group
2
0.4
0.6
0.72
1
Nominal Max.
Throughput (Mbps)
11
11
11
11
Total Load (Mbps)
6
9
10.8
15
Load Ratio
0.545
0.818
0.982
1.364
14
Copyright (c) IARIA, 2016.     ISBN:  978-1-61208-454-1
ICDT 2016 : The Eleventh International Conference on Digital Telecommunications

TABLE 3
SIMULATION CASES PARAMETER FOR 802.11a
802.11a
Case
1
Case
2
Case
3
Case
4
Required
Throughput
per STA
(Mbps)
Group
1
1
1.5
1.8
2
Group
2
2
3
3.6
4
Nominal Max.
Throughput (Mbps)
54
54
54
54
Total Load (Mbps)
30
45
54
60
Load Ratio
0.556
0.833
1.000
1.111
B.
Simulation Result s
Table 4 and Table 5 show the simulation results.
TABLE 4 SIMULATION RESULT OF 802.11b
802.11b
Case
1
Case
2
Case
3
Case
4
Load Ratio
0.545
0.818
0.982
1.364
Standard CW
Method
Achieved
Throughput
per group
(Mbps)
Group
1
1.97
2.82
2.72
2.71
Group
2
3.70
2.96
2.76
2.75
Total Achieved
Throughput (Mbps)
5.67
5.78
5.47
5.47
Achievement
Ratio
Group
1
0.99
0.94
0.75
0.54
Group
2
0.93
0.49
0.38
0.28
Jain's Fairness Index
0.9982
0.9109
0.9033
0.9034
Total Collisions
5,194
3,908
8,496
8,640
Total Successful
Transmissions
42,536
43,326
41,058
40,999
Proposed CW
Method
Achieved
Throughput
per group
(Mbps)
Group
1
1.99
2.29
2.53
2.07
Group
2
3.90
3.66
3.28
3.95
Total Achieved
Throughput (Mbps)
5.89
5.95
5.80
5.80
Achievement
Ratio
Group
1
0.99
0.76
0.70
0.51
Group
2
0.97
0.61
0.45
0.33
Jain's Fairness Index
0.9995
0.9842
0.9538
0.9974
Total Collisions
1,210
1,200
3,135
3,101
Total Successful
Transmissions
44,162
44,639
43,508
45,175
TABLE 5. SIMULATION RESULT OF 802.11a
802.11a
Case 1
Case 2
Case 3
Case 4
Load Ratio
0.556
0.833
1.000
1.111
Standard CW
Method
Achieved
Throughput
per group
(Mbps)
Group
1
10.02
13.96
14.01
14.04
Group
2
17.47
14.00
13.91
13.87
Total Achieved
Throughput (Mbps)
27.48
27.96
27.92
27.91
Achievement
Ratio
Group
1
1.00
0.93
0.78
0.70
Group
2
0.87
0.47
0.39
0.35
Jain's Fairness Index
0.9952
0.9006
0.8982
0.8969
Total Collisions
33,340
30,904
31,208
31,274
Total Successful
Transmissions
206,136
209,676
209,380
209,322
Proposed CW
Method
Achieved
Throughput
per group
(Mbps)
Group
1
10.00
14.02
14.12
13.85
Group
2
19.99
17.66
17.57
17.82
Total Achieved
Throughput (Mbps)
29.99
31.68
31.69
31.67
Achievement
Ratio
Group
1
1.00
0.93
0.78
0.69
Group
2
1.00
0.59
0.49
0.45
Jain's Fairness Index
0.9999
0.9503
0.9479
0.9542
Total Collisions
6,414
5,567
5,462
5,632
Total Successful
Transmissions
224,958
237,576
237,676
237,528
The maximum achieved throughput of the entire network
is about 6Mbps for 802.11b and 32Mbps for 11a after
saturation or where Load Ratio is 1.0 and higher. These are
considered to be reasonable with taking overhead such as
DIFS, SIFS, ACK and back-off time into account.
The
proposed method shows definitely better throughput than the
standard method. As it can be seen in the tables, the number
of collisions is smaller with the proposed method. Generally,
the sum of successful transmissions and collisions are similar
between the proposed and standard methods.
With the
proposed method, a substantial amount of collisions are
converted to successful transmissions.
Fig. 1 and Fig. 2 show the graphs of Load Ratio versus
Achievement Ratio. In the graph, STD, PRP mean Standard
CW Method, Proposed CW Method, and GP means node
Group, respectively. Achievement Ratio is the ratio of
Achieved Throughput to Required Throughput per Group.
If
fairness
of
throughput
is
completely
achieved,
Achievement Ratio of Group 1 and 2 should become the
same value. But Group 1 shows higher Achievement Ratio
than Group 2 in Fig.1 and 2. This is because Group 1 has a
lower required throughput and the required transmission air
15
Copyright (c) IARIA, 2016.     ISBN:  978-1-61208-454-1
ICDT 2016 : The Eleventh International Conference on Digital Telecommunications

time is shorter. In a saturated network, each node competes
to secure its air time.
The standard method provides a
homogeneous opportunity to access the channel to all nodes.
Therefore this is understandable that Group 1 can have
higher Achievement Ratio as Group 1 needs totally shorter
air time. The proposed method adjusts the CW based on the
achieved and required throughput, but, still, CW has its
limitation (i.e., CWmax as 1023). So the proposed method is
considered to have better fairness than the standard method,
but its fairness still has certain limitation.
In order to evaluate fairness, Jain’s Fairness Index [11] is
selected. Fig. 3 and Fig. 4 show the graphs of Jain’s Index
for 802.11b and 11a, respectively.
As it can be seen in Fig.
3 and 4, Jain’s Fairness Index is always higher with the
proposed method.
IV.
CONCLUSION
In this paper, we have proposed a new QoS control
method for the ad hoc W-LAN network based on the DCF
which handles the communication priority in accordance
with each node’s required and achieved bit rate. The
computer simulation shows that the proposed method has
better total throughput, fairness and collision numbers. The
total throughput and Jain’s Fairness Index are improved by
several percentages. The number of collisions is one order
of
magnitude
smaller
and
the
number
of
successful
transmissions was increased by a similar number.
This time, the proposed method has the maximum limit
of CW, 1023, and this limitation may cap the effect.
An
infinite size for the CW is not practical, but we need to find
an optimized maximum CW for the proposed method. This
will be the subject of future work.
REFERENCES
[1]
N. H. Vaidya, P. Bahl, and S. Gupta, “Distributed Fair
Scheduling
in
a
Wireless
LAN,”
Proc.
Of
ACM
MOBICOM2000, pp. 167-178, Boston, MA USA, Aug. 2000
[2]
S. Park, K. Kim, D. C. Kim, S. Choi, and S. Hong,
“Collaborative
QoS
Architecture
between
Diffserv
and
802.11e Wireless LAN,” Proc. Of IEEE VTC’03-Spring, Jeju,
Korea, April 2003
[3]
S. Choi, J. D. Prado, S. S. Ni, and S. Mangold, “IEEE
802.11e
contention-based
channel
access
(EDCF)
performance evaluation,” Proc. ICC2003, pp. 1151-1156,
Anchorage, Alaska, USA, May 2003
[4]
X.
Yu,
P.
Navaratnam
and
K.
Moessner,
"Resource
Reservation
Schemes
for
IEEE
802.11-Based
Wireless
Networks:
A
Survey,"
IEEE
COMMUNICATIONS
SURVEYS & TUTORIALS, vol. 15, no. 3, pp. 1042 - 1061,
Nov. 2012.
[5]
M. Heusse, F. Rousseau and A. Duda, "Idle Sense: An
Optimal Access Method for High Throughput and Fairness in
Rate Diverse Wireless LANs," Porc. ACM SIGCOMM'05
vol. 35, no. 4, 2005
[6]
Y. He, J. Sun, R. Yuan and W. Gong, “A Reservation Based
Backoff Method for Vide Streaming in 802.11 Home
Networks,” IEEE J. Sel. Commun., vol. 28, no. 3, 2010.
[7]
Q. Zhang and Y. Zhang, “ Cross-Layer Design for QoS
Support in Multihop Wireless Network,” Proceedings of IEEE,
Vol.96, No.1, pp. 64 – 79, Jan. 2008.
[8]
L. Romdhani, Q. Ni and T. Turletti, “Adaptive EDCF :
Enhanced Service Differentiation for IEEE 802.11 Wireless
Ad-Hoc Networks”, IEEE Wireless Communications and
Networking Confernce 2003 (WCNC2003),
pp. 23-27,
March 2003.
[9]
J. Maeda, R. Shinkuma and T. Takahashi, “QoS Control
Method of DCF Wireless LAN for Supporting Required Bit
Rate”, Technical Repoer of IEICE NS 2004-3, pp. 52-56,
April 2004.
[10] A. Matoba, T. Sasagawa, M. Hanada and M. W. Kim, “QoS
Management Method for W-LAN Network Considering
Hidden Node Issue”,
World Congress on Computer and
Information Technology 2013 (WCCIT 2013), pp. 101-105,
June 2013.
[11] R. Jain, A. Durresi and G. Babic, "Throughput Fairness
Index:
An
Explaination,"
The
Ohio
State
University,
Columbus, OH 43210, 1999.
16
Copyright (c) IARIA, 2016.     ISBN:  978-1-61208-454-1
ICDT 2016 : The Eleventh International Conference on Digital Telecommunications

Figure 1.
Achievement Ratio of 802.11b
Figure 2.
Achievement Ratio of 802.11a
17
Copyright (c) IARIA, 2016.     ISBN:  978-1-61208-454-1
ICDT 2016 : The Eleventh International Conference on Digital Telecommunications

0.88
0.90
0.92
0.94
0.96
0.98
1.00
0.4
0.6
0.8
1.0
1.2
1.4
1.6
Jain's Fairness Index
Load Ratio
11b STD
11b PRP
Figure 3.
Jain’s Fairness Index of 802.11b
Figure 4.
Jain’s Fairness Index of 802.11a
18
Copyright (c) IARIA, 2016.     ISBN:  978-1-61208-454-1
ICDT 2016 : The Eleventh International Conference on Digital Telecommunications

