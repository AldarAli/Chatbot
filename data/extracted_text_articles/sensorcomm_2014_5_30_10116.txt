Accuracy Enhancements in Indoor Localization with the Weighted Average Technique
Grigorios G. Anagnostopoulos, Michel Deriaz
Institute of Services Science
University of Geneva
Geneva, Switzerland
Email: {grigorios.anagnostopoulos, michel.deriaz}@unige.ch
Abstract—Indoor localization is a topic that has drawn great
attention over the last decade. One of the main goals of the
research in the ﬁeld is to improve the achieved accuracy. Along
with the accuracy, factors like the easiness of deployment and
reconﬁguration, the cost, the computational complexity, and the
ability to tune the desired accuracy in speciﬁc areas are also
important. In this study, we used Bluetooth Low Energy (BLE)
technology, that offers a low cost and is easily deployed and
reconﬁgured. The weighed average method, combined with the
selection of the closest beacons and the averaging of the received
signal strength indication (RSSI) at the distance domain proposed
in this paper, offers an accuracy down to 0.97 meters, depending
on the deployment conﬁguration. This method was tested in our
lab and was following installed at the hospital in Perugia, Italy,
in the context of the Ambient Assisted Living (AAL) Virgilius
project, where users can navigate with a smartphone.
Keywords—Indoor Localization; Received Signal Strength;
Positioning; Bluetooth
I. INTRODUCTION
During the last years, the ﬁeld of indoor positioning has
drawn an increasing attention of researchers. Outdoor posi-
tioning has been ahead, having reached many users through
commercial applications. Nowadays, almost all new mobile
devices are equipped with global positioning system (GPS)
technology, which has familiarized most users with the concept
of positioning. On the other hand, no indoor positioning
method has been broadly recognized as a standard one, and the
research in this domain has led to having multiple alternatives.
A technology commonly used for positioning in indoor en-
vironments is the Wi-Fi signal [1][2]. One advantage of using
Wi-Fi is that most buildings have several Wi-Fi access points,
in order to provide internet access, so the hardware required
is already installed. On the other hand, usually the access
point network is not dense enough to facilitate a satisfactory
precision of localization. Moreover, the transmission of the
Wi-Fi access points is unstable, as well as the reception in
big distances due to multipath effects, and therefore using the
RSSI of them can be problematic.
In this study, we work with BLE technology. BLE is a wire-
less technology used for transmitting data over short distances.
It has a low energy consumption and cost, while maintaining a
communication range similar to that of its predecessor, Classic
Bluetooth. As transmitters, we used iBeacons, an Apple tech-
nology standard, and more precisely the Tod iBeacons [3].
The iBeacon technology allows mobile applications (running
on both iOS and Android devices) to listen periodically for
signals from beacons and react accordingly. Each beacon
broadcasts a self-contained packet of data periodically. The
packets contain the mac address of each beacon, so that the
receiver can distinguish among them. The RSSI can be used
to estimate the distance between the mobile device and the
transmitting beacon [1][4][5][6]. Due to their low cost and
low consumption, a dense network can be deployed. Having
a dense deployment can lead to a reliable distance estimation,
at least from the closest beacons.
This distance estimation is used to derive the actual position,
usually by using lateration methods [7][8]. These methods can
have some drawbacks, as for example, when the estimated
distances are wrong, or when the beacons used are aligned,
an estimated position that is far from the real one may be
returned. Furthermore, using different mobile devices with
different receiving capabilities can add a systematic error
to each distance estimation that will dramatically affect the
lateration outcome.
In our method, we proceeded with another approach. We
propose a placement of beacons such that the beacons surround
all the area that we want to cover. The position prediction
is limited to the area that is deﬁned by the polygon that
the beacons’ positions deﬁne. We get a distance estimation
from each beacon, by averaging the estimated distances that
correspond to the latest RSSI measurements from this beacon.
In this way, we cope with the instability of the RSSI.
Having this ﬁltered distance estimation, we focus only on
the B closest beacons. In this work, we propose B = 4, as
will be discussed later. We use the inverse value of the distance
estimation as weight, in order to perform a weighted average of
the positions of the 4 closest beacons. This weighted method,
is also met in [9]. That work, to our knowledge, does not
have RSSI ﬁltering, nor does it focus on the closest beacons.
The weighted method in [9] is used with radio frequency
identiﬁcation (RFID) technology, as an area/room selection
ﬁrst step, before performing a server side supervised machine
learning positioning method.
The lateration approach uses the assumption that distance
estimations are close to accurate, which is unlikely. Our
proposed method anticipates the uncertainty of this estimation
as an absolute value. It ﬁrstly utilizes that the expected error is
112
Copyright (c) IARIA, 2014.     ISBN:  978-1-61208-374-2
SENSORCOMM 2014 : The Eighth International Conference on Sensor Technologies and Applications

smaller in small distances, and secondly, the main conceptual
idea of RSSI methods, that a stronger RSSI reception from
beacon a as compared to beacon b is interpreted as being closer
to beacon a, especially after averaging distance estimations.
The advantages of the proposed technique are numerous.
The Bluetooth beacons are easily deployed and rearranged in
order to cover new areas of a building or to improve accuracy
with a more dense placement. For example, the deployment
could be more dense in a corridor with many doors, where
accuracy is critical, compared to a long corridor with few
doors, that may simply link two buildings. Another advantage
is that this method does not require the creation of a radio
map [10], where measurements of RSSI from all access points
should be stored for many points of the area where it will
be used. One can reconﬁgure the deployment, by adding for
example one beacon, with no need to retake any measurements
for a radio map, but simply by storing the position of the
new beacon. Our method also offers low computational and
implementation complexity. Finally, as all RSSI techniques, it
has the advantage that most modern mobile phones can offer
the RSSI of a Bluetooth reception, and thus no extra hardware
or modiﬁcation of the devices is required.
The rest of this paper is organized as follows. In Section
2, we present the propagation model and how it is used to
derive distance estimations form the RSSI values. In Section
3, we present the idea of performing a weighted average of the
known beacon positions. Measurements and both theoretical
and experimental results are reported and discussed in Section
4. Finally, future work directions along with conclusions drawn
are presented in Section 5.
II. PROPAGATION MODEL AND RSSI METHODS
In RSSI methods used in localization, the received signal
strength is used as a measure from which the distance between
the transmitter and the receiver can be inferred. Nevertheless,
the RSSI received at a given time and space depends on many
other factors other than the relative distance of the two devices.
Even the slightest changes in position and orientation can
provoke dramatic variations to the RSSI values [11]. Moreover,
the movement of people and objects in the environment often
has great effect on the signal. In general, RSSI is vulnerable to
strong multipath effects, especially indoors [11]. Furthermore,
factors like temperature and humid conditions can affect the
propagation of the signal [11]. Using a set of RSSI mea-
surements instead of a single instantaneous measurement can
improve the accuracy of the distance estimation [5].
The RSSI, apart from the propagation channel, depends on
the transmitter and the receiver. For a given installed system
the transmitters are the same, but it would be desirable that
each user could use the system by using her personal mobile
device (smart phone, tablet, etc.). Taking under consideration
all these factors, we propose the propagation model and its
parameters that will be used in our system.
The propagation model commonly used for the RSSI to dis-
tance correspondence, where the expected RSSI ri in distance
di is calculated, is the following:
ri = r0 − 10 n log10(di/d0)
(1)
In this formula, r0 is the received RSSI at a reference
distance d0, and n is the path loss exponent which depends
on the transmission channel, the transmitter and the receiver.
Using 1 meter as reference distance, and solving for di, the
formula is simpliﬁed to:
di = 10
r0−ri
10 n
(2)
A Tod Bluetooth iBeacon was placed at the center of the
corridor of Figure 3, and RSSI measurements were performed
at several points at a known distance from the iBeacon.
We performed these measurements using a Samsung Galaxy
S4, and then ran a regression to ﬁnd the parameters of the
best ﬁtting curve described by (2). In Figure 1, we see the
measured RSSI values (black dots) in several distances (at
0.25,0.5,1,2,3,4,5 and 6 meters), and with blue color the
resulted propagation model as the best ﬁtting curve. The
estimated values of these parameters are r0 = −62.72 and
n = 2.2853. Substituting in (2), we get:
di = 10
−62.72−ri
2.2853
(3)
0
2
4
6
8
10
12
−90
−80
−70
−60
−50
−40
−30
Distance (m)
RSSI
Fig. 1. RSSI measurments at several disances (in black) and the resulting
propagetion model (in blue) as the best ﬁtting curve described by (2).
In order to have a more reliable distance estimation we
do not use just the latest RSSI reception but a set of the
latest ones. Due to the non linear relation of distance with
RSSI, it is important to decide if we will average the RSSI
values and then get the distance estimation as their average,
or if we should calculate the corresponding distance of each
RSSI reception and then use the average of these distances.
In Figure 1, we see that for distances from 0 to 5 meters,
113
Copyright (c) IARIA, 2014.     ISBN:  978-1-61208-374-2
SENSORCOMM 2014 : The Eighth International Conference on Sensor Technologies and Applications

the RSSI differs signiﬁcantly. On the other hand, for distances
greater than 15 meters, RSSI differences are minor. Since we
target to utilise the reliability and distinguishability of the
small distance measurements, we direct our method to this
part of the propagation model. Given that the derivative of
the RSSI curve changes with the distance, averaging the RSSI
values inserts an intrinsic error to the estimation.
To state this argument we explain a simple example. Assume
that users are moving and the RSSI measurements they receive
from each beacon correspond exactly to the real distance from
it at each moment. Averaging in the distance domain, provides
the users’ average distance. On the other hand, due to the non
linear relation of distance and RSSI, averaging RSSI values
ﬁrst, will give a distance estimation different than the average
distance.
Furthermore, in case where the measurements of the RSSI
values are biased, in short distances, small RSSI errors have
small consequences to the distance estimations. On the other
hand, for big distances, a small ﬂuctuation of the RSSI values
can have a dramatic consequence to the estimated distance.
In the proposed method, only the RSSI values of the closest
beacons are used, so averaging in the RSSI domain would
introduce a bias. For these reason, averaging in the distance
domain was selected.
III. WEIGHTED AVERAGE OF BEACON POSITION
Initially, it is worth noting that the method proposed can
give estimations of positions only inside the polygon area that
is deﬁned by the positions where the beacons are placed. For
an indoor localization system and its applications, it may be
desirable to constrain the prediction inside a speciﬁc area, i.e.,
inside the building. In case where map matching is used to
provide navigation, a jump of the estimation outside a building
could lead to problematic navigation. Thus, in practice, to
provide coverage in a rectangular room or a corridor with the
proposed method, B = 4 is the minimum number of beacons
to cover this area. Later in this work, we discuss proposed
conﬁgurations.
Having obtained an estimation about the distance of the
mobile device from each beacon, we proceed to the position
estimation. Due to the phenomenon of multipath effects, it
is unrealistic to claim that at every moment the distance
estimation will be precise. Especially in big distances, just a
small difference in the RSSI values is translated to big distance
differences. On the other hand in small distances the RSSI
values are quite distinguishable. We utilize this fact, in the
following way. From the list of beacons that are detected, we
keep the 4 closest beacons. Assuming that the mobile device
is inside the coverage area (beacon deﬁned polygon), the
estimated position will also be inside the quadrilateral deﬁned
by these four beacons. Let [e1, e2, e3, e4] be the estimated dis-
tances from the 4 closest beacons, while [lat1, lat2, lat3, lat4]
and [lon1, lon2, lon3, lon4], the corresponding latitude and
longitude of their positions. We calculate the latitude Latest
and longitude Logest of the estimated position as follows:
Latest =
4P
i=1
lati
ei
4P
i=1
1
ei
, Lonest =
4P
i=1
loni
ei
4P
i=1
1
ei
(4)
In (4), we calculate the weighted average of the four
closest beacons’ positions, using as weight 1/ei, that is the
inverse of the estimated distance from beacon i. By using
this weighted average the prediction is limited inside the
quadrilateral of the closest beacons, and with the speciﬁc
weight that is proposed, the prediction is pulled towards the
closest beacon, although allowing the rest of the beacons to
contribute inversely proportionately to their distance.
The minimum number of closest beacons that could be used
is 3, since 3 points deﬁne a plane. In the case where the
3 closest beacons were used, the deﬁned area would be a
triangle. In the middle area of this triangle, the estimation
is slightly better comparing to the case where 4 beacons are
used. The drawback with the usage of only 3 closest beacons
is that when the user is moving and passes from one triangle
to the other, the accuracy of estimation near the common edge
of the two triangles is signiﬁcantly degraded. Using the 4
closest beacons offers a smooth transition from one triangle
to another. In the following section, along with the system’s
accuracy measurements, an error analysis of these two cases
is presented.
IV. MEASUREMENTS, RESULTS AND DISCUSSION
The weighted average method proposed may have an error
in the location estimation even when the distance estimations
are precise. We model this error in Figure 2, for the cases
where 4 and 3 closest beacons are used. We simulate the
deployment at the corridor where our system was tested. The
beacons are placed at a hight of 2.40 meters, following a
zigzag pattern (alternatively at the left and right wall of the
corridor), every four meters along the direction of the corridor.
The orientation of the beacons is towards their opposite wall.
We observe that, for the ﬁrst scenario (4 closest beacons),
the error is lower at the center of the corridor, and changes
smoothly as we move along the length of the corridor. On
the other hand, using just 3 beacons degrades signiﬁcantly
the accuracy estimation at a broader area. The error increases
rapidly when approaching at the edges of the triangles that the
3 closest beacons deﬁne.
Our method was tested in the corridors of the Centre Uni-
versitaire d’Informatique (CUI), of the University of Geneva.
Measurements were taken with two ways. First, by letting the
mobile device at a speciﬁc place and receiving the estimated
positions it calculated. A second approach was to test the
localization while having the mobile device moving, which
better corresponds to real life scenarios.
In order to get a broad estimation of the positioning accu-
racy, we took 1000 measurements at three points in the cor-
ridor. Two mobile devices were used for these measurements,
114
Copyright (c) IARIA, 2014.     ISBN:  978-1-61208-374-2
SENSORCOMM 2014 : The Eighth International Conference on Sensor Technologies and Applications

20
40
60
80
100
120
140
160
5
10
15
20
 
X(dm)
 
Y(dm)
20
40
60
80
100
120
140
160
5
10
15
20
 
X(dm)
 
Y(dm)
2
4
6
8
10
12
14
2
4
6
8
10
12
14
Fig. 2. Error in decimeters (color scale) of position estimation in a corridor
at the position x,y, when using 4 (upper plot) and 3 (lower plot) closest
beacons method.
a Samsung Galaxy S4, which was used for the creation of
the propagation model (3), and a Samsung Galaxy Note 3.
The goal was to test the adaptability of the system to different
devices, with different reception characteristics.
The results are represented in the following table. In Fig-
ure 3, the beacon positions are highlighted with black color,
and the places that the measurements were taken with red. We
placed point A to be at the center of the corridor, that better
represents the usual usage area. In order to test the accuracy
of the system at its limits, we place point B exactly at the
wall on the side of the corridor, and point C at the end of the
corridor. Both points B and C lay exactly at the limit of the
beacon’s polygon.
TABLE I. ACCURACY
Mean error (m)
σ of error (m)
Point A
S4
1.22
0.82
Note 3
0.97
0.48
Point B
S4
3.08
0.76
Note 3
3.18
1.09
Point C
S4
3.82
2.20
Note 3
3.50
1.78
Fig. 3. Test environment. Beacon positions are highlighted with black color,
and the places that the measurements were made with red color.
The position estimation is very reliable throughout the
corridor, with an average accuracy of 1.22 and 0.97 meters
for the two devices. The accuracy drops at the limits of the
polygon, but remains reliable, with an average error of 3.08
(and 3.18) meters next to the wall. It is worth mentioning
that the accuracy with the Note 3 is really similar to the one
with the S4, that is the device used for the propagation model
calculation.
Apart from the static measurements, we performed also
a dynamic test in the same environment. The corridor is
2.5 meters wide and the trajectory of the mobile phone’s
movement was 25 meters, at a straight line, and in a constant
pace of 1 m/s. In Figure 4, the real trajectory is represented
by the grey straight line segments, and the corresponding
trajectory of the position estimations by the red crooked line
segments. The mean value and standard deviation of the
distances between the estimated and the true positions are
measured to be µ = 2 and s = 1.28 respectively.
The error in the dynamic version is higher than the static
one, as expected. Nevertheless, a precision of 2 meters for a
moving device that drops to 0.97 when the device is static,
can be satisfactory for most indoor position applications. The
distance measure used for calculating the error was the two
dimensional euclidean distance. Of course, in cases where map
matching is used, all position estimations would be projected
on the axis of the corridor, reducing the error only at its length-
wise component, removing the width-wise component.
Fig. 4. Real trajectory (grey straight ling segments) and path from postition
estimations (red crooked line segments).
V. CONCLUSION AND FUTURE WORK
An innovative indoor positioning system is presented in
this paper. The wireless technology used is BLE, which has
low cost, and offers ease of deployment. It does not require
the creation of a radio map, neither a calibration stage, but
simply the awareness of the positions where the beacons were
deployed. The scenarios that the technology was tested with
were directed towards localization in the corridor area of
buildings. Localization in corridors can assist a navigation
system to guide a user to a room in a building. The achieved
accuracy of localization is 0.97 meters (depending on the
device).
115
Copyright (c) IARIA, 2014.     ISBN:  978-1-61208-374-2
SENSORCOMM 2014 : The Eighth International Conference on Sensor Technologies and Applications

Our goal is to further improve this method by testing other
beacon conﬁgurations [12] (apart from the zigzag pattern) that
might optimize the accuracy of estimation by also keeping
a low density of beacon deployment. In the context of the
the AAL Virgilius Project, beacons were deployed following
the zigzag pattern in the corridors of the hospital of Perugia,
Italy. The goal was to navigate a user from the entrance of the
hospital to the door of the room that the user would choose.
Regarding a corridor deployment, the zig-zag pattern is very
efﬁcient, but it remains to design a general pattern that works
for all room shapes and sizes.
Moreover, the weight used (inverse distance) has been
selected after comparison with other possible weights, but
remains to be further studied. Lastly, after obtaining a series of
position estimations, we intend to apply an extra ﬁltering step,
in order to smooth the transition among position estimations.
ACKNOWLEDGEMENTS
This work is supported by the AAL Virgilius project (aal-
2011-4-046).
REFERENCES
[1] S. Mazuelas et al., “Robust indoor positioning provided by real-time rssi
values in unmodiﬁed wlan networks.” J. Sel. Topics Signal Processing,
vol. 3, pp. 821–831, 2009.
[2] M. Lee and D. Han, “Voronoi tessellation based interpolation method for
wi-ﬁ radio map construction.” IEEE Communications Letters, vol. 16,
no. 3, pp. 404–407, 2012.
[3] “Tod iBeacons,” 2014, URL: https://www.todhq.com/ [accessed: 2014-
09-09].
[4] F. Vanheel, J. Verhaevert, E. Laermans, I. Moerman, and P. Demeester,
“Automated linear regression tools improve rssi wsn localization in
multipath indoor environment.” EURASIP J. Wireless Comm. and Net-
working, vol. 2011, p. 38.
[5] C. Papamanthou, F. P. Preparata, and R. Tamassia, “Algorithms for
location estimation based on rssi sampling,” in ALGOSENSORS, 2008,
pp. 72–86.
[6] M. Saxena, P. Gupta, and B. N. Jain, “Experimental analysis of rssi-
based location estimation in wireless sensor networks,” in In Proc. Int.
Conf. Communication System Software and Middleware, 2008, pp. 503–
510.
[7] Z. Yang, Y. Liu, and X.-Y. Li, “Beyond trilateration: On the localizability
of wireless ad hoc networks,” IEEE/ACM Trans. Netw., vol. 18, no. 6,
December 2010, pp. 1806–1814.
[8] K. Lu, X. Xiang, D. Zhang, R. Mao, and Y. Feng, “Localization
algorithm based on maximum a posteriori in wireless sensor networks,”
IJDSN, vol. 2012, pp. 1–7.
[9] H. Zou, L. Xie, Q.-S. Jia, and H. Wang, “An integrative weighted
path loss and extreme learning machine approach to rﬁd based indoor
positioning,” in Indoor Positioning and Indoor Navigation (IPIN), 2013
International Conference on, Oct 2013, pp. 1–5.
[10] S. Sorour, Y. Lostanlen, S. Valaee, and K. Majeed, “Joint indoor
localization and radio map construction with limited deployment load,”
IEEE Transactions on Mobile Computing, vol. 99, 2014, no. PrePrints,
p. 1.
[11] G. Zanca, F. Zorzi, A. Zanella, and M. Zorzi, “Experimental comparison
of rssi-based localization algorithms for indoor wireless sensor net-
works,” in Proceedings of the Workshop on Real-world Wireless Sensor
Networks, ser. REALWSN ’08.
New York, NY, USA: ACM, 2008, pp.
1–5.
[12] N. Bulusu, D. Estrin, and J. S. Heidemann, “Adaptive beacon place-
ment.” in ICDCS.
IEEE Computer Society, 2001, pp. 489–498.
116
Copyright (c) IARIA, 2014.     ISBN:  978-1-61208-374-2
SENSORCOMM 2014 : The Eighth International Conference on Sensor Technologies and Applications

