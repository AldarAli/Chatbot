Condition Monitoring of Casting Process using Multivariate Statistical Method 
 
Hocine Bendjama, Kaddour Gherfi, Daoud Idiou 
Welding and NDT Research Centre 
(CSC) 
Algiers, Algeria 
e-mails: hocine_bendjama@daad-alumni.de, 
gkaddour2@yahoo.fr, ddidiou@yahoo.com 
Jürgen Bast 
Institut für Maschinenbau 
Technische Universität Bergakademie 
Freiberg, Germany 
e-mail: bast@imb.tu-freiberg.de
 
 
Abstract—Growing demand for higher performance, safety 
and reliability of industrial systems has increased the need for 
condition monitoring and fault diagnosis. A wide variety of 
techniques were used for process monitoring. This study will 
mainly investigate a technique based on principal component 
analysis in order to improve the accuracy for fault diagnosis of 
casting process. The process faults are identified using the 
following statistical parameters: Q-statistic, also called squared 
prediction error, and Q-residual contribution. The proposed 
method is evaluated using real sensor measurements from a 
pilot scale. The monitoring results indicate that the principal 
component analysis method can diagnose the abnormal change 
in the measured data. 
Keywords-fault diagnosis; process monitoring; principal 
component analysis; Q-statistic; Q-residual contribution 
I. 
 INTRODUCTION 
The fault detection and diagnosis is an extremely 
important task in process monitoring. It provides operators 
with the process operating information, which helps monitor 
the process and quickly detect and diagnose the fault.  
Investment 
casting process has known a great 
development due to its wide use in automotive industry. It 
can be used to create complex castings at a high production 
rate and low cost. Even in a controlled process, defects in 
the output can occur. 
One critical process step is filling the mold with molten 
metal. Significant research has been performed to link 
factors like pouring temperature, metal velocity, sand and 
refractory coating, to the filling process and defect 
formation [1][2][3]. 
Casting defects are often very difficult to characterize. 
They will fall into one or more of the established seven 
categories of casting defects: metallic projections, cavities, 
discontinuities, defective surface, incomplete casting and 
incorrect dimensions or shape [4][5]. 
In a controlled process, defects do not just happen, 
they are caused. If a defect occurs, measures must be 
adopted to eliminate its cause and prevent its repetition. 
It is the purpose of this paper to diagnose process faults 
that can cause casting defects. Casting process fault 
diagnosis is an important research domain, and gotten large 
attention by a number of researchers. Several methods have 
been proposed to identify possible causes for reducing or 
eliminating casting defects, e.g., Abdelrahman et al. [6] 
presented a methodology for monitoring the metal filling 
process. In order to achieve this, a data collector and sensors 
were designed. An electrostatic simulation package was 
used to interpret signature obtained from the sensors during 
the metal filling. An artificial neural network was trained to 
indicate the metal filling profile based on the results of the 
electrostatic simulations. The results were verified by 
comparing the metal filling profile inferred from the neural 
network to the actual metal filling profile captured by an 
infrared camera. Similarly, a novel approach based on a 
fuzzy inference system was applied by Deabes et al. [7] for 
obtaining the profile of the liquid metal to monitor the 
filling process. Dobrzański et al. [8] developed a computer 
code based on the X-ray imaging and the artificial 
intelligence tools. The proposed method was used to ensure 
the automatic identification and classification of possible 
defects in cast aluminum alloys in order to reduce and even 
eliminate them. To quickly detect process faults, a 
monitoring method of the metal filling profile was proposed 
by Okaro et al. [9]. This method makes use of an array of 
capacitive sensors to detect the position and amount of the 
molten metal as it displaces into the mold. An iterative 
algorithm for the estimation of metal filling time was also 
used to provide a good prediction of the filling time. A 
recent study [10] has been carried out by Jafari et al. on the 
effects of some important casting process parameters on the 
quality and the properties of castings using full-factorial 
design of experiment. These methods usually adopt 
measurements as the essential basis and provide aid in early 
detection and diagnosis of process faults by extracting 
useful information from measured data.  
The accuracy of diagnosing process faults from 
measured data can be improved using Principal Component 
Analysis (PCA) method [11]. The PCA is a data 
compression method; it produces a lower dimensional 
representation in a way that preserves the correlation 
structure among the original data. The PCA method has 
received a great deal of attention in recent years for their 
ability to successfully determine when a fault has occurred, 
a large number of applications have been reviewed 
[12][13][14][15]. 
This paper presents the PCA method for fault detection 
and diagnosis with application to low pressure lost foam 
casting process. The PCA is used to establish the statistical 
correlation among the measured data to detect and diagnose 
103
Copyright (c) IARIA, 2014.     ISBN:  978-1-61208-354-4
ADVCOMP 2014 : The Eighth International Conference on Advanced Engineering Computing and Applications in Sciences

the abnormal situations and to provide information about the 
process state by using the statistical parameters; Q-statistic, 
also called SPE (Squared Prediction Error), and Q-residual 
contribution. The main goal of this method is to obtain more 
detailed information contained in the measured data.  
The paper is organized as follows. Section II presents a 
brief overview of the low pressure lost foam casting process 
and the proposed method for its monitoring. The PCA 
method and process fault diagnosis using PCA, along with 
its formulations, are described in Section III. The monitoring 
results are discussed in Section IV. Finally, Section V 
concludes our contributions. 
II. 
MATERIALS AND METHOD 
In this section, the experimental setup and the proposed 
method used to monitor the casting process are presented. 
A. Casting Process 
The low pressure lost foam casting process was 
developed by Lang [16]; it is used to create complex 
castings. The casting process uses air pressure to push liquid 
metal up into a flask containing the foam pattern and 
unbounded sand. Fig. 1 illustrates the schematic of the low 
pressure lost foam casting process.  
The casting machine employs a resistance furnace 
capable of melting standard aluminium base alloys. The 
components contacting the liquid metal, like the tube and 
the adapter, are made of cast iron with a refractory coating. 
A thin sheet of aluminium foil is used to protect the foam 
from thermal radiation of the liquid metal before the 
beginning of the mold filling process. Air pressure is 
applied to the chamber containing the crucible to raise the 
liquid metal into the mold.  
B. Data Acquisition 
The foam pattern was supported in the flask. The 
thermocouples were wired to the data acquisition unit. 
When the vessel is pressurized, the liquid metal rises 
through a steel pipe into the flask. All test parts were cast 
using AlSi12 alloy at temperatures between 730°C and 
750°C, as presented in Table I. 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
Figure 1.  Schematic of low pressure lost foam casting process. 
TABLE I.  
MEASUREMENT CONDITIONS 
Test 
n° 
Pouring 
Temperat-
ure (°C) 
measured 
Temperatu
-re (°C) 
Holding 
Pressure 
(bar) 
Mold 
Filling 
time (s) 
Holding 
time (s) 
1 
735 
711 
0.24 
6 
90 
2 
750 
705 
0.24 
6 
90 
3 
750 
700 
0.24 
6 
90 
4 
730 
711 
0.24 
6 
90 
 
Five temperature transducers were used to acquire data 
by five thermocouples for temperature input. These sensors 
were implemented in the process. Both the pressure and 
temperature inputs were wired to a National Instruments 
data acquisition board. Other signals are also included as 
well as the ability to drive outputs as needed. National 
Instruments DASY Lab software was used to collect and 
analyze the signals from the temperature sensors. The 
measured variables are listed in Table II and presented in 
Fig. 2. 
TABLE II.  
PROCESS VARIABLES 
Variables 
Description 
unit 
T 
P 
S 
T1 
T2 
T3 
T4 
T5 
Temperature 
Pressure 
Rise (height of filling) 
Temperature 1 
Temperature 2 
Temperature 3 
Temperature 4 
Temperature 5 
°C 
Bar 
M 
°C 
°C 
°C 
°C 
°C 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
Figure 2.  Measures of the process variables. 
0
50
100
0
200
400
600
800
Time
Temperature 2
0
50
100
0
200
400
600
800
Time
Temperature 3
0
50
100
0
200
400
600
800
Time
Temperature 4
0
50
100
0
200
400
600
800
Time
Temperature 5
0
50
100
740
745
750
755
Time
Temperature 
0
50
100
0
0.1
0.2
0.3
Time
Pressure
0
50
100
0
0.5
1
1.5
Time
Rise
0
50
100
0
200
400
600
800
Time
Temperature 1
Sand  
Metal 
Flask 
 
Compressed 
air 
104
Copyright (c) IARIA, 2014.     ISBN:  978-1-61208-354-4
ADVCOMP 2014 : The Eighth International Conference on Advanced Engineering Computing and Applications in Sciences

C. Method 
Casting defects will generally fall into one or more 
of the established seven categories of defects. Generally, a 
casting defect is defined as all observable and unplanned 
variation. When defects exist, the possible causes can be 
examined and the corrective action can be taken. 
In the casting industry, there is little and inconsistent 
data about the conditions that cause casting defects. There is 
a temptation to attempt to diagnose a process fault by the 
possible causes. The proper identification of a fault is 
required to correct and control the quality of castings. 
The requirements of productivity and quality impose the 
application of advanced monitoring methods. In this work, 
the PCA method is used for casting process monitoring with 
surface defect. The PCA model is trained with input matrix 
X that contains the eight variables presented in Table II; the 
matrix X ∈ Rm×8 represents m observations or samples of 
these variables. 
In the next section, the PCA algorithm that is in charge 
of the identification of abnormal situations in the behavior 
of the process is presented. 
III. 
PRINCIPAL COMPONENT ANALYSIS 
The PCA [11][17] is a multivariate analysis technique 
and also a dimension reduction technique. It reduces the 
dimensionality of the original data by projecting the data set 
onto a subspace of lower dimensionality including a series 
of new variables to protect the main original data 
information. 
For a given data matrix
m n
X
∈ℜ ×
, which contains m 
observations and n variables, the PCA actually relies on 
eigenvalue/eigenvector decomposition of the covariance or 
correlation matrix C given by:  
T
T
1X X VDV
n
1
C
=
−
=
                             (1) 
where D=diag(λ1….λn) is a diagonal matrix with diagonal 
elements in decreasing magnitude order and V contains the 
eigenvectors. 
The PCA determines an optimal linear transformation of 
the data matrix X in terms of capturing the variation in the 
data as follows:  
        
T = XP
                                            (2) 
       
Xˆ = TPT
                                            (3) 
where T is the principal component matrix and the matrix P 
contains the principal vectors which are the eigenvectors 
associated to the eigenvalues 
i
λ  of the covariance matrix. 
The difference between X and Xˆ  is the residual matrix 
E (4). This residual captures the variations in the 
observation space, and it is the basis for fault detection and 
diagnosis. 
)
PP
X( I
Xˆ
X
E
T
−
=
−
=
                          (4) 
where I is the unit matrix.  
The identification of the PCA model thus consists in 
estimating its parameters by an eigenvalue/eigenvector 
decomposition of the matrix C, and determining the number 
of Principal Components (PCs) k to retain. A key issue to 
develop a PCA model is to choose the adequate number of 
PCs. Many procedures have been proposed for selecting the 
number of the PCs to be retained [18]. In this paper, the 
experiential method [19] is used, which judges that the 
cumulative sum contribution of the anterior k PCs is higher 
than 0.85, as follows:  
85%
100
n
i 1
i
k
i 1
i
>
×
∑
∑
=
=
λ
λ
                              (5) 
where k is the index of the PCs, n is the number of process 
variables and λi is the eigenvalue. 
A. Fault Detection and Diagnosis 
The PCA is used to establish the normal statistical 
correlation among the coefficients of the multivariate 
process data. To perform process fault detection, a PCA 
model of the normal operating conditions must be built. 
When a new observation data is subject to faults, these new 
data can be compared to the PCA model. The correlation of 
the new data is detected by Q-statistic:  
(
) (
xˆ )
x
xˆ
x
e e
SPE
statistic
Q
T
T
−
−
=
=
=
−
          (6) 
The process is considered normal if 
2
Q
statistic
Q
≤ δ
−
                                (7) 
where 
2
Q
δ  denote the confidence limit or threshold. It can be 
calculated from its approximate distribution [20]: 
0h
1
2
1
0
0
2
1
2
2 0
1
2
Q
1)
h (h
1
h
2
C








θ
−
+ + θ
θ
= θ
δ
α
θ
        (8) 
where
,2 3
,1
i
n
k 1
j
i
j
i
=
= ∑
+
=
λ
θ
 and 
2
2
3
1
0
3
2
1
h
θ
− θ θ
=
 
where 
α
C is the critical value of the normal distribution.  
The 
2
Q
δ  is used to determine whether the data is within 
range of the model. To compare the test set to the model 
using the Q-statistic, a plot of test data must be created with 
a confidence limit. A confidence limit of α=95% is used 
105
Copyright (c) IARIA, 2014.     ISBN:  978-1-61208-354-4
ADVCOMP 2014 : The Eighth International Conference on Advanced Engineering Computing and Applications in Sciences

throughout this work. Any point below the confidence line 
is considered normal variance from the selected number of 
PCs, and any point above this line is considered to have an 
abnormally high level of variance.  
In order to diagnose the process fault, a contribution plot 
is necessary. The contribution plots are bar graphs of the Q-
residual contribution of each variable calculated as in (9) 
[21]. Variables having the largest residuals produce the 
worst compliance to the PCA model, and indicate the source 
of the fault. 
statistic
Q
e
cont
contribution
Q
2
i
i
−
=
=
−
             (9) 
where ei presents the ith element of the residual vector e and 
conti is the contribution of the ith variable to the total sum of 
variations in the residual space.  
IV. 
MONITORING RESULTS 
The PCA algorithm implies two parts: the first one is the 
development and training of the PCA model, the second is 
the test of the process fault based on the trained model. The 
process data used in training represent the measurements in 
normal operation conditions. 
The sets of representative normal and fault process data 
are gained through the experimental measurements, 
including two normal data sets: test1 and test2, and two 
fault data sets: test3 and test4. Each data set includes eight 
measurement variables. The sampling interval is 0.1s and 
data length is 900 observations or samples for each data set. 
The eight process variables are used as input to the PCA 
algorithm. In total, 900 data points at different times were 
collected for training the PCA model. The variables are of 
different units, so the data are scaled to zero mean and unit 
variance. 
The eigenvalues of the covariance matrix, which are the 
variances of PCs, are listed in Table III. Through the PCA, 
the anterior 2 principal components’ accumulation sum 
contribution rate is 92.96%. As shown in Table III, the best 
monitoring performance is achieved when two PCs are used. 
The PCA model is established by using them, and then the 
fault detection with the process is progressed. 
 
TABLE III.  
PCS VALUES 
Variables 
Eigenvalues  
Variance (%) 
1 
2 
3 
4 
5 
6 
7 
8 
6.4323 
1.0049 
0.2905 
0.1222 
0.0729 
0.0415 
0.0262 
0.0095 
80,40 
12,56 
03,63 
01,53 
0,91 
0,52 
0,33 
0,12 
 
 
 
The results in the training phase are shown in Fig. 3. The 
detection threshold is calculated according to (8), which is 
1.5192; this is also shown in this figure with a dashed red 
line. To evaluate fault detection method, the detection ratio 
is used. It is defined as the number of samples whose Q-
statistic values go beyond the threshold to the total number 
of samples. When the detection ratio is less than 20%, the 
faults are not detected successfully [21]. As shown in Fig. 3, 
only 13.66% of the total samples were above the threshold 
value. It implies that the model has captured the major 
correlation and variance among the process variables. 
During the testing phase, the new data sets can be 
compared to the PCA model and its threshold. These new 
data has been scaled to zero mean and unit variance of the 
model. The fault detection results of the test data sets 
including test3 and test4 are presented in Figs. 4 and 5. As 
illustrated in these figures, all samples of Q-statistic violated 
the threshold. The model has not captured the majority of 
the variance; therefore, the PCA model does not describe 
the data adequately, the data are considered faulty. 
After the fault is detected, the diagnosis is determined by 
the contribution plot. The bar graph of each variable is 
presented in Figs. 6 and 7. The process fault is produced 
through the 8th variable (temperature 5) for the test3 and 4th 
variable (temperature 1) for the test4. 
 
0
100
200
300
400
500
600
700
800
900
0
5
10
15
Sample number
Q-statistic
 
Figure 3.  Q-statistic of training data (test2). 
0
100
200
300
400
500
600
700
800
900
0
20
40
60
80
Sample number
Q-statistic
 
Figure 4.  Q-statistic of test3. 
0
100
200
300
400
500
600
700
800
900
0
10
20
30
Sample number
Q-statistic
 
Figure 5.  Q-statistic of test4. 
106
Copyright (c) IARIA, 2014.     ISBN:  978-1-61208-354-4
ADVCOMP 2014 : The Eighth International Conference on Advanced Engineering Computing and Applications in Sciences

1
2
3
4
5
6
7
8
0
0.1
0.2
0.3
0.4
Variable number
Q-contribution
 
Figure 6.  Q-contribution of test3. 
1
2
3
4
5
6
7
8
0
0.1
0.2
0.3
0.4
Variable number
Q-contribution
 
Figure 7.  Q-contribution of test4. 
The obtained results allow us to identify the pouring 
temperature as the main cause for the occurrence of the 
surface defect. Another possibility is that a surface defect 
may be formed because the thermocouple has to be 
embedded into the foam.  
V. 
CONCLUSION AND FUTURE WORK 
In this paper, the PCA method is applied to improve the 
performance of casting process monitoring by using the 
statistical 
parameters; 
Q-statistic 
and 
Q-residual 
contribution. The aim of this application is to detect casting 
defects occurring at different stages of the process, and also 
to identify their causes. The obtained results demonstrate 
that the normal running state and the state with fault of the 
process can be clearly identified; the fault can be given by 
using the proposed method. 
The PCA method used in this work is accurate in fault 
detection and diagnosis of low pressure lost foam casting 
process. The operator can combine the results obtained by 
the multivariate statistical analysis with the process 
knowledge, and easily find out the reasons that arouse the 
faults. The future work will be focused on the application of 
condition monitoring on other types of casting defects. 
REFERENCES 
[1] C. E. Bates et al. “Advanced lost foam casting technology,” 
Summary report DOE, AFS, no. UAB-MTG-EPC95SUM, 
1995.  
[2] D. R. Hess, “Comparison of Aluminum alloys and EPS foams 
for use in the lost foam casting process,” Transactions of the 
American Foundry Society, vol. 112, 2004, pp. 1161-1174. 
[3] T. Pacyniak, “The effect of refractory coating permeability on 
the lost foam process,” Archives of Foundry Engineering, vol. 
8, no. 3, 2008, pp. 199-204. 
[4] G. Hénon, C. Mascré, and G. Blanc, Search for quality 
castings, Technical Editions of Foundry Industries, Paris, 
1986. 
[5] P. Beeley, Foundry technology, Oxford: Butterworth 
Heinemann, 2001. 
[6] M. Abdelrahman, J. P. Arulanantham, R. Dinwiddie, G. 
Walford, and F. Vondra, “Monitoring metal-fill in a lost foam 
casting process,” ISA Transactions, vol. 45, no. 4, 2006, pp. 
459-475. 
[7] W. A. Deabes, M. A. Abdelrahman, and P. K. Rajan, “A 
fuzzy-based reconstruction algorithm for estimating metal fill 
profile in lost foam casting,” Proc. American Control 
Conference, 
Seattle, 
USA, 
2008, 
pp. 
4868-4874, 
doi:10.1109/ACC.2008.4587265. 
[8] L. A. Dobrzański, M. Krupiński, J. H. Sokolowski, P. 
Zarychta, and A. Włodarczyk-Fligier, “Methodology of 
analysis of casting defects,” Journal of Achievements in 
Materials and Manufacturing Engineering, vol. 18, no. 1-2, 
2006, pp. 267-270. 
[9] M. Okaro, M. Abdelrahman, and J. Graves, “Monitoring 
Metal Fill Profile in Lost Foam Casting Process Using 
Capacitive Sensors and Metal Fill Time Estimation,” Proc. 
IEEE Sensors Applications Symp, 2011, pp. 76-81, doi: 
10.1109/SAS.2011.5739811. 
[10] H. Jafari, M. H. Idris, and A. Shayganpour, “Evaluation of 
significant manufacturing parameters in lost foam casting of 
thin-wall Al−Si−Cu alloy using full factorial design of 
experiment,” Transaction of Nonferrous Metals Society of 
China, vol. 23, 2013, pp. 2843-2851. 
[11] L. H. Chiang, E.L. Russell, and R.D. Braatz, Fault Detection 
and Diagnosis in Industrial Systems, London: Springer-
Verlag, 2001. 
[12] M. J. Zuo, J. Lin, and X. Fan, “Feature separation using ICA 
for a one-dimensional times series and its application in fault 
detection,” Journal of sound and vibration, vol. 287, 2005, pp. 
614-624. 
[13] X. Sun, H. J. Marquez, and T. Chen, “An improved PCA 
method with application to boiler leak detection,” ISA 
Transactions, vol. 44, 2005, pp. 379-397. 
[14] M. Tamura and S. Tsujita, “A study on the number of 
principal components and sensitivity of fault detection using 
PCA,” Computers and Chemical Engineering, vol. 31, 2007, 
pp. 1035-1046. 
[15] C. Y. Tsai and C. C. Chiu, “An efficient conserved region 
detection method for multiple protein sequences using 
principal component analysis and wavelet transform,” Pattern 
Recognition Letters, vol. 29, 2008, pp. 616-628. 
[16] L. Lang, Development and Testing of a Low Pressure Lost 
Foam Casting Machine and an Examination of the Process, 
PhD thesis, Freiberg University, Germany, 1999. 
[17] I. T. Jolliffe, Principal Component Analysis, 2nd ed., New 
York: Springer-Verlag. 2002. 
[18] M. Kano and S. Hasebe, “A new multivariate statistical 
process monitoring method using principal component 
analysis,” Computers & Chemical Engineering, vol. 25, 2001, 
pp. 1103-1113. 
[19] P. Nomikos and J. F. MacGregor, “Multivariate SPC charts 
for monitoring batch processes,” Technometrics, vol. 37, no. 
1, 1995, pp. 41-59. 
[20] J. E Jackson and G. S Mudholkar, “Control Procedures for 
residuals associated with principal components analysis,” 
Technometrics, vol. 21, 1979, pp. 341-349. 
[21] X. Xu, F. Xiao, and S. Wang, “Enhanced chiller sensor fault 
detection, diagnosis and estimation using wavelet analysis and 
principal component analysis methods,” Applied Thermal 
Engineering, vol. 28, 2008, pp. 226-237. 
 
107
Copyright (c) IARIA, 2014.     ISBN:  978-1-61208-354-4
ADVCOMP 2014 : The Eighth International Conference on Advanced Engineering Computing and Applications in Sciences

