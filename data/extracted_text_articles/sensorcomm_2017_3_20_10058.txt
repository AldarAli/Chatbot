 
 
Multi-Hop Protocol to Extend Signal Coverage 
Eloísa Alexandre Nielsen Matthiesen and Omar 
Carvalho Branquinho 
PUC Campinas 
Campinas, Brazil 
Email: eloisa.anm1@puccampinas.edu.br  
Email: branquinho@puc-campinas.edu.br 
Guilherme Lopes da Silva and Paulo Cardieri 
UNICAMP 
Campinas, Brazil 
Email: guitalos@gmail.com 
Email: cardieri@decom.fee.unicamp.br 
 
Abstract—This paper describes the tests carried out with a 
Wireless Sensor Network in order to examine the radio 
coverage in the large space of a university food court. Due to 
the challenging environment, the development of a multi-hop 
protocol was necessary. The protocol deems a sensor node as a 
repeater to extend the signal reach. We used the Radiuino 
open-source platform to develop the protocol with the 
flexibility to design an address strategy in the packet. The 
preliminary results indicate that the protocol developed is 
feasible, stable and robust. 
Keywords-WSN; multi-hop topology; routing protocol. 
I. 
 INTRODUCTION 
Wireless Sensor Networks (WSNs) play an important 
role in Internet of Things (IoT) applications, having low-
power sensors and easy installation. Indoor WSNs will be 
essential in smart homes, monitoring appliances and systems, 
such as closing the windows automatically based on the 
weather forecast [1]. 
Usually, a WSN consists of sensing nodes that report 
their results to a base station node. The base station node can 
process the data and monitor the network [2]. If a WSN 
needs to cover a wide area and the sensing nodes can not 
communicate directly with the base station node, a change in 
the topology of the nodes can be a solution. 
In this project, the sensing nodes were placed inside the 
food court of the Pontifícia Universidade Católica of 
Campinas in Brazil, and the base station node was placed in 
a laboratory. The distance between the base station node and 
the repeater node was 200 meters. Although is a small 
distance, it is in non-line-of-sight (NLOS), making the direct 
communication impossible. 
 To extend the range of the signal, a multi-hop protocol 
was created, using protocol stacks with five layers, akin to 
the 
Transmission 
Control 
Protocol/Internet 
Protocol 
(TCP/IP) concept. 
The rest of the paper is structured as follows. In Section 
II, we discuss the state-of-the-art. In Section III, we present 
the payout of the WSN. Section IV shows preliminary results 
and we conclude in Section V with the outcome of the 
experiment. 
II. 
STATE OF THE ART 
WSNs can have a distributed or a centralized routing 
protocol. The majority of articles found in literature use a 
distributed routing protocol, such as [3], [4], [5], in which the 
protocol runs in a peer-to-peer mode, requiring all the nodes 
to possess processing power. Another used protocol is the 
Routing Protocol for Low Power and Lossy Networks 
(RPL), but it is also a distributed protocol [6], being different 
from the protocol shown in this project. 
Although, by using the distributed protocol, the system 
does not depend on a centralized process unit. It also uses 
more energy, decreasing the equipment’s lifetime. The base 
station node, in both cases, always needs to be connected to 
the Internet and to have processing power. 
Another advantage of centralized routing is the simplicity 
of the network nodes. Only the base station node demands 
more complex processing capabilities. It also allows the 
development of the multi-hop protocol, that would not be 
possible with a distributed routing management. 
That simplicity makes it easier to meet the Quality of 
Service (QoS) parameters, like changing the routing path, 
changing radio attributes, such as power and channel. This 
ability is important for WSN operators, as seen in [7]. 
Without a centralized routing protocol, this operator can not 
attest to the QoS parameters.  
Further, it is possible to change priorities, for example, 
the information importance of the nodes can change over 
time. Considering those aspects, the WSN of this paper has a 
centralized routing protocol. 
III. 
MATERIAL AND METHODS 
In this setup, we employed seven sensor nodes using the 
open Radiuino [8] platform, a library of Arduino that allows 
the user to work in five layers. This platform was chosen 
because it allows a change of network topology, differently 
from other platforms like ZigBee [9]. 
The logical view of the network is shown in Fig. 1. The 
base station node uses the first three layers (PHY, MAC and 
Net) while the sensors nodes use five layers (PHY, MAC, 
Net, Transp and App). 
Figure 1.  Logical view of the WSN layers. 
37
Copyright (c) IARIA, 2017.     ISBN:  978-1-61208-580-7
SENSORCOMM 2017 : The Eleventh International Conference on Sensor Technologies and Applications

 
The communication modules used in the set up were 
BE990 and BE900, both homologated by the Brazilian 
National Telecommunications Agency (ANATEL). These 
modules carry an ATMega328 processor and a CC1101 RF 
transceiver with a bandwidth filter, operating in the 
Industrial, Scientific and Medical (ISM) frequency of 915 
MHz. The BE990 module also has a CC1190 that integrates 
a power amplifier (PA) with a low-noise amplifier (LNA) for 
improved wireless performance [10]. 
The communication module BE900 can reach up to 100 
meters indoors and 500 meters outdoors. The communication 
module BE990 can reach up to 1000 meters indoors and 
8000 meters outdoors. Those distances are considering it is 
in line-of-sight (LOS), which we did not have in this project. 
One sensor node was programmed to work only as a 
repeater, receiving data from the base station node and 
forwarding the packet to the other five sensor nodes. For a 
better performance, the base station node, the repeater node 
and the sensor 5 node used the BE990 (16dBm) module, 
while sensors nodes from 1 to 4 used BE900 (10dBm).  
In the layout of the system, the base station node is B, the 
repeater node R and the sensors are S1, S2, …, Sn. Fig. 2 
shows this layout. 
 
Figure 2.  Layout of the system.  
Radiuino packet has 52 bytes. The first 4 layers have 4 
bytes each, forming a 16 bytes header. The rest of the packet 
belongs to the Application layer. The remaining 36 bytes are 
split into two halves, 18 bytes to measure proprieties and 18 
bytes to control processes.  
The WSNs have a centralized protocol where the base 
station node is responsible for the routing protocol. The 
routing protocol approach is hierarchical. The route is chosen 
trough the ID of the nodes. 
 The protocol algorithm uses the bytes from 8 to 11 
(bytes of the Net layer header). In byte 8 is placed the 
address (ID) of the next node that is to receive the packet; in 
byte 9 goes the address of the final node in downlink; in byte 
10 goes the ID of the sender in the hop and in byte 11 goes 
the address of the final node in uplink.  
An example of the protocol where the base station 
node’s ID is 0, the repeater node’s ID is 20 and the sensor 
node’s ID is 1 is shown in Fig. 3. The protocol was designed 
to work only with the message in the packet, so the node 
sensor reacts, changing the addresses for the next hop. The 
advantage of this strategy is that it allows the sensor nodes 
to be scalable. 
The repeater node, which is predefined, works with 
bytes 8 and 10, it inputs the data of byte 8 in byte 10 (its 
address) and inputs the data of byte 9 in byte 8 (the sensor 
address). The sensor node swaps byte 8, for the data, in byte 
10, and swaps byte 9, for the data, in byte 11. After that, it 
inputs its own address (ID = 1) in bytes 10 and 11.  
Figure 3.  Sequence diagram of the packet. 
IV. 
PRELIMINARY RESULTS 
The first test lasted for six hours, from 1pm to 7pm, 
while the received signal strength indicator (RSSI) of down 
and uplink were measured. Fig. 4 shows the RSSI of sensor 3 
node as a function of time. The solid line is the downlink 
RSSI, that is, the RSSI that the sensor is measuring.  The 
dotted line is the uplink RSSI, that is, the RSSI measured by 
the repeater node. 
The solid points showing in both lines are the errors, 
when the packet was lost in transmission.  
 
Figure 4.  Chart of RSSI of Sensor 3. 
The discrepancy shown is the result of different 
communication modules in the repeater node and in the 
sensor 3 node. The position of the sensor node also 
influences the RSSI stability. Sensor 3 node is not in the line 
of sight making it less susceptible to passers-by. The 
 
 
38
Copyright (c) IARIA, 2017.     ISBN:  978-1-61208-580-7
SENSORCOMM 2017 : The Eleventh International Conference on Sensor Technologies and Applications

majority of packets lost are when the flux of people in the 
food court increases. 
In Fig. 5, we show the RSSI for the sensor 5 node as a 
function of time. The downlink RSSI is overlapping the 
uplink RSSI.  
 
Figure 5.  Chart of RSSI of Sensor 5. 
The overlapping of RSSI happens because the same 
module BE990 was used in both the repeater node and the 
sensor 5 node. Its position was in LOS, making the RSSI 
more unstable as a result of passers-by interference. 
V. 
CONCLUSION 
The purpose of this project was to cover university’s food 
court. A pretest was made trying the direct communication 
between sensor 3 node and the base station node, which was 
impossible due numerus obstacles between them. 
After the development of the protocol and the placement 
of the repeater node, the communication was possible.  
Sensor 3 node follows a Gaussian distribution, while 
sensor 5 node follows a Rayleigh distribution. This data is 
important to manage the WSN and take decisions about it. 
The RSSI improvement that is shown in sensor 5 node 
can be attributed to the different location and to different 
communication modules. 
In the future, some statistics will be compiled while the 
tests are running, estimating the average of the signal and its 
standard deviation. 
REFERENCES 
[1] A. Al-Fuqaha, M. Guizani, M. Mohammadi, M. Aledhari, and 
M. Ayyash, “Internet of Things: A Survey on Enabling 
Technologies, Protocols, and Applications,” IEEE Commun. 
Surv. Tutorials, vol. 17, no. 4, pp. 2347–2376, 2015. 
[2] L. Atzori, A. Iera, and G. Morabito, “The Internet of Things : 
A survey,” Comput. Networks, vol. 54, no. 15, pp. 2787–
2805, 2010. 
[3] K. Cheng, K. Lui, Y. Wu, and V. Tam, “A Distributed 
Multihop Time Synchronization Protocol for Wireless Sensor 
Networks using Pairwise Broadcast Synchronization,” vol. 8, 
no. 4, pp. 1764–1772, 2009. 
[4] E. Alnawafa, “IMHT : Improved MHT-LEACH Protocol for 
Wireless Sensor Networks,” pp. 246–251, 2017. 
[5] H. Shafieirad and R. S. Adve, “Opportunistic Routing in 
Large-Scale Energy Harvesting Sensor Networks,” 2016. 
[6] M. O. Farooq, C. J. Sreenan, K. N. Brown, and T. Kunz, 
“RPL-based routing protocols for multi-sink wireless sensor 
networks,” 2015 IEEE 11th Int. Conf. Wirel. Mob. Comput. 
Netw. Commun. WiMob 2015, pp. 452–459, 2015. 
[7] G. Gaillard, D. Barthel, F. Theoleyre, and F. Valois, “Service 
Level Agreements for Wireless Sensor Networks: A WSN 
operator’s point of view,” in 2014 IEEE Network Operations 
and Management Symposium (NOMS), 2014, pp. 1–8. 
[8] Radiuino, “Teoria do Radiuino,” 2016. [Online]. Available: 
http://radiuino.cc/projetos/. [Accessed: 25-May-2017]. 
[9] A. Elahi and A. Gschwender, ZigBee wireless sensor and 
control network. Prentice Hall, 2010. 
[10] Texas Instruments, “850 – 950 MHz RF Front End.” 2009. 
 
 
39
Copyright (c) IARIA, 2017.     ISBN:  978-1-61208-580-7
SENSORCOMM 2017 : The Eleventh International Conference on Sensor Technologies and Applications

