An Expert System Framework for Lifestyle Counselling 
 
Benedek Szakonyi, Tamás Lőrincz, Ágnes Lipovits, István Vassányi  
Faculty of Information Technology, University of Pannonia, 
Veszprém, Hungary 
email: benedek.szakonyi@virt.uni-pannon.hu, tamas.lorincz@virt.uni-pannon.hu, 
lipovitsa@almos.uni-pannon.hu, vassanyi@almos.vein.hu
 
 
Abstract— The implementation and support of proper lifestyle 
is a key factor in preventing chronic diseases and also in the 
management of already manifested ones. This paper presents a 
CLIPS (C Language Integrated Production System) based 
framework that can be used to develop expert systems for 
assisting users to learn a proper lifestyle. The relevance and 
applicability of this system is shown in the domains of diet and 
exercise based lifestyle management and workplace related 
ergonomics. Preliminary results show that the framework can 
properly evaluate the formulated basic knowledge bases and is 
suitable for the tasks intended. 
Keywords – CLIPS; expert system; lifestyle assessment; 
telemedicine; work ergonomics. 
I. 
 INTRODUCTION 
Lifestyle is a key factor in the prevention and 
management of chronic diseases [1]. A shortage of 
manpower in professions aiding people to “live a healthy 
life” (e.g., doctors, dietitians, ergonomists, etc.) have 
surfaced recently, and is growing gradually, as the number 
of treatments to be done is increasing faster than that of such 
experts [2]. A Lifestyle Coach Framework, aimed at 
improving people’s way of living, was developed for 
creating expert systems that could be used in solving these 
problems. With this framework, targeting general audiences 
is possible, just as well as focusing on specific patient 
groups, like diabetics. Two areas, logging-based diet and 
exercise oriented assessment, and workplace ergonomics 
were investigated. Their common ground is that for both, 
evaluation of user behavior can be achieved by analyzing 
events with expert systems (which differ only in the 
knowledge used). 
Expert systems (ES) have been used in many application 
areas (e.g., operations, production, finance, etc.), healthcare 
and medical cases included. From the different approaches 
on the demanding task of how to transform human 
knowledge into computer comprehensible data, the most 
dominant solution has been applying a rule-based system 
[3]. Interestingly, the aforementioned research inspected 
about 300 expert systems from the last 30 years, yet it 
seems, that none of them addressed the problem of daily 
lifestyle assessment. 
In the treatment of diseases affecting considerable 
masses in modern societies, changing lifestyle was identified 
as a key component. Carelessness has a huge impact on life 
quality, as developing harmful conditions is strongly related 
to living unruly, unhealthy lifestyles. The Lavinia Lifestyle 
Application [4] serves as a tool for users to log their daily 
nutrition and medicine intake, and their physical activity. 
Analyzing the data acquired in this way, by using the 
knowledge of dietary experts, could improve the effective 
assessment of users’ lifestyles. 
Computer based work, already in the early years of the 
2000s, was found to be dominant in developed countries [5]. 
This extensive use of computers results in workers sitting for 
most of their shifts [6], but research has shown, that by 
investigating 
working 
environments 
and 
improving 
workplace ergonomics, the negative effects of this 
prolonged sedentariness can be reduced effectively [7]. Yet, 
in that case, participants were in direct contact with 
(ergonomist) experts, which, although desirable, on global 
scale could be found infeasible and/or unprofitable, so 
computerizing and automating this procedure could serve as 
a good alternative. 
Section II details the methods used, Section III describes 
the framework developed, and in Section IV the two 
modules are presented. In Section V, preliminary results are 
shown, while Section VI addresses the conclusions and 
future work. 
II. 
METHODS 
A. Expert Systems 
There are different approaches on implementing expert 
systems (case-based reasoning, fuzzy logic, genetic 
algorithms, etc.), but for lifestyle assessment a rule-based ES 
is sufficient, as the experts of the related fields (e.g., 
dietitians, ergonomists) can usually express their knowledge 
in the form of IF-THEN like rules. Rules are applied on 
facts (statements describing the current state of the system, 
and the new events) by an inference engine, to deduce new 
facts and provide explanation, if needed. An advantage of 
using such an expert system is that updating the knowledge 
base can be easily done, as it is separated from the reasoning 
engine, so changes in it will not affect basic functionality of 
the system. 
The sources of the rules used in the lifestyle management 
module are dietitian experts who participated in the clinical 
trials related to the development of Lavinia, as there are 
numerous different recommendations and standards to 
otherwise choose from. For evaluating user postures, RULA 
92
Copyright (c) IARIA, 2018.     ISBN:  978-1-61208-618-7
eTELEMED 2018 : The Tenth International Conference on eHealth, Telemedicine, and Social Medicine

(Rapid Upper Limb Assessment) [8], a generally accepted 
scoring method for measuring physical load on office 
workers, is selected. One of its advantages is that it rates not 
just the postures themselves, but also considers how much 
time is spent in them. 
B. Modelling Time 
For many problems addressed by expert systems, the 
temporal relations of facts are not relevant. In lifestyle 
assessment, however, time has an impact on making 
decisions: for example, a fact like “the user has exercised 
today” should be handled differently, whether if it is the first 
or the 7th occasion in a week (as the latter is a greater 
achievement). Handling time passing is crucial, as there may 
be facts that have lost their actuality and thus should be 
updated or removed, while others may have to be inserted 
after specific time intervals have passed: a fact like “the user 
ate fish today” should change to “the user ate fish yesterday” 
on the next day.  
This “time problem” has another aspect: the time 
concept for logging events is different from the one used by 
experts. The former is assigning a specific timestamp to 
every event, while experts tend to refer to events from the 
present time (e.g., “Yesterday the patient ran 5 km”). To 
solve this semantic gap, the framework uses relative 
timestamps (fact ages). When inserted, facts have an age of 
0, which then can be updated by aging rules as many times 
as needed. These rules activate (fire) when given signaling 
facts (that indicate the passing of a specific time interval) are 
inserted. In order to allow the usage of various measures of 
time (e.g., week, day, hour), the framework is currently able 
to handle two different time dimension configurations (one 
for each module created). The first one is for applications in 
which the shortest interval required is one hour, and longest 
is a week. This case, used in Section IV A, has time units 
“hour”, “day” and “week”. The other one is suitable when 
the minimal interval is one minute, and the maximal does 
not exceed a day. This setting, applied in Section IV B, 
offers two units: “minute” and “hour”. 
C. Validation and Testing  
Once a sufficient number of rules have been formulated, 
their proper validation is needed, by field tests, if possible, 
or by using Turing test-like blind evaluation, when both the 
system’s and expert’s outputs for the same input are 
evaluated by other experts, without knowing who is 
performing. 
For expert systems, simulation of user behavior is 
needed to provide the necessary input. Using time 
configurations allows accelerating this evaluation process: 
after inserting the relevant facts for a given time interval 
(minute, day, etc.), a fact stating that the current interval is 
over can be inserted, and the test can continue with the next 
one. This way, even data spanning a year can be processed 
in some minutes. 
For the lifestyle management module, former user logs 
of the Lavinia Lifestyle Application are available and can be 
used for testing. For the workplace ergonomics part, video 
recordings from office work surveillance/monitoring could 
be used for the same purpose. 
III. 
THE FRAMEWORK 
From the available expert system solutions, CLIPS (C 
Language Integrated Production System) [9] was chosen to 
serve as a basis, as it has already proved its value (e.g., in 
NASA’s space shuttle missions [10], security purposes 
[11]), and for its advantages such as being a public domain 
software, having low resource needs and for supporting 
portability (C code). With regard to the portability offered, 
the framework is based on C++ language. An overview of 
the framework developed is shown in Figure 1. 
The CLIPS runtime is responsible for evaluating rules 
and facts. The event dispatcher inserts the incoming facts 
from the interface into CLIPS and to the database (DB). It 
also stores the output of CLIPS (facts deducted) in the 
database, and based on it, forwards any messages to the 
interface, if needed. The database is not used for only 
modelling the problem, it serves as a backup on CLIPS’ 
work memory. It can be used for initialization, when a 
former state of the system is to be reconstructed, and for 
debugging purposes, to investigate the validity of the 
reasoning. The main entities of this database are the 
following: 
 
rule, fact and event tables – containing the defined 
rules, facts and events 
 
rule_fact table – storing the connection of facts and 
the rules that deduced them. 
 
rset and rule_set tables – allowing rules to be sorted 
into groups. This provides the ability to change 
which rules are currently used. E.g., apply different 
rules for diabetics and healthy people. 
 
rule_gui table – storing the messages to be 
displayed, for given rules. 
The interface (using Google Protobuf [12]) is for other 
applications to use, when modifications in the expert system 
are needed, and to receive its responses. There are two 
groups of Protobuf messages: control and event. Control 
messages can be used to manage the expert system, e.g., 
INTERVAL_PASSED “orders” the expert system to age facts 
by the shortest time unit configured. An event can be of two 
types, fact or consequence: the former is for inserting new 
facts (module specific system input), the latter is for 
outgoing communication (e.g., displaying messages). The 
structure of Protobuf messages is shown in Figure 2, where 
the possible fact values are for the lifestyle management 
module. 
 
Figure 1.  Overview of the system 
93
Copyright (c) IARIA, 2018.     ISBN:  978-1-61208-618-7
eTELEMED 2018 : The Tenth International Conference on eHealth, Telemedicine, and Social Medicine

 
 
Figure 2.  Interface message structure (lifestyle management module) 
For the work ergonomics module, a similar structure is 
used, with the same controls and event types, but of course, 
it uses different fact types that are relevant to the ergonomic 
evaluation of user behavior. 
IV. 
APPLICATION DOMAINS 
A. Lifestyle Management 
To analyze the user logs provided by Lavinia, an expert 
system module was developed with the framework presented 
in Section III, that applies rules formulated by dietitians. 
An example for such a rule is “For exercising on every 
day in the last week, the user is to be complimented”. 
Defining a rule checking the last 7 days for exercises done is 
simple with this framework: when the sufficient number of 
facts having the required ages (0, 1, …, 6 days) is found, the 
compliment is sent. (This, of course, requires logging the 
exercises and forwarding this information to the system.) To 
avoid bombing the user with the same message repeatedly 
(as the notification requirements are met), after the rule has 
fired and the first compliment is sent, a new fact stating the 
completion of the feedback is deducted (see Figure 3). This 
rule, however, is to be removed after a specific time interval, 
to make complimenting possible again. This, as the new rule 
by definition has an age when created, is achieved by adding 
a simple removal rule. 
Another rule, requiring a different approach, is “If user’s 
daily fiber intake reaches the recommended value, a 
compliment is to be sent”. As users’ goals can differ 
concerning 
their 
weight 
plan 
(gaining, 
losing 
or 
maintaining), 
and 
with 
them 
their 
corresponding 
recommended fiber intakes, rules handling all possibilities 
were created. After each midnight, the recorded intake value 
is set to zero, and when meals are logged, it is increased 
accordingly to the food’s fiber amount. 
 
Figure 3.  A rule for sending a motivational message 
Notifying users when the daily intake is reached is 
similar in each cases, but the related reactions are distinct: it 
is either a warning to avoiding additional consumption 
(maintaining or losing weight) or a compliment (weight 
gain). 
To validate the rules created, former logs of randomly 
selected Lavinia users were used to simulate real human 
behavior (see Section V). 
B. Work Ergonomics 
The problem of assessing office work ergonomics can be 
separated into two subtasks: the first is the already discussed 
problem of translating human knowledge for computers. The 
second is providing the means for gathering the user input to 
be analyzed, without requiring active cooperation from 
users. 
In case of ergonomic assessment, rules focus mostly on 
the users’ body postures, usually with regard to the time 
spent in those poses. This means concerning postures both 
for the whole body (e.g., “the users should not sit in one 
place for too long”), and in more detail, like “for most of the 
time, users’ forearms should be properly supported”, or “the 
users should not spend too much time with their heads tilted 
(cradling a phone)”. Of course, as previously mentioned, 
time concepts such as “too much”, “too long”, etc., are 
incomprehensible for computers, so ergonomist experts are 
needed to define more precise time intervals. Moreover, they 
are the ones who can specify what is an acceptable posture 
and what is not for rules such as “the users should sit with 
their back held properly”. However, this precision would 
prove useless, if the other subtask, collecting posture data, is 
not solved correctly. 
A trivial approach for monitoring users’ postures is using 
some camera equipment. To precisely detect user position or 
posture, however, a “traditional” 2 dimensional (2D) device 
is insufficient, as in this case, 3 dimensional data is required. 
Of course, using more than one 2D camera could solve this 
problem, but applying a single sensor with the required 
functionality is preferable. Such a device is the Microsoft 
Kinect v2, that provides video (colored and infrared) and 
depth data streams, as well as a built-in feature for body 
recognition and tracking (25 skeletal joins per person, up to 
6 people) [13][14]. 
The accuracy of Kinect in office monitoring was 
addressed in [15], showing that its tracking capabilities are 
acceptable, but whether the received data is usable for 
ergonomic evaluation or not, was not mentioned. To 
investigate this, a test software, measuring and displaying 
the acquirable information of user behavior, has been 
created, and is currently being evaluated by ergonomists.  
Parallel to this, with the framework developed, a basic 
expert system module was created, in order to validate if it 
can react properly to simple workplace related situations or 
not. For this reason, some basic ergonomic rules were 
formulated, these are detailed in Section V. 
(defrule physical_activity_whole_week  
(physical_activity_whole_week)  
(not (physical_activity_feedback 
(fact_age_day ?g&:(= ?g 0))))  
=>  
(clips_event_happened 5)  
(assert (physical_activity_feedback))  
) 
94
Copyright (c) IARIA, 2018.     ISBN:  978-1-61208-618-7
eTELEMED 2018 : The Tenth International Conference on eHealth, Telemedicine, and Social Medicine

V. 
RESULTS 
In total, 29 rules were formulated so far in the lifestyle 
managing module: 6 of them are automatically generated by 
the framework for aging facts, the rest serve for lifestyle 
assessment. The implemented statements given by dietitians 
were: 
 
When users log their fasting blood glucose level, 
they are to be rewarded. 
 
When users log their insulin dosage, they are to be 
rewarded. 
 
Walking 30 minutes a day should be rewarded.  
 
Users should be complimented if, for the last week, 
they exercised every day. 
 
If the user reached the recommended daily fiber 
intake, a compliment is to be sent. 
 
The users are to be complimented, if their BMI 
(Body Mass Index) drops below 25. 
 
Logging meals containing fish dishes on two 
different days in the last week is to be 
complimented. 
The tests have shown that the already defined rules 
provide the required functionality and work properly, so 
work on implementing additional rules to cover a wider part 
of lifestyle assessment can begin. Moreover, trials of 
running the framework on smartphones were successful, and 
have shown that it is possible to use this lifestyle assessing 
system on mobile devices. 
The work ergonomics module was tested in a similar 
fashion, but as evaluation of the data acquiring sensor is still 
in progress, plain concepts and lenient constraints were used 
in rules like 
 
After 90 minutes of continuous sitting, the user is to 
be advised to stand up/take a walk. 
 
After 3 hours of continuous sitting, the user is to be 
compelled to stand up/take a walk. 
 
If for at least half of the time in the last 60 minutes, 
the angle of the user’s back and the vertical position 
was more than 30 degrees, a warning is to be sent. 
 
If for the last 60 minutes, it occurred more than 3 
times that the user spent more than 3 minutes with 
their head rotated more than 30 degrees (compared 
to the vertical position), a warning is to be sent- 
As in the case of the other module, tests have proved that 
the basic functionality of this module is satisfactory, and can 
be used for implementing concepts regarding work 
ergonomics, however, it is clear that more precise intervals 
should be used in discriminating proper and improper 
postures. 
Initial results on Kinect’s applicability seem to confirm 
that the device is suitable for ergonomic evaluation, but only 
after some preprocessing done, as in some occasions, false 
body detections and strange body pose predictions have 
been observed. Changing the position and orientation of the 
device was found to have a notable effect on how accurate 
the readings are, which correlates to the findings of 
Wiedemann et al. [15]. 
VI. 
CONCLUSION AND FUTURE WORK 
This paper presented a framework for creating expert 
systems for lifestyle assessment, and two examples for its 
application domains were introduced. 
The tests show the developed framework and the 
modules to be promising, however, further study has to be 
done on how user behavior can be assessed more 
thoroughly, and on what the related system reactions should 
be (what other rules to implement). Based on these findings, 
if needed, the framework itself should be improved 
accordingly.  
For the lifestyle management module, apart from 
additional rules, further improving the method for providing 
positive feedback on Lavinia users’ behavior (what the 
messages should be) is also important, as this can have a 
great impact on their motivation and success. 
The implementation of the RULA-based rule set is in 
progress, and a total of 30-40 rules is expected to cover all 
significant aspects of work ergonomics. The validation of 
the developed module, as well as its rule-base, is to be 
completed in early 2018. 
In both testing procedures of the work ergonomics 
module, the idea of having the system running on a different 
computer than of the user’s has emerged. This would save 
the user’s device from providing the computational 
requirements of the data processing, could strengthen error 
resistance (e.g., protection from power outage related 
damage) and would allow additional security measures (limit 
access to the system). 
However, an additional personal computer in the work 
environment might be found unappealing (e.g., it requires 
more space, cabling, etc.). A solution to this problem, and 
also to the proper placing of the monitoring sensor, could be 
using an “intelligent workstation”: a mechanical desk, 
embedded with a single-board computer capable of 
executing the tasks related to data acquisition and expert 
system management, with a structure that makes it possible 
to install the sensor in an optimal position. Moreover, other 
useful features could also be implemented, e.g., motorized 
height adjustment of the desk or a self-adjusting adaptive 
desk lamp. On how these could be efficiently implemented, 
and what other handy utilities could be used, further 
research is needed. 
ACKNOWLEDGMENT 
This research was supported by the ÚNKP-17-2 New 
National Excellence Program and the NTP-HHTDK-17-
0033 Program of the Ministry of Human Capacities, 
Hungary, and was partially supported by the NKFI-6 fund 
through project K120369 (OTKA). 
REFERENCES 
[1] F. Sassi and J. Hurst, “The prevention of lifestyle related 
chronic disease: an economic framework”, OECD Health 
Working Papers, p. 32, 2008. 
[2] World Health Organization and Global Health Workforce 
Alliance, “A universal truth: no health without a workforce”, 
Third Global Forum on Human Resources for Health Report, 
November 2013, ISBN 978 92 4 150676 2. 
95
Copyright (c) IARIA, 2018.     ISBN:  978-1-61208-618-7
eTELEMED 2018 : The Tenth International Conference on eHealth, Telemedicine, and Social Medicine

[3] W. P. Wagner, “Trends in expert system development: A 
longitudinal content analysis of over thirty years of expert 
system case studies”, Expert Systems with Applications, vol. 
76, Pages 85-96, 2017, doi: 10.1016/j.esq.2017.01.028. 
[4] I. Kósa et al., “A fast, Android based dietary logging 
application to support the life style change of cardio-
metabolic patients”, Global Telemedicine and eHealth 
Updates: Knowledge Resources, vol. 7, pp. 553-556, 2014, 
ISSN 1998-5509. 
[5] M. J. Smith, F. T. Conway, and B. T. Karsh, “Occupational 
stress in human computer interaction”. Industrial Health, vol. 
37, pp. 157–173, 1999. 
[6] J. O. Hill and J. C. Peters, “Environmental contributions to 
the obesity epidemic”, Science, vol. 280, pp 1371–1374, 
1998. 
[7] M. M. Robertson, Y. H. Huang, and J. Lee, “Improvements in 
musculoskeletal health and computing behaviors: Effects of a 
macroergonomics office workplace and training intervention”, 
Applied Ergonomics, vol. 62, pp. 182-196, Jul. 2017, 
doi:10.1016/j.apergo.2017.02.017. 
[8] R. Lueder and N. Corlett, “A proposed RULA for computer 
users”, Proc. Ergonomics Summer Workshop, UC Berkeley, 
Aug. 1996, pp. 8-9. 
[9] Gary Riley, CLIPS - A Tool for Building Expert Systems, 
www.clipsrules.net/?q=AboutCLIPS [retrieved: Feb, 2018]. 
[10] J. F. Muratore, T. A. Heindel, T. B. Murphy, A. N. 
Rasmussen, and R. Z. McFarland, “Applications of artificial 
intelligence to space shuttle mission control”, Proc. 
Innovative Applications of Artificial Intelligence, 1989, pp. 
105-110, ISBN 978-0-262-69137-6. 
[11] D. Silberberg and R. Thomas, “The NASA personnel security 
processing expert system”, Proc. Innovative Applications of 
Artificial Intelligence, 1996, pp. 1527-1535, ISBN 978-0-
262-51091-2. 
[12] Google Inc., Protocol Buffers, developers.google.com/ 
protocol-buffers [retrieved: Feb, 2018]. 
[13] Z. Zhang, “Microsoft Kinect sensor and its effect”, IEEE 
MultiMedia, vol. 19, no. 2, pp. 4-10, Feb. 2012., doi: 
10.1109/MMUL.2012.24. 
[14] E. Cippitelli, S. Gasparrini, S. Spinsante, and E. Gambi, 
“Kinect as a tool for gait analysis: validation of a real-time 
joint extraction algorithm working in side view”, Sensors, no. 
15, pp. 1417–1434, 2015. 
[15] L. Wiedemann, R. Planinc, and M. Kampel, “Ergonomic-
monitoring of office workplaces using Kinect”, Proc. 
Ambient Assisted Living and Daily Activities, December 
2014, pp. 275-278, doi: 10.1007/978-3-319-13105-4_40. 
96
Copyright (c) IARIA, 2018.     ISBN:  978-1-61208-618-7
eTELEMED 2018 : The Tenth International Conference on eHealth, Telemedicine, and Social Medicine

