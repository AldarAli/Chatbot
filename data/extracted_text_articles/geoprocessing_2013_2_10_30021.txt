Design and Realization of Thematic Mapping in Web3DGIS 
Guang Zhu 
Beijing University of Civil Engineering and Architecture 
Beijing, China 
E-mail: zhuguang@bucea.edu.cn 
Wenhao Qiao 
Beijing University of Civil Engineering and Architecture 
Key Laboratory for Urban Geomatics of National 
Administration of Surveying, Mapping and Geoinformation 
Beijing, China 
E-mail: qiaowenhao@gmail.com
 
Abstract— thematic mapping is an important module of GIS. 
With the development of technology such as 3D visualization 
and network communications, how to realize and optimize the 
thematic mapping based on Web3DGIS has become a hot 
research topic of GIS. This article has designed and realized a 
Web3DGIS platform based on Rich Client / Server, and 
adopted a thematic mapping method based on geometry. 
Through the method level-3 cache mechanism, the render 
efficiency of thematic mapping in the 3D scene and its 
expression ability has been effectively improved which has 
verified the feasibility of this method. 
Keywords-Web3DGIS; 
thematic 
mapping; 
vector 
data 
rendering; level-3 cache mechanism. 
I. 
 INTRODUCTION 
Thematic mapping, which is an important functional 
module of GIS (Geographic Information System), can not 
only render and visualize the thematic information of GIS, 
but also conduct further space analysis and geographical 
analysis. Moreover, it could exploit the hidden mode and its 
development tendency. With the development of technology 
such as 3D visualization and network communications, to 
efficiently 
realize 
the 
thematic 
mapping based on 
Web3DGIS has become a hot research topic of GIS [9]. 
Currently, there are mainly two kinds of thematic mapping 
methods with vector data and based on Web3DGIS. First, 
Thematic mapping method based on geometry. Second, 
Thematic mapping method based on texture [8]. 
Thematic mapping method based on geometry means 
rendering vector data dynamically according to the terrain 
surface, and the vector data exist in 3D scene as 3D feature. 
However, this method would cause large system overhead 
[3]. Thematic mapping method based on texture means 
transforming vector to raster data, and to load vector data 
into 3D scene like raster data. This method saves system 
overhead that theoretically can support mass data, but does 
not benefit for interactive data [1]. 
The thematic data, thematic symbol and the method of 
interaction are more complicated in 3D scene. ArcGIS 
adopts the thematic mapping method based on geometry, but 
it cannot support the large amount of vector data well, so the 
interaction capability is limited partly. Google Earth renders 
thematic map with KML, and rendering data with high-
efficiency, however the KML limits the interaction too much. 
WorldWind adopts the method combining geometry and 
texture to render thematic map, but if the volume of data is 
too large, the rendering efficiency is not ideal. 
In order to solve the problems which mentioned above, 
this article designed and realized a Web3DGIS platform 
based on Rich Client / Server, and adopted an optimized 
thematic mapping method based on geometry. Through 
technologies level-3 cache mechanism, the efficiency of 
rendering and the ability of mapping have been improved 
successfully in the GIS thematic mapping. 
This article is organized as following: Section II presents 
the core idea of the solution. In Section III, the main method 
of thematic mapping in 3D scene via Rendering of 3D scene, 
Level 3 cache mechanism, and thematic data rendering are 
presented. Section IV focuses on the realization of the 
Web3DGIS, while Section V presents details on an 
application case for the Web3DGIS.  Section VI concludes 
the paper. 
Research purpose: 1. Enhancing thematic mapping 
(based on vector data) efficiency by Level 3 cache 
mechanism. 2. Reinforcing the interaction capability of 
thematic map by rendering vector data based on geometry. 
II. 
SOLUTION 
The Figure 1 is the architecture of Web3DGIS platform. 
15
Copyright (c) IARIA, 2013.     ISBN:  978-1-61208-251-6
GEOProcessing 2013 : The Fifth International Conference on Advanced Geographic Information Systems, Applications, and Services

UI
DEM
DOM
WMS + Tomcat
Raster Data Cache
Raster Data 
Processing Module
WebPage
（HTML/JavaScript）
3D scene
（JavaApplet）
DLG
Statistical Data
Vector Data Cache
Thematic 
Mapping Module
Analysis Module
3D Rendering 
Module
Configuration 
File
JavaScript
DAL
BLL
Vector Data 
Processing Module
Figure 1.  Architecture of the Web3DGIS platform. 
 
The server is composed of DAL (Data Access Layer), 
publishes the pyramid of raster data in the database through 
WMS (Web map service) which follows OGC’s (Open 
Geospatial Consortium) principles. In addition, publishes 
website information and vector data through Tomcat. The 
browser side is composed of BLL (Business Logical Layer) 
and UI (User Interface). After acquiring the data from the 
server side establishes cache specific to raster data and 
vector data respectively. Therein, raster data (DOM (Digital 
Orthophoto Map), DEM (Digital Elevation Model)) cache is 
used to establish 3D scene, and vector data cache is used for 
thematic mapping and related analysis. Considering the 
generality of data, the vector data in this article takes 
“Shapefile” as the main data source. 
The BLL is the core of the architecture. After acquiring 
the data from DAL, which based on the configuration file, 
the BLL import raster data into raster data cache via raster 
data processing module and import vector data into vector 
data cache via vector data processing module. Finally, the 
data in the two caches will be transferred to 3D rendering 
module, thematic mapping module, and analysis module, in 
order to render and analysis of the thematic mapping. 
III. 
RENDERING THEMATIC MAP IN 3D SCENE 
A. Rendering of 3D scene 
In this article, the server-side publishes LOD (Level of 
Detail) image tiles of DOM and DEM which adopts the 
WMS standard of OGC (Open Geospatial Consortium) [6]. 
The browser side organizes and schedules image tiles by 
quad tree index mechanism, loads data into the scene, 
establishes digital elevation model in the 3D scene by DEM 
tiles, renders surface images by DOM tiles, and completes 
the production of base map of thematic mapping and the 
construction of 3D scene [2]. 
B. Level 3 cache mechanism 
The thematic mapping in this article mainly depends on 
spatial data of vector data (.shp, .shx, .prj) and attributes data 
(.dbf). Through renders thematic mapping by spatial data, 
calculates and renders pie chart and histogram by attribute 
data, etc. In the mean time, this article adopts a kind of level 
3 cache mechanism to make thematic mapping, in order to 
improve the speed of data access and rendering speed of 
thematic mapping. Figure 2 indicates the structure of the 
rendering module of thematic mapping. 
In Figure 2, the vector data loader loaded vector data and 
transferred part of the data to vector data cache, and then the 
loader and the cache transferred the data to vector data 
16
Copyright (c) IARIA, 2013.     ISBN:  978-1-61208-251-6
GEOProcessing 2013 : The Fifth International Conference on Advanced Geographic Information Systems, Applications, and Services

complier together for compiling. At last, the compiler 
transferred the data stream to vector data rendering module 
and 3D thematic symbol rendering module to render or 
analyze the data. 
Server
Vector Data Loader
Vector Data 
Cache
Vector Data Complier
.shp
.dbf
.prj
.shx
…
Vector Data Rendering 
Module
3D Thematic Symbol 
Rendering Module
Scene Controller
View Controller
 
Figure 2.  Architecture of the thematic mapping rendering module. 
 
With the purpose of accelerating the speed of thematic 
mapping in the 3D scene, this article improves the method of 
active thematic mapping. Level 3 cache display mechanism 
is based on the traditional Level 2 cache display mechanism, 
for rendering thematic mapping. Level 2 cache display 
mechanism is to add a backup cache for organizing data to 
be displayed in advance on the basis of original main cache 
in the memory. The main cache data is used to display 
current scene, and the backup cache organizes data used by 
next scene. Level 3 cache mechanism is to add a HDD (Hard 
Disk Drive) cache for the interaction with server data on the 
basis of Level 2 memory cache. The HDD cache would be 
saved in the directory of browser local cache and the vector 
data accessed at the server side would be saved under this 
cache directory in the form of compressed package. 
Therefore, when users are to access the data again or to 
render again, the access request would directly go to the 
local data which accelerates the speed of data accession and 
rendering. 
C. Thematic data rendering 
After the data being compiled by vector data compiler, 
based on Level 3 cache mechanism, the vector data 
rendering module, the 3D thematic symbol module, and 
scene controller will accomplish the rendering of the 
thematic map. 
 
Actually, rendering the vector data is to render the 
projection along the vertical direction on the terrain 
surface [5]. This article adopted a vector rendering 
method based on geometry, the core of which is 
rendering the vector data which is created to adapt 
the terrain surface. If the data adapts the terrain 
surface, we will compute its projection and draw it 
on the terrain; if not, we need to introduce some new 
vertexes or segments to make the data adapt the 
terrain surface. This way, the vector data exists in 
the thematic map as an “Object”, while displaying 
the thematic map; it can also provide some analysis 
capability. In the meantime, there are different 
datasets that point to different space or time, so we 
should divide vector into different layers to display 
different thematic data by different color or symbol. 
At last, to reduce the loading quantity of the thematic 
map, controlling the visual range of the vector by the 
scene controller is needed. Figure 3 is the schematic 
diagram of rendering vector based on geometry. The 
broken line means the surface of terrain and the 
straight line means the vector data, we made the 
straight line adapt the broken line by introduced 
some new vertexes or segments. 
 
 
Figure 3.  Schematic diagram of rendering vector based on 
geometry. 
 
 
Rendering thematic symbol is a kind of extension of 
rendering vector data in 3D scene [7]. While 
inheriting the method that renders vector based on 
geometry, we confirmed the coordinate via the 
spatial data of the vector data and height, color of the 
pie chart (histogram) via the attribute data of the 
vector data. In practical applications, using only 
figure to present the thematic map is not accurate 
enough; so, rendering the accurate value at the top of 
pie chart (histogram) is needed. The method we 
adopted in this article is locating the coordinate of 
the value to be rendered at the center of the pie chart 
(histogram) top surface, and overlaid the value layers 
on the pie chart (histogram) layers to avoid the value 
layers to be covered. In the meantime, the thematic 
symbol provides some interaction capability such as 
allowed user to measure or select the vector data and 
rendering the thematic symbol immediately, etc. 
17
Copyright (c) IARIA, 2013.     ISBN:  978-1-61208-251-6
GEOProcessing 2013 : The Fifth International Conference on Advanced Geographic Information Systems, Applications, and Services

IV. 
REALIZATION OF THE WEB3DGIS PLATFORM 
The Web3DGIS platform in this article adopted the rich 
client / server technology. The server is developed by C++, 
while integrating WMS [11] and Tomcat [12] and publishing 
the raster tile data and vector data, etc. The client is realized 
by webpage embedded a JavaApplet which is based on 
JOGL (Java Bindings for OpenGL). The JavaApplet takes 
charge of rendering the 3D scene, the thematic map and 
providing the application interface, and JavaScript will 
realize the interaction between the webpage and JavaApplet 
by the interface. Figure 4 is the architecture of the 
JavaApplet. 
Earth Model
Tile Complier
………
Thematic 
Symbol Layers
Thematic Map 
Layers
Model
Configuration File
JavaApplet
Scene Controller
View
Rendering Controller
Web Page
Level-3 
Cache
Interface
Server
 
Figure 4.  The Architecture of the JavaApplet. 
 
The JavaApplet is realized by MVC (Model–View–
Controller) [13][11]. The model part structured the 3D scene 
via raster data pyramid and loaded the thematic map in 3D 
scene according to spatial reference system; the view part 
displayed graph and transformed the coordinate from spatial 
to view via four-dimensional matrix; the scene controller and 
the render controller listened, handled the operation from 
user together, and displayed via the view part. 
V. 
APPLICATION CASE 
The WEB3DGIS platform, which was designed and 
realized, has been used for multiple regions in different 
industries; for instance, a city landscape management 
information system. It has realized garden thematic maps in 
different years, different regions and different types, via 
rendering vector data based on geometry (Figure 5), the 
thematic data query via the communication between 
JavaScript and JavaApplet and some interactive features 
such as measuring the greening rate of designated area 
(Figure 6) via the "object" feature of vector data which is 
mentioned above. 
 
 
Figure 5.  Thematic map. 
 
 
Figure 6.  The design sketch of measuring the greening rate. 
 
18
Copyright (c) IARIA, 2013.     ISBN:  978-1-61208-251-6
GEOProcessing 2013 : The Fifth International Conference on Advanced Geographic Information Systems, Applications, and Services

Select the area to be 
computed in the 
thematic area
If contains the 
green data
End analysis
No
Contain or 
intersect
yes
Extract the area 
field from 
database
Compute the area 
intersected
Compute the area 
and display the 
result
Contain
Intersect
Figure 7.  The flow chart of measuring the greening rate. 
 
VI. 
CONCLUSION AND FUTURE WORK 
Practice has proven that adopting optimize thematic 
mapping and combining with the technology of rendering 
vector data based on geometry can realize the function of 
thematic mapping practically and effectively under the 
Web3DGIS surroundings. The frame rate can maintain in 
more than 100 fps while the amount of data is less than 5GB 
and about 60 fps while the amount of data is between 5GB to 
10GB. More importantly, it can not only realize fast 
rendering of thematic maps, but can also realize query and 
analysis, based on vector data.  
However, the method mentioned above cannot be well-
supported for massive amounts of vector data (more than 
10G). In the next step, we will embed Hilbert-R Tree into the 
Applet. Scheduling vector by the index or Hilbert-Value of 
Hilbert-R tree, in this way, the efficiency of rendering vector 
would be further improved. 
 
 
 
 
 
 
 
 
REFERENCES 
[1] Q. Hu, “Research Based on the Integration of Two-
dimensional Vector Data and Three-dimensional Terrain”, 
Zhejinag University of Technology, 01.12.2009. 
[2] H.M. Yao, T.J. Cui, S.X. Shao and J.F. Yuan, “LOD Terrain 
Model and Data Organization MethodBased on Quadtree 
Structure”, Geomatics World, 2007, 12(6), pp. 56-59. 
[3] P. Nazzareno, P. Fabrizio and  C. Marco, “Thematic mapping 
at regional scale using SIASGE Radar data at X and L band 
and optical images”, International Geoscience and Remote 
Sensing Symposium, IGARSS 2011 – Proceedings, IEEE, 
2011,  pp. 1095-1098. 
[4] B. Leonhard and W. Frank, “Shallow landslide susceptibility 
mapping using stereo air photos and thematic maps”, 
“Cartography and Geographic Information Science”, IEEE, 
2010, pp. 105-118. 
[5] M. Scheider and R. Klein, “Efficient and Accurate Rendering of 
Vector Data on Virtual Landscapes”, Journal of WSCG, 2007(1), 
pp. 59-65. 
[6] A.S. Tang and O. Ertz, “Towards Web Services Dedicated to 
Thematic Mapping”, OSGeo Journal, 2007(3), pp. 31-34. 
[7] R. Yuri and F. Luciano, “Construction of seafloor thematic 
maps from multibeam acoustic backscatter angular response 
data”Mayer, Larry, “Computers and Geosciences”, IEEE, 
2012, pp. 181-187. 
[8] S. Zlatanova, A.A. Rahman and M. Pilouk, “Trends in 3D GIS 
development”, Journal of Geospatial Engineering, 2002, Vol. 4, No. 
2, pp. 1-10. 
[9] Y. Pan, “A Thematic Map Making Mode Based on GIS”, 
“Bulletin of Serveting and Mapping”, 2005, Vol. 9, pp. 28-40 . 
[10] D. C. Roy and V. Coors, “3D web-based GIS for flood visualization 
and emergency response”, “Society of Petroleum Engineers - 73rd 
European Association of Geoscientists and Engineers Conference and 
Exhibition 2011 - Incorporating SPE EUROPEC 2011”, IEEE, 2011, 
pp. 1001-1005. 
[11] http://www.opengeospatial.org/standards/wms: Dec. 2012. 
[12] http://tomcat.apache.org: Dec. 2012. 
[13] http://en.wikipedia.org/wiki/Mode-view-controller: Dec. 2012. 
 
 
19
Copyright (c) IARIA, 2013.     ISBN:  978-1-61208-251-6
GEOProcessing 2013 : The Fifth International Conference on Advanced Geographic Information Systems, Applications, and Services

