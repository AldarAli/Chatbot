Ultra Low Power Consumption Magnetic Microsystem for IoT Applications 
 
Janez Trontelj, Damjan Berƒçan, Aleksander Se≈°ek  
Laboratory for Microelectronics 
Faculty of Electrical Engineering, University of Ljubljana 
Tr≈æa≈°ka cesta 25, 1000 Ljubljana, Slovenia 
e-mail: janez.trontelj@fe.uni-lj.si, damjan.bercan@fe.uni-lj.si, aleksander.sesek@fe.uni-lj.si 
 
Abstract‚Äî Smart sensor applications have recently grown at an 
unprecedented pace. The possibility of monitoring specific 
situations is further increased by applying Internet of Things 
(IoT) technology. Many key advances have been triggered by 
sensors improvements such as extended compatibilities and by 
the use of wireless communication. This also calls for a battery 
operation. Ideally, a battery operated sensor should be capable 
of operating for a minimum of 5 years without battery 
replacement. At the same time, it should be capable of 
communicating at the required predefined time or on a 
particular event. If more and more sensor functions are 
requested, the challenge is how to realize the sensor device to 
optimize different requirements regardless of the operation 
timing of the sensors, their current consumption and wireless 
communication demands. The presented paper is an attempt to 
provide 
some 
solutions 
for 
the 
optimization 
of 
the 
cost/performance ratio of a magnetic microsystem sensor 
designed using the 0.35¬µm Complementary Metal Oxide 
Semiconductor (CMOS) technology. 
Keywords-ultra 
low 
power 
consumption; 
magnetic 
microsystem; IoT applications. 
I. 
 INTRODUCTION 
In this paper, a magnetic microsystem for various 
applications is presented. It includes two spatially positioned 
integrated magnetic sensors [1], which can provide a variety 
of information of the permanent magnet position relative to 
the microsystem position by signal processing of both sensor 
outputs [2]. The integrated circuits and permanent magnets are 
shown in Figures 1 and 2 as an example of linear and angular 
movement. 
The cost effectiveness of different integrated or discrete 
magnetic sensors i.e. the standard integrated Hall element, 
Anisotropic 
Magnetoresistance 
(AMR) 
and 
Tunnel 
Magnetoresistance (TMR), including the required signal 
processing, has been analysed. The main finding was that the 
highest performance/cost is achieved by using a six terminal 
Hall sensor array, which has been introduced in 1995 [4] and 
comprises the on board integrated microcoil for internal 
generation of the magnetic field. 
The rest of the paper is structured as follows. In Section 2, 
we describe the idea of minimizing the current consumption 
of the Hall element. In Section 3, we present the microsystem 
and its design. Finally, we summarize the paper in Section 4. 
II. 
SENSOR CURRENT CONSUMPTION MINIMIZATION 
The Hall element sensitivity is directly proportional to the 
bias current of the Hall element; therefore, its high sensitivity 
brings the main drawback of the Hall element, which is large 
power consumption [3]. Most of our microsystem 
applications target a slow variation of the measured magnetic 
field. Therefore, the average current consumption should be 
below ¬µA, when the Hall element bias current is several mA. 
The refresh rate of the signal should be up to 10Hz. These 
figures call for measurement duty cycle down to 10-4 or 0.1%. 
The full measurement cycle should only take a few 
microseconds. Fortunately, the bandwidth of Hall element is 
not a limiting factor in this case, however the signal 
 
 
Figure 2. Permanent magnet angular movement. 
 
 
Figure 1. Permanent magnet linear movement.  
 
Figure 3. Magnetic microsystem. 
136
Copyright (c) IARIA, 2018.     ISBN:  978-1-61208-660-6
SENSORDEVICES 2018 : The Ninth International Conference on Sensor Device Technologies and Applications

processing circuitry should be fast, which results in higher 
power consumption. 
III. 
MICROSYSTEM SYSTEM DESIGN 
The magnetic microsystem is shown in Figure 3 with 
permanent magnet, which is attached to the valve. The valve 
is not shown in Figure 3. The sensors indicate the position of 
the valve and returns Œ± as tan-1, where Œ± is the rotation angle 
of the magnet. The electronic circuit is placed on top of a 
battery holder, which contains 300mAh 3V lithium coin cell 
battery. 
The block diagram of the Application Specific Integrated 
Circuit (ASIC) is shown in Figure 4 with external wireless 
communication module. It consists of extremely low current 
consumption timer, Hall element sensors and associated 
circuitry, signal processing unit, digital signal processing and 
data memory. The strategy for current consumption 
optimization is the following. 
The circuit is divided into two parts. The part which needs 
to be connected to the battery constantly and the part which 
can be switched on only a fraction of the time to perform the 
sensing function and the send and receive function. The part 
of the circuit which is constantly connected to power supply 
is further divided into the static part and to the dynamic part.  
The static part consists of the logic where only leakage 
current of the parasitic diodes exists. This current accounts 
for only a small part of the power supply losses of the system, 
however, special care was taken to minimize the drain area of 
those nodes. 
The dynamic part of the circuit is the main consumer of the 
supply current. The dynamic current consumption is the sum 
of the switching current and charging and discharging 
parasitic capacitance. The dynamic current consumption is 
given by (1): 
 
 
ùêº = ‡∑ç ùëê‡Øú
‡Ø°
‡Øú‡≠Ä‡¨µ
ùëâ‡Øó‡Øó
‡¨∂ ‚àô ùëì‡Ø¶, 
(1) 
 
where ci is parasitic capacitance of nodes, n is the number of 
nodes, Vdd is a power supply voltage and fS is the switching 
frequency. 
To minimize this dynamic consumption, the layout 
minimization of node capacitance has been carried out. 
In addition, the oscillation frequency has been reduced for 
further optimization of the current consumption. A large 
current loss originates also in the cross conducting during the 
 
Figure 4. Block diagram of the proposed system. 
 
 
Figure 5. Special low cross-conducting current inverter invbia. 
137
Copyright (c) IARIA, 2018.     ISBN:  978-1-61208-660-6
SENSORDEVICES 2018 : The Ninth International Conference on Sensor Device Technologies and Applications

slow switching of the logic gates and inverters. Therefore, a 
special inverter invbia we designed for the timer section, 
shown in Figure 5, to control the cross conduction current. It 
consists of a current switching approach for the inverters with 
limited current to only 50nA. Bp and bn voltages control 
transistors m1 and m4. In and Out represent the input and 
output of the special inverter. Vddd and vssd are power supply 
connections. M represents the transistor size multiplication 
factor. With this approach, the average current consumption 
of the dynamic part of the circuit has been reduced to less 
than 100nA. 
Figure 6 presents a schematic of the timer, which contains 
the already presented special inverter invbia, Schmitt trigger 
Schmitt, D flip-flops ff3 and inverters inv3 and inv3b. As the 
resulting capacitance of the parallel connected capacitors c1 
and c2 is quite large (this means only a few Hz refresh rate), 
an additional test pin test1 with pull-up resistor is added. This 
pin can be used (connected to ground) to speed up the ASIC 
for testing purposes. In this block, additional six D flip-flops 
are used in series to scale down the frequency of the timer by 
64 to achieve the requested refresh rate. The con pin is used 
only for the simulation test to set the initial condition. The pin 
out represents an output of the timer. Vddd and vssd are 
power supply connections. Transistors m1, m3 and m4 
represent P type of MOS transistors and m2, m5, m6 and m7 
represent N type of MOS transistors. Resistor r3 is a pull up 
resistor, which connects the gate of transistor m7 to the vddd. 
As most appropriate, the Resistor-Capacitor (RC) type of 
the oscillator has been selected. To further minimize the 
current consumption, the large portion of the ASIC area is 
occupied by integrated resistor r2 and capacitor c1. Figure 7 
presents the layout of the presented ASIC. 
As the wireless communication unit used in the system 
consumes the largest amount of power when transmitting or 
a bit lower even when the unit is hibernating or in sleep mode, 
the power consumption of this unit should also be optimized. 
To minimize the communication unit power consumption, 
the system turns on the wireless communication only at the 
maximal required time period, if there is no magnet position 
change. If there is a change in position, the data is sent out as 
frequently as specified by the application. Our main targeted 
application requires measurement refresh rate up to 10 per 
second and the average position change is a few times per 
day.  
In the ASIC, the constantly measured current position is 
compared with the last sent data. The transmitter is turned on 
according to the result of the comparison, therefore a small  
button type battery provides enough energy to achieve a long 
life operation of the presented system of over 5 years.  
 The ASIC is now under evaluation and the measured data 
are summarized in Table 1. Measurements were done at 3V 
power supply and 25¬∞C. 
 
 
Figure 6. Timer schematic diagram. 
 
 
Figure 7. Layout of the ASIC. 
TABLE I.  
MEASUREMENT RESULTS 
Function 
Simulated 
Measured 
Units 
Current consumption 
305 
330 
nA 
Current consumption 
at measurement 
4.9 
4.8 
mA 
Sensitivity 
180 
200 
mV/mT 
Magnetic field angle 
resolution 
6.4 
6.5 
Deg 
 
138
Copyright (c) IARIA, 2018.     ISBN:  978-1-61208-660-6
SENSORDEVICES 2018 : The Ninth International Conference on Sensor Device Technologies and Applications

IV. 
CONCLUSIONS 
A developed magnetic microsystem has been presented 
and some solutions on how to reduce system power 
consumption were provided in the paper. The main effort of 
the design was to achieve average current consumption in the 
range of ¬µA and retain the measurement cycle of magnet 
position in the range of microseconds. As the required position 
data refresh rate, which is transmitted to the main receiver 
unit, depends on the certain change of the permanent magnet 
position, and the position is changed only several times daily, 
the total power consumption could be kept low enough to 
obtain the long lifetime operation, using a standard button-
kind battery.  
REFERENCES 
[1] A. Sesek and J. Trontelj, ‚ÄúMagnetic microsystem with extended 
dynamic range and absolute accuracy,‚Äù ICECS 2008, The 15th 
IEEE International Conference on Electronics, Circuits and 
Systems, August 31 - September 3, 2008, The Westin 
Dragonara Resort, Malta, pp. 882-885, 2008. 
[2] J. Trontelj. ‚ÄúA magnetic microsystem on a chip,‚Äù AASRI 2014, 
Conference on Sports Engineering and Computer Science, 
Amsterdam, vol. 8, pp. 93-99, 2014, ISSN 2212-6724. 
[3] E. Ramsden, ‚ÄúHall-Effect Sensors,‚Äù Theory and Application, 
Newnes, pp. 272, 2006. 
[4] J. Trontelj, R. Opara and A. Pletersek, ‚ÄúIntegrirano vezje z 
magnetnim senzorjem (Integrateted circuit with magnetic 
sensor)‚Äù, patent no. SI 9300622 A, Ljubljana, 1995. 
139
Copyright (c) IARIA, 2018.     ISBN:  978-1-61208-660-6
SENSORDEVICES 2018 : The Ninth International Conference on Sensor Device Technologies and Applications

