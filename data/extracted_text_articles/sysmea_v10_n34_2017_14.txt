Improved Distribution of Locally Sourced Energy in Smart Grids
During Brownouts and in Times of Energy Scarcity
Rolf Egert, Florian Volk, J¨org Daubert, Max M¨uhlh¨auser,
Telecooperation Lab
Technische Universit¨at Darmstadt,
Email: {egert,volk,daubert,max}@tk.tu-darmstadt.de
Abstract—Brown-out situations are cases of electricity distribu-
tion in which demand exceeds production and transportation
capabilities. In contrast to black-outs, energy is available to
some extent, but not enough to meet the demand of all con-
sumers. Traditionally, centrally organized power grids with large
production capabilities on the one end of the distribution grid
and only consumers on the other end are struggling to cope
with brown-out situations. In order to achieve a somewhat fair
distribution of the available energy, street busses are supplied
in a round-robin-like distribution scheme. For that, some streets
busses are supplied with energy, while others encounter local
black-outs. Due to the round-robin-like scheme, all consumers
receive some energy eventually. Modern, ICT-enhanced ”smart
grids”, which also include small and local production capabilities
(often-times renewable energy sources like photovoltaic) provide
new means of addressing brown-outs. In this paper, we evolve the
current round-robin-like scheme further to take the properties
of smart grids into account. This affects the fairness of energy
distribution, but—in total—increases the amount of supplied
consumers. Extensive simulations that are based on real-world
street busses of the German electrical grid are conducted. These
simulations are conducted with our smart grid simulation tool
HOLEG and they indicate improved supply rates during brown-
outs, even in the presence of volatile local energy production. We
extend our model to a hierarchical scheme, spanning from the
distribution grid down to household items, for which we imagine
ﬁne-grained control capabilities in the future smart grid.
Keywords–Smart Grid;Micro Gird; Demand and Response;
Fairness; Electrical Grid; Optimization.
I.
INTRODUCTION
This work is an extension of the authors previous work,
Mitigating Brown-Outs: Fair Distribution of Locally Sourced
Energy in Smart Grids [1].
The current electrical grid is already undergoing a change,
which will accelerate even more in the future. Nowadays, the
production architecture is based on large nuclear- and fossil-
fuelled producers, which are located centrally in the grid.
This concept will turn into an architecture that uses local and
distributed energy resources (DER) in addition to a reduced
number of central producers. DERs are based on renewable
energy sources, amongst those, the most established ones are
solar- and wind-energy. However, this increasing amount of
DERs in the electricity production introduces several new
problems for the electrical grid. For instance, the ﬂow of
electricity can become bidirectional, if the production of the
DERs is high [2], which can cause problems in the network
infrastructure. Furthermore, in contrast to the fossil-fuelled
producers, the production of DERs is dependent on environ-
mental circumstances like the wind and weather conditions.
This connection renders the electricity production of the DERs
highly ﬂuctuating and thus, difﬁcult to plan for [3]. This
unpredictable behaviour in combination with the increased
number of producers and consumers that take part in the net-
work, makes it impossible for human operators to control the
future grid. Therefore, the establishment of an information and
communication infrastructure (ICT) that provides monitoring
and control capabilities becomes mandatory. If such a system
is integrated into the electrical grid, the concept of a smart
grid (SG) emerges.
A big step into the direction of increasing the share of rene-
wable resources in the production of electricity was conducted
recently in Germany. There, the Renewable Energy Sources Act
(EEG) [4] was passed. This act states that, until the year 2025,
Germany must generate 40%-45% of the electricity demand by
renewable energy sources like solar panels, wind turbines and
biomass power plants.
These changes, which the electrical grid is facing in terms of
infrastructure, do not ﬁt to the rules and network policies for
maintaining controlled operation that are currently in use. A
response to these changes, by adapting and establishing new
policies and rules according to the new situation, is necessary.
A subproblem concerning the outdated rules and policies, and
the main focus of this work, is the demand and response
(D&R) behaviour of the electrical grid in brown-out scenarios.
An energy grid enters a brown-out state if the production capa-
bilities do not sufﬁce to supply the demand of all consumers in
the network. This also holds for the black-out scenario; howe-
ver, the complete absence of electricity introduces additional
difﬁculties, like frequency synchronization. The black-out state
is a problem that needs to be addressed separately and is not
part of this work.
The German state of the art procedure to cope with the
problem of D&R in a brown-out scenario works as follows: If
a brown-out state has been entered and cannot be solved by
backup power plants or other emergency electricity sources, the
network is logically divided into (preferred equally consuming)
subnets. Each of these subnets has to be separable and re-
connectible to the grid, such that these are allowed to either
consume electricity or not. Subsequently, one after another
of these subnets is separated from the grid in a round-
robin like manner. After each separation of a subnet, the
current network stability is measured. If the network has
stabilized, the currently active consumers will be supplied
for a certain amount of time and a plan is generated that
schedules the connected and disconnected time intervals for
all subnets in the network. In case the network does not
stabilize, additional subnets are disconnected until a demand
and supply equilibrium is reached. The round-robin approach
guarantees fairness in the brown-out-scenario. This is done
234
International Journal on Advances in Systems and Measurements, vol 10 no 3 & 4, year 2017, http://www.iariajournals.org/systems_and_measurements/
2017, © Copyright by authors, Published under agreement with IARIA - www.iaria.org

by only allowing to disconnect the same subnet for a second
time, after all other subnets have been disconnected at least
once. In the very end, this method guarantees that each subnet
is supplied, as well as disconnected for the same amount of
time. Note that the very last round of the disconnection process
(which is the round directly before the brown-out situation is
resolved) might change the equality of supplied time for the
latest supplied groups. However, this will be taken into account
in case of further brown-out cases, such that consumers with
lower supplied time during the last incident will be preferred
next time.
However, the procedure has one major ﬂaw that renders it
not suitable for the future changes in the electrical grid. The
currently used method does not take the production capabilities
of the subnets into account, but enforces equal supplied times
for each consumer by deactivating the subnets in a round-robin
based manner. However, this also means that the production
capabilities, in terms of DERs, which are located in these
subnets are deactivated and can therefore not contribute to mi-
tigate problems in the brown-out state. Therefore, this attempt
might even promote further destabilization of the network
if the prosumers are capable of producing high amounts of
electricity, but are simply dismissed by disconnecting them
from the grid. To face these challenges of the future energy
grid it is important to develop new rules and policies that adapt
to the necessities of these future changes. Additionally, with
the introduction of ICT and DERs, novel algorithms need to
be developed for controlling the new electrical infrastructure
and providing fair electricity distribution.
This work is an extension of our previous work [1]. We extend
this work in Section III, where a formal model for representing
grid levels in an undersupplied state is introduced and a
novel fairness metric is described. This model is extended to
recursively represent all abstraction levels from micro grids
down to individual components in each single house. However,
there is no general deﬁnition of fairness. As of this, our fairness
deﬁnition focuses on the following two optimization goals: on
the one hand, to provide equal supplied times for all consumers
and, on the other hand, to maximize the number of supplied
subnets in the grid. Additionally, a time-discrete simulation
environment for modelling and testing simpliﬁed smart grids
(HOLEG) is introduced in Section V. Moreover, HOLEG is
used in Section VI to conduct the simulation of an exemplary
electrical test network and to evaluate the modelled network.
As a use case, a recursively deﬁned model of an low-voltage
electrical distribution network is implemented in the HOLEG
simulation environment. To be more precise, without loss of
generality, each modelled abstraction level encompasses ﬁve
prosumers from the next lower recursive level. In this work,
all four introduced levels are modelled using real measurement
data for the consumption and production behaviour of the
prosumers. Additionally, the network is only provided with a
limited amount of electricity to represent a brown-out scenario.
The remainder of this work is organized as follows. In
Section II, an overview over scenarios in the domain of the
electrical grid is provided, where fairness is an important
goal. In Section IV, fair electricity distribution algorithms are
presented. Followed by the paper conclusion of this work in
Section VII.
II.
RELATED WORK
Fairness is a term discussed in many ﬁelds, most pro-
minently in economics [5] and psychology [6]. However,
fairness also became an important criterion in application
of information technology [7] and especially in the area of
scheduling algorithms [8] and resource allocation [9]. In this
Section, a selection of work is presented that is concerned with
the deﬁnitions and ﬁelds of application in the SG scenario. One
of the most popular ﬁelds for applying fairness in the domain
of SGs is the area of dynamic demand and response, where de-
mand is dynamically adapted according to different strategies
or algorithms to reach certain optimization goals. The approach
of [10] uses a daily consumption schedule for the consumers
in the network. The loads in this schedule are divided into two
categories, namely ﬁxed- and ﬂexible-loads, where the latter
can be moved within the schedule. In this work, consumers
try to reduce their electricity bill by scheduling their ﬂexible
loads in such a way that the overall production cost for
energy in the network is reduced. Hereby, fairness is achieved
by charging users for electricity based on their contribution
to minimize the production costs in the network. In [11],
dynamic demand and response management is discussed in
the environment of smart objects that can be activated and
deactivated dynamically. In this scenario, fairness is introduced
by using different scheduling approaches like round-robin or
by assigning priorities for scheduling algorithms. The authors
of [12] discuss fairness in the sense of a trade-off between
the maximization of a consumers utility function (level of
satisfaction dependant on the electricity consumption) and
the minimization of production costs imposed to the energy
provider. Another approach that deﬁnes the fairness of an
algorithm as a matter of consumer satisfaction is presented
in [13]. Hereby, the difference in starting time of so-called
soft loads is used as a metric. A slightly different fairness
notion is used by the authors of [14]; they present a day-ahead
energy resource scheduling algorithm using DERs and Vehicle-
to-Grid (V2G). To prevent unnecessary battery deterioration
of the vehicles, the authors establish pricing levels, which are
dependent on the power level of the batteries, to establish a
fair remuneration scheme.
Another ﬁeld of application is the planning of SG commu-
nication networks. The authors of [15] use equal quality of
service as a fairness metric in their approach of planning
wireless mesh neighbourhood area networks (NANs). They
discuss fair placement of gateways to ensure an equal number
of participants to be covered by each gateway.
Although there is a lot of ongoing work that uses fairness
metrics in the SG scenario, the considered scenarios are mainly
based on cases of normal operation. In contrast, this work
considers the state of the art fairness metric and presents
its drawbacks in the SG domain. Moreover, the presented
algorithm aims to maximize the use of DERs, while simulta-
neously maintaining fairness of electricity distribution among
consumers.
III.
RECURSIVE SYSTEM MODEL DEFINITION
In this section, the extended model that is used for the
conducted simulations is described in detail. First, the four
different recursive levels, Micro-Grid, Street, House and In-
House are introduced. Recursive in this sense means that
starting from the Micro-Grid level, each lower level is part
235
International Journal on Advances in Systems and Measurements, vol 10 no 3 & 4, year 2017, http://www.iariajournals.org/systems_and_measurements/
2017, © Copyright by authors, Published under agreement with IARIA - www.iaria.org

of the previous one (e.g., each micro grid can contain an
arbitrary number of streets). Figure 1 shows an overview of the
general recursive structure of the system model. For all levels,
a general description is provided. Second, a formal deﬁnition
of the model constraints and assumptions is given. Finally, the
section concludes with the presentation of the fairness notion
used in this work.
A. Micro-Grid Level
The ﬁrst level is the Micro-Grid level, which is concerned
with individual micro grids that are inter-connected via the
transmission grid. In this work, the micro grids are considered
to encompass residential areas. Those can be, for instance,
larger residential areas in cities that have a connection via
an adjustable transformer to the transmission grid. This trans-
former is responsible for managing the incoming electricity
from the transmission grid as well as the outgoing electricity
provided by the micro grids. Moreover, the transformer has
the ability to connect or separate each individual micro grid
from the transmission grid, and thus, control consumption
and production behaviour by allowing or declining participa-
tion in the electricity distribution. More formally, the micro
grid level can be deﬁned as a set of micro grids MG =
{mg0, . . . , mgn}, n ∈ N
Figure 1. General structure of the model and the individual recursive levels
Each micro grid mgi has an overall consumption and
production. Those values are measured at the transformer
that connects the micro grids to the transmission grid. The
overall consumption is, in general, the overall sum of all the
loads provided by the consumers located in the micro grids
and similarly the overall production represents the sum of
the production of all producers in the micro grid. Note that
all elements in this model are prosumers, which can switch
between being a consumer or a producer at different points
in time. A producer or a consumer at this abstraction level is
represented as a street bus and is explained in the following
in more detail.
B. Street Bus Level
The street bus level represents the second abstraction level
in our model and can be represented as a set of street busses
ST = {st0, . . . , stm}, m ∈ N. The set ST represents the
street busses that are connected via an adjustable transformer
to form a micro grid mg. Each individual street bus again
has an overall consumption and production that is deﬁned as
the sum of all loads or production capabilities of the houses
that are located in the street busses. The adjustable transformer
allows to measure the ingoing and outgoing electricity of the
individual busses and, additionally, can disconnect and connect
busses to control their participation in electricity distribution.
C. House Level
The third abstraction level is described as the house level.
On this level, it is assumed that novel technology like Smart
Meter Gateways introduce the capabilities to control individual
houses, which are connected to the distribution grid. Let H be
a set of houses H = {h0, . . . , hk}, k ∈ N that are contained
in a single street bus st. The overall load and production of a
house h is the sum of all loads and producers that are located
in the house. For instance, loads can be devices like fridges and
TVs and producers can be locally installed solar panels. Each
individual house, again, can be connected and disconnected to
control it’s participation in the electrical grid.
D. In-House Level
The last abstraction level is concerned with the distribution
of electricity to prosumers that are encompassed in a house
level prosumer. For instance, this can be all prosumers in a
normal house in a city or all the prosumers contained in a
building of a factory. Let AP be a set of atomic prosumers
AP = {ap0, . . . , apl}, l ∈ N, where atomic indicates that
these producers can not be further divided into lower level
prosumers. It is assumed that the Smart Meter Gateway allows
a user to connect and disconnect prosumers to supply them
with electricity. Note that this domain is currently signiﬁcantly
different from the previous abstraction levels, because the
responsibility of the domain belongs to the house owner and
not to the electricity provider. A user would have to adapt
to the changes that happen on previous abstraction levels to
contribute in the mitigation of system problems. The reason
for this is that the energy providers are not allowed, or can
not inﬂuence what a user is doing in his environment and they
are not permitted to control the consumption or production
behaviour of any components in the house from the outside.
E. Model Constraints and Assumptions
In this section, the constraints and assumptions that are
required to deﬁne the recursive model used in this work are
presented in more detail. First, information about the modelled
prosumers as well as load and production calculation over
time is provided. Second, the a formal deﬁnition of a brown-
out state is presented. Finally, the novel fairness notion is
introduced.
Let cons(·, ·) and prod(·, ·) be functions that take as an
input a prosumer x ∈ Y and a timestep t, where Y
∈
{MG, ST, H, AP} and t is taken from the interval [0, . . . , T −
1]. The output of cons(x, t) returns the overall load of the
prosumer x at the point in time t and the output of prod(x, t)
is the overall production. As long as the prosumer is not
236
International Journal on Advances in Systems and Measurements, vol 10 no 3 & 4, year 2017, http://www.iariajournals.org/systems_and_measurements/
2017, © Copyright by authors, Published under agreement with IARIA - www.iaria.org

an atomic prosumer, the functions recursively sum up the
production or consumption of the next lower recursive level.
Without loss of generality it will be assumed for the remainder
of the paper that the granularity of the time interval is based
on the hours of the day, such that T = 24. Any other time
interval would be suitable too; especially smaller ones, when
taking into account the volatile nature of SGs that include
renewable energy sources like photovoltaic and wind power.
More formally, those functions are described as follows:
prod(x, t) :=
( Pn
j=0
R t+1
t
prod(y, t)dt
ifx /∈ AP
R t+1
t
prod(x, t)dt
else
(1)
cons(x, t) :=
( Pn
j=0
R t+1
t
cons(y, t)dt
ifx /∈ AP
R t+1
t
cons(x, t)dt
else
(2)
Where n is the number of prosumers y of the next recursive
level that are contained in x. Note that these functions are
recursively deﬁned to calculate their output based on the result
of the next recursive level. The recursive process stops at
the in-house level, where the prosumers are atomic and the
production or consumption of an prosumer can not be based
on another recursive sum, but is directly represented as the
measured amount of produced or consumed electricity in this
timestep.
At every point in time t in a day, a prosumer can be either a
consumer or a producer. Let all consumers be represented as a
set C and the producers likewise as a set P. A prosumer x is a
consumer x ∈ C, if its consumption of electricity is higher than
the production provided by its next recursive level prosumers.
Whereas, a prosumer is a producer x ∈ P if the electricity
provided by its next recursive level prosumers exceeds the local
consumption. A more formal representation of these relations
can be expressed as follows:
∀x ∈ Y {x ∈ C | cons(x, t) > prod(x, t)}
(3)
∀x ∈ Y {x ∈ P | cons(x, t) ≤ prod(x, t)
(4)
Where Y ∈ {MG, ST, H, AP} deﬁnes the recursive level for
the calculation of production and consumption. Note that this
assignment to a set of producers and consumers is used later
in the fairness notion used for the conducted simulations.
In the following, a formal deﬁnition for an undersupplied
state (brown-out) is provided. At each point in time, a prosu-
mer can either be a consumer or a producer. In case it is part of
the set of consumers, it requires more energy than it produces
itself; and thus, it needs additional electricity delivered by the
previous recursive level. Note that in this work the recursive
model starts with micro grids as the ﬁrst level that is connected
to the transmission grid via an adjustable transformer. For the
micro grid level the preceding level is simply referred to as the
main grid. In the case that a prosumer is part of the producer
set, the prosumer provides energy to its preceding level.
The general electrical supply situation is considered to
represent a brown-out scenario. In this scenario it is assumed
that the grid is not able to provide enough electricity to fully
supply all prosumers that are connected to the transmission
grid simultaneously. Moreover, the electrical grid is in a brown-
out state, if a single point in time during the day exists, where
the electricity provided by the grid is not sufﬁcient to cover
the overall demand of the grid at the same time.
The formal deﬁnition of a brown-out state is as follows:
∃t 0 ≤ t < T prodMain(t) <
n
X
i=0
cons(x, t)
(5)
Where prodMain(t) represents the amount of electricity the
main grid can provide for supplying the prosumers located in
the microgrids. Additionally, it is necessary to distinguish the
brown-out scenario from the black-out scenario. In contrast
to the brown-out state, where the grid is partially supplied,
none of the elements of the grid is supplied in a black-out
scenario. Without loss of generality, this work focuses on an
undersupplied state that is critical (brown-out), but not fatal
(black-out) for the grid. In particular, this means that the
amount of energy provided by the main grid should at least
cover the demand of some of the prosumers located in grid.
The assumption for the minimal amount of supply provided
by the main grid is that the amount needs to be sufﬁcient to
cover the demand of the largest prosumer in the network. A
formal deﬁnition can be as follows:
∀t 0 ≤ t < T prodMain(t) ≥ max{cons(x, t)|x ∈ C}
(6)
This deﬁnition guarantees that, for each point in time, the
main grid provides enough energy to supply a single prosumer
in the grid. Without this assumption we may have situations
where the electricity is not enough to supply a single prosumer.
However, this represents a black-out-state in our model, and
is not part of the current work. In addition to the electricity
that is provided by the main grid to supply the micro grids,
the prosumers in the model may be producers and provide
additional electricity for the grid. Note that a prosumer is a
producer, if it generates more electricity than it consumes.
This can happen if, for instance, a part of the grid contains
a high number of DERs like solar panels, wind turbines and
similar, as well as batteries and alike. Thereby, solar panels and
wind turbines are inherently volatile in availability and power
output, while the availability of batteries and other energy
storage systems is much easier to plan. In this paper, without
loss of generality, we simulate local energy production with
solar panels. If a prosumer at any of the recursive levels of
the model is supplied, it’s DERs are active and contribute to
the amount of electricity in the grid. However, if a prosumer
is not supplied, the corresponding DERs are deactivated and
neither produce nor consume electricity. To successfully supply
a prosumer x at time t it is sufﬁcient to provide the amount
of electricity, such that the sum of the production of the
local DERs in addition to the electricity provided by the main
grid equals the consumption of the prosumer. A more formal
deﬁnition can be as follows:
cons(x, t) ≤ prodMain(t) + prod(x, t)
(7)
The function prodMain(t) hereby represents the amount of
energy that is centrally provided by the main grid. Changes of
state, like from being supplied to being unsupplied or changing
from being a consumer to being a producer, can be performed
instantly in the digital representation of a system. However,
237
International Journal on Advances in Systems and Measurements, vol 10 no 3 & 4, year 2017, http://www.iariajournals.org/systems_and_measurements/
2017, © Copyright by authors, Published under agreement with IARIA - www.iaria.org

the physical system consists of electrical and mechanical
components that have time constraints for changing their state
(e.g., electrical switches). To consider these constraints in the
discrete simulation model, it is assumed that after a change
of status has happened, this new status is kept for one timestep.
To evaluate the fairness in the described model, in the
following a new fairness notion is proposed. The currently
used metric, which is based on equal supplied time, is not
optimal anymore in the presence of future technological chan-
ges in the domain of the electricity grid. The transition from
centralized to distributed production changes the way how
the presence of prosumers inﬂuences the performance of the
network. However, DERs can only contribute to the system
if the corresponding prosumer (e.g., the street where solar
panels are connected to the grid), where they are located, is
connected to the network. One part of the novel fairness notion
is based on the assumption that strategies, which maximize the
use of DERs, are able to supply more prosumers than other
strategies. To represent this in the fairness notion, the average
number of supplied prosumers is used as a parameter. This
also includes those prosumers that act as producers at speciﬁc
points in time due to high electricity production by DERs. In
particular, prosumers that are able to sustain themselves are
considered to be supplied, even if they supplied themselves
and are not depending on external electricity. Furthermore,
to include the fairness of handling the consumers, the sum
of differences between the supplied time of all consumers is
calculated. Therefore, the fairness assumption extended in this
metric is again based on the equality of overall supplied time
of all consumers. If an algorithm can supply a large number of
prosumers, while minimizing the differences in the number of
timesteps, in which consumers are supplied, the fairness metric
is maximized. To achieve maximum performance of the DERs,
prosumers that are producers are not taken into account in the
supplied time difference calculation. This is due to the beneﬁt
the network gets in terms of produced surplus electricity; and
thus, producers are allowed to stay connected. A more formal
description of the fairness metric is as follows:
∀i, j ∈ C f = max avg#ofsuppliedprosumers
1 + P
i,j∈C |tsup,i − tsup,j|
(8)
where tsup,i represents the number of supplied timesteps for
consumer i ∈ C.
IV.
DESCRIPTION OF (FAIR) ALGORITHMS
In this section, several algorithms that aim to solve the re-
source allocation problem for the undersupplied state scenario,
are presented. First, a slightly adapted version of the round-
robin based approach, which is used in the German electrical
grid, is introduced. Second, an iterative algorithm, which does
not aim to provide equal supplied times for the prosumers,
but indirectly prefers small consumers, is described. Finally,
an algorithm that aims to maximize the use of DERs and,
additionally, equalises the number of supplied time for each
prosumer, is presented.
A. TRR - Traditional Round-Robin
This algorithm is a slightly extended version of the mecha-
nism currently used in the German electrical grid. The Tradi-
tional Round-Robin algorithm, which is shown in Figure 2
procedure TRR(production, timestep, prosumers)
for i ← prosumers.length() do
prosumer ← getLowestUptime(prosumers);
if prosumer == null then
break;
else
if isSupplyable(prosumer) then
markAsActive(prosumer);
end if
end if
end for
return activeProsumers;
end procedure
Figure 2. TRR - Traditional Round-Robin.
works in a round-robin based manner and solves the problem
of fair supply distribution as follows. The algorithm uses a
list of prosumers and the information about the amount of
production that is centrally provided by the main grid or the
previous recursive level, to determine a subset of supplyable
prosumers for the current timestep. Since the algorithm uses
a round-robin approach, it is not allowed to activate a speciﬁc
prosumers for a second time before all other prosumers have
been activated at least once. With this design it is ensured that
each prosumer stays active and inactive for an equal amount
of time. An additional important remark is that this algorithm
does not take the surplus electricity, which is provided by local
DERs, and its inﬂuence on the network into account. To make
this approach comparable with the other algorithms presented
in this work, the round-robin approach was extended such
that surplus electricity production provided by prosumers can
be leveraged to supply additional prosumers in the network.
Note that the in the currently deployed electrical grid the
applicability of the traditional round-robin approach is limited
to the second abstraction level (street bus level) using a
adjustable transformer. However, it is assumed that with further
technical progress this approach will be applicable to the lower
abstraction levels as well.
B. IIA - Improved Iterative Approach
The Improved Iterative Approach (IAA), which is shown
in Figure 3, iteratively selects prosumers from its list and tries
to supply them. In contrast to the original version of TRR
(Figure 2) it takes the production of the DERs located in
the prosumers and uses it for current production calculations.
The algorithm provides a very rudimentary kind of fairness
by indirectly favouring producers and consumers with a very
low demand. The algorithm works as follows: ﬁrst, if there
still remains unused capacity, iteratively choose a prosumer
from the list of prosumers and check if the required demand
can be met. If this is the case, then activate the prosumer and
add the resulting production capabilities of its DERs to the
overall production. If the selected prosumer cannot be supplied
in this timestep mark it as unﬁt. After the algorithm terminates,
it returns a list of all prosumers that will stay active in this
timestep and all remaining prosumers will be deactivated.
C. UEA - Uptime Equalizing Algorithm
The Uptime Equalizing Algorithm (UEA), which is shown
in Figure 4 aims to maximize the use of DERs while maintain-
238
International Journal on Advances in Systems and Measurements, vol 10 no 3 & 4, year 2017, http://www.iariajournals.org/systems_and_measurements/
2017, © Copyright by authors, Published under agreement with IARIA - www.iaria.org

procedure IIA(production, timestep, prosumers)
while consumption < production do
prosumer ← getNextProsumer(prosumers);
if supplyable(prosumer) then
markAsActive(prosumer);
production += prosumer.getProduction();
else
markUnﬁt(prosumer);
if AllProsumersProcessed then
return activeProsumers;
end if
end if
end while
end procedure
Figure 3. IIA - Improved Iterative Algorithm.
procedure UEA(production, timestep, prosumers)
while consumption < production do
for all prosumer ∈ prosumers do
if isSelfSustaining(prosumer) then
markAsActive(prosumer);
production += prosumer.getProduction();
end if
end for
prosumer ← getMinUptimeProsumer(prosumers);
if supplyable(prosumer) then
markAsActive(prosumer);
else
markUnﬁt(prosumer);
end if
if AllProsumersProcessed then
return activeProsumers
end if
end while
end procedure
Figure 4. UEA - Uptime Equalizing Algorithm.
ing equal supplied times for the prosumers. To achieve this,
the algorithm distinguishes in a ﬁrst step between consumers
and producers. To make this distinction the algorithm uses the
deﬁnition provided in Section III-E. Second, all producers are
activated and their local production capabilities are added to
the overall electricity provided by the previous level or the
main grid. This is possible, since the deﬁnition of the brown-
out-scenario states that there is enough centrally produced
electricity to supply least a single individual prosumer. After
the activation of the prosumer, the local DERs are providing
enough energy to fully cover the local demand and thus
make the prosumer self-sustaining. After all the producers are
activated, the algorithm chooses a prosumer that is currently
inactive and has a minimal amount of supplied time. In the
next step, the algorithm checks if the selected prosumer can
be supplied using the currently available production. If this
is the case, the prosumer is activated, otherwise it is marked
as unﬁt. After all prosumers are supplied or marked as unﬁt,
the algorithm returns a list of prosumers that will stay active
during this timestep and all remaining ones will be deactivated.
V.
SIMULATION ENVIRONMENT FOR ALGORITHM
DEVELOPMENT AND EVALUATION
Testing of novel algorithms is a mandatory task to ensure
correct functionality; however, it is also task not easily done in
the domain of electricity distribution. Due to the necessity of
continuous operation, testing can not be done on the currently
deployed electrical grid. Another possibility for conducting
tests is the construction of physical testbeds that represent a
part of the grid. However, those testbeds can become expensive
quite fast and, additionally, only cover a part of the overall grid,
which may neglect cascading effects. A more suitable strategy
for testing novel approaches is modelling and simulating the
environment in a digital manner.
In this section, a simulation environment for energy grids
based on a holar structure is introduced. This simulation
environment, called HOLEG [16], is a previous work of the
authors and allows to model and simulate the behaviour of
a simpliﬁed electrical grid. In particular, HOLEG makes the
following contributions:
•
Simpliﬁed representation of an electrical distribution
grid based on a holar approach.
•
Detailed modelling capabilities for network compo-
nents. It allows to model all types of components
ranging from large producers, to connection lines and
houses, up to individual components like small solar
panels, TVs and alike.
•
It provides an API that allows to develop novel
optimization algorithms using the Java programming
language. Those algorithms can then be run in a time-
discrete fashion in the HOLEG environment.
•
Many plotting capabilities for a diverse set of metrics
for the evaluation of the simulation (see Figure 7)
Figure 5. View of the Micro-Grid level modelled in HOLEG. The power
plant represents the main grid which is connected to a switching node that
connects or disconnects the individual micro grids
In this work the HOLEG simulation tools purpose is
twofold. One of the purposes is the generation of a simpliﬁed
239
International Journal on Advances in Systems and Measurements, vol 10 no 3 & 4, year 2017, http://www.iariajournals.org/systems_and_measurements/
2017, © Copyright by authors, Published under agreement with IARIA - www.iaria.org

environment that allows to model typical components of an
electrical grid in a detailed manner, which can be seen in
Figure 5. Moreover, the individual components of the network
needed to be fully customizable. Figure 6 shows the the in-
house level with the different prosumers displayed in the table
at the top right corner. The graph below allows the user
do deﬁne the consumption or production behaviour of the
component over the total simulation time.
Figure 6. View of the house level modelled in HOLEG. On the right side
the in-house level is displayed as a table of elements contained in the
highlighted house. On the bottom right side, the consumption and production
behaviour can be manipulated by modifying the graph
The more important feature provided by HOLEG is it’s
capability of running optimization algorithms in a time-discrete
fashion during the simulation of the network. In particular, in
each step of the simulation, the algorithm is executed while
being able to access and manipulate all individual components
in the network. The impact of the algorithms decisions can then
be observed in real-time and, additionally, be represented in
metric plots. In this work HOLEG is used to run the different
fair algorithms on an example network and to observe the
effects on the network. The detailed setup for the simulation
is described in the next section.
Figure 7. The statistics view of HOLEG allows a user to track and plot
diverse data about the different prosumers or groups in the network. In this
picture the consumption behaviour of the ﬁve micro grids is presented as the
coloured graphs
VI.
SIMULATION OF THE ALGORITHMS
In this section, the conducted simulation is explained. The
goal of this simulation is to evaluate the performance of the
presented algorithms in a realistic scenario. Moreover, the
simulation aims to evaluate the performance in the presence
of our presented fairness metric. First, the general simulation
setup is introduced. Second, the datasets that are used for de-
mand and supply are described. Third, the simulation execution
and corresponding results are presented. Finally, the results of
the simulation are discussed.
A. Simulation Setup
The complete simulation was conducted using the capabi-
lities provided by the simulation environment HOLEG [16].
HOLEG allows to build large hierarchically structured net-
works. The individual recursive levels can be modelled by
using HOLEGs grouping capabilities to form subnets that hide
the representation details of the underlying subnet. Each of
those subnets then represents a lower hierarchical level in the
model. The complete model, which is explained in Section III
is modelled using HOLEG. More precisely, all four abstraction
levels were implemented and each level encompasses ﬁve
prosumers from the next lower abstraction level (e.g., the ﬁrst
abstraction level contains ﬁve micro grids and each microgrid
contains ﬁve streets). Note that HOLEG is not limited to
this amount of abstraction levels or prosumer numbers, but
can model arbitrary topologies. To generate a more realis-
tic scenario the values for consumption and production are
loaded from external datasets. For this setup, two different
load proﬁles for streets and one production curve of a solar
panel are used. The lower level consumption conﬁguration
was modelled to align with the real data for the street. This
means that the consumption of the devices located in the
houses were adapted to ﬁt the consumption data from the
real measurements. Figure 8 shows HOLEGs capabilities to
model individual load curves for the different devices located
in the houses. For simulating a brown-out scenario, the central
production is derived using (6). This allows that in each step of
the simulation there is enough energy provided by the previous
level to supply at least one prosumer.
Figure 8. HOLEG allows to model arbitrary components located in the
house and conﬁgure their consumption and production behaviour using
individual load/production curves.
240
International Journal on Advances in Systems and Measurements, vol 10 no 3 & 4, year 2017, http://www.iariajournals.org/systems_and_measurements/
2017, © Copyright by authors, Published under agreement with IARIA - www.iaria.org

 
0
5000
10000
15000
20000
25000
0
1
2
3
4
5
6
7
8
9 1 0 1 1 1 2 1 3 1 4 1 5 1 6 1 7 1 8 1 9 2 0 2 1 2 2 2 3
POWER (W)
TIME (H)
LOAD PROFILES OF THE BUSSES
High Demand Bus
Low Demand Bus
Figure 9. Load curves of the high/low demand busses connected to the
adjustable transformer in Saarland (Germany).
1) Load Set: For realistic load data of prosumers in re-
sidential areas, real recordings of an adjustable transformer
are used. The consumption for the lower recursive level was
modelled in such a way that it ﬁt to the overall consumption of
the streets. This transformer is located in Saarland in Germany
and it is connected to several streets containing housing areas.
The real time data was monitored every second and the hourly
average of the data is used for the simulation process. Two
different load sets are used for simulation. One of the sets
was generated by monitoring a larger street and represents a
prosumer with a very high electricity demand, whereas the
second set represents the consumption of a smaller street.
Figure 9 shows the load curves of the street busses for a day.
2) DER Production Set: For modelling realistic production
behaviour, real-world solar panel production data is taken from
Kronberg, Germany. Figure 11 shows the production curve of
the solar panel over a day. The solar panel has a capacity
of 4.51 kWp and the recordings are provided in an hourly
resolution. For the simulation, one of the previously mentioned
solar panels is assigned to the prosumer in the low demand
scenario and three to the in the high demand scenario.
B. Simulation and Results
The simulation consists of 1,000 iterations, where in each
iteration, a new scenario is generated. In each iteration, the
production and consumption values are allowed to randomly
deviate by ±10% from the data set values to induce additional
variation between the busses. During the simulation, each
of the algorithms presented in Section IV is executed and
compared in each run. The active prosumers in each run,
are prosumers that stay online in the current timestep, either,
because they are self-sustaining, or are supplied by the energy
provided by the previous abstraction level. Moreover, the full
simulation process is conducted for both, the high demand set
as well as for the low demand set.
1) Low Demand Bus Results: This section presents the
results for the simulation of the low demand dataset. Figure 12
shows the average results for 1,000 simulation runs with the
data set of the low demand bus. From this set, the consumption
data for the ﬁve street-level prosumers is derived and used for
evaluation. The setup for the street level scenario is displayed
in Figure 10, where exemplary two busses are displayed in
more detail. The green bus is currently connected to the
Figure 10. Representation of the street bus abstraction level in the low
demand scenario modelled in HOLEG. The bottom two street busses are
displayed with extended details to show what lower level prosumers are
located in the streets.
 
0
500
1000
1500
2000
2500
3000
3500
4000
0
1
2
3
4
5
6
7
8
9 10 11 12 13 14 15 16 17 18 19 20 21 22 23
POWER (W)
TIME (H)
SOLAR PANEL PRODUCTION CURVE
Figure 11. Production proﬁle of a 4.51 kWp solar panel located in Kronberg
Germany.
grid and is fully supplied by the electricity provided by the
the higher abstraction level. The second bus, coloured in
red, is disconnected through an open switch and thus, not
supplied. Note that the current consumption (negative value)
or production (positive value) is displayed above the individual
prosumers. Figure 12 shows the average number of supplied
components during the corresponding time of the day for each
of the algorithms.
The graph shows a signiﬁcant performance drop of all al-
gorithms starting from 5am in the morning. While the TRR
algorithm can not really cope with this situation, IAA and UEA
perform better. This is due to the consumption behaviour of the
busses. While the overall production stays the same for TRR,
the demand of the busses increases during the morning until
about 12pm. As this gap grows with each timestep, busses must
be deactivated to keep the consumption below the production
provided by the MG. Most of the time, TRR is only able to
241
International Journal on Advances in Systems and Measurements, vol 10 no 3 & 4, year 2017, http://www.iariajournals.org/systems_and_measurements/
2017, © Copyright by authors, Published under agreement with IARIA - www.iaria.org

 
0
1
2
3
4
5
0
1
2
3
4
5
6
7
8
9 1 0 1 1 1 2 1 3 1 4 1 5 1 6 1 7 1 8 1 9 2 0 2 1 2 2 2 3
NO. OF SUPPLIED BUSSES
HOURS (H)
AVG. NO. OF SUPPLIED BUSSES
TRR
IIA
UEA
Figure 12. Average number of active low demand street busses during a time
interval of 24 hours.
supply between one and two busses while the rest remains
deactivated.
IIA (Figure 3) and UEA (Figure 4) perform equally in this
scenario as shown in Figure 12. Since both algorithms use the
electricity provided by the solar panel located in the busses, the
main difference is the way they choose the next candidate that
should be supplied. IIA iteratively chooses the next element
in its list of busses and its performance thus depends on the
ordering of the busses, whereas UEA performs two steps: ﬁrst,
it activates all prosumers that are real producers in the current
time step to uses their production for supplying additional
busses. Second, it chooses the least supplied element out of
the set of real consumers as a next candidate. The equality in
performance of UEA and IIA, is due to the ratio between the
required supply of the low demand busses and the provided
electricity of the solar panels. The supply for the low demand
bus deviates between 1,000Wh and 2,500Wh. In contrast, the
solar panel is capable of producing 1,500Wh - 3,000Wh of
electricity between 9am and 1pm. With this, the production of
the solar panels highly likely exceeds the consumption of their
individual busses during peak hours and the busses change
from being consumers to being producers. Therefore, most of
the prosumers in the low demand scenario become producers,
and thus, the ordering of the busses for IIA does not inﬂuence
the outcome anymore. Moreover, with the assumption provided
in (6), each individual bus can be supplied and since most of
them are producers, they are self sustaining. If every consumer
becomes a producer, the iterative selection of elements equals
the ﬁrst activation step of UEA. This can be seen in Figure 12
at around 9am where IIA and UEA signiﬁcantly increase the
number of supplied components, as well as in the average
uptime of busses shown in Figure 13. At about 6pm, the
production of the solar panels can be omitted and, therefore,
all algorithms perform equally.
The main difference between the algorithms becomes apparent
if they are evaluated using the introduced fairness metric pre-
sented in (8). As mentioned before, a simple equality approach,
like the one provided by the round-robin algorithm, is not
suitable anymore for future distributed electricity production.
Figure 14 shows the performance of the algorithms with regard
to the fairness metric.
As mentioned in Section III, this metric is based on the average
performance of the algorithms while treating all consumers
 
0
2
4
6
8
10
12
14
TRR
IAA
UEA
HOURS (H)
ALGORITHM
AVG. HOURS OF A BUS BEING SUPPLIED
Figure 13. Total average number of how long busses were active during a
day using the different algorithms in the low demand scenario.
 
0.000
0.500
1.000
1.500
2.000
2.500
3.000
3.500
4.000
TRR
IAA
UEA
METRIC SCORE
ALGORITHM
AVG. SCORE FOR THE FAIRNESS METRIC
Figure 14. Average metric score of the algorithms in the low demand
scenario.
equally. TRR performs quite well, because it is purely based
on a round-robin approach. This minimizes the denominator
of the fraction in the metric. IIA scores a rounded value of
0. In spite of outperforming TRR with regard to the average
supplied time of busses, IIA does not use any techniques to
equalize the supplied times of busses. However, this drastically
increases the sum of differences in the metrics denominator
and thus decreases the metric score. UEA on the one hand
maximizes the use of real producers and, on the other hand,
favours the bus with lowest supplied time. This leads to small
differences between the supplied times, as well as it leads to
a good performance with regard to average hours of supplied
busses.
2) High Demand Bus Result: Figure 15 shows the average
results of 1,000 simulation runs. For providing equal starting
positions for both scenarios, again ﬁve different busses are
derived from the dataset and their values are allowed to deviate
from the original data by ±10%. However, since the demand
of the bus is around ten times as high as the demand of the
low demand scenario, the number of solar panels in each bus
is set to three. If only one solar panel is located in each
bus, they would not be able to inﬂuence the outcome of
the simulation because the maximum production of the solar
panel is signiﬁcantly lower than the demand of a single bus.
Therefore, it is assumed that, in a larger bus in a residential
242
International Journal on Advances in Systems and Measurements, vol 10 no 3 & 4, year 2017, http://www.iariajournals.org/systems_and_measurements/
2017, © Copyright by authors, Published under agreement with IARIA - www.iaria.org

area with a high demand, the number of installed solar panels
is higher than in a low demand area.
 
0
1
2
3
4
5
0
1
2
3
4
5
6
7
8
9 1 0 1 1 1 2 1 3 1 4 1 5 1 6 1 7 1 8 1 9 2 0 2 1 2 2 2 3
NO. OF SUPPLIED ELEMENTS
HOURS (H)
AVG. NO. OF SUPPLIED BUSSES
TRR
IIA
UEA
Figure 15. Average number of active high demand street busses during a
time interval of 24 hours.
Most of the time TRR (Figure 2) is only able to supply between
one and two busses. This is possible due to our assumption
about the centrally provided energy and, additionally, due to
the missing use of the surplus production of the DERs. The two
algorithms that use the production of the DERs again perform
equal in the simulation with regard to the average of supplied
busses. The rapid changes in the performance of algorithms
IIA (Figure 3) and UEA (Figure 4) at 12pm is due to the
demand spike that can be seen in Figure 9 at the same time.
This is a moment, in which the electricity provided by the
DERs simply did not sufﬁce and additional busses had to be
deactivated.
The application of the fairness metric in the high demand
scenario shows similar results as in the low demand scenario.
IIA and UEA perform equal with regard to the average uptime
of the busses, whereas TRR performs worse due to the missing
use of DERs. With regard to the fairness metric, the overall
value decreased due to the smaller number of supplied busses,
but still TRR and UEA perform better than IIA.
VII.
CONCLUSION
The results of this work indicate that, with the introduction
of a widespread monitoring infrastructure and the increasing
installation of DERs in the electricity grid, traditional algo-
rithms and their corresponding deﬁnition of fair electricity
distribution are outdated. Traditional load shedding based on
round-robin selection used in Germany, in case of brown-out
phases, is compared to novel algorithms that use the electricity
provided by local DERs to improve the quality of service.
Therefore, a simulation of an electrical grid in a low-voltage
residential area is conducted.
The presented method, however, is not limited to the low-
voltage scenarios. The current work showed that a recursive
approach that encompasses all different levels of an electrical
grid, ranging from the micro grid level down to the house
level, is feasible. Moreover, further development of smart
meter technologies will even allow to apply the presented
method to in-house appliances and, therefore, provide detailed
regulation capabilities for distributing electricity. This in-house
area however, is a fundamentally different from the other levels
in the electrical grid, since energy providers are not allowed
to connect or disconnect individual components in peoples
homes. Novel ideas and solutions that encourage a user to
actively take part in the development of the future energy grid
are necessary to make the whole potential of this recursive
level accessible for demand and response handling.
As long as real testing of novel applications is restricted
by outdated policies, laws and regulations, novel simulation
techniques can help to understand the behaviour and impact
of novel algorithms and methods in the electrical domain.
The model used in this work was implemented in HOLEG,
a simulation environment that allows to model simpliﬁed
electrical grids.
While this paper had the German regulations in focus, future
work will encompass and compare international laws and
regulations. Our results indicate a lot of optimization potential
in brown-out scenarios when local energy producers can be
leveraged. In future, we intend to further explore this potential,
especially with regards to volatile energy producers and local
balancing of production and consumption, in order to reduce
the inﬂuence of constantly changing energy levels on the
transmission grid.
ACKNOWLEDGMENT
The work in this paper was partially performed in the con-
text of the PolyEnergyNet (PEN) research project and partially
funded by the Germany Federal Ministry for Economic Affairs
and Energy (BMWi) under grant no. “0325737E”.
REFERENCES
[1]
R. Egert, F. Volk, J. Daubert, and M. M¨uhlh¨auser, “Mitigating brown-
outs: Fair distribution of locally sourced energy in smart grids,” in The
Seventh International Conference on Smart Grids, Green Communi-
cations and IT Energy-aware Technologies - ENERGY 2017, IARIA.
IARIA, 2017, pp. 33–39.
[2]
G. Pepermans, J. Driesen, D. Haeseldonckx, R. Belmans, and W. Dha-
eseleer, “Distributed generation: deﬁnition, beneﬁts and issues,” Energy
policy, vol. 33, no. 6, pp. 787–798, 2005.
[3]
N. D. Hatziargyriou and A. S. Meliopoulos, “Distributed energy
sources: Technical challenges,” in Power Engineering Society Winter
Meeting, 2002. IEEE, vol. 2.
IEEE, 2002, pp. 1017–1022.
[4]
“Renewable energy sources act,” https://www.gesetze-im-internet.de/
bundesrecht/eeg 2014/gesamt.pdf, accessed: 2017-02-02.
[5]
A. Falk, E. Fehr, and U. Fischbacher, “Testing theories of fairnessin-
tentions matter,” Games and Economic Behavior, vol. 62, no. 1, pp.
287–303, 2008.
[6]
E. A. Lind, L. Kray, and L. Thompson, “The social construction of
injustice: Fairness judgments in response to own and others’ unfair
treatment by authorities,” Organizational behavior and human decision
processes, vol. 75, no. 1, pp. 1–22, 1998.
[7]
A. Wierzbicki, Trust and Fairness in Open, Distributed Systems, ser.
Studies in Computational Intelligence.
Springer Berlin Heidelberg,
2010.
[8]
M. Zaharia et al., “Delay scheduling: a simple technique for achieving
locality and fairness in cluster scheduling,” in Proceedings of the 5th
European conference on Computer systems. ACM, 2010, pp. 265–278.
[9]
S. K. Baruah, N. K. Cohen, C. G. Plaxton, and D. A. Varvel, “Proportio-
nate progress: A notion of fairness in resource allocation,” Algorithmica,
vol. 15, no. 6, pp. 600–625, 1996.
[10]
Z. Baharlouei, M. Hashemi, H. Narimani, and H. Mohsenian-Rad,
“Achieving optimality and fairness in autonomous demand response:
Benchmarks and billing mechanisms,” IEEE Transactions on Smart
Grid, vol. 4, no. 2, pp. 968–975, 2013.
[11]
G. Koutitas, “Control of ﬂexible smart devices in the smart grid,” IEEE
Transactions on Smart Grid, vol. 3, no. 3, pp. 1333–1343, 2012.
243
International Journal on Advances in Systems and Measurements, vol 10 no 3 & 4, year 2017, http://www.iariajournals.org/systems_and_measurements/
2017, © Copyright by authors, Published under agreement with IARIA - www.iaria.org

[12]
P. Samadi, A.-H. Mohsenian-Rad, R. Schober, V. W. Wong, and
J. Jatskevich, “Optimal real-time pricing algorithm based on utility
maximization for smart grid,” in Smart Grid Communications (Smart-
GridComm), 2010 First IEEE International Conference on.
IEEE,
2010, pp. 415–420.
[13]
M. Shinwari, A. Youssef, and W. Hamouda, “A water-ﬁlling based
scheduling algorithm for the smart grid,” IEEE Transactions on Smart
Grid, vol. 3, no. 2, pp. 710–719, 2012.
[14]
T. Sousa, H. Morais, J. Soares, and Z. Vale, “Day-ahead resource
scheduling in smart grids considering vehicle-to-grid and network
constraints,” Applied Energy, vol. 96, pp. 183–193, 2012.
[15]
F. Ye, Y. Qian, and R. Q. Hu, “Energy efﬁcient self-sustaining wireless
neighborhood area network design for smart grid,” IEEE Transactions
on Smart Grid, vol. 6, no. 1, pp. 220–229, 2015.
[16]
R. Egert, C. G. Cordero, A. Tundis, and M. M¨uhlh¨auser, “Holeg: a
simulator for evaluating resilient energy networks based on the holon
analogy,” in 21st IEEE/ACM International Symposium on Distributed
Simulation and Real Time Applications, ACM/IEEE.
IEEE, 2017.
244
International Journal on Advances in Systems and Measurements, vol 10 no 3 & 4, year 2017, http://www.iariajournals.org/systems_and_measurements/
2017, © Copyright by authors, Published under agreement with IARIA - www.iaria.org

