Generating Market Comments on Stock Price Fluctuations 
Using Technical Analysis Features
Ibuki Sekino 
Major in Computer and Information Sciences 
Graduate School of Science and Engineering, 
Ibaraki University 
email: 21nm734a@vc.ibaraki.ac.jp 
4-12-1, Nakanarusawa, Hitachi, Ibaraki, 316-8511, Japan 
 
Minoru Sasaki 
Dept. of Computer and Information Sciences 
Faculty of Engineering, Ibaraki University 
email: minoru.sasaki.01@vc.ibaraki.ac.jp 
Abstract‚ÄîRecently, there has been significant interest in 
techniques for generating market comments from stock prices 
automatically. However, it takes a multitude of time and effort 
for analysts to generate full-text market comments from stock 
prices. In this paper, we propose a method for generating 
"comments on stock price fluctuations" included in market 
comments to reduce the workload of analysts. The proposed 
method learns stock price fluctuations and the corresponding 
expressions, generates comments, and completes market 
condition comments by assigning them to prepared canned 
sentences. So far, this is the result of our previous study [1], 
and this paper improves the results by adding new features to 
the training data. The new data to be added to the training 
data in this paper are "Dow Jones Industrial Average" and 
"Technical Analysis", both of which are expected to improve 
the results. Because of our experiments, we found that the 
features used to generate them are effective and the proposed 
method can accurately generate market comments. 
 
Keywords-Generate 
market 
comments; 
Stock 
price 
fluctuation; Nikkei Stock Average; Dow Jones Industrial 
Average; Technical Analysis. 
 
I. 
INTRODUCTION 
Recently, there has been an increase in the use of data 
in various fields, such as weather, sports, medicine, and 
finance. However, when the data is large or complex, it is 
difficult for a person without expert knowledge to 
understand it, and even if they are experts, it takes time to 
understand the data and extract the important elements. One 
method to make effective use of such data is data-to-text 
technology. This is a technology that expresses the outline 
of data in text to make it easier for humans to interpret, and 
it has been gaining attention due to its increased demand 
recently. 
The task of generating market comments from stock 
price data, which is the subject of this research, is also a 
type of data-to-text technology. Currently, analysts, who are 
specialists in researching and analyzing social conditions, 
etc., generate market comments. They analyze stock prices 
after they are released and generate market comments. 
However, it takes a multitude of time and effort for analysts 
to generate full-text market comments from stock prices. 
Therefore, in this paper, we propose a method for 
generating a part of the market comment to reduce the effort 
required for analysts to generate market comments. 
Specifically, we extract expressions related to the price 
movements of stock prices and their fluctuation ranges, and 
then generate comments by learning the price movements 
of stock prices and expressions through machine learning. 
By applying the generated comments to the pre-prepared 
format, the system automatically generates the quantitative 
analysis results in the market comment, and as a result, 
analysts can concentrate on their core business, such as 
factor analysis. 
In this paper, we extract various features from the time 
series data and convert them into text based on the task of 
generating market comments on the Nikkei Stock Average. 
First, we form long-term and short-term time series data to 
capture the changes in the time series stock price data. Next, 
we extract 12 important phrases from NQN (Nikkei Quick 
News) so that we can generate an expression in NQN. 
These phrases are frequent occurrences in the first sentence 
of the market comment, and the four main expressions are "
Á∂öËêΩ(continued to decline)", "Á∂ö‰º∏(continued to rise)", "Âèç
Áô∫(rebound)", and "ÂèçËêΩ(reactionary fall)", with "Â§ßÂπÖ
(large)" and "Â∞èÂπÖ(small)" added for 12. Table I shows the 
details of the phrases. By mapping these expressions to the 
price movements of stock prices, we create a single data set 
for learning. 
In our experiments, we used the F-measure to compare 
the phrases generated using the trained data and the phrases 
extracted from the actual handwritten articles, and we could 
confirm that the performance of the proposed method was 
improved compared to the baseline method and those of the 
previous studies. 
So far, this is the result of our previous study [1], and 
this paper improves the results by adding new features to 
the training data. The new data to be added to the training 
83
International Journal on Advances in Intelligent Systems, vol 15 no 3 & 4, year 2022, http://www.iariajournals.org/intelligent_systems/
2022, ¬© Copyright by authors, Published under agreement with IARIA - www.iaria.org

data in this paper are the "Dow Jones Industrial Average" 
and "Technical Analysis." The "Dow Jones Industrial 
Average" is often mentioned in the text of market comments, 
and since most of them are involved in the fluctuation of the 
Nikkei Stock Average, we adopted it as the training data 
because we consider that it improves the accuracy of the 
data. Technical analysis is a type of stock price forecasting 
that has been used recently, and the use of technical analysis 
in stock price forecasting by machine learning is useful in 
studies of the impact of technical analysis on machine 
learning [2]. The difference from using the Dow Jones 
Industrial Average is that two types of stock prices are used, 
and one type of stock price is extracted and used, and the 
accuracy of each type of stock price is checked to see how 
much the accuracy increases compared to the basic one. 
In this paper, as in previous studies, we unified similar 
expressions among those generated to compare the results 
with those of a previous study by Murakami et al. [3]. 
Additionally, sentences that did not require automatic 
generation by the neural network were omitted. In the 
future, we will verify whether there are any changes in the 
experimental results. 
TABLE I. Nikkei Stock average. 
Phrase 
Expression 
Á∂ö‰º∏(continued to rise) 
The stock price goes up continuously. 
Á∂öËêΩ(continued to decline) 
The stock price falls continuously. 
ÂèçËêΩ(reactionary fall) 
The stock price, up, goes down. 
ÂèçÁô∫(rebound) 
The stock price, down, goes up. 
Â§ßÂπÖ/Â∞èÂπÖÁ∂ö‰º∏ 
Large or small / continued to rise 
Â§ßÂπÖ/Â∞èÂπÖÁ∂öËêΩ 
Large or small / continued to decline 
Â§ßÂπÖ/Â∞èÂπÖÂèçËêΩ 
Large or small/reactionary fall 
Â§ßÂπÖ/Â∞èÂπÖÂèçÁô∫ 
Large or small / rebound 
 
II. RELATED WORK/METHODS 
In this section, we present related work and methods 
that this paper referred to. 
A. Related works 
Various studies have been conducted on data-to-text 
technology, which automatically generates a summary of 
time-series data in easy text for humans to interpret. For 
example, research has been conducted to automatically 
generate text about weather forecasts from time-series 
weather information [4], to generate text from clinical data 
to assist doctors and nurses in decision-making [5], and to 
generate feedback text for students from time-series data 
that records their learning status within a certain period [6]. 
In the past, the mainstream of data-to-text research has 
been the generation of text using manually created rules or 
a machine learning model using various linguistic features 
[7][8]. Traditional approaches for data-to-text generation 
implement three components: (1) content planning that 
selects content from input data, (2) sentence planning that 
decides the structure and lexical content of each sentence, 
(3) surface realization that generates the final output by 
converting the sentence plan [9]. However, recently, with 
the development of information and communication 
technology, large-scale and complex data have become 
readily available, and interest in machine-learning type 
methods 
that 
generate 
text 
based 
on 
large-scale 
correspondence between data and text has been increasing. 
For example, research has been conducted on the use of 
machine learning in various data-to-text techniques, such as 
image caption generation [10], which generates descriptions 
from image data, and weather forecast text generation from 
molded weather data [11]. 
B. Related methods 
Techniques for generating market comments can be 
approached from various perspectives. For example, there 
are techniques to generate factors of change, such as events 
that are said to have affected the price movement of the 
Nikkei Stock Average and information on other stocks [12], 
to control the generated text by inputting topics 
representing the content of the generated market comment 
in addition to the Nikkei Stock Average data [13], and to 
generate characteristics, such as the history of the price of 
the stock and time-dependent expressions [3].   
 
III. TASKS FOR SIMPLE WORD GENERATION 
In this paper, we are working on a technique to 
generate text by appropriately selecting words representing 
the direction of price movement and the range of fluctuation 
of stock prices. The task is not a traditional full-text 
generation task, but a word generation task, which is easy to 
implement and can be expected to yield good results. In the 
previous research on the market comment generation task, 
expressions related to stock price fluctuations have been 
generated in the process of generating market comments, 
but there has been no research on generating expressions 
related to fluctuation ranges such as large or small, which 
has a novelty. Furthermore, the current market comments in 
NQN are generated by analysts in about 10 minutes even in 
a short period, but this research will make it possible to 
generate simple market comments in real-time. 
In market comments, not all expressions written at the 
same time of stock price fluctuations are the same. For 
example, Table II shows that a market commentary on 
one-day notes ‚ÄúÁ∂ö‰º∏(continued to rise)‚Äù but on another day 
with the same fluctuation range, it may not "Â∞èÂπÖÁ∂ö‰º∏
(Slight increase)‚Äù. (XX is the same number, or there is a 
small margin of error.) 
 
 
 
84
International Journal on Advances in Intelligent Systems, vol 15 no 3 & 4, year 2022, http://www.iariajournals.org/intelligent_systems/
2022, ¬© Copyright by authors, Published under agreement with IARIA - www.iaria.org

 
TABLE II. Example of the same fluctuation range but with different 
expressions. 
Text 
Expression 
Êó•ÁµåÂπ≥ÂùáÂ§ßÂºï„Åë„ÄÅÁ∂ö‰º∏ÁµÇÂÄ§„ÅØ XX ÂÜÜ
È´ò„ÅÆ ZZ ÂÜÜ 
(Nikkei 225 closing continuing to rise. 
The closing price was XX yen higher at 
ZZ yen.) 
Á∂ö‰º∏(continued to rise) 
Êó•ÁµåÂπ≥ÂùáÂ§ßÂºï„Åë„ÄÅÂ∞èÂπÖÁ∂ö‰º∏ÁµÇÂÄ§„ÅØ XX 
ÂÜÜÈ´ò„ÅÆ ZZ ÂÜÜ 
(Nikkei 225 closing slightly higher. The 
closing price was XX yen higher at ZZ 
yen.) 
Â∞èÂπÖÁ∂ö‰º∏ 
(Slightincrease) 
 
One factor that could cause the expression to change 
for the same fluctuation range is the size of the previous 
day's fluctuation range. Other factors that could be 
considered include large fluctuations in stock prices other 
than the Nikkei Stock Average or a change in the analyst's 
sentiment based on information obtained from their analysis. 
This study focuses on the need to consider stock prices 
other than the Nikkei Stock Average and analysts' 
sentiments, etc., rather than simply following a rule-based 
approach where the previous day's fluctuation range 
determines the market comment generated, and therefore, 
by using machine learning to analyze big data, we are 
attempting to generate expressions that are not influenced 
by analysts' sentiments. 
TABLE III. The main text of NQN. 
 
7 Êó•„ÅÆÊù±‰∫¨Ê†™ÂºèÂ∏ÇÂ†¥„ÅßÊó•ÁµåÂπ≥ÂùáÊ†™‰æ°„ÅØÁ∂öËêΩ„Åó„Åü„ÄÇÁµÇÂÄ§„ÅØÂâçÊó•ÊØî 94 ÂÜÜ 51 Èä≠Ôºà0.59%ÔºâÂÆâ„ÅÆ 1 ‰∏á 5814 ÂÜÜ 37 Èä≠„Å†„Å£„Åü„ÄÇ 
(The Nikkei Stock Average continued to fall on the Tokyo Stock Exchange on August 7. The closing price was ¬•15,814.37, down ¬•94.51 
(0.59%) from the previous day.) 
ÂâçÊó•„ÅÆÁ±≥Ê†™ÂÆâ„ÇÑÂ§ñÂõΩÁÇ∫ÊõøÂ∏ÇÂ†¥„ÅßÂÜÜÂÆâ„Éª„Éâ„É´È´ò„ÅÆÊµÅ„Çå„Åå‰∏ÄÊúç„Åó„Å¶„ÅÑ„Çã„ÅÆ„ÇíÂèó„Åë„Å¶Â£≤„Çä„ÅåÂÑ™Âã¢„Å†„Å£„Åü„ÄÇ 
(Selling was dominated by the weak U.S. stock market on the previous day and a lull in the trend of yen depreciation and dollar appreciation 
in the foreign exchange market.) 
 
 
 
IV. VALIDITY OF U.S. STOCK PRICES 
 
In this paper, we use the "Dow Jones Industrial 
Average," an American stock price index, in addition to the 
training data from previous studies. 
The "Dow Jones Industrial Average" is an American 
stock price index that uses the same calculation method as 
the Nikkei Stock Average. In this paper, NQN headlines are 
used as article data; the Dow Jones Industrial Average has 
been added as additional stock price data because the word 
"U.S. stocks" referring to the Dow Jones Industrial Average 
appears frequently in the text of the NQN. Examples are 
shown in Table III. The word "Á±≥Ê†™(U.S. stock)" appears 
with a probability of about 60% in the data of all articles 
covered in this study and is considered to have a large effect 
on the sentences or words before and after the article. The 
expression representing the fluctuation of the Nikkei Stock 
Average, which is a word generated in this study, is an 
example of such an expression, so this study confirms the 
effectiveness of using U.S. stock prices as training data. As 
shown in the table, the Dow Jones Industrial Average stock 
price is often expressed as "low" or "high," and few 
statements mention the Dow Jones Industrial Average stock 
price. Therefore, instead of adding the numerical value of 
the U.S. stock price to the training data, two values 
indicating whether the stock price was high or low were 
added to examine how this affected the results. 
 
 
V. STOCK PRICE FORECASTING USING 
TECHNICAL ANALYSIS 
In this paper, technical analysis, which is used to 
forecast stock prices, is used in addition to the study data 
from previous studies. Technical analysis is the process of 
predicting stock prices by identifying trends and patterns 
based on past stock price movements. The results obtained 
from the analysis are called technical indicators. For 
example, if there has been a similar pattern of stock price 
fluctuation in the past, there will likely be a similar pattern 
in the future. 15 factors of technical analysis are used in the 
paper [2] introduced in Section I to construct a model to 
predict stock prices. The actual model predicts whether the 
stock price fluctuation will increase or decrease on the next 
day using the stock price fluctuation and the factors 
obtained from technical analysis. However, what is 
predicted in this paper is not the stock price fluctuation, but 
the expression of the market comments generated by the 
stock price fluctuation. Technical indicators were employed 
because once it is known whether the stock price is going 
up or down, an accompanying expression can be generated. 
Two technical indicators were used: the psychological 
line and the momentum indicator. Although these two types 
are unrepresentative of the technical indicators used, they 
were chosen for ease of implementation. The results of 
using one of each of these two types of indicators as well as 
85
International Journal on Advances in Intelligent Systems, vol 15 no 3 & 4, year 2022, http://www.iariajournals.org/intelligent_systems/
2022, ¬© Copyright by authors, Published under agreement with IARIA - www.iaria.org

the results of using the two types of indicators as factors 
will be used to confirm whether the factors are valid or not. 
A. Psychological line 
The psychological line is a quantification of the 
investor's truth. More and more investors will judge that a 
stock price that has risen consecutively has an increased 
likelihood of falling. The indicator that quantifies this 
investor psychology is the psychological line. The 
calculation method is based on the number of days in a 
calculation period (generally 12 business days) on which 
the stock price rises as a percentage, regardless of the rate 
of fluctuation of rises and falls. Generally, the stock tends to 
be undervalued when the winning rate (rate of increase) is 
25% or less and overvalued when the winning rate (rate of 
increase) is 75% or more. In this paper, we divide the 
calculation period, which is usually 12 business days, into 3, 
6, 9, and 12 periods to see which period gave better results. 
B. Momentum 
This is a technical indicator that evaluates the 
momentum of the market. It is calculated by subtracting the 
closing price of a certain number of days back from the 
closing price of the day. The most used days are 10, 20, and 
25 days. In this paper, we use 10 days. A larger positive 
value indicates a stronger market, and a larger negative 
range indicates a weaker condition. 
C. Other technical indicators 
Here are some other typical technical indicators used to 
predict stock prices that were not used in this study. 
RSI is an indicator to determine whether the market is 
overbought or oversold based on the ratio of the rate of the 
price increase. Generally, when the ratio is below 30%, it is 
considered oversold and the stock price often improves, 
while when the ratio is above 70%, it is considered 
overbought. 
MACD is an indicator that uses moving averages. It is 
plotted on a technical chart and determines when to buy and 
sell based on the movement of the short-term moving 
average and the medium- and long-term moving averages. 
 
VI. PROPOSED METHOD 
In this section, we present a method for extracting 
words and phrases representing the price movement and 
fluctuation range of stock prices from the Nikkei Stock 
Average and NQN and the data used in this paper. 
A. Overview 
Figure 1 shows the execution procedure of the 
proposed method. 
First, we molded the data to create a correspondence 
between stock price and article data. Since the article data 
contains many noisy expressions, we set the conditions to 
remove the noise and extract the original phrases of the 
expressions generated from the article data. Details will be 
described later. 
Next is the stock price data, which also contains a 
multitude of noise and is inefficient for machine learning, 
so we molded it into a form that is easy to learn. 
We then created a correspondence between three days 
of stock price data and a single expression and used it to 
start learning. For machine learning, we used a Multilayer 
Perceptron (MLP), which is commonly used as an encoder. 
Finally, using the trained data, we predict phrases by 
inputting test data containing the Nikkei Stock Average, 
Dow Jones Industrial Average data, and technical indicator 
data. The generated phrase is substituted into the prepared 
format to complete the market comment. However, the 
generated phrase is used as the evaluation criterion in this 
paper, and it is not compared with the full text assigned to 
the format. 
B. Pre-processing 
In various fields, such as image processing and natural 
language 
processing, 
it 
is 
common 
to 
perform 
preprocessing to generalize machine learning models and to 
remove noise from data. Also in this paper, preprocessing is 
applied to the Nikkei Stock Average data, which is 
numerical data. We used the standardization and difference 
from the previous day as the preprocessing methods for the 
numerical data. The equations of the processing methods 
are given below. 
                    = ( ‚àí 
)/                         (1) 
 
 =  ‚àí                  (2) 
 denotes the stock price. 
In (1), standardization is performed using the data x, 
mean value ¬µ, and standard deviation Œ∏ used for learning. 
Equation (2) calculates the difference between the 
price  at each time step from the previous day's closing 
price to capture the change in price from the previous 
day's closing price. 
As in previous studies [1][3], we prepared short-term 
time series data to capture both short-term and long-term 
stock price fluctuations: daily stock price data "XShort" 
consisting of 62time steps, and long-term stock price data 
"XLong" using past closing prices as input. 
However, it is difficult to extract the expressions of 
short-term data from the articles. This is because the 
number of market commentaries including expressions on 
stock price fluctuations is not sufficient for the 62 pieces of 
short-term data. Furthermore, the number of market 
commentaries generated in a day is also different, making it 
difficult to map the data. Additionally, we generated 
expressions corresponding to the short-term stock price data 
based on the long-term stock price data and attempted to 
generate expressions on the training data, but the generation 
rate did not exceed that of previous studies, so the results  
86
International Journal on Advances in Intelligent Systems, vol 15 no 3 & 4, year 2022, http://www.iariajournals.org/intelligent_systems/
2022, ¬© Copyright by authors, Published under agreement with IARIA - www.iaria.org

Figure1.  
Overview. NQN is used for article data, and 
model is preprocessed, and three models are created and trained. When combining the Dow Jones Industrial Average and technical indicators as 
features, the models are added to X_move_std. Note that in this study, the "Combine Market Comments" part is not considered, 
expressions generated by the "Generate expression" are compared.
 
are omitted from this paper, which shall deal mainly with 
the long-term stock price data. The long-term stock price 
data is composed of the closing price of the Nikkei Stock 
Average, and since the market commentary of NQN, which 
summarizes the day, is generated around 15:00, just when 
the closing price is about to be released, it is appropriate to 
link the stock price with the article to create the training 
data. Three xstd features and two xmove features are 
extracted from three days of stock price data, combining a 
total of five features and one expression. 
The preprocessing of article data is pe
following order: 
1. Collect article data for the period related to the stock 
price data. The period data to be collected is the closing 
price (15:00). However, since not all articles are posted at 
exactly 15:00, a one-hour threshold is set. 
2. Select the article written at the earliest period among 
the collected article data and extract the expressions in the 
article. The expressions extracted are converted into 
appropriate numbers for machine learning. 
 
C. Dataset 
In this paper, we use the Nikkei Stock Average
technical indicator, and the Dow Jones Industrial Average as 
stock price data and NQN as article data. The data used are 
for the four years from 2014 to 2017. Tables 
examples of the Nikkei Stock Average and the Dow Jones 
Industrial Average used in this paper. Table
values for Table IV with the B preprocessing applied, and 
these three types of data are treated as training data to check 
their validity. Table VII shows the dataset with the addition 
of U.S. stocks. The Dow Jones averages are added only to 
Xlong_move_std, not to all three types. Table 
the dataset with the addition of technical indicators.
 
 
 
Overview. NQN is used for article data, and the Nikkei Stock Average and Dow Jones Industrial Average are used for stock price data. Each 
essed, and three models are created and trained. When combining the Dow Jones Industrial Average and technical indicators as 
features, the models are added to X_move_std. Note that in this study, the "Combine Market Comments" part is not considered, 
expressions generated by the "Generate expression" are compared. 
are omitted from this paper, which shall deal mainly with 
term stock price 
data is composed of the closing price of the Nikkei Stock 
since the market commentary of NQN, which 
summarizes the day, is generated around 15:00, just when 
the closing price is about to be released, it is appropriate to 
link the stock price with the article to create the training 
o xmove features are 
extracted from three days of stock price data, combining a 
The preprocessing of article data is performed in the 
1. Collect article data for the period related to the stock 
ice data. The period data to be collected is the closing 
price (15:00). However, since not all articles are posted at 
2. Select the article written at the earliest period among 
act the expressions in the 
article. The expressions extracted are converted into 
 
In this paper, we use the Nikkei Stock Average, 
the Dow Jones Industrial Average as 
a and NQN as article data. The data used are 
for the four years from 2014 to 2017. Tables IV and V show 
examples of the Nikkei Stock Average and the Dow Jones 
Table VI shows the 
ssing applied, and 
these three types of data are treated as training data to check 
shows the dataset with the addition 
Dow Jones averages are added only to 
Table VIII shows 
the dataset with the addition of technical indicators. 
TABLE IV. Nikkei Stock average
date 
2014/1/6 
2014/1/7 
2014/1/8 
 
TABLE V. Dow Jones Industrial Average
Date 
2014/1/6 
2014/1/7 
2014/1/8 
 
TABLE VI. Pre-processed data
Training Data 
Move
-prev 
Move-t
oday 
Std-
prev
Xlong_move 
-94.51 
307.8 
 
Xlong_std 
 
 
0.449
250
Xlong_move_s
td 
-94.51 
307.8 
0.449
250
 
TABLE VII. Dataset with the addition of U.S. stocks
Training Data 
Training Data (Dow Jones
Xlong_move 
- 
Xlong_std 
- 
Xlong_move_std 
1 
 
TABLE VIII. The dataset with the addition of technical indicators
Training Data 
Train Data (Tech indicator
Xlong_move 
- 
Xlong_std 
- 
Xlong_move_std 
Psy Line or Mom
 
 
 
 
Nikkei Stock Average and Dow Jones Industrial Average are used for stock price data. Each 
essed, and three models are created and trained. When combining the Dow Jones Industrial Average and technical indicators as 
features, the models are added to X_move_std. Note that in this study, the "Combine Market Comments" part is not considered, but the 
Nikkei Stock average. 
Price (close) 
15908.88 
15814.37 
16121.45 
Dow Jones Industrial Average. 
Price (close) 
16425.09 
16530.90 
16462.69 
processed data. 
-p
prev 
Std-pre
v 
Std-tod
ay 
 
 
 
0.449
250 
0.35459
5 
0.66214
4 
0.449
250 
0.35459
5 
0.66214
4 
ataset with the addition of U.S. stocks. 
Dow Jones) 
expression 
 
rebound 
 
he dataset with the addition of technical indicators. 
indicator) 
expression 
 
rebound 
or Mom 
 
87
International Journal on Advances in Intelligent Systems, vol 15 no 3 & 4, year 2022, http://www.iariajournals.org/intelligent_systems/
2022, ¬© Copyright by authors, Published under agreement with IARIA - www.iaria.org

D. Encoding 
Generally, MLP, CNN, and RNN are considered 
encoding methods for time series stock price data. However, 
from the results of previous studies, the model using MLP 
as an encoder produces better scores than all other models, 
including the baseline. Therefore, MLP is also used as an 
encoder in this study. 
VII. EXPERIMENT 
Table IX compares the dataset used in the previous 
study with the dataset used in this study. The comparison 
with the previous paper is made only where the expressions 
are covered. The reason for the difference in the data used 
in the training data is that the data of the Nikkei Stock 
Average for 2013 was in a different format from the data of 
other years, making it difficult to extract the data. Although 
there are some differences between the Nikkei 225 data of 
2013 and 2017, the differences have been compensated for 
by increasing the number of train data. Additionally, the test 
data are all the same, so the results are expected to be fine. 
All the technical indicators used in this study refer to 
stock price values from the previous day or later, which 
makes a difference in the number of training data. For 
example, in the case of the Psychological Line, the indicator 
is calculated by referring to stock prices up to 9 days before 
the target date. In this case, the target date is the 10th day or 
later, so the number of training data differs. The same can 
be said of momentum. Regarding training data, each model 
is the result extracted from 3 years of stock price data, and 
differences in the size of the training data are not 
considered. 
TABLE IX. Dataset for the previous paper and this paper. 
 
Previous paper 
This paper 
Training data 
Nikkei Stock 
Average/ NQN in 
2013,2014,2015 
Nikkei Stock 
Average/ NQN in 
2014,2015,2017 
test data 
Nikkei Stock 
Average / NQN in 
2016 
Nikkei Stock 
Average / NQNin 
2016 
Expressions that 
describe changes in 
stock prices 
10/Four expressions 
were used as 
references for 
comparison with 
this study 
12 
 
VIII. 
RESULT 
In this section, we present the results when the Nikkei 
Stock Average is used as the input and when both the 
Nikkei Stock Average and the Dow Jones Industrial 
Average are given as the input. 
A. Result: Only using Nikkei Stock Average 
In this experiment, we use a combination of time series 
data Xlong and Xshort and preprocessing methods std and 
move, with one-time series data as a reference and one or 
both preprocessing methods applied to it. The number of 
expressions used in the previous study was four, and they 
are shown in Table X. Table X includes the experimental 
results. The results in the previous study column refer to the 
method that produced the highest F value. The red letters 
represent the best results within Xlong. The blue letters are 
the ones with good results, but without the expression for 
the stock price fluctuation range. This is because when 
generating comments, NQN does not produce expressions 
at the five-minute version, so we used a rule base to 
generate expressions without stock price fluctuation ranges. 
Although it is not directly related to the experimental results, 
it is described following the execution results of previous 
studies. If only generating expressions within market 
comments, the overall results are better when using Xlong's 
model as training data than in prior studies. 
Comparing within xlong, Xlong_move_std is the best 
model if only the number of occurrences is used 
(Xlong_move: Xlongstd:Xlong_move_std=7:8:9 (ratio of 
appearances)). 
B. Result: Using the Nikkei Stock Average and the Dow 
Jones Industrial Average 
In this section, results are compared when Dow Jones 
averages are given as the input values when creating the 
training data. The comparison will be made with 
Xlong-move-std, which had the best results in result A. 
Since the training dataset was modified when the Dow 
Jones Industrial Average was given as input, and a different 
F value was calculated than in result A. Table XI includes 
the experimental results. The results show that although 
some results are worse than those of the previous studies, 
the overall F value has increased. Compared to Xlong, the 
f-values of the four main expressions have not changed 
much, but the f-values of the expressions representing the 
fluctuation range have improved. 
C. Result: Using Nikkei Stock Average and technical 
analysis 
In this section, a comparison of results was made when 
technical indicators were given as input values during the 
creation of the training data. Comparisons were made with 
Xlong-move-std and with technical indicators results. 
First, the psychological lines were added to the training 
data. Table XIII gives the f-score for each calculation period 
for the psychological line. The results show that the best 
results were output for 9 days rather than the standard 12-day 
period. These results are shown, but only the standard 12-day 
results are significantly worse, and after a certain calculation 
period, they all calculate the same f-score. Therefore, the 
9-day psychological line was used in this study instead of the 
12-day psychological line, which is set by default. 
88
International Journal on Advances in Intelligent Systems, vol 15 no 3 & 4, year 2022, http://www.iariajournals.org/intelligent_systems/
2022, ¬© Copyright by authors, Published under agreement with IARIA - www.iaria.org

Next, momentum was added to the training data. The 
momentum is calculated by subtracting the closing price 10 
days before the target date, but since the value it is not 
suitable for machine learning, std preprocessing was applied. 
Table XII contains a comparison between xlong_move_std 
plus psychological lines, momentum, and xlong-move-std.
TABLE X. Result: Only using Nikkei Stock Average. 
Expressions 
Xlong_move 
Xlong_std 
Xlong_move_std 
Xshort_move 
Previous study 
Rebound 
0.9 
0.85 
0.91 
0.98 
0.803 
Reactionary fall 
0.94 
0.90 
0.90 
0.98 
0.748 
Large reactionary fall 
0.62 
0.38 
0.60 
- 
- 
Large rebound 
0.55 
0.60 
0.44 
- 
- 
Large continued to decline 
0.00 
0.77 
0.00 
- 
- 
Large continued to rise 
0.60 
0.69 
0.63 
- 
- 
Small, rebound 
0.00 
0.00 
0.00 
- 
- 
Small,reactionary fall 
0.00 
0.00 
0.00 
- 
- 
Small. continued to rise 
0.00 
0.00 
0,46 
- 
- 
Small, continued to decline 
0.00 
0.00 
0.50 
- 
- 
Continued to rise 
0.90 
0.89 
0.88 
1.00 
0.814 
Continued to decline 
0.89 
0.87 
0.90 
1.00 
0.753 
 
TABLE XI. Result: Using Nikkei Stock Average and Dow Jones Industrial Average. 
Expression 
Xlong_move_std 
+Dow 
Previous 
Rebound 
0.91 
0.78 
0.803 
Reactionary fall 
0.90 
0.84 
0.748 
Large reactionary fall 
0.60 
0.18 
- 
Large rebound 
0.44 
0.67 
- 
Large continued to decline 
0.00 
0.73 
- 
Large continued to rise 
0.63 
0.38 
- 
Small, rebound 
0.00 
0.00 
- 
Small, reactionary fall 
0.00 
0.00 
- 
Small. continued to rise 
0,46 
0.40 
- 
Small, continued to decline 
0.50 
0.29 
- 
Continued to rise 
0.88 
0.89 
0.814 
Continued to decline 
0.90 
0.71 
0.753 
 
 
TABLE XII. Result: Using the Nikkei Stock Average and technical analysis 
Expression 
Xlong_move_std 
+PSY 
+MOM 
Rebound 
0.91 
0.83 
0.87 
Reactionary fall 
0.90 
0.95 
0.92 
Large reactionary fall 
0.60 
0.00 
0.67 
Large rebound 
0.44 
0.36 
0.29 
Large continued to decline 
0.00 
0.00 
0.00 
Large continued to rise 
0.63 
0.00 
0.00 
Small, rebound 
0.00 
0.00 
0.00 
Small, reactionary fall 
0.00 
0.44 
0.29 
Small. continued to rise 
0,46 
0.00 
0.00 
Small, continued to decline 
0.50 
0.00 
0.00 
Continued to rise 
0.88 
0.83 
0.87 
Continued to decline 
0.90 
0.83 
0.85 
89
International Journal on Advances in Intelligent Systems, vol 15 no 3 & 4, year 2022, http://www.iariajournals.org/intelligent_systems/
2022, ¬© Copyright by authors, Published under agreement with IARIA - www.iaria.org

TABLE XIII. F-score for each calculation period for the psychological line. 
calculation period 
f-score 
12 
0.695 
9 
0.744 
6 
0.721 
3 
0.724 
 
IX. DISCUSSIONS 
In this section, we will discuss the results. 
A. Expressions about stock price fluctuations and Xshort. 
NQN does not produce expressions every 5 min, but 
only for important periods (9:00, 12:00, 15:00). Therefore, 
in the case of short-term data that deals with five-minute 
data, it is necessary to extract expressions mechanically or 
by using other data as training data and extracting 
expressions by predicting them. In this paper, the former 
method was used. In producing the expressions for 
short-term data, we used the difference from the previous 
day in two steps. Specifically, two steps of the previous 
day's difference are used, with a positive value indicating "
Á∂ö‰º∏(continue to rise)" and a negative value indicating "Á∂ö
ËêΩ(continue to decline)". However, the thresholds for large 
or small at this time are not defined, resulting in the results 
shown in Table V. The NQN shows several instances of 
large and small falls, but the conditions for their appearance 
could not be determined because of only two steps of 
difference from the previous day, so it was impossible to set 
a threshold. The reason for this is that the analysts who 
write the market commentary assign "large" and "small" 
according to their sensitivity.  
Therefore, the results show a high F value because 
there were only four expressions for three years of data. 
One of the future tasks will be to determine the threshold 
for mechanically generating expressions related to the range 
of fluctuation. Another possible method of generation is to 
create training data with long-term stock price data, predict 
the expression of short-term stock price data from it, and 
then create new training data from it. However, when this 
method was used simply before, the results were much 
lower than when the long-term stock price data was used as 
training data, so the method needs to be considered. 
 
B. Extraction methods were considered based on 
differences with previous studies. 
Table XIV shows the comparable areas in this paper 
and previous studies. This study produced high F values for 
all comparable expressions. This is thought to be because 
similar expressions in the previous studies, such as "ÂèçÁô∫
(rebound)" and "‰∏ä„Åí„Å´Ëª¢„Åò„Çã(start to move up)", were 
treated as the same in this study. To improve the accuracy of 
expression generation, we unified the expressions in this 
study. It was found that unifying the expressions increased 
the accuracy by about 10-20%. Instead, the fluency of the 
sentences has been reduced. However, since there are no 
clear rules on how to use words such as "ÂèçÁô∫(rebound)" 
and "‰∏ä„Åí„Å´Ëª¢„Åò„Çã(start to move up)" that occur in market 
conditions, it is best to unify them. 
 
TABLE XIV. Comparison of previous studies and this study. 
Expression 
This Paper 
Previous paper 
Continued to decline 
0.91 
0.803 
Continued to rise 
0.90 
0.748 
Rebound 
0.88 
0.814 
Reactionary fall 
0.90 
0.753 
 
C. Number of expressions and number of data 
References 
The results show that there are some expressions whose 
occurrence rate is 0, and the problem is that the number of 
data is too large for the number of expressions prepared. 
The following is a table of the number of expressions 
that exist in the data (Table XV) and the occurrence rate of 
the expression that represents the fluctuation range of stock 
prices in the data used (Table XVI). The red letters in Table 
VIII and Table IX are the three selected from the lowest 
values. Looking at Table IX, we can see that several 
expressions are never generated. As in the case of Short, if 
the training data is biased, the result will be like this, so it is 
desirable to have training data where all expressions are 
generated to some extent. Or it is necessary to review the 
expressions to be extracted. 
 
TABLE XV. The number of expressions that exist in the data. 
Expression 
Xlong_move_std F-value 
Continue to rise  
184 
Rebound 
150 
Reactionary fall 
147 
Continue to decline 
111 
Lage rebound 
24 
Large, continue to decline 
24 
Small continue to decline 
20 
Large Reactionary fall 
17 
Small continue to rise 
17 
Small reactionary fall 
14 
Large continue to rise 
13 
Small rebound 
8 
90
International Journal on Advances in Intelligent Systems, vol 15 no 3 & 4, year 2022, http://www.iariajournals.org/intelligent_systems/
2022, ¬© Copyright by authors, Published under agreement with IARIA - www.iaria.org

TABLE XVI. Occurrence rate of the expression that represents the 
fluctuation range. 
Expression 
Xlong_move_std F-value 
Large rebound 
0.6 
Large reactionary fall 
0.44 
Large continue to rise 
0 
Large continue to decline 
0.63 
Small rebound 
0 
Small reactionary fall 
0 
Small continue to rise 
0.46 
Small continue to decline 
0.5 
 
D. Effects of the Dow Jones Industrial Average 
The market comments published in NQN often mention 
the fluctuation of the Nikkei Stock Average in the first line, 
and the Dow Jones Industrial Average in the second line or 
after the second line. In these comments, a sentence like 
"The Nikkei Stock Average rebounded following the trend 
of major stock indexes all rising in the U.S. stock market 
the previous day." appears. As this sentence indicates, 
Nikkei Stock Average is strongly influenced by the U.S. 
stock market (Dow Jones Industrial Average), so in this 
paper, we tested the effectiveness of the phrases. As a result, 
the F values of the four main phrases (continuous decline, 
continuous growth, rebound, and decline) stayed almost the 
same, but the generation rates of the expressions with small 
and large amounts of percentages increased as a whole. The 
reason is thought to be that the input of not only the Nikkei 
Stock Average but also the Dow Jones Industrial Average 
values resulted in a detailed separation of the expressions 
related to stock price fluctuations. As in the case of the Dow 
Jones Industrial Average, we consider whether the results 
will be further improved or worsened by providing new 
numerical data affecting the Nikkei Stock Average as an 
input. 
 
E. Effects of the Technical indicators 
Technical indicators are effective in predicting stock 
prices, and we speculated that if it is possible to predict stock 
prices, it would also be possible to predict the fluctuation rate 
associated with them, so we added them as training data. The 
difference between the Dow Jones Industrial Average and 
technical indicators as additional data is whether they are 
composed of only the Nikkei Stock Average or whether they 
are composed of additional stock prices other than the Nikkei 
Stock Average. This paper confirms how those differences 
affect the generation rate of the expression. The results 
showed that the psychological line was not as effective in 
improving the results, and the momentum was not as 
effective as when the Dow Jones Industrial Average was 
added. In other words, it was found that training data 
consisting only of the Nikkei Stock Average did not produce 
good results. However, the technical indicators applied in 
this paper were prioritized for ease of implementation, and 
major technical indicators such as MACD and RSI were not 
implemented. It is recommended that these technical 
indicators be implemented and compared again. Additionally, 
although the technical indicators were added one by one to 
xlong_move_std this time, it is considered that the results 
may be improved by multiplying technical indicators with 
each other, just as move and std are multiplied with each 
other. 
 
X. CONCLUSION 
In this paper, we extracted expressions related to the 
price movements of stock prices and their fluctuation 
ranges using the Nikkei Stock Average and NQN, learned 
the expressions and price movements by machine learning, 
and generated expressions for given stock prices. We 
compared the generated expressions with those extracted 
from the original article and verified which training data 
were superior in terms of correct answer rate and F value. 
In conclusion, the results of the training data with two 
types of preprocessing implemented exceeded those of the 
previous study. This is thought to be due to the unification 
of similar expressions in the previous study. 
In addition, when generating expressions related to the 
range of variation of values, such as "Â§ßÂπÖ(Large)" and "Â∞è
ÂπÖ(Small)," it turned out to be difficult to generate them 
unless the training data contained these expressions with a 
certain degree of probability. 
To examine the influence of the U.S. stock price on the 
Nikkei Stock Average, we also examined whether there was 
any change in the generation rate by giving the U.S. stock 
price (Dow Jones Industrial Average) as a new input. As a 
result, when the U.S. stock price was given as an input, the 
generation rate of the main phrases was not significantly 
affected, but the generation rate of phrases describing the 
fluctuation range of the stock price was generally improved. 
As an additional experiment, a comparison was made 
between the training data consisting only of the Nikkei 
Stock Average, including the additional data, and the Nikkei 
Stock Average with the Dow Jones Industrial Average 
added.  
The additional data were technical indicators, used to 
predict stock prices. As a result, the accuracy was improved, 
although not as much as that of the Dow Jones Industrial 
Average. Further improvement can be expected by using the 
major technical indicators and by multiplying technical 
indicators with each other. 
Future challenges include setting thresholds to 
mechanically generate expressions related to the range of 
variation, creating better training data, revising expressions, 
and new input values. 
 
 
91
International Journal on Advances in Intelligent Systems, vol 15 no 3 & 4, year 2022, http://www.iariajournals.org/intelligent_systems/
2022, ¬© Copyright by authors, Published under agreement with IARIA - www.iaria.org

REFERENCES 
[1] I. Sekino and M. Sasaki, ‚ÄúGenerating Market Comments on 
Stock Price Fluctuations Using Neural Networks,‚Äù in Proc. 
eKNOW, 2021, pp. 37-41.  
[2] R. Katayose and M. Yoshioka, ‚ÄúAnalysis of effect by technical 
analysis using machine learning,‚Äù SIG-FIN-024, 2020, pp. 
144-148. 
[3] S. Murakami, A. Watanabe, A. Miyazawa, K. Goshima, T. 
Yanase, H. Takamura, and Y. Miyao, ‚ÄúLearning to Generate 
Market Comments from Stock Prices,‚Äù Proceedings of the 
55th Annual Meeting of the Association for Computational 
Linguistics, 2017, pp. 1374-1384. 
[4] B. Anja, ‚ÄúProbabilistic Generation of Weather Forecast Texts,‚Äù 
Association for Computational Linguistics, 2007, pp. 
164-171. 
[5] F. Portet, E. Reiter, J. Hunter, and S. Sripada, ‚ÄúAutomatic 
Generation of Textual Summaries from Neonatal Intensive 
Care Data,‚Äù Artificial Intelligence, Volume 173, 2009, pp. 
789-816. 
[6] D. Gkatzia, H. Hastie, and O. Lemon, ‚ÄúComparing 
Multi-label Classification with Reinforcement Learning for 
Summarization of Time-series Data,‚Äù Association for 
Computational Linguistics, 2014, pp. 1231-1240. 
[7] W. Lu and H. T. Ng, ‚ÄúA probabilistic forest-to-string model 
for language generation from typed lambda calculus 
expressions,‚Äù the 2011 Conference on Empirical Methods in 
Natural Language Processing (EMNLP2011), 2011, pp. 
1611‚Äì1622. 
[8] G. 
Angeli, 
P. 
Liang, 
and 
D. 
Klein, 
‚ÄúA 
simple 
domain-independent probabilistic approach to generation,‚Äù the 
2010 Conference on Empirical Methods in Natural Language 
Processing (EMNLP2010), 2010, pp. 502‚Äì512. 
[9] K. McKeown, ‚ÄúText generation,‚Äù Cambridge University Press, 
1985. 
[10] O. Vinyals, A. Toshev, S. Bengio, and D. Erhan, ‚ÄúShow and 
Tell: A Neural Image Caption Generator,‚Äù IEEE, Accession 
Number: 15524253, 2015. 
[11] H. Mei, M. Bansal, and M.R. Walter, ‚ÄúWhat to talk about and 
how? Selective Generation using LSTMs with Coarse-to-Fine 
Alignment,‚Äù Association for Computational Linguistics, 2016, 
pp. 720-730. 
[12] T. Aoki, A. Miyazawa, T. Ishigaki, K. Goshima, K. Aoki, I. 
Kobayashi, H. Takamura, and Y. Miyao, ‚ÄúGenerating Market 
Comments Referring to External Resources,‚Äù Association for 
Computational Linguistics, 2018, pp. 135-139.  
[13] K. Aoki, A. Miyazawa, T. Ishigaki, T. Aoki, H. Noji, K. 
Goshima, I. Kobayashi, H. Takamura, and Y. Miyao, 
‚ÄúControlling Contents in Data-to-Document Generation with 
Human-Designed 
Topic 
Labels," 
Association 
for 
Computational Linguistics, 2019, pp. 323-332. 
 
92
International Journal on Advances in Intelligent Systems, vol 15 no 3 & 4, year 2022, http://www.iariajournals.org/intelligent_systems/
2022, ¬© Copyright by authors, Published under agreement with IARIA - www.iaria.org

