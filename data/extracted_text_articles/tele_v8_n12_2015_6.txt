59
International Journal on Advances in Telecommunications, vol 8 no 1 & 2, year 2015, http://www.iariajournals.org/telecommunications/
2015, © Copyright by authors, Published under agreement with IARIA - www.iaria.org
The Role of QoS in WebRTC and IMS-based IPTV Services
Michael Maruschke
Hochschule fuer Telekommunikation Leipzig (HfTL)
University of Applied Sciences,
Leipzig, Germany
Email: maruschke@hftl.de
Kay Haensge
Telekom Innovation Laboratories
Deutsche Telekom AG
Berlin, Germany
Email:kay.haensge@telekom.de
Jens Zimmermann
Fixed Mobile Engineering Deutschland
Deutsche Telekom Technik GmbH,
Darmstadt, Germany
Email: jzimmermann@telekom.de
Tilmann Bach
Technische Planung und Rollout
Deutsche Telekom Technik GmbH,
Berlin, Germany
Email: tilmann.bach@telekom.de
Abstract—This paper describes the considerable role of Quality
of Service (QoS) for Web Real-Time Communication (WebRTC)
clients connected with an IP Multimedia Subsystem (IMS)-based
IP Television (IPTV) infrastructure. To raise the quality of
experience for IPTV customers, the article focuses on the merging
of the technical capabilities arising from both the IMS-based
telecommunication networks including IPTV speciﬁc components
and the WebRTC clients. The ongoing WebRTC standardization
process as well as the state of the art WebRTC-QoS trends are
considered. To enrich typical IPTV services with appropriate
network QoS characteristics a scheme has been developed. The
author’s concept presents a proposal of an architecture featuring
an integrated QoS functionality for WebRTC in conjunction with
IPTV services. With our new approach, a WebRTC user inside
a 4G mobile network can beneﬁt from the integrated end-to-
end quality for real-time IPTV services like Live TV. Composed
of several open-source-based testbed solutions, a ﬁrst prototype
has been developed illustrating the QoS initiation procedures
primarily.
Keywords-QoS; WebRTC; IMS-based IPTV; EPS;
I. INTRODUCTION
In times of ever-growing bandwidth needs by Internet
users, applications and tightened network resources on side
of the network infrastructure providers the importance of
QoS mechanics rises heavily. Technologies enabling QoS
needs to get deployed more and more corresponding to the
communication context (e.g., for conversational voice: delay
sensitive, for ﬁle transfer: packet loss sensitive). This especially
embraces those applications that are not affected by QoS
reservations a network provider manages thus far, the so
called Over The Top (OTT) services. This includes all the
currently established WebRTC services. If the WebRTC client
requests for QoS ensured network resources while starting a
new communication session, the telecommunications network
can provide adequate resources. The advantages are obvious:
both end-users and network providers can beneﬁt from such
an approach. For the end-users it is possible to experience a
high quality even in OTT applications like WebRTC services
and for the network provider new business cases are revealed
when it is possible to sell the QoS features (inherited from
Evolved Packet System (EPS) and ﬁxed line Next Generation
Network (NGN) networks) to OTT applications and end-users.
The provisioning of bandwidth many times over the needful
proportion (the so called ”‘overprovisioning”’) is going to
get increasingly unsuitable. This applies to all kinds of IPTV
services, especially if they deliver their content with High
Deﬁnition (HD) or Ultra-High-Deﬁnition resolutions. The
realisation of live TV with 4K display resolution would increase
the end-to-end data rate enormously. Taking those trends into
account, it seems reasonable for network infrastructure operators
to provide the bandwidth in a more effective manner by using
network QoS techniques.
This journal paper discusses the QoS as an important
characteristic for real-time-based telecommunication services in
general and for the particular ﬁeld of IMS-based IPTV services.
On the basis of the various QoS requirements for different
IPTV services (like Live TV, Audio or Video on Demand) a
new QoS resource class mapping is developed by the authors.
Based on [1], we propose an architectural concept to enrich
an established WebRTC session accessing an IMS-based IPTV
network infrastructure with QoS features. Particularly, for an
WebRTC end-user, which has access to a 4G mobile network, a
new end-to-end QoS control mechanism has been developed and
veriﬁed. Consuming real-time TV services like Live TV using a
Web browser on a mobile device, the user beneﬁts from a QoS
concept that combines the well established QoS technology
from the 4G mobile network with our new WebRTC QoS
enrichment. While the authors paper [1] proposed the principle
combination of WebRTC with IMS-based IP-TV services, this
journal contribution is focussed on the enrichment of QoS
for an WebRTC client consuming TV services with real-time
characteristic. In contrast to this, our other publication [2]
is aimed to establish QoS only for an conversational voice
call. The authors’ QoS extension principle is new and neither
proposed by established international standardization bodies

60
International Journal on Advances in Telecommunications, vol 8 no 1 & 2, year 2015, http://www.iariajournals.org/telecommunications/
2015, © Copyright by authors, Published under agreement with IARIA - www.iaria.org
nor solved in a practical manner up to now. To verify our
proposal, a ﬁrst testbed has been implemented. Particularly, the
QoS activation procedures have been tested.
The present journal paper is structured as follows: Spec-
ifying the used terminology like RTC and QoS, Section II
offers a survey of the current status of QoS in context of
WebRTC, of real-time communication in ﬁxed and mobile
telecommunication networks and of IPTV services. Based on an
IPTV-QoS parameter mapping approach, Section III describes
the authors new concept to integrate QoS dynamically in the
WebRTC client accessing IMS-based IPTV architecture. (4G
mobile network). The new architecture and their speciﬁcs
are considered and the proof of concept incorporating an
4G mobile network is presented. In Section IV, a conclusion
summarises the achieved results of this contribution and gives
an perspective.
II. STATUS QUO
A. Real Time Communication and QoS
Real Time Communication (RTC) is generally characterised
by the so called ”Real-Time” condition. That implies that the
value of the communication depends signiﬁcantly upon the
time at which the data is arriving at the data sink [3]. The
throughput time of the data (ﬂow rate) across the network delays
the delivery of the data packets to the recipient. The tolerable
delay time or latency depends on the type of the desired
communication (e.g., conversational audio and video or real-
time gaming). Besides the delay time, two other characteristic
performance aspects can signiﬁcantly inﬂuence the quality
of the real-time communication. First, the circumstance that
the transmitted data packets are routed through the network
passing an unequal number of network elements, which results
in variable arrival times at the recipients side. In packet-based
networks, the varying delay of the transferred data is called
packet delay variation or simply Delay Variation (DV) [4].
Sometimes, the different packet delivery times are also named
as jitter [5]. Furthermore, if data packets reach the incoming
data buffer on the receiver side too late, they will be discarded
and consequently counted as lost packets.
Basically, QoS encompasses both the service categorization
and the overall performance of the network communication for
each service category. The International Telecommunication
Union - Telecommunication Sector (ITU-T) describes QoS as
the unity of all characteristics of a telecommunication service
which are necessary to satisfy the service user. This includes
the deﬁned and the implied requirements for the complete
customer satisfaction. Mean Opinion Score (MOS) methods are
often used to indicate the measured or detected service quality.
Initially developed for a subjective quality evaluation, the MOS
method with it’s rating score from 1 (bad) to 5 (excellent) is
more and more used for objective QoS measurement methods.
Appropriate QoS characteristics like End-to-End-Delay of
the transmitted packets, the Packet Delay Variation and the
size of the tolerable Packet Loss are required to satisfy the
telecommunication customer’s expectations. The end-to-end
quality of any telecommunication service depends on the
performance of all involved components; the technical end-user
system as well as each relevant network entity (see Figure 1).
Hence, the QoS one-way-delay parameter is inﬂuenced by all
components. For speech transmission, an one-way-delay (also
known as ’mouth-to-ear-delay’) of 150 ms is experienced as
User
User
UE
UE
End-to-End QoS
Access 
Network
Access 
Network
Core 
Network
Figure 1: Schematic contributions to end-to-end QoS [7].
very good and all delays above 400 ms are considered to be
unacceptable for the consumer [6].
Focusing especially on IP-based networks, several QoS
requirements are reasonably for a successful and effective
operation of RTC. Therefore, the ITU-T also presents a generic
QoS classiﬁcation for public IP-based networks and the related
network performance parameters IP Transfer Delay (IPTD),
IP Delay Variation (IPDV), IP Packet Loss Ratio (IPLR)
and IP Packet Error Ratio (IPER) (see also table 1 and
table 3 of [8]). From a network topology point of view, this
recommendation addresses all relevant network parts (Access
Network; Aggregation Networks, Core Networks) but not
the end-user or home-network side. Table I illustrates the
eight deﬁned IP network QoS classes and their corresponding
QoS network parameters. Note that the parameter IPER is
contributing insigniﬁcantly to the overall packet loss and
therefore is not shown in the Table I. The value ’U’ stands for
’unspeciﬁed’.
Furthermore, a guidance on usage of those eight QoS classes
is given as follows, outlining corresponding communication
examples:
• QoS class 0, for real-time, jitter sensitive and high
interactive applications like Voice over IP (VoIP) and
Video conferences;
• QoS class 1, for real-time, jitter sensitive and high
interactive applications like VoIP and Video conferences,
but with less constrained delay requirements;
• QoS class 2, for transaction data, highly interactive
(signaling trafﬁc);
• QoS class 3, for transaction data, interactive;
• QoS class 4, for low loss only applications like short
transactions, bulk data, non real-time buffered video
streaming;
• QoS class 5, for all other traditional applications of default
IP network without any QoS demands
• QoS classes 6 and 7 have a provisional character and are
designed for applications similar to applications in QoS
class 0 or 1, but with more strictly demands for the packet
loss rate.
B. QoS in IMS-based Telecommunication Networks
IMS, as an architectural framework for supporting IP multi-
media services, was originally designed by the 3rd Generation
Partnership Project (3GPP) for mobile core networks and
successive expanded for ﬁxed-line-based core networks [9]. It
addresses multiple IP multimedia applications like speech and
video communication, shared online whiteboards, telepresence
conferences and multicast services. To provide these in a ﬂexible
and appropriate manner, telecommunication network operators
differentiate their services for the customer regarding to the
QoS characteristics [9]. Basically, QoS should be negotiable for

61
International Journal on Advances in Telecommunications, vol 8 no 1 & 2, year 2015, http://www.iariajournals.org/telecommunications/
2015, © Copyright by authors, Published under agreement with IARIA - www.iaria.org
TABLE I: IP network QoS class deﬁnitions and network performance parameters by ITU-T Rec. Y.1541.
Network Performance
Parameter
QoS Classes
Class 0
Class 1
Class 2
Class 3
Class 4
Class 5
Class 6
Class 7
IP Transfer Delay
100 ms
400 ms
100 ms
400 ms
1 s
U
100 ms
400 ms
IP Delay Variation (Jitter)
50 ms
50 ms
U
U
U
U
50 ms
50 ms
IP Packet Loss Rate
0,1 %
0,1%
0,1%
0,1%
0,1%
U
0,001%
0,001%
IP multimedia sessions and their individual media components
(like audio or video) both at the time before establishing a
connection as well as during the established connection. QoS
related concepts (QoS signaling, QoS resource reservation and
allocation, etc.) belongs to this framework inherently due to the
fact that IMS describes one technological concept to realise a
NGN. Next to other capabilities like mobility of packet-based
telecommunication networks, the QoS is a key feature in a
NGN as deﬁned by the ITU-T [10].
Mobile networks
QoS has always been considered in the standardization
process of mobile networks. Therefore, in Universal Mobile
Telecommunication System (UMTS) networks (3G) four QoS
classes has been introduced. They are named as follows:
• Conversational Class,
• Streaming Class,
• Interactive Class, and
• Background Class [11].
These classes are also entitling the possible use cases for
each of the four types. Conversational is used for real-time
audio and video communication. Streaming can be used to
stream audio or video data towards the User Equipment (UE)
by having a small buffer and non-critical real-time constraints.
Interactive is used for general user data transfer such as web
browsing and application information exchanges. The last and
lowest prioritised class is background. It is used for non time-
critical applications, like email polling.
With the speciﬁcation of EPS and fourth generation (4G)
mobile networks, the 3GPP has developed a new, only packet-
based core network domain (also known as Evolved Packet Core
(EPC)) for both conversational voice/video communication as
well as other packet or IP-based applications like public Internet
communication. For this modern all-IP network, the 3GPP also
deﬁnes a new QoS concept involving all relevant EPS network
components like the UE, the Evolved UMTS Terrestrial Radio
Access Network (E-UTRAN) and the EPC. For enabling QoS
inside the EPS a so called EPS Bearer is used to fulﬁll all
requirements of the media delivery. Figure 2, depicts this EPS
Bearer, which is correlated with the overall Bearer-based End-
to-End (E2E) QoS concept of the 3GPP network infrastructure.
The detailed description can be found in [12]. QoS classes
are composed of a subset of standardized characteristics, they
describe the packet forwarding treatment in 4G networks. For
the QoS class determination the so called QoS Class Identiﬁer
(QCI) was introduced. Based on typically applications, various
QoS groups separated in nine QCI values are deﬁned in [13].
Since the 3GPP standardization institution provides their
own QoS treatments, a mapping is always required. Therefore,
Table II shows different QoS classes originated in 3GPP Release
99 networks (UMTS-3G) and EPS-based 4G networks, in
relation to the main relevant QoS parameters Delay and Packet
Loss. It should be clariﬁed that in Table II with ”Prio” the
eNB
Serving 
GW
PDN 
GW
UE
Radio
S1
S5/S8
SGi
E-UTRAN
EPC
IP-Packet
Data Networks
Radio Bearer
   S1 Bearer
E-RAB
S5/S8 Bearer
EPS Bearer
External Bearer
E2E Service
IMS-based 
NGN, Public 
Internet, etc.
Figure 2: 3GPP overall QoS concept, based on [12].
packet scheduling priority is meant and Packet Error Loss
Rate (PELR) stands for an upper bound for the rate of non-
congestion-related packet loss. While for the ﬁrst four QoS
classes (QCI 1 to 4) a Guaranteed Bitrate (GBR) is allocated,
the following classes (QCI 5 to 9) are supported with Non-GBR
characteristics. It is obvious, that real-time applications like
audio and video conversation demands more strict packet delay
requirements than traditional Internet trafﬁc like ﬁle sharing,
which is more critical regarding the packet loss characteristic.
While for telecommunication carriers the guaranteed delivery
of IMS Signaling is relatively important, the customer needs
the stricter QoS resources for voice, video and interactive real-
time gaming (see also QCI value 3 or 7). It is noticeable that
for video streaming services (both live streaming and buffered
streaming) exists several QoS relevant QCI values. Thus, live
streaming services are typiﬁed by QCI value 2 and 7 with
similar QoS characteristics (packet delay and packet error loss
rate), but with different priority and bitrate guaranties. To handle
QoS for buffered streaming services, a couple of QoS classes
(QCI values 4, 6, 8 and 9) is speciﬁed. The assigned QoS
relevant parameters packet delay and packet error loss rate
are identical once again meanwhile the priority and the bitrate
guarantee differs. Note that QCI value 9 is typically used for
the default bearer of a UE for non privileged subscribers.
Fixed line networks
QoS in ﬁxed-line-based IMS networks differs relating to
the used IP Connectivity Access Network (IP-CAN). While the
3GGP-based mobile networks use their typical access networks
like UMTS Terrestrial Radio Access Network (UTRAN) or
E-UTRAN, the ﬁxed-line-based IMS networks provide the
telecommunication services to the residential customer via
any Digital Subscriber Line (xDSL) technique. Besides the
fact that the access transmission technology differs, the

62
International Journal on Advances in Telecommunications, vol 8 no 1 & 2, year 2015, http://www.iariajournals.org/telecommunications/
2015, © Copyright by authors, Published under agreement with IARIA - www.iaria.org
TABLE II: QoS class mapping between 3G and 4G mobile networks, based on [13].
UMTS Trafﬁc
Class (3G)
QCI
(4G)
Prio
Bitrate Guarantee
Packet Delay Budget
Packet Error
Loss Rate
Example Services
Conversational
1
2
GBR
100 ms
1 %
Conversational Voice
Conversational
2
4
GBR
150 ms
0,1 %
Conversational Video (Live Streaming)
Conversational
3
3
GBR
50 ms
0,1 %
Real Time Gaming
Streaming
4
5
GBR
300 ms
0,0001 %
Non-Conversational Video (Buffered Streaming)
Interactive
5
1
Non-GBR
100 ms
0,0001 %
IMS Signaling
Interactive
6
6
Non-GBR
300 ms
0,0001 %
Video (Buffered Streaming),
TCP-based (e.g., www, chat, ftp, p2p ﬁle sharing, progressive video)
Interactive
7
7
Non-GBR
100 ms
0,1 %
Voice, Video (Live Streaming), Interactive Gaming
Interactive
8
8
Non-GBR
300 ms
0,0001 %
Video (Buffered Streaming),
TCP-based (e.g., www, chat, ftp, p2p ﬁle sharing, progressive video)
Backround
9
9
Non-GBR
300 ms
0,0001 %
Video (Buffered Streaming),
TCP-based (e.g., www, chat, ftp, p2p ﬁle sharing, progressive video)
Customer-Premises Equipment (CPE) (any terminal and as-
sociated equipment located at a subscriber’s premises and
connected with a carrier’s telecommunication channel) is
distinct from the connected network infrastructure. Therefore,
mobile network customers are utilizing mobile devices like
cellulars, smartphones or tablet PCs. In contrast to this, in ﬁxed
line networks the residential customer uses a home-network
where various end devices are connected to each other and
accessed on the CPE, which can be build by an Integrated
Access Device (IAD) for IMS-based NGNs.
In ﬁxed access line NGNs, the QoS management functions
are supported by a Resource Admission Control Subsystem
(RACS), which is responsible for elements of the policing
control including resource reservation and admission control in
the access and aggregation networks [14]. Any multimedia ser-
vices like VoIP or IPTV can request particular QoS parameters,
such as data throughput, latency, jitter and packet loss from
the transport network side. Then, the RACS is responsible to
manage this QoS requests by evaluating this in the context
of predeﬁned policy rules, and performing the reservation
and allocation of adequate QoS resources through all affected
transport network elements.
To ensure QoS aware NGN service delivery in ﬁxed access
networks, the RACS speciﬁcation distinguishes between two
abstract QoS architecture principles [14]:
• guaranteed QoS: trafﬁc delivery service with absolute
demand on some or all of the QoS parameters, such as
throughput, latency, jitter and packet loss, and
• relative QoS: trafﬁc delivery service without absolute
demand on some or all of the QoS parameters.
In contrast to this, the support of QoS unaware (”Best
Effort”) networks as well as the support of networks that have
statically provisioned QoS differentiation does not require any
RACS functionality. To determine the various QoS classes the
DiffServ classiﬁcation is applicable [15].
Sometimes, for statically QoS support, the QoS marking
inside the IAD-based Home-Network on CPE side is carried
out by utilizing the Differentiated Services Code Points (DSCP)
classiﬁcation mechanism for each media ﬂow.
C. QoS in IMS-based IPTV services
In principle, Video Quality is deﬁned as the indicator, which
evaluates the quality of the video stream delivered to the user
[16]. This indicator describes the perception of the end-user in
term of the video quality. Typically, objective perceptual video
quality measurements models are utilizing a reference-based
approach, like the ITU-T recommendation J.247 [17] describes
it. Taking the end-user context by consuming Live TV or
Video on Demand (VoD) into account, is it not applicable
to operate with a video quality assessment method, which is
functional with a full reference. The current issue is that there
is no standardized approach for an objective video quality
measurement model that does not need any reference signals.
Therefore, in context of end-user quality survey of IPTV
services the following indicators are proposed to characterize
the quality of IPTV services [16]:
• Channel Availability (indicates the availability of Live
TV/VoD channels proportional to the attempted channels),
• ”Black Screen” Occurrences (e.g., effected by a major
loss of video packets during a long period of time),
• Blockiness Occurrences (produced by a low-quality video
compression when too few bits are present; it is perceptible
by the contrast of color),
• Frozen Picture Occurrences (some picture appearing as
stopped/frozen from time to time),
• Lip Desynchronization Occurrences (the synchronization
of audio and video stream is not well),
• Zapping Delay (time, which is needed to be switch from
one TV/VoD channel to another),
• Transmission Delay (indicates the delay to transmit the
audio/video signal from the delivery point to the end-
user’s TV device; important for some cases like football
matches),
• and others.
While reference [16] is focused on the context of end-user
quality characterization and their indicators, it is obvious that
the network-based QoS parameter Transfer Delay (TD), DV
and Packet Loss Rate (PLR) have also high relevance.
As already introduced in [1], IMS-based IPTV services
can be differed among each other regarding their kind of
service or feature, based on [18]. For instance, linear live
Television (TV) or real-time VoD will demand other network
performance characteristics then the Electronic Program Guide
(EPG) feature. While the linear live TV service demands more
stringent QoS performance characteristics like low transfer
delay, low packet delay variation and minimal packet loss, the
IPTV content control feature EPG accepts less tightened QoS
performance. The speciﬁcation [18] also describes a general
approach for dynamic QoS resource modiﬁcation between
Standard Deﬁnition (SD)-TV and HD-TV.
To fulﬁll an adequate QoS support for all typical IPTV
services, a high-level guideline for the use of trafﬁc management
is given by [19]. Therein, a potential ITU-T Y.1541 performance
class mapping for typical IPTV service applications is provided

63
International Journal on Advances in Telecommunications, vol 8 no 1 & 2, year 2015, http://www.iariajournals.org/telecommunications/
2015, © Copyright by authors, Published under agreement with IARIA - www.iaria.org
and visible in Table III. In general, the IPTV service category
Streaming demands most of the QoS resources, because it
is ”live”-communication with strict real-time prerequisites.
Besides, the rubric Download includes video content consuming
service like near VoD. It becomes also known as progressive
video download principle using by consuming Youtube-Videos.
TABLE III: Potential mapping of IPTV services to ITU-T
Y.1541 QoS classes [19].
IPTVservice
Service applications
ITU-T Y.1541 QoS class
5
4
3
2
1
0
7
6
Streaming
Live TVcontent
x
x
Video content
x
x
Audio content
x
Content control
x
Live speech
x
Live low- resolution
video content
x
Download
Video content
x
Data
x
Upload
Video content
x
Message
exchange
Interactive
x
Non- interactive
x
Middleware/
application
Portal
x
Payment transactions
x
D. WebRTC and QoS
WebRTC introduction
A main focus of the upcoming WebRTC technology
is to integrate real-time communication into standard web
browsers without the need of any additional browser plug-in or
software. The World Wide Web Consortium (W3C) deﬁnes an
Application Programming Interface (API) for web developers
[20]. It empowers the browser to capture video and audio inputs
of the client’s device. While the W3C is responsible for the
web developer API, the Internet Engineering Task Force (IETF)
standardizes all corresponding protocols in an active working
group named ”‘Real-Time Communication in WEB-browsers -
RTCweb” [21].
WebRTC has been speciﬁed to use secure transport of the
Real-Time Transport Protocol (RTP) packets with Secure Real-
Time Transport Protocol (SRTP) [22] including the mandatory
Datagram Transport Layer Security (DTLS) encryption protocol
[23] used for key negotiation [24]. For solving Network Address
Translation (NAT) problems, WebRTC also provides Session
Traversal Utilities for NAT (STUN) [25], Traversal Using
Relays around NAT (TURN) and Interactive Connectivity
Establishment (ICE) [26] capabilities. WebRTC requires
Session Description Protocol (SDP) for the negotiation of the
session properties and uses the whole SDP’s Offer/Answer-
Model.
The generic architecture of a WebRTC client is described
by [27] and illustrated in Figure 3. The components can be
described as follows:
• Webserver, which provides the web application to load
and includes a server with which the client connects to
handle all signaling;
• Browser, a generic web browser;
• Web application, application source code executed by the
web browser;
• Browser RTC Function, WebRTC component in the web
browser with voice, video and transport engines;
• Signaling Path, which is not speciﬁed but is needed to
 WebRTC Client
Webserver
Web application
(Javascript/HTML/CSS)
Browser
Other 
Browser
Functions
HTTP/WebSocket
Signaling Path
Other APIs
RTC APIs
Browser RTC 
Function (Voice/
Video/Transport
Engine)
Media Path
STUN connection
Legend
HTTP
SRTP
STUN
Not defined
Figure 3: WebRTC client based on [27].
transfer the SDP information between the WebRTC Client
and any other signaling endpoint (alternative bypassing
the Webserver);
• Media Path, which transports the payload;
• STUN Connection, which is a component to bypass NAT
restrictions.
For a WebRTC client to successfully run, it is necessary to
use a capable web browser. That means the browser has to
implement the Browser RTC Function. Currently, web browsers
like Google Chrome, Mozilla Firefox and Opera provide this
component by default. Therefore, all devices that are able to
run one of these browsers have the ability to use web-based
real-time communication. This includes all, desktop and tablet
computers, laptops and smartphones. At the moment, there
are restrictions in some operation systems like Apple’s iOS or
Microsoft’s Windows Phone.
In this subsection, we intend to ﬁnd out if QoS is a topic for
the developing WebRTC technology and their standardization
bodies. Typical use cases for WebRTC and their requirements
are described in [28]. Based on a simple video communication
service, some use cases are presented, involving voice or video
or data communication respectively combinations of those. For
instance, to realize a ”Multiparty on-line game with voice
communication” quick updates of the game state are required,
and they have higher priority than the voice [28]. Generally, the
browsers should be able to render good audio and video quality
for an adequate and acceptable jitter and packet loss values and
must support a time synchronized audio and video playback
function. If a WebRTC Client is accessed behind a residential
router that supports any kind of data trafﬁc prioritization, the
user should be able to take advantage of this QoS support,
provided by the network side. Summarizing, from an application
layer point of view the WebRTC use cases do not deﬁne some
exact and comparable values for the network related QoS
parameter like delay, jitter or packet loss.
DSCP-Marking
An IETF-Draft proposes a QoS mechanism at the WebRTC
client side using DSCP [29]. This document provides DSCP
values for browsers to use for various classes of trafﬁc. It
proposes how WebRTC applications can mark data packets for
a packet prioritization. It assumes that residential or wireless
networks support trafﬁc preferential treatment, based on DSCP.
For all other cases including cellular mobile-based network

64
International Journal on Advances in Telecommunications, vol 8 no 1 & 2, year 2015, http://www.iariajournals.org/telecommunications/
2015, © Copyright by authors, Published under agreement with IARIA - www.iaria.org
access, this suggestion is not appropriate. However, if the
real-time packet is transmitted towards a QoS capable core
network domain, a QoS class mapping is needed. Besides, client
side marking of IP packets is also a topic for the admission
control processes. The issue is, if the marking is allowed and
the network enforces the requested QoS parameters, other
(unwanted) applications may also request prioritized forwarding.
This situation may lead to overall high prioritized trafﬁc with
no beneﬁt for the actual intended application. Therefore, the
authorization of client-side requested QoS needs to be clariﬁed.
This draft does not cover any mapping processes for QoS
management inside an 3GPP-based mobile network Release 8
or inside a ﬁxed-line-based network, which does not use DSCP
marking mechanism.
QoS concepts for WebRTC accessed to a mobile EPS network
Currently, few concepts exist which propose the enrichment
of QoS for an WebRTC Client accessing a mobile EPS network.
The 3GPP speciﬁcation (Section Annex U of [9]) proposes a
new architecture for including WebRTC Clients into an IMS-
based EPC network. Hence, it describes only, that QoS support
can be provided. However, any deﬁnite method or mechanism
for this is missing. To ﬁll this gap, an authors proposal for a
QoS support method for WebRTC users, which are connected
to an EPS-based IMS network infrastructure is documented in
[2]. To fulﬁll this QoS support, the 3GPP-based architecture
(taken from Section Annex U of [9]) became enhanced with
the following entities named
• WebRTC Client with QoS Awareness,
• WebRTC QoS Signaling Function (WQSF), and
• eP-CSCF*, which is a modiﬁed eP-CSCF.
This proposed WebRTC QoS Architecture is depicted in Figure
4. The concept and its added entities will be described brieﬂy.
Provided in reference [2], the WebRTC communication is
enriched with the capabilities to request QoS resources via
signaling all used RTC data ﬂows to the WQSF, which adapts
the information and starts a signaling session with the Policy
and Charging Rules Function (PCRF) of the underlying core
access network. This concept reuses the standardized EPS
architecture as well as the new proposed integration of WebRTC
clients into the IMS network [9]. The WebRTC Client acts as
an UE that provides QoS awareness. It allows requesting QoS
characteristics during the active conversation phase. With the
help of periodical and event-based transmissions of the QoS
relevant information (used media type like audio or video, and
IP ﬂow information like IP addresses and port numbers) of
each established media stream, it is possible to use the EPS
related QoS mechanisms dynamically. This means that the web
application can start with one media type (e.g., audio) and add
another media type (e.g., video) during the conversation phase.
All involved components (e.g., end device, network entities)
have to support such a dynamic mechanism to enforce the
changed QoS resources.
For further understanding of the QoS control mechanisms
in the described architecture, Figure 5 depicts the general QoS
initiation procedure between the WebRTC Client and the EPS-
based network architecture.
The Web Application starts with the QoS control sending
relevant application layer QoS requirements, such as ﬂow and
media type information, towards the Application Function (AF).
After a possible negotiation and session information signaling,
W3
Gx
Iq
Mw
WebRTC 
Client with 
QoS 
Awareness
W1
W2
eIMS-AGW
I/S-CSCF
W4
W5
Legend
User Data
Signalling Data
eP-CSCF*
WebRTC 
Signalling 
Handler
WAF
H/V-PCRF
Web 
Application 
(including 
QoS 
Awareness 
Function)
WWSF
Rx
Evolved 
Packet Core
(EPC)
and 
E-UTRAN
SIP
Handler
ISC
WQSF
Figure 4: WebRTC QoS architecture for an EPS network [2].
E-UTRAN
WebRTC Client 
with QoS 
Awareness
Evolved
Packet
Core
PDN
GW
PCRF
AF
Application Layer Signaling
(SIP, etc.)
Dedicated Bearer Procedure
(QCI, Downlink Packet Filters)
Web Application
(including QoS 
Awareness 
Function)
Rx
Gx
PCEF
Figure 5: Principle of QoS initation.
the AF is aware of all QoS request parameters and will start the
Policy and Charging Control (PCC) procedures by sending the
mapped parameters into Diameter Attribute-Value-Pairs (AVP)s
via the Rx interface towards the PCRF. The application can
rely on the AFs endpoint to request QoS for its application
ﬂows. The PCRF will authorize the request and will start the
resource allocation via the Gx interface to the Policy Control
Enforcement Function (PCEF).
More details including the used QoS signaling and en-
forcement procedures, the evolved protocols and interfaces
respectively message sequence charts are presented in [2].
E. Summary of Status Quo
As we have illustrated in this section, the role of QoS
in telecommunication networks is heterogeneous. Depending
on the speciﬁc scope of the standardization bodies 3GPP and
ITU-T, the QoS relevant metrics and parameters differ among
themselves. For instance, utilizing the network performance
parameters IPTD, IPDV (Jitter) and IPLR the ITU-T recom-
mendation Y.1541 [8] is clearly focused on the IP network layer
(Open System Interconnection/International Organization for
Standardization (ISO/OSI)-Layer 3 [30]). Regarding the area of
applicability of the affected network segments all involved core
networks and access networks are intended, but not the UE.
Otherwise, the 3GPP deﬁnes in their Technical Speciﬁcation
TS 23.203 [13] a QoS parameter called QCI, which is closely
associated with packet forwarding treatment characteristics

65
International Journal on Advances in Telecommunications, vol 8 no 1 & 2, year 2015, http://www.iariajournals.org/telecommunications/
2015, © Copyright by authors, Published under agreement with IARIA - www.iaria.org
like guaranty of bitrate, packet scheduling priority, packet
delay budget and packet error loss rate. The scope of this
standardized QoS parameter QCI is focused on the EPS Bearer
lever (ISO/OSI Layer 2) between the mobile UE side, the
mobile access network, the mobile core network (e.g., EPC),
but not the IP backbone network, which is located behind the
mobile core network. Concluding this, it means that a QoS
mapping between heterogeneous telecommunication network
ecosystems, which are supporting RTC like conversational voice
or live TV is not simple. The challenge is to realize end-to-end
QoS over such various networks transparently and perceivable
for the end-user. From this perspective, QoS should be focused
on a horizontal QoS level (see also Figure 1). Otherwise, the
QoS metrics differ, depending on the functional layer (e.g., the
ISO/OSI protocol layers). It is obvious that the overall QoS
result depends on close interworking of all involved protocol
layers. For instance, in an UE the QoS E2E service can not
be realized successful, if all lower QoS layers (EPS Bearer,
E-UTRAN Radio Access Bearer (E-RAB) and Radio Bearer)
are not assuring their own QoS support (see also Figure 2).
This QoS perspective is also called vertical QoS level. An
overall QoS concept needs to be comply both, the horizontal
and the vertical QoS level.
Independent of the above described QoS taxonomy and
metrics, from the end-users perspective the expectations on a
communication application are highly relevant. The perceived
QoS by the users strongly depends on the performance of the
network. However, it is measured by the opinion of the users.
A typical subjective metric to measure this QoS performance
by the consumers is commonly known as a MOS method.
Though various users are consuming the same content (e.g.,
a Youtube Video) it will result in subjective and different
perception and quality ratings. As an example, one user may
rate the perceived quality as good, while another user will rate
the same communication application as not acceptable.
Regarding IPTV, the standardization bodies deﬁne different
IPTV Services and for each they assign different objective
network QoS classes (see also Table III). For that, in Section
III we propose an IPTV Service mapping into the relevant
network QoS classiﬁcation.
III.CONCEPT
A. QoS Enrichment for IMS-based IPTV
The authors concept of the enrichment of QoS for typical
IPTV services is based on speciﬁcations provided by the stan-
dardization bodies ITU-T and European Telecommunications
Standards Institute (ETSI) [19] [18]. The most common services
and features described are Live/Linear TV or Video, respectively
Audio on Demand as streaming application and also Download
applications like near video on demand (e.g., Youtube video
downloading) or the feature EPG as type of data download.
Various IPTV services with its particular real-time communi-
cation characteristics demand different QoS resources. Therein,
the IPTV services are related to network QoS classes, deﬁned
by 3GPP and ITU-T [13] [8].
We propose an assignment mechanism, which can be used
for IPTV services to correlated to their appropriate network
QoS classes. This mapping approach is depicted in Table IV.
In this table, a mapping is performed between the IPTV
Service Applications, taken from ITU-T Y.1920 with the
category ’Example Services’ of EPS QoS classes in 4G networks
(see also Table II).
As already described in the summary of Section II, the dif-
ferences between the two network QoS class approaches (3GPP
versus ITU-T) were indicated. Therefore, those consolidation
make sense.
As a result on the basis of the correlated IPTV services
(see also Table IV), a correlation of concrete services/features
to the adequate network QoS classes given by 3GPP and ITU-
T is shown. Accordingly, and for instance, the Live/Linear
TV service is associated with the EPS QoS class parameter
QCI value 2, priority value 3 and GBR, as well as the ITU-T
Y.1541 classes 0 or 6. This also encompasses the linked network
QoS parameter delay, packet loss and delay variation. Taking
into account that the EPS QoS classes and their corresponding
parameters Delay Budget and PELR are focused on the network
segments UE - Access Network - EPC, on the ISO/OSI protocol
layer 2. In contrast to this, the ITU-T QoS classes are aimed at
IP core and IP access network parts of the IP layer. Therefore,
both the vertical as well as the horizontal QoS levels differ.
As depicted in Table III, the preferred ITU-T QoS classes for
video content are class 1 and class 7. Based on this information
the mapping to the QCI classes leads to QCI class 4, 6 or
8. Each of these QCI classes share the same values for the
technical parameters delay and packet loss. The QCI class 4 is
used as favourite, because it has a higher priority as the other
two classes and it uses a GBR. For audio content the ITU-T
class 1 should be used. The mapping to the QCI approach is
similar to video content. As result the QCI class 4 is used for
audio content, too.
Another IPTV service, described in [1], is the content
control. For this service, the Table III gives information about
the use of ITU-T class 2. The mapping of the technical
parameters lead to the QCI class 5. Otherwise, compared to
real-time audio or video, the content control has not such high
demand for the bit rate. But the content control should not be
affected by congestion, so a higher priority is more preferable.
Therefore, the QCI class 5 is a valid approach.
B. Consolidating EPS and IMS-based IPTV Architectures for
QoS support
The proposed architecture is based on the presented IMS-
based IPTV architecture from [1], depicted in Figure 6, and
the analyzed concept for WebRTC accessing to an mobile EPS
network [2]. The principal components are marginally accom-
modated. The innovation in this approach is the enrichment of
QoS for the IMS-based IPTV environment with WebRTC. The
consolidated architecture of the proposed concept is depicted
in Figure 7. Components and interfaces of the architectures are
described in the following section.
Components and interfaces, which result from the approach
from [1], are:
• Components:
◦ Webserver
◦ WebRTC client
◦ Signaling GW (SGW)
◦ Core IMS
◦ SDF
◦ SSF
◦ SCF
◦ MCF
◦ MDF (modiﬁed for WebRTC)

66
International Journal on Advances in Telecommunications, vol 8 no 1 & 2, year 2015, http://www.iariajournals.org/telecommunications/
2015, © Copyright by authors, Published under agreement with IARIA - www.iaria.org
TABLE IV: Mapping of IPTV services towards 3GPP/ITU-T QoS classes.
IPTV Service Application
(ITU-T Y.1920)
IMS-based IPTV Services
(ETSI TS 182027)
EPS QoS Classes
(3GPP TS.23.203)
QoS Classes
(ITU-T Y.1541)
QCI
Priority
GBR /
Non-GBR
Streaming
Live TV content
Linear / Broadcast TV
2
3
GBR
0; 6
Video content
VoD, Network PVR,
Time-Shift TV
4
5
GBR
1; 7
Audio content
AoD
4
5
GBR
1
Content control
Content control
5
1
Non-GBR
2
Download
Video content
Push VoD, Near VoD
6; 8; 9
6; 8; 9
Non-GBR
4
Data
EPG
9
9
Non-GBR
5
Upload
Video content
Interactive TV
6; 8; 9
6; 8; 9
Non-GBR
4
WebRTC
Client
SSF
SCF
Core IMS
SDF
MCF
MDF
Signaling
GW
ISC
ISC
Xa
Gm
Xc
Xp
y2
Ss
Legend
SIP/SDP
SRTP
RTSP
HTTP
STUN...
Not defined
W2
Webserver
W1
Xd‘
e*
Figure 6: Architecture for WebRTC clients connected with an IMS-based IPTV ecosystem [1].
• Interfaces:
◦ W1
◦ W2
◦ e*
◦ Xp
◦ Xd (modiﬁed to Xd’)
◦ Gm
◦ Xa
◦ Ss
◦ ISC
◦ y2
The web server is needed to provide the WebRTC application
sources. The WebRTC application is executed in a WebRTC
capable browser. The architecture of a WebRTC client is
depicted in Figure 3. The application provides signaling
functions for the communication with the core network via the
inserted Signaling Gateway (SGW). Therefore, to make IMS-
based IPTV services accessible to WebRTC clients, Generic
IPTV Capabilities described in [18] are supported. As described
in [1], the SGW implements some of these generic capabilities.
This gateway function converts session control messages
coming from the WebRTC client side into Session Initiation
Protocol (SIP) messages for the IMS core network side and vice
versa. The SGW generates and forwards SIP messages towards
the IMS core network and acts in place of the WebRTC client
as a SIP capable signaling endpoint. As shown in Figure 6
the SGW also converts the session control messages from the
WebRTC client into Hypertext Transfer Protocol (HTTP) and
Real-Time Streaming Protocol (RTSP).
The core IMS is formed by the components, which are
speciﬁed in [9]. This bulk of components in the core IMS
implement several services, such as registration, provisioning,
routing, accounting, billing, etc.. For more details of the
components and their interworking and special function see
[9].
The architecture includes also several IPTV functional
components, which are standardized in [18]. The Service
Discovery Function (SDF) in Figure 7 provides information
about available services and related SSFs. The Service Selection
Function (SSF) provides information that contains the metadata
of the available content. The Service Control Function (SCF), is
a SIP Application Server (AS) and the reference point for IMS
UEs to start and control the IPTV sessions. The Media Control
Function (MCF) controls the media transport of the MDF and
receives instructions of the SCF and the UE. Also the selection
of the right MDF is part of the MCF. The selection is made
by several information, for example on codec information or
geographical location. After a successful selection, the MCF
transmits important session description information to the MDF.
The Media Delivery Function (MDF) contains the media data
and transmits them to the UE. In the architecture, the MDF is
a modiﬁed MDF for WebRTC clients, which is proposed in [1].
It provides all necessary functions to establish a session with
a WebRTC client. It supports STUN, ICE, DTLS and SRTP
functionality. Also, a streaming engine with WebRTC capable
codecs are implemented. These components are described more

67
International Journal on Advances in Telecommunications, vol 8 no 1 & 2, year 2015, http://www.iariajournals.org/telecommunications/
2015, © Copyright by authors, Published under agreement with IARIA - www.iaria.org
IPTV Application Server
WebRTC
Client
with QoS  
Awareness
SSF
SCF
Core IMS
SDF
MCF
MDF
Signaling
GW
ISC
Xa
Gm
Xc
Xp
y2
Ss
W2
W1
Xd‘
e*
Evolved Packet 
Core
(EPC)
and 
E-UTRAN
ISC
Rx
WQSF
Legend
SIP/SDP
SRTP
RTSP
HTTP
STUN
Diameter
Not defined
WWSF
PCRF
Figure 7: Consolidated architecture for IMS-based IPTV for QoS support.
in detail in [1].
The interfaces, shown in Figure 6, differ from the standard-
ized architecture. The interfaces for the service interconnection
are relocated from the user side to the SGW, which resides
in the Telco’s network infrastructure. The functionality and
the used protocols of the Gm, Xc and Xa interfaces, located
between the added SGW and the service or the core functions,
are still conform to their speciﬁcation [31]. The Ss, ISC
and y2 interfaces remain unaffected. In addition to these
interfaces above, some are modiﬁed or added and differ from
the speciﬁcation. These are described in more detail below.
The formerly undeﬁned Xp interface between the MCF and
the MDF is extended in the range of functions, respectively
through the extension of the MDF.
The W1 interface is a reference point between the WebRTC
client and the Webserver. It is used to download the application’s
source ﬁle using HTTP. Via this interface, the user receives
the latest WebRTC web application.
The W2 interface is located between the WebRTC client
and the SGW. The used protocol for this reference point is
not deﬁned and could be design by the developer. Therefore,
the developer can choose from several state-of-the-art client-
server protocols. The meaning of protocol messages regarding
this interface must cover the sense of the transfered protocol
messages from the interfaces Gm, Xa and Xc.
The Xd’ interface between the WebRTC client and the MDF
is responsible for media delivery using SRTP [32]. The original
Xd interface only supports RTP/RTCP or HTTP for media
delivery, so the modiﬁed interface for WebRTC interconnection
is named Xd’. This modiﬁcation results from the mandatory
use of a secure connection in WebRTC [22].
The e* interface is a second reference point between the
WebRTC client and the MDF. This interface is added in the
concept of [1]. It is used for STUN connectivity checks between
the WebRTC client side and the MDF. STUN is a mandatory
to implement feature of WebRTC because the most WebRTC
clients are behind NAT ﬁrewalls.
To enrich the whole environment with QoS, some compo-
nents and interfaces have been added or modiﬁed. The resulting
architecture is depicted in Figure 7 and its components and
interface are described as follows:
• Components:
◦ WWSF (added)
◦ WebRTC client with QoS Awareness (modiﬁed)
◦ IPTV Application Server combining SCF with WQSF
(added)
◦ EPC (added)
• Interfaces:
◦ W2 (modiﬁed)
◦ Rx (added)
In contrast to Figure 6, the WebRTC Web Server Function
(WWSF) is depicted and represents the Webserver of the
original architecture. The WWSF provides the actual WebRTC
web application sources. This function may also be used for
web-based authentication and authorization.
The WebRTC application is modiﬁed to support QoS.
Therefore, to make QoS accessible to the WebRTC client,
a special QoS awareness function is integrated. This integrated
awareness function retrieves periodical and event-based ﬂow
information of the established and used media channels.
The IPTV Application Server acts as SIP AS combining
the SCF with the WQSF, both functions are acting together as
a single endpoint against the core IMS. The SCF part handles
the IPTV speciﬁc messages and provides functions to control
the session in a way which is described in [18]. The internal
WQSF processes the WebRTC related ﬂow information into
Diameter-based QoS request messages and hence acts as an
AF against the EPS network. More details of this WQSF are
described in Figure 4 and in [2].
As access and control network we considered the EPC
connected with the E-UTRAN. Together, they both build the
overall EPS. To achieve QoS for the customers, the PCC
concept, involving the PCRF and PCEF (as well as other internal
components), is fully integrated into the EPS infrastructure.
The interface W2 is extended with speciﬁc QoS information
messages. The functionality to support messages from the Gm,
Xa and Xc remains unaffected.
A newly added interface is the Rx interface. This reference
point is located between the IPTV AS, here the AF of the

68
International Journal on Advances in Telecommunications, vol 8 no 1 & 2, year 2015, http://www.iariajournals.org/telecommunications/
2015, © Copyright by authors, Published under agreement with IARIA - www.iaria.org
QoS Classification:
QoS Mechanisms:
WebRTC 
Client
With
QoS 
Awareness
(UE)
E-
UTRAN
(eNodeB)
EPC
(SGW,
PGW)
IPTV
Backend
(MDF)
EPS QoS Classes (QCI)
ITU-T Y.1541
EPS Bearer
DSCP, IntServ, etc.
Figure 8: QoS Enforcement on the User Data Plane.
WQSF part of the AS, and a PCRF of the access network. The
utilized protocol at this reference point is Diameter and it is
used to transmit QoS related messages. The speciﬁc Diameter
messages are described in [2] in more detail.
Figure 8 depicts the E2E chain for QoS enforcement
between the UE and the MDF. In this chain two QoS
classiﬁcation schemes are applied, which exploits the mapping
as proposed in Table IV. On the mobile network side, the
user trafﬁc treatment is categorized through the EPS QCI. To
fulﬁll the QCI requirements, the user trafﬁc is treated in an
adequate EPS Bearer. On the IPTV Backend side, the user trafﬁc
treatment is categorized based on the recommendation of ITU-T
Y.1541. For this, multiple QoS enforcement mechanisms can
be used (e.g., DSCP, IntServ, MPLS). To achieve the expected
quality on the consumer side, a mapping of the different QoS
mechanisms is also necessary.
C. Proof of Concept (EPS and QoS with IMS IPTV over
WebRTC)
Testbed components
To verify the functionality and the usability of the proposed
concept, a testbed is prepared. With this testbed, the QoS
initiation procedures for the content on demand use case (audio
and video) is implemented and tested. However the actual
enforcement of the QoS parameters on the user data plane is
still outstanding.
For testing the concept the Google Chrome browser in
version 38, which supports WebRTC, is used. The basis of
this testbed is formed by an open-source IMS core network
implementation originating from Fraunhofer FOKUS institute
and now available on reference [33].
E-UTRAN functionality is provided by a LTE Femto Cell
prototype with integrated eNodeB functionality by the company
ip.access [34]. As mobile core network, an OpenEPC Rel. 3
testbed, initially developed from Fraunhofer FOKUS institute,
is used [35].
The WWSF is an Apache HTTP Web Server, which provides
the web application. The WebRTC client is implemented by
using HTML5 and JavaScript. Based on this the Graphical User
Interface (GUI) of the client is a responsive web site design
using the jQuery mobile framework. This framework makes
web sites accessible to all smart phone, tablet and desktop
devices. The clients source code, based on JavaScript, utilizes
the WebRTC API.
The SGW is written in C# and designed to handle several
WebRTC Client sessions simultaneously. The prototyped SGW
provides the main functionality for the interaction with the Gm
and the Xa interface. The SGW ﬁrstly appears in [1] and is
more sophisticated to cover the QoS support. Based on the
sipsorcery project, an enhanced SIP protocol stack supporting
IMS speciﬁc extensions is implemented [36].
Also, the IMS-based IPTV components are prototyped and
inherited from [1]. All prototyped IPTV components, written
in Java, are based on the technical speciﬁcation [18]. The
IPTV AS, containing the SCF and the WQSF, accepts the
SIP requests via the JAIN-SIP stack. The SCF part handles
all relevant SIP IPTV messages. The WQSF adapts the SIP
requests containing the QoS relevant information into Diameter
requests, based on JavaDiameterPeer library included in the
OpenIMSCore project. The implementation of the MDF parses
the session information, passed by the MCF. Within the MDF,
the information are distributed to different engine functionalities.
Open-source frameworks are used for
• The ICE agent with the STUN functionalities (icedjava)
[37]
• The DTLS key exchange (BouncyCastle) [38],
• The SRTP implementation (srtplight) [39],
• And the streaming server (FFmpeg) [40].
Message Sequence
A sequence for Video on Demand over WebRTC with
additional QoS reservation is depicted in Figure 9. The
sequences can be described as follows:
Sequence 1) depicts the service discovery whereas the
WebRTC client maps the service discovery messages into
feasible messages to the Signaling Gateway via W2 and vice
versa and whereas the Signaling Gateway maps the service
discovery messages into feasible messages to the SDF via Gm
and ISC and vice versa.
Sequence 2) depicts the service selection whereas the
WebRTC client maps the service selection messages into
feasible messages to the Signaling Gateway via W2 and vice

69
International Journal on Advances in Telecommunications, vol 8 no 1 & 2, year 2015, http://www.iariajournals.org/telecommunications/
2015, © Copyright by authors, Published under agreement with IARIA - www.iaria.org
Media Control
Messages
WebRTC Client
Signaling GW
SSF
SDF
Core IMS + 
SCF/WQSF
MCF
MDF
Srv Discovery
Messages
Srv Selection
Messages
Srv Control
Messages
1)
2)
3)
4a)
4b)
5)
Service Discovery
ICE Hole Punching
 Service Control Messages via SIP 
 Service Discovery via SIP/HTTP/DVBSTP 
 Media Control via RTSP 
 STUN / ICE Procedures for Real-Time-Connection Establishment 
Content (audio/video) streaming
 Secure Real-Time-Media Delivery via SRTP 
Srv Selection
SIP/HTTP/DVBSTP
Service Selection
PCRF
6)
 QoS relevant information via SIP
QoS rel. information
Messages
Triggering of QoS Resource Reservation
Resource Reservation via Diameter
Service Control 
Messages via SIP
Service Control
Media Control
via Xp
Media Control
Figure 9: Sequence chart for WebRTC-based VoD with QoS resource reservation.
versa and whereas the Signaling Gateway maps the service
selection messages into feasible messages to the SSF and via
Xa vice versa. In the messages from the SSF, the client receives
the service identiﬁer to start the service.
Sequence 3) depicts the service control whereas the
WebRTC client maps the service control messages into feasible
messages containing the service identiﬁer to the Signaling
Gateway via W2 and vice versa and whereas the Signaling
Gateway maps the service control messages into feasible
messages to the IMS core via Gm and vice versa. With smart
SIP routing the core transmits the messages to the SCF via IMS
Service Control (ISC) by triggering on the service identiﬁer. The
SCF initiate the service delivery with session control messages
via y2. Following session control message are transmitted from
the user side to the SCF and vice versa.
Sequence 4a) depicts the media control whereas the
WebRTC client maps the media control messages into feasible
messages to the Signaling Gateway via W2 and vice versa
and whereas the Signaling Gateway maps the media control
messages into feasible messages to the MCF 16 via Xc and
vice versa. Sequence 4a) further depicts the media control
whereas the MCF maps the media control messages into feasible
messages to the MDF via Xp and vice versa. The concurrent
running sequence 4b) depicts the ICE/STUN procedures to
establish a real-time path between the WebRTC Client and the
MDF via e*.
Sequence 5) depicts the secured real-time streaming of
audio/video between the WebRTC client and the MDF via Xd.
Sequence 6) depicts the QoS control process with signaling
of QoS relevant information from the WebRTC client towards
the targeted WQSF. The QoS relevant information is then used
to request QoS related resources on the EPS network. This
Sequence 6 is further described in the following subsection.
Triggering of QoS Resource Reservation
For triggering the QoS resource reservation, Figure 10
depicts a detailed message ﬂow chart where the QoS relevant
information is forwarded from the WebRTC client towards the
QoS related network entities.
The UE’s running WebRTC application retrieves all rel-
evant information from the browser’s internal Browser RTC
function of the active WebRTC PeerConnection and extracts
all connectivity pairs in which the user data is transmitted,
received, or both. The application stores this connectivity
information (including local and remote IP addresses as well
as their transported media type) and prepares it into an overall
JavaScript Object Notation (JSON) document, displayed in
Listing 1. For each media ﬂow, an array element will be
added into the JSON document. As an overall QoS parameter,
the document contains a ﬁeld named serviceType, which
incorporates the name of the used IPTV service. With that, all
involved network entities can adapt the speciﬁc characteristics
taken from Table IV for the IPTV application ﬂow handling.
In the example, the serviceType is set to streaming video vod.
Analogue to this, it is also possible to use other IPTV services
based on Table IV.
The presented JSON document (see Listing 1) will be
relayed from the WebRTC client side into the SIP-based IMS
environment. The Signaling Gateway enforces the conversion
of the QoS relevant information received from the WebRTC
proprietary signaling channel into standardized SIP messages
(including the JSON document as SIP body).

70
International Journal on Advances in Telecommunications, vol 8 no 1 & 2, year 2015, http://www.iariajournals.org/telecommunications/
2015, © Copyright by authors, Published under agreement with IARIA - www.iaria.org
WQSF
PCRF
Rx
Successful Message (e.g. 200 OK)
ISC
Processing QoS relevant information 
Map into 
Diameter Request(s)
RA/AA Request
Media: Audio
RA/AA Request
Media: Video
RA/AA Answer
Media: Audio
RA/AA Answer
Media: Video
Processing Rx Diameter Requests 
EPS specific Resource Reservation signaling,
QCI based enforcement of Dedicated Bearer(s)
Processing Diameter Responses 
Aggregate Responses for further 
signaling
Signaling 
Gateway
Gm
...
...
...
QoS relevant information Message 
(SIP with JSON document)
 WebRTC session closing and QoS deactivation (3)
 QoS activation/modification during active WebRTC session (2):
 WebRTC session without QoS established (1) 
WebRTC 
Client
(QoS Aware)
W2
Conversion
WebSocket to SIP
QoS relevant information Message
(JSON document)
Conversion
SIP to WebSocket
Successful Message
Figure 10: Sequence for QoS activation during a WebRTC session.
Listing 1: JSON document including QoS relevant information,
provided by the WebRTC client.
{
"cmd": "statisticInformationrequest",
"attributes": {
"sessionId": "406abf0d12174....",
"localIdentity": "alice@domain.test",
"messageType": "update",
"remoteIdentity": "tvservice@domain.test",
"serviceType": "streaming_video_vod"
"flows": [
{
"remoteAddress": "192.168.7.4:34961",
"localAddress": "192.168.13.63:56878",
"mediaType": "audio"
},
{
"remoteAddress": "192.168.7.4:40546",
"localAddress": "192.168.13.63:56878",
"mediaType": "video"
}
]
}
}
The WQSF performs the processing of the incoming
JSON document. According to the content of the objects in
the JSON document the WQSF generates related Diameter-
based AVPs, as shown in Listing 2. For instance, the AF-
Application-Identiﬁer contains the intended serviceType: stream-
ing video vod. Furthermore, the request also comprises the
Flow-Description for the given video media ﬂow.
Listing 2: Mapping of VoD with media type video into a
Diameter Request.
Command Code: 265 AA-R (Request)
ApplicationId: 3GPP Rx (16777236)
...
AVP: Subscription-Id(443)
AVP: Subscription-Id-Type(450)
val=END_USER_SIP_URI (2)
AVP: Subscription-Id-Data(444)
val=sip:alice@domain.test
AVP: Media-Component-Description(517) vnd=TGPP
AVP: Media-Type(520) vnd=TGPP val=VIDEO (1)
AVP: Media-Sub-Component(519) vnd=TGPP
AVP: Flow-Number(509) val=1
AVP: Flow-Description(507) val=
PERMIT OUT udp from 192.168.13.63 56878

71
International Journal on Advances in Telecommunications, vol 8 no 1 & 2, year 2015, http://www.iariajournals.org/telecommunications/
2015, © Copyright by authors, Published under agreement with IARIA - www.iaria.org
to 192.168.7.4 40546
AVP: Flow-Description(507) val=
PERMIT IN udp from 192.168.7.4 40546
to 192.168.13.63 56878
...
AVP: AF-Application-Identifier(504) vnd=TGPP
val=73747265616d696e675f766964656f5f766f64
// Hex ASCII for: "streaming_video_vod"
Sequence 1 in Figure 10 shows the WebRTC session
establishment phase. All procedures for this establishment such
as the exchange of security keys, candidates for addressing
issues etc. are covered in here but will not be described further.
The ﬁrst sequence is ﬁnished at this point. The establishment
of the QoS characteristics will be processed in Sequence 2.
The second sequence depicts the actual QoS resource
reservation interaction of the WebRTC session as well as
the information sending process towards the WQSF. The
WebRTC QoS Awareness Function processes QoS relevant
session information of each media channel and forwards this
as a JSON document towards the SGW. The SGW performs
a conversion of the WebSocket message into a SIP request
including the JSON document. This request will be forwarded
through the core components towards the WQSF which maps
this QoS relevant information into adequate Diameter requests.
For each ﬂow and media type (audio and video), described in
the ﬂows-array, the WQSF generates respective Re-Auth- or
Authorise-Authenticate-Request (RAR/AAR) messages based
on the JSON document [41]. The PCRF receives the Diameter
messages and executes an resource reservation signaling based
on the EPS QoS Class principles [13]. The proposed mapping is
based on Table IV. Based on the given AF-Application-Identiﬁer
and the described Media-Type (audio and video), the QCI-based
establishment and enforcement with Dedicated Bearers towards
the PCEF inside the EPS core network. After processing
the incoming Diameter Requests, the PCRF responses with
Diameter-Answers towards the WQSF respectively. Inside the
WQSF, the answers are stored and aggregated, related to that
base JSON document. If all requests are answered successfully,
the WQSF replies with a successful message (i.e., SIP Response
200 OK) along the initial way through the core network
components. Finally, the SGW performs a conversion of the
SIP response into WebSocket message.
The third sequence depicts the session closing procedures
and has an analogue behavior. Initiated by the WebRTC client
side, the session closing and QoS deactivation process follows
same pattern as Sequence 2.
IV.CONCLUSION
The authors showed how QoS management could work for
a WebRTC client which is connected to a mobile 4G network.
In particular, we proposed a novel concept, which includes the
following:
• An adequate QoS class mapping (see also Table IV), which
can be implemented into all involved network elements
(4G mobile and IPTV core network);
• An aggregated network architecture (see also Figure 7);
• A detailed QoS control concept, which is already proto-
typed and tested in practice (see also Figure 10);
• A concept for E2E QoS enforcement on the user data
plane.
Considering an use case for live TV, respectively VoD,
it is pointed out how WebRTC clients could beneﬁt from a
resource reservation rather than having no QoS allocation. For
IPTV services like Near VoD (e.g., YouTube watching) a QoS
support as proposed in Table IV should be helpful for mobile 4G
end-users. We see a high potential to combine our WebRTC-
based QoS concept with the VoD services utilizing recent
HTML5 technologies. The technical details for a successful
consolidation are for further study.
The following aspects are relevant within this journal
contribution and are still outstanding at the moment:
• Implementation of the QoS relevant enforcement compo-
nents in the User Plane and their performance testing;
• Analyzing the subjective end user expectations correlating
to the different IPTV services;
• Involving other IPTV quality assessment methods (instru-
mental and perceptual).
The authors are positive about the increasing relevance of
end-to-end QoS in heterogeneous networks in the near future.
Furthermore, several ﬁfth generation (5G) white-papers
forecast the heavily growing need for QoS resources for the
next years [42]. With the identiﬁed new upcoming technologies
therein, such as 3D audio, 3D video and ultra-high-deﬁnition
formats and codecs, the demand for lower latencies and higher
per-user data rates will increase tremendously. In that process,
it is important to detect the necessary QoS demands for each
contexts individually. Not until then, it is possible to deal fairly
on the ﬁnite network resources and serve all users with the
best experience for their individual real-time applications.
QoS should be made accessible, not only statical by network
providers pre-conﬁgured parameters but also dynamically allo-
catable through the users applications regarding his current state
of communication. The author’s proposed concept, providing
an interface for the user applications to request for a QoS
reservation, could be a solution for the future.
ACKNOWLEDGMENT
The Telekom Innovation Laboratories (T-Labs) and the
Hochschule fuer Telekommunikation Leipzig (HfTL) are ac-
tively cooperating since 2011. Both are working together
on common topics in the area of ﬁxed-/mobile converged
network infrastructure including IMS-based services. They are
participating in ongoing projects relating WebRTC with Telco
Assets like QoS and interoperability. This paper also presents
some of the results and acquired experience arising from [1]
and [2].
REFERENCES
[1]
T. Bach, M. Maruschke, J. Zimmermann, K. Haensge, and M. Baumgart,
“Combination of IMS-based IPTV services with WebRTC,” ICCGI 2014,
The 9th International Multi-Conference on Computing in the Global
Information Technology, IARIA, June 2014, pp. 140–145.
[2]
K. Haensge and M. Maruschke, “QoS-based WebRTC access to an
EPS network infrastructure,” in 2015 18th International Conference on
Intelligence in Next Generation Networks (ICIN 2015), Paris, France,
Feb. 2015, pp. 9 – 15.
[3]
C.Aras, J.Kurose, D.Reeves, and H.Schulzrinne., “Real-time commu-
nication in packet-switched networks,” Proceedings of the IEEE, Jan
1994, pp. 122 – 139.
[4]
ITU-T, “Internet protocol aspects
Quality of service and network
performance;Internet
protocol
data
communication
service
IP
packet transfer and availability performance parameters,” International
Telecommunication Union (Telecommunication Standardization Sector),

72
International Journal on Advances in Telecommunications, vol 8 no 1 & 2, year 2015, http://www.iariajournals.org/telecommunications/
2015, © Copyright by authors, Published under agreement with IARIA - www.iaria.org
REC Y.1540, Nov. 2007. [Online]. Available: http://www.itu.int/rec/T-
REC-Y.1540-200711-S/en
[5]
H. Schulzrinne, S. Casner, R. Frederick, and V. Jacobson, “RTP: A
Transport Protocol for Real-Time Applications,” RFC 3550 (Standard),
Internet Engineering Task Force, Jul. 2003, updated by RFCs 5506,
5761, 6051, 6222. [Online]. Available: http://www.ietf.org/rfc/rfc3550.txt
[6]
ITU-T, “TRANSMISSION SYSTEMS AND MEDIA, DIGITAL
SYSTEMS AND NETWORKS, International telephone connections
and circuits
General Recommendations on the transmission quality
for an entire international telephone connection-One-way transmission
time,” International Telecommunication Union (Telecommunication
Standardization Sector), REC G.114, May 2003. [Online]. Available:
http://www.itu.int/rec/T-REC-G.114-200305-I/en
[7]
——, “Quality of telecommunication services: concepts, models,
objectives and dependability planning Terms and deﬁnitions related
to the quality of telecommunication services; Deﬁnitions of terms
related to quality of service,” International Telecommunication Union
(Telecommunication Standardization Sector), REC E.800, Sep. 2008.
[Online]. Available: http://www.itu.int/rec/T-REC-E.800-200809-I/en
[8]
——,
“Internet
protocol
aspects
Quality
of
service
and
network performance;Network performance objectives for IP-based
services,” International Telecommunication Union (Telecommunication
Standardization Sector), REC Y.1541, Dec. 2011. [Online]. Available:
http://www.itu.int/rec/T-REC-Y.1541-201112-I/en
[9]
3GPP, “IP Multimedia Subsystem (IMS); Stage 2,” 3rd Generation
Partnership Project (3GPP), TS 23.228 v11.4.0, Mar. 2012. [Online].
Available: http://ftp.3gpp.org/specs/html-info/23228.htm
[10]
ITU-T, “Next Generation Networks
Frameworks and functional
architecture
models;General
overview
of
NGN,”
International
Telecommunication
Union
(Telecommunication
Standardization
Sector),
REC
Y.2001,
Dec.
2004.
[Online].
Available:
http://www.itu.int/rec/T-REC-Y.2001/en
[11]
3GPP, “Quality of Service (QoS) concept and architecture,” 3rd
Generation Partnership Project (3GPP)(Release8), TS 23.107 v8.2.0, Sep.
2011. [Online]. Available: http://www.3gpp.org/DynaReport/23107.htm
[12]
——, “E-UTRA and E-UTRAN overall description,” 3rd Generation
Partnership Project (3GPP), TS 36.300 v8.12.0, Mar. 2010. [Online].
Available: http://ftp.3gpp.org/Specs/html-info/36300.htm
[13]
——, “3rd Generation Partnership Project; Technical Speciﬁcation
Group Services and System Aspects; Policy and charging control
architecture (Release 8),” 3rd Generation Partnership Project (3GPP),
TS 23.203 v8.14.0, Jun. 2012. [Online]. Available: http://www.3gpp.org
/DynaReport/23203.htm
[14]
ETSI, “Telecommunications and Internet converged Services and
Protocols for Advanced Networking (TISPAN); Resource and Admission
Control Sub-System (RACS): Functional Architecture,” European
Telecommunications Standards Institute (ETSI), ES 282003 v3.5.1, Apr.
2011. [Online]. Available: http://pda.etsi.org/pda/queryform.asp
[15]
K. Nichols, S. Blake, F. Baker, and D. Black, “Deﬁnition of the
Differentiated Services Field (DS Field) in the IPv4 and IPv6
Headers,” RFC 2474 (Proposed Standard), Internet Engineering Task
Force, Dec. 1998, updated by RFCs 3168, 3260. [Online]. Available:
http://www.ietf.org/rfc/rfc2474.txt
[16]
ETSI, “Speech and multimedia Transmission Quality (STQ); QoS
and network performance metrics and measurement methods; Part4,”
European Telecommunications Standards Institute (ETSI), ES 202765-4
v1.2.1, May 2014. [Online]. Available: http://pda.etsi.org/pda/queryform.
asp
[17]
ITU-T, “Objective perceptual multimedia video quality measurement in
the presence of a full reference,” International Telecommunication Union
(Telecommunication Standardization Sector), REC J.247, Aug. 2008.
[Online]. Available: http://www.itu.int/rec/T-REC-J.247-200808-I/en
[18]
ETSI, “Telecommunications and Internet converged Services and Pro-
tocols for Advanced Networking (TISPAN); IPTV Architecture; IPTV
functions supported by the IMS subsystem,” European Telecommu-
nications Standards Institute (ETSI), TS 182027 v3.5.1, Mar. 2011,
Available: http://www.etsi.org/deliver/etsi ts/182000 182099/182027/03.
05.01 60/ts 182027v030501p.pdf [retrieved: May, 2015].
[19]
ITU-T, “IPTV over NGN
Guidelines for the use of trafﬁc
management mechanisms in support of IPTV services,” International
Telecommunication Union (Telecommunication Standardization Sector),
REC Y.1920, Jul. 2012. [Online]. Available: http://www.itu.int/rec/T-
REC-Y.1920-201207-I
[20]
C. Jennings, A. Narayanan, D. Burnett, and A. Bergkvist, “WebRTC
1.0: Real-time communication between browsers,” W3C, W3C Working
Draft, Feb. 2015, http://www.w3.org/TR/2015/WD-webrtc-20150210/.
[21]
IETF. Rtcweb status pages. [Online]. Available: http://tools.ietf.org/wg
/rtcweb/ [retrieved: May, 2015]
[22]
C. Perkins, M. Westerlund, and J. Ott, “Web Real-Time Communication
(WebRTC): Media Transport and Use of RTP draft-ietf-rtcweb-rtp-usage-
11,” Internet-Draft, Internet Engineering Task Force, Dec. 2013, Avail-
able: http://tools.ietf.org/id/draft-ietf-rtcweb-rtp-usage-23.txt [retrieved:
May, 2015].
[23]
E. Rescorla and N. Modadugu, “Datagram Transport Layer Security
Version 1.2,” RFC 6347 (Proposed Standard), Internet Engineering Task
Force, Jan. 2012, Available: http://www.ietf.org/rfc/rfc6347.txt [retrieved:
May, 2015].
[24]
E. Rescorla, “WebRTC Security Architecture draft-ietf-rtcweb-security-
arch-07,” Internet-Draft, Internet Engineering Task Force, Jul. 2013,
Available: http://tools.ietf.org/id/draft-ietf-rtcweb-security-arch-11.txt
[retrieved: May, 2015].
[25]
J. Rosenberg, R. Mahy, P. Matthews, and D. Wing, “Session Traversal
Utilities for NAT (STUN),” RFC 5389 (Proposed Standard), Internet
Engineering Task Force, Oct. 2008, Available: http://www.ietf.org/rfc/rf
c5389.txt [retrieved: May, 2015].
[26]
J. Rosenberg, “Interactive Connectivity Establishment (ICE): A Protocol
for Network Address Translator (NAT) Traversal for Offer/Answer
Protocols,” RFC 5245 (Proposed Standard), Internet Engineering Task
Force, Apr. 2010, updated by RFC 6336. Available: http://www.ietf.org
/rfc/rfc5245.txt [retrieved: May, 2015].
[27]
H. Alvestrand, “Overview: Real Time Protocols for Brower-based
Applications draft-ietf-rtcweb-overview-08,” Internet-Draft, Internet En-
gineering Task Force, Sep. 2013, Available: http://tools.ietf.org/id/draft-
ietf-rtcweb-overview-13.txt [retrieved: May, 2015].
[28]
“Web Real-Time Communication Use Cases and Requirements,” RFC
7478 (Informational), Internet Engineering Task Force, Mar. 2015.
[Online]. Available: http://www.ietf.org/rfc/rfc7478.txt
[29]
S. Dhesikan, C. Jennings, D. Druta, P. Jones, and J. Polk, “DSCP and
other packet markings for WebRTC QoS: draft-ietf-tsvwg-rtcweb-qos-03,”
Internet-Draft, Internet Engineering Task Force, Nov. 2014, Available:
https://tools.ietf.org/html/draft-ietf-tsvwg-rtcweb-qos-03 [retrieved: May,
2015].
[30]
International Organization for Standardization, “Information technology
- Open Systems Interconnection - Basic Reference Model,” International
Organization for Standardization, REC ISO/IEC 7498-1:1994, Nov.
1994. [Online]. Available: http://www.iso.org
[31]
ETSI, “Telecommunications and Internet converged Services and Pro-
tocols for Advanced Networking (TISPAN); IMS-based IPTV stage 3
speciﬁcation,” European Telecommunications Standards Institute (ETSI),
TS 183063 v3.5.2, Mar. 2011, Available: http://www.etsi.org/deliver/
etsi ts/183000 183099/183063/03.05.02 60/ts 183063v030502p.pdf [re-
trieved: May, 2015].
[32]
M. Baugher, D. McGrew, M. Naslund, E. Carrara, and K. Norrman,
“The Secure Real-time Transport Protocol (SRTP),” RFC 3711 (Proposed
Standard), Internet Engineering Task Force, Mar. 2004, updated by
RFC 5506. Available: http://www.ietf.org/rfc/rfc3711.txt [retrieved: May,
2015].
[33]
Openimscore.org. Opensourceims. [Online]. Available: http://www.ope
nimscore.org/ [retrieved: May, 2015]
[34]
ip.access Ltd. ip.access: leaders in 2g, 3g and 4g end-to-end small cell
solutions. [Online]. Available: http://www.ipaccess.com/ [retrieved: May,
2015]
[35]
OpenEPC. Openepc.com. [Online]. Available: http://www.openepc.com/
[retrieved: May, 2015]
[36]
T. Bach. sipsorcery-fork. [Online]. Available: https://github.com/hftl-
ims-research/sipsorcery-fork [retrieved: May, 2015]
[37]
inspired
social.
Open
source
ICE
implementation.
[Online].
Available: http://code.google.com/p/inspired-social/source/browse/trunk/
StunServer/net/mc cubed/icedjava?spec=svn20&r=20#icedjava
[re-
trieved: May, 2015]

73
International Journal on Advances in Telecommunications, vol 8 no 1 & 2, year 2015, http://www.iariajournals.org/telecommunications/
2015, © Copyright by authors, Published under agreement with IARIA - www.iaria.org
[38]
Legion of the Bouncy Castle Inc. Bouncy Castlee Crypto API. [Online].
Available: http://www.bouncycastle.org [retrieved: May, 2015]
[39]
steely gint. set of classes implementing a simple (S)RTP stack. [Online].
Available: https://github.com/steely-glint/srtplight [retrieved: May, 2015]
[40]
FFmpeg: a open source cross-platform solution to record, convert and
stream audio and video. [Online]. Available: http://www.ffmpeg.org/ind
ex.html [retrieved: May, 2015]
[41]
“Diameter Network Access Server Application,” RFC 7155 (Proposed
Standard), Internet Engineering Task Force, Apr. 2014. [Online].
Available: http://www.ietf.org/rfc/rfc7155.txt
[42]
4GAmericas. 4G Americas’ Recommendations on 5g Requirements and
Solutions. [Online]. Available: http://www.4gamericas.org/en/resources/
white-papers/ [retrieved: May, 2015]

