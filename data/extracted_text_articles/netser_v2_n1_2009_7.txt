Dynamic End-to-End QoS Provisioning and Service Composition over 
Heterogeneous Networks 
 
 
N. Van Wambeke1,2, F. Racaru1,2, C. Chassot1,2, and M. Diaz1,2 
1CNRS ; LAAS ; 7 avenue du colonel Roche, F-31077 Toulouse, France 
2Université de Toulouse ; UPS, INSA, INP, ISAE ; LAAS ; F-31077 Toulouse, France 
{van.wambeke, racaru, chassot, diaz}@laas.fr 
 
 
Abstract 
 
This paper presents an approach that aims to 
provide Quality of Services (QoS) over heterogeneous 
Internet domains. The goal is to install and to manage 
QoS inside each domain and to ensure it on the end to 
end data path. QoS is a key requirement representing 
a significant infrastructure upgrade for future 
networks. Our proposal relies on the multi-service, 
multi-technology model based on Bandwidth Broker, 
entity in charge of controlling a given domain. It 
introduces a concept able to provide QoS in a set of 
domains using an inter domain signaling protocol as 
well as dynamic provisioning schemes that optimize 
resource usage. The approach is independent of the 
intra-domain routing protocol. Moreover it is 
independent of the underlying technology and imposes 
minimal constraints leaving a maximum degree of 
freedom for users and domains providers to implement 
specific internal solutions. The efficiency of the 
solution is shown through extensive simulations. 
Keywords: 
QoS, 
CAC 
algorithm, 
adaptive 
provisioning, resource optimization 
 
1. Introduction 
The progress of new technologies during past years 
contributed to a development of new types of various 
applications. 
These 
applications, 
simultaneously 
multimedia and/or multi users, cover a large spectrum 
such as IP telephony, video on demand, streaming, 
tele-engineering, interactive games, peer to peer. Such 
applications need a special handling for their packets 
in order to work properly, thus they require new 
services other than those supported by the actual 
Internet. At the same time, current (and future) 
networks are deeply heterogeneous: from IP wired 
networks, to WI-FI, satellite, and UMTS. Moreover, 
each domain (that we assimilate later on to 
Autonomous System - AS) has independent policies in 
terms of services, security, admission control etc. As a 
result, the problem of end to end QoS must be 
addressed. QoS is targeted to support new applications 
and 
mechanisms. 
Therefore, 
QoS 
allows 
the 
deployment of richer services, potentially chargeable 
per user, thus it is a source of revenue, both for 
operators and for service providers. This analysis leads 
us to answer the next challenge: how to offer and 
control in the network the QoS required by 
applications (especially multimedia and real-time 
ones), taking into account the strong heterogeneity of 
the multi domain context Internet.  
 
The convergence of services over the same IP 
infrastructure and the growth of the number of users 
lead the Internet community to research on standards 
and prototypes in order to implement these new 
technologies.  
Actually, all packets receive the same treatment in 
network devices, without any differentiation. The need 
to offer new services demands a reconsideration of 
actual Internet packet treatment: 
• new functionalities are needed in network devices 
(routers) 
in 
order 
to 
support 
service 
differentiation; 
• new provisioning, resource management and 
admission control mechanisms are required on the 
data path; 
• communication and cooperation between network 
equipments 
are 
required; 
these 
exchanges 
represent the signaling necessary to install and 
manage the quality of service on the data path. 
In the following of this section, extending the work 
presented in [1], we present several proposals that 
aimed to deal with the QoS at different level on 
Internet architecture over IP networks. 
76
International Journal On Advances in Networks and Services, vol 2 no 1, year 2009, http://www.iariajournals.org/networks_and_services/

 
1.1. Previous work 
First IntServ [2]-[4] and then DiffServ [5]-[7] were 
proposed by the Internet Engineering Task Force 
(IETF - www.ietf.org) working groups to add QoS to 
best-effort Internet. Note that several contributions 
proposed a combined inter functioning architecture 
taking into account the advantages of each IntServ and 
DiffServ [8]. 
IntServ and Diffserv models have been used as a 
basis for several American and European projects such 
as QBone (http://qbone.internet2.edu) in USA or 
AQUILA 
(http://www-st.inf.tu-dresden.de/aquila), 
TEQUILA 
(www.ist-tequila.org), 
CADENUS 
(http://wwwcadenus.fokus.fraunhofer.de), 
MESCAL 
(www.mescal.org) 
and 
more 
recently 
EUQOS 
(www.euqos.eu) in Europe.  
None of the above proposals answer to the QoS 
problem completely. The difficulty comes, on the one 
hand, from the variety of requirements of applications, 
and on the other hand, from the Internet structure, 
nowadays heterogeneous at several levels. By 
definition multi technology, Internet is now multi 
domain, each domain (AS) managing independently its 
resources and its services. Several issues need to be 
taken into account in this context: 
• provisioning: the goal of service provisioning is to 
properly 
dimension 
of 
network 
resources 
accordingly to signed contracts (SLA) with 
different clients (individuals, companies, other 
providers); 
• admission control: it aims to accept new traffic in 
the network without harming previous flows. 
Controlling the amount of traffic allows avoiding 
congestions and performance deterioration in the 
network; 
• signaling: in a multi-domain Internet, it is 
imperative to install and manage QoS in each 
domain. Therefore a signaling across all domains 
on the data-path is needed. 
The contributions which are described in this paper 
have been mainly performed within the EuQoS project 
[9], whose main goal was to develop a new QoS 
architecture over a multi-domain heterogeneous 
Internet. The key objective of EuQoS was to research, 
integrate, test and demonstrate end-to-end QoS 
technologies to support the infrastructure upgrade for 
advanced QoS-aware applications over multiple, 
heterogeneous network domains. The EuQoS system 
has been deployed on a Pan European test bed for the 
purposes of trial and validation.  
More precisely, our contributions aim to offer QoS 
guarantees by coupling provisioning and admission 
control in a single signaling protocol. We propose an 
evolving architecture that decouples the service and 
the control plane that minimizes constraints for 
network administrators. We also propose a dynamic 
user centric provisioning, which allows optimizing the 
use of the most costly resources still satisfying the QoS 
demand. 
The rest of the paper is organized as follows: the 
QoS architecture on which our proposition is built as 
well as related work are presented in Section 2. Section 
3 details our dynamic end to end provisioning 
approach. Section 4 introduces the specifications of the 
signaling protocol that supports the process. These 
proposals are evaluated in Section 5 which also 
addresses scalability issues. Finally, conclusion and 
future work are given in Section 6. 
 
2. QoS Architecture 
 
2.1. General Considerations 
Guaranteeing quality of service requires mastering 
the vastly distributed and dynamic nature of Internet 
and defining a new architecture and a set of new 
mechanisms. Our proposal is based on the following 
fundamental high level design rules: 
• such a complex system cannot be provided 
without a high level design, i.e. without 
conceiving the architecture globally and without a 
strong coherence between all its sub-systems; 
• given the geographical distribution and the high 
heterogeneity of Internet, proposals based on a set 
of identical solutions for each sub-system cannot 
work, as it will not possible to efficiently handle 
all possible underlying (different) technologies; 
• as the involved sub-systems can range from simple 
to very complex, the proposed approach must 
allow a possible recursive handling of the different 
networks and technologies; 
• starting from the global architecture, only key 
interfaces or APIs have to be defined, to leave as 
much freedom as possible to designers and users. 
 
2.2. Definitions 
1. QoS-Domains (or QoS-AS) is a domain that 
offers QoS guarantees for the transversal traffic. 
2. Over-provisioned QoS-Domain. A QoS-domain D 
is over-provisioned if it is able to transfer any entering 
communication, via an ingress border router, to 
another domain by an egress border router, introducing 
77
International Journal On Advances in Networks and Services, vol 2 no 1, year 2009, http://www.iariajournals.org/networks_and_services/

a modification of its properties that is under a well 
defined and accepted threshold. Naturally, the domain 
owns enough resources to satisfy all the incoming 
requests. 
3. Controlled QoS-Domain. A QoS-domain is 
controlled if it is not Over-provisioned although it 
contains a control function allowing selecting a subset 
of the entering communications, for which it ensures 
the modification of their properties to be under a given 
threshold. 
Therefore, a QoS-domain is a domain that is either 
controlled (C-AS) or over-provisioned (O-AS). In 
order to guarantee end to end QoS, all domains on the 
data path must be QoS Domains (either over 
provisioned or controlled). The sequence of domains 
followed by data is given by the Border Gateway 
Protocol (BGP), the “de-facto” inter-domain routing 
protocol in Internet.  
 
2.3. Bandwidth Broker 
The RFC 2638 [10] defines the Bandwidth Broker 
in the framework of DiffServ as the entity that has the 
knowledge of a domain’s policies and resource 
availability, and allocates bandwidth with respect of 
these policies. In order to have a successful end to end 
reservation across several domains, the Bandwidth 
Broker managing a domain must communicate with its 
adjacent peers, which allows configuring the end to 
end path. This procedure also requires a particular 
agreement between involved peer domains. 
Several concepts of Bandwidth Broker are present in 
current literature. According to the way they distribute 
the activity in term of processing, they may be 
classified as centralized, distributed or hybrid. We 
adopt the centralized approach in our study. 
Nevertheless we leave open the possibility to a further 
evolution of the architecture. 
The Bandwidth Broker efficiency depends on the 
interoperability between all of its subcomponents. 
Bandwidth Broker functions are distributed both 
horizontally (among the different QoS domains) and 
vertically among different layers. Our Bandwidth 
Broker instantiation functionalities are summarized as 
follows: 
• it acquires topology and routing information; 
• it controls end to end network technology 
independent QoS; 
• it implements the suitable signaling in order to 
support the QoS in all domains on the end to end 
data path; 
• it performs the inter-domain admission control 
(distributed among all Bandwidth Broker) and 
local admission control based on resource 
availability or policies; 
• it sets up path and ensures that the requirements 
will be met by the network when a request is 
accepted. 
 
2.4. Underlying Network Representation 
As 
stated 
previously, 
our 
proposal 
aims 
guaranteeing end to end QoS for communications that 
cross several heterogeneous domains. We present an 
approach that attempts to address the provisioning, 
admission control and signaling problems. 
First of all we separate the service plane (set of 
devices offering application functionalities) from the 
control plane (equipments in charge of establishment 
and management of communications) and the inter-
domain signaling from the intra-domain one. In this 
way, the domain administrators can implement any 
particular solution inside their own domain. Moreover, 
the reservation system can be triggered independently 
by an application, proxy, gateway or any other trusted 
entity and the associated network QoS management is 
independent from any application layer negotiation 
(for instance SIP, H323 or other proprietary solution).  
Our QoS mechanism relies on the characterization 
of performances inside a domain between each couple 
of border routers. For such characterization model, 
please refer to our previous work [11]. As a result, we 
consider a high level representation of the physical 
network 
(devices 
and 
interconnections). 
This 
representation is independent from the underlying 
technology and it is stored in a database handled by the 
Bandwidth Broker. We reduce the topology of the 
domain to its border routers and the performances 
between them. The management of each domain is 
addressed in a hierarchical manner by using the 
concept of Bandwidth Broker (presented paragraph 
2.3). The goal of our approach is to eliminate from the 
network topology the internal equipments keeping only 
the border routers (see Fig. 1).  
 
78
International Journal On Advances in Networks and Services, vol 2 no 1, year 2009, http://www.iariajournals.org/networks_and_services/

 
Fig. 1: Topology Representation 
 
For instance, considering the bandwidth available 
between a couple of border routers, we do not store all 
values from intermediate routers in the database, but a 
unique value that is the result of composition of all 
intermediate values (the minimum bandwidth available 
from each link). Interested readers may refer to [12] 
for an optimized algorithm to perform such mapping. 
 
2.5. Admission Control 
Resource provisioning is not enough in order to 
guarantee at any moment the resource availability on 
the data path. Consequently, the solution is to set up an 
admission control applied to all new QoS requests. 
Therefore, admission control is one of the major tasks 
that a Bandwidth Broker has to perform, in order to 
decide if a new request is accepted or not. Admission 
control modules could have various and sophisticated 
algorithms using several metrics as peak bit rate, 
latency, network occupation etc.  
There are two possible approaches to perform 
admission control: measure-based and reservation-
based. The first one assumes a periodical estimation of 
resource load and consumption by the new requests. A 
new flow is accepted if its load does not produce a 
congestion risk level. The second approach (that we 
follow in our proposal) assumes a reservation (by flow, 
class or aggregate) in some devices. A new request is 
accepted if the resources are available taking into 
account prior reservations. In order to pass on the 
requests to next involved devices, a signaling protocol 
is required. 
In our proposal, the second approach is adopted.  
We divide the admission control process in two steps: 
• Step 1: based on the knowledge from the database 
and from routing information (network topology, 
resource availability); a high level admission 
control 
is 
performed 
using 
the 
mapping 
mechanism described in 2.4. We call this 
processing “pre reservation”. We prompt that the 
result of the database is reliable and coherent with 
the physical resource availability. 
• Step 2: after having the confirmation of all 
following domains (using the signaling protocol 
that propagates the request to the next peer 
Bandwidth Broker), the pre-reservation is ratified. 
This procedure ends with the configuration of 
devices (routers) by the means of protocols such 
as COPS, SNMP, etc. 
 
Considering the reservation activation, there are two 
types of request, taking into account the period for 
which the resources are desired: 
• immediate requests: the resource reservation is 
effective right after the request result; 
• advance requests: the reserved resources are to be 
used in the future, and do not need immediate 
installation. The classical example of application 
that uses this type of reservation is the current pre-
established audio or video conference. 
Our work is mainly centred on the first design, 
considering a system delivering QoS on demand with 
instant result. Nevertheless, the signalling protocol that 
we propose is not affected by one of these approaches. 
It can be equally used in both cases by introducing 
advance request functionality in the BB. 
 
2.6. Service Provisioning 
To guaranty an end-to-end QoS in the Internet, it is 
necessary to take into account the heterogeneity of the 
IP services provided by the domains involved in the 
data path, by choosing a concatenation of services 
matching the client’s QoS requirements. This choice is 
part of the service provisioning problem, which we 
address in this paper. 
Two points of view are considered to deal with the 
end to end provisioning: 
• in the first one, the problem is approached from a 
static point of view, where providers offer their 
clients with end-to-end services having pre-
defined static performances; the goal is to 
establish a compromise between the global 
capacity of the domain and its external links, and 
the number of potential clients; 
• the second point of view relies on the “on-
demand” mechanism using a signaling that 
dynamically checks and select the end-to-end 
service matching the QoS requirements; the goal is 
to invoke the service that best suits the QoS 
requirements.  
 
79
International Journal On Advances in Networks and Services, vol 2 no 1, year 2009, http://www.iariajournals.org/networks_and_services/

In the first case, the user invokes the service that has 
been defined to be a priori adapted to its application. 
In the second case, the invocation is done only after 
the adequacy of the concatenated service classes has 
been verified. Our work follows the second point of 
view and proposes a characterization of the end-to-end 
performances, 
which 
allows 
performing 
a 
concatenation choice guided by a quantitative 
expression of the QoS requirements.  
 
So as for the reader to have a more detailed view of 
the different service provisioning approaches, the next 
section (2.7) is devoted to the corresponding state of 
the art. Our contribution to service provisioning is then 
detailed in section 3. 
 
2.7. State of the art of provisioning 
Several solutions have been proposed to tackle the 
service provisioning problem. They are detailed 
hereafter. 
Following the static point of view: 
−  reference [13] proposes a solution based on the 
establishment of end-to-end pipes for which 
bandwidth reservation has been performed. Those 
pipes only concern the provider’s domain and are 
only established for a few predefined services, 
supported by all domains. The concatenation choice 
consists in the choosing of a pipe compatible with 
the request. The main drawback of the proposed 
solution comes from the strong homogeneity of the 
provided services; moreover, the automation of the 
pipe set up is an open issue, which is necessary to 
make the approach dynamic; 
− the MESCAL approach [14] proposes a solution for 
inter provider provisioning that quantifies the 
performances of services before the invocation step. 
The concatenation choice is based on the extended 
QoS class concept (e-QC), which is recursively 
defined as the concatenation of a local class (l-QC) 
and a e-QC of an adjacent domain. Prior to the 
subscription requests, the concatenations of the l-QC 
with the e-QC of the adjacent domains are evaluated; 
then, one of those satisfying the SLS is retained [15]. 
Following the dynamic point of view: 
− [16] proposes mechanisms allowing the providers to 
exchange QoS parameters for the supported services 
in order to provide information on the available QoS 
before the SLS.  
− in [17], the author’s proposition is based on service 
vectors allowing the choice of different successive 
services retrieved using PROBE RSVP messages on 
each router, in order to obtain a concatenation 
matching the targeted requirements. However, the 
multi domain context is not explicitly considered. 
 
Our proposed provisioning method is also of 
dynamic nature. However, it defers from [16] by the 
fact that the concatenation choice is performed at the 
time of the QoS request (and not at the subscription 
step). Moreover, we propose a model of service 
characterization which: (1) allows the request to take 
the usual forms of the QoS request into account, and 
(2) is applicable at the scale of one or more domains 
(typically those involved in the data path). Our 
proposal follows a similar approach to [17], but in a 
multi domain context. The dynamic end-to-end 
provisioning relies on a signaling protocol coupled 
with an optimized algorithm to choose the best 
concatenation of classes of services that fulfils QoS 
requirements and respects a set of predefined 
preferences. 
The reminder of the paper is structured as follows. 
Section 
3 
presents 
the 
end-to-end 
service 
characterization. We first illustrate the interest of the 
proposed model. Next, we explain the composition and 
the compliance with a multi domain context. In Section 
4, we discuss the signaling solution adapted to 
dynamic end-to-end provisioning. Finally, Section 5 
presents a set of simulation results followed by the 
conclusion and future work. 
 
3.
)
 End-to-End Dynamic Provisioning 
 
3.1. Service Characterization 
The usual performance characterization of a domain 
(from an entry point to an exit point) is often given in 
terms of maximal transit delay and/or jitter. The 
drawback of this model is that it conducts to non 
optimal characterization when considering the end-to-
end service provided by several domains.  
In previous work [18], based on ns-2 simulations 
and real measurements, we propose to characterize the 
performances between two edge routers by the 
cumulative distribution function (CDF) of the transit 
delay. Considering X, the transit delay of each packet 
between two edge routers as a random variable, the 
CDF FX is defined by 
(
t
P X
FX t
<
( ) =
, where P 
defines, for a packet, the probability that its transit 
delay is lower than t. 
Such a characterization is interesting for different 
kinds of application requirements. For instance, if the 
required QoS is expressed in terms of: 
80
International Journal On Advances in Networks and Services, vol 2 no 1, year 2009, http://www.iariajournals.org/networks_and_services/

− partial reliability τr (e.g. for a video stream without 
strong constraint on the delay), then it is satisfied if  
τr ≤ lim F(t→∞); 
• partial reliability τd and constraints on the 
maximal transit delay b (e.g. for distributed 
games), then it is satisfied if τd < F(b); 
• bounded jitter g and constraint on the average 
transit delay dm (e.g. for interactive audio), then it 
is satisfied if g ≥ k.σ and dm ≤ x , where x and σ 
respectively define the mean value and the 
standard deviation of the transit delay (k defining 
a constant function of the probability law of the 
delay). 
 
3.2. Multi Domain Composition 
 
In a multi domains context, there is a need for 
characterization of the performances resulting from the 
concatenation of several service classes along a data 
path involving several domains (Fig. 2). 
 
Fig. 2: Multi Domain Case 
In the case of two consecutive domains D1 and D2, 
let X1 and X2 be the transit delays of a same packet 
crossing each of the domains, and let F1(t) and F2(t) be 
the corresponding CDF. One can assume that the 
transit delays observed in each domain are independent 
in probability. Thus, the CDF F1,2(t) of the end-to-end 
transit delay X1,2 = X1 + X2, is given by: 
( )
( )
( )
(
F t )
dt F t
d
t
F
2
1
1 2
∗
=
,
 
where * indicates the convolution product. The 
generalization for n domains is obtained using the 
associative property of the concatenation resulting in: 
( )
( )
( )
(
t )
F
dt F t
d
t
F
n
n
n
1
,1
,1
−
∗
=
 
This result makes it possible to consider that an 
application can determine the concatenation(s) of 
classes which meet its QoS requirements once having 
the knowledge of performances for all services in 
domains on the data path. 
 
3.3. Formalization 
 
3.3.1. Hypothesis 
Our proposal relies on the following assumptions: 
• Inside each domain, there are one or more Classes 
of Service (CoS) supported by the providers; 
• An entity in each domain has the knowledge at 
each moment of resource availability for each CoS 
between all couples of ingress-egress point 
(routers) in the domain. 
For each CoS i in the domain D, we associate: 
• An amount 
iD  of available bandwidth; 
Bw
• A cost 
iD  for a client to use it; 
C
• A QoS function 
which represents the 
resource characterization between each couple of 
ingress-egress point in the domain. In our work we 
considered for now the characterization described 
in section 
iD
Fqos
3.1 assimilating to the CDF, but other 
function may be used as well. 
 
3.3.2. Multi domain service composition 
We propose an evolutionary approach that: (1) first 
evaluates the end-to-end performances on the data path 
and resulting from all possible concatenation and (2) 
choose and invokes the most adequate one with regard 
to a set of preferences and that fulfils application’s 
QoS requirements at the same time. The preferences 
can be chosen from various criteria, grouped into two 
main categories: 
• User-oriented (lower cost) or 
• Provider 
oriented 
(income 
maximization, 
resources utilization). 
Let us remark that a combination of several 
preferences can be also considered. Nevertheless, in 
this paper we illustrate our proposal with an approach 
that minimizes the cost by choosing the less expensive 
concatenation from all possible alternatives.  
Based on the client QoS request (in terms of 
bandwidth and parameters presented in section 3.1), 
the conditions to be fulfilled by the chosen 
concatenation of CoS are: 
(
)
(
ND )
D
D
et
t
i
Fqos
Fqos
Fqos
F
Min Bw
Bandwidth
o o
o
..
)
2
)1
2
1
arg
>
→
≤
→
 
where “o” represents a general function composition. 
In our instantiation, the target function is represented 
by the convolution product as explained in section 3.2. 
This means that on the data path there is enough 
bandwidth for the service and additionally, the 
application QoS requirements are satisfied. 
Let suppose N QoS domains and at most M CoS in 
each domain. The goal of our selection mechanism is 
81
International Journal On Advances in Networks and Services, vol 2 no 1, year 2009, http://www.iariajournals.org/networks_and_services/

to choose a vector [
] (one CoS in 
each domain on the data path) under conditions 1) and 
2) such that 
). In other words, the 
mechanism is able to find a concatenation of CoS in 
each domain that fulfils application requirements (1 
and 2) and that maximize a QoS function with respect 
to imposed preferences. An example is illustrated in 
Fig. 3. In our study, the QoS function that minimizes 
the cost is: 
DN
D
CoS
CoS
,..,
1
Max QoS (D)
D
(
)
∑
=
=
=
N
i
ij
M
j
Min C
D
QoS
1
1
)
(
 
 
Fig. 3: Class of Service Selection 
 
4. Signaling Protocol 
As presented in Section 2, several models of QoS 
management have been proposed for multi domain 
Internet. The convergence point of these proposals is 
the necessity to set up a signaling in order to 
interoperate between different network equipments. 
Several contributions dealing with the signaling issue 
have been considered, mainly at the IETF (especially 
Next Step In Signaling NSIS work group). Two 
perspectives are present in the literature: 
• path-coupled signaling (also called “on-path”) that 
extends the IntServ/RSVP view. The entities 
involved in signaling process are mandatory on 
the data path; 
• path-decoupled signaling (or “off-path”). The 
signaling entities cannot be all located on the data 
path, but they are aware it. 
In our work we adopt a path decoupled approach in 
a hierarchical way using the Bandwidth Brokers (BB) 
concept [9] for the intra domain management. 
Moreover, we assume the knowledge by each BB of 
the IP services for all couples of its border routers. 
Therefore the BBs are the main admission control and 
signaling equipments of the domain. Considering the 
hierarchical management of a domain, we consider the 
off-path solution in order to impose arrival of signaling 
messages to the Bandwidth Broker.  
The concatenation of the domains and the related 
admission control are performed dynamically after a 
QoS request expressed in terms of parameters such as 
a maximal transit delay, a maximal loss rate, etc. 
The concatenation choice is resolved in three steps: 
• first, the classes of service (and their performances 
expressed by means of the CDF of the transit 
delay) available on each domain of the data 
path(s) are discovered;  
• second, the end-to-end performance model is 
evaluated for all the service classes available on 
the data path; this evaluation is performed by 
means of convolution; 
• third, the choice of the adequate service satisfying 
the QoS request and given preferences is 
performed. This algorithm is implemented at the 
client’s level (or proxy). 
The signaling protocol will then be handled by: 
• the sender and receiver hosts or dedicated 
equipments such as proxies., 
• the Bandwidth Broker of each domain. 
 
Our protocol relies on BGP (Border Gateway 
Protocol), the inter AS routing protocol used in the 
Internet. The sequence of domains and the two data 
and signaling paths are illustrated in Fig. 4. Our 
solution decouples then the inter-domain signaling 
from the intra domain one. In all domains, decisions 
are local, and so any routing protocol can be defined 
within one domain. The purpose of this approach is to 
give a maximum degree of freedom to providers to 
implement the most suitable solution inside their 
domain. Consequently, the end-to-end inter-domain 
path is given by BGP tables and internal path (i.e. 
within each AS) can be freely selected by the AS 
providers, depending on local constraints.  
 
Fig. 4: BGP Data Path and Signaling Path 
 
The performance of the end-to-end path and later the 
corresponding admission algorithm requires checking 
availability of the needed resources along the data 
82
International Journal On Advances in Networks and Services, vol 2 no 1, year 2009, http://www.iariajournals.org/networks_and_services/

path. This has to be done by some dedicated 
equipment, the Bandwidth Broker. The following Fig. 
5 illustrates the case of a QoS request which transverse 
three domains. Following [19], the selection of the 
service matching the QoS requirements is based on: 
• the discovery of the available services on the data 
path (request/response PDU exchanges), 
• the characterization of the end-to-end services 
resultant from the composition of the available 
services classes, and then the selection of the 
cheapest service matching the QoS requirements, 
• the reservation and the refreshing of the selected 
service class. 
 
 
Step 2) Reservation  
Step 1)  
- ServiceDiscovery 
- End to end service 
   characterization 
- Service selection 
Step 3) Reservation refresh 
 
Fig. 5: PDU exchange 
 
5. Simulation Results 
 
In this section, the simulation results obtained for both 
the signaling protocol and the dynamic provisioning 
algorithm presented previously are presented. In both 
studies, issues regarding the scalability of the 
approaches are identified and discussed. 
 
5.1. Evaluation 
of 
the 
architecture 
and 
signaling protocol 
 
5.1.1. Performance tests 
The performance tests performed on our signaling 
protocols were conducted on a platform composed by: 
• power edge 750 computers with Intel Pentium 4 
processor at 3 GHz and 1 GB RAM memory; 
(running Linux Debian or Fedora with 2.); 
• two Cisco switches c2960. 
In order to test and validate our implementation, we 
developed multithread tools that simulate the high 
level behavior of an application and trigger the QoS 
system.  The java virtual machine used was 1.5.0_11 
and the database server was MySQL 5.0.18. Using the 
testbed described above, we emulated the multi-
domain context presented in figure 4. 
We first measured the processing time on all 
Bandwidth Brokers, the results being comparable for 
all of them. We stressed the system by launching 
simulation of 5, 10, 50, till 200 requests per second. 
Fig. 6 illustrates the answer time for each of the above 
scenarios. Note that time consists of request parsing, 
several access to the database, state management and 
also an emulation of device configuration. Let us 
observe the increase response time when the number of 
requests became greater than 150 per seconds. This 
can be explained by the different time spent in the 
queues while waiting for processing. Tuning the 
implementation prototype to take into account this 
limitation is one of the prospects of this work. 
 
Fig. 6: Processing time 
 
In a second time, we measured the round trip time 
between the client request and the response arrival 
(Fig. 7). We suppose a communication crossing three 
domains and this time includes: the processing time in 
each Bandwidth Broker, the time to exchange 
signaling messages (RESERVE and RESPONSE) and 
the update of configuration in each domain.  
83
International Journal On Advances in Networks and Services, vol 2 no 1, year 2009, http://www.iariajournals.org/networks_and_services/

 
Fig. 7: RTT for three domains 
 
Let us remark that the response time is increasing 
with the number of requests. The mean RTT remains 
under 4 seconds for less than 100 requests per second 
and under 8 seconds between 100 and 150 requests per 
second. We also observe an increase of this time after 
150 requests per second, with a mean around 12 
seconds for 200 requests per second. However, the 
processing and request handling in each domain of our 
protocol conducts to satisfactory values of the RTT for 
reasonable number of requests per second. 
 
Next Fig. 8 and 9 describe the usage of CPU and 
memory, measured during the same simulation on the 
second BB. During the processing of all 200 flows, a 
separate process investigates each second the resource 
utilization of the computer where the Bandwidth 
Broker is located. 
 
Fig. 8: CPU utilization 
 
It is worth mentioning that for this specific test we 
used the results obtained by the Linux based tools (top, 
htop, ps). Therefore, the CPU utilization represents the 
CPU time used divided by the time the process has 
been running (CPU time / real time ratio) expressed as 
a percentage. We can observe the increase during the 
processing off requests, the values being satisfactory 
even if we didn’t use very powerful equipments (such 
as the operator owns). 
 
Let us note the augmentation of memory (the 
physical resident size that a task uses expressed in Kilo 
Bytes) due to possibly creation of new threads to 
process new requests. It is worth to observe that after 
handling all requests, the CPU percentage is 
decreasing while the memory remains at its last stable 
level. 
This 
is 
caused 
by 
the 
implementation 
collaborated with the memory allocation/free algorithm 
of the virtual machine. When all the threads in the 
handling pool are started the memory will not increase, 
having a stable value. 
 
Fig. 9: Memory Utilization 
 
5.1.2. Conclusions 
The previous results show that the memory and CPU 
consumption of BBs remain in reasonable values. The 
RTT and the processing time are also acceptable in the 
vision of a session establishment in a multi-domain 
context, matching ITU requirements [20]. Moreover, 
the network overhead introduced by our signaling 
protocol is limited (in the current implementation 64 
bytes to request reservation for a flow and 68 bytes for 
the response). 
In the general case, QoS seems to be difficult to 
deploy. Nevertheless, the users requesting QoS will be 
much less numerous than the number of best-effort 
users. It will start with a reasonable number of users 
and domains, and extend them when the number of 
QoS requests will grow. Moreover, when the number 
of requests becomes important, the tasks of the 
84
International Journal On Advances in Networks and Services, vol 2 no 1, year 2009, http://www.iariajournals.org/networks_and_services/

Bandwidth Broker can be distributed.  
 
5.2. Performance of the dynamic provisioning 
algorithm 
This section is focused on the performance results 
related to the dynamic end-to-end provisioning scheme 
which has benne proposed in section 3. Let us recall 
that we consider an algorithm aimed at choosing the 
“best” (here the less expensive) CoS concatenation 
along the data path, using the mechanism described in 
section 3.2. Details for the composition using 
cumulative distribution function can be found in [11].  
Our simulation is based on a Java implementation of 
the proposed model. We use a multi domain model 
similar to the one presented in Fig. 4 considering four 
domains (identified from 0 to 3). For simplicity, we 
consider three CoS in each domain, having the same 
QoS characteristics. We name these classes CoS1, 
CoS2 and CoS3, and we assume that the quality 
associated with these classes is such that: QoS(CoS3) > 
QoS(CoS2) > QoS(CoS1). Consequently, the price to 
use one of these classes follows the same relation. The 
bandwidth amount allocated in each domain for each 
class of service is 60% for CoS1, 20% for CoS2 and 
20% for CoS3. 
The simulation time is set to take into account one 
day with collection of results each second using 
300000 clients equally spread in each domain. The 
communication duration of each client follows the 
Poisson law and the reservation invocation time is 
uniformly distributed throughout the simulation 
duration. Each client performs one QoS request 
through several randomly chosen domains (the 
destination domain being always identified by a grater 
number). We compare our model with the general most 
used one that statically associates a well defined CoS 
to a given type of application (same in each domain). 
In this basic approach, the user attempts to reserve the 
same related CoS in all domains on the data path. 
 We remind that in our approach, the QoS request 
does not precise a specific CoS, but only parameters. 
Retrieving all available CoS on the data path and based 
on the application requirements and given preferences, 
a concatenation of CoS (which can be different on 
each domain) is chosen and resources are reserved 
afterwards.  
We consider three types of application, each one 
having specific well defined QoS characteristics (i.e. 
video streaming, telephony, etc). The need in QoS for 
these applications follows a similar relation as for the 
CoS: N(Type3) > N(Type2) > N(Type1). A client uses 
one of the application types following a probability 
law: 0.6 for Type1, 0.2 for Type2 and 0.2 for Type3. 
 
 
Fig. 9: Number of Accepted Clients 
 
First of all, we analyze the number of clients 
accepted in each domain. Fig. 9 illustrates the number 
of accepted clients and Fig. 10 the total number of 
clients that made a QoS request to a BB (per domain).  
 
Fig. 10: Total Number of Clients 
 
We can observe that with our model, the number of 
accepted clients is greater on each domain compared 
with the classical algorithm. Furthermore, the total 
number of clients is superior in our approach, meaning 
that more QoS request can be satisfied. The fact that a 
greater number of client requests are processed with 
our algorithm results from the behavior of our 
signaling approach: if the resources are not available, 
the request is not propagated forward. Compared with 
the basic general approach, our methodology gathers 
information for all available CoS and do not reduce the 
solution to only one CoS. This flexibility allows a 
greater number of requests to be satisfied.  
These results are also confirmed by the Fig. 11 
85
International Journal On Advances in Networks and Services, vol 2 no 1, year 2009, http://www.iariajournals.org/networks_and_services/

which represents the bandwidth occupation on the 
second Bandwidth Broker (on the other BB the results 
are similar; we choose to illustrate the second one as a 
greater number of requests are processed). We can 
remark that using our algorithm, we obtain a better 
occupation of the bandwidth which is predisposed to 
increase the profits for providers. 
 
Fig. 11: Total Bandwidth Occupation 
 
We also analyzed the bandwidth occupation for each 
CoS. We illustrate the CoS1 as it is the most used in 
these simulations (see Fig. 12).  
 
Fig. 12: CoS 1 Bandwidth Occupation 
 
Let us remark that we also performed simulations 
using different distributions of application types with 
the same three CoS. Results are comparable, the 
bandwidth 
occupation 
being 
greater 
with 
our 
algorithm, however with increasing differences if the 
proportion of CoS2 and CoS3 are greater. 
Based on these results, we conclude that not only the 
degree of satisfaction of clients is improved, but also 
that providers can take advantage of this approach. 
Having a larger number of clients and a better 
bandwidth occupation implies more incomes and also 
an optimization of resources. 
 
6.
7.
 Conclusion 
This paper addresses the problem of providing a 
guaranteed end to end QoS over multiple Internet 
domains. More precisely, we proposed a solution of 
QoS domain architecture managed in a hierarchical 
manner by a Bandwidth Broker. In addition we 
presented solutions for both inter-domain signaling and 
optimized QoS management to perform admission 
control. With respect to other similar contributions, our 
proposal is independent of the underlying network 
technology and minimizes the constraints introduced to 
the 
global 
architecture. 
In 
addition 
to 
the 
implementation of several modules, we presented a 
first round of tests that aims at validating our solution. 
 
The main perspectives of this work are: 
• to conduct further investigation on performance 
and scalability; 
• to take into account the heterogeneity of the 
Internet with non QoS domains and to consider 
several 
different 
domains 
with 
different 
technologies. 
•    to introduce other criteria for our selection 
algorithm (possible provider preferences. In this 
paper we used minimization of cost as criteria).  
• to extend our solution in order to integrate the 
evolution of the NSIS protocol suite. 
 
 Acknowledgment 
This work has been partially conducted within the 
framework of the European IST EuQoS project 
(http://www.euqos.org).  
 
8. References 
[1] 
Racaru, F.; Diaz, M.; Chassot, C., "Quality of Service 
Management in Heterogeneous Networks," Communication 
Theory, Reliability, and Quality of Service, 2008. CTRQ '08. 
International Conference on , vol., no., pp.83-88, June 29 
2008-July 5 2008 
[2] 
Wroclawski J. Specification of the Controlled-Load Network 
Element Service. RFC 2211, Sept. 1997. 
[3] 
Shenker S et al. Specification. of Guaranteed Quality of 
Service. RFC 2212, September 1997. 
[4] 
Braden R et al. Resource ReSerVation Protocol (RSVP) - 
Version 1 Functional Specification. RFC 2205, September 
1997. 
[5] 
Blake S et al. An Architecture for Differentiated Services. RFC 
2475, December 1998. 
[6] 
Jacobson V. et al. An Expedited Forwarding PHB. RFC 2598, 
June 1999. 
86
International Journal On Advances in Networks and Services, vol 2 no 1, year 2009, http://www.iariajournals.org/networks_and_services/

[7] 
Heinanen J et al. An Assured forwarding PHB. RFC 2597, June 
1999 
[8] 
Bernet, T et.al "A Framework for Integrated Services Operation 
over DiffServ Networks", IETF RFC 2998, November 2000 
[9] 
Dugeon O., Morris D., Monteiro E., Burakowski W., Diaz M, 
End to End Quality of Service over Heterogeneous Networks 
(EuQoS), IFIP Network Control and Engineering for QoS, 
Security and Mobility, Net-Con’2005, November 14–17, 2005, 
Lannion, France 
[10] Nichols N et al. A Two-bit Differentiated Services Architecture 
for the Internet, RFC 2638, July 1999 
[11] Chassot C, Auriol G, Diaz M. Automatic management of the 
QoS within an architecture integrating new Transport and IP 
services in a DiffServ Internet. 6th IFIP/IEEE International 
Conference on Management of Multimedia Networks and 
Services (MMNS’03), Belfast, Ireland, September 7-10, 2003. 
[12] Htira W, Duegeon, O , Diaz, M An aggregated delay/bandwith 
star scheme for admission control 12th International Workshop 
on Computer Aided Modeling and Design of Communication 
Links and Networks (CAMAD'07), Athènes (Grèce), 7 
Septembre 2007, 11p. 
[13] Mantar H. et al A scalable model for inter bandwidth broker 
resourse reservation and provisioning. IEEE Journal on 
selected Areas in Communication, Vol. 22, December 2004. 
[14] Goderis D, T'joens Y, Jacquenet C, Memenios G, Pavlou G, 
Egan R, Griffin D, Georgatsos P, Georgiadis L, Van Heuven P. 
Service Level Specification Semantics, Parameters and 
negotiation requirements. Internet draft, June 2001. 
[15] Howarth MP et al. Provisioning for interdomain quality of 
service: the MESCAL approach. IEEE Communication 
Magazine, Vol 43, June 2005. 
[16] Füzesi P, Németh K, Borg N, Holmberg R, Cselényi I. 
Provisioning of QoS enabled inter-domain services. Computer 
Communications, vol. 26 n°10, June 2003. 
[17] Yang J, Ye J, Papavassiliou S. A flexible and distributed 
Architecture for adaptive End-to-End QoS Provisioning in 
Next Generation Networks. IEEE Journal on Selected Areas in 
Communications, vol. 23, n°2, February 2005 
[18] Chassot C. et al Signaling in heterogeneous IP multi domain 
networks, 6th Internation Conference on Next Generation 
Teletraffic 
and 
Wired/Wireless 
Advanced 
Networking 
(NEW2AN), May 2006. 
[19] Chassot C., Lozes A., Racaru F., Auriol G., and Diaz, M. A 
user based approach for the choice of the IP services in the 
multi domain DiffServ Internet. First IEEE workshop on 
Service Oriented Architecture in Converging Networked 
Environments, Vienna Austria 2006. 
[20] ITU-T Recommendation E.721  Network grade of service 
parameters and target values for circuit-switched services in the 
evolving ISDN. 
 
 
87
International Journal On Advances in Networks and Services, vol 2 no 1, year 2009, http://www.iariajournals.org/networks_and_services/

