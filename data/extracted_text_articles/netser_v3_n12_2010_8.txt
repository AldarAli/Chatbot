Human-Assisted Calibration of an Angulation based Location Indoor System with
Preselection of Measurements
Jürgen Kemper, Nicolaj Kirchhof,
Markus Walter
Robotics Research Institute
Technische Universität Dortmund
Otto-Hahn-Str. 8
44227 Dortmund, Germany
Email: {juergen.kemper, nicolaj.kirchhof,
markus2.walter}@tu-dortmund.de
Holger Linde
Ambiplex GmbH & Co. KG
Idastr. 11
44388 Dortmund, Germany
Email: holger.linde@ambiplex.com
Abstract—Besides aspects like accuracy and cost, a simple
setup process is essential for the adoption of location systems.
However, existing systems often require a time-consuming
calibration process to determine sensor node positions or orien-
tations. In this paper we present a software aided approach for
the calibration of an angulation-based indoor location system,
which only demands from the user to walk through the room.
The novelty of the presented approach is that a completely
passive sensor technology is applied whereas the calculations
are exclusively based on angular measurements. The node
localization is realized without any prior knowledge of sensor
positions, orientations or the location of the moving person.
Nevertheless, it can be shown that an accurate localization
of the sensor nodes is possible. The presented algorithm is
based on the Newton-Raphson method for solving non-linear
equation systems. In order to improve the calibration results, a
preselection of the calibration measurements is processed that
realizes the identiﬁcation and non-consideration of unreliable
measurements. The accuracy of the approach, its convergence
probability and its runtime are evaluated by several simula-
tions. Furthermore, real-world tests, using a location system
that exploits the thermal radiation of humans for localization,
are carried out to verify the simulation results.
Keywords-Human Assisted, Calibration, Localization, In-
frared, Thermal, Thermopile, Tracking, Auto-Calibration
I. INTRODUCTION
The ability to locate people is an essential prerequisite to
enable location-based services. Therefore, in recent years,
several indoor location systems for the ﬁeld of ubiquitous
computing have been developed [2]–[4]. Dependent on the
used technology like infrared [5], [6], radio [7]–[9] or
ultrasound [10], [11] these systems differ in aspects like
accuracy, scalability and cost, whereas especially the latter
have direct impact on the acceptance of such systems.
Indeed, the costs of a system do not only depend on the
required hardware but also on the installation effort, which
corresponds to the time for setting up a system. This time
is inﬂuenced by the number of sensors, which have to be
installed and the time, needed for system calibration, that is,
to determine the sensor nodes positions and where needed,
their orientation. The number of required nodes depends on
their ﬁeld of view (FoV) and their range. For a cost-efﬁcient
localization solution as few sensor nodes as possible should
be used.
The calibration effort, on the other hand, is strongly
related to the accuracy of the systems. For example, the
accuracy of proximity-based location systems such as Active
Badge [5] is often limited to room size. Here, the sensor
node position is not crucial and therefore, deployment efforts
are low.
Contrary to this, lateration-based systems require exact
knowledge about the node positions in order to enable
accurate localization. Hence, often a time-consuming manual
measurement process is required. When additionally apply-
ing angulation, besides the exact position also the orientation
of the sensor nodes has to be known. Due to this costly
calibration, many of the proposed location systems are not
practical and therefore suffer from the lack of acceptance.
Automated node localization can help to reduce the effort
of calibration signiﬁcantly. Instead of measuring the sensor
coordinates manually, pairwise node distances or other geo-
metrical relations are ascertained by the sensor nodes them-
selves. From these measurements the sensor coordinates are
subsequently calculated. To enable automated calibration,
nodes must be able to detect each other. For instance, in
a radio location system, they must be equipped with both
receivers and transmitters.
In the past, especially in the ﬁeld of wireless sensor
networks, an essential contribution to autonomous node lo-
calization was made. However, these approaches are mostly
intended for sensor networks that consist of many nodes
and cover a huge area. Indoor location systems on the other
hand are often limited to one or a few rooms. Consequently,
the requirements for node localization are quite different
indoors. In particular, a high position accuracy of the sensor
nodes is demanded. This fact implicates that automated
82
International Journal on Advances in Networks and Services, vol 3 no 1 & 2, year 2010, http://www.iariajournals.org/networks_and_services/
2010, © Copyright by authors, Published under agreement with IARIA - www.iaria.org
Article part of a special issue on Wireless Sensor Networks

calibration is infeasible in certain approaches. E. g. radio
location systems estimating distances based on received
signal strength (RSS) measurements usually yield a location
error of far above one meter. Due to this low accuracy,
calibration must be performed manually.
If a passive positioning technology is used, which implies
that the sensor nodes are only equipped with receiving
elements, distance measurements between sensor nodes are
not feasible at all. A promising approach to overcome this
problem is mobile assisted calibration [12]. Following this
approach, a mobile source moving through the room is used
to enable the required measurements. However, in that case,
not the pairwise geometrical relations between the nodes
are measured but those between the mobile source and the
nodes.
In this paper, a mobile assisted calibration approach for an
angulation-based location system is presented. This system
exploits the thermal radiation of humans for localization. It
is entirely passive, which means that the sensor nodes are
equipped with infrared sensors only. Hence, an assisted node
localization is required, in which a human acts as mobile
source himself. Thus, we speak of human-assisted calibra-
tion. Furthermore, as infrared radiation does not penetrate
walls, the location system is limited to one room and the
number of required sensors is small.
For calibrating the system, the node positions and the node
orientations have to be determined. The novelty of the pre-
sented approach is that a completely passive sensor technol-
ogy is applied whereas the calculations are exclusively based
on angular measurements. The node localization is realized
without any prior knowledge of sensor positions, orientations
or the location of the moving person. Nevertheless, it can
be shown that an accurate localization of the sensor nodes
is possible.
The aim of the proposed approach is to signiﬁcantly
reduce the calibration effort of the system by automating
the process of node localization. Without automation the
calibration is very costly, especially the determination of
the sensor orientation. The described approach, however,
enables the user to calibrate the system by walking through
the room.
The remainder of the paper is structured as follows. In
Sect. II related work is discussed. In Section III the ideas
and the algorithm to realize human-assisted calibration are
described. The process of calibration and some essential
software requirements are presented in Sect. IV. In Sect. V
experimental and simulation results are discussed. Finally,
in Sect. VI a conclusion is drawn and an outlook on future
work is given.
II. RELATED WORK
As already stated, in recent years, several indoor location
systems have been developed. However, the aspects of
calibrating such systems have rarely been addressed.
General approaches were discussed for large-scale sensor
networks. Mostly, they are based on distance measurements
between sensor nodes. Unknown node positions are cal-
culated via trilateration based on known node positions
and the measured distances between these nodes and the
unknown ones. Anchor-based algorithms start with a few
known sensor positions to calculate all unknown ones with
respect to a global coordinate system. In contrast to that,
anchor-free algorithms try to determine the network structure
without initial anchor nodes. Thus, the calculated system
geometry is ambiguous, therefore translation, rotation and
ﬂipping is still possible. Both types of algorithms suffer
the problem that for spare distribution of nodes no unique
structure can be determined. The calculations themselves can
either be done incrementally or concurrently. In the prior
case, the algorithm starts with a set of three or four nodes
to calculate unknown node positions and obtains a new
node position in every iteration step. In the latter case, all
node positions are concurrently optimized. The advantage of
this approach is that the propagation of measurement errors
and the probability of being stuck in a local minimum is
lower. Finally, centralized (computation on a workstation)
and decentralized (by the nodes) approaches have to be
distinguished.
Motivated by the Smart Dust project, Doherty et al.
[13] developed a centralized, anchor-based approach. It
derives unknown node positions from proximity and angular
constraints between beacons, given by their connectivity. A
global solution is found by a linear-programming algorithm
working on a network representation of a set of convex
position constraints.
A distributed, anchor-based approach (APS) was de-
scribed by Niculescu and Nath [14] that applies RSSI
(Received Signal Strength Indication) and trilateration. For
node localization they discuss different methods. In their DV-
hop method the number of hops between anchor nodes are
measured to calculate an average hop distance. Afterwards,
the node positions are calculated by trilateration exploiting
the hop and distance information. The resulting accuracy
is limited to 45 % of the radio range. In contrast to that,
the DV-distance method estimates the distances between
nodes by RSSI measurements and reduces the error by
50 %. An additional paper by both authors [15] deals with a
similar approach but instead of trilateration triangulation is
used to determine the network structure. The resulting non-
linear problem is reduced to a linear one, again based on
trilateration.
A mobile-assisted, anchor-free node localization approach
was proposed by Sichitiu and Ramadurai [16]. They used a
PDA equipped with GPS and WLAN to measure the distance
to different nodes at several positions based on RSSI and
applied a method using Baysian inference for information
processing, afterwards. Experimental results revealed a node
localization error of less than 3 m.
83
International Journal on Advances in Networks and Services, vol 3 no 1 & 2, year 2010, http://www.iariajournals.org/networks_and_services/
2010, © Copyright by authors, Published under agreement with IARIA - www.iaria.org
Article part of a special issue on Wireless Sensor Networks

Another anchor-free approach, using mobile robots for
node localization was presented by Pathirana et al. [17]
By applying RSSI measurements and a Robust Extended
Kalman Filter-based state estimator for node localization,
they were able to realize an accuracy of approximately
1 m, which demands the availability of precise odometry
information of a robot.
A general survey of different approaches for indoor lo-
cation systems was given by Scott and Hazas [18]. Using
the Active Bat system, they examined three different data
gathering methods: Placing several nodes on a mobile frame,
whereas the relative locations are known, placing several
nodes on the ﬂoor and gathering measurements data while a
human moves around. For the calculation of node positions
non-linear regression was applied. Experiments showed that
the frame-based approach in combination with non-linear
regression provides the highest accuracy with a mean error
of 3 cm. In contrast to that, the human-assisted method
exhibits a mean accuracy of 19 cm.
A distributed, anchor-based indoor localization approach
using collaborative multilateration was described by Sav-
vides et al. [19]. They showed that the use of ultrasound in
combination with ToA (Time of Arrival) and trilateration is
a sufﬁcient candidate for ﬁne-grained localization. Starting
with several anchor-nodes, the unknown node positions are
calculated with an over-constrained set of equations. Exper-
iments showed that node position errors of less than 20 cm
with a sufﬁcient number of nodes are possible. However, due
to the incremental calculation process, error propagation has
to be considered.
A mobile-assisted, anchor-free approach without know-
ledge about the position of the mobile unit was proposed
by Priyantha et al. [12]. The authors used the well known
Cricket system and a mobile robot equipped with a cricket
node for their evaluation. By utilizing the robot, they were
able to overcome the problems of line-of-sight obstruction
and ambiguity due to sparse node deployment. In order to
gather appropriate distance samples to solve the localization
problem certain movement constraints were developed. Ex-
perimental results showed that the median pairwise distance
error is less than 1.5 % of the distance between the nodes.
III. THEORY OF CALIBRATION
Before describing the developed calibration algorithm in
detail, ﬁrst of all, the used location system and the resulting
requirements are outlined.
A. Passive Infrared Localization
Passive infrared location systems exploit the thermal
radiation emitted by humans to determine their position.
As sensing elements so called thermopiles are used, which
consist of a series connection of thermocouples. If several
of those thermopiles are combined to a line or array sensor,
whereas every pixel exhibit a slightly different ﬁeld of view,
it is possible to measure the angle under which an object
is seen. As illustrated in Fig. 1, the basic principle for
Source
FoV
Figure 1.
Principle of AoA estimation
determining this angle of arrival (AoA) is to choose that
one, which corresponds to the line-of-sight of the pixel with
the highest outcome.
The location system described by Kemper et al. [4] con-
sists of special thermopile modules developed by Ambiplex
[20]. These modules are capable of detecting heat sources
within an angular range of 48° and 90°, respectively. In the
second case two line sensors with a ﬁeld of view of 48° are
attached to the module (double sensors). At a typical room
temperature of 22 °C, the angle between the sensor and a
heat source – typically a human being – can be detected
up to a distance of 10 m with a angular accuracy of ±2°.
For environment temperatures up to 26° the overall system
accuracy stays nearly constant, with a mean position error
of 15 cm. Higher temperatures than 26° lead to a rapidly
increasing position error, because the received radiation is
almost indistinguishable from the natural senor noise.
In order to calculate the AOA, a more elaborate algorithm
is used that yields a higher resolution by exploiting the fact
that the radiating source is typically seen by more than one
pixel. Besides the angle of arrival it also calculates a quality
measure for the AoA, denoted the Score.
In order to set up a location system, several of these
modules have to be deployed in a room, e. g. in the corners
at chest height. For a room of up to 7 × 7 m, four double
sensors with a ﬁeld of view (FoV) of 90° are sufﬁcient as
illustrated in Fig. 2.
B. The node localization problem
After describing the used location system, subsequently
we take a closer look on the resulting localization problem:
The one-dimensional angle of arrival provided by the
sensors results in a two-dimensional localization problem. A
human-assisted node localization is required, as the sensor
nodes do not emit signals that can be exploited for mu-
tual detection. In addition, this type of system requires a
centralized approach as the sensors’ computational power
is extremely limited. Moreover, after installing the sensor
84
International Journal on Advances in Networks and Services, vol 3 no 1 & 2, year 2010, http://www.iariajournals.org/networks_and_services/
2010, © Copyright by authors, Published under agreement with IARIA - www.iaria.org
Article part of a special issue on Wireless Sensor Networks

Figure 2.
Typical sensor placement
nodes neither their position nor their orientation is known.
Consequently, a concurrent, centralized and anchor-free ap-
proach seems to be the best choice to realize the calibration.
The drawbacks of a centralized approach like the required
computational power are negligible since the calibration has
to be processed only once. Additionally, in comparison to
most of the approaches described in Sect. II, the number
of required nodes is small, as thermal radiation does not
penetrate walls and the calibration has to be done room by
room.
C. Human-Assisted Node Localization
As comfort was the main objective for the development
of an automated calibration procedure, the contribution de-
manded from the user to calibrate the system was supposed
to be as small as possible. Therefore, the idea of calibrating
a system by walking through the room was considered to
be the easiest and most practicable way. The developed
algorithm to realize this kind of calibration is described
subsequently.
Fundamental Geometrical Relations: Before explain-
ing the used algorithm, ﬁrst of all, the fundamental geometri-
cal relations of the localization problem have to be described.
Figure 3 illustrates these relations and the denotation of
variables. Sensors are denoted Si, where 0 ≤ i < N and N
is the number of sensors. Their positions and orientations
with respect to the x-axis are given by (xSi| ySi) and
ΘSi, respectively. During calibration, the system notiﬁes the
user to remain still at a M arbitrary positions Pj, with
0 ≤ j < M. These positions are referred to as source
locations. Their coordinates are (xPj|yPj). Finally, the angle
under which source location Pj is “seen” by sensor Si is
denoted ϕSiPj. The geometrical relation between Si and Pj
can be expressed using the tangent:
tan(θSi + ϕSiPj) = yPj − ySi
xPj − xSi
(1)
ĳSi,Pj
Si
Pj
șSi
xPj
xSi
ySi
yPj
Figure 3.
Geometric relations and denotation
After applying some mathematical transformations and the
substitution of tan(ϕSiPj) by tij, a non-linear equation for
the calibration algorithm is obtained. This equation exhibits
ﬁve unknowns xPj, yPj, xSi, ySi and ΘSi
0
=
−tijxSi + ySi + (xPj + yPjtij) · tan θSi
(2)
−xSi tan θSi − tijySi tan θSi + xPjtij − yPj
Solvability: If the equations for every sensor-source
location combination is set up, a non-linear system with a
maximum number of equations KE = N × M is obtained.
However, in practice, the overall number of equations is
lower since, dependent on the sensor setup, not all positions
are in the ﬁeld of view (FoV) of any sensor. Furthermore,
for non-linear systems of equations (NLSE) no general
prediction of solvability is possible. Nevertheless, for our
further considerations, we assume that a solution exists, if
the number of independent equations is equal or greater than
the number of unknowns. The latter is given by
NRu = 3N + 2M,
(3)
since every sensor module exhibits three and every source
location two unknowns.
To be a bit more problem speciﬁc, for every sensor at
least three measurements at different positions are neces-
sary (three unknowns per sensor), whereas at every source
location the measured object has to be seen by more than
two sensors as the source locations are unknown. Table I
shows the difference between the number of variables and
the unknowns when all positions are in the FoV of every
sensor. Unfortunately, this cannot be fulﬁlled in general.
However, the table clariﬁes that only measurements seen
by more than two sensors have a contribution in the reduc-
tion of unknowns. Hence, if only these measurements are
considered and at least nine valid measurements for every
sensor exist, it should be possible to ﬁnd a solution. In most
cases fewer measurement positions are required if at least
one of them is in the FoV of more than three sensors. In
practice, the number of unknowns is reduced by four since
the position and orientation of one sensor should be set as
85
International Journal on Advances in Networks and Services, vol 3 no 1 & 2, year 2010, http://www.iariajournals.org/networks_and_services/
2010, © Copyright by authors, Published under agreement with IARIA - www.iaria.org
Article part of a special issue on Wireless Sensor Networks

N (Sensors)
1
2
3
4
5
M (Positions)
4
-7
-6
-7
-4
-3
5
-8
-6
-4
-2
0
6
-9
-6
-3
0
3
7
-10
-6
-2
2
6
8
-11
-6
-1
4
9
9
-12
-6
0
6
12
Table I
DIFFERENCE BETWEEN NUMBER OF EQUATION AND VARIABLES
reference as well as the distance between this sensor and
another one to obtain an unambiguous solution.
If using double sensors instead of single ones as done
in the experiments later on, the number of unknowns per
module increases to four. Consequently, the number of
required source location rises, too.
The Calibration Algorithm: Due to its complexity the
resulting NLSE cannot be solved analytically but numeri-
cally. The Newton-Raphson method is one of the most efﬁ-
cient approximation procedures for differentiable mappings
[21] and can also be applied to multi-dimensional equation
systems. The basic idea of this method is to ﬁnd the root
of an equation system of the form ⃗f(⃗x) = ⃗0 by an iterative
approximation. Starting with an initial guess, the function is
approximated by its derivative at this position. In a second
step the root of this derivative is calculated. If the initial
guess is near the real solution, the current approximation
will typically be better than the former one.
For every step the following LSE has to be solved to
obtain the current iteration step ∆⃗x:
J(⃗xi) · ∆⃗x = −⃗f(⃗xi),
(4)
where J(⃗xi) is the Jacobian matrix and contains the partial
derivatives of ⃗f(⃗xi). Consequently, ∆⃗x can be calculated
applying the inverse of J(⃗xi)
∆⃗x = −J(⃗xi)−1 · ⃗f(⃗xi)
(5)
so that ﬁnally the assumption for the next iteration can be
calculated as
⃗xi+1 = ⃗xi + ∆⃗x.
(6)
In every step the error e of the current approximation is
given by the Euclidean norm
e =
⃗f(⃗xi)

(7)
of ⃗f(⃗xi) at the current position ⃗xi. Moreover, e can be
used as a ﬁtness function. The iteration process can be
stopped once the difference of e between two iteration
steps falls under a certain limit. However, dependent on
the initial guess it may happen that only a local minimum
is found or the approximation does not converge at all. In
this case, another calculation with a different initial guess
has to be started. It is obvious that the initial values of
the iteration process are crucial for the convergence of
the Newton-Raphson method. However, due to the high-
dimensional solution space, ﬁnding an adequate initial guess
is very complex. Therefore, in the current implementation,
we decided to generate it randomly.
Enhancements due to Practical Requirements:: In prac-
tice, measurements are not ideal due to sensor noise and
systematic errors. Thus, averaging is applied to reduce the
impact of noise during calibration, which means that several
measurements are carried out while a human is standing still
at one position. Averaging over these measurements ﬁnally
results in a less noisy value.
The impact of faulty measurements, on the other hand, can
be reduced by over-determination and calculation of a best
ﬁt solution (least squares). That is, the NLSE is composed
of more than the required number of equations, for which
reason additional measurements and hence additional source
locations are required.
In case of having an over-determined NLSE, instead of
the inverse of J(⃗x) the pseudo-inverse
J+ = (JT J)−1JT
(8)
has to be applied. Since with every new equation the com-
plexity of the problem is increased, an optimal grade of over-
determination has to be found. To check this, we did some
evaluations. The results are presented in Sect. V. It should be
noted that the complexity of the approach is O(n3) for every
iteration step, where n denotes the number of equations.
The computation is dominated by the LU-decomposition
for matrix inversion. However, since the calibration has to
be processed only once and off-line, the runtime of the
algorithm is not crucial as long as it is signiﬁcantly faster
than the manual calibration.
D. Preselection of Measurements
Due to the limited range of the used sensors and the
applied algorithm that exploits that the radiation of a human
is typically received by more than one pixel, the accuracy
of the measured angle decreases with increasing distance
between object and sensor.
Additionally, an erroneous AoA is calculated if a human
is only partially covered by the FoV of a sensor. This is
caused by the fact that the AoA is typically assumed to be
in the middle of the covered part. Consequently, this error
increases with decreasing distance between radiation source
and sensor. Table II illustrates this error for a human located
at the edge of the FoV of one sensor (24°) and different
distances. It can be seen, that at a distance of 0.5 m the
measurement error is almost 13°, which is very problematic
for calibration, as high errors may lead to bad calibration
results or to a non-solveable NLSE, either.
86
International Journal on Advances in Networks and Services, vol 3 no 1 & 2, year 2010, http://www.iariajournals.org/networks_and_services/
2010, © Copyright by authors, Published under agreement with IARIA - www.iaria.org
Article part of a special issue on Wireless Sensor Networks

Distance
3 m
2 m
1 m
0,5 m
AoA
24°
22.9°
18.8°
11.1°
Table II
ERROR DUE TO PARTIAL COVERAGE
In order to avoid the negative impact of measurements
that are erroneous due to the described reasons their non-
consideration is convenient. For the identiﬁcation of these
measurements some kind of quality measure is required. For
this purpose the already mentioned score can be used. It is
calculated along with the AoA and decreases with increasing
distance between sensor and source. However, evaluations
have shown that this score is very noisy and highly non-
linear with respect to distance as Fig. 4 illustrates.
0
250
500
750
1000
1250
1500
1750
1.0
1.5
2.0
2.5
3.0
3.5
4.0
Score
Distance [m]
1°
6°
11°
17°
23°
ut
ut
ut
ut
ut
ut
ut
ut
ut
ut
ut
ut
ut
ut
ut
ut
ut
ut
ut
ut
ut
ut
ut
ut
ut
ut
ut
ut
ut
ut
ut
ut
ut
ut
ut
ut
ut
ut
ut
ut
Figure 4.
Score values with respect to distance and measured angle
Furthermore, it depends on the object size, its temperature
and the AoA itself. Thus it is not very reliable and there-
fore only used as a threshold criterion. That means that a
measurement is valid if its score is within a certain interval
and rejected if not. In case of the later described real-world
tests the limits were determined empirically and set to
50 ≤ Scorevalid ≤ 1500.
(9)
IV. PROCESS OF CALIBRATION
In addition to an adequate algorithm to locate the sensors,
certain requirements must be met in order to enable a
comfortable and successful calibration.
A. Software Requirements
As described in Sect. III-C, due to sensor noise, it is
necessary that the user, who calibrates the system, stands
still at a random position. The position must be chosen
in a way that enough information is gathered to calibrate
all sensors. Hence, a convenient calibration software has to
guide the user with respect to the following aspects. The
system should inform the user,
• when to move and when to stand still.
• when enough information is gathered.
In order to meet these requirements, we developed a cal-
ibration software that realizes this signalling by sound.
After starting the calibration process and entering the room,
the software notiﬁes by a deep beep that the user should
stop moving. After a short period of time a high beep
indicates that this measurement is ﬁnished and that the
user should continue moving around until another deep
beep instructs him to stop. This procedure is repeated until
enough information is gathered, which is reported by a high
double beep. To realize this kind of calibration two further
conditions must be fulﬁlled. The software must be able to
detect, whether the user is standing still or moving, and
whether he has moved far enough.
The detection of movement is realized by considering the
changes in the measured AoAs. If all of them fall steadily
under a certain threshold, it is likely that the user has stopped
moving. On the other hand, the decision whether the user has
moved far enough to process a new measurement is based
on the AoAs. That is, if the change in at least one of the
measured AoAs is steadily greater than a certain threshold,
e. g. 2°, a new measurement can be processed.
Concurrently, the former described preselection process
takes place. So measurements with a score outside the
limits are directly rejected. If furthermore less than two
measurements remain for one source location, it is rejected
completely.
B. Convergence and Local Minima
After gathering the measurement information, the sensor
poses have to be calculated. However, as already described,
two problems may occur: First, due to the initial guess only
a local minimum might be found and second, the calculation
could not converge at all. The latter case can easily be
detected by the software itself, which stops the iteration after
a while, if no convergence is noticeable. The calculation is
then restarted with another initial guess.
Due to measurement errors and the use of an over-
determined NLSE the calculated solution is not a root
anymore but a best ﬁt of the NLSE. Consequently, an
indicator is required to identify whether the found solution is
only a local or a global minimum. We realized this indication
by a plausibility check, as illustrated in Algorithm 1. This
check is based on the assumption that a reasonable solution
is found when the average of the difference between the
measured AoAs and the ones computed with the calculated
poses and measurement positions falls under a certain limit.
In other words, the solution ﬁts the measured angles. This
average is computed separately for every sensor over all
measurements. A sensor pose is considered valid if the
87
International Journal on Advances in Networks and Services, vol 3 no 1 & 2, year 2010, http://www.iariajournals.org/networks_and_services/
2010, © Copyright by authors, Published under agreement with IARIA - www.iaria.org
Article part of a special issue on Wireless Sensor Networks

Algorithm 1 Plausibility Check
Require: anglemeas[1..N, 1..M],
anglecalc[1..N, 1..M]
and
threshold
for i = 1 to N do
avgi = 0;
for all k = 1 to M do
if anglemeas[i, k] is valid then
avgi+ = |anglemeas[i, k] − anglecalc[i, k]|
p = p + 1
end if
k = k + 1
end for
avgi = avgi
p
if avgi > threshold then
return false
end if
i ← i + 1
end for
return true
4,9 m
S2
S3
$R$
(xH,yH)
S1
S4
6,2 m
Figure 5.
Testbed
computed average is smaller than a given threshold. The
overall solution is accepted if all sensor poses are valid.
V. EXPERIMENTAL RESULTS & SIMULATION
In order to test the developed algorithm, several simula-
tions were conducted. Furthermore, our approach was tested
in a real-world scenario.
A. Experimental Results
In order to make some real-world tests, we set up a loca-
tion system consisting of four double-sensor modules placed
at chest height in the corners of a room of 6.2 × 4.9 m2, as
Fig. 5 depicts.
Since every source location is in the FoV of every
double-sensor six different location measurements would
have been sufﬁcient (four variables per sensor pair; cf.
Sect. III-C). However, due to measurement noise and in
order to evaluate the effect of an over-determined calibration,
measurements with 15, 18 and 21 different source locations
were carried out, each with ﬁve passes. Table III illustrates
the absolute mean position errors (MPE) in centimeter and
the absolute mean orientation errors (MOE) in degree of the
different passes. These errors are calculated with respect to
15 locations
18 locations
21 locations
MPF
MOF
MPF
MOF
MPF
MOF
1
24,7
4,0
34,2
2,8
28,6
2,3
2
37,8
3,3
53,6
5,0
28,7
2,9
3
45,3
5,2
31,2
3,5
36,1
2,4
4
46,6
6,3
21,7
2,3
46,4
3,6
5
81,2
8,9
45,6
4,5
24,6
2,8
Ø
47,1
5,5
37,3
3,6
32,9
2,8
Table III
CALIBRATION RESULTS WITH 15, 18 AND 21 SOURCE LOCATIONS
the real sensor poses, which were determined by manual
measurements. However, it has to be noted that also these
measurements are not exact, with regards to orientation.
Consequently, the calibration errors are only given relatively
with respect to this measurement. Although these calibra-
tions only draw samples, it becomes obvious that due to
the limited accuracy of the sensors more than the minimum
number of source locations is necessary to obtain a sufﬁcient
calibration result. Furthermore, it is shown that redundant
source locations improve the mean accuracy, whereas the
improvements above 21 source locations are little.
The actual beneﬁt of the automated calibration are the
tremendous time savings. In comparison to the manual
calibration that required two people and lasted nearly two
hours, the automated calibration could be carried out by one
person in less than ﬁve minutes with 21 different source
locations.
Finally, it should be noted that the calibration errors
mainly depends on the accuracy of the used sensors and not
on the proposed approach itself, as the simulation results
show.
B. Simulation Results
As based on the real-world tests no general statement
about the convergence, the accuracy and the behaviour under
the inﬂuence of different noise levels can be given. We
carried out several simulations, the results of which are
presented in the following. For the simulations we applied
the same setup as before. All simulations were done for
15, 18 and 21 different source locations, each with 1000
runs. The standard deviation of the measurement noise was
adjusted in steps of 0.5° from 0.0° to 2.0°. According to
former experiments, the AoA noise was modelled white and
Gaussian. The source locations were generated randomly.
To evaluate the accuracy, only runs with a successful
plausibility check were taken into account. In order to
88
International Journal on Advances in Networks and Services, vol 3 no 1 & 2, year 2010, http://www.iariajournals.org/networks_and_services/
2010, © Copyright by authors, Published under agreement with IARIA - www.iaria.org
Article part of a special issue on Wireless Sensor Networks

0
10
20
30
40
50
60
70
80
90
100
0
0.5
1.0
1.5
2.0
MPF [cm]
σnoise [°]
15P ts
18P ts
21P ts
ut
ut
ut
ut
ut
ut
ut
ut
ut
ut
ut
ut
ut
ut
ut
rs
rs
rs
rs
rs
rs
rs
rs
rs
rs
rs
rs
rs
rs
rs
(a) Mean position error
0
1
2
3
4
5
6
7
8
9
10
0
0.5
1.0
1.5
2.0
MOF [°]
σnoise [°]
15P ts
18P ts
21P ts
ut
ut
ut
ut
ut
ut
ut
ut
ut
ut
ut
ut
ut
ut
ut
rs
rs
rs
rs
rs
rs
rs
rs
rs
rs
rs
rs
rs
rs
rs
(b) Mean angle error
Figure 6.
Calibration error with respect to noise
guarantee high convergence probability for these simulations
(in contrast to the following ones), the initial guess was not
randomly chosen but set to the exact sensor poses and source
locations, whereas the latter were chosen non-deterministic.
The resulting position and orientation errors are illustrated
by the solid lines in Fig. 6(a) and 6(b). They conﬁrm that an
increased number of source locations improves the accuracy.
Furthermore, the dependence between measurement noise
and the mean position and orientation errors is shown to
be almost proportional. As already mentioned, it is also
clariﬁed that the calibration accuracy only depends on the
measurement error. If there is none, the calibration is exact.
At this point, it should be clear that the position errors scale
with room size whereas angular errors do not. This can be
conﬁrmed by comparing the results given in this paper with
the formerly published one [1].
On the other hand, the results represented in dashed lines
follow from simulations testing the convergence probability
that will be described later on. The interesting aspect with
respect to the former described simulations are the lower er-
rors. The reason is easily explained: In the second simulation
series random start values were used, which led to a lower
overall convergence probability, especially for calibrations
with more erroneous measurements. In conclusion, fewer
bad results inﬂuence the mean values, which leads to lower
mean errors.
As already mentioned, in the simulations used to de-
termine the convergence probability, the initial guess was
chosen randomly. The according outcomes are shown in Fig.
7. Dependent on the measurement noise the convergence
probability lies between 0.38 and 0.21 for only one run per
measurement set, whereas higher noise worsens the results
as well as a higher number of source locations improves
them. On the contrary, by increasing the number of tries per
set up to ten, the probability rises to values between 0.92
and 0.67.
Finally, Fig. 8 illustrates the average number of runs
for successful calibrations with a maximum of ten and the
corresponding averaged computing time on a dual core PC
with 3 GHz. It can be seen that typically three runs are
required for a successful calibration, which takes between
2.5 and 6.6 seconds dependent on the number of source
locations.
So ﬁnally it can be stated that the simulations conﬁrm the
measurement results. When comparing these results with the
real world experiments, it can be assumed that the overall
measurement errors lie between 1.5° and 2°, which equals
the accuracy of the sensors. Additionally, it has to be noted
that the convergence probability of the real measurements
for 18 and 21 source locations is approximately 0.5 and
thus lower than in the simulations. However, that may be
founded due to the fact that the sensor model assumed in
the simulations was quite simple as e. g. measurement errors
due to partially seen objects were not considered.
VI. CONCLUSION
In this paper we presented a software-aided calibration ap-
proach for a triangulation-based indoor location system. This
approach only requires that the user walks through the room
and stops at random locations during calibration. Thereby,
the localization of the nodes can be realized without any
prior knowledge of sensor positions and orientations and
the location of the moving person. Due to the limited com-
putational power of the sensor nodes a centralized approach
was chosen whereas the calibration problem is described
by a non-linear system of equations. In order to solve this
system, an enhanced Newton-Raphson method is applied,
whereas unreliable measurements are identiﬁed and rejected
89
International Journal on Advances in Networks and Services, vol 3 no 1 & 2, year 2010, http://www.iariajournals.org/networks_and_services/
2010, © Copyright by authors, Published under agreement with IARIA - www.iaria.org
Article part of a special issue on Wireless Sensor Networks

0
0.1
0.2
0.3
0.4
0.5
0.6
0.7
0.8
0.9
0
0.5
1.0
1.5
2.0
Probability of convergence
σnoise [°]
15P ts
18P ts
21P ts
ut
ut
ut
ut
ut
ut
ut
ut
ut
ut
ut
ut
ut
ut
ut
(a) One run
0
0.1
0.2
0.3
0.4
0.5
0.6
0.7
0.8
0.9
0
0.5
1.0
1.5
2.0
Probability of convergence
σnoise [°]
15P ts
18P ts
21P ts
ut
ut
ut
ut
ut
ut
ut
ut
ut
ut
ut
ut
ut
ut
ut
(b) Max. of 10 runs
Figure 7.
Probability of convergence with respect to the number of locations and measurement noise
0
1
2
3
4
5
6
7
8
9
10
0
0.5
1.0
1.5
2.0
ØT ries
σnoise [°]
15P ts
18P ts
21P ts
ut
ut
ut
ut
ut
ut
ut
ut
ut
ut
ut
ut
ut
ut
ut
(a) Average number of tries
0
1
2
3
4
5
6
7
8
9
10
0
0.5
1.0
1.5
2.0
ØRuntime [s]
σnoise [°]
15P ts
18P ts
21P ts
ut
ut
ut
ut
ut
ut
ut
ut
ut
ut
ut
ut
ut
ut
ut
(b) Average runtime
Figure 8.
Average number of runs / runtime with respect to noise
based on a certain quality measure during a preselection
process before the calculation is started. Real-world tests
and simulations show that the algorithm works ﬁne under
the inﬂuence of noise and that an increased number of
source locations improves the node localization accuracy.
Furthermore, it could be illustrated that by the developed
algorithm and software a calibration can typically be carried
out in less than ﬁve minutes, whereas this time is dominated
by the measurements. In comparison to a calibration based
on manual measurement, which takes almost two hours, a
signiﬁcant improvement could be realized.
Future work will concentrate on improving the calibration
results by developing movement strategies. Furthermore,
strategies to improve the selection of the initial guess,
like genetic algorithms, are examined. Additionally, the
calibration software could be enhanced in a way that prior
information, such as individual sensor positions can be
manually fed into the algorithm in order to achieve better
results.
REFERENCES
[1] J. Kemper, H. Linde, and M. Walter, “Human-Assisted Cal-
ibration of an Angulation based Indoor Location System,”
in 2nd International Conference on Sensor Technologies and
Applications (SENSORCOMM 2008), August 2008.
[2] J. Hightower and G. Borriello, “Location Systems for Ubiqui-
tous Computing,” Computer, vol. 34, no. 8, pp. 57–66, August
2001.
[3] J. A. Tauber, “Indoor Location Systems for Pervasive Com-
puting,” Massachusetts Institute of Technology, Cambridge,
MA, USA, Tech. Rep., 2002.
90
International Journal on Advances in Networks and Services, vol 3 no 1 & 2, year 2010, http://www.iariajournals.org/networks_and_services/
2010, © Copyright by authors, Published under agreement with IARIA - www.iaria.org
Article part of a special issue on Wireless Sensor Networks

[4] J. Kemper and H. Linde, “Challenges of Passive Infrared
Indoor Localization,” in 5th Workshop on Positioning, Navi-
gation and Communication (WPNC), March 2008.
[5] R. Want, A. Hopper, V. Falcão, and J. Gibbons, “The
Active Badge Location System,” Olivetti Research Ltd.
(ORL), Tech. Rep. 92.1, 1992, last accessed on 2010-06-
08. [Online]. Available: http://www.cs.cmu.edu/~biorobotics/
papers/sbp_papers/integrated2/want_ir_badge.pdf
[6] N. Yoshiike, K. Morinaka, K. Hashimoto, M. Kawaguri,
and S. Tanaka, “3600 direction type human information
sensor,” Sensors and Actuators A: Physical, vol. 77, pp.
199–208(10), 2 November 1999, last accessed on 2010-
06-08. [Online]. Available: http://www.ingentaconnect.com/
content/els/09244247/1999/00000077/00000003/art00367
[7] Ubisense, “System Overview,” http://www.ubisense.net, May
2007, last accessed on 2010-06-08.
[8] R. J. Fontana, E. Richley, and J. Barney, “Commercialization
of an Ultra Wideband Precision Asset Location System,” in
IEEE Conference on Ultra Wideband Systems and Technolo-
gies.
IEEE, November 2003, pp. 369–373.
[9] P. Bahl and V. N. Padmanabhan, “RADAR: An In-Building
RF-Based User Location and Tracking System,” in 19th
Annual
Joint
Conference
of
the
IEEE
Computer
and
Communications Societies (INFOCOM), vol. 2, Tel Aviv,
Israel, March 2000, pp. 775–784, last accessed on 2010-06-
08. [Online]. Available: http://research.microsoft.com/en-us/
people/padmanab/infocom2000.pdf
[10] A. Ward, A. Jones, and A. Hopper, “A New Location
Technique
for
the
Active
Ofﬁce,”
IEEE
Personal
Communications, vol. 4, no. 5, pp. 42–47, October 1997.
[Online]. Available: citeseer.nj.nec.com/ward97new.html
[11] H. Balakrishnan, R. Baliga, D. Curtis, M. Goraczko, A. Miu,
N. B. Priyantha, A. Smith, K. Steele, S. Teller, and K. Wang,
“Lessons from developing and deploying the cricket indoor
location system,” MIT Computer Science and Artiﬁcial Intel-
ligence Laboratory, Tech. Rep., November 2003.
[12] N. B. Priyantha, H. Balakrishnan, E. Demaine, and S. Teller,
“Mobile-Assisted Localization in Wireless Sensor Networks,”
in IEEE INFOCOM 2005, 24th Annual Joint Conference of
the IEEE Computer and Communications Societies, Miami,
FL, March 2005.
[13] L. Doherty, K. S. J. Pister, and L. E. Ghaoui, “Convex
Position Estimation in Wireless Sensor Networks.” in IEEE
Infocom, April 2001.
[14] D. Niculescu and B. Nath, “DV Based Positioning in Ad Hoc
Networks,” Telecommunication Systems, vol. 22, no. 1-4, pp.
267–280, 2003.
[15] ——, “Ad hoc Positioning System (APS) using AOA,” in
INFOCOM 2003. Twenty-Second Annual Joint Conference of
the IEEE Computer and Communications Societies. IEEE,
vol. 3, 30 March-3 April 2003, pp. 1734–1743vol.3.
[16] M. L. Sichitiu and V. Ramadurai, “Localization of Wireless
Sensor Networks with a Mobile Beacon,” in Mobile Ad-hoc
and Sensor Systems, 2004 IEEE International Conference on,
25-27 Oct. 2004, pp. 174–183.
[17] P. N. Pathirana, “Node localization using mobile robots in
delay-tolerant sensor networks,” IEEE Transactions on Mo-
bile Computing, vol. 4, no. 3, pp. 285–296, 2005, member-
Nirupama Bulusu and Senior Member-Andrey V. Savkin and
Member-Sanjay Jha.
[18] J. Scott and M. Hazas, “User-Friendly Surveying Techniques
for Location-Aware Systems.” in Fifth International Confer-
ence on Ubiquitous Computing (UbiComp), Lecture Notes in
Computer Science, vol. 2864, Seattle, USA, October 2003,
pp. 45– 54.
[19] A. Savvides, C.-C. Han, and M. B. Strivastava, “Dynamic
Fine-Grained Localization in AD-Hoc Networks of Sensors,”
in 7th Annual ACM International Converence on Mobile
Computing and Networking, July 2001, pp. 166–179.
[20] A. GmbH, “Ambiplex IR.Loc,” http://www.Ambiplex.com,
last accessed on 2010-06-08.
[21] A. Hoffmann, B. Marx, and W. Vogt, Mathematik für Inge-
nieure 1, 1st ed.
Pearson Studium, 2005.
91
International Journal on Advances in Networks and Services, vol 3 no 1 & 2, year 2010, http://www.iariajournals.org/networks_and_services/
2010, © Copyright by authors, Published under agreement with IARIA - www.iaria.org
Article part of a special issue on Wireless Sensor Networks

