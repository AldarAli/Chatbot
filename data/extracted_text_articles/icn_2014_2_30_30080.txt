Routing Algorithm for Automatic Metering of Waterworks Data 
 
Gang-Wook Shin         Ho-Hyun Lee         Sung-Taek Hong         Jae-Rheen Yang 
K-water Research Institute 
K-water(Korea Water Resources Corporation) 
Daejeon, South Korea 
gwshin@kwater.or.kr   lhh@kwater.or.kr   sthong@kwater.or.kr   jyang@kwater.or.kr  
 
 
Abstract—Real-time acquisition of water meter data is very 
difficult owing to the expensive and difficult environment for 
installing sensors and wired or wireless communication 
systems. In this study, a wireless network algorithm that takes 
into consideration technical and economic factors is proposed. 
Cluster-based ZigBee communication method is applied to 
transmit the sensing data without disruption regardless of 
environmental situations. In addition, it is designed to select 
the cluster head considering the minimization of battery power 
consumption. Through this study, data pertaining to the 
characteristics and the economical efficiency of water meters 
can be collected and analyzed. This study shows that the 
system can be widely used to enhance the water distribution 
networks for stable water supply system. 
Keywords- formatting; water data, automatic metering, meter 
reading system, block system 
 
I.  INTRODUCTION 
The data collected from water meters are used basically 
to ensure stable water supply. The data is very important 
because it is used to determine the tap water fare for 
individual consumers. However, until now, inspectors have 
had to directly visit meters rather than real-time data 
acquisition because of cheap water fare. The irregularity of 
data collection could result in inefficient manufacture and 
supply of water and equitable water allocation might not 
work in a country which experiences water shortages. In 
addition, many complaints are associated with water supply 
charges that are based on irregular data. 
With the development of information and communication 
technologies, the reliable information to the general public is 
provided by realization of a ubiquitous environment in the 
field of electricity, gas, and water utilities. In general, 
providing accurate and up-to-date information pertaining to 
water usage is very difficult and costly. 
In Korea, most of the water meters have been installed in 
poor environments, such as basements or underground areas 
that are hard to access. Also, most of the water meters are of 
the inexpensive mechanical type. Mechanical water meters 
can only be read by visiting the household where it is located. 
In addition, because the meters do not support remote 
automatic meter transmission, there are various problems 
associated with individual visits, such as errors relating to 
minimum flow, consumer privacy, recording errors, and re-
visits due consumer absence.  
In Europe, most of the water meters are installed in easily 
accessible spaces. However, as opposed to Korea, a water 
meter can stably transmit real-time data if a ubiquitous 
sensor network is used. But mechanical water meter types 
are being used due to economic factors in Europe.   
The real-time remote automatic meter reading system, 
i.e., Automatic Meter Reading (AMR), has so far been 
unable to be introduced in Korea due to poor installation 
sites and water cost [1-3]. 
Networks for real-time transmission of data can be 
designed using telephone networks, Cable Television 
(CATV) networks, Code Division Multiple Access (CDMA) 
networks, Radio Frequency (RF) networks, and Power Line 
Communication (PLC) networks, but the Industrial Scientific 
and Medical (ISM) band RF communication network for 
short distances and the CDMA for long distances have been 
proposed considering cost and reliability. RF repeaters for 
short-range communication are required depending on the 
propagation environment, but there are challenges such as 
installation conditions and power management.  
Therefore, the cluster-based routing algorithm is 
proposed to enable real-time data transfer considering the 
power consumption in this study. The status of the water 
meter data transmission is explained in Section 2 of this 
study, and the proposed routing algorithm is described in 
Section 3. The performance of the proposed method is 
measured and analyzed through NS-2 simulation in Section 4 
and finally, Section 5 comprehensively analyzes the 
feasibility and applicability of the algorithm. 
 
II. DATA TRANSMISSION SYSTEM FOR WATER METERS 
There are a variety of data collection methods that are  
used in the field. Meter reading can be done through direct 
readings taken during home visits. In outdoor readings, the 
same data are sent to an external display device from indoor 
water meters. Meter inspectors obtain data with the help of 
wireless communication device by walking-by or driving-by 
the properties. Water meters can be automatically read from 
a fixed communication network. A typical real-time data 
transmission system used by public utilities, such as electric, 
gas, and water, consists of the sensor unit, the transmission 
unit and data management part as shown in Figure 1. The 
function of each component is as follows. At first, the sensor 
unit measures the object and converts the mechanical data 
into electrical data that can be delivered. Then, they are sent 
to a transmission unit to transfer them to data management 
systems, which store the transmitted data simultaneously. 
38
Copyright (c) The Government of Korea, 2014. Used by permission to IARIA.     ISBN:  978-1-61208-318-6
ICN 2014 : The Thirteenth International Conference on Networks

The transmission unit that collects data from a large number 
of sensors has the ability to send certain data on a regular 
basis and to manage their storage. All the data are transferred 
into a database and used for performing fare management, 
finding abnormal measurements, data analysis and supply 
forecasting for management systems. 
The meter measures water usage as the key component in 
the sensor unit. The meter of each home has a diameter of 50 
mm or less. Measurement methods could be classified into 
direct and indirect method. The indirect method depends on 
the rotation speed of the actual flow. The direct method, 
which is used primarily for testing, measures a constant 
volume of water. In order to transmit real-time data, a digital 
meter having a microprocessor and a memory is required. 
Although a partial digital meter has a mechanical type of 
sensor, the meter can convert mechanical signals into 
electrical signals. However, the meter does not have an 
internal microprocessor for data processing. There are two 
kinds of partial digital meters. One is a pulse counting 
method that uses a lead switch, and the other is the camera 
method which has the ability to take and send photos for 
image processing. The camera method should be equipped 
with a microprocessor and a memory to transmit real-time 
data. 
 
Server Modem
AMR
Server
Router
DB
Server
Wire
Network
Wireless
Network
Repeater
Repeater
Hub
Display Unit
Server Modem
Server Modem
AMR
Server
Router
DB
Server
Wire
Network
Wire
Network
Wireless
Network
Wireless
Network
Repeater
Repeater
Hub
Display Unit
 
Figure 1. Schematics of Water Data Transmission 
Data transmission methods can be divided into the wired 
and the wireless method. The latter has the advantage of 
affordability in terms of installation, equipment and 
communication circuit, but it has the disadvantage that data 
is unreliable because of communication interference. So, the 
wireless communication and the power line communication 
are being widely adopted using ubiquitous environment. As 
such, communication environments and meter reading 
methods should be considered not to lose water meter data. 
 
III. CLUSTER-BASED ROUTING ALGORITHM 
Pattern of a residential area shown in Figure 2 must be 
considered to make a plan for sensor distribution. Because 
the operation units for water supply and management are 
generally divided into blocks, the block can be divided 
depending on block’s size. The shape of the block can be 
split into squares, rectangles, triangles, polygons, etc. In this 
study, a suitable transmission algorithm for a variety of 
patterns is proposed. 
An environment for the installation of repeaters cannot 
always be located in the middle of the block for obtaining 
meter data remotely. They are located in various locations, 
such as center, corners or edges under the terms of the block. 
Thus, the nodes are not always generated with configuration 
of a star network. It is not economical to install each repeater 
for these nodes, since it will be an obstacle for optimization 
of transmission environment. Therefore, it is more efficient 
to transfer after collecting data through cluster formation. 
 
 
Figure 2. Pattern of a Residential Area 
The nodes can be divided into a small area of the sensor 
field called clusters. Each cluster has a cluster head which 
collects data from the cluster members and the data is 
delivered to the different clusters or the relay station [4-7]. 
In particular, the Low-Energy Adaptive Clustering 
Hierarchy (LEACH) protocol, which is most commonly used 
to maximize the survival time of the network, adopts the 
probability function as the following equation, which keeps 
energy consumption evenly between the network nodes. 
 
 
 
                      (1) 
 
 
 
Here, i is the identifier of the node, t is the time, N is the 
total number of nodes, k is the number of clusters and r 
represents the round. This protocol consists of advertisement, 
cluster setup, schedule generation and data transfer step. If 
the head is selected at least once during r mod (N / k) rounds 
in the above equation, the chance of re-selection is zero. In 
case that selected cluster head cannot be delivered to sink 
node via one-hop, it is difficult to expect a high transmission 
rate. In this study, the following cluster head selection 
method is proposed. 
39
Copyright (c) The Government of Korea, 2014. Used by permission to IARIA.     ISBN:  978-1-61208-318-6
ICN 2014 : The Thirteenth International Conference on Networks

In order to determine the environmental diversity of 
remote water meter reading like the distribution pattern of a 
residential area, such as in Figure 2, the network should be 
initialized as shown in Table 1. First, the repeater broadcasts 
an advertisement message to characterize the entire node. 
Second, it gives the node IDs according to each node type, 
and third, it performs the function of a cluster head selection 
and change. The whole network becomes ready to start. 
 
TABLE I.  
CHARACTERISTICS OF ADVERTISEMENT MESSAGES  
Node_ID 
Unique ID assigned to a node 
Hops 
Hop depth 
Energy_Data 
Residual energy of the node 
SN_Limit 
Signal level limits 
 
Hops mean the hop depth from the repeater station, 
which is represented by the number of hops. The procedure 
to create the table about their neighbor nodes is done by 
knowing the depth of each node. Their repeater station sets 
zero for hop depth, and then advertisement message is 
transmitted to the network. The node to receive an 
advertisement message from the repeater sets its own hop to 
1, and then it locally broadcasts an advisement message 
including hop information, residual energy, and Node_ID. If 
the node is not yet able to secure the depth of the hop among 
received nodes, it adds one to the value of the received hop 
set. If the node knowing the depth of hop receives an 
advertisement message, it stores the nodes less than the depth 
of its hop information in the parent node table, such as in 
Table 2. If the hop depth of the received message is the same, 
this information should be stored in the neighbor node table. 
The parent node table is used to transmit data from the 
cluster node to the cluster head on the top. If there is no 
parent node table with their lower-hop value than their own 
table, it can be transmitted by searching for a detour route to 
refer to the neighbor node table with the same-hop value. 
TABLE II.  
NODE TABLES 
Table name 
Relationship between value of hops 
Parent node table 
My hop < Received nod hop 
Neighbor node table 
My hop = Received node hop 
Child node table 
My hop > Received node hop 
 
After the child node table has stored the paths of higher 
nodes than their own hops, it refers to the reverse path to 
send messages such as advertisements, broadcast and a 
control messages between random nodes.  
In addition, it is transmitted by specifying a range of 
signal levels in the advertisement message to distinguish the 
type of node due to the level of the signal repeater. The 
configuration of the network is desirable to have the 
composition of a star and cluster to obtain real-time data. 
Thus, the node and repeater with a star topology can transmit 
data directly without the other nodes. However, nodes 
outside the range of the signal level of any node in the cluster 
are composed of local-based clusters to transmit data to 
repeaters through a cluster head. Repeater gives the 
information of node types based on the signal levels of all 
nodes to distinguish the specifications of such transmission 
methods. The node type is specified in the repeater signal 
level and has the attribute value of Table 3. 
 
TABLE III.  
CHARACTERISTIC VALUES OF NODES 
Size of signal level 
> -50 dBm 
< -50 dBm 
Attribute value of node type 
Inside 
Outside 
 
Nodes with inside attribute values collect node data with 
outside attributes and they play a role as a cluster head to 
send to repeaters or send their own data directly to repeaters. 
Outside nodes will form a local based cluster to receive and 
transmit data to nodes selected as the cluster head in the 
transmission path.  
Among the nodes with inside property, any node with a 
large signal level intensity and within one hop to a repeater is 
chosen as a cluster head. Locally distributed 2 to 3 cluster 
heads are selected considering the number of nodes and 
positions, which are then registered as cluster head members 
in the node.  
The nodes registered in the cluster head members will 
have the property value of activity and standby cluster 
headers, such as in Table 4. An active cluster head will be 
selected by calculating the probability among cluster 
members in each round. The node working as the active 
cluster head aggregates data in a cluster to be sent to the 
repeater, and the rest of the cluster members have the 
property value of a standby cluster head to send only their 
own data to the repeater. 
TABLE IV.  
CONFIGURATION OF CLUSTER MEMBER 
Activity cluster head 
Transmission of aggregated data in the cluster 
Standby cluster head 
Transmission of their own data 
 
Any number of the nodes with the outside attribute value 
become one cluster considering geographic location with a 
cluster member, such as in Table 5. 
The cluster heads broadcast their own state to all nodes in 
the scope of the area. The node to receive the broadcasting 
message checks which node is selected as the cluster head 
among cluster members. Then the node prepares for sending 
data to the selected head.  
Each cluster member node is required to have a routing 
table to send a message to the sensor node. Repeater node, 
which sends data messages to the cluster head, stores lower 
40
Copyright (c) The Government of Korea, 2014. Used by permission to IARIA.     ISBN:  978-1-61208-318-6
ICN 2014 : The Thirteenth International Conference on Networks

node information in the child node table. It can be used as 
routing information when sending data to the header. At the 
same time, repeaters replace the value of their own ID and 
hop depth with the Destination_ID and Destination_Hops of 
the data message before sending them to the heads.  
TABLE V.  
CLUSTER MEMBERS 
Cluster 
member 
Cluster division 
Nodes configuration in the cluster 
CMember1 
1# cluster 
Node0, Node1, ............, Node24 
CMember2 
2# cluster 
Node25, Node26, ........., Node49 
CMember3 
3# cluster 
Node50, Node51, ........, Node74 
CMember4 
4# cluster 
Node75, Node76, ........, Node99 
 
Data refer to the parent node and neighboring node table 
to do flooding in the direction of the lower node in hop depth. 
If a routing node receives a data message, it first compares 
its depth and Destination_Hops, and if the hop depth is 
smaller than its depth, it transmits the data in the direction of 
the cluster head. The cluster head finally obtains the data 
through these processes.  
TABLE VI.  
TRANSMISSION DATA FIELD 
Destination_ID 
Address of destination node. 
Destination_Hops 
Hop of destination node 
DATA 
Sensing data 
Energy_Data 
Amount of residual node energy 
 
 
Figure 3. Routing topology 
 
As shown in Figure 3, the topology is proposed for 
optimal routing algorithm. The algorithm selects a node with 
the best amount of residual energy. 
IV. SIMULATION AND ANALYSIS 
The network simulator, NS-2, was used to validate the 
proposed algorithm in this study [8]. 100 sensor nodes were 
randomly distributed in the area of 100m x 100m. The sink 
node was placed in the center of simulation area and the 
maximum transmission distance of the nodes was assumed 
to be 10m. In addition, the average packet transmission rate 
was set to 98% to consider the error rate of the local 
communication. Sensor nodes, except the sink node, were 
set to transmit the data packets during 2,030 seconds. The 
first 30 seconds is allotted to select cluster creation and 
cluster head and then the data packet is transmitted for the 
experiments five times at intervals of 400 seconds. The 100 
sensor nodes were divided into four groups - 25 sensor 
nodes per each group. The sensor node that can transfer data 
to sink node by one hop was selected as the cluster head. To 
monitor the energy variances of each cluster head, the 
cluster head was set to change every 50 seconds.   
 Among Zigbee communications, the most widely used 
routing algorithm is the Ad-hoc On demand Distance 
Vector(AODV). The characteristic of this algorithm is the 
distance vector routing for each node to search the most 
optimal route from a source node to a destination node. 
Thus, this study compared the proposed algorithm with the 
AODV routing algorithm [9-12]. 
Data transmission interval of static type was set to 10 
seconds. Those of multiple type were set to 1, 3, 5, 7 and 10 
seconds for every 5 nodes in each cluster. Packet 
transmission rate is the ratio of the finally reached data 
packets to the generated data packets at the source node. 
Figure 4 shows that the packet transmission rate of the static 
type of 10-second cycle is higher than that of multiple type 
of various cycles. The proposed routing algorithm showed 
over 4% increased result in both static and multiple types 
comparing with AODV. 
 
 
 
Figure 4. Packet transmission rate 
 
In this simulator, the initial energy of each node was set 
to 20J. Each node transmits data to gateway through the 
cluster head at the transmission cycle. Transmit power and 
41
Copyright (c) The Government of Korea, 2014. Used by permission to IARIA.     ISBN:  978-1-61208-318-6
ICN 2014 : The Thirteenth International Conference on Networks

received power were set to 0.0756J and 0.0828J, 
respectively, and the remaining energy was obtained after 
the transmission of 2,030 seconds. As shown in Figure 5, 
the nodes simulated by proposed algorithm had more 
remaining energy than those simulated by AODV algorithm 
by about 50%. The result shows that the proposed algorithm 
performs better in both static and multiple type cases.  
  
 
 
Figure 5. Minimum remaining energy 
 
 
 
Figure 6. Average remaining energy 
 
Figure 6 shows the average value of the remaining 
energy in all nodes after the simulation. The average 
remaining energy of proposed algorithm is about 20% more 
than that of AODV algorithm. We can notice that the static 
type has more remaining energy because the transmission 
cycle of static type is longer than that of multiple type. 
 
V. CONCLUSION 
This study proposed a cluster-based routing algorithm to 
obtain the real-time waterworks data. In particular, we 
considered the environment of communication and power 
with priority. Among the sensor nodes that transmitted to 
the sink node, each cluster’s head was selected by checking 
the reference receiver signal level and remaining energy 
level. 
The experimental results show about 4% improvements 
in packet transmission rate as compared to AODV algorithm. 
Because batteries are essential in waterworks data 
transmission environment, effective use of energy is very 
important. Compared to the existing AODV, the proposed 
method for effective use of energy shows improvements of 
more than 50% at maximum. The results of this study can 
be applied in realization of water reading system where real-
time waterworks data transmission is possible. 
In the future, the proposed algorithm may be applied to 
the implementation of the water management system 
through the expansion of water reading system. 
 
 REFERENCES 
[1] 
F. Arregui, E. Cabrera Jr, and R. Cobacho, "Integrated Water Meter 
Management", IWA Publishing, 2006 
[2] 
OIML, “International Recommendation R 49-1”, 2003. 
[3] 
I. F. Akyildiz, X. Wang, and W. Wang, “Wireless Mesh  Networks: a 
survey”, In International Journal on Elsevier Computer Networks, 
Vol. 47, 2005, pp.445-487. 
[4] 
G. W. Shin, S. T. Hong, and Y. W. Lee,”Walk-by Meter Reading 
System of Digital Water Meter Based on Ubiquitous”, Journal of 
Control, Robotics and Systems Engineering, Vol. 15,2009,pp.668-693. 
[5] 
M. U. Mahfuz and K. M. Ahmed, “A review of micro-nano-scale 
wireless sensor networks for environmental protection: Prospects and 
challenges”, Science and Technology of Advanced Materials, Vol. 6 , 
2005, pp.302-306. 
[6] 
D. Ganesan, A. Cerpa, W. Ye, Y. Yu, J. Zhao, and D. Estrin, 
“Networking issues in wireless sensor networks”, Journal of Parallel 
and Distributed Computing, Vol. 64, 2004, pp.799-814. 
[7] 
W. B. Heinzelman, A. P. Chandrakasan, and H. Balakrishnan, “An 
Application-Specific Protocol Architecture for Wireless Microsensor 
Networks”, IEEE Transactions on wireless communications, Vol. 1, 
No. 4, 2002, pp.660-670. 
[8] 
The Network Simulator – ns-2, http://www.isi.edu/nsnam/ns/, Dec. 
2013. 
[9] 
C. E. Perkins, E. M. Royer, and S. R. Das, “Ad hoc On-demand 
Distance Vector(AODV) Routing”, Internet-Draft, IETF, March, 
2002. 
[10] ZigBee 
Alliance, 
“ZigBee 
Specification: 
ZigBee 
Document 
053474r17”, 17 Jan. 2008. 
[11] K. Akkaya and M. Younis, “A Survey on Routing Protocols for 
Wireless Sensor Networks”, In International Journal on Elsevier Ad 
Hoc Network, Vol. 33, 2005, pp.325-349. 
[12] D.Y. Kim and W.S. Jung, “An Efficient Shortcut Path Algorithm 
using Depth in Zigbee Network, Vol. 34, 2009, pp.1475-1482. 
 
 
 
 
42
Copyright (c) The Government of Korea, 2014. Used by permission to IARIA.     ISBN:  978-1-61208-318-6
ICN 2014 : The Thirteenth International Conference on Networks

