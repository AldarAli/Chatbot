Evaluation of Buffer Size for Middleware using Multiple Interface in Wireless
Communication
Etsuko Miyazaki
Ochamonizu Univercity
2-1-1 Ohtsuka, Bunkyo-ku 112-8610
Tokyo, Japan
Email: etsuko@ogl.is.ocha.ac.jp
Masato Oguchi
Ochamonizu Univercity
2-1-1 Ohtsuka, Bunkyo-ku 112-8610
Tokyo, Japan
Email: oguchi@computer.org
Abstract—Although a variety of wireless interfaces are avail-
able on mobile devices, they still provide only low throughput
so far. When coverage areas of these different technologies
overlap, mobile devices with multiple interfaces can use them
simultaneously by mechanism of Bandwidth Aggregation. How-
ever, there are some performance problems for Bandwidth
Aggregation on Network Layer and lower Layer which derive
from TCP congestion control mechanism. We have proposed
advanced Bandwidth Aggregation on Middleware for the
purpose of avoiding there problems. In this paper, we have
evaluated buffer size for receive-side Middleware.
Keywords-component;
Multiple
interface;
Middleware;
Buffer Size; IEEE 802.11
I. INTRODUCTION
The growth of mobile Internet communication stimulate
developments of a variety of wireless technologies: for
example IEEE 802.11, Bluetooth and WiMAX. Although
some of them have relatively broad bandwidth, they still
have lower throughput than wired connection such as Eth-
ernet, and are able to be accessed only in limited areas. It
is possible to have more efﬁcient mobile Internet service
using multiple interfaces simultaneously, when we are in
areas covered by several services of wireless technologies.
Bandwidth Aggregation which use multiple interface simul-
taneously is proposed as advanced way to access Internet
from mobile node.
Among several research works, seamless vertical hand-
off from one interface to another has been addressed[1].
However, we have not achieved Bandwidth Aggregation in
practical use. Those technologies give us better mobility
support, reliability and resource sharing. Thus, we have pro-
posed and evaluated an innovative mechanism of Bandwidth
Aggregation in this paper.
II. BACKGROUND OF THIS RESEARCH WORK
A. Bandwidth Aggregation in Various Layer
Bandwidth Aggregation is supposed to be realized on sev-
eral layers, while they have merits and demerits respectively.
An approach on Datalink layer[2] will give most effective
result, will give the most effective result, and upper layer do
not need to care about Bandwidth Aggregation. However, we
can install it only world using same protocol for datalink
layer and have to install speciﬁc hardware to their nodes.
An implementation in Network layer will provide efﬁcient
Bandwidth Aggregation by intelligent methods. The advan-
tages using Network layer are they perform transparently
to widely used Transport protocol such as TCP and UDP.
However, TCP may not achieve estimated efﬁciency due to a
possibility that they receive packets in incorrect order. These
problems cause congestion control more than required.
In Transport layer, they have congestion window for each
path. It enables more effective transport by doing packet
distribution and retransmission for each path[3]. However,
the system has to be installed into each operation system in
all the end-end way.
An implementation on Application layer does not demand
to replace current operating systems[4]. However, there are
variety of applications and it is difﬁcult to implement aggre-
gation method for all of them. After connections established,
we have to consider how to distribute packets for each
connection.
B. Packet Loss Problem in Bandwitdth Aggredation on
Network Layer
If multiple interfaces are used for concurrent communi-
cations, there are possibilities that receiving node may take
packets incorrect order. In such a case, receiver recognizes
occurring of packet loss incorrectly due to receiving packets
different from expected order of packets. Then TCP requests
retransmission unnecessarily. This is one of problems in
Bandwidth Aggregation on Network Layer.
For the purpose of eliminating this problem, Earliest
Delivery Path First (EDPF) was proposed[5]. EDPF is
implemented to the node in which path is separated from
sender to receiver. EDPF chooses on which path each packet
should be sent in consideration of their bandwidth, delay and
congestion. EDPF decides the fastest path to transmit the
packet to receiver node. All packets are sent by the route on
which estimated time is the shortest. Therefore, receiver can
receive any packets in correct order. It makes Bandwidth
202
ICN 2011 : The Tenth International Conference on Networks
Copyright (c) IARIA, 2011              ISBN:978-1-61208-113-7

Aggregation effective as estimated efﬁciency in no packet
loss circumstances, and its effectiveness has been veriﬁed
by previous researches.
C. Performance Problem in Bandwidth Aggregation on Net-
work Layer
In the case of wireless communication, there are so many
packet losses more than the case of wired communication.
When Bandwidth Aggregation is operating on Network layer
or lower layer, TCP cannot recognize which path causes
the packet loss. Thus, TCP executes congestion control
and throughput is degraded more than necessary. This is
the second problem in Bandwidth Aggregation on Network
Layer.
Packet-Pair based Earliest-Delivery-Path-First algorithm
for TCP applications (PET) and Buffer Management Policy
(BMP) were proposed for the purpose of ﬁxing that prob-
lems on Network layer[6].
PET has functions estimating which path should be used
more strictly and dynamically. BMP is implemented in
receiver node, evaluates whether a received packet is needed
to line up or caused packet loss. When BMP receives later
sequence number packet, it informs packet loss was occurred
for sure. Otherwise BMP delivers correct order packets to
TCP.
With PET and BMP, more effective communication is
realized compared with implemented EDPF, in particular,
when packet losses occur. However, in circumstances with
a lot of packet losses occur, even PET-BMP cannot exercise
efﬁcient Bandwidth Aggregation. This is most difﬁcult prob-
lem to solve in Bandwidth Aggregation on Network Layer.
Referenced researches claim it is possible to get expected
results with eliminating packet losses using other methods.
In reality, it is too difﬁcult to eliminate packet losses in
wireless communication.
III. OUR PROPOSAL FOR BANDWIDTH AGGREGATION
As shown in previous chapters, we face a various ob-
stacles using Bandwidth Aggregation on Network layer
and/or lower layer. Thus, we propose Middleware layer that
aggregate bandwidth on the middle of Application layer
and Transport layer. Figure 1. shows comparison between
Bandwidth Aggregation on Network layer and our proposed
model.
A. An Overview of Our Proposal
Our proposal model has some TCP connections per each
paths and aggregates their connections. Therefore, appli-
cations are not required to be conscious of aggregating
bandwidth. It has some TCP congestion windows which
prevent throughput degradation more than necessary in cir-
cumstances with many packet losses per each paths. Its
feature avoid the problem in implementation on Network
Application
Middleware
TCP, UDP
IP
MAC
BAG on Network Layer
Proposed Model
Figure 1. Comparison Between BAG on Network Layer and Our Proposed
Model
layer. Our previous research work shows their problems
on Network layer are solved[7]. The defect which PET-
BMP could not solve is overcome by our method, which
means that Bandwidth Aggregation on Middleware Layer is
effectively than on the other Layers.
This approach can also be implemented by modifying
TCP which aggregates some connections on Transport layer.
However, as an easier way, we can use existing TCP
for the purpose of achieving the most efﬁcient Bandwidth
Aggregation.
B. The Design of Our Proposed Model
The sender Middleware establishes TCP connections on
every possible paths. They receive a packet from an ap-
plication and give sequence number to a packet. A packet
is sent to enabled connection. The receiver Middleware
puts received packets in correct order and give them to an
appropriate application.
The receiver Middleware has a possibility that some
packets arrive by incorrect order and needs to have buffer to
restore packets for the purpose of waiting for the packet with
expected sequence number. Estimation of required buffer
size in each circumstances is one of the important points
for designing the Middleware. BMP also considers about
buffer size and controls how packets should be deriverd. We
propose the method on other layer and suppose that they
will behave differently.
IV. EVALUATION OF QUEUE SIZE WITH SIMULATION
In this experiments, we are motivated by the advantages
that uses Bandwidth Aggregation through simultaneous use
of multiple interfaces. We have used simulation software
QualNet for their experiments[8].
For the purpose of designing Middleware, the buffer size
of Middleware receiver has to be estimated clearly. We have
investigated their size under various circumstances.
203
ICN 2011 : The Tenth International Conference on Networks
Copyright (c) IARIA, 2011              ISBN:978-1-61208-113-7

A. Scenario 1 - Low Bit Rate Wireless Communications
Node 1 sends some data to Node2 which has 2 interfaces
through 2 paths referring to Figure 2.
10Mbps
Delay = 50ms
10Mbps
Delay = 15ms
10Mbps
Delay = 50ms
100kbps
100䡚800kbps
NODE 1
NODE 2
Figure 2.
An Overview of Scenario 1
The bandwidths at wired connection are 10Mbps. One
of wireless connection is ﬁxed to 100kbps and the other is
varied from 100kbps to 800kbps. The rate of two bandwidth
of wireless connection is varied from 1:1 to 1:8. Transport
protocol is set to TCP new Reno, and parameters are
conﬁgured by following Table 1.
Table I
TCP PARAMETERS
MSS
1460Bytes
Send buffer
65535Bytes
Receive buffer
65535Bytes
B. Scenario 2 - High Bit Rate Wireless Communications
Node 1 sends some data to Node2 which has 2 interfaces
through 2 paths referring to Figure 2.
10Mbps
Delay = 50ms
100Mbps
Delay = 15ms
100Mbps
Delay = 50ms
500kbps
500k䡚4Mbps
NODE 1
NODE 2
Figure 3.
An Overview of Scenario 2
The bandwidths at wired connection are 100Mbps. The
one of wireless connections is ﬁxed to 500kbps and the
other one is varied from 500kbps to 4Mbps. The rate of
two bandwidth of wireless connection is varied from 1:1 to
1:8. Transport protocol and TCP parameters are conﬁgured
same as Scenario 1.
C. Term of Steady State and Unsteady State
Figure 4. shows throughputs of two connections and
buffer size of receiver middleware when bandwidth of wire-
less connections are set to 100kbps and 300kbps.
0
10
20
30
40
50
60
70
80
90
100
0
50,000
100,000
150,000
200,000
250,000
300,000
350,000
400,000
0
5
10
15
20
25
30
35
Queue Size [Packets]
Throughput [bps]
seconds
100kbps
300kbps
Queue Size
Steady State
Term of Unsteady State
Figure 4.
Throughputs and Queue Size
After a short while, two of wireless connection’s through-
put show efﬁcient communication. Queue size of receiver
Middleware is growing at ﬁrst and settle down at a value.
We call the state that buffer size is stable “Steady Term”,
and the time of until being Steady Term “Term of Unsteady
State”. We focus on their values at various circumstances.
D. Aasociation Between Rate of Bandwidths and Required
Buffer Size
Figure 5. shows buffer size at Steady Term in Scenario 1.
when rate of two bandwidths are changed.
0
100
200
300
400
500
Buffer Size [kBytes]
Bandwidths [bps]
Scenario 1
Figure 5.
Queue Size in Scenario 1
The value of buffer size when two interfaces has same
bandwidths is 0. It is proportional to the ratio of one
interface’s bandwidth to other interface’s bandwidth.
204
ICN 2011 : The Tenth International Conference on Networks
Copyright (c) IARIA, 2011              ISBN:978-1-61208-113-7

Figure 6. shows buffer size at Steady Term in Scenario 2.
when rate of two bandwidths are changed.
0
100
200
300
400
500
Buffer Size [kBytes]
Bandwidths [bps]
Scenario 2
Figure 6.
Queue Size in Scenario 2
The value is proportional to the ratio of one interface’s
bandwidth to other interface’s bandwidth as well as Scenario
1. Although Scenario 1. and Scenario 2. have different
bandwidth and different rate of bandwidth between wired
and wireless, buffer size is resolved by rate of two bandwidth
of wireless connection.
E. Association Between Rate of Bandwidths and Time of
Unsteady State
Figure 7. shows time of Unsteady State in Scenario 1.
and Scenario 2. when rates of two wireless connections’
bandwidth are changed.
0
1
2
3
4
5
6
7
1 : 1
1 : 2
1 : 3
1 : 4
1 : 5
1 : 6
1 : 7
1 : 8
Unsteady State [seconds]
Rate of Bandwidths
Scenario 1
Scenario 2
Figure 7.
Unsteady Time
The time of Unsteady State in Scenario 2. which has high
bit rate is shorter than its in Scenario 1. which has low bit
rate in whole. The rates of bandwidth between two wireless
connection do not affect their time.
V. CONCLUSION AND FUTURE WORK
In this paper, we have experimented with network sim-
ulator for the purpose of evaluation of the communication
using multiple interfaces simultaneously. The methods of
Bandwidth Aggregation on network layer still have prob-
lems, for instance, they can not recognize which path cause
the packet loss. We have proposed the model of Bandwidth
Aggregation on Middleware in order to eliminate their
problem. Their effect are veriﬁed compared with previous
method since we can get comparable throughput as well as
aggregating throughput of multiple connection. The receiver
Middleware needs to have buffer to restore the order of
packets’ sequence number. We have investigated how large
buffer is needed in various situations. The mobile node
which has two interfaces varies one of interface’s bandwidth
and observes the buffer size. The result shows it proportional
to the ratio of one interface’s bandwidth to other one.
In the future, we will implement the feature of buffer
size that demonstrated by the experiments and function on
the sender Middleware considering how to distribute each
packets to the paths. Moreover, we will suppose that mobile
node can have three or many wireless interfaces and study
the result in that cases. In addition, we try to achieve more
efﬁcient Bandwidth Aggregation in a various situations, for
instance, occurring packet losses, various pattern of lower
layer, and dynamically-changed bandwidth.
REFERENCES
[1] M. Stemm and R. Katz：“Vertical handoffs in wireless overlay
networks,” Mobile Networks and Applications Vol.3, No4,
pp.335-350, Jan. 1998.
[2] IEEE P802.3ad Link Aggregation Task Force：
http://grouper.ieee.org/groups/802/3/ad/
[3] Junwen Lai Ming Zhang and et al : “A transportlayer approach
for improving end-to-end performance and robustness using re-
dundant paths.” USENIX 2004 Annual Technical Conference,
pages 99-112, 2004.
[4] H. Nozawa, N. Honda, K. Sakakibara, J. Nakazawa, and
H. Tokuda: ARMS: “Application-level Concurrent Multipath
Utilization on Reliable Communication” Internet Conference
2008，Oct. 2008.
[5] K. Chebrolu and B. Raman：“Bandwidth Aggregation for
Real-Time Applications in Heterogeneous Wireless Networks,”
IEEE Transactions on Mobile Computing, Vol.5, No4, pp.388-
403, April 2006.
[6] K. Chebrolu, B. Raman, and R.R. Rao：“A Network Layer
Approach to Enable TCP over Multiple Interfaces,” J. Wireless
Networks (WINET), Vol.11, No5, pp.637-650, Sept. 2005.
[7] E. Miyazaki, O. Altintas, and M. Oguchi : “A Study of Band-
width Aggregation Using Multiple Interfaces on Middleware
Layer” DICOMO 2010, July 2010.
[8] Scalable Network Technologies：
http://www.scalable-networks.com/
205
ICN 2011 : The Tenth International Conference on Networks
Copyright (c) IARIA, 2011              ISBN:978-1-61208-113-7

