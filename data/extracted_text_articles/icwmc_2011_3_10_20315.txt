A Smart Predictive Link Layer Trigger Algorithm to Optimize 
Homogenous/Heterogeneous Networks WiFi Handover Decisions 
Chunmei Liu 
Clearwire Corp. 
Herndon, VA, USA 
mayliu@alum.mit.edu 
Christian Maciocco 
Intel Labs, Circuits and Systems Research 
Hillsboro, OR, USA 
christian.maciocco@intel.com
 
 
Abstract— In traditional wireless networks, link layer metrics 
used to trigger handover are mainly signal quality based, such 
as Received Signal Strength (RSS). While signal quality is one 
major reason for poor performance in traditional wireless 
networks, WiFi networks are special in that there is another 
major reason for poor performance, which is collision. While 
there exist some metrics to reflect collisions and trigger 
handover when necessary, such as channel load, this paper 
explains why these existing metrics, such as channel load, 
cannot capture the actual collision situation in the network and 
that one station is experiencing. Based on this observation, this 
paper proposes a new metric, called station collision 
probability, as an additional handover trigger metric, and 
develops a prediction algorithm for this metric. Specifically, 
for WiFi networks, station collision probability is the 
probability that a packet being transmitted by a station incurs 
a collision. A prediction algorithm is developed for station 
collision probability on unlicensed WiFi networks, which takes 
the number of collisions between two successful transmissions 
on the channel as the measurement and predicts the station 
collision probability by solving a developed equation.  The 
algorithm does not require the station to send any traffic, and 
applies to real time decisions, including predictive handover 
decisions to initiate and prepare the handover to reduce 
latency and service interruption for the end-users. This paper 
focuses on defining an optimal collision estimation algorithm 
and the simulation results validates that the algorithm predicts 
station collision probability and adapts well to the change of 
network traffic. The predicted station collision probability can 
then be integrated with the existing signal quality based trigger 
metrics to trigger handover, which is beyond the scope of this 
paper and will be the next steps. 
Keywords- predictive handover trigger; station collision 
probability; 
WiFi 
networks; 
intra- 
and 
inter-technology 
handover. 
I. 
 INTRODUCTION 
Figure 1 illustrates a typical handover architecture based 
on IEEE 802.21 [1], which is a standard that focuses on 
media-independent handover (MIH) method and procedures. 
The first step in this architecture is link layer trigger, which 
is also the focus of this paper.  The objective of link layer 
trigger is to provide algorithms to trigger handover when link 
is not “good”, viewed from data link layer and below. The 
link layer trigger is then followed by network selection and 
handover execution. 
Handover 
execution
Network 
selection
Link layer
trigger
 
Figure 1. 802.21 based handover architecture. 
 
Link layer trigger consists of the following three portions: 
1) trigger metric selection; 2) metric estimation/prediction; 
3) metric based trigger algorithm. This paper focuses on the 
first 
two: 
handover 
trigger 
metric 
selection 
and 
estimation/prediction. Essentially, this paper considers 
predictive link layer handover triggers whose purpose is to 
allow early handover initiation and preparation so that the 
handover latency and service interruption time can be 
reduced significantly. 
In traditional wireless networks, signal quality related 
metrics, such as Received Signal Strength (RSS), are 
typically the metrics of choice used in conventional 
handover algorithms. Gregory [2] reviews conventional 
trigger algorithms based on RSS, where RSS used is 
averaged RSS. Alexe, Vijayan, Zhang, et al. [3][4][5] 
provide analysis on the handover performance based on 
these algorithms. Zonoozi et al. [6] further optimizes the 
parameters including the hysteresis level and signal 
averaging time. 
Signal quality related metrics, such as RSS, captures how 
good the physical channel is, and gives limits on the max 
data rate the station can receive, which is directly related to 
In wireless networks, handover is one of the key 
approaches to ensure user experience and network 
performance.  From user perspective, a user may request 
handover when it cannot receive quality services from its 
current access point (AP).  From network perspective, an AP 
may request a group of users to perform handover to balance 
load. This applies to both homogenous and heterogeneous 
networks. 
48
ICWMC 2011 : The Seventh International Conference on Wireless and Mobile Communications
Copyright (c) IARIA, 2011.     ISBN: 978-1-61208-140-3

the station performance. In addition to signal quality, there 
is another significant aspect that directly impacts station 
performance, that is, how much time a station can effectively 
utilize the physical channel.  The latter is especially 
important for WiFi networks due to its nature of contention-
based MAC, where stations under one AP compete for 
channel access.   
One example of the importance of the latter with respect 
to station’s performance is that, in a WiFi network, even 
when a station is close to an access point (AP) and the 
signal quality is excellent, if the network is highly 
congested, the transmissions from this station will incur 
collisions coming from other competing stations with high 
probability. These collisions result in not only packet losses, 
but also additional backoff stages.  All the collision slots 
and backoff slots are not actually utilized by the station, in 
that either the transmissions from the station incur collisions 
and fail (collision slots), or there is no transmission from the 
station at all (backoff slots). The only effective slots are 
those that contain successful transmissions. Apparently in 
this scenario, the time when the station can effectively 
utilize the physical channel is limited.  As a result, although 
the signal quality is excellent and the channel is excellent, 
the 
station 
experiences 
significantly 
deteriorated 
performance such as low throughput and high delay. 
Accordingly, in such scenarios, the station should search for 
handover opportunities, either to another AP within the 
WiFi network, or to a base station (BS) of another network 
such as a WiMAX BS. 
This paper focuses on the latter aspect, that is, “how much 
time can a station effectively utilize the physical channel”.  
Specifically, in addition to existing signal quality related 
metrics, this paper proposes to use station collision 
probability as a metric to trigger handover from WiFi 
networks. Station collision probability of a station is defined 
to be the probability that a packet being transmitted by the 
station incurs a collision. This probability is the same as the 
conditional collision probability in Bianchi [7]. Since this 
probability is to be used as a handover trigger metric, the 
term station collision probability is used for clarity and to 
avoid mathematical terms. According to the WiFi backoff 
mechanism specified in the standard 802.11 [8], once the 
station collision probability is known, the time that the 
station can effectively utilize the channel can be calculated 
from the backoff mechanism. Together with the signal 
quality, the station performance can then be estimated and a 
handover can be triggered when necessary. 
Note that while currently there do exist some metrics that 
are somewhat related to MAC collisions and are being used 
to trigger handover from WiFi networks, such as channel 
load, they do not reflect collisions. One such an example is 
when there is only one station transmitting within an AP 
cell, but the station is saturated, meaning that it always has 
packet to transmit.  In this case the channel load is high, 
while there are 0 collisions and the station receives excellent 
service from the AP.  Hence the station should stay with this 
cell instead of triggering a handover to some other 
networks.  
Also note that since one collision may involve several 
packets, station collision probability is different from the 
channel collision probability, which is the probability of a 
collision among all the transmissions on the channel. Hence 
station collision probability cannot be estimated by simply 
computing the percentage of collisions over overall 
transmissions on the channel. Figure 2 shows an example 
which illustrates these two probabilities and their 
differences.  It shows that packet collision probabilities for 
station 1 and 2 are 1/3, respectively, while channel collision 
probability is 1/5, which does not equal to the station 
probability of 1/3. 
 
 
Station collision probability of station 1 and 2 = 1/3: each 
station transmitted 3 packets, one of which incurs a collision.  
 
Channel collision probability = 1/5: the channel sees 5 
transmissions, one of which is a collision. 
 
Station collision probability ≠ channel collision probability 
Figure 2. Station collision probability vs channel collision probability. 
 
In addition to propose station collision probability as a 
handover trigger, this paper develops a prediction algorithm 
for station collision probability. The algorithm measures 
number of collisions between two successful transmissions 
occurring on the channel, computes its average, and then 
obtains the station collision probability by solving one 
equation. Since the algorithm uses all channel data, which 
includes data from other stations instead of data from the 
considered station only, the algorithm does not require the 
station to send any traffic.  In addition, channel data 
provides many more samples within a period of time than 
the station’s own data.  Hence the proposed algorithm does 
not require probing, adapts to network traffic changes well, 
and applies to real-time decisions, including handover 
decisions. 
The predicted station collision probability can then be 
integrated with the existing RSS based link-layer predictive 
triggers, such as those described in Huaiyu, Choong, et al. 
[9][10], to optimize network selection and seamless 
handover over homogenous or heterogeneous networks. 
Note that one major difference between the triggers 
described in Huaiyu, Choong, et al. [9][10] and the triggers 
proposed in this paper is that the triggers in Huaiyu, 
Choong, et al. [9][10] are RSS based, while the triggers in 
the paper focuses on “how much time can a station 
Packets from  
Station 1 + 
station 2 
Packet 
from 
station 1 
Packet from 
station 2 
Packet from 
station 2 
Collision 
Successful 
transmission 
Packet 
from 
station 1 
Successful 
transmission 
Successful 
transmission 
Successful 
transmission 
49
ICWMC 2011 : The Seventh International Conference on Wireless and Mobile Communications
Copyright (c) IARIA, 2011.     ISBN: 978-1-61208-140-3

effectively utilize the physical channel”. The integration of 
the triggers is beyond the scope of this paper and will be our 
future work. 
This paper is outlined as follows: Section II derives the 
prediction algorithm for station collision probability.  
Section III validates the prediction algorithm using OPNET-
based simulations. Section IV concludes the paper. 
II. 
PREDICTION ALGORITHM FOR STATION COLLISION 
PROBABILITY  
A. Analytical Model  
The development of the prediction algorithm for station 
collision probability is based on the analysis framework 
proposed in Bianchi [7]. In Bianchi [7], by assuming ideal 
channel condition, the author considered saturated network 
and analyzes DCF (Distributed Coordination Function) 
performance. It is assumed that at each transmission attempt, 
each packet collides with constant and independent 
probability.  A single station is then modeled as a bi-
dimensional Markov chain, with the backoff stage and 
counter as states, and transition probabilities as functions of 
assumed constant collision probability.  The Markov chain is 
solved to obtain collision probabilities, saturated throughput, 
and other parameters.  The results show good consistency of 
the analysis with simulation results. 
Two major results obtained in Bianchi [7] are the 
relationship among the number of saturated stations n, the 
probability that a station transmits in a randomly chosen slot 
 , and station collision probability p, as follows: 
(2 ) )
1(
)1
2 )(
1(
2 )
1(
2
p m
pW
W
p
p





 
,                         (1) 
) 1
1(
1




n
p

,                                                           (2) 
where m is the value such that 
min
max
2 CW
CW
m

,  
W  CWmin
, 
CWmin
and 
CWmax
are the minimum and 
maximum contention window, respectively. 
 
 
Figure 3. Generic slots in basic access mechanism. 
 
In order to be consistent with the 802.11 standard [8], 
this paper slightly modifies the format of generic slot used in 
Bianchi [7] as follows: in Bianchi [7], for basic access, a 
generic slot that includes a collision consists of PHY and 
MAC header plus payload plus DIFS. According to the 
802.11 standard [8], a station shall use EIFS, instead of 
DIFS, before transmission, when it determines that the 
medium is idle following a collision.  Hence the generic slot 
in this paper is defined as those in Figure 3. 
Fortunately, the basic unit of the Markov model in 
Bianchi [7] is a generic slot, and the Markov model does not 
change with the format of the generic slot.  Hence the 
analysis in Bianchi [7] can be reused under the new 
definition of generic slots, and equation (1) and (2) above, 
which are derived from the Markov model, still holds under 
the new definition. 
B. Parameter Relationships  
Now, let’s consider the number of collision slots between 
two successful transmissions and its expectation, denoted by 
c
n , and 
[ c ]
E n
, respectively. 
[ c ]
E n
 will be used later in the 
proposed prediction algorithm and the predictive trigger. 
Let
tr
P  denote the probability that there are at least one 
transmission in the considered slot time, and 
sP  denote the 
probability that a transmission occurring on the channel is 
successful.  Then the probabilities that a random slot is an 
idle slot, a slot with successful transmission, and a slot with 
collision, are 
tr
1 P
, 
tr
PsP
, and
tr
s P
1(  P )
, respectively.  
Hence, the expectations of 
cn  can be represented as follows: 
1
1
)
1(
]
[




s
tr
s
tr
s
c
P
P
P
P P
E n
.                                        (3) 
Moreover, from their definitions, 
Ptr
 and 
sP can be 
represented in terms of n,  , and station collision probability 
p, as follows: 
n
tr
P
)
1(
1

 
, 
                                                 (4) 
n
n
tr
n
s
n
P
n
P
)
1(
1
)
1(
)
1(
1
1













. 
     
     (5) 
By combining equation (2)-(5) and after some 
manipulations, parameters p, n, and   satisfy the below 
equation: 
0
)1
]
( [
1
1
1



 

cn
E
n
p


. 
   
     (6) 
Furthermore, from equation (2), n can be represented by 
p and   as follows: 
)
1
ln(
)
ln(1
1


 
p
n
. 
 
 
 
     (7) 
Equations (1), (6) and (7) show that, once we have 
[ c ]
E n
, p, n, and  can be solved by these three equations. 
This leads to the below prediction algorithm. 
C. Prediction Algorithm 
Define function f(p) as below: 
)1
]
( [
1
1
1
( )


 


E nc
n
p
f p


. 
 
     (8) 
where   is given in terms of  p  as in equation (1), and n 
is given in terms of p and   as in equation (7). 
PHY 
hdr 
MAC 
hdr 
SIFS 
ACK 
DIFS 
Slot time 
(a) A slot with a successful directed packet transmission – basic access 
PHY 
hdr 
MAC 
hdr 
PAYLOAD 
EIFS 
Slot time 
Slot time 
PAYLOAD 
(c) An idle slot 
(b) A slot with a collision – basic access 
50
ICWMC 2011 : The Seventh International Conference on Wireless and Mobile Communications
Copyright (c) IARIA, 2011.     ISBN: 978-1-61208-140-3

Prediction algorithm: 
Choose an arbitrarily small number 
  0
. The  
prediction algorithm for station collision probability is as 
follows: 
Step 1: Upon each successful transmission, collect 
c
n  
and update its average as 
[ c ]
E n
. 
Step 2: Find 
]
[ 1,0

p
 such that 
0
( )
f p 
 and update 
p prediction  p
.  
Step 3: Go back to step 1.   
 
Lemma 1: for 
0
]
[
E nc 
 and an arbitrarily small number 
  0
, there exists a 
]
[ 1,0

p
 such that 
0
( )
f p 
. 
 
This lemma can be proved by showing that: 
a) 
f (p)
 is 
continuous 
and 
decreases 
monotonically with p; 
b) 
0
(0)

f
;  
c) 
0
)
1(
 
f
. 
For a), it is straightforward to show that 
f (p)
 is 
continuous, as below: equation (1) can be alternatively 
written as below: 






1
0
(2 )
1
2
m
i
p i
pW
W

 
 
 
      (9) 
Hence   decreases with p,
]
1
2
,
1
2
2
[



W
mW

, and 
 1
. Equation (7) shows that 
n 1
 and by definition, 
] 1 1
[

E nc 
. Hence 
f (p)
 is continuous by its definition in 
equation (8). 
Monotone can be shown by considering equation (1), (7) 
and (8) together. 
For b), by plugging 
p  0
 into (1), (7) and (8), 
f (p)
 
becomes: 
]
[
1
2
1
1
1
0)
(
E nc
W
f


 
 
 
 
    (10) 
Since W>0 and 
0
]
[
E nc 
, 
0
(0)

f
. 
For c), since
]
1
2
,
1
2
2
[



W
mW

 as shown previously, 
from equation (7), 
)
1
2
2
1
ln(
)
ln(1
1
)
1
ln(
)
ln(1
1



 




W
p
p
n
m

.  
   (11) 
Hence from equation (8), 





ln
1
)1
]
( [
1
2
)
1
2
2
1
ln(
)
ln(1
1
1
2
1
1
)1
]
( [
1
2
1
2
1
1
)
1(
1
)
1(
1
0
c
c
E n
W
W
p
W
E n
nW
W
f
c
m
c





















 





 



 

 
where 
c0
 and 
1c
 are constants and 
1
]
2 [
2
0



W
E n
c
c
,  
.0
1
2
)
1
2
2
1
ln(
] 1
[
1





 
W
W
E n
c
m
c
 
Further processing the above equation shows that 
0
ln
1
ln
)
1(
1
0
1
0











c
c
c
c
f
,  
 
   (12) 
where the last inequality holds since the numerator is less 
than 0 for arbitrarily small  , and the denominator comes 
from 
)1
]
( [
1
2
1
2
1


 

E nc
nW
W
, which is greater than 0 
as 
n 1
 and 
] 1 1
[

E nc 
 as shown previously. 
 
Lemma 2: The computation complexity of the proposed 
algorithm is upper bounded by 

1
log2
, where δ is the given 
tolerance. 
 
The computation complexity of the algorithm depends on 
the number of iterations needed for solving 
0
( )
f p 
 in step 
2.  If the bisection method is employed, the complexity is 

1
log2
. Hence the computation complexity of the 
estimation algorithm is upper bounded by 

1
log2
. 
Note that this lemma says that if the tolerance is 
2
10 , 
then at most 7 iterations are enough. This shows the low 
computation complexity of the proposed algorithm. 
III. 
SIMULATION RESULTS  
The proposed algorithm is simulated by OPNET.  The 
scenario simulated is shown in Figure 4, where station 1 to 9 
has saturated traffic with destination being station 0, and the 
physical channel is set to be perfect to exclude the effects of 
channel losses.  Station 1 to 9 start packet transmissions at a 
random time between 0s and 5s after the start of the 
simulation, and prediction of station collision probability 
starts at 5s.   
For station 5, Figure 5 plots the comparison between 
predicted station collision probability and actual percentage 
of packets that incurred collisions, where the blue curve is 
51
ICWMC 2011 : The Seventh International Conference on Wireless and Mobile Communications
Copyright (c) IARIA, 2011.     ISBN: 978-1-61208-140-3

the actual percentage and the red curve is the predicted 
station collision probability.  The transient period of the blue 
curve at the beginning of the simulation is due to the random 
start time of all stations’ traffic. 
Destination
Station-0
Source-1
Source-2
Source-3
Source-4
Source-5
Source-6
Source-7
Source-8
Source-9
 
Figure 4. OPNET simulation scenario with ten stations. 
 
Red curve -  predicted station collision probability 
Blue curve - actual percentage of packets from station 5 that incurred 
collisions. 
Figure 5. Comparison between actual percentage of collisions and 
predicted station collision probability. 
For other stations, the comparison between predicted 
station collision probability and actual percentage of collided 
packets is similar, which is not shown here due to limited 
space. Figure 5 clearly shows that the estimated station 
collision probability converges to the actual percentage of 
collisions very fast.  In addition, the prediction starts during 
the transient period, and the predicted station collision 
probability reaches its “steady state” value faster than the 
actual percentage of collided packets.  Hence this algorithm 
indeed predicts future station collision probability and adapts 
to the change of network traffic well.  
Detail data analysis shows that the estimation errors 
differ from station to station.  The largest estimation error is 
7.5%, and the smallest is 1.2%, which validates the accuracy 
of the proposed prediction algorithm. 
IV. 
CONCLUSION  
For wireless stations, it is key to detect and react rapidly 
to link condition changes as they directly affect the station 
connectivity and application performance.  
In this paper, in addition to the commonly used signal 
quality based triggers, we proposed a novel smart predictive 
handover trigger algorithm based on mobile station collision 
probability once an issue has been detected with the current 
network. A prediction algorithm is developed to predict 
station collision probability, which does not require the 
station to send any traffic, has low computation complexity, 
and applies to real time decisions. Simulation results show 
that the predicted value matches well with the actual value. 
The predicted station collision probability hence provides the 
basis for a predictive handover trigger that based on not only 
signal quality, but also potential collisions one station may 
experience, which captures the actual performance the 
station may expect. 
As a next step we are integrating the described station 
collision probability with RSS to investigate how to select 
the most appropriate ones under various conditions and the 
resulting handover performance for WiFi wireless station. 
REFERENCES 
[1] IEEE P802.21/D01.00, March 2006, “Draft IEEE Standard 
for Local and Metropolitan Area Networks: Media 
Independent Handover Services”. 
[2] Gregory P. Pollhi, “Trends in Handover Design”. IEEE 
Communications Magazine, pp. 82-90, March 1996. 
[3] Alexe E. Leu and Brian L. Mark,” A Discrete-Time Approach 
to Analyze Hard Handoff Performance in Cellular Networks”. 
IEEE Transactions on Wrieless Communications, pp. 1721- 
1733, Sept. 2004. 
[4] R. Vijayan and J. M. Holtzman, “A model for analyzing 
handoff algorithms,” IEEE Trans. Veh. Technol., vol. 42, pp. 
351–356, Aug. 1993. 
[5] N. Zhang and J. M. Holtzman, “Analysis of handoff 
algorithms using both absolute and relative measurement,” in 
Proc. Veh. Technol. Conf., 1994, pp. 82–86. 
[6] M. Zonoozi, P. Dassanayake, M. Faulkner, "Optimum 
Hysteresis Level, Signal Averaging Time and Handoff 
Delay". IEEE 47th  VTC, May 1997, USA, pp. 310-313. 
[7] G. 
Bianchi, 
“Performance 
analysis 
of 
the 
IEEE 
802.11distributed coordination function,” IEEE J. Select. 
Areas Commun., vol. 18, no. 3, pp. 535-547, 2000 
[8] IEEE P802.11, Jun. 2007, “IEEE Standard for Wireless LAN 
Medium Access Control (MAC) and Physical Layer (PHY) 
Specifications”. 
[9] Huaiyu Liu, Christian Maciocco, Vijay Kesavan, and Andy 
Low, “Energy Efficient Network Selection and Seamless 
Handovers in Mixed Networks”. IEEE World of Wireless 
Mobile and Multimedia Networks, 2009 
[10] K.N. Choong, Vijay Kesavan, S.L. Ng, Francisco de 
Carvalho, Andy Low and Christian Maciocco, “SIP-based 
IEEE 802.21 Media Independent Handover – A BT Intel 
Collaboration”. IEEE Springer, BT Technical Journal Vol 25 
N0 2, pp. 219-230, April 2007. 
52
ICWMC 2011 : The Seventh International Conference on Wireless and Mobile Communications
Copyright (c) IARIA, 2011.     ISBN: 978-1-61208-140-3

