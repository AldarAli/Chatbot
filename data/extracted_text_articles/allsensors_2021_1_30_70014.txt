Propagation Model Using White LEDs in a Visible Light Communication Link
Paula Louro, Manuela Vieira, Manuel A. Vieira,  
ADEETC/ISEL/IPL  
R. Conselheiro Emídio Navarro, 1 
1959-007 Lisboa, Portugal 
CTS-UNINOVA 
Quinta da Torre, Monte da Caparica, 2829-516, Caparica, 
Portugal 
e-mail: plouro@deetc.isel.pt, mv@isel.ipl.pt, 
mvieira@deetc.isel.ipl.pt 
Pedro Vieira 
ADEETC/ISEL/IPL  
R. Conselheiro Emídio Navarro, 1 
1959-007 Lisboa, Portugal 
Instituto das Telecomunicações 
IST, Av. Rovisco Pais,  
1049-001 Lisboa, Portugal 
e-mail:  pedro.vieira@isel.pt
Abstract—Nowadays, Global Positioning Systems (GPS) are 
used everywhere for positioning and navigation. However, its 
use is not suitable in indoor environment, due to the strong 
attenuation inside buildings. Therefore, indoors navigation 
takes advantage of other technologies to infer position. 
Recently, several Visible Light Positioning (VLP) systems have 
been reported. Among these technologies, Visible Light 
Communication (VLC) is one of the most promising, as its 
operation is based on the use of Light Emitting Diode (LED) 
light, currently widely used in the illumination solutions of 
most buildings. In this paper, we propose an indoor navigation 
system based on VLC in an industrial application for 
automated warehouses, where the navigation of Autonomous 
Guided Vehicles (AGV) is supported by VLC. The proposed 
VLC system establishes bi-directional communication between 
the infrastructure and the guided vehicles. LED transmitters at 
the warehouse ceiling support downlink data transmission 
from the Infrastructure to Vehicle (I2V). This channel 
provides positioning and navigation of the vehicles, as well as 
transmission of dedicated messages related to the requested 
tasks of the management warehouse system to the AVGs. The 
uplink channel from the Vehicle to the Infrastructure (V2I) is 
used to acknowledge the requested tasks and transmit updates 
on the concluded tasks. Optical transmitters are tri-chromatic 
white LEDs with a wide angle beam. The characterization of 
the optical transmitter system is done through MatLab 
simulations for path loss and VLC channel gain prediction 
using the Lambertian model for the LED light distribution. 
Dedicated receivers based on a-SiC:H/a-Si:H photodiodes with 
selective spectral sensitivity are used to record the transmitted 
signal. The decoding strategy is based on accurate calibration 
of the output signal. 
Keywords - visible light communication; RGB LED; 
photodiode;  indoor navigation; optical sensor. 
I.
INTRODUCTION 
Visible Light Communication (VLC) technology makes 
use of the visible part of the light spectrum to modulate 
specific wavelengths and encode and transmit information 
[1]. White LED lamps are the most adequate transmitters in 
this technology, as white LEDs are currently the most 
efficient lighting solution and can also be easily modulated, 
fulfilling the VLC requirements for signal transmission 
[2][3]. An attractive application of VLC technology is for 
indoor positioning and navigation services [4]. Its use can be 
extended from in-house navigation to guide users inside 
large buildings or underground spaces to the navigation of 
AVGs, safe communication at RF hazardous places 
(petrochemical industries, mining) [5] or RF undesirable 
locations (hospitals, aircrafts) [6][7]. 
Nowadays, retail market has several online and offline 
channels of sales and services like same day delivery or store 
pickups [8]. Thus, the trend for the conception of modern 
warehousing has provide efficiency in the delivery process 
[9]. Order picking is one of the most labor intensive and 
expensive activity in every warehouse. Thus, automation of 
this task through the use driverless vehicles, such as, mobile 
picking robots, self-driving forklifts, autonomous inventory 
robots or unmanned aerial vehicles [10] are an attractive 
solution. The vehicle movement inside the warehouse lays 
on indoor localization and indoor navigation techniques 
based on WiFi communication technology [11][12]. 
We propose a communication system operating in the 
visible range using four ultra-bright white RGB and 
photodetector device based on two stacked multilayered a-
SiC:H/a-Si:H structures that act as optical filters in the 
visible range [13][14]. The system is designed to establish 
bidirectional communication between a static infrastructure 
and an AGV. 
The LEDs enable four transmission optical channels 
supplied by the modulation of the internal red and blue chips 
of the white RGB LED [15][16]. The propagation model of 
the channel is analyzed to characterize the signal coverage. 
The possibility of tuning the spectral device sensitivity is 
analyzed and discussed using several optical bias conditions 
that induce different modulations of the electrical field along 
both front and back heterostructures, amplifying or cutting 
specific wavelengths [17]. This enables the identification of 
the transmitted individual input channels allows the location 
identification of the photodetector. The correct assignment of 
the identified signal to the location is the basis of the position 
algorithm proposed in this work . 
A decoding strategy based on the evaluation of the output 
photocurrent for the detection of different optical signals is 
presented and discussed [18][19]. 
16
Copyright (c) IARIA, 2021.     ISBN:  978-1-61208-875-4
ALLSENSORS 2021 : The Sixth International Conference on Advances in Sensors, Actuators, Metering and Sensing

The rest of this paper is organized as follows. Section II 
describes the transmitter characterization. Section III 
describes the use of the receiver unit and the decoding 
strategy. Section IV addresses results and discussion. Section 
V goes into conclusions and presents guidelines for future 
work 
II.
TRANSMITTER UNIT
The proposed VLC system intends to establish  
bidirectional infrastructure-to-device communication in an 
industrial indoor space. The proposed application is an 
automated warehouse where AGV pick goods from the racks 
and carry them to the packaging station where they are 
labeled and shipped.  
The LED lamps placed at the warehouse ceiling are used 
to illuminate the space, to transmit information that enable 
position and navigation services and to transmit instructions 
to the AGV. The AVG robots communicate with the ceiling 
lamps to transmit information on the items that are being 
removed, which enables the update of the database.  
The proposed system is composed of transmitter and the 
receiver modules, located at the LED lamps at the ceiling 
and at the AVG. Downlink communication is established 
from the ceiling lamps to the AVGs and uplink 
communication from the AVG to the correspondent ceiling 
lamp. The optical source of the transmitter at the ceiling 
lamps is composed of four white RGB LEDs. At the AGV 
the optical source is single-color LEDs.  
The configuration proposed for the LED ceiling lamp 
includes four white RGB LED placed at the corners of a 
square (Figure 1a)). Here the red emitter of LEDs A and D 
and the blue emitters of LED B and C are used for data 
transmission. Assuming a quasi-circular signal distribution 
from each LED, the predicted signal coverage of this setup is 
shown in Figure 1b). 
Figure 1. Configuration of the white LED lamp: a) modulated emitter 
of each LED ; b) signal coverage of the lamp.  
It was assumed that each LED light contribution would 
overlap in the central region. In the lateral and corner parts 
this intersection would be partial due to the radiation patterns 
superposition of the closest two or three LEDs. The 
identification of the different signals is crucial for the 
identification of the position and thus for the indoor 
navigation. 
The used RGB LEDs are commercial LEDs designed for 
general illumination providing therefore, high output power 
(550 mcd, 850 mcd and 320 mcd, for the red, green and blue 
emitters, respectively) and wide viewing angle. Analysis of 
the output light spectrum demonstrates the presence of three 
distinct gaussian peaks located in the blue (460 nm – 480 
nm), green (520 nm – 540 nm) and red (619 nm – 624 nm) 
regions.  
The light emitted by the LEDs is attenuated by the path 
distance to the receiver following the inverse of the square 
distance. Dependence on the wavelength is also stated using 
the propagation models (Friis equation).In Figure 2 it is 
shown the attenuation of the light signal dependence on the 
light wavelength for different distances between emitter and 
receiver units. 
Figure 2. Attenuation of the light signal dependence on the light 
wavelength for different distances between emitter and receiver units sub-
sections 
The dependence on the wavelength is almost negligible, 
as the analyzed range (visible range) is very narrow. 
However, the dependence on the emitter-receiver distance is 
more evident, being very reduced at short distances and 
enlarging with wider distances. 
III.
RECEIVER UNIT
The receiver module includes a photodetector to transform 
the light signal into an electric signal that is later 
demodulated and decoded to extract the transmitted 
information. The photodetector used for the transduction of 
the optical signal is a monolithic heterojunction composed 
of two pin structures based on a-Si:H and a-SiC:H and built 
on a glass substrate between two transparent electrical 
contacts (Figure 3).  
17
Copyright (c) IARIA, 2021.     ISBN:  978-1-61208-875-4
ALLSENSORS 2021 : The Sixth International Conference on Advances in Sensors, Actuators, Metering and Sensing

Figure 3. Simplified cross-section view of the photodetector. 
The front pin a-SiC:H photodiode is responsible for the 
device sensitivity in the short wavelengths of the visible 
range (400 – 550 nm) due to its minor thickness (200 nm) 
and higher bandgap (2.1 eV). The back pin a-Si:H structure 
works in the complimentary past of the visible range, 
collecting the long wavelengths (520 nm – 700 nm). 
Selective absorption of long and short wavelengths can be 
achieved by adding steady state illumination of short 
wavelength (400 nm) to the photodetector. In Figure 4 it is 
displayed the output characteristics of the photodetector in 
transient mode measured without and under background 
light from both front and back sides. 
0
1
2
3
4
0,0
0,4
0,8
1,2
1,6
2,0
2,4
2,8
R1
Front
Dark
Back
0=626 nm   |   F=4.97   |   B=0.66
Photocurrent (A)
Time (ms)
a) 
0
1
2
3
4
0,0
0,4
0,8
1,2
1,6
2,0
2,4
2,8
Back
Dark
Front
0=470 nm   |  F=0.82   |   B=1.62
B1
Photocurrent (A)
Time (ms)
b) 
Figure 4. Transient photocurrent measured under pulsed 
illumination of the a) red and b) blue chips without optical bias 
and under front and back optical bias. 
When this background light soaks the device, from the side 
of the a-SiC:H pin structure (front illumination), long 
wavelengths (red and green) provide amplification of the 
photocurrent, while short wavelengths (blue) attenuate the 
signal. Under background illumination, from the side of the 
a-Si:H pin structure (back illumination), the behavior is 
reversed. Signal amplification is obtained for shorter 
wavelengths and attenuation for longer wavelengths.  
IV.
RESULTS AND DISCUSSION
The frame used to transmit information related to the 
position and instructions to the AGV are coded in a word 
with a predefined size. The first and last blocks of the frame 
are used to ensure synchronism between the emitter and the 
receptor for correct demodulation of the transmitted signal. 
The second block is a word of 12 bits. In the fast and slow 
red and/or blue emitters, this word contains the information 
on the position within the navigation cell, which is assigned 
to the frequency. Slow emitters have a frequency half of the 
fast emitters. The green emitter is used to carry the 
identification of the unit cell. Its format was designed to 
ensure safe decode of the signals and prevent errors. It is a 12 
bits word where the logic state of each bit never changes 
simultaneously with the other fast and slow red and blue 
emitters. The format of the word code is 0XXXX00YYYY0, 
where XXXX addresses the line and YYYY the column of 
the unit navigation cell. The third block of every emitter is a 
12 bits word, reserved for the transmission of the information 
related to the available racks inside each navigation area. As 
the area covered by the navigation unit comprises nine 
cardinal sub-sections containing four quadrants each, it is 
necessary 9 x 4 = 36 bits to infer which of these spatial 
positions, i.e. racks, are available. Each of the channels (12 
bits available) transmits information about 3 sub-sections, 
using 4 bits for each. The first bit is assigned to the first 
quadrant, the second to the second quadrant and so on. Slow 
emitters of each navigation cell transmit information about 
northwest, north and northeast directions, fast emitters at the 
bottom about southwest, south and southeast, and the green 
emitters about west, center and east positions. 
When the AGV reaches the desired position defined by 
the route, it removes the rack and carries it to the packaging 
station. At the same time it provides information on this task, 
that is necessary for database update using the uplink 
channel. The establishment of this communication link 
demands the identification of both partners (lamp and robot). 
The uplink channel uses three wavelengths and the info is 
coded in a 3x32 bits word with a simple structure of four 
blocks: two synchronization blocks (2x4 bits) located at the 
beginning and at the end of the word and two informative 
blocks (2x12 bits) in the middle. The first 12 bits block 
contains the identification of the ceiling luminaire that is 
illuminating the AGV  and the identification of the AGV 
responsible for picking the items from the rack.  
The 
test 
case 
used 
to 
validate 
the 
proposed 
communication scheme is displayed in Figure 5, that shows 
the specific blocks of the 32 bits word of each emitter 
assigned to the lamps and to the mobile robot. 
18
Copyright (c) IARIA, 2021.     ISBN:  978-1-61208-875-4
ALLSENSORS 2021 : The Sixth International Conference on Advances in Sensors, Actuators, Metering and Sensing

0
1
2
3
4
5
Data frame - 32 bits
4th block
Syncr.
(4 bits)
1
st block
Syncr
(4 bits)
2
nd block
Position info
(12 bits)
3
rd block
Rack info
(12 bits)
Green emitters
Fast red and 
blue emitters
Slow red and 
blue emitters
Time (ms)
a) 
0
1
2
3
4
5
Blue emitter
Green emitter
Red emitter
SW | S | SE
Lamp ID                 NW | N | NE 
2
nd block
Lamp/Robot ID
(12 bits)
Data frame - 32 bits
4th block
Syncr.
(4 bits)
1
st block
Syncr
(4 bits)
Robot ID               W | Center | E 
3
rd block
Rack info
(12 bits)
Time (ms)
b) 
Figure 5. Codification of the optical signals transmitted by the: 
a) ceiling lamp; b) mobile picking robot. 
In the code transmitted by the ceiling lamp (Figure 5a), 
the 
green 
transmitters 
send 
the 
code 
1100 | 000010000100 | 0000 0000 0000 | 0011, 
which 
corresponds to the navigation cell with identification 1-2 
(line 1: 0001, column 2: 0010) and to the information that 
there is no rack placed in the position west, center and east of 
the 
same 
cell. 
Slow 
emitters 
transmit 
the 
1100 | 111111000000 | 0011 0011 0011 | 0011 code which 
identifies them as top emitters inside the navigation unit cell 
and states that in northwest, north and northeast sub-sections 
the third and fourth quadrants contain available racks that 
can be picked by the robot. In these quadrants, the 1st and 2nd
quadrants are empty of available racks. Fast emitters transmit 
the 
code 
1100 | 111000111000 | 1100 1100 1100 | 0011 
which represents their position as bottom emitters in the 
navigation unit cell and informs that in the southwest, south 
and southeast sub-sections the 1st and 2nd quadrants contain 
available racks to be moved while the 3rd and 4th racks are 
not accessible as they are empty 
In Figure 6, it is displayed the photocurrent signal 
measured by the mobile robot under variable conditions of 
optical bias (without and with front/back steady state 
background light). The signal was acquired in position (9) of 
the navigation cell 1-2, when the picking robot moves in the 
forward lane to remove a rack of the first quadrant of sub-
section southwest (SE). 
0
1
2
3
4
5
0
1
2
3
4
5
no bias
back bias
front bias
R'(fast red)
B'(fast blue)
B (slow blue)
Photocurrent (a.u.)
Data frame - 32 bits
4
th block
Syncr.
(4 bits)
1
st block
Syncr
(4 bits)
2
nd block
Position info
(12 bits)
3
rd block
Rack info
(12 bits)
Time (ms)
Figure 6. Photocurrent signal (measured without and with front/back steady 
state light) measured at position (9) of the navigation cell 1-2 after removing 
the contribution from the green emitters At the top it is displayed the optical 
signal of each emitter. 
The signal was acquired in the central position (9) of the 
navigation cell 1-2, when the picking robot moves in the 
forward lane to remove a rack of the first quadrant of sub-
section southwest (SE). At this position the optical excitation 
comes from the fast red and blue emitters and from the slow 
blue emitter. The displayed output signal has already been 
removed of the contribution due to the green optical 
excitation. In the graph, the trigger event allows easy 
synchronization and identification of each transmitted frame. 
This is noticeable by the highest peaks of the front 
photocurrent signal (represented in the graphs by the 
magenta line), as well as by the idle bits (all emitters are set 
to 1). This combination results in photocurrent amplification 
when the device is soaked by front steady state illumination. 
By opposition, the same signal under back background light 
is decreased. 
Then, it is necessary to decode the next blocks of the 
data frame. It is assumed that in the front photocurrent the 
highest levels correspond to the presence of the red light, 
while the lowest ones to its absence, which allows the 
immediate recognition of the ON-OFF states for the red 
channel. The same reasoning can be used to analyze the 
back-photocurrent signal. Here the highest levels are 
assigned to the presence of the blue input signal and the 
lowest levels to its nonexistence, which allows the decoding 
of the blue channel. However, at the regions where there are 
two different signals transmitted by the same wavelength, 
this approach is not feasible, as it is necessary to infer which 
of these is channels is on or off. The approach used to 
decode each optical state was based on the use of a 
calibration curve. This was obtained by scaling all the 
possible signal output levels (Figure 7, solid black line) and 
measuring the photocurrent signal under front optical bias 
using two red and two blue optical signals. The driving 
current of each LED emitter was adjusted to provide 
different levels of photo excitation. On the right side of the 
19
Copyright (c) IARIA, 2021.     ISBN:  978-1-61208-875-4
ALLSENSORS 2021 : The Sixth International Conference on Advances in Sensors, Actuators, Metering and Sensing

picture in Figure 7, it is shown the label of the modulated 
emitters that correspond to each photocurrent level.  
0
1
2
3
4
5
0
1
2
3
4
5
6
7
8
B'
B
BB'
R'
R'B'
R'B
R'BB'
RB'
R
RB
RBB'
RR'
RR'B'
RR'B
RR'BB'
B'
B
R'
R
Time (ms)
Figure 7. Front photocurrent signal measured along the forward path at the 
central position of the navigation cell. In superposition it is displayed the 
calibration grid.  
In Figure 8, it is displayed the front photocurrent signal 
due to the optical signal transmitted by the AGV after 
concluding a specific task of items removal.  
0
1
2
3
4
5
0
1
2
3
4
Calibration data
Front photocurrent signal
RGB emitters 
at the AGV
b
g
gb
r
rb
rg
rgb
Photocurrent (a. u.)
Time (ms)
Figure 8. Front photocurrent signal transmitted by the robot when 
removing a rack. In superposition it is placed the calibration curve with 8 
levels. 
The calibration curve obtained with the 8 possible 
combinations is also displayed for decoding purposes. 
V.
CONCLUSION AND FUTURE WORKS
Simultaneous navigation and data transmission based on 
visible 
light 
communication 
were 
presented 
using 
bidirectional communication based on VLC between the 
infrastructure and AGV in an industrial application of an 
automated warehouse. The infrastructure is the ceiling LED 
lamp and the AVG a mobile warehouse picking robot. The 
transmitted data is encoded in a 32 bits word, defined using 
specific data frames in each communication channel. 
Codification of the optical signals ensured synchronization 
between frames and was also designed to make the decoding 
process more robust and prevent errors that might provide 
wrong identification of the correspondent spatial position. 
Future work includes a more complete characterization of 
the channel gain and integration of the propagation model 
with the specific amplification features of the device under 
light bias. 
ACKNOWLEDGMENT
This work was sponsored by FCT – Fundação para a 
Ciência e a Tecnologia, within the Research Unit CTS – 
Center 
of 
Technology 
and 
systems, 
reference 
UIDB/00066/2020 and by IPL/2020/Geo-Loc_ISEL. 
REFERENCES
[1] K. Panta and J. Armstrong, “Indoor localisation using white 
LEDs”, Electron. Lett. 48 (4), pp. 228–230, 2012. 
[2] A. Jovicic, J. Li, and T. Richardson, “Visible light 
communication: opportunities, challenges and the path to 
market”. J IEEE Communications Magazine, 51, pp. 26-32, 
2013. 
[3] W. Zhang and M. Kavehrad, “A 2-D indoor localization 
system based on visible light LED,” in Proc. IEEE Photonics 
Society Summer Topical Conf.—Optical Wireless Systems 
Applications, pp. 80–81, 2012. 
[4] W. Zhang, M. I. S. Chowdhury, and M. Kavehrad, 
“Asynchronous indoor positioning system based on visible 
light communications”, Optical Eng. 53(4), pp. 045105, 2014. 
[5] A. Jovicic, J. Li, and T. Richardson, “Visible light 
communication: opportunities, challenges and the path to 
market,” Communic. Mag. IEEE, 51,12, pp. 26–32, 2013. 
[6] T. Tanaka and S. Haruyama, “New position detection method 
using image sensor and visible light leds,” in Machine Vision, 
ICMV’09. 2nd Int. Conf. IEEE, 2009, pp. 150–153, 2009. 
[7]  T. Komiyama, K. Kobayashi, K. Watanabe, T. Ohkubo, and 
Y. Kurihara, “Demonstration of Visible light Text data 
transmission system using LED lamp”, Proceedings of SICE 
Annual Conference, IEEE, pp. 1926–1928, 2011.  
[8]  W. Ding, “Study of Smart Warehouse Management System 
Based on the IOT”. In: Du Z. (eds) Intelligence Computation 
and Evolutionary Computation. Advances in Intelligent 
Systems and Computing, vol 180. Springer, Berlin, 
Heidelberg, 2013. 
[9]  R. Koster, T. Duc, and K. Roodbergen, “Design and control 
of warehouse order picking: A literature review”, European 
Journal of Operational Research, 182 (16), pp. 481-501, 2007. 
[10]  J. Gu, M. Goetschalckx, and L. McGinnis “Research on 
warehouse operation: A comprehensive review”, European 
Journal of Operational Research, 177 (1), pp. 1-21, 2007. 
[11] P. R. Wurman, R. D’Andrea, and M. Mountz, “Coordinating 
Hundreds 
of 
Cooperative, 
Autonomous 
Vehicles 
in 
Warehouses”, Al Magazine, 29 (1), pp. 9 – 20., 2008. 
[12]  Z. Xiaoguang and L. Wei, “The research of network 
architecture in warehouse management system based on RFID 
and WSN integration”, 2008 IEEE International Conference 
on Automation and Logistics, Qingdao, pp. 2556-2560, 2008.. 
[13] P. Louro, M. Vieira, M. A. Vieira, S. Amaral, J. Costa, M. 
Fernandes, Sensors & Actuators: A Physical. 172 (1), pp. 35-
39, 2011. 
[14] M. Vieira, A. Fantoni, M. Fernandes, P. Louro, G. Lavareda, 
C.N. Carvalho, J. Nanosc. and Nanotech. 9 (7), pp. 4022-
4027, 2009.  
[15]  P. Louro, V. Silva; J. Costa; M. A. Vieira, and M. Vieira, 
"Added transmission capacity in VLC systems using white 
RGB based LEDs and WDM devices ", Proc. SPIE 9899, 
Optical Sensing and Detection IV, 98990F, 2016. 
20
Copyright (c) IARIA, 2021.     ISBN:  978-1-61208-875-4
ALLSENSORS 2021 : The Sixth International Conference on Advances in Sensors, Actuators, Metering and Sensing

[16]  M. A. Vieira, M. Vieira, V. Silva, and P. Louro, “Optical 
signal processing for indoor positioning using a-SiC:H 
technology” Proc. SPIE  9891, Silicon Photonics and 
Photonic Integrated Circuits V, 98911Z, 2016. 
[17] M. Vieira, P. Louro, M. A. Vieira, M. Fernandes, J. Costa, A. 
Fantoni, and M. A. Barata, “Optical processing devices based 
on a-SiC:H multilayer architectures”, Phys. Status Solidi C 7, 
No. 3–4, pp. 1184– 1187, 2010. 
[18]  P. Louro, M. Vieira, and M. A. Vieira, "Coding schemes in a 
communication 
system 
based 
on 
visible-light 
communication", Proc. SPIE 10947, Next-Generation Optical 
Communication: Components, Sub-Systems, and Systems 
VIII, 109470G, 2019. 
[19]  P. Louro, J. Costa, M. Vieira, and M. A. Vieira, Y. 
Vygranenko, “Use of VLC for indoors navigation with RGB 
LEDs and a-SiC:H photodetector”, Proc. of SPIE, vol 10231, 
Optical sensors 2017  
21
Copyright (c) IARIA, 2021.     ISBN:  978-1-61208-875-4
ALLSENSORS 2021 : The Sixth International Conference on Advances in Sensors, Actuators, Metering and Sensing

