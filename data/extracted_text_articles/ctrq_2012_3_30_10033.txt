A Hierarchical Routing Algorithm for Small World Wireless Networks 
 
Juhani Latvakoski 
VTT Technical Research Centre of Finland 
Oulu, Finland 
Juhani.Latvakoski@vtt.fi 
 
 
Abstract—Embedded devices are tomorrow working in 
dynamic wireless networks, which requires novel solutions for 
routing because of heterogeneity, long communication paths, 
long  delays  and  weak  performance.  As  a  contribution  of  this  
research, a hierarchical routing algorithm called as, Hi-Search, 
is provided. The algorithm relies on the wireless short-cut 
based  solution  for  small  world  wireless  networks  and  
hierarchical neighbor discovery. The provided hierarchical 
search algorithm is based on graph theoretical system model 
and network search tree analysis both on overlay and physical 
levels. The efficiency of the Hi-Search algorithm is analytically 
evaluated in terms of search path depths, number of control 
messages, and delay of the search, which are compared against 
the flat physical routing approach. The evaluation indicates 
that the search path depths for the Hi-Search algorithm are 
lower than the search path depths for the end to end physical 
routes. In addition, the number of control message send actions 
and search delays are lower compared with physical routing.  
Keywords-dynamic wireless networks; small world; routing.  
I. 
 INTRODUCTION 
The number of wirelessly communicating embedded 
devices has continuously been increasing in recent years. It is 
expected that the networks consisting of such devices will be 
highly dynamic wireless networks. Therefore, it is here 
assumed that dynamic self-configurable (ad hoc) routing 
solutions are required. The ad hoc networking protocols, 
such as, e.g., Topology Dissemination Based on Reverse-
Path Forwarding (TBRPF) [1], Ad hoc On-Demand Distance 
Vector (AODV) [2], and Dynamic MANET On-demand 
(DYMO) [3] are not optimal for specific operating 
environments due to differences in delay requirements, 
reaction times for route changes, the power capabilities of 
the routing devices, and the limitations of the bandwidth 
usage, quality of service level and security. A possible 
solution approach for these challenges is overlay networking 
[4, 5]. Delay-Tolerant Networks (DTN) and opportunistic 
networking [6, 7, 8] solutions enable communication also 
when the source and destination nodes not necessarily 
reachable at the time of communication need. However, the 
heterogeneity of nodes, radio links, and dynamic topologies 
still triggers challenges for them. 
The selected approach in this research for solving the 
heterogeneity problem is application small world paradigm 
for wireless networks [9, 10, and 11]. By adding a few short-
cut links, path length of wireless networks can be reduced 
drastically.  Our previously published simulations have 
indicated that increasing the number of referred wireless 
short-cuts lowers the end to end delays, and makes the 
physical routes shorter, and also improves throughput [12]. 
In addition, the key enabling mechanisms for neighbor 
discovery are provided in [13] to solve the elementary 
challenges related to multilevel routing and creation of 
wireless short-cuts. Relying on these solutions, we have 
provided here, a hierarchical search algorithm, called as Hi-
Search. The provided hierarchical search algorithm is based 
on graph theoretical system model and network search tree 
analysis both on overlay and physical level. The efficiency of 
the Hi-Search algorithm is evaluated in terms of search path 
depths, number of control messages, and delay of the search, 
which are compared against the flat physical routing 
approach. In physical routing, the neighboring nodes have 
always only direct physical communication links between 
each other, and in overlay routing there can also be logical 
communication links between logically neighboring nodes, 
which are not necessarily physically adjacent. 
Related research is shortly analyzed in the following. The 
hierarchical routing schemes with distributed hash tables 
(DHT) are discussed in [14]. The essential difference 
compared with our solution is that DHT based hierarchical 
routing schemes do not take into consideration of physical 
route discovery at all. Small world based routing, called as 
SWER, dedicated to supporting sink mobility and small 
transfers have been provided in [15]. The hierarchy is based 
on clustering and cluster heads, and short cuts are applied for 
long range links between clusters. The cluster head selects a 
sensor node to act as agent node to form the short-cut. The 
difference compared with our solution, is that the weak 
sensor nodes and radio links are still applied in realizing the 
short-cut. Strategies for adding long-ranged links to centrally 
placed gateway node in wireless mesh networks are provided 
in [16]. Based on the strategies, 43% of reduction in average 
path length was reported. Hierarchical routing based on 
clustering using adaptive routing using clusters (ARC) 
protocol is provided in [17]. They represent a new algorithm 
for cluster leader revocation to eliminate the ripple effect 
caused by leadership changes. Other examples of related 
routing solutions are a contact-based architecture for 
resource discovery [18], Mobile router nodes used as data 
mules [19], and P2P-based SWOP protocol [20]. There are 
also quite a many solutions for neighbor discovery such as 
[21, 22]. However, route discovery is usually executed in flat 
manner, e.g., [23]. The problem in such a search is that the 
search queries are forwarded also into the deep leafs of the 
68
Copyright (c) IARIA, 2012.     ISBN:  978-1-61208-192-2
CTRQ 2012 : The Fifth International Conference on Communication Theory, Reliability, and Quality of Service

search trees. Our approach is different in the sense that only 
the nearest logical overlay nodes are searched in the physical 
route level, and the network can be optimized by removing 
non-optimal radio links and physical routers from the path 
acting as a wireless short-cut. 
The system mode, reasoning and the hierarchical search 
algorithm is described in section II. The efficiency of the 
hierarchical search is evaluated in section III. Finally, in 
section IV, conclusions are provided. 
II. 
HIERARCHICAL SEARCH ALGORITHM 
A. Hierarchical System Model 
The network consists of different types of nodes such as 
U node, which is a user interface (UI) node, which is able to 
host the network, set of services and it may visualize the 
services for a user. S node  is  service  node,  which  may  
provide set of services, act as super peer (cluster head) for 
services and overlay router. R node is a physical router node, 
which can route data traffic between different interfaces of 
the node. T node can be a sensor (Ts),  actuator  (Ta) or 
camera (Tc). Each of the referred nodes may not be always 
on and they may be mobile and can apply whatever 
wireless/wired access means for communication with the 
neighbor nodes. An example system is shown in the form of 
graph in Figure 1.  In the example physical network graph 
(GPN), vertice (VPN=0) i.e. node (0) represent the User node. 
Each vertise has certain characteristics such as location (L), 
overlay 
routing 
capabilities 
(OR), 
physical 
routing 
capabilities (PR), radio capabilities (R), power capabilities 
(P) and computing power (Cp), VPN.{L, OR, PR, R, P, Cp}. 
The
 edges
 (EPN) 
represent 
the 
possible 
physical 
communication links between two or more nodes. Each edge 
has certain characteristics such as, e.g., distance (D) and 
delay (ǻt), EPN.{D, ǻt}. In the example the overlay network 
graph (GON) are established by the U, and S vertices (VON). 
The dotted red lines represent the edges of the overlay 
network (EON). The overlay network graph is here said to be 
virtual graph of the physical network graph (GON c GPN). 
Respectively, we can define radio network graph (GRN) 
which shows the radio network below the physical network 
(GON c GPN c GRN). Therefore, the system model is here said 
to be hierarchical. 
The GPN can be represented in the form of a (search) tree 
(TPN) shown in Figure 2.  Such tree does not have cycles and 
the source of the search is represented as the root of the tree 
(TPN (VPN=0)). A search path is a route from the root of the 
tree to the leaf of the tree representing the destination of the 
search. 
Respectively, GON can be represented in the form of a 
tree (TON) shown in Figure 3.  It is easy to see that the height 
of the overlay network tree is smaller than the height of the 
physical network tree. It means that the overlay network path 
from source to the destination usually contains smaller 
amount of hops. 
 
Figure 1.  
Example System Graph (GPN and GON). 
 
Figure 2.  
Example System physical network Tree (TPN). 
 
Figure 3.  
Example System Overlay Network Tree (TON).  
 
B. Reasoning 
The reasoning of the hierarchical search algorithm is 
represented in the following: 
x 
Each edge in the search path means additional 
communication delay for the search. Therefore, the 
amount of levels in the search tree needs to be 
minimized. For example, if the search proceed into deep 
sub trees, which does not have the destination, the 
search unnecessarily disturbs the vertices and consumes 
the radio bandwidth in the area of the leaf sub tree. 
x 
Each vertice in the search tree processes the search, and 
it adds processing delay (ǻtp) for the search. Therefore, 
69
Copyright (c) IARIA, 2012.     ISBN:  978-1-61208-192-2
CTRQ 2012 : The Fifth International Conference on Communication Theory, Reliability, and Quality of Service

the amount of vertices in the search path needs to be 
minimized. It can be claimed that the search 
unnecessarily disturb all vertices in the search path, if 
the node is not the destination. Unnecessary disturbing 
any node should be minimized. 
x 
Let us call the minimization of the search tree levels, 
minimization of the amount of vertices in the search 
path and minimization of vertice disturbing as search 
tree minimization.  
x 
The number of levels in the search tree is lower for the 
TON than for TPN. Therefore, it is assumed that the search 
tree can be minimized by relying on hierarchical search, 
in which the search is executed in the overlay level (TON 
) and the physical level search is limited to the discovery 
of the physical paths between each pair of neighboring S 
nodes (TPN is split into sub trees). This means that the 
hierarchical search is executed in TON (Figure 3. ) and in 
the split sub trees of TPN visualized in Figure 4.  In this 
way, the physical level search results a local optimum 
physical path between neighboring S/U nodes, and the 
overlay level search results optimum path between 
source and destination (S/U or T* nodes). 
x 
Some of the vertices are more powerful than the others, 
e.g., they can have good power sources and good 
computing platform while the others may be battery 
operated. It is clear that powerful vertices are better 
nodes for routing. Therefore, they are preferable nodes 
in the search path, and the usage of limited capability 
nodes (bottlenecks) shall be minimized. 
x 
When looking at different search paths in GPN , TPN it is 
assumed that removing the bottleneck nodes from the 
search path lowers the total communication delay (ǻtc) 
of the search. Let’s call here the removal process as 
network optimization. 
x 
The network optimization process is focused into the 
split sub trees of TPN, see Figure 4. Because, the R nodes 
are assumed to be the bottleneck nodes, the S/U nodes 
actively tries to remove them from the local physical 
communication paths, and create a shortcut between the 
neighboring S/U nodes. As a result from the successful 
network optimization, the search tree is like TON 
visualized in Figure 3.  
x 
Summarizing, the hierarchical search with search tree 
minimization and network optimization processes 
results a situation, where the search path consist only 
powerful and well-connected S/U nodes and not any 
bottleneck nodes 
 
Figure 4.  
Split sub trees of TPN.  
C. Hierarchical Search Algorithm  
The hierarchical search algorithm is represented in the 
Figure 5. When the power of a U/S node is switched on, the 
device will broadcast DiscoverReq to  all  of  its  neighbors  
with the information of the node itself. Each overlay node 
receiving the DiscoverReq, stores the key contents of it and 
replies with DiscoverRep, which is sent in unicast manner to 
the source of the DiscoverReq. The DiscoverRep contains 
overlay level routing and service information, which will be 
delivered to the original source of the DiscoverReq. Sending 
of the DiscoveRep triggers searching for the physical route 
between the neighboring overlay nodes, e.g., using AODV 
RREQ/RREP procedure. After the original source receives 
DiscoverRep via the discovered physical route, the system is 
ready to provide messaging services for applications. 
When an ApplicationMsg is received from the upper 
layer and the overlay route is known, it is forwarded towards 
the intended destination. Otherwise, an overlay route is 
searched first, and then the message is forwarded towards it. 
 
 
 
Figure 5.  
Hierarchical Search Algorithm.  
In this manner, the ApplicationMsg has been delivered to 
the destination using hierarchical search with minimized 
search tree. At any time after system is ready, the network 
optimization procedure can be initiated. In the network 
optimization, direct wireless communication links for the 
Algorithm HI-Search  
 
/* Hierarchical Search */ 
 
1. WHEN n(OFF) ĺn(ON) THEN 
2. 
send (DiscoveryReq, Bcast) 
3. WAIT until receive (Msg)  
4.  
SWITCH Msg  
4.  
 
CASE DiscoverRep (ucast) 
5. 
 
 
store (DiscoverRep) 
6. 
 
 
start (timer, Net-Opt) 
7. 
 
CASE DiscoverReq (Bcast) 
8. 
 
 
IF n == ON THEN 
9. 
 
 
  store (DiscoverReq) 
10. 
 
 
  send (DiscoverRep, Ucast) 
11. 
 
 
ELSE 
12. 
 
 
  update (DiscoverReq) 
13. 
 
 
  forward (DiscoverReq, Bcast) 
14. 
 
CASE applicationMsg 
15. 
 
 
IF no route THEN  
  send (ON-RouteReq) 
16. 
 
 
IF route THEN send 
applicationMsg 
17. 
 
CASE ON-RouteReq 
18. 
 
 
IF n == destination THEN 
19. 
 
 
  send ON-RouteRep 
20. 
 
 
ELSE forward ON-RouteReq 
21. 
 
CASE Timeout (Net-Opt) 
22. 
 
 
optimize (network) 
23. 
 
 
start (timer, Net-Opt) 
24. 
ENDSWITCH 
25. ENDWAIT 
70
Copyright (c) IARIA, 2012.     ISBN:  978-1-61208-192-2
CTRQ 2012 : The Fifth International Conference on Communication Theory, Reliability, and Quality of Service

neighboring overlay nodes are created as communication 
short-cuts in the cases where it is physically possible with the 
available radio access 
technologies of the overlay 
nodeswhich mean lower search paths. 
III. 
EFFICIENCY OF THE HIERARCHICAL SEARCH 
The depths of the search paths, for the example graph 
shown in Figure 1. are visualized in Figure 6.  There are 37 
possible search paths for both physical and overlay networks, 
see Figure 2. and Figure 3. respectively. Each search path is 
shown in the x-axis, and the depth of the search path is 
shown in the y-axis in the Figure 6. For example, for the 
search path number 11, the depth of physical search path is 
10 and the depth of the overlay search path is 5. In general, 
the search path depths for the overlay routes are lower than 
the search path depths for the end to end physical routes. The 
provided Hi-Search algorithm applies overlay route search, 
which mean lower search paths. 
The physical search path depths of overlay hops are 
shown in Figure 7. (see also Figure 4. ). The y-axis shows 
the physical search path depths, and x-axis shows the 
number of their required searches in Figure 1. in physical 
routing situation. For example, the physical search path 5-9-
2, which depth is 2, happens 17 times in physical routing 
situation. The referred physical search paths seem generally 
happen multiple times in the example network in physical 
routing situation. This is not very efficient, and therefore the 
proposal is that the network optimization creates shortcuts 
between the neighboring overlay vertices. Then there is need 
to execute referred physical search paths only once for the 
network, and optimization can be based on it. The referred 
action is initiated in the row 22 of the Hi-Search algorithm. 
 
 
Figure 6.  
Search path depths.  
 
Figure 7.  
Physical search path depths of overlay hops.  
The number of control message sending actions is shown 
in y-axis of Figure 8. When the physical route between 
neighbouring overlay nodes are searched initially and 
optimised, the number of control message send actions are 
about the same level as in physical routing (x=7). However, 
after the optimisation has been executed, then the number of 
control message send actions lowers significantly, because 
there isn’t need to repeat optimisation. It can be seen that the 
number of control message send actions is lower when 
applying Hi-Search algorithm compared with physical 
routing. 
The total delay of the search is shown in y-axis of Figure 
9. It is here assumed that the delay in each physical hop, i.e. 
radio link, is 10ms, the optimization happen in parallel 
manner and the processing delay in each node is zero. The 
peaks of the delay for the Hi-Search algorithm are related to 
optimization of the network. After the optimization, the 
delays are in lower level. As a result, it is seen that the Hi-
Search algorithm is better because it has lower search delays 
than physical routing. 
 
Figure 8.  
The number of control message sending.  
 
71
Copyright (c) IARIA, 2012.     ISBN:  978-1-61208-192-2
CTRQ 2012 : The Fifth International Conference on Communication Theory, Reliability, and Quality of Service

 
 
Figure 9.  
Delay of the search.  
In practical situations, the physical characteristics 
including the delay in each edge vary according to applied 
radio access technology. The network optimization removes 
weak and high delay edges from the path, which may make 
the delay difference between physical search and Hi-Search 
algorithm even bigger than what is shown in Figure 9. In 
addition, the processing delay of each vertise is usually 
bigger than zero. When applying Hi-Search algorithm, the 
number of intermediate hops in the path is minimized in such 
a manner that weak vertices are removed from the path. 
Therefore, in practical situation the delay difference between 
physical search and Hi-Search algorithm is even bigger than 
what is shown in Figure 9.  
IV. 
CONCLUSIONS 
As a contribution of this research, the hierarchical routing 
algorithm called as, Hi-Search, is provided. The algorithm 
relies  on  the  wireless  short-cut  based  solution  for  small  
world wireless networks and for the key enablers for 
hierarchical 
neighbor 
and 
route discovery, 
network 
optimization 
and 
service 
discovery. 
The 
provided 
hierarchical search algorithm is based on graph theoretical 
system model and network search tree analysis both on 
overlay and physical level. The efficiency of the Hi-Search 
algorithm is evaluated in terms of search path depths, 
number of control messages, and delay of the search, which 
are compared against the flat physical routing approach. 
The evaluation indicates that the search path depths for 
the Hi-Search algorithm are lower than the search path 
depths for the end to end physical routes. The physical routes 
between logically neighbouring vertices are searched only 
once, and then the network optimization creates shortcuts 
between them. It can be seen that the number of control 
message send actions is lower when applying Hi-Search 
algorithm compared with physical routing. In addition, it has 
lower search delays than physical routing. When the physical 
characteristics including the radio specific delays of each 
edge, and processing delay of each vertice in the path is 
taken into concern, then the delay difference between Hi-
Search and physical routing is even bigger. This is because; 
network optimization removes high delay edges, and weak 
vertices from the path. 
ACKNOWLEDGMENT 
Acknowledgements are offered for Tekes and VTT for 
funding this work. 
 
REFERENCES 
 
[1] 
Orier R., Templin F., and Lewis M. 2004. Topology Dissemination 
based on reverse-Path Forwarding (TBRF). IETF RFC 3684. Feb 
2004. 
[2] 
Perkins C., Royer-Belding E., and Das S. RFC 3561. Ad hoc On-
Demand Distance Vector Routing. IETF. Jul 2003. 
[3] 
 Ian D. Chakeres and Charles E. Perkins Dynamic MANET On-
Demand Routing Protocol. IETF Internet Draft, draft-ietf-manet-
dymo-12.txt, February 2008 (Work in Progress). Retrieved 2, 2012. 
[4] 
Latvakoski, J. and Aapaoja, T. Towards a Routing Overlay for a 
Mobile Ad hoc Network. 6p. First International Workshop on 
Convergence of Heterogeneous Wireless Networks (ConWiN) 10th 
Jul 2005 Budapest, Hungary. 8p. 
[5] 
Latvakoski J., Aapaoja T., and Kärnä J. Evaluation of routing overlay 
solution for a Hybrid Mobile ad hoc networks. 12p. ERCIM Emobilty 
workshop. 28-30 May 2008 Tampere, Finland. 12p. 
[6] Luciana Pelusi, Andrea Passarella,  and Marco Conti. (2006). 
"Opportunistic Networking: Data Forwarding in Disconnected 
Mobile Ad hoc Networks." IEEE Communications Magazine 
Nov 2006: Pp. 134-141. 
[7] V.Cerf et al. (2007) Delay-Tolerant Networking Architecture. 
IETF RFC 4838. Apr 2007. 
[8] 
Latvakoski, J., and Hautakoski, T. Situated Message Delivery for 
Opportunistic 
Networks. 
9p. 
ICT 
Mobile 
and 
Wireless 
Communications Summit 2008.  10-12 Jun 2008. Stockholm/Sweden. 
8p. 
[9] 
Milgram S. The small world problem. Psychol. Today 2, pp 60-67. 
1967 
[10] Helmy,
 A.
 Small
 Worlds
 in
 Wireless
 Networks.
 IEEE
 
Communications Letters, Vol 7. No 10. October 2003. Pp 490-492. 
[11] Watts D., and Strogatz S. Collective Dynamics of small world 
networks. Nature Vol 393. Pp 440-442. 1998. 
[12] Latvakoski, J. Towards hierarchical routing in small world wireless 
networks. The Fifth International Conference on Wireless and Mobile 
Communications ICWMC 2009. August 23-29, 2009 - Cannes/La 
Bocca, French Riviera, France. 6p. 
[13] Latvakoski, J. Hierarchical Routing Concept for Small World 
Wireless Networks. 6 p.  ICWMC 2010: The Sixth International 
Conference on Wireless and Mobile Communications September 20-
25, 2010 - Valencia, Spain. 6p. 
[14] Korzun, D. and Gurtov, A. 2011, "Survey on hierarchical routing 
schemes in “flat” distributed hash tables", Peer-to-Peer Networking 
and Applications, vol. 4, no. 4, pp. 346-375 
[15] Liu, X., Guan, J., Bai, G. & Lu and H. 2009, "SWER: small world-
based efficient routing for wireless sensor networks with mobile 
sinks", FRONTIERS OF COMPUTER SCIENCE IN CHINA, vol. 3, 
no. 3, pp. 427-434. 
[16] Verma, C.K., Tamma, B.R., Manoj, B.S. and Rao, R. 2011, "A 
Realistic Small-World Model for Wireless Mesh Networks", IEEE 
Communications Letters, vol. 15, no. 4, pp. 455-457 
[17] Belding-Royer, E.M. 2002, "Hierarchical routing in ad hoc mobile 
networks", Wireless Communications and Mobile Computing, vol. 2, 
no. 5, pp. 515-532. 
[18] Helmy A., Garg S., and Nahata N. CARD: A contact-based 
Architecture for Resource Discovery in Wireless Ad hoc Networks. 
72
Copyright (c) IARIA, 2012.     ISBN:  978-1-61208-192-2
CTRQ 2012 : The Fifth International Conference on Communication Theory, Reliability, and Quality of Service

Mobile networks and applications 10, pp. 99-113. 2005. Springler-
Verlag. 
[19] Jiang  C-J,  Chen  C.,  Chang  J-W.,  Jan  R-H.,  and  Chiang  T.  C..  
Construct Small Worlds in Wireless Networks using Data Mules. Pp 
28-35. Proceedings of IEEE International Conference on Sensor 
Networks, Ubiquitous, and Trustworthy Computing. Pp. 28-35. 
[20] Ken Y.K. Hui, John C.S. Lui, and David K.Y. Yau. Small world 
overlay P2P Networks. Quality of Service, 2004. IWQOS 2004. 
Twelfth IEEE International Workshop on 7-9 June 2004. Pp. 201 – 
210 
[21] Narten T., Nordmark E., and Simpson W. Neighbor Discovery for IP 
version 6. IETF RFC 2461. http://www.ietf.org/rfc/rfc2461.txt. 
Available 10th Jun 2010. Retrieved 2, 2012 
[22] Clausen T., Dearlove C., and Dean J. MANET Neighborhood 
Discovery 
Protocol (NHDP), 
http://tools.ietf.org/html/draft-ietf-
manet-nhdp-04, Expires December 31, 2007. Retrieved 2,2012.  
[23] Perkins C., Royer-Belding E., and Das S. RFC 3561. Ad hoc On-
Demand 
Distance 
Vector 
Routing. 
IETF. 
Jul 
2003. 
http://tools.ietf.org/html/rfc3561,  Retrieved 2, 2012. 
 
73
Copyright (c) IARIA, 2012.     ISBN:  978-1-61208-192-2
CTRQ 2012 : The Fifth International Conference on Communication Theory, Reliability, and Quality of Service

