Medication Adherence Prediction for Homecare Patients, Using Medication 
Delivery Data 
 
Ben Malin  
Dept. Electronic and Electrical Engineering 
Brunel University London 
London, United Kingdom 
e-mail: ben.malin@brunel.ac.uk 
Tatiana Kalganova 
Dept. Electronic and Electrical Engineering 
Brunel University London 
London, United Kingdom 
e-mail: tatiana.kalganova@brunel.ac.uk
 Ejike Nwokoro  
Patient Insights and Data Strategy Unit 
HealthNet Homecare 
London, United Kingdom  
email: ejike.nwokoro@healthnethomecare.co.uk 
Joshua Hinton 
Patient Insights and Data Strategy Unit 
HealthNet Homecare 
London, United Kingdom  
email: joshua.hinton@healthnethomecare.co.uk 
 
 
Abstract—This study aims to predict the risk of medication 
nonadherence for patients who are newly enrolled into a 
medication delivery homecare service – an insight that can 
underpin the design of more impactful patient support 
programs for patients with long term conditions. In the context 
of this study, we have defined a nonadherent patient as someone 
without any prescribed medication available across the month. 
This is calculated using medication delivery confirmation and 
prescription data. Convolutional Neural Networks (CNN) and 
Random Forest (RF) networks are used for this study, with the 
former shown to be our best-performing model, achieving an 
82.8% Area Under the Curve (AUC) on a subset of the patient 
population who have been on service for 3 to 4 months. When 
testing the model on the entire patient population (regardless of 
how long they have been on service), and by using cross-
validation, the AUC improves to 97.4%. The methodology that 
is applied in our study is novel based on three distinct factors: 
(1) prediction that is based on a novel visualization of 12 months 
of patient medication delivery data, (2) taking into consideration 
the temporal patient communications as well as the possibility 
of patient stockpiling of prescribed medication and (3) the 
service level i.e., level of nurse support received by the patient. 
We find that the inclusion of temporal patient communication 
data into our analysis improves both the AUC and the 
nonadherence prediction precision in the CNN model (0.7% and 
19.4% respectively); a similar improvement in AUC and 
prediction precision is not seen in the RF model. The CNN 
model is therefore identified as the appropriate model for our 
use case. Furthermore, our results support the claim that 
temporal communication data are relevant datapoints for 
predicting adherence in a network that is better-suited to time-
series data.  
Keywords- medication adherence; CNN; RF, healthcare; 
homecare; adherence prediction 
I. 
INTRODUCTION 
Medication adherence is a vital aspect of a patient’s 
treatment journey, with adherence being linked to positive 
disease outcomes as  well as  lowering  the   burden   on  the  
 
 
healthcare provider. This is evidenced through global 
estimates of nonadherence causing 125,000 patient deaths per 
year, as well as $100 billion in preventable medical costs [1]. 
Machine Learning (ML) has been utilized effectively in 
predicting nonadherence, with the intent of providing these 
potentially nonadherent patients with the support necessary 
to keep them adherent – reducing risk to health, as well as 
future treatment cost [2]. It is however noted that different 
therapy areas and medications have different levels of 
burden, complexity, as well as different rates of 
nonadherence [3][4], and as such may require tailored 
interventions. In our study, the proposed use case for 
predicting adherent and nonadherent behavior is across a 
diverse range of therapy areas including, dermatology, 
gastroenterology, rheumatology and respiratory. The goal is 
to improve patient wellbeing across all therapy areas through 
predictive adherence, whilst acknowledging the role that a 
variety of clinical and non-clinical factors can play in 
influencing the chances that a patient will adhere to their 
prescribed therapy. Our study focuses on patients who are 
newly enrolled to the homecare delivery service.  
This paper is structured into the following sections to 
provide insight into the work conducted. In “Background and  
related work”, existing literature is reviewed for ML 
networks that have been previously used for adherence 
prediction, along with the data inputs and adherence metrics 
utilized. “Design decisions” explains why the identified 
approaches are most suitable for this study, along with any 
other modifications for our use case, “Data source and 
processing” delves into how these design decisions have been 
implemented 
with 
the 
data 
available 
to 
us. 
The 
“Methodology” section will explain our implementation of 
different ML models. In “Results”, we will present our 
findings, followed by “Results comparison” to help 
contextualize our results against other studies. The 
“Discussion” section will provide our analysis of the results. 
30
Copyright (c) IARIA, 2023.     ISBN:  978-1-68558-105-3
HEALTHINFO 2023 : The Eighth International Conference on Informatics and Assistive Technologies for Health-Care, Medical Support and Wellbeing

Finally, the “Conclusion” will summarize these insights, as 
well as provide suggestions for future research. 
II. 
BACKGROUND AND RELATED WORK 
The approaches for assessing and improving medication 
adherence differ greatly, with the main distinctions being the 
type of ML models that are utilized and the range of data 
types and/or adherence metrics incorporated into such 
models. 
Adherence can be difficult to define, as different diagnoses 
have differing levels of repercussions for varying degrees of 
nonadherence [3][4]. However, the most used metrics for 
adherence tend to be the use of prescription refill data or a 
patient-reported adherence score, based on a questionnaire 
[5]–[11] . Both metrics typically use a binary label for 
whether a patient is adherent or not, with the prescription 
refill-based approach often defining a patient as adherent if 
they have a Proportion of Days Covered by medication 
(PDC) above 80% of the total predetermined timeframe 
[5][7][12]. However, it is important to note that this is an 
indirect measure of adherence, as it cannot be known whether 
the patient consumes their prescribed medication, only 
whether they have received it. The alternative patient-
reported adherence score definition is typically based on a 
series of scored questions, and it is common for 
nonadherence to be defined as below 80%-85% of the 
maximum achievable score [6][9][10].  
It is therefore the chosen adherence metric that will 
determine what the model will predict, i.e., whether it 
predicts if the patient will have medication for 80% of the 
next month, or whether the patient will respond positively to 
adherence-related questions resulting in an adherence score 
above 80-85%.  
The initial phase of our study entailed a review of previous 
research within the predictive adherence space. As part of this 
review process, data types used by the various predictive 
methods are broken down into groupings. These groupings 
are shown in Table 1.  
Table 2 compares the data inputs across various research 
studies along with their use case and the prediction method 
that was used. The most common ML architectures used for 
adherence prediction tend to be decision-tree (DT) based, in 
particular, Random Forest (RF) and other decision-tree 
methodologies. Other methodologies have also been 
previously considered such as Long Short-Term Memory 
(LSTM), k-Nearest Neighbor (KNN), Logistic Regression 
(LR), Gradient Boosting (GB) and Artificial Neural 
Networks (ANN). None of the reviewed studies (Table 2) use 
Convolutional Neural Networks (CNNs) despite how 
commonplace they are in other areas [13][14].  Similarly, 
Long Short-Term Memory (LSTM) models appear to be 
unpopular in adherence prediction, despite having achieved 
better performance than RF models in some cases [2].  
One benefit of the CNN and LSTM models is that they 
can easily accommodate windowed time-series data to the 
network in a way that RF cannot, as RF is reliant upon 
independent feature input [14]–[16]. This results in separate 
features in an RF network detailing characteristics, such as 
adherence on specific days, as opposed to a single sequential 
data input [5][17]. Thus, RF networks can be used 
successfully, but may be inferior to LSTMs and CNNs for 
time-series prediction tasks. CNNs have been used 
successfully for time-series forecasting and prediction, 
outperforming LSTMs, and other models [18]–[21]. Utilizing 
historical medication data for the prediction of adherence is a 
comparable use case, and another reason for the evaluation of 
CNNs in this field. 
Table 2 shows that patient profiling and medication 
delivery data are often used for adherence prediction, with 
some studies deeming the latter as having a stronger influence 
on such predictions [2]. 
 To our knowledge, little research has been done to 
examine the extent to which time-series data, outside of 
medication stock, is relevant to adherence behavior. This is 
where the use of patient communications data as an additional 
variable in predicting adherence behavior is novel, as it 
provides information to the model regarding a patient’s level 
of interaction with their prescriber and/or medication delivery 
service provider.  
III. 
 DESIGN DECISIONS 
The chosen adherence metric for our study is PDC, 
following the trend demonstrated by other studies in Table 2. 
There are several additional reasons for this, including, that 
the PDC metric has been advocated for by various bodies 
(e.g., the Pharmacy Quality Alliance (PQA)) as the preferred 
quality indicator for estimating adherence to therapies for 
chronic diseases [22]. 
Additionally, PDC captures the number of days the 
medication should last, rather than the number of days the 
medication is in a patient’s possession. Hence it makes no 
difference if the patient collects the medication early. This 
capability means the metric lends itself well to the medication 
delivery data used in our study, as we can calculate the 
number of days that each prescription should last. 
Importantly however, unlike most of the studies included in 
our initial literature review, we deem 100% of days covered 
as adherent, and any value less than this as nonadherent. The 
Patient Profile 
Data 
Medication 
Supply Data 
 
Communications Data 
Demographics 
Adherence levels 
Communications with 
medication provider 
Comorbidities 
Medication 
complexity 
 
Service status 
Medication 
supply 
 
Prescription 
details 
 
TABLE I.        PREDICTIVE ADHERENCE DATA INPUT GROUPINGS 
31
Copyright (c) IARIA, 2023.     ISBN:  978-1-68558-105-3
HEALTHINFO 2023 : The Eighth International Conference on Informatics and Assistive Technologies for Health-Care, Medical Support and Wellbeing

motivation behind adopting this strict approach is the 
diversity of therapies prescribed to the patients included in 
our study and the variability in the ways that nonadherence 
can affect different patients and diagnoses [4][27].   
The medication delivery frequency and stock level for the 
patients included in our study is driven by the patient's 
prescription and provides the recommended quantity of days 
of medication. It is important however, to note that patients 
Author, year 
Therapy Area 
Adherence Metric 
Architecture 
Input Variables 
Patient 
Profile 
Medication 
Supply Data 
Communicat
ions 
Franklin et al., 
2015 [23] 
Cardiovascular 
disease 
Binary 
>PDC 80 – 
Medication 
Dispensation Date 
 
Group trajectory 
modelling 
✓ 
✓ 
 
Lucas et al., 
2017 [24] 
Cardiovascular 
disease 
Binary 
>PDC 80 – 
Medication 
Prescription Date 
 
RF 
✓ 
✓ 
 
Kumamaru et 
al., 2018 [12] 
Cardiovascular 
disease 
Binary 
>PDC 80 – 
Medication 
Dispensation Date 
 
LR 
✓ 
✓ 
 
Haas et al., 
2019 [6] 
 
Fibromyalgia 
Binary 
Self-reported 
RF 
✓ 
✓ 
 
Kim et al., 
2019 [9] 
 
Smoking 
addiction 
Binary/ 
Tertiary 
Patient estimated 
adherence 
DT 
✓ 
✓ 
 
Galozy et al., 
2020 [5] 
Hypertension 
Binary 
>80% PDC – 
Medication Refill 
Date 
 
RF, LR, GB, KNN 
✓ 
✓ 
 
Gao et al., 2020 
[25] 
Hypertension 
Binary 
>PDC 80 – 
Medication 
Prescription Date 
 
DT 
✓ 
✓ 
 
Koesmahargyo 
et al., 2020 [17] 
Diverse – 
predominantly 
mental diagnoses 
Binary 
>80% Recommended 
Daily Medication 
Consumption 
 
GB 
✓ 
✓ 
 
Wang et al., 
2020 [10] 
Crohn’s disease 
Binary 
Self-reported 
SVM, LR 
✓ 
 
 
Wu et al., 2020 
[11] 
Type 2 Diabetes 
Binary 
>PDC 80 – 
Medication 
Prescription Date 
 
SVM, KNN, DT, 
Ensemble 
✓ 
✓ 
 
Gu et al., 2021 
[2] 
 
Diverse diagnoses 
Binary 
Medicine taken on 
time 
LSTM, RF, GB 
 
✓ 
 
Kharrazi et al., 
2021 [8] 
 
Diverse diagnoses 
NA – predicting hospitalizations 
LR 
✓ 
✓ 
 
Li et al., 2021 
[26] 
Hypertension 
Binary 
Medicine taken on 
time 
LR, DT, ANN, RF 
✓ 
 
 
Hsu et al., 2022 
[7] 
Cardiovascular 
disease 
Binary 
>80% PDC – 
Dispensation Date 
LSTM 
 
✓ 
 
(This Work, 
2023) 
Diverse diagnoses 
– asthma, 
dermatitis, 
psoriasis and 
more 
Binary 
100% PDC – 
Medication Delivery 
Date, 
>80% PDC – 
Medication Delivery 
Date 
 
CNN 
✓ 
✓ 
✓ 
TABLE II.        MACHINE LEARNING MODEL EVALUATION FOR ADHERENCE PREDICTION 
32
Copyright (c) IARIA, 2023.     ISBN:  978-1-68558-105-3
HEALTHINFO 2023 : The Eighth International Conference on Informatics and Assistive Technologies for Health-Care, Medical Support and Wellbeing

who have their medications delivered direct to home can 
request more than their usual level of stock (for example just 
before a holiday), leading to a deviation in their standard 
delivery frequency. This behavior is commonplace for 
patients with a chronic disease [28][29]. It is therefore 
necessary to consider whether a patient has previously 
‘stockpiled’ medication before they are deemed as 
nonadherent for failing to take delivery of their medication. 
While there are medication adherence studies based on 
prescription dispensing dates, to the best of our knowledge, 
ours is the first study predicting adherence using medication 
delivery confirmation data and taking into consideration the 
potential of stockpiling [23][19].   
IV. 
DATA SOURCE AND PREPROCESSING 
Patients included in our study are those diagnosed with 
long-term conditions and who have been receiving direct to 
home delivery of their medication as well as nurse support 
for medication self-administration at home from a clinical 
homecare provider (HealthNet Homecare Ltd). The dataset 
contains, but is not limited to, demography, length of time on 
homecare service (LOS), primary diagnosis, medication 
delivery confirmation, nurse visit confirmation and whether 
the patient receives enhanced nurse support. Such enhanced 
nurse support is used to aid medication adherence.  
Patients are excluded if they have finished their treatment, 
or if they have not had a medication delivery within the last 
13 months.  The medication delivery confirmation data 
contains the date-time at which each patient receives their 
medication, as well as the number of days that the delivered 
medication covers them for. Thus, any periods where the 
recommended medication delivery frequency is insufficient 
can be calculated. Additionally, periods where the patient 
received additional (i.e., extra) deliveries are accounted for, 
allowing for medication stockpiling, which is common in 
chronic disease management [29]. 
The medication delivery confirmation across each 
patient’s latest month is calculated, and any period with a 
lapse of medication delivery confirmation frequency in this 
time period designates that patient as nonadherent. This label 
is used as the target variable for the model.  The medication 
delivery confirmation data over the 12 months prior to the 
target variable month is used for model training and 
inference, as with this it is possible to determine whether the 
model accurately predicts nonadherence in the target variable 
month.  
Figure 1 shows how the 12 months of medication delivery 
confirmation is visualized, with the horizontal axis 
representing time. The left-most point on the axis 
representing 13 months before the most recent dataset entry, 
and the right-most point representing one month before the 
most recent dataset entry – providing 12 months of patient 
medication timeline data. These areas are then colored based 
on the medication stock quantity that the patient should have 
on each day within this time period, and this representation 
can be seen in Figure 1a. Dark green represents sufficient 
medication stock of >31, light green is sufficient stock for 5-
31 days, yellow is for 1-5 days, and red means the patient is 
not in possession of any medication stock. In instances where 
the patient has been on the service for less than 13 months, 
the period prior to beginning their treatment is color coded as 
white. 
Additional information can also be encoded into these 
images, in the form of delivery communications and the 
patient’s enhanced nursing support service status, merging 
temporal and non-temporal data into a single sample. This is 
illustrated in Figures 1b and 1c, where these data 
visualizations show different encoded information for the 
same patient.  
Figure 1b represents a patient’s enhanced service status as 
a solid line across the 12-month period, the color of which is 
blue for receiving enhanced services and black for not 
receiving enhanced services (not shown). Figure 1c encodes 
all delivery communications as colored dots, with the features 
of the dot representing the type of communication. The color 
and outline of the dots varies to reflect the medium used for 
communication as well as whether the communication was 
inbound or outbound. Thus, creating a unique color scheme 
for each communication type across our dataset. Where 
multiple communications occur on the same day, the 
subsequent 
dots 
are 
placed 
below 
the 
previous 
communications in chronological order.  
V. 
METHODOLOGY 
We implemented both RF and CNN models in this study. 
The RF network is intended to be used as a benchmark, due 
to its ubiquity for adherence prediction across other studies. 
The CNN on the other hand, was chosen given its capabilities 
in time-series prediction, as well as our desire to test its 
feasibility in adherence prediction whilst utilizing images 
produced with heterogeneous data [18][20]. 
Other studies have shown that CNNs can be effectively 
used on visually represented data that has been generated 
from both time-series data and tabular data, outperforming 
the use of the raw numerical data [18][19].  
The approach of representing numerical/time-series data 
into the visual data domain is a common preprocessing 
technique that is used in signal processing for the 
improvement of performance [30][31]. Taking inspiration 
from this domain and translating it to time-series patient data 
requires novel preprocessing, as techniques that are common 
in signal processing are incompatible with our data, such as 
Gramian Angular Summation/Difference Fields, Markov  
Transition Fields and spectrograms [30]–[32]. These images 
are automatically generated in a deterministic manner for 
each patient, using their medication stock level over time. 
Implementing a deep CNN architecture, Inception v3, on 
these data visualizations is straightforward and has the 
potential to learn features that the RF model cannot.  
Each experiment is performed five times to reduce the 
influence of different random initializations. Additionally, 5-
fold cross validation tests have been performed when there is 
33
Copyright (c) IARIA, 2023.     ISBN:  978-1-68558-105-3
HEALTHINFO 2023 : The Eighth International Conference on Informatics and Assistive Technologies for Health-Care, Medical Support and Wellbeing

no predetermined test set – iterating through which patients 
are included into the training and testing sets. This validation 
strategy is commonplace for adherence prediction [7][24]. 
CNN training was performed using 50 epochs per run with 
the Adam optimizer. 
Additionally, undersampling was trialed for every test, due 
to the imbalance between the majority and minority class. 
When undersampling yielded the best result this has been 
stated. Undersampling is the process of data reduction to 
distribute the data quantity between two classes more evenly, 
with the aim of reducing the likelihood of misclassifying the 
minority class [33]. In our case, this will refer to removal of 
adherent samples, which comprise approximately 80% of all 
samples. Multiple studies have successfully used this 
balancing technique to improve their performance [5][26]. 
Oversampling is another technique that could be utilized for 
reducing class imbalance and has been used for adherence 
prediction previously, though it is out of scope for this study 
[26].  
VI. 
MODEL RESULTS  
Initial comparative testing was conducted using both RF 
and CNN architectures. These tests were performed using the 
entire patient population data (i.e., regardless of how long 
they have been on the homecare service), using 5-fold cross-
validation to determine which patients comprise the test set. 
For the RF network, each patient’s data is inputted as 365 
features with each feature containing the number of days’ 
worth of medication stock they should have in their 
possession. When delivery communications data is utilized, 
these features are inputted using one-hot encoding to the 
network, with a feature for each day. The enhanced services 
feature is a single feature that denotes a binary variable. The 
data input for the CNN is image-based and Figure 1 is 
representative of the data variants used for this test. These 
results can be seen below in Table 3. The RF network attains 
comparable AUC, but with superior nonadherent precision. 
Additionally, the CNN attains its best performance through 
the inclusion of delivery communications data and enhanced 
service status information, unlike the RF which peaks with 
just medication delivery confirmation data and enhanced 
service status information. This could be due to the RF 
network’s inability to process time-dependencies across 
features, unlike a CNN where our inclusion of delivery 
communications marginally improves AUC but provides a 
significant gain to nonadherent precision. 
However, the primary objective of this study is to predict 
the risk of non-adherence for patients who are new to the 
homecare delivery service. The main reason behind this is 
that we wish to identify potential nonadherence before it 
occurs, so that targeted interventions can be initiated. As well 
as the need to make accurate predictions for patients without 
requiring them to have been on the service for a long time – 
during which they may have benefited from greater support.  
To achieve this primary objective, a test set was created 
exclusively of patients within the first 3-4 months Length Of 
Service (LOS) range. Patients with an LOS under 3 months 
are excluded due to there being limited data for each patient, 
after the removal of one month for use as the target variable. 
None of the same patients/patient data were included in both 
the training and testing data sets. The training set uses data 
from patients who had joined the service earlier than (i.e., 
before) the patients whose data was used for testing. This 
allows for training samples that are comparable to the testing 
samples, in terms of LOS, without the inclusion of testing 
data. Once again, both RF and CNN model architectures were 
implemented in order to identify the optimal network as well 
as the optimal data. These results can be seen below in Table 
4. 
Patient’s enhanced service status 
Figure 1b) Illustration of Medication stock and enhanced service status 
 
9 
Figure 1 Patient timeline images 
Months since latest dataset 
13 
5 
1 
Figure 1c) Illustration of Medication stock and communications data  
 
Instance of patient communication 
Figure 1a) Illustration of medication stock  
 
Low medication 
stock 
Medication 
absence 
High medication 
stock 
Medium 
medication stock 
34
Copyright (c) IARIA, 2023.     ISBN:  978-1-68558-105-3
HEALTHINFO 2023 : The Eighth International Conference on Informatics and Assistive Technologies for Health-Care, Medical Support and Wellbeing

Testing on the predetermined set of patients with 3-4 
months LOS results in a substantial decrease in performance, 
compared to testing against the full population. However, for 
this use-case, the CNN, compared to the RF model, provides 
better AUC and nonadherent prediction precision. As is the 
case when the model utilized the entire patient population 
data, the CNN with the highest AUC incorporates both 
enhanced service status data and delivery communications 
data, whilst the best RF model does not use delivery 
communications data.  
VII. RESULTS COMPARISON 
For greater comparability with other studies, a PDC of 
80% was used in addition to a PDC of 100%, as this is the 
most common medication availability adherence measure 
[8][9][14]. Additionally, 5-fold cross-validation was used to 
evaluate the dataset – with each patient’s sample providing 
12 months of data. These results can be seen below in Table 
5, where our best-performing CNN and RF models are 
shown. However, the other studies shown in this table do not 
define medication availability through delivery data, instead 
this data is provided through in-person prescription refills. 
Additionally, the other studies have not factored in 
medication stockpiling which will impact the adherence 
dynamics. These distinctions, along with the fact that 
alternative cohorts of patients likely have different 
demographics and behaviors, do separate the studies from 
one another. However, comparisons between the studies can 
be drawn with these caveats, to compare the use of differing 
data inputs.  
The model with the best AUC in our tests was an 
undersampled CNN which made predictions by utilizing 
medication delivery confirmation data, enhanced services 
status information, and delivery communications data, all 
formatted into an image, as shown in Figure 1. This model 
attained the highest AUC when predicting both, whether a 
patient would have a PDC>80% or PDC of 100% in their 
latest month. The CNN benefited from the use of random 
undersampling, whereas the RF network performed worse 
when undersampled. Additionally, the RF network shown in 
Table 5 does not utilize delivery communications as this data 
input led to an AUC reduction. 
VIII. DISCUSSION 
We investigated various methodologies for predicting 
nonadherence of patients, across both CNN and RF networks. 
The methods trialed incorporated differing levels of 
medication delivery confirmation data, timestamped patient 
communications and a binary variable representing the level 
of service that a patient receives. This testing was done on a 
predefined test set of patients with LOS ranging from 3-4 
months, in line with the overarching project objective. It was 
found that the best-performing model utilized all the 
available encoded data, giving an AUC of 82.8%, with a PDC 
requirement of 100%. For the CNN, the greatest performance 
improvements were attained through the inclusion of both the 
enhanced services status data, as well as the delivery 
communications data – in addition to medication delivery 
confirmation data. These features, when encoded into the 
images, improved AUC by 0.7% and nonadherent prediction 
precision by 19.4% from the model without these features, 
thus supporting the claim that these are relevant datapoints 
for predicting nonadherence. The RF network attained its best 
performance 
without 
the 
inclusion 
of 
delivery 
communications data, likely due to RF networks being unable 
to process time-dependencies across features. 
Medication 
Availability 
Enhanced 
Services 
Delivery 
Communications 
Mean AUC 
Mean Nonadherent Precision 
RF 
CNN 
RF 
CNN 
✓ 
 
 
95.36% 
95.70% 
88.64% 
80.02% 
✓ 
✓ 
 
95.40% 
95.14% 
88.49% 
81.31% 
✓ 
 
✓ 
94.90% 
96.26% 
88.13% 
87.69% 
✓ 
✓ 
✓ 
94.92% 
97.40% 
88.53% 
90.10% 
Medication 
Supply 
 
Enhanced 
Services 
 
Delivery 
Communications 
 
Mean AUC 
Mean Nonadherent Precision 
RF 
CNN 
RF 
CNN 
✓ 
 
 
55.44% 
82.12% 
38.74% 
19.13% 
✓ 
✓ 
 
53.64% 
68.49% 
37.81% 
80.33% 
✓ 
 
✓ 
54.47% 
80.05% 
37.01% 
40.07% 
✓ 
✓ 
✓ 
54.81% 
82.84% 
37.99% 
38.54% 
TABLE III.        CNN AND RF PRELIMINARY DATA INPUT EVALUATION 
TABLE IV.        CNN AND RF 3-4 MONTH LOS TEST SET EVALUATION 
35
Copyright (c) IARIA, 2023.     ISBN:  978-1-68558-105-3
HEALTHINFO 2023 : The Eighth International Conference on Informatics and Assistive Technologies for Health-Care, Medical Support and Wellbeing

     When migrating this methodology to testing on the entire 
patient population (i.e., regardless of how long they have 
been on service), using 5-fold cross-validation, the AUC 
increases to 97.4% with a nonadherence prediction precision 
of 90.1% for the CNN; the RF network attained an AUC of 
95.4% and a nonadherent prediction precision of 88.5%. This 
performance 
difference 
signifies 
that 
nonadherence 
prediction is more challenging on patients with lower LOS, 
this could be explained through different behavior for new 
patients, as well as the reduction in data quantity. Whilst 
nonadherence prediction for new patients is our primary 
focus, performance across the full dataset is still relevant, as 
it is also important to be able to identify any patients across 
the cohort who may subsequently become nonadherent and 
would benefit from ongoing additional support.  
When the PDC requirement is lowered to 80%, the AUC 
of the CNN improves marginally to 97.9% with a 
nonadherence precision of 87.3%. Whilst the RF network 
attains the same AUC and a marginal nonadherence precision 
improvement to 88.6%. These results are more comparable to 
those found in other studies due to the same PDC 
requirements being used. 
The results of this study, particularly when considered in 
the context of other similar studies, highlights the need for 
further research with respect to clearer impact of patient 
demographics and behavioral patterns on adherence 
prediction. We acknowledge that the demographics and 
behaviors of the patients included in all the studies reviewed, 
and our study, may differ. Similarly, we acknowledge that 
our study may differ from the other studies that were 
reviewed, in terms of differing patient diagnosis and their use 
of a less strict PDC metric. 
Our design decision to consider the use of medication 
stockpiling for our calculation of medication availability is an 
approach that was rarely seen in other studies and so should 
be considered when comparing the results. Importantly 
however, due to the prevalence of medication stockpiling 
within chronic disease patients, we believe this methodology 
is more suitable for defining adherence and adds value to this 
study [29].   
IX. 
CONCLUSION 
This study set out to predict nonadherence for patients that 
are new to a homecare delivery service, where new patients 
were defined as having been on the service between 3 and 4 
months. Our best-performing model achieved an AUC of 
82.8% when predicting whether these patients would run out 
of medication in the next month (by failing to confirm the 
delivery of their prescribed medication). When adapting this 
methodology to predict nonadherence for the full cohort of 
Author, year 
Adherence 
Metric 
Input Variables 
Validation strategy 
AUC 
Training 
Samples 
Test 
Samples 
Patient 
Profile 
Medication 
Availability 
Data 
Communications 
Lucas et al., 
2017 
[24] 
PDC >80% 
✓ 
✓ 
 
30-fold cross-
validation 
73.60% 
- 
81.00% 
134,107 
4,624 
Kumamaru et 
al., 2018 
[12] 
PDC >80% 
✓ 
✓ 
 
Logistic Regression 
Up to 
69.60% 
49,745 
49,745 
Galozy et al., 
2020 
[5] 
PDC >80% 
✓ 
✓ 
  
Stratified random split 
(undersampled) 
80.30% 
- 
80.70% 
15,794 
2,787 
Gao et al., 2020 
[25] 
PDC >80% 
✓ 
✓ 
 
10-fold random seed 
81.00% 
5,730 
1,908 
Wu et al., 2020 
[11] 
PDC >80% 
✓ 
✓ 
 
10-fold random seed 
57.70% 
- 
86.60% 
401 
40 
Hsu et al., 2022 
[7] 
PDC >80% 
  
✓ 
  
5-fold cross-validation 
(predetermined test 
set) 
80.50% 
90,000 
10,096 
(This work, 
2023) 
PDC >80% 
CNN 
✓ 
✓ 
✓ 
5-fold cross-validation 
(undersampled) 
97.89%  
5,359 
1,972 
(This work, 
2023) 
PDC >80% 
RF 
 
✓ 
 
5-fold cross-validation 
95.37% 
22,596 
5,649 
(This work, 
2023) 
PDC = 100% 
CNN 
✓ 
✓ 
✓ 
5-fold cross-validation 
(undersampled) 
97.40% 
6,338 
3,142 
(This work, 
2023) 
PDC = 100% 
RF 
✓ 
✓ 
 
5-fold cross-validation 
 
95.40% 
22,596 
5,649 
TABLE V.        PREDICTIVE ADHERENCE COMPARISON USING PDC 
36
Copyright (c) IARIA, 2023.     ISBN:  978-1-68558-105-3
HEALTHINFO 2023 : The Eighth International Conference on Informatics and Assistive Technologies for Health-Care, Medical Support and Wellbeing

patients within the dataset (using a PDC of 80%, so that more 
comparable evaluation against other studies could be made), 
an AUC of 97.9% was achieved. Both CNN and RF networks 
were evaluated for their capability at this task. The CNN tests 
were conducted using a novel form of data encoding, 
producing visually represented medication stock timelines 
for patients with various additional information encoded 
within them. This outperformed the RF network by 2% AUC. 
The results have also shown a performance gain through the 
inclusion of temporal communication information into the 
network in addition to medication delivery confirmation data.  
Future work by the authors includes additional 
visualization approaches for the benefit of clinicians, as well 
as testing these visualizations for adherence prediction. 
Additionally, more comprehensive experimental testing 
using a PDC of 80% and cross-validation as well as different 
strategies for further encoding the temporal delivery 
communications data within the RF network will be explored. 
Finally, the use of data oversampling instead of 
undersampling is a technique that has the potential to further 
improve performance whilst mitigating class imbalance and 
would be worth evaluating. 
ACKNOWLEDGMENT 
This work was conducted as part of a predictive adherence 
project funded by HealthNet Homecare UK LTD. 
REFERENCES 
[1] F. Kleinsinger, “The Unmet Challenge of Medication 
Nonadherence,” The Permanente Journal/Perm J, vol. 
22, pp. 18–033, 2018, doi: 10.7812/TPP/18-033. 
[2] Y. Gu et al., “Predicting medication adherence using 
ensemble learning and deep learning models with large 
scale healthcare data,” Sci Rep, pp. 1–13, 2021, doi: 
10.1038/s41598-021-98387-w. 
[3] R. L. Cutler, F. Fernandez-Llimos, M. Frommer, C. 
Benrimoj, and V. Garcia-Cardenas, “Economic impact of 
medication non-adherence by disease groups: A 
systematic review,” BMJ Open, vol. 8, no. 1. BMJ 
Publishing Group, Jan. 01, 2018. doi: 10.1136/bmjopen-
2017-016982. 
[4] M. Lemstra, C. Nwankwo, Y. Bird, and J. Moraros, 
“Primary nonadherence to chronic disease medications: 
a meta-analysis,” Patient Prefer Adherence, vol. 2018, 
no. 12, pp. 721–731, 2018, doi: 10.2147/PPA.S161151. 
[5] A. Galozy and S. Nowaczyk, “Prediction and pattern 
analysis of medication refill adherence through 
electronic health records and dispensation data ☆,” 2020, 
doi: 10.1016/j.yjbinx.2020.100075. 
[6] K. Haas, Z. Ben Miled, and M. Mahoui, “Medication 
Adherence Prediction Through Online Social Forums: A 
Case Study of Fibromyalgia,” JMIR Med Inform, vol. 7, 
no. 2, Apr. 2019, doi: 10.2196/12561. 
[7] W. Hsu, J. R. Warren, and P. J. Riddle, “Medication 
adherence prediction through temporal modelling in 
cardiovascular disease management,” BMC Med Inform 
Decis Mak, vol. 22, no. 1, Dec. 2022, doi: 
10.1186/s12911-022-02052-9. 
[8] H. Kharrazi, X. Ma, H. Y. Chang, T. M. Richards, and C. 
Jung, “Comparing the Predictive Effects of Patient 
Medication Adherence Indices in Electronic Health 
Record and Claims-Based Risk Stratification Models,” 
Popul Health Manag, vol. 24, no. 5, pp. 601–609, 2021, 
doi: 10.1089/pop.2020.0306. 
[9] N. Kim et al., “Predictors of adherence to nicotine 
replacement therapy: Machine learning evidence that 
perceived need predicts medication use HHS Public 
Access,” Drug Alcohol Depend, vol. 205, p. 107668, 
2019, doi: 10.1016/j.drugalcdep.2019.107668. 
[10] L. Wang et al., “Applying machine learning models to 
predict medication nonadherence in crohn’s disease 
maintenance therapy,” Patient Prefer Adherence, vol. 
14, pp. 917–926, 2020, doi: 10.2147/PPA.S253732. 
[11] X. W. Wu, H. B. Yang, R. Yuan, E. W. Long, and R. S. 
Tong, “Predictive models of medication non-adherence 
risks of patients with T2D based on multiple machine 
learning algorithms,” BMJ Open Diabetes Res Care, vol. 
8, no. 1, pp. 1–11, 2020, doi: 10.1136/bmjdrc-2019-
001055. 
[12] H. Kumamaru et al., “Using Previous Medication 
Adherence to Predict Future Adherence,” Journal of 
Managed Care & Specialty Pharmacy JMCP November, 
vol. 24, no. 11, 2018, Accessed: Sep. 27, 2022. [Online]. 
Available: www.jmcp.org 
[13] B. Akshaya and M. T. Kala, “Convolutional Neural 
Network Based Image Classification And New Class 
Detection,” in 2020 International Conference on Power, 
Instrumentation, Control and Computing (PICC), 2020, 
pp. 1–6. doi: 10.1109/PICC51425.2020.9362375. 
[14] S. A. Dwivedi, A. Attry, D. Parekh, and K. Singla, 
“Analysis and forecasting of Time-Series data using S-
ARIMA, CNN and LSTM,” in Proceedings - IEEE 2021 
International 
Conference 
on 
Computing, 
Communication, and Intelligent Systems, ICCCIS 2021, 
Institute of Electrical and Electronics Engineers Inc., 
Feb. 
2021, 
pp. 
131–136. 
doi: 
10.1109/ICCCIS51004.2021.9397134. 
[15] L. Breiman, “Random Forests,” Mach Learn, vol. 45, no. 
1, pp. 5–32, 2001, doi: 10.1023/A:1010933404324. 
[16] A. John-Syin, N. Kok-Why, and C. Fang-Fang, 
“Modeling Time Series Data with Deep Learning: A 
Review, Analysis, Evaluation and Future Trend,” in 
2020 8th International Conference on Information 
Technology and Multimedia : 24 & 25 August 2020, 
Selangor, 
Malaysia: 
Institute 
of 
Electrical 
and 
Electronics Engineers Inc., Aug. 2020. 
[17] V. Koesmahargyo et al., “Accuracy of machine learning-
based prediction of medication adherence in clinical 
research,” Psychiatry Res, vol. 294, p. 113558, 2020, doi: 
10.1016/j.psychres.2020.113558. 
[18] A. A. Semenoglou, E. Spiliotis, and V. Assimakopoulos, 
“Image-based 
time 
series 
forecasting: 
A 
deep 
37
Copyright (c) IARIA, 2023.     ISBN:  978-1-68558-105-3
HEALTHINFO 2023 : The Eighth International Conference on Informatics and Assistive Technologies for Health-Care, Medical Support and Wellbeing

convolutional neural 
network 
approach,” 
Neural 
Networks, vol. 157, pp. 39–53, Jan. 2023, doi: 
10.1016/j.neunet.2022.10.006. 
[19] Y. Zhu et al., “Converting tabular data into images for 
deep learning with convolutional neural networks,” Sci 
Rep, vol. 11, no. 1, Dec. 2021, doi: 10.1038/s41598-021-
90923-y. 
[20] R. Yarlagadda, V. Kosana, and K. Teeparthi, “Power 
System State Estimation and Forecasting using CNN 
based Hybrid Deep Learning Models,” in 2021 IEEE 
International Conference on Technology, Research, and 
Innovation for Betterment of Society (TRIBES), 2021, pp. 
1–6. doi: 10.1109/TRIBES52498.2021.9751638. 
[21] S. Mehtab, J. Sen, and S. Dasgupta, “Robust Analysis of 
Stock Price Time Series Using CNN and LSTM-Based 
Deep Learning Models,” in 2020 4th International 
Conference 
on 
Electronics, 
Communication 
and 
Aerospace Technology (ICECA), 2020, pp. 1481–1486. 
doi: 10.1109/ICECA49313.2020.9297652. 
[22] D. Prieto-Merino et al., “Estimating proportion of days 
covered (PDC) using real-world online medicine 
suppliers’ datasets,” J Pharm Policy Pract, vol. 14, no. 
1, Dec. 2021, doi: 10.1186/s40545-021-00385-w. 
[23] J. M. Franklin, A. A. Krumme, W. H. Shrank, O. S. 
Matlin, T. A. Brennan, and N. K. Choudhry, “Predicting 
adherence trajectory using initial patterns of medication 
filling,” American Journal of Managed Care, vol. 21, no. 
9, pp. 537–544, 2015. 
[24] J. E. Lucas, T. C. Bazemore, C. Alo, P. B. Monahan, and 
D. Voora, “An electronic health record based model 
predicts statin adherence, LDL cholesterol, and 
cardiovascular disease in the United States Military 
Health 
System,” 
2017, 
doi: 
10.1371/journal.pone.0187809. 
[25] W. Gao et al., “A Clinical Prediction Model of 
Medication Adherence in Hypertensive Patients in a 
Chinese Community Hospital in Beijing,” Am J 
Hypertens, vol. 33, no. 11, pp. 1038–1046, Nov. 2020, 
doi: 10.1093/AJH/HPAA111. 
[26] X. Li, H. Xu, M. Li, and D. Zhao, “Using machine 
learning models to study medication adherence in 
hypertensive patients based on national stroke screening 
data,” in 2021 IEEE 9th International Conference on 
Bioinformatics and Computational Biology, ICBCB 
2021, Institute of Electrical and Electronics Engineers 
Inc., 
May 
2021, 
pp. 
135–139. 
doi: 
10.1109/ICBCB52223.2021.9459205. 
[27] C. A. Walsh, C. Cahir, S. Tecklenborg, C. Byrne, M. A. 
Culbertson, and K. E. Bennett, “The association between 
medication non-adherence and adverse health outcomes 
in ageing populations: A systematic review and meta-
analysis,” Br J Clin Pharmacol, vol. 85, no. 11, pp. 
2464–2478, Nov. 2019, doi: 10.1111/BCP.14075. 
[28] S. Al Zoubi, L. Gharaibeh, H. M. Jaber, and Z. Al-Zoubi, 
“Household Drug Stockpiling and Panic Buying of 
Drugs During the COVID-19 Pandemic: A Study From 
Jordan,” Front Pharmacol, vol. 12, Dec. 2021, doi: 
10.3389/fphar.2021.813405. 
[29] E. E. Cameron, S. A. Moss, S. J. Keitaanpaa, and M.-J. 
A. Bushell, “Pharmacists’ experiences of consumer 
stockpiling: insights from COVID-19,” 2021, doi: 
10.1002/jppr.1758. 
[30] A. N. Sayed, Y. Himeur, and F. Bensaali, “From time-
series to 2D images for building occupancy prediction 
using deep transfer learning,” Eng Appl Artif Intell, vol. 
119, 
p. 
105786, 
2023, 
doi: 
https://doi.org/10.1016/j.engappai.2022.105786. 
[31] Z. Wang and T. Oates, “Imaging Time-Series to Improve 
Classification and Imputation,” Palo Alto, California 
USA, 
Jul. 
2015. 
doi: 
https://doi.org/10.48550/arXiv.1506.00327. 
[32] Z. Ahmad, A. Shahid Khan, K. Zen, F. Ahmad, and C. 
Zeeshan Ahmad, “MS-ADS: Multistage Spectrogram 
image-based Anomaly Detection System for IoT 
security,” 2023, doi: 10.1002/ett.4810. 
[33] X.-Y. Liu, J. Wu, and Z.-H. Zhou, “Exploratory 
Undersampling for Class-Imbalance Learning,” IEEE 
Transactions on Systems, Man, and Cybernetics, Part B 
(Cybernetics), vol. 39, no. 2, pp. 539–550, 2009, doi: 
10.1109/TSMCB.2008.2007853. 
 
38
Copyright (c) IARIA, 2023.     ISBN:  978-1-68558-105-3
HEALTHINFO 2023 : The Eighth International Conference on Informatics and Assistive Technologies for Health-Care, Medical Support and Wellbeing

