Modeling of Automotive HVAC Systems Using Long Short-Term Memory 
Networks 
 
Peter Engel 
TU Clausthal 
Institute for Software and 
Systems Engineering, 
Clausthal, Germany 
e-mail: peter.engel@tu-
clausthal.de 
Sebastian Meise 
TLK-Thermo GmbH,  
Braunschweig, Germany  
e-mail: s.meise@tlk-
thermo.de 
Andreas Rausch 
TU Clausthal 
Institute for Software and 
Systems Engineering, 
Clausthal, Germany  
e-mail: arau@tu-
clausthal.de 
Wilhelm Tegethoff  
TLK-Thermo GmbH,  
Braunschweig, Germany  
e-mail: w.tegethoff@tlk-
thermo.de 
 
Abstract‚Äî Adaptive and fast-calculating HVAC and climate 
models are gaining increasing importance in the automotive 
development process. Physically motivated thermal models 
achieve high quality results, but have a disadvantage in terms 
of their computing speed due to their complexity. One possible 
approach for the fast and precise simulation of thermal sys-
tems is deep learning with artificial neural networks. This 
paper aims to determine the extent to which neural LSTM are 
suitable for modeling the complex dynamic behavior of vehicle 
air conditioning. For this purpose, a physical reference model 
of a passenger car air conditioning system including a vehicle 
cabin is set up in the simulation environment Dymola with the 
component library TIL Suite. Furthermore, a model structure 
of a LSTM -based deep neural network to map the dynamic 
thermal behavior correctly is proposed. For the purpose of 
training the ANN, the overall system has been broken down 
into subsystems. The subsystems are individually trained open-
loop and then linked to form a closed-loop overall model. For 
evaluation purposes, models with the same model structure but 
based on feed forward network (FFN) architectures are im-
plemented, trained and tested. 
Keywords - BEV; Applied Machine Learning; HVAC; 
LSTM; ANN;  
I. 
INTRODUCTION  
In the automotive development process, simulations of 
the vehicle climate are required in order to test components, 
assemblies, system concepts and control variants in a cost-
effective and time-efficient manner. Furthermore, simula-
tions of the vehicle‚Äôs climatization systems are currently 
gaining more and more of a focus on research, as they are 
used within Model-Predictive Controllers (MPC) to opti-
mize HVAC control. 
Previous work has shown that physical modeling shows 
good results and provides a good picture of real thermody-
namic processes. A number of studies have focused on a 
detailed physical modeling of the cabin climatization for 
simulation purposes [1]-[14]. In addition to the vehicle 
interior temperature, energy consumption, air humidity and, 
in some cases, air quality and thermal comfort are also cal-
culated in the form of a Predicted Mean Vote (PMV). With 
the modeling methods described here, it was possible to 
achieve high prediction accuracy in the sense of the accord-
ance of measurement and simulation results. However, these 
models have a significant disadvantage of the modeling 
effort and the high runtime and are therefore not suitable for 
use in a model predictive controller. A compromise between 
run-time and prediction accuracy with relatively low model-
ing effort is provided by adaptive learning methods with 
modeling of the controlled system by Artificial Neural Net-
works (ANN). Previous work on simulating the cabin cli-
mate with ANN showed promising results for short forecast 
horizons.  However, for longer forecasting horizons and at 
large operating range, the known works are only limitedly 
suitable for simulation in the vehicle development process 
or in use within an MPC. One reason for this is the error 
accumulation due to the multiple consecutive one-step-
ahead predictions. The output of each prediction step along 
the prediction time window is used as the input for the fol-
lowing one. As a result, the error also propagates and reso-
nates, resulting in high inaccuracies. 
An alternative architecture of recurrent neural networks, 
which is particularly suitable for the prediction of time se-
ries, has been introduced with Long Short-Term Memory 
(LSTM) networks [15]. With the use of LSTM in their 
products, the major technology companies Apple, Alphabet 
and Microsoft have achieved great success in recent years. 
Based on this network structure, a deep neural network for 
the simulation of the cabin climate will be presented in this 
paper.  
The modeling of physical systems using machine learn-
ing methods is subject to two major challenges. On the one 
hand, the right architecture, which is suitable for mapping 
the system dynamics well, must be found. The other prob-
lem consists in the quality of the learning data as the essen-
tial basis of all learning methods. The values of physical 
quantities obtained by measurements of physical processes 
are subject to deviations due to measurement uncertainties 
and measurement deviations. Since the quality of learning 
systems is limited by the quality of the learning data, pre-
processing of the signals, e.g., by smoothing and filtering, is 
required. Since this work examines the suitability of the 
architecture for mapping the system dynamics, the training 
is based on learning data generated by a conventional sys-
tem model. For this purpose, a complex detailed reference 
system model was created in a first step. Based on this ref-
48
Copyright (c) IARIA, 2019.     ISBN:  978-1-61208-706-1
ADAPTIVE 2019 : The Eleventh International Conference on Adaptive and Self-Adaptive Systems and Applications

erence system model, the quality of the examined learning 
methods was evaluated. 
The following Section II describes the state of the art in 
terms of physical thermal modeling and modeling with 
ANN. In Section III the reference system model is present-
ed. Subsequently in Section IV, the structure of the LSTM-
based deep neural network is explained in more detail. Fi-
nally in Section V, simulation results of the comparison of 
NARX-based networks and LSTM-based networks are 
presented and discussed. 
II. 
MODELING OF THERMAL SYSTEMS 
A. Physical Thermal Modelling 
The simulation of thermal models is an established ele-
ment of the vehicle development chain. One reason is that 
development times are greatly reduced, since component 
tests can take place virtually without having to set up or 
modify a new test bench. The requirements on the models 
are not only a realistic representation of the real component 
but also the speed at which the model can be simulated. This 
requirement is particularly important for models that are 
used on real-time systems. Furthermore, the simulation time 
has a great influence on the duration of the development 
cycles and thus has a direct effect on the costs, which under-
lines the importance of this requirement once again. The 
demands posed to the model are matched by the challenges 
of modelling. These are among others: 
ÔÇ∑ 
Realistic mapping of system and component com-
plexity 
ÔÇ∑ 
Transfer of the characteristics of individual com-
ponents by means of parameterization 
ÔÇ∑ 
Implementation of the physical behavior of indi-
vidual components 
ÔÇ∑ 
Checking the thermal behavior of circulation sys-
tems 
One way to generate fast and realistic thermal models of 
components and systems is to use physical models. These 
use thermodynamic relationships to realistically model the 
interaction of a component with its environment. The ad-
vantage of the physical approach lies in the inherent quality 
of the representation of reality, provided that the laws can be 
fully captured and implemented. However, since even a 
seemingly simple component, e.g., the refrigerant pipe of an 
air conditioning system already spans a complex network of 
thermal dependencies. This makes physical modelling of 
thermal systems very demanding and therefore time-
consuming. It can take several weeks until the modelling of 
a car air conditioning system has been modeled and validat-
ed. The more complex a model becomes, the more time it 
can take to simulate it. Here, the quality of the simulation 
result competes with the simulation speed. 
 
 
1) Model exchange using FMU 
A further argument for the model-based component de-
velopment is the possibility of parallel work of different 
departments on a component by means of model exchange. 
This can be done, for example, by transferring a Functional 
Mock-up Unit (FMU) [16]. The creator of the model exports 
the model from his modeling software into the standardized 
FMU format. This creates a container file which contains all 
equation systems of the original model in the form of a DLL 
and thus makes them generally usable. Beside the DLL 
there is also an XML, which contains the interface descrip-
tion. With the FMU export, it is also possible to integrate 
the required licenses and thus make the simulation of the 
integrated model possible in the first place. In order to re-
strict the use of the license, it is limited to the simulation of 
the FMU. The user of the FMU can now integrate the origi-
nal model (e.g. Modelica code) in the format of an FMU 
into his own software environment (e.g. Matlab or MS Ex-
cel) and simulate it. 
B. Modeling of Themal Systems with ANN 
In various previous works, the modeling of thermal sys-
tems with neural networks was investigated. The majority of 
the work is focused on the simulation of building HVAC 
systems. Thus, e.g. in [17] and [18], nonlinear autoregres-
sive networks with exogenous inputs (NARX) are used to 
predict the indoor temperature and humidity in rooms. The 
networks are essentially Feed Forward networks, usually 
multilayer perceptrons (MLP), with the outputs being fed 
back. In addition to the current independent (exogenous) 
inputs and the previous outputs, time-delayed values of 
these variables are also used as input. Figure 1 shows the 
common used NARX architecture. 
 
Figure 1 NARX Architecture 
The training of the network is accomplished, without 
feedback, in a serial structure. Here, the true outputs 
y(k ‚àí 1, k ‚àí 2, ‚Ä¶ , k ‚àí ùëõy) are used instead of the predicted 
output yÃÇ(k ‚àí 1, k ‚àí 2, ‚Ä¶ , k ‚àí ny). This has the advantage on 
the one hand that the exact inputs of the network are used. 
And on the other hand, a static backpropagation method 
such as the Levenberg Marquardt algorithm can be used as a 
learning method. 
Based on this principle, several papers dealing with the 
modeling of building HVAC systems have been published. 
For example, in [19], multiple autoregressive RBF-ANNs 
are used to predict the PMV. The forecast result is used here 
within an MPC to reduce energy consumption while achiev-
49
Copyright (c) IARIA, 2019.     ISBN:  978-1-61208-706-1
ADAPTIVE 2019 : The Eleventh International Conference on Adaptive and Self-Adaptive Systems and Applications

ing maximizing thermal comfort. In [20], a series of recur-
rent models is used to predict humidity and indoor tempera-
ture in buildings. [21] also describes the use of a neural 
network to model a building HVAC system. This model is 
used as part of an intelligent energy management system in 
combination with a genetic algorithm to optimize the cool-
ing energy requirement. The model consists of several sub-
models for the different components of the HVAC system, 
which are constructed as multi-layer perceptron (MLP) in 
feed forward structure with a hidden layer of 20 neurons, 
one bias and one hyperbolic activation function. The models 
predict the resulting exhaust temperature, fan pressure and 
compressor output. The model has a resolution of 1 minute. 
The mean average error MAE tested was 0.52K for the 
temperature model and 0.58 KW for the energy consump-
tion.  
The modeling of vehicle HVAC systems by neural net-
works was discussed in detail in [21]-[23]. In [22] and [23], 
the modeling of an experimental automotive air condition-
ing system with a recurrent, time-delayed neural network is 
described. The model is again used within a model predic-
tive control to optimize the refrigeration cycle, in particular 
a variable speed compressor. The network has a hidden 
layer with 5 neurons and a time delay of 5 samples for the 
input and 3 samples for the feedback output. The data sam-
pling rate was 8 seconds. The training was done on- and 
offline with a Levenberg-Marquardt algorithm. Tests using 
one-step-ahead and 10-steps-ahead prediction were per-
formed. Here, it was determined that the feedback caused a 
fault accumulation, which is why an error resetting was 
performed after the 10 steps. 
An artificial neural network architecture alternative to 
NARX exists with LSTM networks. In this case, as with all 
recurrent structures, not individual data points but entire 
sequences of the data are processed further. The feedback 
takes place here on the level of individual cells. Unlike 
traditional RNNs, the problems of exploding or vanishing 
gradients in training LSTMs have a much smaller impact. 
While the base element in feed forward networks is a single 
neuron with associated weights and an activation function, 
individual LSTM-units respectively LSTM-blocks are the 
base elements in LSTM networks. The common architecture 
of an LSTM-unit consists of one cell and three gates. The 
cell represents the memory of the unit. During each calcula-
tion step, the output of the LSTM-unit ht (hidden state) and 
the state of the cell ct are calculated. 
The output of the LSTM-unit is calculated from the state 
of the cell and the output of the output gates. The cell state 
is calculated from the previous value of the cell state and the 
outputs of the input gates and the forget gate. In each of the 
three gates, as in a neuron in a feed forward network, each 
output is calculated from a weighted sum and an activation 
function. Through the training, the weights of the gates are 
adjusted and thus learned to what extent information from 
previous steps are stored or removed. The detailed descrip-
tion of the method can be found in [15]. 
Based on this basic architecture, Section IV proposes a 
deep neural network for mapping the thermal behavior of 
vehicle interior climate control. This model is trained on the 
data of a reference model, which is explained in more detail 
in the following chapter. 
III. 
PHYSICAL REFERENCE MODELL  
A. Model Design  
In the simulation environment Dymola, the model of a 
mobile refrigeration system and a car cabin was created 
using the modeling language Modelica, the ModelicaStand-
ardLibrary and the model library TIL Suite [24]. The air 
conditioning system used as a reference system comes from 
a Volkswagen e-Golf, which was available as a measuring 
vehicle for several months. The data collected was used to 
create a model of the vapor compression cycle, the climate 
control system and the cabin. The coarse structure of the 
refrigeration system model is shown in Figure 2. 
 
Figure 2 Refrigeration cycle with a scroll compressor (1), a high-pressure-
side external air-refrigerant heat exchanger as condenser (2) with a fan 
(10), an internal heat exchanger (11), an expansion element (3) and the 
inner heat exchanger as evaporator (4). In the air duct (9) there is a 
temperature flap (5) which divides the air flow coming from the fan (12) 
and, depending on the operating point, directs it via the heat exchanger in 
the water-glycol cycle (6) of the heating circuit. The medium is heated by a 
high-voltage PTC (7) and circulated by a pump (8). 
B. Refrigeration System Model 
Compressor: The refrigeration cycle is operated with the 
refrigerant R-1234yf and consists of a scroll compressor 
taken from the TIL standard library. By adjusting its dis-
placement volume and efficiencies, it was adapted to the 
compressor from the real refrigeration cycle. Internal pres-
50
Copyright (c) IARIA, 2019.     ISBN:  978-1-61208-706-1
ADAPTIVE 2019 : The Eleventh International Conference on Adaptive and Self-Adaptive Systems and Applications

sure and friction losses as well as heat dissipation to the 
environment are also mapped by the model. 
Heat exchangers: The refrigerant-side heat exchangers 
used are from the TIL AddOn Automotive [25] and have 
been adapted to the dimensions of the e-Golf heat exchang-
ers. The heat exchangers can be adapted to the real compo-
nent via several parameters for geometry (see Figure 3), as 
well as heat transfer and pressure loss relationships. 
Following the recommendation of Rohsenow et al. [26], 
the correlation of Gnielinski [27] for Reynolds numbers less 
than 2300 and the correlation of Dittus/Boelter [28] for 
Reynolds numbers greater than 104 was used for the calcu-
lation of the refrigerant-side heat transfer coefficient for the 
case of turbulent flow. For the phase change in the conden-
ser, the correlation of Shah [29] was used. The air-side 
forced heat transfer was determined with the correlation 
established by Haaf [30]. For the refrigerant-side pressure 
loss during the phase change, the McAdams approach [31] 
in combination with the Swamee/Jain formulation [32] was 
used for Reynolds numbers greater than 2300 on the basis of 
the homogeneous calculation model. The implementation of 
the airside pressure loss was neglected. 
 
Figure 3 Modelling of heat exchangers with the TIL AddOn Automotive. 
The geometry of the heat exchangers can be completely adapted to that of 
the original component (upper illustration). Furthermore, the heat 
exchanger can be divided into cells (lower illustration). This allows a three-
dimensional analysis of the heat exchanger [25]. 
High-voltage PTC: The high-voltage PTC was imple-
mented via a heat source that transfers a loss-free heat flow 
to a tube model. The coolant, which absorbs the heat flow of 
the PTC with a defined heat transfer coefficient, is conduct-
ed through this tube model.  
Expansion Valve: The expansion element is a thermostat-
ic expansion valve. The opening behavior of the valve was 
implemented in the model based on manufacturer data. The 
nominal high- and low-pressure values are 9.7 bar at 235 
cm¬≥/h and 3.7 bar at 160 cm¬≥/h. The maximum operating 
point is 7 bar at 35¬∞C. 
Fans: The fans are implemented as simple models which 
convey a defined air volume flow. Since no reliable air-side 
measurement data was available, no air-side pressure losses 
were integrated. 
C. Vehicle Cabin System Model  
The interior model comes from the TIL AddOn Cabin 
[33] and  is based on an ideally mixed zero-dimensional air 
volume (moist air), which is thermally coupled to the pas-
sengers and surrounding surfaces (walls, windows, floor, 
ceiling, dashboard, seats) and these in turn to the environ-
ment (see Figure 4). The surface elements were implement-
ed using parameters for geometry, material properties and 
heat transfer relationships. 
 
Figure 4 Structure of the cabin model with thermal connections of the 
individual components. In order to maintain the clarity, the representation 
of the long-wave radiation exchange of all components among each other, 
which is determined by view factors, was omitted 
51
Copyright (c) IARIA, 2019.     ISBN:  978-1-61208-706-1
ADAPTIVE 2019 : The Eleventh International Conference on Adaptive and Self-Adaptive Systems and Applications

The air duct was modelled with a tube model available in 
TIL and thermally coupled to the underside of the dash-
board. The passenger was integrated into the cabin model as 
heat and moisture source. 
D. Comparison of  Simulation and Measurement 
The model was calibrated with several measurement runs 
and adapted via a fitting process. Since the climate control 
system uses the interior temperature as the central reference 
value, this quantity in particular is an important quality 
criterion for the model. Figure 5 shows a comparison of an 
exemplary simulation of a heating case. It can be seen that 
the interior model is not able to reproduce small temperature 
changes of the sensor. This is due to the ideal mixing of the 
air volume based on the zero-dimensional approach. How-
ever, the average heating behavior of the interior is very 
well represented. This results in a deviation of the interior 
temperature determined by the model of a maximum of 
4.8K during the heat-up phase and a maximum of 0.9K in 
control mode over all evaluated test runs. 
 
Figure 5 Comparison of measurement and simulation data of a test drive at 
an outside temperature between 0¬∞C and 5¬∞C. 
The climate control system of the model was based on a 
typical control unit for electric vehicles. The model can 
dynamically map the following operating states: 
ÔÇ∑ 
Heating 
ÔÇ∑ 
Cooling 
ÔÇ∑ 
Dehumidification 
ÔÇ∑ 
Re-heating 
ÔÇ∑ 
Ventilation 
For the work presented here, the focus was on the oper-
ating states of heating and dehumidification. The resulting 
model of HVAC system and cabin consists of 9947 de-
pendent parameters, 468 continuous time states, 199 linear 
equation systems with at most 2nd order, 32 non-linear 
equation systems with at most 1st order. The average CPU 
time is 240 seconds for 1000 simulated seconds. It was 
exported as FMU to perform the further process of ANN 
learning in Matlab and Python. 
IV. 
MODELING OF THE CLIMATE SYSTEM WITH ANN  
A. Model structure 
The overall model consists of 6 linked submodels. Each 
submodel consists of an individually trained network. The 
submodels were each selected according to the sensors pre-
sent in the vehicle, so that the signal trajectories of the in-
puts and outputs can be used as training data. The inputs of 
each subnet consist of feedback outputs of its own and other 
subnets, the direct outputs of other subnets and external 
inputs. Figure 6 shows simplified the overall model struc-
ture. 
 
Figure 6 Model structure of the ANN-model 
In the first subnet named the refrigerant cycle, the air 
temperature after the evaporator is predicted. For this pur-
pose, the trajectories of the inside temperature, the outside 
temperature, the relative humidity inside and outside, the 
recirculation flap position, the fan power and the compres-
sor power are used as inputs, each in the form of a sequence. 
The second network represents the heating circuit. The 
trajectories of the electrical power of the PTC element, the 
air temperature after evaporator, the past air temperature 
after the heat exchanger, the temperature flap position and 
the fan power serve as input to predict the current air tem-
perature behind the heat exchanger of the heating circuit. 
The predicted output values of the first two nets are used 
together with the position of the temperature flap and the 
blower output as input for the third network, the air distribu-
tion, to predict the outlet temperature at the vents to the 
cabin interior. 
In the fourth network, the new internal temperature is 
calculated from a number of external inputs, such as outside 
temperature, direct and diffuse solar radiation power, vehi-
cle speed, fan power, passenger number and past internal 
temperature and outlet temperature. From this, the new 
windscreen temperature and the resulting new relative hu-
midity are predicted in the last two networks. 
B. Network Architecture / Parameterization 
1) NARX 
The NARX networks were designed as in the work de-
scribed in Section II.B, each with a hidden layer with differ-
ent numbers of neurons (5, 10 and 20). The input signals of 
the networks were prepared according to the different tested 
delays of 3 and 6 delay steps. For preprocessing of the sig-
nals, the training data of the inputs and outputs was normal-
52
Copyright (c) IARIA, 2019.     ISBN:  978-1-61208-706-1
ADAPTIVE 2019 : The Eleventh International Conference on Adaptive and Self-Adaptive Systems and Applications

ized by their mean value and their standard deviation. To 
generate the training data, 11 simulation runs were carried 
out with simulated journey duration of approx. 1 hour each. 
Here, a total of 40810 data samples were generated with a 
sampling rate of one second. The training data was subdi-
vided as usual into learning, test and validation sets. As a 
learning function, the Levenberg-Marquardt algorithm was 
chosen with mean square error (MSE) as performance indi-
cator. The training was carried out for each submodel with 
the different architectures and tested on 3 further unseen 
simulation runs with 10586 data samples. A maximum 
number of 200 learning epochs was defined as abort criterion 
for the learning processes. However, this never occurred 
because of the rapid convergence of the learning function. 
The RMSE was selected as benchmark for the evaluation of 
the test result. 
2) LSTM 
The LSTM networks were designed with a sequence in-
put layer, a LSTM layer with different number of LSTM-
units (5, 10 and 20), a fully connected layer and an output 
regression layer. Sequence lengths of 3 and 6 samples were 
examined. The input data was prepared as described above. 
For network training the adaptive moment estimation opti-
mizer (ADAM), stochastic gradient descent optimizer 
(SGD) und the root mean square propagation optimizer 
(RMSProp) were tested. Here, too, a maximum number of 
200 learning epochs was defined as the abort criterion of the 
learning processes. All learning methods showed a signifi-
cantly weaker convergence compared to the NARX training 
procedures, so that the learning processes were always abort-
ed due to the reached maximum number of learning periods. 
The SGD method proved to be the most efficient learning 
method. A mini batch size of 50 data samples per iteration 
was chosen. The test procedure was carried out as described 
above. 
3) Combined Overall Model 
To simulate the holistic system model, the individual 
subnetworks were linked according to the model structure 
shown in Section III.4. Here, the inputs were replaced by the 
direct and feedback outputs of the coupled individual sub-
nets. The overall system was then tested by the three addi-
tional generated unseen test drive simulations. 
V. 
TEST OF THE SUBMODELS AND THE COMBINED 
OVERALL MODEL 
In accordance with the test methodology described in 
Chapter IV, the individual subnets were first tested using 
unseen described test data. In the first test series, the indi-
vidual subnets were tested open loop with perfect input. This 
corresponds to the quality of a one-step-ahead prediction. 
Tables I and II show the results with the RMSE over all 3 
test drives. It should be noted that the subnets 1-5 each have 
a temperature in K as a prediction variable and the subnet 6 
a relative humidity in %. 
The predictions of the NARX networks have significant-
ly lower error rates compared to the predictions with LSTM 
networks. The error rates of the LSTM networks decrease 
with increasing network architecture complexity. 
TABLE I.  
RESULTS OF THE NARX OPENLOOP SUBNET TEST 
 
TABLE II.  
RESULTS OF THE LSTM OPENLOOP SUBNET TEST 
 
In a second test series, the input values of the true past 
outputs were replaced by the feedback outputs of each sub-
network. This highlighted the error accumulation generated 
by each subnetwork. Tables III and IV show the results with 
the averaged RMSE over all 3 test drives. As can be seen 
from the test results, the error rates for both network types 
increase in the partially closed loop. The NARX subnet error 
rate in this test series increases so dramatically that only 4 
NARX subnets (Network 1, 2, 4, and 5) perform better than 
the LSTM subnets. 
TABLE III.  
RESULTS OF THE NARX PARTIAL CLOSED LOOP SUBNET 
TESTS 
 
TABLE IV.  
RESULTS OF THE LSTM PARTIAL CLOSED LOOP SUBNET 
TESTS 
 
In the final test series all coupled inputs were replaced 
by the linked direct and feedback outputs of the coupled 
individual subnets. For the combined overall model, the sub 
network structure, which performed best in the second test 
series, was selected for the respective network types. Table 
V shows the results with the RMSE for both network types 
for all 3 test drives. As can be seen from the results, the error 
rates of the NARX networks increase significantly, while the 
error rate in the LSTM subnets is almost unchanged com-
Number of 
Hidden Layer Neurons
Number of 
Delays
RMSE
Net 1
RMSE
Net 2
RMSE
Net 3
RMSE
Net 4
RMSE
Net 5
RMSE
Net 6
5
3
0,0031 0,0035 0,0096 0,0004 0,0001 0,0111
5
6
0,0037 0,0031 0,0024 0,0013 0,0005 0,0052
10
3
0,0036 0,0045 0,0046 0,0017 0,0008 0,0167
10
6
0,0136 0,0031 0,0076 0,0004 0,0001 0,0059
20
3
0,004 0,0029 0,0019 0,0003 0,0003 0,0061
20
6
0,0059
0,018 0,0066 0,0002 0,0005 0,0067
Number of 
LSTM Units
Number of 
Delays
RMSE
Net 1
RMSE
Net 2
RMSE
Net 3
RMSE
Net 4
RMSE
Net 5
RMSE
Net 6
5
3
0,1493 0,3373 0,4015 0,1285 0,0918 0,5018
5
6
0,1223 0,3766 0,2651 0,0986 0,0729 0,4065
10
3
0,1087 0,2451 0,2132 0,0806 0,0779 0,3441
10
6
0,1332 0,3416 0,2305 0,0787 0,0723
0,327
20
3
0,1106 0,2442 0,2095 0,0592 0,0692 0,3236
20
6
0,134 0,2909 0,2175 0,0725
0,06 0,3039
Number of 
LSTM Units
Number of 
Delays
RMSE
Net 1
RMSE
Net 2
RMSE
Net 3
RMSE
Net 4
RMSE
Net 5
RMSE
Net 6
5
3
0,1493 0,3373 0,4015 0,1285 0,0918 0,5018
5
6
0,1223 0,3766 0,2651 0,0986 0,0729 0,4065
10
3
0,1087 0,2451 0,2132 0,0806 0,0779 0,3441
10
6
0,1332 0,3416 0,2305 0,0787 0,0723
0,327
20
3
0,1106 0,2442 0,2095 0,0592 0,0692 0,3236
20
6
0,134 0,2909 0,2175 0,0725
0,06 0,3039
Number of 
LSTM Units
Number of 
Delays
RMSE
Net 1
RMSE
Net 2
RMSE
Net 3
RMSE
Net 4
RMSE
Net 5
RMSE
Net 6
5
3
1,1777 4,9163 2,3134 0,5887 0,9752 8,8424
5
6
0,5883 5,1189 2,1451
0,586
0,987 13,897
10
3
0,6478 4,2755 2,2007 0,5778
0,969 5,1603
10
6
0,6148 4,9479 2,1204 0,4728 0,9435 4,5458
20
3
0,6237 4,4588 2,1995 0,6136 0,9106
5,547
20
6
0,5667
4,747 2,1876 0,4748 0,8591 3,9582
53
Copyright (c) IARIA, 2019.     ISBN:  978-1-61208-706-1
ADAPTIVE 2019 : The Eleventh International Conference on Adaptive and Self-Adaptive Systems and Applications

pared to the second test series. The error rates of the NARX 
networks have a greater spread compared to the error rates of 
the LSTM networks. This is an indication for a better gener-
alization capability of the LSTM networks.  
TABLE V.  
RESULTS OF THE LSTM OVERALL CLOSED LOOP TESTS 
 
In summary, the test results of the overall models for the 
cabin air and windscreen temperature (Output Network 4 and 
Network 5) and the relative humidity (Output Network 6) 
show on average smaller error rates for the LSTM-based 
overall model.  
VI. 
CONCLUSION 
In the experiments, the overall LSTM-based model out-
performed the overall NARX-based model for the simulation 
data tested. This leads to the conclusion that LSTM-based 
neural networks offer a promising alternative to traditional 
neural network modeling approaches. However, no conclu-
sion can be drawn regarding the general suitability of the 
procedures. On the one hand, only a small subset of possible 
external climatic conditions was mapped with the generated 
reference data, so that no valid statement can be made about 
the generalizability for a broad spectrum of climatic bounda-
ry conditions. In addition, the networks were trained with 
"perfect" training data. Therefore, no statement can be made 
about the ability of the networks to what extent noisy signals 
or measurement inaccuracies can be compensated. For fur-
ther evaluation, a wider range of test and training data must 
be used. To reduce the quality gap to physical reference 
models, more complex LSTM networks with longer input 
sequences, a higher number of LSTM units, and a larger 
number of training epochs may be required. These questions 
will be the subject of subsequent research based on this pa-
per. 
ACKNOWLEDGMENT 
The   authors   acknowledge   the   financial   support   
by   the Federal   Ministry of   Education   and   Research   
of  Germany  in  the  framework of  ‚ÄúKMU-innovativ: In-
formations- und Kommunikationstechnologien‚Äù within the 
project ‚ÄúKataloggest√ºtzte interdisziplin√§re Entwurfsplatt-
form f√ºr Elektrofahrzeuge (KISEL)‚Äù. 
 
 
REFERENCES 
[1]  R. Baumgart, Reduzierung des Kraftstoffverbrauches durch 
Optimierung von Pkw-Klimaanlagen, Chemnitz, Germany: 
Dissertation TU Chemnitz, 2010.  
[2]  C. Haupt, Ein multiphysikalisches Simulationsmodell zur 
Bewertung von Antriebs- und W√§rmemanagementkonzepten 
im Kraftfahrzeug, M√ºnchen, Germany: Dissertation, TU 
M√ºnchen, 2012.  
[3]  D. Ghebru, Modellierung und Analyse des instation√§ren 
thermischen Verhaltens von Verbrennungsmotor und 
Gesamtfahrzeug, Frankfurt am Main: Dissertation, 
Karlsruher Institut f√ºr Technologie, 2013.  
[4]  F. Schueppel, Optimierung des Heiz- und Klimakonzepts zur 
Reduktion der W√§rme- und K√§lteleistung im Fahrzeug, 
Berlin, Germany: Dissertation TU Berlin, 2015.  
[5]  K. Schr√∂der, S. Wagner, M. Ellinger, ‚ÄûGekoppelte 
Simulation der Klimaanlage und Fahrgastzelle unter 
Ber√ºcksichtigung variierender Randbedingungen,‚Äú in 
PKW_Klimatisierung II- Klimakonzepte, Regelungsstrategien 
und Entwicklungsmethoden heute und in Zukunft, Essen, 
expert verlag, 2002, pp. 210-223. 
[6]  H. Tummescheit, J. Eborn, K. Proessl, S. Foersterling und W. 
Tegethoff, ‚ÄûAirConditioning: Eine Modelica-Bibliothek zur 
dynamischen Simulation von K√§ltekreisl√§ufen,‚Äú in PKW-
Klimatisierung IV- Klimakonzepte, Zuheizkonzepte, 
Regelungsstrategien und Entwicklungsmethoden, Essen, 
expert verlag, 2007, p. 196214. 
[7]  R. Domschke und M. Matthes, ‚ÄûIn-the-Loop Simulation of 
Electronic Automatic Temperature Control Systems: HVAC 
Modeling,‚Äú in PKW-Klimatisierung IV- Klimakonzepte, 
Zuheizkonzepte, Regelungsstrategien und 
Entwicklungsmethoden, Essen, expert verlag, 2006, pp. 215-
231. 
[8]  K. Martin, R. Rieberer, S. Alber, J.-J. Robin und T. Schaefer, 
‚ÄûEinsatz von numerischer Simulation bei der Entwicklung 
von K√§ltekreisl√§ufen,‚Äú in PKW-Klimatisierung V-Effiziente 
K√§ltekreisl√§ufe, Klimakonzepte f√ºr Hybridfahrzeuge und 
Strategien zur Komfortverbesserung, Essen, expert verlag, 
2007, pp. 77-91. 
[9]  S. Park, A Comprehensive Thermal Management System 
Model for Hybrid Electric Vehicles, Michigan, USA: 
Dissertation, The University of Michigan, 2011.  
[10]  B. Flieger, Innenraummodellierung einer Fahrzeugkabine in 
der Programmiersprache Modelica, RWTH Aachen: 
Dissertation, 2013.  
[11]  D. Marcos, F. J. Pino, B. Carlos und J. J. Guerra, ‚ÄûThe 
development and validation of a thermal model for the cabin 
of a vehicle,‚Äú Applied Thermal Engineering 66, pp. 646-656, 
2014.  
[12]  M. Fritz, Entwicklungswerkzeuge f√ºr die 
Fahrzeugklimatisierung von Nutzfahrzeugen, Karlsruhe, 
Germany: Dissertation, Karlsruher Institut f√ºr Technologie 
(KIT), 2015.  
[13]  F. Netter, Komplexit√§tsadaption integrierter 
Gesamtfahrzeugsimulationen, Karlruhe, Germany: 
Dissertation, Karlsruher Institut f√ºr Technologie (KIT), 2015.  
[14]  D. Moller, J. Aurich, R. Tr√∂ger und C. Gr√ºnig, 
NARX
RMSE
Net 1
RMSE
Net 2
RMSE
Net 3
RMSE
Net 4
RMSE
Net 5
RMSE
Net 6
Test Drive 
Simulation 1
7,7141
5,7805
2,6185
9,8997
4,7859
37,936
Test Drive 
Simulation 2
1,5486
1,2762
0,9869
0,3264
0,1003
43,264
Test Drive 
Simulation 3
6,3908
1,6349
2,6705
8,4168
4,0662
37,749
LSTM
RMSE
Net 1
RMSE
Net 2
RMSE
Net 3
RMSE
Net 4
RMSE
Net 5
RMSE
Net 6
Test Drive 
Simulation 1
0,8787
4,8565
2,243
0,7314
0,8758
5,4002
Test Drive 
Simulation 2
0,5962
2,7291
1,73
0,3627
0,8197
3,7709
Test Drive 
Simulation 3
0,8667
7,2622
3,3382
0,6307
1,0455
6,5789
54
Copyright (c) IARIA, 2019.     ISBN:  978-1-61208-706-1
ADAPTIVE 2019 : The Eleventh International Conference on Adaptive and Self-Adaptive Systems and Applications

‚ÄûGesamtheitliche Betrachtung des Thermomanagements in 
Elektrofahrzeugen - Interaktion der Klima- und 
K√ºhlsystemkomponenten im Gesamtverbund,‚Äú in 19. MTZ-
Fachtagung Simulation und Test 2017, Darmstadt, Germany, 
2017.  
[15]  S. Hochreiter und S. J√ºrgen, ‚ÄûLong Short-Term Memory,‚Äú in 
Neural Computation 9(8): 1735-1780, M√ºnchen, Germany, 
1997.  
[16]  T. M. Association, ‚ÄûFMI - Functional Mock-Up Interface,‚Äú 
[Online]. Available: https://fmi-standard.org/. [Zugriff am 01 
03 2019]. 
[17]  G. Mustafarraj, J. Chen und G. Lowry, ‚ÄûThermal behavior 
prediction utilizing artificial neural networks for an open 
office,‚Äú in Applied Mathematical Modelling 34 (2010) 3216-
3230, Uxbridge, Middlesex, United Kingdom, 2010.  
[18]  T. Lu und M. Viljanen, ‚ÄûPrediction of indoor temperature 
and relative humidity using neural network models: model 
comparison,‚Äú in Neural Comput & Applic 18: 345‚Äì357, 
Espoo, Finland, 2009.  
[19]  P. M. Ferreira, A. E. Ruano, S. Silva und C. E.Z.E, ‚ÄûNeural 
networks based predictive control for thermal comfort and 
energy savings in public buildings,‚Äú in Energy and Buildings 
55 238‚Äì251, Portugal, 2012.  
[20]  A. E. Ruano und P. M. Ferreira, ‚ÄûNeural Network based 
HVAC Predictive Control,‚Äú in Proceedings of the 19th World 
Congress IFAC, Cape Town, South Africa, 2014.  
[21]  T.-Y. Lee, Prediction of Car Cabin Temperature Using 
Artificial Neural Network, M√ºnchen: Master-Thesis 
Technische Universit√§t M√ºnchen, 2007.  
[22]  B. C. Ng, D. I. Z. Mat, H. Jamaluddin und H. M. Kamar, 
‚ÄûApplication of adaptive neural predictive control for an 
automotive air conditioning system,‚Äú in Applied Thermal 
Engineering 73 (2014) 1242-1252, Johor, Malaysia, 2014.  
[23]  B. C. Ng, D. I. Z. Mat, H. Jamaluddin und H. M. Kamar, 
‚ÄûDynamic modelling of an automotive variable speed air 
conditioning system using nonlinear autoregressive 
exogenous neural networks,‚Äú in Applied Thermal 
Engineering 73 (2014) 1253-1267, Johor, Malaysia, 2014.  
[24] TIL Suite: Software package to simulate thermal systems, 
TLK-Thermo GmbH,  Braunschweig, March 2019. 
[25] TIL AddOn Automotive: Software package to simulate 
thermal systems with focus on automolie applications, 
 TLK-Thermo GmbH, Version 3.6.0 [Computer Software], 
Braunschweig, M√§rz 2019. 
[26] Rohsenow, M. W.: Boiling, in: Rohsenow, M. W.; Hartnett, 
P. J; Ganic, E. N. (Editor): Handbook of Heat Transfer 
Fundamentals, 
 2. Edition, McGraw-Hill, 1985. 
[27] Gnielinski, V.: Neue Gleichungen f√ºr den W√§rme- und den 
Stoff√ºbergang in turbulent durchstr√∂mten Rohren und 
Kan√§len, in: Forschung im Ingenieurwesen - Engineering 
Research Vol. 41, Pt. 1, Springer-Verlag, 1975, pp. 8 ‚Äì 16. 
[28] Dittus, F. W.; Boelter, L. M. K.: Heat Transfer in Automobile 
Radiators of the Tubular Type, in: Publications on 
Engineering Vol. 2, University of California at Berkeley, 
1930, pp. 443 ‚Äì 461. 
[29] Shah, M. M.: A New Correlation for Heat Transfer during 
Boiling Flow Through Pipes, in: ASHRAE Transac-tions 
Vol. 82, Pt. 2, American Society of Heating, Refrigerating 
and Air-Conditioning Engineers - ASHRAE Inc., 1976. 
[30] Haaf, S.: W√§rme√ºbertragung in Luftk√ºhlern, in: Steimle, F. 
(Editor); Stephan, K. (Editor): Handbuch der K√§lte-technik 
Vol. 6, Pt. B, Springer-Verlag, 1988. 
[31] McAdams, W. H.; Woods, W. K.; Heroman, L. C.: 
Vaporization inside horizontal tubes-II-benzene-oil mix-
tures, in: Trans. ASME Vol. 64, Pt. 3, The American Society 
of Mechanical Engineers, 1942, pp. 193 ‚Äì 200. 
[32] Swamee, P. K.; Jain, A. K.: Explicit Equations for Pipe-Flow 
Problems, in: Journal of the Hydraulics Division, Vol. 102, 
Pt. 5, ASCE - American Society of Civil Engineers, 1976, pp. 
657 ‚Äì 664. 
[33] TIL AddOn Cabin: Software package to simulate thermal 
systems with focus on automobile interiors, TLK-Thermo 
GmbH, Version 3.6.0 [Computer Software], Braunschweig, 
M√§rz 2019. 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
55
Copyright (c) IARIA, 2019.     ISBN:  978-1-61208-706-1
ADAPTIVE 2019 : The Eleventh International Conference on Adaptive and Self-Adaptive Systems and Applications

