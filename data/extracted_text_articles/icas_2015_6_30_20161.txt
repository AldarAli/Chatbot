Task-Space Torque Controller Based on Time-Delay Control
Sung-moon Hur∗, Joonhee Jo∗†, Yonghwan Oh∗
∗Center for Robotics Research, Korea Institute of Science and Technology
Hwarang-ro 14-gil 5 Seongbukgu Seoul, Korea
Email: tjdans85@gmail.com, oyh@kist.re.kr
†HCI and Robotics, University of Science and Technology
KIST Campus, Seoul, Korea
Email: jhjo@kist.re.kr
Abstract—In this paper, a torque control method in task-space
for redundant manipulators with friction is proposed. A previous
simple control approach based on virtual spring damper hypothe-
sis is used to generate human-like motions. The method is efﬁcient
in the system which is difﬁcult to identify the exact dynamics,
however, the controller has steady state errors. To eliminate the
steady state error, the gravity and friction, which is the part of
the system dynamics, are compensated. Although the gravity and
friction are compensated, the error of the modelling remains in
the system. Hence, to reduce the nonlinearity, unknown effects,
and modelling errors of the system, a torque controller based
on Time-Delay Control (TDC) that eliminates the friction and
unknown effects, is used. The performance of the control method,
in Cartesian space control, is experimented with the torque sensor
based 3-joints robot manipulator.
Keywords–Task-Space; Virtual spring damper hypothesis; Time-
Delay Control(TDC).
I.
INTRODUCTION
Recently, many robot research for redundant manipulators
have been developed, and to control the robot precisely in task-
space has been an issue, especially for industrial robots. The
traditional control method is to compute the inverse kinematics
of the system [1][2][3]. The control input is computed from
the joint angle velocity, which is calculated from the given
end-effector velocity. Another approach is to create the control
input directly from the inertia matrix and Coriolis and centrifu-
gal force, which is called the inverse dynamics approach [4].
However, these control methods are especially difﬁcult to
compute in redundant systems because of the calculation for
pseudo-inverse of the Jacobian matrix. Therefore, a simple
approach that does not need for any computation of the inverse
kinematics nor dynamics which is proposed by Arimoto et al.
is considered. This is a natural control method based on virtual
spring-damper hypothesis [7]-[11], which offers human-like
motions. In this paper, the natural control method based on
virtual spring damper hypothesis is used for the task-space
controller.
For precise control of the end-effector, the dynamic model
of the system is required. However, non-linearity of the system
makes it difﬁcult to model and causes control problems. The
non-linearity of the system is the friction from the harmonic
drive and bearing, noise and ﬂexibility of the sensor, and
dynamic modelling error of the plant. To deal with these prob-
lems many researches have been proposed such as using an
observer to estimate the disturbance [13][24][25], friction com-
pensation method [12], Time-Delay Control (TDC) method
that eliminates the uncertainties without using the system
parameters [14][15][16][18][19], and impedance control [6].
This paper addresses a task-space torque control method
to control the friction existing redundant manipulator accu-
rately. To overcome the friction and uncertainties, the TDC
method is applied. With the TDC method used, the torque
controller estimates the non-linear friction, unknown effects,
and dynamic errors and cancel them out without any parameter
identiﬁcation [14].
This paper is organized as follows. The dynamic model of
the redundant manipulator and the friction model is handled
in Section II, and the task-space torque controller is designed
in Section III. Experiments are carried on to validate the
proposed method in Section IV, and Section V concludes this
paper.
II.
DYNAMIC MODEL OF THE REDUNDANT
MANIPULATOR
A. Dynamic Model
The dynamic model of the redundant manipulator is con-
sidered as [20]
M(q) ¨q+c(q, ˙q)q+g(q) = τo +τext
(1)
B ¨θ +τo = τm +τf
(2)
τo = ks( θ
N −q)+kd(
˙θ
N − ˙q)
(3)
where (1) is the model of the link, (2) is the model of the motor,
and (3) is the joint torque of the manipulator. q is the link angle
vector, θ is motor angle vector, M(q) is the mass inertia matrix
of the manipulator, c(q, ˙q) Coriolis force, g(q) is the gravity,
τext is the vector of the friction and external disturbance, τo is
the torque measured by the joint torque sensor, B is the motor
inertia, τf stands for the friction torque of the motor, ks, kd, N,
and τm depict is the joint stiffness, joint damping, gear ratio,
and the motor input torque,respectively. Each joint torque is
measured by the joint torque sensor installed in each joint of
the manipulator.
B. Friction Model
Friction, from the harmonic drives and bearings, causes
control problems [18][21][22][23]. In velocity or position
servo, the friction can be ignored by the appropriately chosen
gain of the controller. However, with joint torque servo, friction
lowers the performance of the system, as shown by Hur
et al. [18]. To improve the control performance and make
a margin of gain the friction should be compensated with a
appropriate model. The friction is identiﬁed with a simple
experiment with the concept that the friction depends on the
128
Copyright (c) IARIA, 2015.     ISBN:  978-1-61208-405-3
ICAS 2015 : The Eleventh International Conference on Autonomic and Autonomous Systems

velocity and torque of the joints [19]. Based on the Coulomb
Viscous friction model [22] the 3 joint manipulator friction
model is estimated as
τ f = ˆτc tanh(α ˙θ)+ ˆτv tanh(α ˙θ)
q ˙θ

(4)
where α is the slope of the ramp, ˆτc denotes the Coulomb
friction parameter, and ˆτv represents the Viscous friction
parameter. With the estimated friction model of the 3-joints
robot manipulator the friction is compensated by adding to the
control input. From the experiment, the friction is estimated;
however, because of the Coulomb friction compensator the
system starts to chatter [18]. To eliminate the static friction
while ensuring the stability of the system a stiction feed-
forward method is applied. The static friction is expressed as
τst =
(+τs
for | ˙q| ≥ ˙qb, βe > βeb
−τs
for | ˙q| ≥ ˙qb, βe < −βeb
0
others
(5)
where τst is the static feed-forward parameter, τs stand for the
static friction coefﬁcient, ˙qb is the velocity boundary, βe is the
error of the control target, βeb symbolizes the control error
boundary. The boundary of the joint velocity and the control
error is decided from amplitude of the sensor noise at steady
state. The ﬁnal friction model of the system is as follow.
τf = ˆτc tanh(α ˙θ)+ ˆτv tanh(α ˙θ)
q ˙θ
+τst.
(6)
III.
TASK-SPACE CONTROLLER
To control the redundant manipulator a traditional method
is an inverse dynamics approach when the dynamic equation
is as (1).
τ = M(q)J+(q)( ¨Xc − ˙J(q, ˙q) ˙q)+C(q, ˙q)+g(q)
(7)
where J+ is the pseudo inverse matrix, and X denotes the
Cartesian position vector of the task-space
X =


px
py
pz
φx
φy
φz


,
(8)
and ¨Xc is the task-space command acceleration and is ex-
pressed as
¨Xc = ¨Xd +Kv( ˙Xd − ˙X)+Kp(Xd −X)
(9)
where Xd, ˙Xd, ¨Xd are the desired Cartesian position, velocity,
and acceleration, and Kv, Kp are the gain matrices. In an ideal
condition, the controller follows the error dynamics
¨e+Kv ˙e+Kpe = 0
(10)
where e = Xd −X, the Cartesian position error; however, to
use this method the inverse jacobian matrix needed and makes
the system complicated. To simplify the controller a natural
control method based on virtual spring damper hypothesis is
used.
A. Virtual Spring Damper Hypothesis
In this paper, the manipulation controller for the redundant
manipulator to obtain a human-like motion is based on the vir-
tual spring damper hypothesis which is suggested in [5]. This
is a simple control approach which does not need calculation
of the pseudo-inverse of the jacobian matrix or the dynamics
of the system. With the Cartesian position error e the virtual
spring potential energy U is as [17]
U = 1
2eTKe
(11)
where K is the stiffness coefﬁcients matrix of the end-effector.
The potential energy U is derivative in time dU
dt to obtain the
torque and joint velocity. When ˙X = J(q) ˙q
dU
dt = eTK ˙e = −eTKJ(q) ˙q = −τT ˙q
(12)
From (12), the torque is
τ = −JT(q)Ke.
(13)
With the torque (13), the virtual spring hypothesis is expressed
as
τ = −C ˙q−JT(q)Ke
(14)
where C represent the damping coefﬁcients matrix of the joint.
For human like motions, the joint damper,−C ˙q, occur over-
damping problem and to show similar movements a virtual
damper, Kv ˙X is added with the virtual spring and is extended
to virtual spring damper hypothesis.
τ = −C ˙q−JT(q)(Kv ˙X +Ke)
(15)
where Kv denotes the damping coefﬁcient matrix. To improve
the controller performance, a friction and gravity compensator
is considered with the virtual spring damper controller and is
as
τ = −C ˙q−JT(q)(Kv ˙X +Ke)+τf +g(q).
(16)
B. Torque Controller Based on Time Delay Control
As shown in [19], the friction can be estimated by using
the concept that the friction is related with velocity and
torque, yet it is difﬁcult to identify the non-linear phenomena
and unknown effects. To eliminate the friction, non-linear
and unknown effects without additional experiments, a torque
controller based on TDC method is proposed [15]. The non-
linear and linear time invariant system is deﬁned to consider
the TDC method.
˙x = f(x,t)+B(x,t)u+d(t)
(17)
˙xm = Amxm +Bmr
(18)
where x denotes the state vector, t is the time, f(x,t) the
full dynamics of the robot which includes the non-linear and
unknown effects, B(x,t) control distribution, u is the control
input, and d(t) is the external disturbance. xm represents the
state vector of the reference model, Am system matrix, Bm is
the command distribution matrix, and r is the command vector.
The linear time invariant system (18) is a system without
friction or disturbance. The non-linear systems control input
u is deﬁned by the error dynamics, ˙e = Ame, to be controlled
as the linear time invariant system where e = xm −x. By (17)
and (18) the error dynamics is as
˙e = Ame+{− f(x,t)−B(x,t)u−d(t)+Amxm +Bmr}.
(19)
129
Copyright (c) IARIA, 2015.     ISBN:  978-1-61208-405-3
ICAS 2015 : The Eleventh International Conference on Autonomic and Autonomous Systems

Figure 1. Block diagram of Task-Space Controller
with TDC based Torque Controller
When the non-linear term is as
−f(x,t)−B(x,t)u−d(t)+Amxm +Bmr = 0
the system is stable; hence, the control input is derived as
u = B+[−f(x,t)−d(t)+Amxm +Bmr]
(20)
where B+ is the pseudo-inverse of B, which is B+ =
(BTB)−1BT.
The assumption of the TDC method is that the present time
value is the same after a very short time δ have passed. It is
expressed as
f(x,t)+d(t) ∼= f(x,t −δ)+d(t −δ)
(21)
From the assumption the non-linear effects are estimated.
f(x,t)+d(t) ∼= ˙x(t −δ)−B(x,t −δ)u(t −δ)+d(t −δ). (22)
Substituting (22) into the control input u the TDC control input
is as follow:
u(t) = u(t −δ)+B+[−˙x(t −δ)+Amx+Bmr].
(23)
For the torque controller of this paper based on TDC control
law, control input, u, is deﬁned as
τm(t) = τm(t −δ)+ ˆM[−¨τd(t −δ)+ ¨τd(t)+kpτe +kv ˙τe]. (24)
where τd stand for the desired torque, ˆM denotes a constant
diagonal matrix followed by the stability analysis [16], τe is
the torque error τe = τd −τo. Although the TDC is a controller
that eliminates the non-linearity effects there is a limitation
on canceling the static friction. Therefore, the static friction
compensator is applied to improve the control performance.
The overall task-space controller is described in Figure 1.
IV.
EXPERIMENTS
The redundant manipulator that is used in this paper is a
3-joints robot arm equipped with a joint torque sensor at each
joint. Each parameters of the link mass, length, the position
of the center of mass, mass moments of inertia are shown
in Table 1. With the proposed approach, the performance
controlling the manipulator in task-space by eliminating the
friction and unknown effects is tested in this section. The
actuators are controlled by the motor controller from ELMO,
and the harmonic drives are directly connected to the actuators
with a 101:1 gear ratio.
Figure 2. Initial Position, X = [0.150,−0.550]T ,
and Target Point, X = [0.300,−0.400]T , of the 3-Joint robot arm
TABLE I. 3-JOINT ROBOT ARM PARAMETERS
Parameters
Value
Unit
m1
2.3292
kg
m2
2.2589
kg
m3
2.0013
kg
l1
0.300
m
l2
0.300
m
l3
0.146
m
lc1
0.13552
m
lc2
0.14023
m
lc3
0.06857
m
I1
0.041629
kgm2
I2
0.039832
kgm2
I3
0.0082305
kgm2
A. Task-Space Controller without Friction Compensator
The task-space controller, which is based on virtual spring
damper, is experimented. In this experiment, the control input
is as
τ = −C ˙q−JT(q)(Kv ˙X +Ke)+g(q).
(25)
To verify the controller performance the experiment starts
at X = [0.150,−0.550]T, point 1, and moves to X =
[0.300,−0.400]T, point 2, and comes back to point 1 as Figure
2. Figure 3 is the experiment result of the controller with the 3-
joint manipulator. From the end-effector position of Figure 3,
the red line is the desired position of the x − axis, and the
blue line is the x − axis position of the end-effector. The
magenta line represents the desired position of the y − axis,
and the green line is the y−axis position of the end-effector.
In the end-effector error graph, the red line, xerr, is the
x − axis position error, and the blue line, yerr is the y − axis
position error. The errors are calculated between the desired
and current position of each axis. From the result of the task-
space controller without friction compensation, it converges to
the desired position with approximately x−axis 0.01[m], and
y − axis 0.01[m] error. The error comes from the modelling
error, non-liner friction, and the unknown effects, therefore,
the next experiment include the friction of each joint and is
compensated. Next, the task-space controller with the friction
compensator is tested.
130
Copyright (c) IARIA, 2015.     ISBN:  978-1-61208-405-3
ICAS 2015 : The Eleventh International Conference on Autonomic and Autonomous Systems

Figure 3. Control Result with Virtual Spring Damper Hypothesis
B. Task-Space Controller with Friction Compensator
Without considering friction as the early experiment, from
the experimental result friction degrades the performance of
the system. Therefore, by implementing the friction compen-
sator to the task-space controller, better performance of the
controller is achieved. The control input of this experiment is
as
τ = −C ˙q−JT(q)(Kv ˙X +Ke)+τ f +g(q).
(26)
Figure 4 shows the result of the controller with the friction
compensator and the lines denotes the same as Figure 3. By
applying the friction model, the position error decreases to
approximately x−axis 0.001[m], and y−axis 0.004[m]. With
the friction compensator an appropriate performance of the
controller is obtained. From the result of Figure 4, it appears
that the controller performance depends on how the friction
and the system is modeled; however, these models are difﬁcult
Figure 4. Control Result with Virtual Spring Damper Hypothesis and
Friction Compensation
to identify. A TDC control method, as explained at the early
section, is used to treat the difﬁculties in the next experiment.
C. Task-Space Torque Controller Based on TDC
To eliminate the non-linear friction, unknown effects, and
modelling error a TDC torque controller is used instead using
the estimated friction model. This method needs no additional
experiments for identifying the friction nor system dynamic
parameters and is very adaptive in friction existing systems.
The torque control input in task-space control is designed as
τd = −JT(q)(Kv ˙X +Ke)
τm(t) = τm(t −δ)
+ ˆM[−¨τd(t −δ)+ ¨τd(t)+kpτe +kv ˙τe]−C ˙q.
(27)
From the result in Figure 5, the lines have the same
meaning as in Figure 2. The result shows that the controller
131
Copyright (c) IARIA, 2015.     ISBN:  978-1-61208-405-3
ICAS 2015 : The Eleventh International Conference on Autonomic and Autonomous Systems

Figure 5. Control Result with Task-Space Torque Controller Based on TDC
offers a more accurate result. It decreases the x−axis error to
0.00005[m], and y−axis to 0.004[m].
V.
CONCLUSION
In this paper a task-space control method, which is based
on virtual spring damper hypothesis, that can eliminate the
non-linear friction, and modelling errors was proposed. Ad-
vantage of the Time-Delay Control (TDC) method, that does
not need the friction and dynamic model, the proposed control
method is adaptive in friction existing systems. To prove
the controller performance the 3-joint manipulator is used.
From the experimental results, the task-space controller has
improved it’s performance in help of the TDC method.
ACKNOWLEDGMENT
This work was supported by the Global Frontier R&D
program on <Human-centered Interaction for Coexistence>
funded
by
the
National
Research
Foundation
of
Ko-
rea
grant
funded
by
the
Korean
Government
(MSIP)
(2013M3A6A3078404).
REFERENCES
[1]
D. Whitney, “Resolved motion rate control of manipulators and human
prostheses,”IEEE Transactions on Man-Machine Systems, vol. 10, no.
2, 1969, pp. 47-53.
[2]
T. Yoshikawa, “Analysis and control of robot manipulators with redun-
dancy,”in Proceedings of Robotics Research: The First International
Symposium, 1984, pp. 735-747.
[3]
Y. Nakamura, Advanced robotics: redundancy and optimization,
Addison-Wesley Longman Publishing Co., Inc. Boston, MA, USA,
1990.
[4]
A. Albu-Schaffer, S. Haddadin, C. Ott, A.Stemmer, T. Wimbock, and G.
Hirzinger, “The DLR Lightweight Robot: Design and Control Concepts
for Robots In Human Environments,”Industrial Robot: An International
Journal, vol. 34, no. 5, 2007, pp. 376-385.
[5]
S. Arimoto, and M. Takegaki, “A New Feedback Method for Dynamic
Control of Manipulators,” Journal of dynamic systems, measurement,
and control, vol. 102, 1981, pp. 119-125.
[6]
C. Ott, A. Albu-Schaffer, A. Kugi, and G. Hirzinger, “Decoupling
Based Cartesian Impedance Control of Flexible Joint Robots,” IEEE
International Conference on Robotics & Automation, vol. 3, September
2003, pp. 3101-3107.
[7]
S. Arimoto, and M. Sekimoto, “Human-like movements of robotic
arms with redundant DOFs: virtual spring-damper hypothesis to tackle
the Bernstein problem,” IEEE International Conference on Robotics &
Automation, May 2006, pp. 1860-1866.
[8]
M. Sekimoto, and S. Arimoto, “Experimental Study on Reaching Move-
ments of Robot Arms with Redundant DOFs Based upon Virtual Spring-
Damper Hypothesis,” IEEE International Conference on Intelligent
Robots and Systems, October 2006, pp. 562-567.
[9]
S. Arimoto, H. Hashiguchi, M. Sekimoto, and R. Ozawa, “Generation
of natural motions for redundant multi-joint systems: A differential-
geometric approach based upon the principle of least actions,” Journal
of Robotic Systems, vol. 22, 2005, pp. 583-605.
[10]
S. Arimoto, H. Hashiguchi, M. Sekimoto, and R. Ozawa, “Natural
resolution of ill-posedness of inverse kinematics for redundant robots:
A challenge to Bernstein’s degrees-of-freedom problem,” Advanced
Robotics, vol. 19, no. 4, 2005, pp. 2484-2495.
[11]
S. Arimoto, H. Hashiguchi, and R. Ozawa, “A SIMPLE CONTROL
METHOD COPING WITH A KINEMATICALLY ILL-POSED IN-
VERSE PROBLEM OF REDUNDANT ROBOTS: ANALYSIS IN
CASE OF A HANDWRITING ROBOT,” Asian Journal of Control,
vol. 7, no. 2, 2005, pp. 112-123.
[12]
J. P. Hauschild, G. Heppler, and J. McPhee, “Friction compensation of
harmonic drive actuators,” Proceedings of 6th International Conference
on Dynamics and Control of Systems and Structures in Space, Jul 2004,
pp. 683-692.
[13]
T. Murakami, and K. Ohnishi, “Observer-Based Motion Control: Appli-
cation to Robust Control and Parameter Identiﬁcation,” IEEE Industrial
Electronics Society: Asia-Paciﬁc Workshop on Advances in Motion
Control, 1993, pp. 1-6.
[14]
P. H. Chang, “A Model Reference Observer for Time-Delay Control
and Its Application to Robot Trajectory Control,” IEEE Transactions
On Control Systems Technology, vol. 4, no. 1, January 1996, pp. 2-10.
[15]
K. Youcef-Toumi, and O. Ito, “A time delay controller design for system
with unknown dynamics,” IEEE American Control Conference, vol.
112, no. 1, 1988, pp. 133-142.
[16]
T. C. Hsia, and L. S. Gao, “Robot Manipulator Control Using De-
centralized Time-Invariant Time-Delayed Controllers,” in Proc. IEEE
International Conference on Robotics & Automation, 1990, pp. 2070-
2075.
[17]
S.-K. Kim, J.-H. Bae, and S.-R. Oh, “Concurrent control of posi-
tion/orientation of a redundant manipulator based on virtual spring-
damper hypothesis,” IEEE International Conference on Robotics &
Automation, 2011, pp. 6045-6050.
132
Copyright (c) IARIA, 2015.     ISBN:  978-1-61208-405-3
ICAS 2015 : The Eleventh International Conference on Autonomic and Autonomous Systems

[18]
S-m. Hur, S.-K. Kim, Y. Oh, and S.-R. Oh, “Joint torque servo of
a high friction robot manipulator based on time-delay control with
feed-forward friction compensation,” IEEE International Symposium
on Robot and Human Interactive Communication (RO-MAN 2012),
September 2012, pp. 37-42.
[19]
S-m. Hur, S.-R. Oh, and Y. Oh, “Joint space torque controller based
on time-delay control with collision detection,” IEEE International
Conference on Intelligent Robots and Systems (IROS 2014), 2014, pp.
4710-4715.
[20]
M. Spong, “Modeling and Control of Elastic Joint Robots,” ASME
Journal of Dynamics Systems, Measurement and Control, vol. 109,
1987, pp. 310-319.
[21]
P. S. Gandhi, “Modeling, Identiﬁcation, and Compensation of Friction
in Harmonic Drives,” Proceedings of the 41st IEEE Conference on
Decision and Control, Las Vegas, Nevada USA, December 2002, pp.
160-166.
[22]
H. Olsson, K. J. Astrom, C. Canudas, M. Gafvert, and P. Lischinky,
“Friction models and friction compensation,” European Journal of
Control, vol. 4, no. 3, 1998.
[23]
K. Rafael, and L. Jes ´us, “Determination of Viscous and Coulomb
Friction by Using Velocity Response to Torque Ramp Inputs,” IEEE
International Conference on Robotics & Automation,vol. 3, May 1999,
pp. 1740-1745.
[24]
B. Xian, M. S de Queiroz, D. Dawson, and I. Walker, “Task-space
tracking control of robot manipulators via quaternion feedback,” IEEE
International Conference on Robotics & Automation,vol. 20, no. 1,
2004, pp. 160-167.
[25]
H. Sadeghian, L. Villani, M. Keshmiri, and B. Siciliano, “Task-space
control of robot manipulators with null-space compliance,” IEEE Trans-
actions on Robotics,vol. 30, no. 2, 2014, pp. 493-506.
133
Copyright (c) IARIA, 2015.     ISBN:  978-1-61208-405-3
ICAS 2015 : The Eleventh International Conference on Autonomic and Autonomous Systems

