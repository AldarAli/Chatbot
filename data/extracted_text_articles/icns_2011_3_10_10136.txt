Estimation of Packet Loss Probability from Trafﬁc
Parameters for Multimedia over IP
Ahmad Vakili
Energy, Materials, and Telecommunications (EMT)
Institut national de la recherche scientiﬁque (INRS)
Montreal, Quebec, Canada
Email: vakili@emt.inrs.ca
Jean-Charles Gr´egoire
Energy, Materials, and Telecommunications (EMT)
Institut national de la recherche scientiﬁque (INRS)
Montreal, Quebec, Canada
Email: jean-charles.gregoire@emt.inrs.ca
Abstract—For network service providers, assessing and moni-
toring network parameters according to a Service Level Agree-
ment (SLA) as well as optimal usage of resources are important.
Packet loss is one of the main factors to be monitored especially
when IP networks carry multimedia applications. Measuring
network parameters will be more valuable when it is accurate
and online. In this paper, we investigate a method to estimate
packet loss probability (plp) under several conditions and improve
the quality of the estimation over established techniques by
introducing a new formula. In this method, the estimation of
the plp in the intermediate nodes is based on the input stochastic
trafﬁc process. Different trafﬁc situations and node buffer sizes
are simulated by NS-2 and the accuracy of the method is
investigated. The simulation results show that our new formula
signiﬁcantly improves the quality of the plp estimate.
Keywords—Packet loss probability; estimation; stochastic trafﬁc
process.
I. INTRODUCTION
In telecommunications, performance is assessed in terms of
quality of service (QoS). QoS is measured either in terms of
technology (e.g., for ATM, cell loss, variation, etc.) [1] or at
some protocol level (e.g., packet loss, delay, jitter, etc.) [2].
Today, increased access to Internet networks as well as
broadband networks have made possible and affordable the
deployment of multimedia applications such as Internet tele-
phony (VoIP), video conferencing, and IP television (IPTV) by
academia, industry, and residential communities. Therefore the
quality assessment of media communication systems and the
parameters which affect this quality have been an important
ﬁeld of study for both academia and industry for decades. Due
to the interactive or online nature of media communication
and the existence of applicable solutions to deduce the effect
of delay and jitter (e.g., deployment of a jitter buffer at the
end user node [3], [4]), data loss is a key issue which should
be considered. If there is a possibility for online accurate
measuring of the amount of packet loss, then the network
service providers can take the appropriate action to satisfy the
contractual Service Level Agreement (SLA) or to improve and
troubleshoot their service without receiving end user feedback.
Packet loss often happens because of congestion. In other
words, buffer overﬂow at the outgoing interface in intermediate
network nodes causes the packet loss. Since measuring the
packet loss ratio at the intermediate nodes in high speed
networks does not seem applicable in real time, some recent
research has focused on estimation of packet loss probability
(plp) [5]-[8].
According to central limit theory, the aggregated input trafﬁc
at intermediate nodes in the network core can be described
with a gaussian model [9], [10]. Based on the Large Deviation
Theory (LDT) and the large buffer asymptote approach, the plp
can be estimated by a stochastic process. Since the input trafﬁc
is described by a gaussian process, the latter can be identiﬁed
by online measure of the mean and variance of the input trafﬁc.
In this paper, the plp is estimated by the input trafﬁc and the
information which was measured in the past. In other words,
we use some online and ofﬂine measuring data for accurate
online estimation and improve on earlier results. The overall
architecture of measurement, estimation, and control loop to
keep the quality of service/experience within the SLA bounds
is shown in Fig. 1.
Fig. 1.
Measurement, estimation, and control loop schematic.
The rest of the paper is organized as follows: Section II
describes recent studies on plp estimators and introduces our
improved estimator. Section III presents the testbed and our
simulations. Numerical results and comparison that demon-
strate the effectiveness of our new estimator are presented in
Section IV. Section V concludes the paper and points to our
future work.
44
ICNS 2011 : The Seventh International Conference on Networking and Services
Copyright (c) IARIA, 2011.     ISBN: 978-1-61208-133-5

II. PACKET LOSS PROBABILITY ESTIMATOR
There are several approaches to estimate packet loss proba-
bility. Sending probe packets periodically through the path and
processing the returned signals for predicting the performance
of path (e.g., packet loss ratio, delay, etc.) is one of the recent
methods for estimating the plp [5], [11]. The disadvantage of
this method is to increase the burden of probe packets’ bit rate
to the available bandwidth when greater accuracy is requested.
Estimation of plp based on stochastic input trafﬁc process
is another approach in this ﬁeld [7], [8], [14]. In this method
some important assumptions are taken as follows: 1) Mea-
surement and estimation take place at intermediate nodes in
high-speed core links of networks and therefore the input
trafﬁc is a mix of a large number of individual trafﬁcs and
thus the gaussian process model is considered to represent the
stochastic input trafﬁc process [9], [10]; and 2) the size of the
buffer should not be large, otherwise the queue process is not
exponential and the behaviour of the trafﬁc in large buffers
cannot be approximated by a logarithmically linear behaviour
[12], [13], so the input trafﬁc process cannot estimate plp.
Following the gaussian model assumption for the input
trafﬁc, the effective bandwidth in this model [15] is given by:
eb(θ, t) = µ + θ
2tV arZ(t)
(1)
and
V arZ(t) = σ2t2H
(2)
where θ is the space parameter, t is the time parameter
which corresponds to the most probable duration of the buffer
congestion period prior to overﬂow, µ is deﬁned as the trafﬁc
mean, Z(t) is the stochastic process gaussian distributed with
a mean of zero, Var represents the second moment of Z(t), σ2
is the variance of the random variable, and H is the Hurst
parameter.
Based on the classical assumption for input trafﬁc, the H
parameter is set to 0.5 [7]. So the effective bandwidth can be
simpliﬁed into:
eb(θ, t) = µ + θ
2σ2
(3)
In [16], Chang has proven that plp can be calculated by the
following equation based on LDT:
ln(Ploss) = −θ∗b − ln(µθ∗)
(4)
where θ∗ is the solution for
lim
t→∞ eb(θ, t) = c
(5)
and c is the ﬁnite value (i.e., the bandwidth). By solving (3)
and (5) and replacing θ∗ in (4), Ploss can be obtained from:
ln(Ploss) = −2(c − µ)
σ2
− ln
2µ(c − µ)
σ2

(6)
In line with other similar studies [7], [8], we change the
base of the logarithm function from e to 10. Thus, (6) can be
replaced by:
log(Ploss) = −2(c − µ)
σ2
log(e) − log
2µ(c − µ)
σ2

(7)
Replacing µ and σ with their measurement value ¯µ(k) and
¯σ(k) changes (7) to the following equation:
log(Ploss) = −2(c − ¯µ(k))
¯σ2(k)
log(e)
−log
2¯µ(k)(c − ¯µ(k))
¯σ2(k)

(8)
where ¯µ(k) and ¯σ(k) are deﬁned as:
¯µ(k) = 1
N
N−1
X
i=0
¯α(k − i)
(9)
and
¯σ2(k) =
1
N − 1
N−1
X
i=0
[¯α(k − i) − ¯µ(k)]2
(10)
where ¯α(k) is the measured input packet rate in the kth time
interval and N is the number of time intervals for calculating
the average of the mean and variance of the packet rate.
In the rest of the paper let epl(k) denote the log(Ploss),
which is estimated by the formulas above, and plp(k) denotes
the logarithm of real packet loss probability during the time
slot [k, k + 1) which can be expressed by:
plp(k) = log
 l(k)
α(k)

(11)
where l(k) is the number of lost packets during the time slot
[k, k+1) and α(k) is the number of packets that arrive during
the time slot [k, k + 1).
Some estimation errors are expected due to the assumption
made for the stochastic trafﬁc process and the simpliﬁcations
and approximations employed in (8). Zhang et al. introduce
in [8] a Reactive Estimator (re) which is constructed as:
re(k) = epl(k) + 1
n
n
X
l=1
[plp(k − l) − re(k − l)]
(12)
where epl(k) and plp(k) are calculated via (8) and (11),
respectively. This estimator uses the measured {plp(k−l), l =
1, 2, ..., n} data for reducing the error between re and plp.
A careful examination of (12) reveals that the error will be
decreased to the amount of difference between re and plp,
whereas the error is really the difference between epl and plp.
We therefore present a new, improved estimator, cre, deﬁned
as:
cre(k) = epl(k)
+ 1
n
n
X
l=1
[plp(k − l − m) − epl(k − l − m)]
(13)
45
ICNS 2011 : The Seventh International Conference on Networking and Services
Copyright (c) IARIA, 2011.     ISBN: 978-1-61208-133-5

where m is the number of interval periods after which the data
of plp is available from (11).
With this new estimator, the required time for measuring
and calculating the plp is represented by m in (13), where the
mean of errors between epl and plp during a moving window
(i.e., n time intervals) in the past (i.e., m time intervals ago) is
added to epl to estimate the new plp. Therefore, the duration of
time interval is independent from measurement and calculation
speed of plp, whereas in former estimator (re) the minimum
duration of time interval was equal or greater than the required
time for measuring and calculating plp (it is assumed in (12)
that the measured plp is available after one interval time). In
other words, m in (13) makes the new estimator ﬂexible about
duration of measuring time interval.
To investigate the accuracy and applicability of the re and
epl estimators and to compare their performance with that of
our proposed estimator, cre, we propose to conduct simula-
tions. In these simulations, the effects of different conﬁgura-
tions of network trafﬁc and packet loss ratio on estimators’
performance are examined, which will be discussed in detail
in Sections III and IV.
III. SIMULATION TESTBED
The NS-2 software [17] is used to simulate the network.
The network topology which is simulated is shown in Fig. 2.
Fig. 2.
Testbed topology.
An MPEG2 trafﬁc ﬂow is generated by node 1 and the
RTP protocol is deployed for transferring video data to node
4. Node 2 generates the voice trafﬁc ﬂow which is coded by
G.729. This data is transferred to node 5. Node 3 and node 6
are designed to generate the common Internet trafﬁc ﬂow for
background trafﬁc and make the aggregated trafﬁc situation
closer to the gaussian distributed trafﬁc for stochastic input
trafﬁc process. The Tmix module in NS-2 is utilized in node 3
and 6 in order to generate realistic Internet network trafﬁc [18].
The protocol deployed for communications between nodes 3
and 6 is TCP. Since the background trafﬁc is TCP-based trafﬁc,
congestion (i.e., buffer overﬂow and loss) affects trafﬁc ﬂows,
which leads to a situation similar to that of a real Internet
network trafﬁc. Nodes 7 and 8 generate the on-off trafﬁc to
randomly increase the packet loss probability. Measurement
of the input and output trafﬁcs is performed at node 9. Since
the focus is on node 9, the bandwidth of all links except link
A is set to 100 Mbps and the buffer size of all nodes except
node 9 is set to 500 packets. We vary the size of the buffer
of node 9 from 5 packets to 100 packets to examine different
router conﬁgurations. The bandwidth of link A, to generate
different amounts of packet loss, varies between 8 Mbps to
10 Mbps. With these settings loss takes place only in node 9.
When the bandwidth of link A is set to 10 Mbps and nodes 7
and 8 do not generate any trafﬁc, the packet loss probability
will be about 0.1 percent and when the bandwidth is decreased
to 8 Mbps, the packet loss probability in node 9 increases to
about 1 percent which is closer to the amount where effect of
loss on media communication quality becomes considerable.
By turning on the trafﬁc of nodes 7 and 8 at some short
periods of time, the packet loss probability reaches 7 percent
which is an unacceptable amount of loss packet ratio for media
communications. In the next section the numerical values of
the different estimators in these situations will be examined.
Fig. 3.
Measurement and estimation of packet loss probability when plp is
about -3.
Fig. 4.
Measurement and estimation of packet loss probability when plp is
about -2.
IV. NUMERICAL RESULTS ANALYSIS
First, all the mentioned estimators (i.e., epl, re, and cre)
are evaluated in a situation where the bandwidth of link A is
10 Mbps and there is no trafﬁc coming from nodes 7 and 8.
46
ICNS 2011 : The Seventh International Conference on Networking and Services
Copyright (c) IARIA, 2011.     ISBN: 978-1-61208-133-5

(a) PDF of error for different m when buffer size is 5.
(b) PDF of error for different m when buffer size is 20.
(c) PDF of error for different m when buffer size is 100.
(d) PDF of error for different estimators when buffer size is 5
and m=10.
Fig. 5.
The comparison of PDF of error for different conditions.
As shown in Fig. 3, the measured plp is around -3 (packet
loss probability ≃ 10−3). The accuracy of proposed estimator
(cre) to estimate the plp compared to other estimators is
demonstrated in this ﬁgure. With this amount of loss, although
there is an offset between the plp, re, and epl, but re
and epl follow the variations of plp and it can be seen as
some soundness of the use of re and epl as the packet
loss probability estimator but with a considerable error. In
all experiences the time interval is 20 ms. In Fig. 3 cre is
calculated according to (13) where m is 50. It means cre uses
plp data measured one second before.
Since 10−3 can be negligible for loss packet ratio in
media communication, we change the network conditions to
increase the loss ratio and then re–evaluate the accuracy of
estimators. To achieve this situation, the bandwidth of the link
A is decreased to 8 Mbps. Fig. 4 shows the results of this
experience: during the time periods of [15, 25] and [40, 41],
nodes 7 and 8 add network trafﬁc and bring the loss ratio
close to 7 percent (log(plp) = −1.5). As Fig. 4 shows, the
effect of simpliﬁcation and approximation in (7) and (12) on
the operation of epl and re methods for the bigger loss ratio
is more apparent.
As mentioned before, buffer size affects the plp and the
accuracy of estimators [12], [13]. The bigger the buffer size,
the lesser plp and the accuracy of estimation. The effect
of buffer size on estimation methods, re and epl, has been
examined in [7] and [19] respectively. Beside the size of buffer,
m, in (13), also affects the accuracy of cre estimation and
it is determined by the speed of measuring and processing
packet loss. We deﬁne the error as the difference between
estimated and measured plp, and study this parameter in
different conﬁgurations to shows the effect of the network
situation on estimation accuracy. Fig. 5 shows the probability
density function of error when buffer size is 5, 20, and 100
packet and m is 10, 25, and 50 (m = 50 means using a
plp measured 1 s before), and the effect of the buffer size on
estimation. Considering the effect of buffer size on estimation
derived from (8), it appears that the accuracy of estimation
(cre) will improve if the role of the measured plp is increased.
Therefore, (13) is changed to:
cre(k) = p × epl(k)
+ 1
n
n
X
l=1
[plp(k − l − m) − p × epl(k − l − m)] (14)
where p is the proportional coefﬁcient and is less than 1.
To increase the importance of the second term in (13), n is
increased from 3, which is recommended in [8], to 10 and to
decrease the effect of ﬁrst part, p is set to 2
3. For an smaller
47
ICNS 2011 : The Seventh International Conference on Networking and Services
Copyright (c) IARIA, 2011.     ISBN: 978-1-61208-133-5

Fig. 6.
PDF of error for estimator which uses (14) when buffer size is 100.
p, when a considerable variation happens to plp (e.g., at 40 s
in Fig. 4), the estimator (cre) cannot follow the plp properly
and the error will be signiﬁcant.
Fig. 6 shows the error when buffer size is 100 and (14)
is used for estimation. Comparing Fig. 6 and Fig. 5c, the
effectiveness of the changes in estimation is clear.
To conclude, the advantages of proposed estimator com-
pared to other estimators are: 1) increasing the accuracy of
estimation by using the measured parameters properly, 2)
being ﬂexible about duration of measuring time interval, and
3) estimating the plp reasonably accurately in case of large
buffer.
V. CONCLUSION
One of the most important issues in multimedia quality of
experience is packet loss, which has an especially critical role
in interactive communications. Accurate online network-based
measurements of loss are necessary to give Service Providers
the means to estimate the quality received by a user and to
give them an opportunity to take remedial action to satisfy the
contractual SLA. Increased use of multimedia communications
in the Internet has led to a renewed interest in the measure
and estimation of loss, in the form of the plp, in modern
communication networks. More speciﬁcally, recent studies
have focused on estimation of the plp by measurement of input
trafﬁc based on LDT and the large buffer asymptote. In this
paper, we have reviewed the theory behind plp estimation. By
changing the way we use the measurement of output trafﬁc
of the node in which loss happens, we have introduced a
new formula which signiﬁcantly improves the quality of the
estimate. To study the accuracy of the estimates, we have used
the NS-2 simulator and real input trafﬁc at the measurement
node. Overall, the simulation results demonstrate the effect of
different conﬁgurations, such as buffer size, on the estimates.
The analysis of the results shows the improvement of accuracy
in plp estimation achieved by our new calculation method.
For future research, we plan to investigate how it can be
possible to estimate the end user’s perception, aka the Quality
of Experience (QoE). Along this line of research, we plan to
study the methods of estimation of other network parameters
(e.g., delay and jitter) to utilize them as the input of QoE
measurement.
REFERENCES
[1] D. McDysan, QoS & Trafﬁc Management in IP & ATM Networks,
McGraw-Hill, 2000.
[2] W. C. Hardy, VoIP Service Quality: Measuring and Evaluation Packet-
Switched Voice, McGraw-Hill, 2003.
[3] B. Oklander and M. Sidi, “Jitter buffer analysis”, Proc. of 17th IEEE
International Conference on Computer Communications and Networks,
pp. 1–6, August 2008.
[4] H. Hata, “Playout buffering algorithm using of random walk in VoIP”,
Proc. of IEEE International Symposium on Communications and Infor-
mation Technology, pp. 457–460, October 2004.
[5] S. Tao and R. Guerin, “On-line estimation of internet path performance:
an application perspective”, Proc. of 23rd IEEE Conference on Computer
Communications, Vol. 3, pp. 1774–1785, March 2004.
[6] R. Serral-Gracia, A. Cabellos-Aparicio, and J. Domingo-Pascual, “Packet
loss estimation using distributed adaptive sampling”, Proc. of IEEE
Workshop on End-to-End Monitoring Techniques and Services, pp. 124–
131, April 2008.
[7] D. Zhang and D. Ionescu, “A new method for measuring packet loss
probability using a Kalman ﬁlter”, IEEE Transaction on Instrumentation
and Measurement, Vol. 58, No. 2, pp. 488–499, February 2009.
[8] D. Zhang and D. Ionescu, “Reactive estimation of packet loss probability
for IP-based video services”, IEEE Transaction on Broadcasting, Vol. 55,
No. 2, pp. 375–385, June 2009.
[9] R. van de Meent and M. Mandjes, “Evaluation of user-oriented and
black-box trafﬁc models for link provisioning”, Proc. of the 1st EuroNGI
Conference on Next Generation Internet Networks Trafﬁc, pp. 380–387,
April 2005.
[10] J. Kilpi and I. Norros, “Testing the Gaussian approximation of aggre-
gate trafﬁc”, Proc. of the 2nd ACM SIGCOMM Workshop on Internet
Measurement, pp. 49–61, November 2002.
[11] S. Tao, K. Xu, A. Estepa, T.F.L. Gao, R. Guerin, J. Kurose, D. Towsley,
and Z.L. Zhang, “Improving VoIP quality through path switching”, Proc.
of 24th IEEE Conference on Computer Communications, Vol. 4, pp.
2268–2278, March 2005.
[12] D. P. Heyman and T. V. Lakshman, “What are the implications of
long-range dependence for VBR-video trafﬁc engineering?”, IEEE/ACM
Transactions on Networking, Vol. 4, No. 3, pp. 301–317, June 1996.
[13] B. K. Ryu and A. Elwalid, “The importance of long-range dependence
of VBR video trafﬁc in ATM trafﬁc engineering: myths and realities”,
Proc. of ACM SIGCOMM Conference on Applications, Technologies,
Architectures, and Protocols for Computer Communications, pp. 3–14,
August 1996.
[14] C. Lambiri, D. Ionescu, and V. Groza, “A new method for the estimation
and measurement of trafﬁc packet loss for virtual private networks
services”, Proc. of the 21st IEEE Conference on Instrumentation and
Measurement Technology, Vol. 1, pp. 401–406, May 2004.
[15] F. Kelly, Notes on effective bandwidths, in Stochastic Networks: Theory
and Applications, Oxford University Press, pp. 141–168, 1996.
[16] C. Chang, Performance Guarantees In Communication Networks, New
York: Springer-Verlag, 2000.
[17] UC Berkeley, LBL, USC/ISI, and Xerox PARC, Network Simulator NS-
2, http://www.isi.edu/nsnam/ns, [Accessed: 6 May 2011].
[18] M.C. Weigle, P. Adurthi, F. Hernandez-Campos, K. Jeffay, and F.D.
Smith, “Tmix: A tool for generating realistic application workloads in
NS-2”, ACM SIGCOMM Computer Communication Review, Vol 36, No
3, pp. 67–76, July 2006.
[19] D. Zhang and D. Ionescu, “On packet loss estimation for virtual
private networks services”, Proc. of 13th IEEE Conference on Computer
Communications and Networks, pp. 175–180, October 2004.
48
ICNS 2011 : The Seventh International Conference on Networking and Services
Copyright (c) IARIA, 2011.     ISBN: 978-1-61208-133-5

