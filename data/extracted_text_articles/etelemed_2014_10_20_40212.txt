Lifestyle Log Based Blood Glucose Level Prediction for Outpatient Care 
Istvan SZABO1, Peter GYUK2, Istvan VASSANYI3 
Medical Informatics R&D Center  
University of Pannonia 
VeszprÃ©m, Hungary 
e-mail: 1sz.pisti1@gmail.com, 2gyukpeti@gmail.com, 3vassanyi@almos.vein.hu 
 
Abstractâ€”Treatment of diabetes mellitus is a crucial problem 
in modern health care. Surveys show that the currently used 
methods to estimate the required amount of insulin are quite 
inefficient in practice as they are based on experience and 
conjecture. This paper offers a new method to predict the 
glucose level of people with diabetes. The proposed approach 
combines two efficient models found in literature. The mixture 
of the methods tracks the blood sugar level considering 
nutrition, applied insulin and initial glucose level. According to 
our tests, the model gives satisfactory results with real patients 
both in inpatient and outpatient care.  
Keywordsâ€”Glucose-level tracking; eHealth; Glucose-Insulin 
system; Glucose absorption; Diabetes mellitus 
I. 
 INTRODUCTION 
Diabetes mellitus is a metabolic disease that affects the 
whole society. It is a typical disease of the modern culture 
caused by obesity, the lack of physical activity and the 
changing of culinary culture. At the moment, this problem 
hits 3% of the population [1], but this number is increasing. 
The current predictions report that the number of people with 
diabetes can reach 5% within 2 decades [1]. This underlines 
the importance of diabetic lifestyle support. 
The official classification separates diabetes mellitus into 
different types, according to clinical age [2]: 
ï‚· 
Type 1 diabetes results from the lack of insulin 
production. The failure of insulin output is caused by 
an autoimmune destruction of beta-cells in the 
pancreas, which usually leads to absolute insulin 
deficiency. Patients diagnosed with Type 1 diabetes 
have to follow a strict diet and apply subcutaneous 
insulin by injection or insulin pump. 
ï‚· 
Type 2 is the major form of diabetes as it accounts 
for 90% to 95% of all diagnosed patients (in the 
USA [3]). It is an insulin resistant stage caused by 
failure in insulin secretion. The treatment of these 
patients varies from lifestyle changing through diet 
and oral medications to subcutaneous insulin 
necessity. 
ï‚· 
The third category contains special types, including 
gestational diabetes and other types caused by 
medications, infections, or other illnesses. 
The remainder of the paper is structured as follows: 
Section II presents some related works and summarizes the 
prospects of this field. Section III contains the description of 
the proposed glucose level prediction system. Section IV 
includes the result of several tests with the model. Section V 
contains the discussion of the results. Finally, Section VI 
concludes the paper and outlines future work. 
II. 
MOTIVATIONS AND LITERATURE OVERVIEW 
The basic motivation of our efforts is to provide diabetics 
with a tool that they can use in everyday life to predict their 
blood glucose level. We focus on outpatients treated with 
insulin injection no matter having type 1, type 2 or other 
types of diabetes. These patients inject themselves with 
insulin considering meal, physical activity, sports and also 
the weather change. The main index to verify the patients' 
state is HbA1c (Glycated hemoglobin). According to the 
recent surveys, these values are far from ideal in the case of 
several patients [4]. The gap does not seem big, but it can 
lead to serious complications; moreover a big variation of 
glucose levels endangers the life of a person with diabetes.  
The whole metabolism can be divided into two parts, as 
Figure 1 shows. The first one is glucose absorption from 
meals and the second one is the glucose controlling system 
including insulin evolution.  
From the aspect of glucose uptake, the absorption from 
intestine is the main factor, but the stomach has a significant 
role in the procedure as well. In connection with glucose 
control, there are many factors to take into account such as 
glucose uptake, inner insulin production, insulin input, etc. 
These factors are discussed later in this paper.  
 
 
Figure 1.  The process of metabolism 
 
 
205
Copyright (c) IARIA, 2014.     ISBN:  978-1-61208-327-8
eTELEMED 2014 : The Sixth International Conference on eHealth, Telemedicine, and Social Medicine

TABLE I.  
THE PARAMETERS OF THE MODEL OF GLUCOSE 
ABSORPTION 
 
TABLE II.  
THE PARAMETERS OF THE GLUCOSE CONTROL MODEL 
 
Our model uses a combination of two existing models for 
nutriment absorption and glucose control. 
There are methods for measuring glucose absorption [5] 
from meals such as the Diabetes Advisory System - DIAS 
[6]. Lots of models build upon this system though its base is 
only a simple one-compartment model.  In order to create a 
more precise algorithm, other methods use glycemic indices 
(GI) [7] allowing mixed meals input such as the two-
compartment model from Arleth et al. [8]. These methods 
provide a simulation closer to reality. 
Beside glucose absorption, the evolution of insulin is the 
other main factor in tracking glycemia. There are even more 
methods in this field [9] starting with the so called minimal 
model which is still used in practice since it is a relatively 
simple method based on ordinary differential equations [10]. 
Several methods are the approximations of this model, e.g., 
[11]. The minimal model has low number of parameters, 
hence a limited predictive power. This problem is solved in 
more sophisticated methods, using differential equations. 
These approaches might use integro-differential equations 
[12], partial differential equations [13] or delay differential 
equations [14]. Such solutions as the latter support 
Glucose control model 
Variables 
ğº(ğ‘¡) 
Plasma glycemia. [mM = mmol/l] 
ğ¼(ğ‘¡) 
Insulinemia. [pM = pmol/l] 
ğ‘†1(ğ‘¡) 
The 
insulin 
mass 
in 
the 
accessible 
 
subcutaneous depot. [pmol/ğ‘˜ğ‘”ğµğ‘Š] 
ğ‘†2(ğ‘¡) 
The insulin mass in the non-accessible 
 
subcutaneous depot. [pmol/ğ‘˜ğ‘”ğµğ‘Š] 
ğ‘“(ğº) 
Pancreas Insulin Delivery Rate. 
Parameters 
ğ¾ğ‘¥ğ‘”ğ‘–  
Rate of glucose uptake by insulin-dependent 
 
tissues per pM. [1/(min âˆ— pM)] 
ğ‘‡ğ‘”ğ‘• 
Net balance between hepatic glucose output 
and insulin-independent zero-order glucose 
uptake (by brain). [mmol/(min âˆ— ğ‘˜ğ‘”ğµğ‘Š)] 
ğ‘‰ğº 
Distribution volume for glucose. [L/ğ‘˜ğ‘”ğµğ‘Š] 
ğ¾ğ‘¥ğ‘– 
Apparent first-order disappearance rate for 
insulin. [1/min] 
ğ‘‡ğ‘–ğºğ‘šğ‘ğ‘¥  
The maximal rate of second-phase insulin 
 
release. [pmol/(min âˆ— ğ‘˜ğ‘”ğµğ‘Š)] 
ğ‘‰ğ‘– 
Distribution volume for insulin. [L/ğ‘˜ğ‘”ğµğ‘Š] 
ğœğ‘” 
The delay with which the pancreas varies 
 
secondary insulin release in response to 
 
varying plasma glucose concentrations. [min] 
ğ‘¡ğ‘šğ‘ğ‘¥ ,ğ¼ 
Time-to-maximum insulin absorption. [min] 
ğ‘¢(ğ‘¡) 
Subcutaneous insulin delivery rate. [pM/min] 
ğ‘˜ğ‘”ğµğ‘Š 
The weight of the patient. [kg] 
ğºâˆ— 
The glycemia at which the insulin release is 
half of its maximal rate. [mM] 
ğ›¾ 
The progressivity with which the pancreas 
reacts to circulating glucose concentrations. 
 
 
 
 
Model of glucose absorption 
Prefixes 
âˆ† 
The actual time interval (âˆ†ğ‘¡ = ğ‘¡ğ‘–+1 âˆ’ ğ‘¡ğ‘–). 
ğ‘š 
The component is added by meal. 
ğ‘  
The component is in the stomach. 
ğ‘’ 
The component is ejected from the 
 
stomach into the intestine. 
ğ‘– 
The component is in the intestine. 
ğ‘“ 
The component leaves the intestine as 
 
faeces. 
ğ‘ 
The component is absorbed through the 
 
intestinal wall. 
Variables 
ğ‘ƒğ‘Ÿğ‘œğ‘¡(ğ‘¡ğ‘–) 
The amount of proteins at time step ğ‘¡ğ‘–. 
ğ¿ğ‘–ğ‘(ğ‘¡ğ‘–) 
The amount of lipids at time step ğ‘¡ğ‘–. 
ğ¹ğ‘–ğ‘ğ‘Ÿ(ğ‘¡ğ‘–) 
The amount of fibres at time step ğ‘¡ğ‘–. 
ğ‘€ğ‘œğ‘›ğ‘œğ‘ ğ‘ğ‘(ğ‘¡ğ‘–) The amount of monosaccharides at time 
 
step ğ‘¡ğ‘–. 
ğ‘†ğ‘¡ğ‘ğ‘Ÿğ‘ğ‘•ğºğ¼(ğ‘¡ğ‘–) 
The amount of starch with the given GI 
 
at time step ğ‘¡ğ‘–. 
ğ‘€ğ‘ğ‘ ğ‘ (ğ‘¡ğ‘–) 
The amount of nutriment at time step ğ‘¡ğ‘–. 
ğ‘Šğ‘ğ‘¡ğ‘’ğ‘Ÿ(ğ‘¡ğ‘–) 
The amount of water at time step ğ‘¡ğ‘–. 
ğºğ¸ğ‘… 
Gastric emptying rate. [kJ/min] 
ğ‘ ğ‘‰ğ‘œğ‘™ 
Stomach volume. [ml] 
ğœğ‘¤ğ‘ğ‘™ğ‘™  
 Average time before the food obtains 
contact with the intestinal wall. [min] 
ğœğºğ¼ 
The time of the starch breakdown 
process with glycemic index GI. [min] 
Parameters 
ğµğ‘€ 
The body mass in kg. 
ğºğ¼ 
The glycemic index of the food. 
Constants 
ğ¶ğ»ğ‘‚ğ‘ğ‘£ğ‘ğ‘–ğ‘™ 
Bioavailability. The optimized value is 
0.76. 
ğ‘ ğ‘‰ğ‘œğ‘™0 
Exponential 
constant 
for 
stomach 
emptying. The value is 225 ml. 
ğ‘†ğ¸ğ‘… 
 The 
specific 
emptying 
rate. 
The 
optimized value is 0.161. 
ğ¼ğ´ğ‘… 
Maximal intestinal absorption rate, the 
 
estimated value is 2.0 g/min. 
ğ¸ğ‘›ğ‘’ğ‘Ÿğ‘”ğ‘¦ğ·ğ‘’ğ‘›ğ‘ ğ‘—  The energy density is 17kJ/g for 
 proteins, starch and monosaccharide, 
0kJ/g for fibres and 39 kJ/g for lipids. 
ğœğ‘“ğ‘–ğ‘ğ‘Ÿ  
Exponential time constant for excretion 
 
set to 180 min. 
ğœğ‘¤ğ‘ğ‘™ğ‘™ 0 
Set to 1000 min. 
ğœ100  
Time constant for starch breakdown with 
 
GI 100. The optimized value is 28.0 min. 
ğ›¼ 
Parameter relating ğœğºğ¼  to the glycemic 
 
index. The optimized value is 0.0125. 
 
206
Copyright (c) IARIA, 2014.     ISBN:  978-1-61208-327-8
eTELEMED 2014 : The Sixth International Conference on eHealth, Telemedicine, and Social Medicine

subcutaneous insulin depot, create better representation of 
the Insulin Delivery Rate (IDR), etc. 
 
Figure 2.  The process of absorption from mixed meals 
III. 
THE PROPOSED METHOD 
As mentioned before, our method combines two existing, 
state-of-the-art models to simulate plasma glycemia by 
influences of meals and insulin uptake. We chose these 
models because they have a realistic, comprehensive set of 
parameters capable of simulating a real-life outpatient as 
well. 
A. Glucose Absorption From Meals 
A two-compartment method [8, 15] is used to model the 
effect of nutrition on blood glucose level. The model 
proposed by Arleth T. et al. divides the digestion into two 
segments, as seen in Figure 2. The food first arrives to the 
stomach compartment followed by emptying into the small 
intestine and later into the large intestine. The absorption of 
the monosaccharide happens in the intestinal part; the 
remaining mass is ejected as faeces. 
Simpler methods, like DIAS, operate with carbohydrate 
as input and take some components (e.g., lipids, proteins, 
starch) out of consideration. In contrast, our model takes 
protein, lipid, monosaccharide, fibre and starch as input, each 
one having its own effect during the absorption. In addition, 
the method can deal with mixed meals by using GI. 
Moreover, digestion overlap is handled properly as well. 
The whole process is based on mass balance equations 
[15]. The equations for the stomach compartment are as 
follows: 
ğ‘ ğ‘ƒğ‘Ÿğ‘œğ‘¡ ğ‘¡ğ‘–+1 = ğ‘ ğ‘ƒğ‘Ÿğ‘œğ‘¡ ğ‘¡ğ‘– + âˆ†ğ‘šğ‘ƒğ‘Ÿğ‘œğ‘¡ ğ‘¡ğ‘– âˆ’ âˆ†ğ‘’ğ‘ƒğ‘Ÿğ‘œğ‘¡ ğ‘¡ğ‘–  
(1) 
ğ‘ ğ¿ğ‘–ğ‘ ğ‘¡ğ‘–+1 = ğ‘ ğ¿ğ‘–ğ‘ ğ‘¡ğ‘– + âˆ†ğ‘šğ¿ğ‘–ğ‘ ğ‘¡ğ‘– âˆ’ âˆ†ğ‘’ğ¿ğ‘–ğ‘ ğ‘¡ğ‘–  
(2) 
ğ‘ ğ¹ğ‘–ğ‘ğ‘Ÿ ğ‘¡ğ‘–+1 = ğ‘ ğ¹ğ‘–ğ‘ğ‘Ÿ ğ‘¡ğ‘– + âˆ†ğ‘šğ¹ğ‘–ğ‘ğ‘Ÿ ğ‘¡ğ‘– âˆ’ âˆ†ğ‘’ğ¹ğ‘–ğ‘ğ‘Ÿ ğ‘¡ğ‘–  
(3) 
ğ‘ ğ‘€ğ‘œğ‘›ğ‘œğ‘ ğ‘ğ‘ ğ‘¡ğ‘–+1 = ğ‘ ğ‘€ğ‘œğ‘›ğ‘œğ‘ ğ‘ğ‘ ğ‘¡ğ‘– + âˆ†ğ‘šğ‘€ğ‘œğ‘›ğ‘œğ‘ ğ‘ğ‘ ğ‘¡ğ‘– 
âˆ— ğ¶ğ»ğ‘‚ğ‘ğ‘£ğ‘ğ‘–ğ‘™ âˆ’ âˆ†ğ‘’ğ‘€ğ‘œğ‘›ğ‘œğ‘ ğ‘ğ‘ ğ‘¡ğ‘– 
+  âˆ†ğ‘ ğ‘†ğ‘¡ğ‘ğ‘Ÿğ‘ğ‘•ğºğ¼ ğ‘¡ğ‘– 
ğºğ¼
 
(4) 
ğ‘ ğ‘†ğ‘¡ğ‘ğ‘Ÿğ‘ğ‘•ğºğ¼ ğ‘¡ğ‘–+1 = ğ‘ ğ‘†ğ‘¡ğ‘ğ‘Ÿğ‘ğ‘•ğºğ¼ ğ‘¡ğ‘– + âˆ†ğ‘šğ‘†ğ‘¡ğ‘ğ‘Ÿğ‘ğ‘•ğºğ¼ ğ‘¡ğ‘– 
âˆ— ğ¶ğ»ğ‘‚ğ‘ğ‘£ğ‘ğ‘–ğ‘™ âˆ’ âˆ†ğ‘’ğ‘†ğ‘¡ğ‘ğ‘Ÿğ‘ğ‘•ğºğ¼ ğ‘¡ğ‘– 
âˆ’ âˆ†ğ‘ ğ‘†ğ‘¡ğ‘ğ‘Ÿğ‘ğ‘•ğºğ¼ ğ‘¡ğ‘–  
(5) 
The rate of ejection from stomach to intestine is 
measured by the gastric emptying rate (GER) [15]:  
ğºğ¸ğ‘… = ğ‘†ğ¸ğ‘… âˆ— ğµğ‘€ âˆ—  
ğµğ‘€
70  
0,425
âˆ— (1 âˆ’ ğ‘’ğ‘ ğ‘‰ğ‘œğ‘™ /ğ‘ ğ‘‰ğ‘œğ‘™0)   
(6) 
ğ‘ ğ‘‰ğ‘œğ‘™ =  ğ‘ ğ‘ƒğ‘Ÿğ‘œğ‘¡ + ğ‘ ğ¿ğ‘–ğ‘ + ğ‘ ğ¹ğ‘–ğ‘ğ‘Ÿ +  ğ‘ ğ‘†ğ‘¡ğ‘ğ‘Ÿğ‘ğ‘•ğºğ¼
ğºğ¼
 âˆ— 3
+ ğ‘ ğ‘€ğ‘œğ‘›ğ‘œğ‘ ğ‘ğ‘ âˆ— 18 
(7) 
The ejection from stomach to intestine is calculated 
considering the energy of the food components (ğ¸ğ‘›ğ‘’ğ‘Ÿğ‘”ğ‘¦ğ‘— ) 
using GER. The following equations [15] determine the 
actual ejections for each state variable (ğ‘†ğ‘¡ğ‘ğ‘¡ğ‘’ğ‘‰ğ‘ğ‘Ÿğ‘–): 
âˆ†ğ‘’ğ‘†ğ‘¡ğ‘ğ‘¡ğ‘’ğ‘‰ğ‘ğ‘Ÿğ‘– = âˆ†ğ‘¡ âˆ— ğ‘ ğ‘†ğ‘¡ğ‘ğ‘¡ğ‘’ğ‘‰ğ‘ğ‘Ÿğ‘– âˆ—
ğºğ¸ğ‘…
ğ‘ ğ‘‡ğ‘œğ‘¡ğ‘ğ‘™ğ¸ğ‘›ğ‘’ğ‘Ÿğ‘”ğ‘¦    
(8) 
ğ‘ ğ‘‡ğ‘œğ‘¡ğ‘ğ‘™ğ¸ğ‘›ğ‘’ğ‘Ÿğ‘”ğ‘¦ =  ğ‘ ğ¸ğ‘›ğ‘’ğ‘Ÿğ‘”ğ‘¦ğ‘—
ğ‘—
 
(9) 
ğ‘ ğ¸ğ‘›ğ‘’ğ‘Ÿğ‘”ğ‘¦ğ‘— = ğ‘ ğ‘†ğ‘¡ğ‘ğ‘¡ğ‘’ğ‘‰ğ‘ğ‘Ÿğ‘— âˆ— ğ¸ğ‘›ğ‘’ğ‘Ÿğ‘”ğ‘¦ğ·ğ‘’ğ‘›ğ‘ ğ‘—  
(10) 
The next compartment is the intestine, where proteins 
and lipids do not play a role anymore. The absorption of 
monosaccharides (15) happens here. 
ğ‘–ğ¹ğ‘–ğ‘ğ‘Ÿ ğ‘¡ğ‘–+1 = ğ‘–ğ¹ğ‘–ğ‘ğ‘Ÿ ğ‘¡ğ‘– + âˆ†ğ‘’ğ¹ğ‘–ğ‘ğ‘Ÿ ğ‘¡ğ‘– âˆ’ âˆ†ğ‘“ğ¹ğ‘–ğ‘ğ‘Ÿ ğ‘¡ğ‘–  
(11) 
âˆ†ğ‘“ğ¹ğ‘–ğ‘ğ‘Ÿ ğ‘¡ğ‘– = ğ‘–ğ¹ğ‘–ğ‘ğ‘Ÿ ğ‘¡ğ‘– âˆ— (1 âˆ’ ğ‘’âˆ’âˆ†ğ‘¡/ğœğ‘“ğ‘–ğ‘ğ‘Ÿ ) 
(12) 
ğ‘–ğ‘€ğ‘œğ‘›ğ‘œğ‘ ğ‘ğ‘ ğ‘¡ğ‘–+1 = ğ‘–ğ‘€ğ‘œğ‘›ğ‘œğ‘ ğ‘ğ‘ ğ‘¡ğ‘– + âˆ†ğ‘’ğ‘€ğ‘œğ‘›ğ‘œğ‘ ğ‘ğ‘ ğ‘¡ğ‘– 
âˆ’ âˆ†ğ‘ğ‘€ğ‘œğ‘›ğ‘œğ‘ ğ‘ğ‘ ğ‘¡ğ‘– 
+  âˆ†ğ‘–ğ‘†ğ‘¡ğ‘ğ‘Ÿğ‘ğ‘•ğºğ¼ ğ‘¡ğ‘– 
ğºğ¼
 
(13) 
ğ‘–ğ‘†ğ‘¡ğ‘ğ‘Ÿğ‘ğ‘•ğºğ¼ ğ‘¡ğ‘–+1 = ğ‘–ğ‘†ğ‘¡ğ‘ğ‘Ÿğ‘ğ‘•ğºğ¼ ğ‘¡ğ‘– + âˆ†ğ‘’ğ‘†ğ‘¡ğ‘ğ‘Ÿğ‘ğ‘•ğºğ¼ ğ‘¡ğ‘– 
âˆ’ âˆ†ğ‘–ğ‘†ğ‘¡ğ‘ğ‘Ÿğ‘ğ‘•ğºğ¼ ğ‘¡ğ‘–  
(14) 
âˆ†ğ‘ğ‘€ğ‘œğ‘›ğ‘œğ‘ ğ‘ğ‘ ğ‘¡ğ‘– = min  ğ‘–ğ‘€ğ‘œğ‘›ğ‘œğ‘ ğ‘ğ‘ ğ‘¡ğ‘– 
âˆ—  1 âˆ’ ğ‘’
âˆ’ âˆ†ğ‘¡
ğœğ‘¤ğ‘ğ‘™ğ‘™  ,  ğ¼ğ´ğ‘… âˆ— âˆ†ğ‘¡   
(15) 
ğœğ‘¤ğ‘ğ‘™ğ‘™ = ğœğ‘¤ğ‘ğ‘™ğ‘™ 0 âˆ— ğ‘–ğ¹ğ‘–ğ‘ğ‘Ÿ/ğ‘–ğ‘€ğ‘ğ‘ ğ‘  
(16) 
ğ‘–ğ‘€ğ‘ğ‘ ğ‘  ğ‘¡ğ‘– = ğ‘–ğ‘€ğ‘œğ‘›ğ‘œğ‘ ğ‘ğ‘ ğ‘¡ğ‘– +  âˆ†ğ‘–ğ‘†ğ‘¡ğ‘ğ‘Ÿğ‘ğ‘•ğºğ¼ ğ‘¡ğ‘– 
ğºğ¼
+ ğ‘–ğ‘Šğ‘ğ‘¡ğ‘’ğ‘Ÿ ğ‘¡ğ‘– + ğ‘–ğ¹ğ‘–ğ‘ğ‘Ÿ 
(17) 
ğ‘–ğ‘Šğ‘ğ‘¡ğ‘’ğ‘Ÿ ğ‘¡ğ‘– = ğ‘–ğ‘€ğ‘œğ‘›ğ‘œğ‘ ğ‘ğ‘ ğ‘¡ğ‘– âˆ— 37 
(18) 
 
207
Copyright (c) IARIA, 2014.     ISBN:  978-1-61208-327-8
eTELEMED 2014 : The Sixth International Conference on eHealth, Telemedicine, and Social Medicine

The following equations [15] calculate the breakdown of 
starch into monosaccharides: 
âˆ†ğ‘ ğ‘†ğ‘¡ğ‘ğ‘Ÿğ‘ğ‘•ğºğ¼ ğ‘¡ğ‘– = ğ‘ ğ‘†ğ‘¡ğ‘ğ‘Ÿğ‘ğ‘•ğºğ¼ ğ‘¡ğ‘– âˆ— (1 âˆ’ ğ‘’âˆ’âˆ†ğ‘¡/ğœğºğ¼ ) 
(19) 
âˆ†ğ‘–ğ‘†ğ‘¡ğ‘ğ‘Ÿğ‘ğ‘•ğºğ¼ ğ‘¡ğ‘– = ğ‘–ğ‘†ğ‘¡ğ‘ğ‘Ÿğ‘ğ‘•ğºğ¼ ğ‘¡ğ‘– âˆ— (1 âˆ’ ğ‘’âˆ’âˆ†ğ‘¡/ğœğºğ¼ ) 
(20) 
ğœğºğ¼ = ğœ100 1 + ğ›¼ âˆ— (100 âˆ’ ğºğ¼)  
(21) 
The definition of the parameters is given in Table I. For 
further details of the model see [15]. 
B. Glucose Control System 
A sophisticated glucose control system model was 
chosen using Delay Differential Equations (DDE), proposed 
by P. Palumbo et al. [14, 16]. This model has several 
parameters to support both type 1 and type 2 diabetics (see 
Table II). It is also possible to use insulin pump or 
subcutaneous insulin injections as input. The method uses 
two subcutaneous depots (accessible and not-accessible) to 
simulate subcutaneous insulin absorption. The main 
equations [16] are: 
ğ‘‘ğº
ğ‘‘ğ‘¡ = âˆ’ğ¾ğ‘¥ğ‘”ğ‘– ğº ğ‘¡ ğ¼ ğ‘¡ + ğ‘‡ğºğ»
ğ‘‰ğº
 
(22) 
ğ‘‘ğ¼
ğ‘‘ğ‘¡ = âˆ’ğ¾ğ‘¥ğ‘–ğ¼ ğ‘¡ + ğ‘‡ğ‘–ğºğ‘šğ‘ğ‘¥
ğ‘‰ğ¼
ğ‘“ ğº ğ‘¡ âˆ’ ğœğº  +
1
ğ‘‰ğ¼ğ‘¡ğ‘šğ‘ğ‘¥ ,ğ¼
ğ‘†2(ğ‘¡) (23) 
ğ‘‘ğ‘†2
ğ‘‘ğ‘¡ =
1
ğ‘¡ğ‘šğ‘ğ‘¥ ,ğ¼
ğ‘†1(ğ‘¡) âˆ’
1
ğ‘¡ğ‘šğ‘ğ‘¥ ,ğ¼
ğ‘†2(ğ‘¡) 
(24) 
ğ‘‘ğ‘†ğ¼
ğ‘‘ğ‘¡ = âˆ’
1
ğ‘¡ğ‘šğ‘ğ‘¥ ,ğ¼
ğ‘†1(ğ‘¡) âˆ’ ğ‘¢(ğ‘¡) 
(25) 
The Insulin Delivery Rate (IDR) is modeled by the 
nonlinear ğ‘“(ğº) function [16]: 
ğ‘“(ğº) = âˆ’
 ğº
ğºâˆ— 
ğ›¾
1 +  ğº
ğºâˆ— 
ğ›¾ 
(26) 
IV. 
RESULTS 
We implemented the combined model in a prototype and 
checked the correctness of our implementation by comparing 
its results to those published for a virtual patient in the 
original paper [16]. The parameters of the model were taken 
from the literature [17], from an intravenous glucose 
tolerance test experiment on an obese patient, slightly 
changed to simulate Type 2 diabetes mellitus (see Table III).  
The results showed good correlation to those published. 
In the next step, we validated this model on outpatient 
data. Two persons with diabetes mellitus were examined. 
The first test involved a woman with Type 2 diabetes, while 
the second patient was a Type 1 diabetic man (see Table IV). 
Both patients are treated with subcutaneous insulin injection.  
TABLE III.  
THE PRAMETERS OF THE VIRTUAL PATIENT WITH TYPE 2 
DIABETES MELLITUS 
Parameter 
Value 
ğ¾ğ‘¥ğ‘”ğ‘–  
 
3.11*10-5 
ğ‘‡ğ‘”ğ‘• 
0.003 
ğ‘‰ğº 
0.187 
ğ¾ğ‘¥ğ‘– 
1.211*10-2 
ğ‘‰ğ‘– 
0.25 
ğ‘‡ğ‘–ğºğ‘šğ‘ğ‘¥  
0.236 
ğœğ‘” 
24 
ğ‘¡ğ‘šğ‘ğ‘¥ ,ğ¼ 
55 
ğºâˆ— 
9 
ğ›¾ 
3.205 
TABLE IV.  
THE PARAMETERS OF THE OUTPATIENTS WITH 
SUBCUTANEOUS INSULIN TREATMENT 
Patient A with Type 2 diabetes 
mellitus 
Patient B with Type 1 diabetes 
mellitus 
Birth date 
1952 
Birth date 
1993 
Gender 
female 
Gender 
male 
Height 
156 cm 
Height 
196 cm 
Weight 
78 kg 
Weight 
83 kg 
Applied insulin 
Lispro 
Applied insulin 
Glulisine 
Peak 
60 
Peak 
55 
Quantity/Unit 
6000 pmol 
Quantity/Unit 
6000 pmol 
The tests on both persons were executed with the same 
parameters as seen in Table III except ğ‘‡ğ‘–ğºğ‘šğ‘ğ‘¥ , which is set to 
0.1. The patients used similar types of insulin with the same 
quantity per unit indicator. On the whole, a reliable 
comparison can be made between the outcomes. 
The first diabetic patient, outpatient A, was treated as 
inpatient to adjust her inordinate glycemia. Medication, 
glucose readings and meals were logged during 6 days 
including 15 meals and 45 glucose level measurements by 
ordinary blood sugar meter. The available meal log may 
contain inaccurate values if the patient consumed other meals 
except those offered as the controlled menu. 
In the case of outpatient B, a controlled experiment was 
conducted during 3 days with 13 meals. The blood sugar 
level was monitored by a Medtronic Guardian Real-Time 
Continuous Glucose Monitoring (CGM) System, measuring 
the actual value every 5 minutes. The food portions were 
measured properly with scale and the time of meal and 
insulin input was logged correctly with minimum possibility 
of false values, using an android-based nutrition logger 
application [18]. 
Two different kinds of tests were made with each patient. 
The first simulation used meal wise records, i.e. the meals 
were treated as separate tests. Each test was run with zero 
startup blood insulin level and no running glucose 
absorption. The second test used a whole dayâ€™s data with 
zero startup blood insulin level in the morning. During this 
test, the absorption of the insulin and the glucose from food 
could be in progress at the next meal as well.  
208
Copyright (c) IARIA, 2014.     ISBN:  978-1-61208-327-8
eTELEMED 2014 : The Sixth International Conference on eHealth, Telemedicine, and Social Medicine

 
Figure 3.  The fifth day of the meal wise test of patient A (solid line â€“ model estimations, dashed line â€“ measured values)
 
Figure 4.  The first eight hours of the whole third day of patient B (solid line â€“ model estimations, dashed line â€“ measured values) 
The results (see Table V and Table VI) prove that the 
whole day test gives better tracking as it takes more factors 
into account. The model copes with insulin absorption and 
digestion overlap which means around 5% improvement 
regarding the rate of deflection. The average deflection 
decreased with 0.45 mmol/l. 
Comparing the two patients (see Figure 3 and Figure 4), 
there is more than 1 mmol/l decrease in average deflection if 
the experiment is properly logged. There is also more than 
10% increase in the significant fields of rate of deflection 
(<3mmol/l). 
TABLE V.  
COMPARISON BETWEEN THE TWO TESTS WITH PATIENT A 
Patient A â€“ 15 meals 
Meal wise 
Whole day 
Average deflection  
4,0 mmol/l 
3,55 mmol/l 
Rate of 
deflection 
< 3 mmol/l 
50 % 
57 % 
< 5 mmol/l 
68 % 
79 % 
< 8 mmol/l 
93 % 
93 % 
TABLE VI.  
COMPARISON BETWEEN THE TWO TESTS WITH PATIENT B 
Patient B â€“ 13 meals 
Meal wise 
Whole day 
Average deflection  
2,99 mmol/l 
2,35 mmol/l 
Rate of 
deflection 
< 3 mmol/l 
65 % 
69 % 
< 5 mmol/l 
76 % 
81 % 
< 8 mmol/l 
94 % 
100 % 
V. 
DISCUSSION OF RESULTS 
The large differences between the prediction and the 
measured values that we experienced for patient A were 
most probably due to the poor quality of the dietary log. 
Also, it is harder to assess the performance of the model 
using only point-wise measurement data. For patient B, the 
error was fairly low (below 4 mmol/l) in the first hours (Fig. 
4) and since we can re-start the model after the meals, the 
error calculated for the whole day in Table VI is over-
pessimistic. However, the 4 mmol/l error is still fairly large, 
so relying solely on the model we could not exclude 
emergency situations (i.e. hypoglycemia) in a real life 
application. For better results, more efficient parameter 
training is needed. 
The meal wise test with patient A also shows (see Figure 
3) that using an ordinary blood sugar meter can lead to 
considerable errors in blood sugar level estimation. The 
patient measured a high value at 120 minutes, but the model 
shows even higher values between the two real-life 
measurements (0 min and 120 min). In this situation the gap 
is small, but there could be bigger differences as well. The 
frequent presence of these situations can lead to higher 
HbA1c values. 
Long-term model based predictions are in general less 
unreliable as the deviations accumulate. However, the 
proposed approach gives satisfactory results for short time 
prediction, which is the main demand to estimate the 
required amount of insulin in outpatient care. 
0
5
10
15
20
0
50
100
150
200
250
300
350
400
450
500
550
600
650
700
750
800
mmol/l
min
0
2
4
6
8
10
12
0
40
80
120
160
200
240
280
320
360
400
440
480
mmol/l
min
209
Copyright (c) IARIA, 2014.     ISBN:  978-1-61208-327-8
eTELEMED 2014 : The Sixth International Conference on eHealth, Telemedicine, and Social Medicine

VI. 
CONCLUSION AND FUTURE WORK 
The paper presented a combined model for the short time 
prediction of the blood glucose level, based on the dietary 
log of type I and type II diabetic patients. The results are 
satisfactory even without any model training. 
Further research is needed for 
ï‚· 
training the model to support personal variations in 
model parameters 
ï‚· 
extending the model to use also other physiological 
data available like physical activity and stress. 
Our aim is to decrease the average error under 1 mmol/l, 
which is a sufficient margin of error considering that the 
currently used real measurements have similar margin of 
error. The model is currently being further evaluated in a 
clinical study involving 20 rehabilitation patients, as an add-
on module to the Lavinia lifestyle mirror [18]. 
ACKNOWLEDGEMENT 
The work presented was supported by the European 
Union and co-funded by the European Social Fund, project 
title: â€œTelemedicine-focused research activities in the field of 
Mathematics, Informatics and Medical Sciencesâ€, project 
number: TÃMOP-4.2.2.A-11/1/KONV-2012-0073. 
REFERENCES 
[1] S. Wild, G. Roglic, A. Green, R. Sicree, and H. King, "Global 
prevalence of diabetes: estimates for the year 2000 and 
projections for 2030," Diabetes Care 27, May. 2004, pp. 
1047-1053. 
[2] American 
Diabetes 
Association, 
"Diagnosis 
and 
Classification of Diabetes Mellitus," Diabetes Care 27.90001, 
2004, pp. 5S-10. 
[3] Centers for Disease Control and Prevention, "National 
diabetes fact sheet: national estimates and general information 
on diabetes and prediabetes in the United States," Atlanta, 
GA: U.S. Department of Health and Human Services, Centers 
for Disease Control and Prevention, 2011. 
[4] J. Nicholas, J. Charlton, A. Dregan, and M.C. Gulliford, 
"Recent HbA1c Values and Mortality Risk in Type 2 
Diabetes,"  Population-Based Case-Control Study. PLoS ONE 
8(7), 2013, pp. e68008, doi:10.1371/journal.pone.0068008. 
[5] A. Makroglou, J. Li, and Y. Kuang, "Mathematical models 
and software tools for the glucose-insulin regulatory system 
and diabetes: an overview," Appl. Numer. Math. 56, 3-4, Mar. 
2006, pp. 559-573.  
[6] S. Andreassen, O.K. Hejlesen, R. Hovorka, and D.A. Cavan, 
"The diabetes advisory system â€“ an IT approach to the 
management of insulin dependent diabetes," (Eds.) Medical 
Informatics Europe '96, IOS Press, Netherlands, 1996, pp. 
1079-1083.  
[7] D.J.A. Jenkins, et al., "Glycemic index of foods: a 
physiological basis fo carbohydrates exchange," American 
Journal of Clinical Nutrition, March. 1981, pp. 362-366. 
[8] T. Arleth, S. Andreassen, M. Orsini-Federiri, A. Timi, and M. 
Massi-Benedetti, "A model of glucose absorption from mixed 
meals," 4th IFAC Modelling and control in biomedical 
systems, 2000, pp. 307-312. 
[9] P. Palumbo, S. Ditlevsen, A. Bertuzzi, and A. De Gaetano, 
"Mathematical modeling of the glucose-insulin system: a 
review," Mathematical Biosciences, 244(2), Aug. 2013, pp. 
69-81. 
[10] R.N. Bergman, Y.Z. Ider, C.R. Bowden, and C. Cobelli, 
"Quantitative estimation of insulin sensitivity," American 
Journal of Physiology, 236(6), 1979, pp. E667â€“E677. 
[11] R. Hovorka, et al., "Nonlinear model predictive control of 
glucose concentration in subjects with type I diabetes," 
Physiological Measurement, 25(4), Aug. 2004, pp. 905-920. 
[12] A. De Gaetano and O. Arino, "Mathematical modelling of the 
intravenous glucose tolerance test," Journal of Mathematical 
Biology, 40(2), Feb. 2000, pp. 136â€“168. 
[13] P. Wach, Z. Trajanoski, P. Kotanko, and F. Skrabal, 
"Numerical approximation of mathematical model for 
absorption of subcutaneously injected insulin," Medical & 
Biological Engineering & Computing, 33(1), Jan. 1995, pp. 
18â€“23. 
[14] P. Palumbo, P. Pepe, S. Panunzi, and A. De Gaetano, (2011). 
"Glucose control by subcutaneous insulin administration: a 
DDE modelling approach," in Proc. 18th IFAC World 
Congress, Milan, Italy, 2011, pp.1471-1476. 
[15] T. Arleth, S. Andreassen, M. Orsini-Federici, A. Timi, and M. 
Massi-Benedetti, "Optimisation of a model of glucose 
absorption from mixed meals," 2005, pp. 1-28. 
[16] P. Palumbo, P. Pepe, S. Panunzi, and A. De Gaetano, 
"Observer-based glucose control via subcutaneous insulin 
administration," 8th IFAC Symposium on Biological and 
Medical Systems, 8, 2012, pp. 107-112. 
[17] S. Panunzi, A. De Gaetano, and G. Mingrone, "Advantages of 
the single delay model for the assessment of insulin 
sensitivity from the intravenous glucose tolerance test," 
Theoretical biology & medical modelling, 7, Mar. 2010, pp. 
1-20. 
[18] B. PintÃ©r, I. VassÃ¡nyi, B. GaÃ¡l, and G. Kozmann, 
"MenuGene: A Comprehensive Expert System for Dietary 
and Lifestyle Counseling and Tracking," In Proc. 8th 
International Conference on Information Technology and 
Computer Science, May. 2012, Athens, Greece, pp. 257-26. 
 
210
Copyright (c) IARIA, 2014.     ISBN:  978-1-61208-327-8
eTELEMED 2014 : The Sixth International Conference on eHealth, Telemedicine, and Social Medicine

