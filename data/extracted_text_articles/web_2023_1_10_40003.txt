Song Recommendation System on Mobility Based
on Geotagged Tweets and User Preferences
1st Nobutaka Hayashi
Kyoto Sangyo University
Kyoto, Japan
g1954129@cc.kyoto-su.ac.jp
2nd Yuanyuan Wang
Yamaguchi University
Yamaguchi, Japan
y.wang@yamaguchi-u.ac.jp
3rd Kazutoshi Sumiya
Kwansei Gakuin University
Hyogo, Japan
sumiya@kwansei.ac.jp
4th Yukiko Kawai
Kyoto Sangyo University
Kyoto, Japan
kawai@cc.kyoto-su.ac.jp
Abstract—In this paper, we propose a method for recom-
mending songs that match the atmosphere of spots along the
route and the user’s preferences. The proposed method extracts
the ambiance around the spot from Social Networking Service
data, the artist’s atmosphere from a set of songs, and the user’s
preferences from the play history. We evaluate the proposed
method of artist extraction for a spot.
I. INTRODUCTION
When playing a song while moving, the surrounding con-
ditions and atmosphere, such as scenery and crowd size, play
a significant role in song choice. Therefore, in this study, we
propose a method for recommending songs that match the
atmosphere of spots along the route and the user’s preferences.
A recommendation system recommends songs that match
the context, such as recommending songs based on the location
information [1]. Shang et al. [2] focused on the emotional
and affective connotations of a piece of music and study
new issues in music retrieval. While most studies determine
lyrics and audio separately, Rachman et al. [3]. integrate lyrics
and audio to detect the emotion of a song. Murata et al.
[4] proposed a music recommendation system based on time-
series topic analysis of lyrics. Because the climax of a song
frequently depicts story development, the system extracts story
development as topic transitions and recommends songs based
on their similarity. The similarity calculation is based on the
Dynamic Time-Warping (DTW) method.
In this paper, we propose a method for detecting the atmo-
sphere around a moving spot based on a spot vector generated
by geotagged tweet data. To reduce the processing cost of
calculating the similarity between the spot vector and tens of
thousands of lyrics, an artist vector is generated from the lyrics
obtained from the Uta-Net [5], and the similarity between the
spot vector and the artist vector is calculated. Furthermore, the
artist who is closest to the user’s preferences and similarity
in the spot is extracted by generating a user vector from the
user’s playback song and calculating the similarity between the
user and the spot. Finally, the song with the highest similarity
between the extracted artist’s lyrics vector and the user vector
is recommended as the moving song at the spot.
II. SONG RECOMMENDATION SYSTEM ON THE MOVE
Figure 1 shows the user interface for music recommenda-
tion. When the user enters a destination, the shortest route and
Fig. 1. Schematic diagram of the on-the-move song recommendation system.
TABLE I
USER PLAYBACK HISTORY (PROFILE)
Artist Name
Title
Lyrics
Masumi
Apple Song
apple red
Mori Calliope
Off With Their Heads
I’m savege
Mori Calliope
Dance Past Midnight
Don’t call me lazy
the transit spots are displayed. When the user starts moving,
songs are recommended and played to the intermediate points
of the departure point, each transit spot, and the destination
point, based on the information at the current (departure) point.
Since the music recommendation is based on the information
of tweets near the spot, the recommended music differs
depending on the location and time of the year.
In Figure 1, when the destination is the Sagrada Familia, the
starting point, Clotho Park, and Gaudi Plaza are extracted as
spots on the shortest route, and multiple artists are extracted
for each spot. For spot 1, they are “SEKAI NO OWARI” and
“ReoNa”, etc. In the case of a user whose music history is
shown in Table I, an artist who is close to the multiple artists in
the spots and the user’s preferences is selected, and “Scar/let”
is selected for Spot 1. In addition, a song by that artist is
recommended, and the song is played until the intermediate
point between the next spot and the next spot.
III. SONG RECOMMENDATION METHOD
We propose a method of recommending songs that match
the atmosphere of a spot and user preferences, using the
1
Copyright (c) IARIA, 2023.     ISBN:  978-1-68558-055-1
WEB 2023 : The Eleventh International Conference on Building and Exploring Web Based Environments

information on the spot’s location, song, and geotagged tweets.
A. Artist Recommendation for Spots
The proposed method generates three vectors: a user vector,
a spot vector, and an artist vector calculates the similarity be-
tween the artist and user preferences for spots and determines
the artist with the closest similarity.
First, to recommend the user’s favorite artists, we obtain the
user’s playlist of songs, extract nouns and adjectives from the
lyrics, and generate a feature vector for the user by word2vec.
Next, for the spot vector, the latitude and longitude of the
spot obtained from Open Street Map (OSM) are used to
obtain tweets within a dm radius of the spot, and a feature
vector is generated from nouns and adjectives in the content of
the tweets using word2vec. The third, artist vector, integrates
lyrics information for each artist and generates a feature vector
of lyrics from nouns and adjectives using word2vec.
After generating the three vectors, the similarity between
the spot features and the user features is calculated from the
cos similarity between the user vector and the spot vector. For
each spot, the similarity to the artist is calculated from the
cos-similarity between the artist vector and the spot. Finally,
the artist with the closest similarity to the user is determined.
B. Song Recommendation for Spots
From the previous section, artists suitable for the atmo-
sphere of the spot and user preferences were determined.
For music recommendation, the similarity between the feature
vectors generated based on the user’s playback history and
each artist’s music is calculated. A vector for each song is
generated from the lyrics of each song by the artist, the cosine
similarity is calculated, and the song is determined.
IV. VERIFICATION OF SONG RECOMMENDATION METHOD
Verify a song recommendation method based on the artists
and spots recommended for a spot and the user’s preferences.
A. Datasets and Evaluation Methods
A total of 8,203 spots were obtained using Overpass Turbo
for the city of Kyoto. A total of 49 groups of artists and 535
lyrics were retrieved. The number of geotagged tweets was
277,030. In this experiment, we targeted spots with 30 or more
tweets per spot, and a total of 4,926 spots (60%) in Kyoto City
were selected for recommendation. The spots targeted in the
experiment were Kinkakuji Temple and Ginkakuji Temple as
temples and shrines, Kyoto Station and Kuramaguchi Station
as public institutions, and Doshisha University (Imadegawa
Campus) and Kyoto Sangyo University as universities.
To validate the proposed method, we evaluated the recom-
mended artists against the atmosphere of the spots.
B. Artist Validation for Spots
To validate the recommended artists against the atmosphere
of the spot, subjects read the chorus of songs by five groups
of artists, ranked the artists in order of compatibility with the
atmosphere of the spot, and evaluated them from Normalized
TABLE II
RESULTS OF ARTISTS’ EVALUATIONS OF SPOTS
Spot Name
#Tweets
nDCG@5
Kinkakuji Temple
943
0.8672
Ginkakuji Temple
782
0.9545
Kyoto Station
18,889
0.9538
Kuramaguchi Station
990
0.9342
Doshisha University
1,564
0.8439
Kyoto Sangyo University
125
0.8906
Discounted Cumulative Gain (nDCG) based on the ranking
results.
The results of nDCG@5 for spots and artists are shown in
Table II. The nDCG was between 0.84 and 0.9 for Kinkakuji
Temple, Doshisha University, and Kyoto Sangyo University,
while it was above 0.9 for Ginkakuji Temple, Kyoto Station,
and Kuramaguchi Station. In the categories of temples and
shrines, the Kyoto station, and universities, the accuracy was
higher for stations containing a variety of commercial facilities
than for universities with less age bias. The extraction of artists
should also take into account the preferences of users such as
the characteristics of spot visitors of the proposed method.
V. CONCLUSION
This research proposed a method for recommending songs
based on the atmosphere around a spot and the user’s
song preferences while moving between spots. The proposed
method recommends songs that are similar to the spot and the
user’s preferences by extracting the ambiance around the spot
from Social Networking Service data, the artist’s ambiance
from a set of songs, and the user’s preferences from the play
history. Evaluation experiments showed that artist extraction
for a spot was successful. In the future, we plan to improve
the accuracy by recommending songs with the length of the
song as a weight.
ACKNOWLEDGMENT
This work was supported in part by Grant-in-Aid for
Scientific Research (JP19K12240, JP22H03700) and by the
Research Institute for Advanced Science and Technology,
Kyoto Sangyo University (M2001). The authors would like
to express their gratitude for the support.
REFERENCES
[1] K. Marius, R. Francesco, S. Markus, “Location-aware music recom-
mendation using auto-tagging and hybrid matching,” In Proceedings of
the 7th ACM conference on Recommender Systems (RecSys 2013), pp.
17–24, 2013.
[2] L. Shang, Z. Daniel Yue, K. Siamul Karim, J. Shen, D. Wang, “CaMR:
Towards Connotation-aware Music Retrieval on Social Media with Vi-
sual Inputs,” In Proceedings of the IEEE/ACM International Conference
on Advances in Social Networks Analysis and Mining (ASONAM
2020), pp. 425–429, 2020.
[3] F. H. Rachman, R. Sarno, C. Fatichah, “Hybrid Approach of Structural
Lyric and Audio Segments for Detecting Song Emotion,” In International
Journal of Intelligent Engineering and Systems, pp. 86–97, 2020.
[4] M. Murata, R. Okada, S. Sasaki, T. Nakanishi, “A Time-Series Sensi-
tivity Color Expression Method for Songs Focusing on Words in Lyrics
[in Japanese],” In Proceedings of the 13th Forum on Data Engineering
and Information Management (DEIM Forum 2021), D25-4, 2021.
[5] page one, Song lyrics search service Uta-Net, https://www.uta-net.com/.
2
Copyright (c) IARIA, 2023.     ISBN:  978-1-68558-055-1
WEB 2023 : The Eleventh International Conference on Building and Exploring Web Based Environments

