279
International Journal on Advances in Networks and Services, vol 5 no 3 & 4, year 2012, http://www.iariajournals.org/networks_and_services/
2012, © Copyright by authors, Published under agreement with IARIA - www.iaria.org
Evaluation of Opportunistic Routing Algorithms on Opportunistic Mobile Sensor
Networks with Infrastructure Assistance
Viet-Duc Le, Hans Scholten, and Paul Havinga
Pervasive Systems (PS), Faculty of Electrical Engineering, Mathematics and Computer Science (EEMCS)
University of Twente, P.O. Box 217, 7500 AE Enschede, The Netherlands
{v.d.le, hans.scholten, p.j.m.havinga}@utwente.nl
Abstract—Recently the increasing number of sensors inte-
grated in smartphones, especially the iPhone and Android
phones, has motivated the development of routing algorithms
for Opportunistic Mobile Sensor Networks (OppMSNs). Al-
though there are many existing opportunistic routing algo-
rithms, researchers still have an ambiguous understanding of
how these schemes perform on OppMSNs with heterogeneous
architecture, which comprises various kinds of devices. In this
work, we investigate the performance of well-known routing
algorithms in realistic scenarios. To this end, we propose a het-
erogeneous architecture including ﬁxed infrastructure, mobile
infrastructure, and mobile phones. The proposed architecture
focuses on how to utilize the available, low cost short-range
radios of mobile phones for data gathering and dissemination.
We also propose new realistic mobility models and metrics.
Selected routing protocols are simulated and evaluated with
the proposed heterogeneous architecture, mobility models, and
transmission interfaces under various constraints, such as
limited buffer size and time-to-live (TTL). Results show that
some protocols suffer long TTL, while others suffer short
TTL. We further study the beneﬁt of ﬁxed infrastructure in
network performance, and learn that most of the opportunistic
routing algorithms cannot beneﬁt from the advantage of ﬁxed
infrastructure since they are designed for mobile nodes. Finally,
we show that heterogeneous architecture need heterogeneous
routing algorithms, such as a combination of Epidemic, Spray
and Wait, and context-based algorithms.
Keywords-opportunistic sensor network; opportunistic routing;
heterogeneous architecture; mobility model; smartphone.
I. INTRODUCTION
Mobile phones play an important role in sensor network
applications during last few years. Measurements can be
gathered with either user participatory, opportunity, or both.
No matter by which, data gathering is particularly mean-
ingful when performed by many phones simultaneously.
To enhance data reliability and dissemination performances,
heterogeneous architecture that consists of various kinds
of sensor devices is necessary. In fact, this paper is an
extension of Le et al. [1] to continue with evaluation of
existing opportunistic routing algorithms on heterogeneous
architecture .
Sensor networks, a large collection of nodes to collect the
world’s physical nature, have gone through various evolution
phases as depicted in Figure 1. In Wired Sensor Networks,
the deployment of sufﬁcient sensors is often bounded by the
Figure 1.
Evolution of sensor networks.
cost of wiring. Later, Wireless Sensor Networks (WSNs)
have been taken into consideration to replace the existing
Wired Sensor Networks, since WSNs provide a wide range
of context-awareness for real-time applications at low cost.
A variety of sensor types with dense deployment forms
a connected wireless mesh network via low power, short-
range radios, collaborating to acquire and transmit the target
data to sink nodes [2]. However, limited to unchangeable
topology, WSNs cannot be applied for a variety of appli-
cations with different types of architecture or inaccessible
areas. Therefore, Mobile Sensor Networks (MSNs) have
been presented to facilitate the data collection of sensors.
But still, the cost of deploying all kinds of such required
sensors is considerably high in terms of time and money.
The next step in sensor networks is to enhance, or even
replace, mobile nodes in MSNs with mobile phones. Thanks
to developments in sensor technology, smart phones, such
as the iPhone and Android-based phones, are equipped with
a large number of sensors, including GPS, accelerometers,
gyroscopes, proximity sensors and cameras. Even regular
phones also have sensors: microphones, light sensors, and
onboard radios. Not all mobile phones can access 3G mobile
internet, especially when a disaster happens, for example,
an earthquake or tsunami. But still mobile phones have the
means to participate in the sensor network. This revolution

280
International Journal on Advances in Networks and Services, vol 5 no 3 & 4, year 2012, http://www.iariajournals.org/networks_and_services/
2012, © Copyright by authors, Published under agreement with IARIA - www.iaria.org
is termed as Delay/Fault-tolerant Mobile Sensor Networks
(DTF-MSNs) [3]. Nevertheless, the architecture of DTF-
MSNs lacks infrastructure, which most real-world applica-
tions often have. To this end, we propose new type of sensor
networks, of which architecture consists of ﬁxed infrastruc-
ture, mobile infrastructures, and mobile nodes (mainly smart
phones). We term the new sensor networks as Opportunistic
Mobile Sensor Networks (OppMSNs). Unlike Ad-hoc Net-
works (VANETs) use only RSUs, OppMSNs utilize a wide
range of available devices to measure and disseminate data
for speciﬁc tasks. For example, through WiFi or Bluetooth
radio, mobile nodes can collaborate with nearby ones, cars,
buses, laptops, and the existing infrastructure-based sensor
networks for data gathering.
In addition, as requiring a contemporaneous end-to-end
connectivity, traditional routing algorithms such as Ad-
hoc On-Demand Distance Vector (AODV) [4] or Dynamic
Source Routing (DSR) [5], which can be used for MSNs,
may perform poorly in scenarios where the communication
paths are disrupted because of the sparse and mobility of
sensor nodes. Opportunistic routing algorithms with the
store-carry-forward paradigm, which can be applied for
OppMSNs, have been proposed in a number of recent studies
to evaluate the performance of routing algorithms on data
gathering [6]–[19]. However, these algorithms use either
basic scenarios or simple simulation architectures that are
still quite far from real-world applications.
This paper investigates the performance of existing op-
portunistic routing algorithms for OppMSNs by proposing
heterogeneous architecture, mobility models and metrics.
The architecture includes most of real-world sensor nodes
such as Road Side Units (RSUs), buses, cars and pedes-
trians with unpredictable movement. To achieve a realistic
setting, the architecture is mapped on a real city, the city
of Enschede, The Netherlands. Buffer size and time-to-live
of messages are limited. We also consider heterogeneous
means of communication, especially WiFi and Bluetooth.
In addition, two new models, together with available ones
in The ONE simulator [20], will be implemented to make
the investigation more realistic. By means of simulations,
the proposed architecture and models are used for the
comparison of a set of opportunistic routing protocols.
The paper has the following structure: related work is
discussed in Section II. Section III presents the architecture,
new mobility models and evaluation metrics. The simula-
tions and an analysis of simulation results are the subject of
Section IV, which covers evaluations of movement model,
algorithms’ performance, and RSUs’ assistance. Based on
the results, Section V gives possible directions for current
and future research.
II. RELATED WORK
In this paper, we evaluate performance in term of message
delivery of most well-known opportunistic routing algo-
Figure 2.
Categorizations of routing protocols in opportunistic networks.
rithms with OppWSNs that are essentially composed of
the existing wireless ad-hoc sensor networks (RSUs) and
the mobile sensor networks (ﬂocks of mobile phones). The
network can be characterized as intermittent connection
and sparse mobility. Conventional routing protocols [4], [5]
require contemporaneous end-to-end connectivity for a data
packet to be delivered. In other words, if the destination
is not available on the connected path, the packet delivery
will fail and no further effort is taken to secure future
transmission of the data. Consequently, routing protocols
must be adapted for these new types of networks. Numerous
opportunistic routing algorithms have been proposed in the
last few years with different mechanisms [3], [6]–[15],
[17]–[19], which can be generally categorized based on
either the type of network (without infrastructure and with
infrastructure) or the pre-known information of the networks
(Stochastic and Context-based) as deﬁned in
[21]. These
categorizations slightly overlap as depicted in Figure 2. If
networks are sparse and most nodes possess unpredictable
movement, the stochastic protocols are more appropriate. In
our opinion, an algorithm that can combine advantages of
stochastic and context-based approaches is most suitable for
our considered networks since the global knowledge of ﬁxed
and mobile infrastructures perhaps improves the routing
performance of mobile nodes, which have unpredictable
movement.
A. Routing Without Infrastructure Assistance
Stochastic routing protocols deliver messages by simply
disseminating them all over the network. Being passed
from node to node, messages will be gradually delivered
at the destination. Epidemic Routing [12] diffuses messages
similar to the way virus/bacteria spread in biology. When
encountering others, a node will replicate and broadcast the
messages to them. These nodes that just received the mes-
sages will move to other places and continuously replicate
and transmit messages to other nodes whenever they are in

281
International Journal on Advances in Networks and Services, vol 5 no 3 & 4, year 2012, http://www.iariajournals.org/networks_and_services/
2012, © Copyright by authors, Published under agreement with IARIA - www.iaria.org
range of communication. Though increasing the possibility
of message delivery, the method results in ﬂooding the
network and rapidly exhausting available resources. Direct
Delivery (DD) [13] only delivers the holding messages
directly to the destination; therefore, DD saves huge amounts
of resources but decreases signiﬁcantly the delivery probabil-
ity. Spray and Wait (SnW) [14] is a tradeoff between multi-
copy scheme (Epidemic) and single-copy scheme (Direct
Delivery) by ﬁnding an optimal number of message copies
and dividing the message delivery process into two phases
(spray phase and wait phase). First Contact (FC) [15] is a
variant of single-copy scheme, which sends messages to the
ﬁrst encountered node or a random node if there are more
than one.
In general, context-based protocols use information of his-
torical contacts. Probabilistic Routing Protocol using History
of Encounters and Transitivity (PRoPHET) [16] is a well-
known Context-based routing protocol based on encounter.
PRoPHET estimates the delivery predictability for each
known destination at each node before passing a message.
The estimation relies on the history of encounters between
nodes. SimBet [17] uses historical contacts to calculate two
metrics, similarity and betweenness. The similarity, which
is calculated by how frequently a node and its destination
have met, is meant of how socially connected such two
nodes are. Meanwhile, the betweenness, which is calculated
by how many nodes which a node has met, is meant of
how interconnected a node is. However, if the utility metrics
are equal, SimBet will prevent its forwarding behavior. To
improve this ﬂaw, BUBBLE [18] adds the knowledge of
community structure to ensure message diffusion. Since the
social knowledge varies over time, information used BUB-
BLE may be outdated. In addition, the betweenness may be
useless if the message is near its destination. Motivated by
this shortcoming, SimBetAge [19] is proposed.
B. Routing With Infrastructure Assistance
Data Mule [22] is designed to exchange messages between
the close ﬁxed infrastructure via mobile nodes with random
movement. Conversely, Virtual Data Mule (VDM) [11],
Message Ferrying (MF) and its variants [10], [23], [24] try
to improve network performance by increasing the encounter
probability via predeﬁned movement. The ferries shuttle
along the predeﬁned routes in the dedicated region. Mean-
while, mobile nodes have tendency to move towards ferries
to send messages. Such assumption makes the algorithms
limited in speciﬁc scenarios with the majority are buses
and bus travelers. In fact, these algorithms are entirely con-
strained by the route and time schedule of ferries. Without
the route information, the algorithms will perform poorly.
C. Routing for OppMSNs
To our best knowledge, little attention has been given
on how to apply above opportunistic routing algorithms on
data dissemination in OppMSNs. DTF-MSN
[3] shows a
scheme to gather information in the Delay/Fault-Tolerant
Mobile Sensor Network based on an improvement of Di-
rect Delivery and Epidemic. The proposal consists of two
key components: queue management and data transmission.
Queue management decides the importance of messages,
and data transmission decides the node with high delivery
probability to send messages to. However, the scenario used
to evaluate the proposal has only one mobility model, where
both source and sink are mobiles nodes, and is far from
realistic for the OppMSN application domain. Camara et
al. [6] present a good mechanism for the distribution of
messages, but the mechanism limits itself to vehicle-to-
vehicle and infrastructure-to-vehicle. The work uses only
the basic Epidemic routing and there is no comparison with
other routing protocols. Recently, Keranen et al. [25] eval-
uate opportunistic networks with various mobility models
and routing algorithms by using the ONE. Nevertheless, the
used architecture does not include ﬁxed infrastructure and
the results only show the simulation speed.
Therefore, we are interested in investigating towards rout-
ing in OppMSNs, which consist of ﬁxed, mobile infrastruc-
tures, and mobile nodes with unpredictable movement. Since
algorithms are proposed for different optimization objectives
under different constraints and scenarios, it is difﬁcult to
compare the performance of them all. In this paper, we only
select the ﬁve most well-known and comparable to inves-
tigate. They are Epidemic [12], Direct Delivery (DD) [13],
FirstContact (FC) [15], and PRoPHET [16], and Spray and
Wait (SnW) [14].
We also improve the ONE simulator for simulations. The
ONE includes several opportunistic routing algorithms and
mobility models. Researchers can import their own maps
and to conﬁgure the simulator with their own settings by
many parameters, such as speed of mobility, message size,
buffer size, and etc. Moreover, the ONE is an open source
enabling researcher develop the tool for their own speciﬁc
objectives.
III. PROPOSED OPPORTUNISTIC MOBILE SENSOR
NETWORK (OPPMSN)
Most traditional sensor applications are based on ﬁxed and
mobile wireless sensor networks, for which the availability
of contemporaneous end-to-end connectivity is essential.
However, the very recent innovation of mobile phones with
different types of onboard sensors and available low power
consumption radios has brought on a new interest of using
mobile phone as the main part of sensor networks. The
network becomes opportunistic, and mainly consists of the
existing wireless ad-hoc sensor network and the mobile
sensor network.

282
International Journal on Advances in Networks and Services, vol 5 no 3 & 4, year 2012, http://www.iariajournals.org/networks_and_services/
2012, © Copyright by authors, Published under agreement with IARIA - www.iaria.org
A. Architecture
The considered opportunistic network is separated into
several regions based on communities as shown in Figure 3.
In order to link these regions, each region has a base station
equipped with long-range communication such as satellite,
GSM, Internet. In addition, network architecture of a region
consists of the following components: a ﬁxed infrastructure,
a mobile infrastructure (e.g. data mules), and mobile nodes.
• Fixed infrastructure: Road side units (RSUs) are de-
ployed along main roads of the region. RSUs will
be physically integrated in or ﬁxed to the existing
infrastructure, like lamppposts, GSM base station, or
walls. RSUs form an ad-hoc wireless network, acting
as a backbone, connecting mobile nodes with central
servers or data sinks. The ﬁxed infrastructure can
also be used to disseminate information from central
servers to the regions. The distance between RSUs
is approximately 60 meters, using WiFi to build the
network. There are two types of wireless interfaces
for the RSUs, short-range Bluetooth and WiFi 802.11.
Messages are transferred among RSUs through WiFi.
The Wiﬁ interface is also used to connect to buses,
trams, cars, and smart phones. Bluetooth is designed
for communication between RSUs and regular phones.
• Mobile infrastructure: Equipped with WiFi 802.11,
buses and trams with known routes and known stops
are considered as the mobile infrastructure in OppMSN
applications. Since buses and trams move relatively
fast, Bluetooth characterized by short-range (< 10 m)
and low speed (< 2 Mbit/s) is not an appropriate option
for buses and trams.
• Mobile nodes: The last component of the heteroge-
neous architecture consists of mobile phones (used
by pedestrians) and a small portion of cars. There
is no information of possible paths towards the sink
because mobile phones, the majority of networks, move
unpredictably. Mobile phones are classiﬁed into either
smart phones or regular phones. Smart phones typically
have both WiFi and Bluetooth interfaces, while regular
phones have only Bluetooth. For the same reason buses
and trams use WiFi only, cars are equipped with WiFi.
B. Architecture Performance Requirements
Depending on the physical characteristic, each of pro-
posed components has a different degree of performance
requirements such as reliability, throughput, latency, and
electric power consumption. Fixed infrastructure has unlim-
ited electric power supply, strong and stable signal strength,
and large data storages. Therefore, latency and throughput
are the most considerable performance requirements, and
reliability and power consumption can be ignored. A mes-
sage should be transferred as fast as possible via the ad-
hoc connected network based on ﬁxed infrastructure. Since
Figure 3.
Architecture for Opportunistic Mobile Sensor Networks.
the RSU network is linear lines crossing each other at
few points, the bottleneck phenomenon probably decreases
throughput and increases latency.
Mobile infrastructure, such as buses and trams, has no
constraint on power supply, signal strength, and storage
capacity. Thus, mobile infrastructure also has no problem
with reliability and power consumption. As buses or trams
play a role as messengers shuttling between sources and
sinks in the network, latency depends on velocity and
distance signiﬁcantly. In addition, mobile infrastructure may
become a bottleneck point because many passengers try to
connect to a bus or a tram. As a result, the throughput of
mobile infrastructure needs to improve as well.
Since mobile phones suffer limited power supply and in-
termittent connectivity, power consumption and throughput
are the most critical performance requirements. Reliability
is another considerable performance requirement because
mobile nodes are sparse and dynamic. That some people
are not willing to turn on the wireless interfaces all the
time also makes the network less reliable. Moreover, velocity
and unpredictable movement patterns of mobile nodes deter
obtaining low latency and high throughput.
C. Network Operations
When a node sends a message to the data sink (base
station) by using an opportunistic protocol, the message
is transferred towards the base station by the store-carry-
forward paradigm. The message is stored in phones or vehi-
cles, and then forwarded to other nodes during opportunistic
contacts. The node receiving the message is either the base
station, a car, a phone, or a RSU. The nodes, except the
base station, continuously forward the message when in
communication range of other nodes. Eventually, nodes may
carry the message to the base station. If reaching a RSU, the
message usually takes the paths based on connected RSUs
to go to the base station.

283
International Journal on Advances in Networks and Services, vol 5 no 3 & 4, year 2012, http://www.iariajournals.org/networks_and_services/
2012, © Copyright by authors, Published under agreement with IARIA - www.iaria.org
RSUs with a large storage capacity also act as a relay
node in the network. Messages are stored at RSUs for a
period of time until they expire due to a limited time-to-
live (TTL). In some cases, reliability of event detection
is enhanced by aggregating data provided by other sensor
devices. A mobile node perhaps receives messages from the
ﬁxed infrastructure and then forwards them to other nodes.
As a result, a message containing event information will not
only be transferred to the base station but also disseminated
to nodes in network.
Buses and trams are not only message ferries as described
in [24] but also gateways for passengers. Because the contact
durations of mobile phones carried by passengers on a bus
are quite long, messages may be fully exchanged among the
passengers. Furthermore, these messages are stored at the
bus and then disseminated to next passengers or delivered
to the base station at the last bus stop.
When moving from one region to another, a mobile
node will act as a gateway, transferring messages between
regions. The transfer will be slow compared to using the
ﬁxed infrastructure. As the anticipated application domain is
safety in public spaces, (emergency) messages should reach
their destination as fast as possible.
D. Mobility Model
To increase the realism of the mobility model, we propose
two additional models, Random Shortest Path Map Based
Movement (RSPMBM) and Road Side Unit Placement. The
new models, together with exiting Map Based Movement,
Bus Traveler Movement and Bus Movement, are suitably
applied for different types of sensor nodes. This approach
represents the heterogeneous nature of reality, with Road
Side Units, cars, buses and pedestrians.
We assume that a portion of mobile nodes represents
pedestrians wandering around without any speciﬁc purpose.
The existing Map Based Movement (MBM) provided by
the ONE is likely the most suited. MBM is the Random
waypoint movement with map-based constraints, in which
a mobile node moves from one map node to another by
selecting a neighboring map node randomly. This movement
is repeated a randomly chosen number of times.
Naturally, people do not just wander around. They want
to go somewhere for a purpose, using the shortest or
fastest path possible. The choice between walking or taking
the car is often decided by the Euclidean distance to the
destination. These destinations are very diverse [26], ranging
from points of interest in the public domain (e.g. restaurants,
parks, ofﬁces) to the more private ones (e.g. friends, home,
family). Therefore, we propose the new movement model,
RSPMBM, to model the behavior of human-like mobility.
A node selects an arbitrary destination within a predeﬁned
range and then moves along the shortest path. Euclidean
distance ranges are conﬁgurable in a setting ﬁle, for example,
the distance ranges can be set [50, 500] and [500, 5000] me-
ters for pedestrians and cars, respectively. Remark that the
minimum walking distance of a pedestrian is set to 50 m to
ensure every node always travel a little.
It is reasonable to assume that a number of civilians,
called as bus travelers, who prefer traveling by bus. Move-
ments of bus travelers and buses are modeled by Bus Trav-
eler Movement and Bus Movement that are also available in
the ONE simulator, respectively. A bus traveler compares
distance to the nearest bus stop with to the destination
to decide whether to take a bus or not. A bus can carry
many passenger and shuttles ﬂowing its pre-deﬁned route
and timetable.
The new Road Side Unit Placement model is proposed for
deploying RSUs on a map, along side roads with a certain
distance between each other. The RSUs are stationary and
form a wireless ad-hoc network or wireless sensor network.
E. Evaluation Metrics
Four metrics are used to evaluate the aforementioned
performance requirements of different routing algorithms.
Two of them are metrics implemented in the ONE: delivery
probability and latency. Hop-count metric is no longer an
informative metric to assess the delivery cost in time and
distance in OppWSNs as it is used in connected ad-hoc
WSNs. Instead, we deﬁne Delivery Speed and Delivery Cost
for a more accurate evaluation.
• Delivery Probability DP: The total number of suc-
cessfully delivered unique message, denoted by Q,
divided by the total number of created unique messages,
denoted by P. Each unique message is created at certain
time, and has an unique identiﬁcation number to be
distinguished with others in the network.
DP = Q
P .
(1)
• Latency (DL): The average of delays between the
moment that unique message i is originated, denoted
by T si, and the time when the ﬁrst replicate of unique
message i arrives at the destination, denoted by T di.
The replicate is a copy of an unique message. The
number of replicates depends on the methodology of
the routing algorithm, single or multiple-copies.
DL = 1
Q
Q
X
i=1
(T di − T si).
(2)
• Delivery speed (DS): The average of speeds of the ﬁrst
replicate of unique message i that is sent from the
origin to the destination. It is deﬁned by the Euclidean
distance, denoted by di, divided by latency.
DS = 1
Q
Q
X
i=1
di
T di − T si
.
(3)

284
International Journal on Advances in Networks and Services, vol 5 no 3 & 4, year 2012, http://www.iariajournals.org/networks_and_services/
2012, © Copyright by authors, Published under agreement with IARIA - www.iaria.org
• Delivery cost (DC): The total number of unique mes-
sages including replicates, denoted by R, divided by
the number of ﬁrst replicates successfully arrived their
destinations.
DC = P + R
Q
.
(4)
Note that latency DL does not take the distance from
origins to destinations into account like the delivery speed
DS. Therefore, DL only a good metric in scenarios that
origins of messages are uniform distributed.
To evaluate the proposed architecture and the proposed
mobility model, we use the inter-contact time, ﬁrst deﬁned
by Chaintreau et al. [27]. Inter-contact time is the time
interval between two successive contacts of a pair of nodes,
from the end of one contact to the next contact with the
same node. Inter-contact time represents the frequency of
opportunities for nodes to send packets to other nodes.
The distribution of inter-contact time has an impact on
the performances of different routing algorithms. [27] also
shows that the inter-contact times are power-law distributed
with the power-law exponent less than one.
IV. SIMULATION AND EVALUATION
In order to evaluate our proposed architecture and mo-
bility model, a realistic simulation environment is set up,
using a real city map. The results of running selected
routing protocols are analyzed and compared to gain a better
understanding on performances of existing routing protocols.
From that, we may attain implications for future work.
We use the ONE simulator [20] that is specially designed
for opportunistic networks. It allows users to import maps,
conﬁgure radios, message size, node speed, etc. The most
advantage of the ONE is an open source so that we can
ﬂexibly develop new features for better simulation.
A. Environment Setup
The simulation uses the center of the city of Enschede
as a realistic setting. In the center of the map, there is the
central bus station. The map shown in Figure 4 takes up
approximately 3500 by 3000 meters and is exported from
Openstreetmap.org. To this map several layers, as submaps,
are added for RSUs, roads for cars, paths for pedestrians
and routes for buses. RSUs are positioned at the outer and
inner ringroads, and four main roads radiating from the
center. Cars are restricted to roads, but pedestrians may
roam everywhere. Buses follow routes from the real city bus
system. Roads in the ONE simulation have zero width. To
overcome this limitation, roads are deﬁned by two parallel
routes as the lanes of a real road. In this way, communication
with vehicles or pedestrians at both sides of the road is more
realistic.
The simulation is carried out with 336 RSUs manually
ﬁxed on main roads, 50 cars, and 600 pedestrians moving
around inside the city. The initial position of cars and pedes-
trians is randomly distributed. There are quite many bus lines
in the city but only four are chosen because others have
routes overlapping the RSU lines. Since RSUs can transfer
messages to the base station much faster than buses do, buses
that run along RSU lines have small contributions to the
message delivery. Each bus line has two buses shuttling their
routes. Since our basic goal is to investigate the contribution
of pedestrians in disseminating data, only a small portion
of cars, 50 over 650 mobile nodes, are simulated in the
simulation. We also assume that the speed of pedestrians
remains almost constant, 0.5 − 1.5 m/s. Therefore, the
mobility speed has a minor effect on performance results.
Since our proposed architecture also aims to reduce the
use of mobile services for message exchange, we only con-
sider available short-range interfaces, particularly Bluetooth
and WiFi. All mobile phones have Bluetooth Version 2.0
at 2 Mbit/s net data rate with 10 m radio range, while
smart phones have only WiFi interface at net data rate of
10 Mbit/s with 60 m radio range. We assume that ﬁfty
percent of pedestrians own smart phones and the rest uses
normal phone. RSUs have both interfaces. The remaining
nodes, cars and buses, use WiFi only, because they move at
speeds that make Bluetooth communication unrealistic.
From the 600 pedestrians, 500 move with a purpose,
while 100 are just strolling. Because cars likely possess
predetermined routes, RSPMBM would be most suited.
Buses follow ﬁxed routes with predeﬁned stops, and are
modeled with the Bus Movement mobility model. Finally,
pedestrians in buses are modeled with the Bus Traveler
Movement model.
Data dissemination in the above heterogeneous scenario
is simulated with a number of opportunistic routing proto-
cols: Epidemic [12], Direct Delivery (DD) [13], FirstCon-
tact (FC) [15], and PRoPHET [16], and Spray and Wait
(SnW) [14] with the number of copies (n) to be 6. This
setting value is default in the ONE simulator. Since Message
Ferry (MF) [24] is only useful for buses to transfer messages
among base stations of cities, in our simulation with a single
city, buses are just considered as a vehicle to transport
passengers and do not implement MF.
Messages are generated every 25−35 seconds by random
cars and pedestrians. RSUs do not generate messages, but act
as a communication backbone. Messages may contain pic-
tures, video and soundbites, and are 500 KBytes to 1 MBytes
in size. Suppose that memory capacity is consistent with
kinds of nodes, the buffer of normal mobile phones is set
to 5 MB, and smart phones, cars, RSUs, and buses have
50 MBytes buffers. We also remarked that increasing buffer
size of normal phones up to 50 MBytes affects a little bit
on network performance.

285
International Journal on Advances in Networks and Services, vol 5 no 3 & 4, year 2012, http://www.iariajournals.org/networks_and_services/
2012, © Copyright by authors, Published under agreement with IARIA - www.iaria.org
Figure 4.
Inner-city of Enschede.
B. Architecture and Model Evaluation
Figure 5 plots the complementary cumulative distribution
(CCDF) of the inter-contact times. The graphs show that the
inter-contact time distribution of RSPMBM has a power-law
distribution with the exponent approximate 0.3 and similar
to the real iMote trace [28]. This power-law distribution
does contradict the exponential decay implied by previous
mobility models that have been used to design routing
algorithms (see [27]). Because the exponent and shape of
the distribution may vary between environments, we did not
conﬁgure parameters to produce the exact same exponent
and shape as the iMote trace. Note that the match between
the iMote trace and RSPMBM in the ﬁrst two thirds of the
graph. The difference in the last part of the graph is due
to the longer trace (in time) of the iMote, leading to more
contacts with low distribution probabilities. RSPMBM has
shorter contact times due to the RSU communication back-
bone. In other words, nodes in our simulation environment
meet one another more frequently that those in the iMote
experiment.
Figure 5 also shows the inter-contact time distribution
for MBM used in the Enschede City Scenario (ECS) for
comparison. Surprisingly, both RSPMBM and MBM pro-
duce similar tails of distribution (exponent coefﬁcients are
about 0.3). However, the inter-contact time distribution of
RSPMBM has higher probability than that of MBM. This
is expected, inter-contact times usually get shorter with
increasing reality [20].
C. Opportunistic Routing Algorithm Evaluation
Time-to-live (TTL) is an important variable for data dis-
semination, and strongly inﬂuences data delivery probability,
latency, delivery speed, and delivery cost in opportunistic
networks. In safety applications, emergency messages should
 0.001
 0.01
 0.1
 1
 100
 1000
 10000
 100000
P(X>x)
Time (s)
RSPMBM
MBM
iMote2009
PL with slope 0.3
Figure 5.
Inter-contact times for RSPMBM compared to the iMote trace.
be delivered with high probability, low latency, and high
speed. Otherwise, the information might be useless after
a certain period. Therefore, assigning appropriate value to
TTL to drop obsolete messages probably save a lot through-
put. Though TTL has a huge impact on the performance of
routing protocols, it is hardly studied in existing literature.
We will investigate the inﬂuence of TTL on delivery prob-
ability, latency, speed, and costs of messages.
Figure 6 shows the delivery probability of each routing
algorithm as TTL in the scenarios increases from 10 to
300 minutes. In the graph two very different trends in
delivery probability can be observed. DD, FC and SnW
have increasing delivery probability with increasing TTL,
with a highest gain in the lower TTL values. This is as one
would expect. The longer the TTL of a message, the more
opportunities for message transferring. Counter-intuitive is
the decreasing delivery probability with increasing TTL
for Epidemic and PRoPHET. This is explained as follows.
Epidemic and PRoPHET are multi-copy, thus the number of
relayed messages increases exponentially when TTL is long.
Eventually, with a limited buffer and limited contact dura-
tion, the delivery probabilities of Epidemic and PRoPHET
will dramatically suffer. This explanation is reconﬁrmed in
Figure 9, which depicts the delivery cost for each routing
protocol. We also remarked that decreasing message size or
increasing buffer size lessens ﬂooding effects on Epidemic
and PRoPHET. However TTL still strongly inﬂuences their
deliver probabilities.
Figure 7 plots the average latency of message delivery as
TTL increases. From the graph, one can see that increasing
TTL results in increasing delays of message delivery. This
is as expected. Since ﬂooding the network with messages,
Epidemic scores best. Although Epidemic has the lowest
delivery probability at high TTL values, when a message
reaches its destination, the message will have low latency.
Direct Delivery scores lowest with high latency. DD delivers
messages directly to the destination. So it may take some

286
International Journal on Advances in Networks and Services, vol 5 no 3 & 4, year 2012, http://www.iariajournals.org/networks_and_services/
2012, © Copyright by authors, Published under agreement with IARIA - www.iaria.org
10 30
60
120
180
300
0
0.1
0.2
0.3
0.4
0.5
0.6
0.7
0.8
0.9
1
Time−To−Live (min)
Delivery Probablity
 
 
Direct Delivery
First Contact
Spray and Wait
Epidemic
Prophet
Figure 6.
Message delivery probability.
10 30
60
120
180
300
0
500
1000
1500
2000
2500
3000
3500
4000
4500
5000
Time−To−Live (min)
Latency (s)
 
 
Direct Delivery
First Contact
Spray and Wait
Epidemic
Prophet
Figure 7.
Average latency of message delivery.
time for this opportunity to happen.
The speed of message delivery is depicted in Figure 8.
The speed decreases sharply in the ﬁrst part of the graph
for all protocols and then remains almost constant. For 10-
min TTL, only messages near the base station or RSUs can
reach the destination. Other messages would be dropped
before arriving at the base station. Increasing TTL causes
more messages farther away from the base station to be
delivered. This explains why the average delivery speed
declines sharply. However, when TTL is greater than 60
minutes, most messages have sufﬁcient lifetime. Therefore,
increasing TTL further does not affect the delivery speed.
The delivery speed of Epidemic and PRoPHET goes up
slightly when TTL is greater than 120 minutes. Due to
overhead, there are fewer messages that could be delivered.
Hence, the average delivery speed rises slightly again.
Epidemic has the highest delivery speed since it ﬂoods
10 30
60
120
180
300
10
1
Time−To−Live (min)
Delivery Speed (m/s)
 
 
Direct Delivery
First Contact
Spray and Wait
Epidemic
Prophet
Figure 8.
Average speed of message delivery.
10 30
60
120
180
300
10
0
10
1
10
2
10
3
10
4
10
5
10
6
Time−To−Live (min)
Delivery Cost
 
 
Direct Delivery
First Contact
Spray and Wait
Epidemic
Prophet
Figure 9.
Delivery cost.
messages over the network. DD has the lowest delivery
speed on account of sending messages only when mobile
nodes encounter the base station.
As PRoPHET has the second lowest latency in Figure 7,
one would expect it to have the second highest delivery
speed. On the contrary, the graph in Figure 8 shows that
PRoPHET has the lowest delivery speed when TTL is below
120 minutes. The reason lies in the fact that PRoPHET
transfers messages based on the frequency of node encoun-
tering, called delivery predictability. Owing to the RSU
connected network, most nodes have almost the same de-
livery predictability. Consequently, messages are wastefully
transferred around before reaching the destination. In such
way, even the average delay of a message is low, but the
Euclidean distance from its source to the base station is
short too. That is why the delivery speed of PRoPHET
is low even though its latency is not high. This behavior

287
International Journal on Advances in Networks and Services, vol 5 no 3 & 4, year 2012, http://www.iariajournals.org/networks_and_services/
2012, © Copyright by authors, Published under agreement with IARIA - www.iaria.org
Figure 10.
Delivery probability.
also proves that delay of message delivery is not sufﬁcient
enough to evaluate quality of message delivery. However,
the delivery speed of Direct Delivery even gets lower than
that of PRoPHET when TTL is above 120 minutes. This
is expected. When TTL increases very high, DD gives
higher delay but almost constant delivery probability as in
Figure 7 and 6 respectively.
Because the majority of nodes have limited power supply,
the delivery costs of opportunistic routing algorithms must
be taken into account. The delivery cost represents the ratio
between the number of total transmissions needed over that
of successfully delivered messages. Figure 9 shows that
Epidemic and PRoPHET have the highest delivery cost
because they maximize the opportunities of message delivery
by replicating copies of messages as much as possible. DD
and SnW have the least overhead, as DD has only one single
copy of a message and SnW has 6 copies of messages
at maximum. Clearly DD has the lowest delivery cost of
all routing algorithms. The delivery costs for Epidemic
and PRoPHET increase sharply with increasing TTL, but
stabilize after a while. The reason is that only a limited
number of messages can be transferred during the limited
contact duration.
D. RSUs’ Assistance Evaluation
To evaluate the advantages of RSUs in the opportunistic
network, we investigate the performance of algorithms in
both cases, with and without 336 RSUs. For each case,
algorithms’ performance will be evaluated based on four
aforementioned metrics: delivery probability, delivery la-
tency, delivery speed and delivery cost.
To make simulation more realistic, we randomly catego-
rize messages into 5 levels of priority, from 1 (highest) to
5 (lowest). The priority means the importance or urgency
of messages. Importance information, such as ﬁre detection,
Figure 11.
Latency.
should be delivered rapidly. Otherwise, it is too late, and
the information is useless. It makes sense that a message
with higher priority should be assigned lower time-to-live.
In particular, the time-to-live value in minute is deﬁned
corresponding to message priority as in Table IV-D for our
simulation.
Priority
1
2
3
4
5
Time-To-Live (min)
10
30
60
120
180
Table I
MESSAGE PRIORITY AND CORRESPONDING TIME-TO-LIVE
Such TTL assignments will signiﬁcantly improve deliv-
ery performance when being combined with some buffer
management. For example, Fathima and Wahidabanu [29]
manage buffers by dividing messages into three sub-buffers:
high priority, medium priority, and low priority. Messages
with speciﬁc priority should be stored in corresponding
buffer.
By intuition, we mistakenly foresaw that the present of
RSUs would improve the delivery probability performed
by any routing algorithm. However, simulation result in
Figure 10 shows that the delivery probabilities can be
worse in case of adding RSUs. This surprising conﬂict
can be explained through studying the naive methodology
of the algorithms. Since DD only transfers messages to
their corresponding destinations, the existing of RSUs just
scams mobile nodes with more header-list exchanges, which
help nodes check the message destinations of each other.
Although this wasting time is little, it still results in in-
creasing the probability of dropped messages due to TTL,
and decreases a certain number of delivered messages as
well as increase the latency as shown in Figure 10 and
11, respectively. This effect is more serious for FC and
SnW because both algorithms have more wasteful message

288
International Journal on Advances in Networks and Services, vol 5 no 3 & 4, year 2012, http://www.iariajournals.org/networks_and_services/
2012, © Copyright by authors, Published under agreement with IARIA - www.iaria.org
Figure 12.
Delivery speed.
exchanges with enormous 336 RSUs. Remark that the hitting
time of two mobile nodes is less than that of a mobile node
and a RSU [14]. Therefore, both FC and SnW have lower
delivery probability and higher latency in case of adding
RSUs, see Figure 10 and 11.
PRoPHET also suffers from the wasting contact times
with RSUs since the delivery predictability of RSUs depends
on mobile nodes, not RSUs them self. In other words,
transferring messages based on the delivery predictability is
not suitable for stationary nodes. This explains why Prophet
has the lower delivery probability in case of adding RSUs.
Conversely, Epidemic has the least effect from adding RSUs
in term of delivery probability and even has shorter latency
since Epidemic can inﬁnitely ﬂood RSUs with messages. In
such way, messages can be delivered faster via the connected
RSU’s network as shown in Figure 11.
Figure 12 shows the delivery speed of the algorithms. By
comparing between Figure 11 and Figure 12, we observe
that, in general, shorter latency is corresponding to higher
delivery speed. However, ﬁgures show that Prophet has
shorter latency but also lower speed. Again, this illustrates
that latency does not totaly reﬂect how fast a message is
delivered as we discussed. So, the extra contacts with RSUs
also slows down the speed of message delivery for Prophet.
Results of delivery cost shown in Figure 13 are what we
expected. Since adding RSUs leads to having more nodes
in the network, there are more opportunities for transferring
message copies around. Therefore, the delivery cost, which
is based on the number of transmissions, increases for all
algorithms, except DD because it only sends messages to
destination nodes.
In conclusion, most compared algorithms cannot improve
their performance in terms of delivery probability, latency,
speed, and cost by adding RSUs since they are mostly
designed for network of which majority are mobile nodes.
Figure 13.
Delivery cost.
V. CONCLUSION AND FUTURE WORK
In this paper, we have proposed a heterogeneous architec-
ture comprising ﬁxed infrastructure, mobile infrastructure,
and mobile nodes. In addition, we propose a realistic mo-
bility model and metrics. Several well-known opportunistic
routing protocols are tested with this architecture under
constraints of limited buffer size, message size, time-to-
live, and unpredictable movement. Our observation shows
that none of the evaluated protocols performs well with a
heterogenous scenario, such as the one described in this
paper. We also observe that most of the algorithms do not
improve their performances when adding RSUs. Since a
single simple routing algorithm does not sufﬁce to improve
the overall message delivery performance, a contribution of
several algorithms should be considered:
• Road Side Units (RSU), as used in the backbone
network, should not only carry received information
to a central server but also disseminate information
to nearby passing nodes. This communication shortcut
leaves the base station out of the loop and contributes a
better delivery speed and delivery cost. The Epidemic
routing protocol with a ﬂooding control mechanism is
best suitable for the RSU network if delivery cost is
not the most important.
• Buses, which act as data mules or message ferries,
have a mobility pattern based on ﬁxed routes and time
schedules. The Message Ferry routing protocol is most
appropriate.
• Pedestrians and cars are best served by stochastic and
context-based schemes. However, exchanging messages
between nodes that use different routing protocols is
a challenge. For examples, nodes running PRoPHET
fail to update the delivery predictability of nodes run-
ning Epidemic due to the unavailability of delivery
predictability in Epidemic router.

289
International Journal on Advances in Networks and Services, vol 5 no 3 & 4, year 2012, http://www.iariajournals.org/networks_and_services/
2012, © Copyright by authors, Published under agreement with IARIA - www.iaria.org
We also plan to take message priority into consideration.
Because designing an optimal routing protocol with a de-
livery probability of 100% under all conditions is difﬁcult,
prioritizing messages becomes a necessity. Message prior-
itization relies on the importance of information, creation
time, or source location. Priorities must be deﬁned by a
speciﬁc application, for instance, public safety applications
deﬁne the priority based on the source location, creation
time, and seriousness of detected events. One last point
of our concern is the security and privacy of information.
A leading principle should be that the creator owns the
data and decides how the data can be used by others.
However, one may argue that in situations of emergency this
principle may be overruled by authorities. This issue will be
addressed in future research. Currently we are developing
a heterogeneous algorithm, termed as Uniﬁed [30] and a
testbed is planned to implement and evaluate the proposed
heterogeneous algorithm.
ACKNOWLEDGMENT
This work is supported by the SenSafety project in the
Dutch Commit program.
REFERENCES
[1] V.-D. Le, H. Scholten, and P. Havinga, “Towards opportunistic
data dissemination in mobile phone sensor networks,” in Proc.
of The Eleventh International Conference on Networks (ICN
2012), 2012, pp. 139–146.
[2] I. Akyildiz, W. Su, and Y. Sankarasubramaniam, “A survey
on sensor networks,” IEEE Comm. Magazine, vol. 40, pp.
102–114, 2002.
[3] Y. Wang and H. Wu, “Delay/fault-tolerant mobile sensor
network (dft-msn): A new paradigm for pervasive information
gathering,” IEEE Trans. Mobile Computing, vol. 6, pp. 1021
– 1034, 2007.
[4] C. Perkins, E. Belding-Royer, and S. Das, “Ad hoc on-demand
distance vector (aodv) routing,” RFC Editor, United States,
Tech. Rep., 2003.
[5] D. B. Johnson, D. A. Maltz, and J. Broch, “Ad hoc net-
working.”
Boston, MA, USA: Addison-Wesley Longman
Publishing Co., Inc., 2001, ch. DSR: the dynamic source
routing protocol for multihop wireless ad hoc networks, pp.
139–172.
[6] D. Camara, C. Bonnet, and F. Filali, “Propagation of public
safety warning message: A delay tolerant approach,” in Proc.
IEEE Communications Society WCNC, 2010.
[7] A. T. Erman, A. Dilo, and P. Havinga, “A fault-tolerant data
dissemination based on honeycomb architecture for mobile
multi-sink wireless sensor networks,” in Proc. of the Sixth
International Conference on Intelligent Sensors, Sensor Net-
works and Information Processing, ISSNIP 2010, 2010, pp.
97–102.
[8] T. Spyropoulos, K. Psounis, and C. S. Raghavendra, “Efﬁcient
routing in intermittently connected mobile networks: the
multiple-copy case,” IEEE/ACM Trans. Netw., vol. 16, no. 1,
pp. 77–90, Feb. 2008.
[9] R. Schwartz, R. Barbosa, N. Meratnia, G. Heijenk, and
J. Scholten, “A directional data dissemination protocol for
vehicular environments,” Computer Communications, vol. 34,
pp. 2057–2071, 2011.
[10] B. K. Polat, P. Sachdeva, M. H. Ammar, and E. W. Zegura,
“Message ferries as generalized dominating sets in intermit-
tently connected mobile networks,” Pervasive and Mobile
Computing, vol. 7, pp. 189–205, 2011.
[11] D. Borsetti, C. Casetti, C.-F. Chiasserini, M. Fiore, and J. M.
Barcel´o-Ordinas, “Virtual data mules for data collection in
road-side sensor networks,” in Proceedings of the Second
International Workshop on Mobile Opportunistic Networking,
ser. MobiOpp ’10.
New York, NY, USA: ACM, 2010, pp.
32–40.
[12] A. Vahdat and D. Becker, “Epidemic routing for partially con-
nected ad hoc networks,” Department of Computer Science,
Duke Univeristy, Durham, NC, Tech. Rep., 2000.
[13] T. Spyropoulos, K. Psounis, and C. Raghavendra, “Single-
copy routing in intermittently connected mobile networks,” in
Proc. of Sensor and Ad Hoc Communications and Networks
(SECON), 2004, pp. 235–244.
[14] T. Spyropoulos, K. Psounis, and C. Raghavendra, “Spray and
wait: An efﬁcient routing scheme for intermittently connected
mobile networks,” in Proc. of ACM SIGCOMM Workshop on
Delay-Tolerant Networking (WDTN), 2005.
[15] S. Jain, K. Fall, and R. Patra, “Routing in a delay tolerant
network,” in Proc. of ACM SIGCOMM on Wireless and
Delay-Tolerant Networks, 2004.
[16] A. Lindgren and A. Droia, “Probabilistic routing protocol
for intermittently connected networks,” Internet Draft draft-
lindgren-dtnrg-prophet-02, Work in Progress, 2006.
[17] E. M. Daly and M. Haahr, “Social network analysis for rout-
ing in disconnected delay-tolerant manets,” in Proceedings
of the 8th ACM international symposium on Mobile ad hoc
networking and computing, ser. MobiHoc ’07.
New York,
NY, USA: ACM, 2007, pp. 32–40.
[18] P. Hui, J. Crowcroft, and E. Yoneki, “Bubble rap: social-
based forwarding in delay tolerant networks,” in Proceedings
of the 9th ACM international symposium on Mobile ad hoc
networking and computing, ser. MobiHoc ’08.
New York,
NY, USA: ACM, 2008, pp. 241–250.
[19] J. A. Bitsch Link, N. Viol, A. Goliath, and K. Wehrle,
“Simbetage: utilizing temporal changes in social networks
for pocket switched networks,” in Proceedings of the 1st
ACM workshop on User-provided networking: challenges and
opportunities, ser. U-NET ’09.
New York, NY, USA: ACM,
2009, pp. 13–18.
[20] A. Keranen, J. Ott, and T. Karkkainen, “The one simulator
for dtn protocol evaluation,” in Proc. of the 2nd International
Conference on Simulation Tools and Techniques(SIMUTools),
2009.

290
International Journal on Advances in Networks and Services, vol 5 no 3 & 4, year 2012, http://www.iariajournals.org/networks_and_services/
2012, © Copyright by authors, Published under agreement with IARIA - www.iaria.org
[21] Newcom++, “State of the art of research on opportunistic
networks,
and
deﬁnition
of
a
common
framework
for
reference
models
and
performance
metrics,”
Downloaded
from
http://www.newcom-project.eu/public-
deliverables/research/DR11.1-ﬁnal-1.pdf/view.
[22] R. Shah, S. Roy, S. Jain, and W. Brunette, “Data mules: mod-
eling a three-tier architecture for sparse sensor networks,” in
Sensor Network Protocols and Applications, 2003. Proceed-
ings of the First IEEE. 2003 IEEE International Workshop
on, may 2003, pp. 30 – 41.
[23] W. Zhao, M. Ammar, and E. Zegura, “A message ferrying
approach for data delivery in sparse mobile ad hoc networks,”
in Proceedings of the 5th ACM international symposium on
Mobile ad hoc networking and computing, ser. MobiHoc ’04.
New York, NY, USA: ACM, 2004, pp. 187–198.
[24] Y. Xian, C. Huang, and J. Cobb, “Look-ahead routing and
message scheduling in delay-tolerant networks,” in Proc.
IEEE Conference on Local Computer Networks (LCN), 2010.
[25] A. Lindgren, T. Karkkainen, and J. Ott, “Simulating mobility
and dtns with the one,” Journal of Communications, 2010.
[26] F. Ekman, A. Keranen, J. Karvo, and J. Ott, “Working day
movement model,” in Proc. of The 1st ACM SIGMOBILE
workshop on Mobility models (MobilityModels), 2008.
[27] A. Chaintreau, P. Hui, J. Crowcroft, C. Diot, R. Gass, and
J. Scott, “Impact of human mobility on the design of op-
portunistic forwarding algorithms,” in Proc. IEEE Infocom,
2006.
[28] J.
Scott,
R.
Gass,
J.
Crowcroft,
P.
Hui,
C.
Diot,
and
A.
Chaintreau,
“CRAWDAD
trace
cam-
bridge/haggle/imote/infocom2006
(v.
2009-05-29),”
Downloaded
from
http://crawdad.cs.dartmouth.edu,
May
2009.
[29] G.Fathima and R. Wahidabaru, “Buffer management for pref-
erential delivery in opportunistic delay tolerant networks,”
International Journal of Wireless and Mobile Networks
(IJWMN), vol. 3, pp. 15–28, 2011.
[30] V.-D. Le, H. Scholten, and P. Havinga, “Uniﬁed routing for
data dissemination in smart city networks,” in Proc. of the 3rd
International Conference on the Internet of Things (IoT2012),
2012.

