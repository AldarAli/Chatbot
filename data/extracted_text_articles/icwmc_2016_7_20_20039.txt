RSS-Based Indoor Positioning with  
Weighted Iterative Nonlinear Least Square Algorithm 
 
Veli İlçi 
Map and Cadastre Program 
Hitit University 
Çorum, Turkey 
E-mail: veliilci@hitit.edu.tr 
Hüseyin Çizmeci 
Computer Programming Program 
Hitit University 
Çorum, Turkey 
E-mail: hcizmeci@hitit.edu.tr 
Reha Metin Alkan 
Geomatic Engineering 
İstanbul Technical University 
İstanbul, Turkey 
E-mail: alkanr@itu.edu.tr 
V. Engin Gülal 
Geomatic Engineering 
Yildiz Technical University 
İstanbul, Turkey 
E-mail: egulal@yildiz.edu.tr 
Mustafa Coşar 
Computer Engineering 
Hitit University 
Çorum, Turkey 
E-mail: mustafacosar@hitit.edu.tr 
 
 
 
 
Abstract— In recent years, researches on indoor positioning 
have become one of the most studied subject. This paper 
presents a real-time Wi-Fi-based indoor localization system 
using 2.4 GHz Wi-Fi signals. This experiment consists of two 
main phases. In the first phase, establishing a relationship 
between the received signal strength and the distance via signal 
propagation model, the distances between the mobile devices 
and the access points were determined using the log-distance 
path loss model. In the second stage, to test the usability and 
the performance of weighted iterative nonlinear least square 
algorithm for Wi-Fi based indoor positioning application, 
coordinates of the mobile device were estimated using this 
algorithm. This system runs on mobile devices in real time at 
line-of-sight indoor environments.  
Keywords - Indoor positioning; RSS; signal propagation 
model;  weighted least square; Wi-Fi; 2.4 GHz. 
I. 
 INTRODUCTION 
In recent years, academic and commercial studies on 
indoor positioning that have focused on producing real-time, 
and accurate location information has become one of the 
important 
investigation 
issues 
[1]. 
In 
the 
outdoor 
environments, sufficient 3D positioning accuracies can be 
obtained using Global Navigation Satellite Systems (GNSS) 
[2]. However, GNSS signals are losing its influence due to 
various reasons, such as multipath and reflection in indoor 
environments. Therefore, the accuracy obtained in outdoors 
environments can’t be achieved in indoor environments 
using GNSS. In recent years, in order to obtain the desired 
positioning accuracy in indoor areas, many studies have been 
conducted using different technologies such as GNSS [3], 
Ultra-Wide Band (UWB) [4], Radio Frequency Identification 
(RFID) [5], Infrared (IR), Bluetooth [6] and Wireless Local 
Area Network (WLAN) [7]. Among these technologies, 
WLAN stands out because of using the pre-existing Wi-Fi 
infrastructure within buildings, and also Wi-Fi signals can be 
received by smartphones and tablets. So, WLAN-based 
indoor localization does not require any additional cost or 
hardware. Therefore, WLAN-based indoor localization has 
been frequently investigated in recent years. 
Various classifications in many studies have been made 
for indoor positioning system. One of these classifications 
has been made depending on the distances named as 
rangeless and the range-based classification [8]. Rangeless 
algorithms are working regardless of the distance. Range-
based location algorithms determine the location of the 
mobile device using the distances from the reference devices. 
Range-based algorithms are classified as Received Signal 
Strength (RSS), Angle of Arrival (AOA), Time of Arrival 
(TOA), and Time Difference of Arrival (TDOA) [9]. TOA, 
TDOA and AOA algorithms require dedicated equipment to 
perform the distance and angle measurements, so they 
require 
additional 
costs 
[10]. 
However, 
RSS-based 
algorithms require no additional hardware or cost. 
In the literature, RSS-based indoor positioning is divided 
into two different approaches named as fingerprinting and 
propagation model-based [11]. The Fingerprinting approach 
consists of two phases named as offline and online phases. In 
the offline phase, a radio-map is created in the workspace 
using the signal strength values received from all Access 
106
Copyright (c) IARIA, 2016.     ISBN:  978-1-61208-514-2
ICWMC 2016 : The Twelfth International Conference on Wireless and Mobile Communications (includes QoSE WMC 2016)

Points (APs). In the online phase, the position of the device 
is established by matching the RSS values that of the offline 
phase. The major drawback of this approach is requires more 
labor during the offline phase measurements. The 
Propagation model-based approach consists of two phases. 
In the first phase, distances between the mobile device and 
APs are determined using signal propagation models and in 
the second phase, the mobile device’s position is determined 
using three or more distances with positioning algorithms 
[12], such as Trilateration, Least Squares, Extended Kalman 
Filter, etc. Such distances can be determined by performing 
special applications in the workspace or obtained using 
predetermined signal propagation models without requiring 
any additional applications such as the ITU Path loss model 
[ITU] proposed by the International Communication Union 
and Log-distance path loss model and etc. RSS signals are 
affected by external factors in indoor environments such as 
fading, diffraction and multipath, so the distance estimation 
stage is one of the most critical phases for RSS-based indoor 
positioning applications [13].    
In this study, a RSS-based indoor positioning study has 
been conducted at a direct line-of-sight indoor environment. 
The Log-distance path loss model used to determine the 
distances between the mobile device and APs and the 
position of the mobile device was established using the 
weighted iterative nonlinear least square method (WINLSQ). 
Positioning accuracy of the used method was tested 
experimentally at 27 different points. 
The outline of the paper is arranged as follows. Section 2 
formulates the distance estimation stage using signal 
propagation model, and positon estimation of the mobile 
device using WINLSQ is described in Section 3. Section 4 
describes the study area and evaluates experimental results, 
and finally, the conclusion of the paper is presented in 
Section 5. 
II. 
SIGNAL PROPAGATION MODEL 
The ranges between the mobile devices and APs are 
usually estimated through RSS signals due to ease of 
implementation and not requiring any additional costs [14]. 
Signal propagation models are used to obtain RSS-based 
ranges. RSS are affected by environmental conditions 
depending on obstacles, multipath, scattering, reflection, 
shadowing and diffraction in indoor areas [15]. So, ranges 
obtained using the RSS can include large range errors, and 
this directly affects the accuracy of the position estimation.      
Signal strength decreases logarithmically depending on 
the distance [16]. To model the relationship between the 
distance and RSS in the indoor or outdoor environments, 
many signal propagation models have been proposed. Due to 
its ease of use, log-distance path loss model is mostly used in 
the literature [17].   
Log-distance path loss model is represented in the 
following equations [15-16]: 
 
 




X
d )
PL(d ) 10nlog ( d
(dB)
PL
0
10
0
 
(1)                                                
20log (d )
20log (4 )
20log
PL(d )
0
10
10
10
0
 
 
 
    (2) 
where,
PL(d )
0  is the path loss at the reference distance,n is 
the path loss exponent depends heavily on the studied indoor 
environment and building type,d is the distance between the 
receiver and the transmitter in meters, 
0
d is the reference 
distance in meters  usually chosen as 1 meter,

X is the 
Gaussian random variable with zero mean and standard 
deviation of  dB, and is the wavelength of the signal in 
meters.  
III. 
WEIGHTED ITERATIVE NONLINEAR LEAST SQUARE 
ALGORITHM 
Minimizing the square error, linear and non-linear 
parameters can be estimated using least square algorithms 
[8]. In the absence of variance information, non-linear 
parameter estimation can be accepted [18]. The solution of 
non-linear least square needs linearization using a few 
algorithms, such as the Taylor series.     
In the literature, many least square algorithms are used to 
solve the positioning problem for indoor localization 
problem. In this study, we use the WINLSQ algorithm that is 
proposed in [19]. In this algorithm, the observation model is 
given as; 
 
v
(h x )
z


  
(3) 
where, z is the measurement vector, and the function of the 
state vector x is represented by 
h(x)
. The equation (4) can 
be obtained with the linearization of the nonlinear 
measurement vector around the current state estimation xˆ  
[20]. 
 
v
H x
h xˆ( )
z
 


                          (4) 
where, the innovation of the state vector is presented as: 
  
xˆ
x
x

 
                                  (5) 
and, design matrix is represented as: 
                                     
 
 
dx
H  dh(x)
                                (6) 
The measurement misclosure vector z
 can be obtained by 
rearranging the equation (4): 
                                     
v
H x
z
 
 
                              (7) 
The solution (8), covariance matrix of the solution (9) and 
new state vector (10) are given respectively as: 
                               
z
(H R H) H R
xˆ
1
T
1
1
T






                (8) 
                                   
1
1
T
xˆ
(H R H)
C


 
                          (9)  
                                      
xˆ
xˆ
xˆ updated
 

                  
(10) 
where, R is the observation covariance matrix. The iteration 
of this process continues until 
xˆ  threshold
 . The residual 
vector (11) and its covariance matrix (12) are given as 
follows: 
 
h xˆ( )
z
r


  
(11) 
 
T
1
1
T
r
H(H R H) H
R
C




  
(12) 
IV. 
EXPERIMENTAL RESULTS 
This experiment consists of two main phases, distance 
estimation using the Log-distance path loss model and 
107
Copyright (c) IARIA, 2016.     ISBN:  978-1-61208-514-2
ICWMC 2016 : The Twelfth International Conference on Wireless and Mobile Communications (includes QoSE WMC 2016)

position estimation using WINLSQ. To assess the 
performance of this system, a static test is conducted at 27 
different points (named as observed points) in the application 
area. Four similar ASUS DSL-AC68U APs are placed in the 
corners of the application area that is 10 m x 9.6 m at line-of-
sight indoor environment. In Fig. 1, red and green points 
indicate the locations of APs and the observed points, 
respectively, in the experimental area. Two dimensional 
geodetic coordinates of APs and the observation points were 
determined accurately using the total station, and that is 
accepted as the reference coordinates. Simultaneously 
transmitted 2.4 GHz Wi-Fi signals (IEEE 802.11ac) from the 
APs were collected by a Samsung Note 5 mobile device that 
has an Android operating system. These signals were 
converted into distances using the Log-distance path loss 
model, and the position of the 27 observed points were 
estimated 
using 
the 
WINLSQ 
algorithm. 
JAVA 
programming language was used with the JAMA basic linear 
algebra package to make all the calculations. The data was 
collected 150 times at all of the observation points, and the 
coordinates of these points was obtained using the mentioned 
algorithms in real time by mobile device. The differences 
between 
the 
obtained 
coordinates 
and 
the 
known 
coordinates, and the mean value of the differences are 
depicted in Fig. 2.  
According to the values in Fig. 2, the positioning error 
values are varying between 0.81-13.16 m. Mean values of 
these errors is 3.73m, and standard deviation of the errors are 
2.37 m. While errors of 26 observed points are up to 7.13 m, 
exceptionally only the 22th point’s positioning error is more 
than 8 m. This is the reason that huge RSS fluctuations 
received from AP-2 and AP-3 during the measurement of 
27th point. These values were tested with the 
2
 test, and they 
passed the test successfully at a 95% confidence level. 
 
  
Figure 1.Experimental area 
V. 
CONCLUSIONS 
In this paper, we examined the usability of the weighted 
iterative nonlinear least square algorithm in a 2.4 GHz Wi-Fi 
based indoor environment to find the position of the mobile 
device. The relationship between the distance and RSS was 
determined using log-distance path loss model via received 
signals strength. Weighted iterative nonlinear least square 
algorithm was adopted for estimation of the position. 
Obtained results indicated that 92 percent of the error 
values were smaller 5 meter. Although, these results are 
enough for many indoor positioning applications, some error 
values are still very huge. It is clear that this situation 
emerges from the fluctuations of the RSS values. In order to 
eliminate this fluctuation, raw signal values have been 
filtered using other algorithms before finding the distances.     
ACKNOWLEDGENT 
The authors would like to thanks the Hitit University 
Scientific Research Projects Units for supporting this 
research (MUH19002.15.004). 
 
 
 
Figure 2. The differences between reference and estimated coordinates are shown as the blue bars and mean value of differences are shown as the green line. 
108
Copyright (c) IARIA, 2016.     ISBN:  978-1-61208-514-2
ICWMC 2016 : The Twelfth International Conference on Wireless and Mobile Communications (includes QoSE WMC 2016)

REFERENCES 
[1] J. Yim, S. Jeong, K. Gwon, and J. Joo, “Improvement of 
Kalman Filters for WLAN based Indoor Tracking,” Expert 
Systems with Applications, vol.37, pp.426-433, 2010, 
doi:10.1016/j.eswa.2009.05.047. 
[2] J. Wang, R. V. Prasad, X. An, and I. G. M. M. Niemegeers, 
“A study on wireless sensor network based indoor positioning 
systems 
for 
context-aware 
applications,” 
Wireless 
Communications and Mobile Computing, vol. 12, issue. 1, pp. 
53-70, 2012. 
[3] I. Selmi, and N. Samama, “Indoor positioning with GPS and 
GLONASS-like signal use of new codes and a repealite-based 
infrastructure in a typical museum building,” annals of 
telecommunications, vol. 69, pp. 641-655, 2014, doi: 
10.1007/s12243-014-0422-y. 
[4] C. Basaran, J. Yoon, S. H. Son, and T. Park, “Self-
Configuring Indoor Localization Based on Low-Cost 
Ultrasonic Range Sensors,” Sensors, vol.14, pp.18728-18747, 
2014, doi:10.3390/s141018728. 
[5] L. Geng, M. F. Bugallo, A. Athalye, and P. M. Djurić, 
“Indoor Tracking With RFID Systems,” IEEE Journal of 
Selected Topics in Signal Processing, vol. 8, no. 1, pp. 96-
105,  February 2014, doi: 10.1109/JSTSP.2013. 
[6] C. Liang, et al., “Bayesian Fusion for Indoor Positioning 
Using 
Bluetooth 
Fingerprints,” 
Wireless 
Personal 
Communications, 
vol. 
70, 
pp. 
1735-1745, 
2013, 
doi:10.1007/s11277-012-0777-1. 
[7] J. Yim, “Development of Web Services for WLAN-based 
Indoor Positioning and Floor Map Repositories,” International 
Journal of Control and Automation, vol.7, no.3, pp.63-74, 
2014, doi:10.14257/ijca.2014.7.3.07. 
[8] H. Li, “Low-Cost 3D Bluetooth Indoor Positioning with Least 
Square,” Wireless Personal Communications, vol.78, no.2, 
pp.1331-1344, 2014, doi: 10.1007/s11277-014-1820-1. 
[9] R. Khan, S. U. Khan, S. Khan, and M. U. A. Khan, 
“Localization Performance Evaluation of Extended Kalman 
Filter in Wireless Sensor Networks,” Procedia Computer 
Science, vol. 32, pp. 117-124, 2014. 
[10] P. Tarrio, A. M. Bernardos, J. A. Besada and J. R. Casar, “A 
new positioning technique for RSS-Based localization based 
on a weighted least squares estimator,” 2008 IEEE 
International Symposium on Wireless Communication 
Systems, 
Reykjavik, 
pp. 
633-637, 
2008, 
doi: 
10.1109/ISWCS.2008.4726133. 
[11] M. A. Al-Ammar, et al., “Comparative Survey of Indoor 
Positioning Technologies, Techniques, and Algorithms,” 
Cyberworlds (CW), 2014 International Conference on, 
Santander, pp. 245-252, 2014. 
[12] J. Cota-Ruiz, J. G. Rosiles, E. Sifuentes, and P. Rivas-Perea, 
“A Low-Complexity Geometric Bilateration Method for 
Localization in Wireless Sensor Networks and Its Comparison 
with Least-Squares Methods,” Sensors, vol. 12, pp. 839-862, 
2012. 
 
 
 
 
 
[13] R. Khan, F. Sottile, and M. A. Spirito, “Hybrid Positioning 
through Extended Kalman Filter with Inertial Data Fusion,”  
International 
Journal 
of 
Information 
and 
Electronics 
Engineering, vol. 3, no. 1, pp. 127-131, January 2013. 
[14] J. Koo and H. Cha, “Localizing WiFi Access Points Using 
Signal Strength,” IEEE Communications Letters, vol. 15, no. 
2, 
pp. 
187-189, 
February 
2011, 
doi: 
10.1109/LCOMM.2011.121410.101379 
[15] J. S. Seybold, “Introduction to RF Propagation,” 1th ed., vol. 
1, John Wiley&Sons:USA, 2005, pp. 210-217. 
[16] T. S. Rappaport, “Wireless Communications: Principles and 
Practice,” Prentice Hall PTR, Upper Saddle River, NJ, 2001.   
[17] F. Xiao, M. Wu, H. Huang, R. Wang, and S. Wang, “Novel 
Node Localization Algorithm Based on Nonlinear Weighting 
Least Square for Wireless Sensor Networks,” International 
Journal of Distributed Sensor Networks, vol. 2012, Article ID 
803840, 6 pages, 2012, doi:10.1155/2012/803840.        
[18] W. Wang, H. Ma, Y. Wang, and M. Fu, “Performance 
analysis based on least squares and extended Kalman filter for 
localization of static target in wireless sensor networks,” Ad 
Hoc Networks, vol. 25, part A, pp. 1- 15, February 2015.        
[19] Y. Zhuang, Z. Syed, J. Georgy, and N. El-Sheimy, 
“Autonomous smartphone-based WiFi positioning system by 
using access points localization and crowdsourcing,” 
Pervasive and Mobile Computing, vol. 18, pp. 118-136, April 
2015, doi: http://dx.doi.org/10.1016/j.pmcj.2015.02.001.   
[20]  Y. Zhuang, B. Wright, Z. Syed, Z. Shen, and N. El-Sheimy, 
“Fast WiFi access point localization and autonomous 
crowdsourcing,” Ubiquitous Positioning Indoor Navigation 
and Location Based Service (UPINLBS), 2014, Corpus 
Christ, TX, pp. 272-280, 2014, doi: 10.1109/UPINLBS.2014.  
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
109
Copyright (c) IARIA, 2016.     ISBN:  978-1-61208-514-2
ICWMC 2016 : The Twelfth International Conference on Wireless and Mobile Communications (includes QoSE WMC 2016)

