Influences on the Detection Probability of
Ferromagnetic Objects
Lukas Heindler
Johannes Kepler University Linz
Linz, Austria
email: lukas.heindler@jku.at
Ruben Piepgras
Johannes Kepler University Linz
Linz, Austria
email: ruben.piepgras@jku.at
Bernhard G. Zagar
Johannes Kepler University Linz
Linz, Austria
email: bernhard.zagar@jku.at
Abstract—The detection of small masses of ferromagnetic ma-
terials within an existing magnetic circuit can be very challenging.
It is particularly difficult if the ferromagnetic material is only
coupled loosely via comparably large air gaps while the rest
of the circuit is ferromagnetic as well as a good electrical
conductor. The problem is further aggravated by the fact that the
mass can exhibit a substantial remanence of unknown strength
and polarity. In principle, the influence of remanence would
be suppressed using an AC excitation of the readout circuit.
However, this would excite very strong eddy currents in any
conductor within and in close proximity to the sensing device.
Thus, even non-magnetic metallic components would cause a
non-zero measurement reading. Therefore, we optimized a DC
magnetic circuit that allows the detection of ferromagnetic
materials. In our use case, we concentrated on cylindrical objects
separated from the sensor by an air gap of up to 5 cm.
Index Terms—magnetic field; Hall sensor; remanence; magnetic
disturbances
I. INTRODUCTION
Detecting ferromagnetic objects with a coil induced mag-
netic field over a certain distance from the sensor relies
amongst other things on the size of the solenoid. It deter-
mines how far the magnetic field extends, as well as the
change of reluctance caused by the object within the magnetic
circuit. Ideally, this idea of the measurement works over
any separation of the object from the sensor and with any
disturbance, like an object’s remanence. In reality, however,
the finite resolution of the sensing element is limited to
certain constraints. For different use cases, different sensors for
magnetic fields are available which differ in price, precision,
size, and sensibility. Simple Hall-effect sensors [8, page 48-
18] are widely used in many areas because of reliability,
size, and robustness against mechanical impacts. Typical im-
plementations [8, page 48-1] of Hall sensors are position
sensors [8, page 6-119], frequency sensors [8, page 16-10],
limit position switches, current sensing meters [8, page 38-
6], angular velocity and flow rate meters [8, page 6-21] to
name a few. Usual sensitivities of Hall-effect sensors reach
from 32.5 mV/mT to more than 50 mV/mT with a range of
up to thousands of mT. In our particular use case, the sensor
has a sensitivity of 100 mV/mT and a range of ±20 mT. In
Figure 1, the schematic of our setup is shown with all relevant
components. Please note that for confidentiality reasons, the
ferromagnetic object of the magnetic circuit, is not indicated
here. The Hall sensor is attached in close proximity to the
end face of a cuboid iron core with a length of lC = 69 mm
and equal sides of wC = 18.5 mm in width. Furthermore,
the characterization setup consists of an xy-translation stage
driven by two Oriel stepper motors, allowing micrometer dis-
placement resolution. For the characterization of the prototype
of our envisioned sensor we are targeting a measurement grid
of 195 times 40 measurements, with a lateral displacement
per step of ∆x = 250 µm and ∆y = 1200 µm and axially
of ∆z = 480 µm, resulting in a measurement data matrix of
7800 readings. Detection results of ferromagnetic objects using
a solenoid and a Hall sensor, can greatly vary if the object has a
remanent magnetic field. Therefore the impact of a remanence
on the existing measurement system will be discussed in the
following sections.
Furthermore, this contribution is structured in four more
sections. In Section II, we detail and characterize the sensing
element. The results of which are used to decide on the
magnetic field sensor principle. Section III details the devised
measurement system, and Section IV provides some selected
measurement results, limited to simple cylindrical test objects.
II. THEORY OF SENSOR OPERATION
Understanding the underlying sensor principles is necessary
to follow the decision making during our work. Therefore,
some theory is presented in this section.
A. Hall-Effect, Lorentz Force, and Remanence
Electric current is defined as charge per time which passes
through a specified area. If a conductor is placed in a magnetic
field, the Lorentz force [8] deflects charge carriers out of their
paths following the locally acting electric field. The Lorentz
force is given by
FL = Q · (v × B) ,
(1)
where Q is a charge, v its mean velocity, and B a magnetic
field.
In Figure 2, a schematic sensor is shown. A Hall-effect sen-
sor consists of a semi-conducting thin sheet with a thickness
much smaller than its width and length. Driven by a constant
control current, it allows to measure the magnetic flux density
component By passing the sensor’s surface orthogonally. The
charges of the control current get deflected, resulting in the
35
Copyright (c) IARIA, 2022.     ISBN:  978-1-61208-918-8
SENSORDEVICES 2021 : The Twelfth International Conference on Sensor Device Technologies and Applications

B
IL
Hall sensor ØH
coil N, L
y
x
xy-translation stage
∆x displacement
∆y displacement
magnetic object ØC, lC
iron core
z
y0 + ∆y
Fig. 1. The schematic of the built measure consisting of the magnetic object,
Hall sensor, iron core, coil, translation stage, and the current source.
formation of an electric field strength component Ex that can
be picked up. This yields a measurement proportional to the
magnetic field strength. Applying the right-hand-rule a current,
and a magnetic field result in a voltage between the electrodes
orthogonal to both.
Fig. 2. The schematic of a Hall sensor [1].
magnetic fields may be caused by electric currents or magneti-
zations. We also analyze magnetic objects with respect to their
remanent magnetizations. Remanence describes the remaining
magnetic field of a body after magnetization and removal
of the external magnetic field. Figure 3 shows a typical
hysteresis loop for a soft magnetic iron. In the hysteresis curve
remanence can be displayed on the ordinate where the external
magnetic excitation H is zero [8].
Since we are interested in the detection of a ferromagnetic
object in a certain distance to the sensor, any magnetic
remanence is limiting the sensitivity of our setup. It is thus
essential, to characterize the existing prototype with respect
to its susceptibility to remanence close to the sensor.
Fig. 3. Magnetic hysteresis curves including the initial curves. On the abscissa
is the external magnetic field H and on the ordinate the remanent magnetic
flux density Br [2].
III. SENSOR SYSTEM
Initial analyses and experiments resulted in the choice of
using a Hall-effect type sensing element. It satisfies sensitvity
and temperature constraints, as well as assembly requirements.
Considerations concerning the type of magnetic excitation
used, either direct current (DC) or alternating current (AC),
were quickly settled for a DC-excited electromagnet. The
reason is the fact that it is undetermined whether the complete
system will be used and operated in close proximity to
electrically conducting structural components. These would
cause severe eddy currents artefacts whose secondary magnetic
fields would strongly influence the detection probability.
In this section, we detail the steps to characterize the sensor
system and determine its vulnerability to external magnetic
fields. Whether they are caused by ferromagnetic objects
located close-by or by eddy currents. Eddy currents can be
caused by either a motional induction, if the sensor is moved
relative to the sensed object, or transformed induction, if
the sensor is at rest but exposed to a time-varying external
magnetic flux.
Figure 4 shows the top view and Figure 5 shows a lateral
view of the measurement setup to determine the sensor’s sensi-
tivity. The hatched areas of the photos hide, for confidentiality
reasons, the typical object to be sensed.
The motor-driven xy-translation stage shifts the sensor
axially and laterally relative to the fixed ferromagnetic object.
The motors are controlled by an ORIEL MIKE Encoder via
MATLAB. A constant current source typically feeds 100
mA into a 1000 turn solenoid. This results in a magnetic
flux of 4.65 mT, measured at the core’s face-plate. To avoid
motion induced eddy currents, the core consists of the non-
conducting ceramic compound ferrite. A millitesla-meter from
the company PHYWE [5], with a range of up to ±2000 mT,
is used as the Hall sensor in these preliminary experiments.
At each position of the sensor arrangement a mT-reading is
36
Copyright (c) IARIA, 2022.     ISBN:  978-1-61208-918-8
SENSORDEVICES 2021 : The Twelfth International Conference on Sensor Device Technologies and Applications

Fig. 4.
An initial magnetic circuit representing the sensors parts of the
measurement system consisting of a solenoid excited by a DC current to
generate a magnetomotive force of a few kA. It has a ferromagnetic core and
the Hall-effect sensor is located in the center of the core’s face-plate. Two
PC-controlled translation stages allow to traverse two-dimensional slice planes
(oriented in xy and xz directions) through the three-dimensional volume
around the sensor.
Fig. 5.
Lateral view of the configuration of Figure 4 including a core that
extends over and beyond the object hidden behind the hatched area.
taken. The readings from the millitesla-meter are put out as
tenth of volts and measured by a HP 34401 volt-meter. The
trajectory of the translation stage is a meander with step sizes
in the 250 µm range. In the post processing the readings are
converted to mT, saved to a matrix and plotted as shown in
the following figures.
Two configurations were compared. One with a very com-
pact excitation magnet for which the ferrite core does not
extend beyond the solenoid, resulting in a particularly compact
arrangement. The second configuration has a ferrite core
extending beyond the solenoid by approximately 80 mm.
Thereby it guides the magnetic field lines closer to the sensed
object. This results in the possibility to cover a larger air gap,
increasing the sensitivity. A side effect of the protruding core is
rendering the system less compact and more prone to physical
damage while in operation.
IV. RESULTS
The characterization result is displayed in Figure 6 for the
short core arrangement. In the top figure, one can observe
that for separation distances of up to 8 mm between the
solenoid’s core and the object in y-direction, the sensitivity
is good. The incurred noise floor is sufficiently low. This
simple threshold discriminator circuit can reliably detect the
object. If in addition to the detection also information on the
relative location in x-direction were sought after, this sensor
arrangement allows to estimate lateral displacements in the
millimeter range. The bottom figure shows the comparably
large noise floor that one has to cope with, if larger separation
distances need to be covered by the system. Here, selecting
a good threshold γ, is a challenging task and needs to be
investigated in future work.
Figure 7 characterizes the protruding core sensor system.
It is able to detect objects to a greater separation distance,
exhibits a similar noise floor, but lacks the precision in locating
the object in lateral direction.
We can conclude, that the detection problem can more
reliably be served by the large air gap sensor. Thus further
characterization is limited to this type of sensor arrangement
only. As the setup is designed to tolerate a large magnetic
reluctance, the resulting variation of magnetic flux density at
the Hall-effect sensor is small. Its sensitivity and its detection
probability [9], [10] thus are very much dependent on the
incurred noise floor relative to the change in reading of the
deterministic signal’s mean. Referring to Figure 8 we define
the signal-to-noise ratio SNR to be:
SNR = [E {y(r) |object present}]2
Var {y(r) |object present}
(2)
with x(r) the spatially dependent (position vector r), ap-
propriately amplified, and band limited output signal of the
Hall sensor, y(r) the output signal of the realized matched
filter (MF) (with impulse response h(r′) that is designed to
maximize, at the output, the SNR, as defined in (2), E{· · · },
the expectation operator, and Var{· · · }, the variance operator.
37
Copyright (c) IARIA, 2022.     ISBN:  978-1-61208-918-8
SENSORDEVICES 2021 : The Twelfth International Conference on Sensor Device Technologies and Applications

Fig. 6. Using the short core the measurement results lead to a bell-shaped
dependency which declines with distance to the metallic object whose axis
of symmetry is close to ∆x = 25 mm. From a ∆y-displacement of 8 mm
on the object seems to no longer influence the sensed flux density sufficiently
for a reliable detection.
In order to optimize the MF, a series of measurements
were performed, whose results are displayed in Figures 9 and
10. Their statistical properties are listed in Table I. These
characteristic parameters are used to set the threshold γ, to
appropriately detect the object.
Assuming the noise being white and gaussian (WGN), the
matched filter is simplified to a cross-correlator. Its signal input
x(r) can be calculated with
x(r) = s(r) + n(r)
(3)
as a sum of its deterministic component s(r), solely depending
on the object’s magnetic properties, and the spatially depen-
dent noise term n(r). The filter’s reference signal h(r′) can
easily be obtained from a measurement. The object’s velocity
in passing the sensor, v, determines the mapping from a time-
dependent noise n(t) to the required spatially dependent noise
in (3).
For an SNR larger than five, the chance of a false negative as
well as a false positive, placed at the maximum design sensor-
Fig. 7. As expected a longer core which reaches over the metallic object leads
to greater sensibility at higher distances. Even at 15mm ∆y displacement a
slight difference of 0.8 mT can be detected.
x(r) matched filter
h(r)
Hall sensor
object
threshold
≷
y(r)
no
yes
γ
x
y
r(t) = [(x0 + ∆x)(y0 + ∆y)]
Fig. 8. Schematic of the realized signal processing scheme. The input x(r)
is the amplified and noise bandwidth-limited (we settled for a bandwidth of
2 kHz in order to be able to detect at a rather high throughput of objects
and their translational speed) output signal of the Hall sensor. The matched
filter is maximizing the SNR as given in (2). For detection a simple threshold
detector is used which computes a binary yes or no signal from the MF
output y(r).
to-object separation, assuming a gaussian probability density
function of the superposed noise, is less than 10−4.
Figure 9 represents measurement results, that were obtained
to simulate a remanence in the opposite direction. Therefore,
we reversed the current through the coil and changed the sign
of the outcome. This case is particularly interesting, because
the remanence can cause constructive or destructive superpo-
sition of magnetic fields. Hence increasing or decreasing the
measured value. This can cause lower peaks which cannot be
detected without an adaptive threshold γ.
Figure 10 displays short core measurement results from
moving the sensor over the magnetic object. This setup allows
for the detection of the optimal spot to place the sensor
element, relative to the magnetic object. One can observe, that
measurements at a distance of 48 mm are possible. However,
a considerable noise floor aggravates reliable detection.
The deterministic values of Figures 9 and 10 show that
the detection is possible. The stochastic properties of these
measurements let us conclude, that the noise model is indeed
38
Copyright (c) IARIA, 2022.     ISBN:  978-1-61208-918-8
SENSORDEVICES 2021 : The Twelfth International Conference on Sensor Device Technologies and Applications

Fig. 9. Switching the field direction of the coil yields even smaller differences
in magnetic flux but allows detection at higher distances.
Fig. 10. Moving the sensor 48 mm over the xz-plane enables to determine the
maximum magnetic flux density normal to the coil. This enables to optimize
the coil coordinates for improved sensibility. The results show that directly
over the magnetic object (located at ∆x = 24 mm, ∆z = 28 mm), the
magnetic field is strongest.
valid. As shown in Figures 11 and 12, both histograms of the
noise floors of the xy-plane and the xz-plane, respectively,
seem gaussian, which validate our assumptions. These data
allow to determine the expected values and variances of both
measurements. In Table I the calculated values are listed to
obtain a starting point for the adaptive threshold value γ. With
variances in these orders of magnitude, reliable measurements
can be carried out.
V. CONCLUSION AND FUTURE WORK
We reported on preliminary results obtained in the design
and optimization process of a magnetic circuit used in a
proximity detector for identifying ferromagnetic objects. The
design goal of reliably detecting objects over distances up
to 50 mm can be shown to be attained for the experimental
prototype analysed. it turns out, that the difference between
measurement results using a long core contrary to the short
Fig. 11. Separation of the stochastic from the deterministic properties of the
xy-plane measurements yields noise information which directly proofs prior
noise assumptions.
Fig. 12.
Using the stochastic qualities of the measurement values of the
xz-plane allows proofing prior assumptions concerning the noise model.
TABLE I
MEAN AND VARIANCE ESTIMATES OBTAINED FROM xy AND xz SLICES OF
THE SPATIALLY RESOLVED MAGNETIC FIELD READINGS USED TO
OPTIMIZE THE SIGNAL TO NOISE RATIO SNR OF THE DETECTION SCHEME.
Slice
∆x
∆y
E{· · · }
Var{· · · }
in mm
in mm
in mT
in (mT)2
xy-plane
0.25
1.2
1.15
8.89 · 10−9
xz-plane
0.48
0.48
6.16
23.93 · 10−6
39
Copyright (c) IARIA, 2022.     ISBN:  978-1-61208-918-8
SENSORDEVICES 2021 : The Twelfth International Conference on Sensor Device Technologies and Applications

core arrangement is considerable. Hence, the magnetic circuit
should be optimized to feature the optimal arrangement of the
core relative to the ferromagnetic object.
Moreover, reversing the direction of the remanent magnetic
field of the ferromagnetic object can add up destructively to the
field induced by the coil. However, the peak of the outgoing
signal of the Hall sensor can be lowered. If the remanence is
high enough, the peak could be beneath the threshold. Thus
further measures have to be taken into consideration.
Furthermore, the measured noise can be approximated by
a white noise model. This simplification allows implementing
basic signal processing algorithms which help to determine a
suitable threshold.
The next steps will be the analysis with respect to electrical
and magnetical interferences caused by the harsh environment
the sensor systems are designed to reliably operate in.
REFERENCES
[1] E. Schr¨ufer, L. Reindl, and B. Zagar, Elektrische Messtechnik (engl.
Electronic Measurement Techniques), Hanser Verlag, 2018.
[2] P. Ripka, Magnetic Sensors and Magnetometers, Artech House Inc.,
2000.
[3] J. P. Bastos, Electromagnetic Modelling by Finite Element Methods,
Dekker, 2003.
[4] S. Taghvaeeyan and R. Rajamani, Magnetic Sensor-Based Large Dis-
tance Position Estimation With Disturbance Compensation, IEEE Sen-
sors Journal Vol. 15, 2015.
[5] https://www.phywe.de/ [retrieved: Nov. 2021]
[6] R. Piepgras, S. Michlmayr, J. Egger, and B. Zagar, Potential und
Einschr¨ankungen der Messung magnetischer Mikrostrukturen mit einem
Faraday-Magnetometer (engl. Potential and Constraints of Measure-
ments of magnetic microstructures using a Faraday-Magnetometer), in
tm - Technisches Messen, Vol. 86, Nr. 10, Walter de Gruyter, pp.
577–585, 2019.
[7] R. Piepgras, S. Michlmayr, and B. Zagar, Optical Analysis of Magnetic
Microstructures, in SPIE: Proceedings of SPIE Volume 11144 - IMEKO
Joint TC1 -TC2 International Symposium on Photonics and Education
in Measurement Science 2019, Serie Proceedings of SPIE, Vol. 11144,
2019.
[8] J. G. Webster, The Measurement, Instrumentation and sensors Hand-
book, CRC Press LLC and Springer-Verlag, 1999.
[9] S. M. Kay, Fundamentals of Statistical Processing, Volume I: Estimation
Theory, Prentice-Hall Signal Processing Series, 1993.
[10] W. A. Gardner, Introduction to Random Processes with Applications to
Signals and Systems, 2nd ed. McGraw-Hill, 1990.
40
Copyright (c) IARIA, 2022.     ISBN:  978-1-61208-918-8
SENSORDEVICES 2021 : The Twelfth International Conference on Sensor Device Technologies and Applications

