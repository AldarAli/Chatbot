Agent-Based Model to Simulate Outpatient Consultations at the “Hospital de
Clínicas”
Work-in-Progress Paper
Ramona Galeano, Cynthia Villalba
Facultad Politécnica
Universidad Nacional de Asunción (UNA)
San Lorenzo, Paraguay.
e-mail: eligal0930@pol.una.py, cvillalba@pol.una.py
Dolores Rexachs, Emilio Luque
Computer Architecture and Operating Systems Department
Universitat Autónoma de Barcelona (UAB)
Barcelona, Spain
e-mail: dolores.rexachs@uab.es, emilio.luque@uab.es
Abstract—The “Hospital de Clínicas” is one of the busiest
hospitals in Paraguay, with an average of 1150 outpatient per
day. Usually, patients have to wait a very long time to be
treated, causing anger and discomfort. This paper presents an
agent-based model of the process of outpatient consultation for
the Department of Internal Medicine. The goal is to have a
better understanding of the process and evaluating different
solutions to reduce the patient waiting time.
Keywords- agent-based model; Simulation; consultations;
patient flow; outpatient.
I.
INTRODUCTION
Patient waiting time is a significant topic in medical
institutions, and has considerable effects on patient’s
satisfaction. In special, long waiting times and long queues
of patients are the most prominent problems [1].
These problems also affect the Paraguayan “Hospital de
Clínicas” (CH). The CH has more than 45 medical
specialties; and it is one of the largest, complex, and busiest
hospitals of Paraguay. The Statistics Department from the
Hospital reported that 17,270 attentions were recorded for
outpatient in the first half of January 2016. These numbers
imply an average of 1,150 visits per day [2].
During a survey it was found that patients in the
outpatient area must wait several hours before being treated.
Patients line up in two different places: cash register and
admission.
In
order
to
understand
the
process
of
outpatient
consultation and evaluate different solutions aimed at
reducing patient waiting time, we proposed to simulate that
process. This paper presents an agent-based model (ABM)
for the process for the outpatient consultation at the
Department of Internal Medicine of the CH.
ABM is an approach to model systems comprised of
individual, autonomous, interacting “agents”. Agent-based
modeling offers ways to more easily model individual
behaviors and also how these behaviors affect others [3].
ABM offers some advantages such as: an increased detail in
experiments based in simulation, a transparent learning
process, and the ability to control and easily modify
individual behaviors [4].
ABM has seen a tremendous growth in many areas over
15 years and more recently in hospital and healthcare
settings. One of the primary applications of ABM to
hospital environments examines patient flow in Emergency
Departments (ED)[5][6].
An evolving literature exists regarding applying ABM,
alone or together with other technique, to the operations of
ED. In general, this literature addresses system-level
performance dynamics, quantified in terms of patient safety
[7],
economic
indicators
[7][8],
staff
workload
and
scheduling [5][9], and patient flows.
More recently, other works have modeled improvements
to patient flow using an ABM running on High Performance
Computing resources [10]. The ABM was built with
NetLogo. More extensive considerations of ABMs for
patient flow in EDs were developed by the same researchers
[11][12], including the use of an ABM within a decision
support system for EDs [4].
For the topic of outpatient consultations, we found works
that use the discrete event simulation models, which implies
that the status of the system only changes due to certain
events, such as a request for a consultation or completing a
consultation [13]. One of the most popular softwares used is
Arena, which is used to develop the simulation model in
order to examine the patient flow, especially the waiting
time [14].
The rest of the paper is organized as it follows. In Section
II, we explain the process performed by a patient to make an
appointment at the CH. Section III presents the method to be
used for the model. Section IV describes the simulation
model proposed and Section V presents the conclusion of
this project.
II.
CURRENT SYSTEM IN OUTPATIENTS CONSULTATION
In this section we will describe the current process to
request an appointment with the Internal Medicine doctor,
which is shown in Fig. 1:
1)
Request a service: At the beginning of the day, box
officials receive the schedule established for the doctors at
seven o'clock a.m., which contains the number of patients to
be treated in each deparment. Patients line up to request a
46
Copyright (c) IARIA, 2016.     ISBN:  978-1-61208-501-2
SIMUL 2016 : The Eighth International Conference on Advances in System Simulation

service (waiting time to request a service: twrs) and pay when
it is necessary. The officials proceed to register and give the
return receipt for the payment (Time for register a required
service: trs).
2)
Admission: After request a service, patients go to
admission office and line up again to signing (waiting time
in admission or signing: twa). Here, patients present their
identity card or passport and the receipt obtained in the cash
register. Officials ask what type of consultation patients
need: First Consultation, Control, Interconsultation (First
consultation time: taf; Control Time: tac, Interconsultation
time: tai). In the First Consultation, officials fill the header of
the patient record with name, surname, identity card number
and
other
extra
information.
If
it
is
not
the
First
Consultation, patients give their record number. This
number is recorded in the receipt (time to sign a patient: ta).
When a certain amount of record numbers are collected, the
official goes to the Central Record to collect the records and
take them to the nursing. The last process is repeated until
they have engaged all patients.
3)
Waiting in nursing: After signing, patients go to
nursing and wait for the nurse call (Waiting time in nursing:
twn).
4)
Receive care in nursing: Here nurse registers the
patient physical data (weight, height) and vital signs (blood
pressure) (time nursing care: te). Then, patient is assigned to
a
doctor.
After
this,
patient
waits
for
the
medical
consultation (medical consultation standby time: Twmc). In
case a patient with previous appointment arrives, nurse
checks the appointment and give him a certificate of his
appointment. Then, this patient goes to the cash register and
admission in order to confirm his appointment.
5)
Waiting for Doctor: After received care in nursing, in
the waiting room, patients wait to be called by the doctor.
6)
The patient is treated by the doctor: Doctors first go
to the waiting room and take the records of patients assigned
for that day. Then, they go to their consulting room and
proceed to call patients (health care Time: tm). If it is the
First Consultation, doctors fill data about patients, such as
treatment forms, prescriptions, and other sheets. Doctors
may requiere patients a next appointment or discharge them.
Doctors inform nurses next appointments. Once all the
patients have been served, doctors return health records to
nursing. Officers pick up records and leave them in the
Central Record.
III.
METHOD
Agent-based simulation (ABS), or agent-based modeling
(ABM), is a modeling and computational framework for
simulating dynamic processes that involves autonomous
agents [4].
Agent-based modeling offers ways of easily modeling
individual behaviors and how behaviors affect others in
ways that have not been available before. There is much
interest
in
developing
agent-based
model
for
many
application problem domains. Applications range from
modeling agent behavior the spread of epidemics, to project
the future needs of the healthcare system. Progress in the
area suggests that ABS promises to have far-reaching
effects on the way that businesses use computers to support
decision-making and researchers use agent-based models as
electronic laboratories to help in discovery [3].
Agent-based simulation (ABS) is an approach to model
systems comprised of individual, autonomous, interacting
“agents”. The interaction is a key characteristic since the
smallest element defines the functionality of the system.
Such interaction data has incredible potential to address
complex features and dynamics of the objective system.
Agent-based modeling offers ways to model individual
behaviors more easily and to see how behaviors affect
others in ways that have not been available before [3].
Furthermore, in the micro-level, the spatial agent-based
simulator is not a design for any specific application.
Instead, it is just a general behavioral simulator to simulate
interaction among the smallest components of the Internal
Medicine health system.
The
reasons
why
ABS
was
selected
to
model
a
department of Internal Medicine of the HC in this study are:
(1) In a department Internal Medicine system, agents have
Figure 1. Process to request an appointment for Internal Medicine
47
Copyright (c) IARIA, 2016.     ISBN:  978-1-61208-501-2
SIMUL 2016 : The Eighth International Conference on Advances in System Simulation

dynamic relationships with other agents. For example,
patients have dynamic relationships with nurses, preceptors,
doctors and patients. These dynamic relationships are
important to consider and, by their nature, well suited to be
modeled as part of agent-based model. (2) The agents have a
spatial component to their behaviors and interactions, i.e.,
most of the agents in outpatient consultation need to move
around and the spatial location is one of the key states which
determines their potential interacting object and state
transferring.
(3)
A
large
number
of
agents,
agent
interactions and agent states are important for information
extraction. In a department of outpatient consultation,
services are provided via multiple interactions, patients pass
through
a
department
of
Internal
Medicine.
These
interactions can deeply reflect the functionality of the target
system. (4) Model reusability.
The first step of the job is to make a conceptual model of
system operation, from which the computer model is
capable of simulating the system. We are planning to use the
simulation environment and high-level platform called
Netlogo.
IV.
OUTPATIENT CONSULTATION MODEL
A collection of information that is presented in this paper
proposes a working model that aims to reduce waiting times
for patients attending the CH.
1)
Active agents: During the collection of information they
are the active agents representing individuals and
entities acting on their own initiative.
•
Box official: administrative staff to which the
patient comes to get a receipt.
•
Admission official: administrative staff to which the
patient comes for a slot, update their personal data
and request the opening or searching for the
medical record.
•
Nurse: health personnel which is called by the
patient to carry out pre-outpatient activities.
•
Doctor: the doctor fills data about the patient, such
as treatment forms, prescriptions, and other sheets.
The doctor may assign the patient to a medical
appointment, discharge the patient, or ask her to
return after a certain period of time.
•
Central recorder officer: administrative staff in
charge of saving the medical records of patients.
•
Patient: person who comes for treatment.
2)
State variables: Agents move from one place to
another interacting with other agents. During this time as a
result of interactions each agent changes its state. This
behavior is perfectly represented by a state machine, so we
have
chosen
a
state
machine
to
model
all
agents.
Specifically, the agents are represented
by a Moore
machine.
An initial set of state variables defined through the round
of interviews with doctors is based on the minimum amount
of information necessary to model each patient and staff.
Such initial set of state variables is shown in Table 1.
TABLE I.
INITIAL SELECTION OF STATE VARIABLES AND THEIR
VALUES.
Variables
Values
Name / identifier <id>
Unique per agent
Location <location>
Admission; consultancy room; waiting room;
nursing; central file; patient records.
Action
Idle; requesting information from;
giving information to; searching; moving
to.
Physical condition
Hemodynamic-constant; Bartel index.
Symptoms
Healthy; cardiac/respiratory arrest;
severe/moderate trauma; headache.
Communication skills
Low: medium: high
Level of exprerience
(Staff)
Low: medium: high.
3)
Inputs: The entries represent all the ways that an
agent can accumulate information. In the case of a person,
this represents everything that the person sees, hears, smells,
tastes, or feels, but really most entries represent vision or
sounds, those entries are communication received by the
agent. The next state of an agent depends on the current
state.
4)
Outputs:
the
agents
are
represented
by
Moore
machines, each state can only have a different output. Some
of the outputs where used of the simulator wants to analyze
are waiting time of each stage (e.g waiting time for service
request: Twrs, time service record: trs, time of admission: ta,
waiting time in admission or signing: twa, first: taf, control:
tac, interconsultation: tai, waiting time in nursing: twn, time
nursing care twe, medical consultation standby time: Twmc,
while health care: twm and others).
5)
State transitions: At each time step the state machine
moves to the next state. This may be another state or the
same before the transition. The next state the machine takes
is dependent on the input during that state. The input may be
more accurately described as an input vector (I) that
contains a number of input variables, each one may take a
number of different values. As this is a Moore machine, the
output depends only on the state, so each state has its own
output, although various states may have outputs that are
identical. Again, the output is more accurately described as
an output vector (O), a collection of output variables, each
with a number of defined possible values. Transitions
between states are dependent on the current state at time t
(St) and the input at time t (It) [4].
6)
Passive agents: Passive individuals do not act alone,
but react to the actions of the active individuals. These
liabilities agents do not have the same complexity as the
active agents, as they are not entities that move by the
department. An example of a passive agente is a computer
system.
48
Copyright (c) IARIA, 2016.     ISBN:  978-1-61208-501-2
SIMUL 2016 : The Eighth International Conference on Advances in System Simulation

7)
Environment: Without the environment there is no
place where agents can interact with each other. In this
model the environment is the outpatient department of
Internal Medicine. The operation of outpatient hospital is
based on processes consisting of different stages or phases
in which each patient is passing from its admission into
service.
A generic outline of a department outpatient Internal
Medicine is shown in Fig. 2. The areas represented in boxes
were explained above.
Figure 2. Representation of the environment of an outpatient department.
V.
SIMULATION
The simulation provides a safer and more efficient way to
try new techniques and processes with the goal of improving
the efficiency of the outpatient management. A sufficiently
complete model can be used to test and ensure real system
changes without compromising real people. In addition, a
simulation can be used to test a much too large sample set to
study in a department consultation, and also can be done in
a much smaller amount of time.
The advantages of using simulation is that it allows the
automatic search
for scenarios that provide the best
solutions to a set of constraints and future states.
As the basis of a support system decision to reduce
waiting time for patients is to develop a simulator that will
have to run multiple simulations with combinations of
different parameter values, each combination of values
representing a different scenario simulation. There are a
large number of combinations of values that constitutes the
parameter space. In equation (1) the parameters that can
generate a large number of different scenarios observed.
nscenarios= nnumber_admissions * ntime_admissions * nnumber_signings * n
time_signings * nnumber_nursing * ntime_nursing * n number_doctor * n time_doctor
(1)
With the simple model used in the simulator, there is a
very large number of combinations of parameter values,
large enough so that there is the possibility of launching
each one manually. Therefore, parametric simulations, a
way in which the simulator launch a set of simulations, with
all combinations of values of the different parameters are
required.
In general, the time to compute a time interval of a
simulation based on agents is the product of time it takes to
simulate the actions of an agent within the world of
simulation in this step. In the model described agents in the
simulation are the hospital staff and patients.
The simulator will be conducted by time. Time is
divided into discrete, identical intervals and period each
time step the agents operating system.
Each time step is divided into two phases. Assuming that
the simulator this at time t, the phases are:
First, each agent processes the inputs of the last phase, (It
-1) and according to that input and the state as it was during
the last step (St -1) and changes to its new state St. Second,
each agent emits its output to its current state, Ot. This
output is input using receivers to switch to the next state.
At each time step, each agent changes state. It may
change to the same state it was in the previous state, but
there is nonetheless a change.
The metrics that are to be used for each state input It and
output Ot are: waiting time to request a service: twrs, Time for
register a required service: trs, time admission: ta, waiting
time in admission or signing: twa, First consultation time: taf,
Control Time: tac, Interconsultation time: tai, waiting time in
nursing: twn, time nursing care: te, medical consultation
Standby time: Twmc, health care Time: tm
The machine simulation has been chosen as the basis for
when the simulator is implemented because NetLogo has all
the features needed to implement a model of this type.
NetLogo is a simulation environment agent-based model.
NetLogo provides a basis for machine simulation agent-
based system.
There are no preliminary results available yet, but we
want to implement the simulator to verify the proposed
model, obtain the different scenarios to see which one is the
best to reduce the waiting time of patients.
The run time of a simulation step, in an agent based
model simulation, is the product of the time it takes to
simulate the actions of an agent and the number of agents in
the simulation world in this step. In the model described,
agents in the simulation are the hospital staff and patients.
During simulation, the hospital staff is fixed, does not enter
or exit the simulation. On the other hand, patients are
constantly in and out of the simulation. This changes the
load of each time slot simulation basing on the equation (2)
that calculates the running time Ti in step i, with the number
of hospital staff h, the number patients in the simulation in
step i and the runtime of a tagente agent.
Ti = (h + pi )Tagente
(2) 
We assume that the runtime of an agent is a fixed value.
In different simulations, the number of hospital staff can
change, but during one simulation, the number of hospital
staff is maintained. Concerning the number of patients, this
can change from one simulation step to the other because
there are patients in and out, but within each simulation
49
Copyright (c) IARIA, 2016.     ISBN:  978-1-61208-501-2
SIMUL 2016 : The Eighth International Conference on Advances in System Simulation

step, this number is constant. For a simulation that takes n
steps, equation (3) shows the formula.
n
T = (hn + ∑ pk ) Tagente.
(3)
k=1
A good configuration made with the aim of reducing the
waiting time for patients will also come with a shorter
execution.
In order to generalize the process of all patients, the next
status will be decided by probability distribution during
simulation. The distribution model of the probability was
based on the statistical data from the department outpatient
Internal Medicine. Figure 1 indicates the general process-
transfer strategy during the patients stay in department
outpatient Internal Medicine, P1(%), P2(%), P3(%) and Pn
(%) represent the probability of the next state transition
separately. All of the probabilities follow some probability
distributions.
The
probability density
function
of the
distribution is decided by several key parameters based on
the statistical analysis of doctor’s decision and patient’s
behavior, the value of these parameters are estimated by a
tuning process from real historical data of the specified
department outpatient Internal Medicine. The uniform forms
of the density functions are:
Pi = f (LoS, age, level)
(4)
n
                                    ∑ Pi = 100 %
(5)
i=1
P’ = f’ (ToT, age, level)
(6)
n
                                   ∑ P’i = 100 %
(7)
i=1
where LoS is the patient’s length of stay and age is the
age of the patient, which also has big influence to the
probability of status transition. Level is the acuity level of
the patient and ToT is the type of test service or diagnosis
by doctor. The functions f and f’ are the probability density
function.
These functions will be implemented by analyzing real
historical data in tuning process. As the simulator is
implementing the general model of the departments of
outpatient Internal Medicine, the tuning/calibration process
must be carried out for each one of them, in order to adjust
its simulation parameters to the specific characteristics of
each department (e.g., experience of the specific department
staff).Therefore, combined with (1) - (10), every patient will
show different behavior during the execution of the model
because of the probability distribution and their own
differences in body condition. But the statistical property of
agents will reflect their common behavior.
VI.
CONCLUSION AND FUTURE WORD
An agent-based simulation model of the process of
outpatient’s consultation in the Department of Internal
Medicine of the CH was presented. With the development
of this model we will be able to study the process of
outpatient consultations and then propose a model aimed in
reducing the waiting time in different stages of the process.
The simulation can be used as an important component of
a system of decision support to help hospital administrators
and the people responsible of the outpatient department of
Internal Medicine, aimed to achieve efficient and better
patient care cycle.
This work will help reduce the patient waiting time and
provide additional knowledge on programming admission of
patients and doctors. It will also help to optimize resources,
among other situations.
Our future work is to implement the simulator with the
Netlogo tool, examine, analyze and validate the data
produced by the simulator. Then, we will examine the
different scenarios in the department of Internal Medicine to
improve waiting times for patients.
The first step of future work should be creating the
computational model of the object; the next step of future
work should be creating design of experiment, experiment
execution and statistical analysis of simulation results. In
order to validate the simulator, performing some real
simulations
of
department
of
Internal
Medicine
is
mandatory. Therefore, the future work should be validation.
Some real historical data of department of Internal Medicine
will be needed in order to perform the tuning process. This
is due to the great number of parameters for the model, and
the large number of agents and interactions between them.
To increase the number of studied scenarios and reduce
execution time as well, the use of high performance
computing will be mandatory.
ACKNOWLEDGMENT
This research has been funded through the projects
"Formació y recerca en l'Àmbit de la gestió i eficient Segura
d'hospitals"
by
the
"Fundació
Autònoma
Solidària",
Universidad Autónoma de Barcelona, UAB, Spain by the
Facultad
Politécnica
of
the
Universidad
Nacional
de
Asunción, UNA, Paraguay; and
“Sistema Integral de
Gestión Hospitalaria – fase 3” by the Facultad Politécnica
and by the Facultad de Ciencias Médicas de la Universidad
Nacional de Asunción, UNA, Paraguay and supported by
the MINECO (MICINN) Spain, under contract TIN2014-
53172-P
REFERENCES
[1]
Özer, Özlem; Kar Ahmet; Songur Cuma; Sonmez, Volcan;
Sahin, Ismet. A Simulation Modelling Study: The Case of
Department of Gynaecology and Obstetrics of A University
Hospital,
Turkey/Bir
Üniversite
Hastanesinin
Kadin
Hastaliklari ve Dogum Bölümü'nde Simülasyon Modelleme
Çalismasi. Ege Akademik Bakis, 2014, vol. 14, no 4, p. 531
50
Copyright (c) IARIA, 2016.     ISBN:  978-1-61208-501-2
SIMUL 2016 : The Eighth International Conference on Advances in System Simulation

[2]
http://www.sanlorenzopy.com/34958/
[3]
C. Macal, and North M. 2014. “Introductory Tutorial: Agent
Based Modeling and Simulation”. In Proceedings of the
Winter Simulation Conference 2014, 6–20.
[4]
M. Taboada; E. Cabrera; M. L. Iglesias; F. Epelde and E.
Luque.
An
Agent-Based
Decision
Support
System
for
Hospitals
Emergency
Departments
Procedia
Computer
Science, Elsevier, 2011, 4, 1870-1879
[5]
S. S. Jones and R. S. Evans, ‘‘An agent based simulation tool
for scheduling emergency department physicians,’’ in Proc.
AMIA Annu. Symp., 2008, pp. 338–342.
[6]
M. R. Friesen, and R. D. McLeod. A Survey of Agent-Based
Modeling of Hospital Environments Access, IEEE, IEEE,
2014, 2, 227-233
[7]
A. K. Kanagarajah, P. A. Lindsay, A. M. Miller, and D. W.
Parker,
‘‘An
exploration into the uses of agent-based
modeling to improve quality of health care,’’ in Proc. Int.
Conf. Complex Syst., Boston, MA, USA, Jun. 2006, pp. 1–10.
[8]
D. Blachowicz, J. H. Christiansen, A. Ranginani, and K. L.
Simunich, ‘‘Future EHR ROI: Agent-based modeling and
simulation offers a new alternative to traditional techniques,’’
J. Healthc Inf. Manag., vol. 22, no. 1, pp. 39–45, 2008.
[9]
C. W. Spry and M. A. Lawley, ‘‘Evaluating hospital
pharmacy staffing and work scheduling using simulation,’’ in
Proc. Winter Simul. Conf., Dec. 2005, pp. 4–7.
[10] M. Taboada, E. Cabrera, F. Epelde, M. L. Iglesias, and E.
Luque, ‘‘Using an agent-based simulation for predicting the
effects
of
patients
derivation
policies
in
emergency
departments,’’ Proc. Comput. Sci., vol. 18, no. 1, pp. 641–
650, 2013.
[11] E Cabrera, M Taboada, Ma L Iglesias, F Epelde, E Luque.
Optimization of Healthcare Emergency Departments by
Agent-Based Simulation. ICCS 2011: 1880-1889.
[12] E. Cabrera, E. Luque, M. Taboada, F. Epelde, and M. L.
Iglesias, ‘‘ABMS optimization for emergency departments,’’
in Proc. Winter Simul. Conf., 2012, p. 89.
[13] S. G. Elkhuizen, S. F. Das, P. J. M. Bakker,
&
J. A. M.
Hontelez. Using computer simulation to reduce access time
for outpatient departments. Quality and Safety in Health
Care, 16(5), 2007, 382-386.
[14] A. F. Najmuddin, I. M. Ibrahim, S. R. Ismail, A simulation
approach: improving patient waiting time for multiphase
patient flow of obstetrics and gynecology department (O\&G
Department) in local specialist centre. WSEAS transactions
on mathematics, 2010, 778-790.
51
Copyright (c) IARIA, 2016.     ISBN:  978-1-61208-501-2
SIMUL 2016 : The Eighth International Conference on Advances in System Simulation

