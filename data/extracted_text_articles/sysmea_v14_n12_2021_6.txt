59
International Journal on Advances in Systems and Measurements, vol 14 no 1 & 2, year 2021, http://www.iariajournals.org/systems_and_measurements/
2021, © Copyright by authors, Published under agreement with IARIA - www.iaria.org
Performance Evaluation on Indoor Positioning
System Using SS Ultrasonic Waves for Drone
Applications
Tatsuki Okada, Akimasa Suzuki
Graduate school of Software and
Information Science
Iwate Prefectural University
020-0693, Sugo Japan
email g231s004@s.iwate-pu.ac.jp
suzuki_a@iwate-pu.ac.jp
Souichirou Masuda
Faculty of Software and
Information Science
Iwate Prefectural University
020-0693, Sugo Japan
email g031q141@s.iwate-pu.ac.jp
Abstract—This study develops a drone positioning system for
use in indoor environments, including dark places, inaccessible
areas, and ordinary living environments that do not accommodate
conventional methods. Various indoor drone applications have
been developed, such as drone communication systems and wall
surface inspection, which require remote estimation of drone
position. For outdoor applications, a Global Navigation Satellite
System (GNSS) is generally used to obtain the drone position.
However, as the GNSS radio waves cannot reach indoors or
between buildings, camera-based methods, such as Simultaneous
Localization and Mapping (SLAM), are applied to estimate the
drone’s position. The system uses noise-resistant, code-division-
multiplexed spread spectrum (SS) ultrasonic waves for three-
dimensional positioning. Transmitter and receiver hardware is
developed using SS ultrasonic waves and the effect of wind
and sound of the positioning system during drone operations
on the SS ultrasonic positioning is evaluated. Transmitter and
receiver hardware is developed using SS ultrasonic waves and
the effect of wind and the sound of the positioning system
during drone operations on the SS ultrasonic positioning is
evaluated. The accuracy of the positioning system is veriﬁed
through experiments, and the results indicate that a positioning
accuracy within 15 cm is possible despite the effects of downwash
generated by the drone’s wings, and there was no effect of
multipath on the positioning error.
Index Terms—Drone; Indoor Positioning System; SS Ultrasonic
Waves; Downwash; IoT Devices.
I. INTRODUCTION
This paper is an extension of the paper initially presented
at the VEHICULAR 2020 Ninth International Conference on
Advances in Vehicular Systems Technologies and Applications
[1]. In this paper, we additionally describe a detailed system
conﬁguration to store positioning data in cloud storage using
Internet of Things (IoT) technology. We studied the robustness
of the system to drone noise when using Gold code with the
conventional M-sequence. We also compared the experimental
results in an anechoic chamber with those in a reverberant ex-
perimental environment to study the effect of the reverberation
in the tunnel.
Because they can take off and land vertically in small
spaces, drones can be used to perform various activities in
unstable places where people and vehicles cannot access.
Previous studies have investigated the use of drones for many
uses, including autonomous search and rescue operations for
victims following a disaster [2], meteorological observations
[3], and logistics such as home delivery [4].
When used indoors, drones act as communication robots
[5]. However, an appropriate distance is required to allow
natural and smooth communication between a human and an
autonomous mobile robot. To ensure the appropriate position-
ing in indoor spaces, the drone’s coordinates can be used
to develop real-time centimeter-order positioning. A relevant
study investigated the use of drones for periodic inspection to
detect aging degradation of locations where staff are unable
to work, such as high walls of tanks and industrial chimneys
[6]. Using drones for this purpose is expected to reduce the
high cost of these inspections.
Use of drones indoors is more dangerous than outdoors
because the drone can easily crash into obstacles such as
humans and walls. Thus, it is essential to determine the
position of the drone in relation to other objects. As horizontal
and vertical relationships are important in these applications,
it is essential to obtain absolute coordinates in space. While a
Global Navigation Satellite System (GNSS) is generally used
to obtain the absolute coordinates of a drone, the GNSS signal
is difﬁcult to detect indoors. Simultaneous Localization and
Mapping (SLAM) is often used in non-GNSS environments.
However, the ﬂight path of a routine inspection is often in a
dark place and the walls do not always follow a uniform pat-
tern, causing large errors in SLAM’s self-position estimation.
We therefore propose an indoor positioning system for
drones using spread spectrum (SS) ultrasonic waves [7]. This
system is expected to obtain three-dimensional (3D) coor-
dinates with an accuracy of 10cm. However, the accuracy
may be negatively impacted by noise from the propellers or
downwash of a drone. Downwash is the wind created by

60
International Journal on Advances in Systems and Measurements, vol 14 no 1 & 2, year 2021, http://www.iariajournals.org/systems_and_measurements/
2021, © Copyright by authors, Published under agreement with IARIA - www.iaria.org
the drone’s propellers. Therefore, in this study, we conduct
an experiment to evaluate the positioning accuracy of drone
ﬂights during a periodic inspection.
Section II presents related research. Section III provides an
overview of indoor positioning systems using SS ultrasonic
waves. Section IV examines the drone’s robustness against
noise for positioning in a no-multi-path situation through
an experiment conducted in an anechoic chamber with no
reverberation. Section V evaluates the positioning error when
the experiment is conducted in an echoing environment with
the same system conﬁguration as in Section IV. Section VI
compares the results of Sections IV and V. Section VII
provides a summary and future perspectives.
II. RELATED AND PREVIOUS WORKS
There does not almost exist positioning method with drones
for indoor multi environments, including dark environments,
with accuracy under 10cm. Various sensor systems have been
investigated for indoor positioning purposes, including pseudo-
lites [8] and BLE beacons [9]. Of these, ultrasonic-wave-based
systems using the time of ﬂight (TOF) between the time of
transmission and the time of reception systems have the lowest
cost and greatest accuracy because of their slow propagation
speed and ease of improving resolution. However, because
these systems use the time-division multiplexing method with
on-off keying, which grows increasingly cumbersome as the
number of objects to be measured increases, they generally
have weak noise resistance and are slow to acquire data.
Systems using SS ultrasonic signals have therefore been in-
vestigated to overcome these drawbacks [10] [11].
Analogous to SS radiowave systems (e.g., global posi-
tioning system (GPS)), we have proposed a real-time 3D
positioning system using SS ultrasonic signals with a band-
limited transducer, a low-power ﬁeld programmable gate array
(FPGA), and a small microprocessor [12]. In previous studies,
we discussed factors such as positioning errors in indoor
environments [7] and showed the measurement accuracy of the
positioning system using SS ultrasonic signals. We also pro-
posed a calculation algorithm based on the Newton-Raphson
method for continuous signals, rather than conventional pulse
signals. As a result, 3D coordinates can be obtained every
80ms using Code Division Multiple Access (CDMA) with
continuous signals [13].
We evaluated the positioning accuracy of SS ultrasonic
waves using a ground-based mobile robot [14]. Other studies
have proposed using not only SS ultrasonic waves but also im-
age sensors for drone positioning [15] and applying drones to
limited situations such as greenhouses [16]. Indoor positioning
accuracy has been discussed using the Kinect camera, with an
average positioning error of 48mm [17]. However, the Kinect
is difﬁcult to use in the dark. This study develops an indoor
positioning system using only SS ultrasonic waves that can be
used in dark places where image sensors are ineffective.
Figure 1. Positioning calculations for the indoor positioning system.
III. INDOOR DRONE POSITIONING SYSTEM USING SS
ULTRASONIC SIGNALS
This section describes the indoor positioning method using
SS ultrasonic waves and our proposed system.
A. A method for positional calculation
Figure 1 presents the positioning calculations for the indoor
positioning system using SS ultrasonic waves. Spheres are
drawn to determine the center point on the radius between
a receiver Rc and each transmitter. Two pairs of spheres
are selected centering on Tr1 and Tr3 and Tr2 and Tr3,
respectively. From these pairs of spheres, Plane13 and Plane23
are solved simultaneous equations and a line of intersection
is obtained from the two planes. Finally, the points at the
intersection of the line with an equation of an arbitrary sphere
are solved. Figure 2 shows a ﬂowchart of the algorithm for
the positioning calculation in Figure 1. Two intersection points
are obtained as two transmitters are installed along the bottom
or sides of the positioning range. Therefore, one solution is
outside the room and the other solution becomes the position
of the receiver Rc. When using four transmitters, four position
results are obtained. Thus, the measurement position is deﬁned
as an average of these results.
B. Hardware structure of a positioning system using SS ultra-
sonic waves
A 3D position can be calculated on the basis of three or
more TOF between the transmitters and the receiver. Figure 3
shows the system architecture of the TOF measurement for the
positioning system. The transmitting hardware contains a digi-
tal to analog (D/A) converter and an FPGA to generate carrier

61
International Journal on Advances in Systems and Measurements, vol 14 no 1 & 2, year 2021, http://www.iariajournals.org/systems_and_measurements/
2021, © Copyright by authors, Published under agreement with IARIA - www.iaria.org
Figure 2. Flowchart of position calculation.
Figure 3. System architecture of the TOF measurement.
waves and M-sequences. The receiving hardware includes an
A/D converter and an FPGA for correlation calculation, peak
detection, and time measurement.
An SS signal is generated by the transmitting hardware
to multiple carrier waves by M-sequences and is output
from a transducer after D/A conversion. At the start of the
transmission, a time counter is started to measure the TOF
and correlation values are calculated from the sound data via
the A/D converter as online and real-time hardware processing.
The time counter measures the TOF by counting the sampling
times until arriving at peak correlation values obtained by
the peak detector. Then, the 3D position of the receiver can
be calculated based on three or more TOFs between the
transmitters and receiver. The correlation calculator component
is installed in the hardware as shown in Figure 3. Distance
is calculated from the TOF obtained from the hardware and
the dimensional position is measured. Real-time positioning is
sufﬁciently available because this processing can be calculated
with low cost using optimized expressions.
C. SS signal
In our indoor positioning system, SS signals are modulated
by binary phase shift keying using an M-sequence with a direct
sequence method. Figure 4 shows the M-sequence generator.
‘ 0 ’ or ‘ 1 ’ sequence is generated by the shift register.
Figure 4. M-sequence generator with tap 4,9.
Figure 5. Spread spectrum (SS) ultrasonic signal.
Each number in [] in B1 of Figure 4 means the number
of bits. Tap is deﬁned as a position where exclusive OR
calculation is performed. In the case of Figure 4, tap position
is shown as {4,9}, which named by the shift register where
connected to exclusive OR gates. By changing the position of
the tap, several M-sequences with low cross-correlation can
be generated.
Figure 5 shows a received SS signal, where the signals
corresponding to‘ 1 ’and‘ -1 ’are plotted solid and dashed
lines, respectively. We replace values of ‘ -1 ’ with ‘ 0 ’
from generated M-sequence for easy signal processing. Each
dot in Figure 5 is a sample to convert to digital signals. The
amount of sample including one period of carrier waves is
decided on the basis of four samples. Here, chip length tc is
deﬁned as the time required to describe a 1-chip of the M-
Sequence. The chip length can also be described as tc = 4/f
using carrier frequency f . The length of SS ultrasonic signals
becomes 29 − 1 = 511 [chip] owing to a 9-stage shift register
for the M-sequence in our system. These four channels of
the transmitters are generated by the following tap positions:
{4,9}; {3,4,6,9}; {4,5,8,9}; and {1,4,8,9}.
The M-sequence has few combinatorial channels and lim-
ited cross-correlation. Therefore, to increase the number of
channels, Gold codes obtained by multiplied M-sequences are
considered. As shown in Figure 6, the Gold code is generated
by using two shift registers, B1 and B2 to generate the M-
sequence and combining the two registers by an exclusive OR
operation. The following tap positions are used to generate the
Gold code: combination of{4,9} and {4,5,8,9}, combination
of {3,4,6,9} and {4,5,8,9}, combination of {4,5,8,9} and
{1,4,8,9} and combination of {1,4,8,9} and {3,4,8,9}. In this
system, the frequency of the carrier waves is 40.2kHz.
D. Our proposed indoor positioning system using SS ultra-
sonic for drones
In this system, we use a transmitter with a closed-type
aperture (PC40-18S, Nippon Ceramic Co., Ltd.) and a “Mini”

62
International Journal on Advances in Systems and Measurements, vol 14 no 1 & 2, year 2021, http://www.iariajournals.org/systems_and_measurements/
2021, © Copyright by authors, Published under agreement with IARIA - www.iaria.org
Figure 6.
Gold code generated by the M-sequence with tap 9,4 and tap
9,6,4,3.
Figure 7. Measurement layout for the proposed system for (a) a dark plant
and (b) a room.
Si Sonic™ultrasonic receiver (SPM0404UD5, Knowles) as
general-purpose ultrasonic transducers.
Figure 7 shows the layout of the transmitters and receiver
for our proposed system. Two example situations, a dark plant
and a room as shown in Figures 7(a) and 7(b), respectively,
are used. Figure 7(a) represents a periodical inspection at a
plant where it is difﬁcult to install infrastructure, such as
transmitters, in the building. For convenient mounting, trans-
mitters are therefore set on a cross-shaped mount, as shown in
Figure 7(a). Considering the dilution of precision (DOP) [18]
[19], especially horizontal DOP, the larger the mount size, the
more accurate the expected positioning accuracy. However,
a larger size limits the installation position options and is
inconvenient to carry. Figure 7(b) represents a communication
drone. Transmitters are mounted in four corners of a room. In
this situation, the transmitters are more difﬁcult to install, but
the DOP is better than in Figure 7(a). In this study, we conduct
experiments using the layout shown in Figure 7(a),because
this conﬁguration in Figure 7(a) has not been considered in
previous studies.
The sequence to send positioning data to the cloud system
is shown in Figure 8. A microphone, receiving hardware, and
a Raspberry Pi are mounted on the drone. The positioning data
will be sent to Azure CosmosDB using the Microsoft Azure
IoT Hub. The data are sent from the receiving hardware to
the Azure IoT hub via the Raspberry Pi. In the Azure, the
received data are stored in Azure Cosmos DB through Azure
Stream Analytics jobs that process and analyze the events in
Figure 8. Overview of the sequence to send positioning data from Raspberry
Pi to Azure Cosmos DB.
Figure 9. Receiving hardware for drone measurements.
real time. The positioning data can be remotely checked by
accessing Azure Cosmos DB online.
Figure 9 illustrates the receiving hardware schematic
mounted on the drone, as shown in Figure 8. The hardware
consists of an Evaluation Board (ACM204-1158C) installed
in the FPGA (Intel Cyclone IV); a transceiver for timing
the synchronization of the ultrasonic transmitter unit; a re-
ceiver unit; a universal serial bus (USB) interface for output
coordinates; an input part to receive the ultrasonic waves,
including an A/D converter and ampliﬁer; and synchronous
dynamic random-access memory (SDRAM) for the real-time
correlation calculations.
The USB interface and the input component are connected
to a computer and a microphone, respectively. Ultrasonic
waves received by the microphone are converted to A/D
and input into the FPGA, where the correlation calculations,
peak detection, and TOF calculations are performed. The
SDRAM processes the real-time correlation calculations, and
the transceiver measures the TOF based on the transmission
timing received from the ultrasonic transmitter.
In the Raspberry Pi, the positioning data are calculated by
TOF, as obtained by the receiving hardware. Figure 10 shows

63
International Journal on Advances in Systems and Measurements, vol 14 no 1 & 2, year 2021, http://www.iariajournals.org/systems_and_measurements/
2021, © Copyright by authors, Published under agreement with IARIA - www.iaria.org
Figure 10. Schematic diagram of the program installed in Raspberry Pi.
an overview of the program running on the Raspberry Pi.
This program generates four threads for parallel processing.
After the initial setup, we create three threads to run methods,
calculates positioning, performs backup, and sending to Azure
CosmosDB in parallel. The main thread
1⃝ is conﬁgured to
connect to Azure and USB, and three threads,
2⃝,
3⃝, and
4⃝,
are created. In thread
2⃝, the distance d between the receiver
and the respective transmitter is measured by the TOF sent
from the receiver hardware. The distance is obtained by
d = υ × γ
(1)
Here, γ and the υ are, respectively, the TOF and the speed of
sound calculated by the following approximation formula:
υ = 331.5 + 0.60714 × T
(2)
The temperature T ◦C is measured by SENSIRION’s SHT31
module [20]. A receiver’s position is calculated by four dis-
tances from the four transmitters using the method described
in Section III-A. At thread
3⃝, the positioning data are saved
in CSV format. At thread
4⃝, positioning data are sent to the
Azure IoT hub that manages and monitors IoT devices and
their communications.
A constant error could occur in the positioning system.
More accurate TOF measurement is expected by calibration,
which removes this type of error. Thus, in this system, constant
errors are removed from measurement results.
IV. POSITIONING EXPERIMENT WITHOUT SOUND
REFLECTION.
Before the measurement in a real environment, posi-
tioning experiments were conducted in anechoic chamber
without sound reﬂection to study the effect of noise and
wind generated by the drone on the distance measurement
of SS ultrasonic waves. The experimental environment is
shown in Figure 11. The solid line in Figure 11 indicates
the environment of the anechoic chamber used, which is
4000mm long, 4100mm wide, and 3000mm high. The area
in the dotted line in Figure 11, which is 4000mm long and
2000mm wide, is deﬁned as the comparison area against
Figure 11. Schematic of the experimental setting in the anechoic chamber.
normal sound reverberation area described in the next sec-
tion. The lower left corner in this area is deﬁned as the
origin of the coordinates. Four transmitters Tr1-Tr4 were
placed near the center of the room. The coordinates of
the speakers were Tr1[mm] = (500, 2000, 0),Tr2[mm] =
(1000, 1500, 0),Tr3[mm]
=
(1500, 2000, 0) ,Tr4[mm]
=
(500, 2000, 0),and Tr4[mm] = (1000, 2500, 0).
Figure 12 illustrates the anechoic chamber experiment en-
vironment. Figure 13 shows the measurement point of the
receiver for this experiment. The measurement points to be
obtained are Rca, which is 1500mm directly above the center
of the x−y plane; Rcb, which is 1500mm directly above Tr1;
Rcc, which is 1500mm directly above Tr2; and Rcd, which
is 1500mm directly above Tr4. The transmitter and receiver
distances l1-l4 for each measurement point were obtained. The
drone was a Mavic 2 zoom by DJI™. The drone hovered
approximately 500mm over the receiver. The position was
obtained ﬁve times at each measurement point. The trans-
mitting waves were 48Vp−p, and both the M-sequence and
Gold codes were used in the experiment. For the positioning
calculation, the average of the difference of the ultrasonic
measured distances was subtracted from the true distance at
each point as the constant error from the l1 − l4 measured
distance at each point.
A. RMS positioning error of M-sequence
Figure 14 shows the Root Mean Square (RMS) of the
difference between the results and the installed distances. The
vertical and horizontal axes of Figure 14 show the RMS
positioning error and the coordinates of the measurement
points, respectively. emrms is deﬁned as
emrms =
√
(dmi − di)2
(3)
where di and dmi are the measured distance and the true
distance between a receiver and i-th transmitter, respectively.
The line on the bar in Figure 14 has its upper and lower ends
at the maximum and the minimum RMS positioning errors,
respectively.

64
International Journal on Advances in Systems and Measurements, vol 14 no 1 & 2, year 2021, http://www.iariajournals.org/systems_and_measurements/
2021, © Copyright by authors, Published under agreement with IARIA - www.iaria.org
Figure 12. Experimental environment in the anechoic chamber.
Figure 13. Measurement points of the receivers in Figure 12.
The results show that the range of minimum and maximum
RMS positioning errors was wider at all measurement points
with the drone because of the sound and wind effects from the
drone; however, no other signiﬁcant trend was identiﬁed. The
RMS positioning error for all measurement points was within
150mm.
B. Horizontal and vertical errors by M-sequence code
The measurement error on each measurement position was
considered for the x − y horizontal error and the z direction
error. The horizontal error was calculated as the RMS posi-
tioning error of x and y directions on each measurement point.
The error in the vertical direction is the absolute value of the
Figure 14.
RMS positioning error by M-sequence in an anechoic chamber
experiment.
Figure 15. Horizontal and vertical positioning errors by M-sequence code in
the anechoic chamber.
error in the z direction. Figure 15 shows the horizontal and
vertical errors at each location with and without the drone.
The vertical and horizontal axes show the positioning error and
measurement point, respectively. Darker and lighter bars in the
graph indicate vertical positioning and horizontal positioning
errors, respectively.
Figure 15 shows that the horizontal error is larger than the
vertical error at all locations. The error in the plane direction
is greatly affected by the DOP because the transmitters are
placed at a distance of 500mm from the center of the x −
y plane. Increasing the interval between the transmitters is
expected to improve the accuracy.
C. Comparison of positioning error between Gold code and
M-sequence
Figure 16 compares the RMS positioning error after sub-
tracting the constant error of the position using M-sequence
and Gold codes. The vertical axis of the graph shows the same
RMS positioning error as in Figure 14. The horizontal axis is
the measurement point. Similar to Figure 14, the line on the
bar in Figure 16 has its upper and lower ends at the maximum

65
International Journal on Advances in Systems and Measurements, vol 14 no 1 & 2, year 2021, http://www.iariajournals.org/systems_and_measurements/
2021, © Copyright by authors, Published under agreement with IARIA - www.iaria.org
Figure 16.
RMS positioning error of Gold code and M-sequence in an
anechoic chamber.
and the minimum RMS positioning errors, respectively. The
experiment demonstrated that positioning with Gold codes was
possible at all points as well as in the M-sequence. Flying the
drone increased the range of maximum and minimum RMS
positioning errors in the Gold code. In terms of the RMS
positioning error between the M-sequence and the Gold code,
there was no dominant difference. The RMS positioning errors
were 30mm without the drone and 2mm with the drone.
V. POSITIONING ERROR BY DRONE NOISE AND
DOWNWASH IN AN INDOOR ENVIRONMENT WITH NORMAL
SOUND REFLECTION
In structures such as tunnels, sound reﬂects off walls, and
multi-path effects may occur. To evaluate the effect of motor
noise, experiments were conducted in an environment with
sound reﬂection, wind noise, and downwash where reﬂected
waves are generated and comparison is performed with the
experiment in the anechoic chamber.
Figure 17 shows the environment used for this experiment,
which was a room 2000mm long and 4000mm wide. A
Mavic 2 zoom by DJI™drone as in the anechoic chamber
experiment was used. The m-sequence was used as pseudo-
random code in this experiment. Four transmitters Tr1-Tr4
were placed near the center of the room. As shown in
Figure 17, the drone’s starting point was the ﬂoor at the
left front edge of the room. To prevent the ultrasonic waves
from reﬂecting off the ﬂoor, the transmitter was placed at a
height of 1500mm above the ﬂoor. The coordinates of the
transmitters were Tr1[mm] = (500, 2000, 1500), Tr2[mm] =
(1000, 1500, 1500), Tr3[mm]
=
(1500, 2000, 1500), and
Tr4[mm] = (1000, 2500, 1500). The transmitting SS signal
was ampliﬁed to 50Vp−p.
Figure 18 shows the experimental environment. SS ultra-
sonic waves were transmitted upward from Tr1-Tr4, mounted
on a tripod, and received by Rc, mounted on a bridge of wood.
Figure 19 shows the measurement point. The white and black
circles in Figure 19 denote the transmit and receive points,
respectively. RcA, RcA′ , and RcA′′ are the measurement
Figure 17.
Layout for the positioning experiment in reverberating indoor
environment.
points at the center coordinates (1000, 2000, 1500) of the x−y
plane of the four transmitters, located 1500mm, 2000mm, and
2500mm above the transmitters, respectively. RcC and RcC′′
are above transmitter Tr2 and RcB′′ is above transmitter Tr1.
The distances, l1, l2, l3, and l4, between the transmitters and
a receiver (Figure 17) were measured for each measurement
point. The drone hovered at a position approximately 500mm
above the receiver. The accuracy was examined when the
drone was and was not in ﬂight in the environment. Five trials
were conducted for each measurement point. As in the Section
IV, all experimental results are shown after subtracting the
average of the difference from the true value from ultrasonic
measured distances.
A. Measurement error in distance in the reverberating Indoor
environment
Figure 20 shows the average differences in the distances
from the hovering drone for ﬁve trials. The vertical and
horizontal axes on each graph denote the difference in distance
from the drone compared to the measured distance from l1 to
l4 to Tr1 to Tr4, respectively. The differences in distances are
shown as absolute values, and the average difference in the
distance is shown as a black line.
The results show that all measured distances could be
obtained when the drone was ﬂying, but the measurement
distance was affected by the drone’s ﬂight. Figure 20(a)
shows the drone’s distance for the four transmitters, where the
measurement point is on the center of the x−y plane. A greater
distance between the transmitter and receiver indicates larger
measurement distance. Figure 20(b) compares the accuracy of
the distance measurement at the center position (1000, 2000)
with that when the drone is above Tr2 at heights of 3000mm
and 4000mm. The difference in distance measurement above
Tr2 is the same as that shown in Figure 20(a). The difference
in the distance between Tr2 and RcC′′ is increased by the
drone hovering. Figure 20(c) shows the measurement distance

66
International Journal on Advances in Systems and Measurements, vol 14 no 1 & 2, year 2021, http://www.iariajournals.org/systems_and_measurements/
2021, © Copyright by authors, Published under agreement with IARIA - www.iaria.org
Figure 18. A view of the experiment environment shown from above.
Figure 19. Measurement points of the receivers in Figure 18.
at the height of 4000mm, indicating that the difference in the
distance between Tr1 and RcB′′ increases. Compared to RcA′′,
however, the average difference almost the same.
These graphs indicate that a drone’s downwash and noise
signiﬁcantly affect the measurement distance when the trans-
mitter and receiver are facing each other. The difference in the
measured distance with and without drones is within 4cm.
B. Positioning error in the reverberating indoor environment
The experimental results were evaluated using the RMS of
the difference between the results and the installed distances.
Figure 21 shows the RMS positioning errors at the same
receivers shown in Figure 20 and the maximum and minimum
positioning errors as an expression of variance. The vertical
and horizontal axes of Figure 21 denote the RMS positioning
(a) at each receiver’s height on the center position
(b) at the center position vs above Tr2
(c) at a height of 4000mm
Figure 20. Difference in the measured distance due to drone ﬂight for Figure
18 environment.
error and the measurement point, respectively. The positioning
errors are an average of ﬁve trials.
These results indicate that the positioning error increased
when the drone was ﬂying because of downwash and ﬂight
noise; however, the average errors were less than 15cm. The

67
International Journal on Advances in Systems and Measurements, vol 14 no 1 & 2, year 2021, http://www.iariajournals.org/systems_and_measurements/
2021, © Copyright by authors, Published under agreement with IARIA - www.iaria.org
results of Figures 21(a) and (b) conﬁrm that the greater the
distance between the transmitter and receiver, the larger the
average RMS positioning error and variance when the drone
was being ﬂown. Figure 21(c) shows that the most variance
was observed at the center of RcA′′.
These results indicate that the transmission is sufﬁciently
accurate enough to measure a drone for a periodic inner
wall inspection. More accurate positioning is expected to be
achievable by compensating for errors caused by the angle of
the transmitter and receiver and by the measurement distance
[21].
VI. COMPARISON OF RMS POSITIONING ERRORS IN AN
ANECHOIC CHAMBER AND A TYPICAL ACCLIMATION
ENVIRONMENT
Figure 22 shows the average of all RMS positioning errors
acquired in the anechoic chamber and the reverberating indoor
environment, respectively, with and without the drone using
the M-sequence code. The vertical and horizontal axes in Fig-
ure 22, respectively, show the average value of the positioning
error for all results and the experimental environment. As with
Sections IV and V, the positioning calculation is done after
subtracting the average difference from the true value from the
ultrasonic measured distances. The line on the bar in Figures
22 and 23 has its upper and lower ends at the maximum and the
minimum RMS positioning errors, respectively. As shown in
Figure 22, the RMS positioning error in the anechoic chamber
and reverberant environment was 32mm with the drone and
10mm without the drone.
The two positions of Rca and RcA as well as Rcc and
RcC have respectively the same transmitter-receiver distance.
Figure 23 compares the difference in errors between the
anechoic chamber and the reverberating indoor environment.
The vertical and horizontal axes show the RMS positioning
error and measurement point, respectively. From Figure 23,
no trend of the difference in errors could be conﬁrmed. These
results show that multi-path has little effect on the positioning
results.
VII. CONCLUSIONS AND FUTURE WORK
This study proposed a positioning system using SS ultra-
sonic waves for indoor applications, such as drone commu-
nication and wall surface inspection and evaluated the effects
of the system against drone downwash and noise. The pro-
posed SS ultrasonic positioning system transmits and receives
SS signals using M-sequence, and the distance is measured
using the TOF method. From the experiment conducted in
an anechoic chamber with no reverberation, the positioning
error was within 15cm, although the variance of the error
increased due to downwash. The results were compared with
the experimental results in a reverberating indoor environment,
and the effect of multi-path on the positioning error was not
observed. Greater accuracy in the layout of a communication
robot is expected because of low DOPs. In terms of DOP, a
large error was obtained in the horizontal direction because of
the layout of the transmitters in the experimental environment.
(a) at the center position
(b) at the center position vs above Tr2
(c) at a height of 4000mm
Figure 21. RMS positioning error for Figure 18 environment.
For the positioning of communication robots, higher position-
ing accuracy is expected owing to the different transmitter
layout. Therefore, our positioning system using SS ultrasonic
waves can be applied for drone application. We will conduct
positioning experiments by SS ultrasonic waves with a drone
in an actual tunnel to investigate the usefulness of the proposed

68
International Journal on Advances in Systems and Measurements, vol 14 no 1 & 2, year 2021, http://www.iariajournals.org/systems_and_measurements/
2021, © Copyright by authors, Published under agreement with IARIA - www.iaria.org
Figure 22. Comparison of average RMS positioning error for all measurement
points with anechoic chamber and Figure 18 environment.
Figure 23.
Comparison of RMS positioning error in the same positional
relations from the transmitter to receiver with the anechoic chamber and the
Figure 18 environment.
system.
ACKNOWLEDGEMENTS
This work was supported by MEXT KAKENHI Grant
Number JP 10609423 and Foster Electric Company, Limited.
We would like to thank Uni-edit (https://uni-edit.net/) for
editing and proofreading this manuscript.
REFERENCES
[1] T. Okada and A. Suzuki, “Measurement accuracy on indoor positioning
system using SS ultrasonic waves for drone applications,” in VEHICU-
LAR 2020 The Ninth International Conference on Advances in Vehicular
Systems,Technologies and Applications, Porto, Portugal, October 2020,
pp. 66–71.
[2] L. Apvrille, T. Tanzi, and J.-L. Dugelay, “Autonomous drones for
assisting rescue services within the context of natural disasters,” in 31st
URSI General Assembly and Scientiﬁc Symposium, Beijing, China, Aug
2014, pp. 1–4.
[3] A. E. MacDonald, “A global proﬁling system for improved weather and
climate prediction,” Bulletin of the American Meteorological Society,
vol. 86, no. 12, Dec. 2005, pp. 1747–1764. [Online]. Available:
https://doi.org/10.1175/bams-86-12-1747
[4] W. Yoo, E. Yu, and J. Jung, “Drone delivery: Factors affecting the
public’s attitude and intention to adopt,” Telematics and Informatics,
vol.
35,
no.
6,
2018,
pp.
1687
–
1700.
[Online].
Available:
http://www.sciencedirect.com/science/article/pii/S0736585318300388
[5] U. Nagarajan, G. Kantor, and R. L. Hollis, “Human-robot physical
interaction
with
dynamically
stable
mobile
robots,”
Proceedings
of the 4th ACM/IEEE international conference on Human robot
interaction - HRI ’09, Mar 2009, p. 281–282. [Online]. Available:
http://dx.doi.org/10.1145/1514095.1514176
[6] F. Cunha and K. Youcef-Toumi, “Ultra-wideband radar for robust
inspection drone in underground coal mines,” in 2018 IEEE International
Conference on Robotics and Automation (ICRA), Brisbane,Australia,
Mar 2018, pp. 86–92.
[7] A. Suzuki, T. Iyota, Y. Choi, Y. Kubota, K. Watanabe, and A. Yamane,
“Measurement accuracy on indoor positioning system using spread spec-
trum ultrasonic waves,” 4th International Conference on Autonomous
Robots and Agents, Feb 2009, pp. 294–297.
[8] X. Gan et al., “Doppler differential positioning technology using the
BDS/GPS indoor array pseudolite system,” Sensors, vol. 19, no. 20.
[Online]. Available: http://dx.doi.org/10.3390/s19204580
[9] H. Park, J. Noh, and S. Cho, “Three-dimensional positioning system
using bluetooth low-energy beacons,” International Journal of Dis-
tributed Sensor Networks, vol. 12, no. 10, 2016, p. 1550147716671720.
[Online]. Available: https://doi.org/10.1177/1550147716671720
[10] M. Hazas and A. Hopper, “Broadband ultrasonic location systems for
improved indoor positioning,” IEEE Transactions on Mobile Computing,
vol. 5, no. 5, 2006, pp. 536–547.
[11] L. Segers, A. Braeken, and A. Touhaﬁ, “Optimizations for FPGA-
based ultrasound multiple-access spread spectrum ranging,” Journal
of Sensors, vol. 2020, Jun. 2020, pp. 1–26. [Online]. Available:
https://doi.org/10.1155/2020/4697345
[12] A. Suzuki, T. Iyota, and K. Watanabe, “Real-time distance measurement
for indoor positioning system using spread spectrum ultrasonic waves,”
in
Ultrasonic
Waves.
InTech,
Mar
2012.
[Online].
Available:
https://doi.org/10.5772/30215
[13] K. Kumakura, A. Suzuki, and T. Iyota, “Code division positioning by
continuous signals using spread spectrum ultrasonic waves,” Interna-
tional Conference on Indoor Positioning and Indoor Navigation (IPIN
2013), Oct 2013, pp. 1–8.
[14] A. Suzuki, K. Kumakura, D. Tomizuka, Y. Hagiwara, Y. Kim,
and Y. Choi, “Positioning accuracy on robot self-localization by
real-time
indoor
positioning
system
with
SS
ultrasonic
waves,”
Journal
of
the
Korea
Society
for
Power
System
Engineering,
vol.
17,
no.
5,
Oct.
2013,
pp.
100–111.
[Online].
Available:
https://doi.org/10.9726/kspse.2013.17.5.100
[15] J. A. Paredes, F. J.
´Alvarez, T. Aguilera, and J. M. Villadangos,
“3D indoor positioning of UAVs with spread spectrum ultrasound and
time-of-ﬂight cameras,” Sensors, vol. 18, no. 2, Dec. 2018, p. 89.
[Online]. Available: https://doi.org/10.3390/s18010089
[16] Z. Huang et al., “A noise tolerant spread spectrum sound-based
local positioning system for operating a quadcopter in a greenhouse,”
Sensors, vol. 20, no. 7, Apr. 2020, p. 1981. [Online]. Available:
https://doi.org/10.3390/s20071981
[17] H. Zhang, G. Chen, Z. Wang, Z. Wang, and L. Sun, “Dense
3D mapping for indoor environment based on feature-point SLAM
method,” in Proceedings of the 2020 the 4th International Conference
on Innovation in Artiﬁcial Intelligence, ser. ICIAI 2020.
New York,
NY, USA: Association for Computing Machinery, 2020, p. 42–46.
[Online]. Available: https://doi.org/10.1145/3390557.3394301
[18] P. K. Enge, “The global positioning system: Signals, measurements,
and
performance,”
International
Journal
of
Wireless
Information
Networks, vol. 1, no. 2, Apr. 1994, pp. 83–105. [Online]. Available:
https://doi.org/10.1007/bf02106512
[19] A. Suzuki, T. Iyota, C. Yongwoon, Y. Kubota, K. Watanabe, and
A. Yamane, “Measurement accuracy on indoor positioning system using
spread spectrum ultrasonic waves,” in ICARA 2009 - Proceedings of
the 4th International Conference on Autonomous Robots and Agents,
03 2009, pp. 294 – 297.
[20] “Sht3x
(rh/t)
-
digital
humidity
sensor,”
2021,
[accessed:
2021-11-29].
[Online].
Available:
https:
//www.sensirion.com/en/environmental-sensors/humidity-sensors/
digital-humidity-sensors-for-various-applications/
[21] A. Suzuki and T. Iyota, “Angular dependence of transducers for indoor
positioning system using SS ultrasonic waves,” 2012 International Con-
ference on Indoor Positioning and Indoor Navigation, Nov 2012, pp.
1–6.

