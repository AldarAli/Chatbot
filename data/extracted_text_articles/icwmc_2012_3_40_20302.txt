Performance Evaluation of Data Delivery Procedure in IEEE 802.15.4 Based on
Discrete-Time Markov-Chain
Peng Hao, Weiting Liu, Jianhua Wang
School of Electronics and Information
Jiangsu Uinversity of Science and Technology
Zhenjiang, 212003, China
Email: peter.haopeng@gmail.com, {lwt just, jhwang just}@163.com
Abstract—Data delivery procedure (DDP) based on IEEE
802.15.4
involves
a
series
of
sub-procedures.
They
are
CSMA/CA (Carrier Sense Multiple Access/Collision Avoid-
ance), data transmission (Tx), acknowledgment (ACK) re-
lated behavior (ACK wait duration and ACK transmission).
Any failure during this procedure leads to an unsuccessful
delivery. This procedure, in fact, determines the network
performance, yet not received adequate concern. The algorithm
of CSMA/CA, which generally has also been simpliﬁed in pre-
vious literature. We investigate a discrete-time Markov-chain
(DTMC) for DDP without simpliﬁcation. Due to these sub-
procedures, four cases during this procedure are proposed via
DTMC models. Particularly, we evaluate the impact of different
times of retransmission (ReTx) on the network performance.
The performance is investigated in terms of throughput, data
delivery ratio and time delay. We also verify our analysis via
simulation. Both theoretical and simulation imply that less
ReTx can bring better performance.
Keywords-802.15.4 MAC; CSMA/CA; Data delivery procedure;
Discrete-time Markov-Chain; Performance evaluation.
I. INTRODUCTION
Since IEEE 802.15.4 [1] was ﬁrstly introduced ten years
ago, it has distinguished itself for low data-rate, low cost
and low energy consumption. Both academia and industry
have devoted great effort to this ﬁeld.
We note that recent literature has addressed more on some
speciﬁc IEEE 802.15.4 protocol improvement and appli-
cations than the comprehensive performance study itself.
Meanwhile, when 802.15.4 MAC performance is concerned,
much attention has been focused on CSMA/CA algorithm
only, which generally has also been simpliﬁed. However,
this algorithm is just the beginning of DDP, followed by
data Tx, ACK wait duration, and ACK Tx. In this paper, we
illustrate a convincing analysis via comprehensive DDP, with
unsimpliﬁed CSMA/CA. Our work is to evaluate the MAC
performance during the procedure of delivering packets
between two nodes via one hop.
The rest of the paper is organized as follows. In Section
II, we illustrate data delivery procedure and CSMA/CA
algorithm in 802.15.4 MAC. In Section III, we overview
the related work on performance evaluation of 802.15.4
MAC. In Section IV, discrete-time Markov chain models
0
1
K
…
Figure 1.
Data delivery procedure in active portion
are proposed for CSMA/CA and DDP. In Section V, the
performance is evaluated via both analytical and simulation
work. And ﬁnally, we summarize our work in Section VI.
II. DATA DELIVERY PROCEDURE
IEEE 802.15.4 MAC sublayer provides beacon-enabled
and non-beacon-enabled operations. Our attention in this
paper is drawn to the beacon-enabled one. Also, the MAC
allows the superframe with both active portion and inactive
portion [1]. In inactive portion, the node turns into sleep
mode and no data is delivered. we assume that only active
portion is available since the maximum performance is
concerned in this paper. While in active portion, data packets
are delivered via DDP. As shown in Figure 1, each DDP
involves (macMaxFrameRetries + 1) times of sub-DDP,
namely, ddp. The parameter, macMaxFrameRetries,
implies the maximal number of retransmission of the
packet [1]. For simplicity, we use K and k to indicate
macMaxFrameRetries and the times of ddp, respectively,
namely, ddpk, where k = 0, · · · , K. Data packets shall
be delivered if ddpk is successfully carried out, involving
CSMA/CA, Data Tx and ACK. In addition, there is a
constant, IFS (Inter-Frame Space) [1], between the success-
ful delivered data and the consecutive delivery. It can be
neglected and not considered in this paper. Any failure of
ddpk results in ddpk+1. All probabilities in this paper are
assumed to be obtained based on the steady state.
The parameters in DDP are set by MLME (MAC Layer
Management Entity). After the data delivery is notiﬁed by
MLME, the times of ReTx, k, is initialized to be zero, data
shall be maximally repeated (K + 1) times of ddp, until
SUCCESS is made. Otherwize, FAILURE is notiﬁed. In
other words, K is one of the key factors to determine the
performance.
62
Copyright (c) IARIA, 2012.     ISBN:  978-1-61208-203-5
ICWMC 2012 : The Eighth International Conference on Wireless and Mobile Communications

k = 0
NB=0, CW=2, 
BE=macMinBE
Locate backoff 
period boundary
Delay for random
(2BE-1) unit 
backoff periods
Channel idle?
CW=CW-1, and 
CCA2
CW=0?
ACK in time?
Correct ACK?
NB=NB+1, CW=2, 
BE=min(MaxBE, 
BE+1)
NB> 
macMaxCSMABackoffs 
?
Channel access 
failure
FAILURE
SUCCESS
k=k+1
k >   
macMaxFrameRetries 
?
CCA1
MLME
Y
N
Y
N
Y
N
Y
N
Y
N
Y
N
Data Tx?
N
Y
Coordinator
End Device
Data
ACK
(a)
CAP
CFP
1
0
15
Beacon
Beacon Interval
Superframe Duration (Active Portion)
D
ddp0
ddp1
ddpK
CSMA
/CA
Data Tx
ACK Wait 
Duration
ACK
IFS
…
…
(a)
(b)
(c)
(d)
Figure 2.
Data delivery procedure, including CSMA/CA algorithm (in
shade boxes)
The mechanism of CSMA/CA is the key component in
802.15.4 MAC, shown in the shade boxes in Figure 2. It
is adopted to arrange the nodes in the network with an
appropriate order when they access the channel. It starts
from the notiﬁcation issued by MLME, and ends when the
channel is found either idle or busy. In brief, two behaviors
are involved in this algorithm, backoff period (BP) delay
and twice CCAs (Clear Channel Assessment). Herein, for
the simplicity, we denote them as once BP −CCA−CCA.
The following gives the details.
After the k initialization, the node ﬁrstly perform a BP,
as shown in Figure 2. The length of BP is a random value
based on the period determined by BE, namely, (2BE − 1)
units of aUnitBackoffPeriod, that is, 20 symbols. Then
MAC starts to count down the time prior to the ﬁrst CCA.
Then the ﬁrst CCA shall be performed at the boundary of
the backoff period, as (a) implies in Figure 2. If the channel
is accessed idle, CW self-deceases by one and CCA shall
be performed again (see (b) in Figure 2). If this second CCA
successfully ﬁnds the channel idle, then the CSMA/CA is
successful and data shall be transmitted.
However, if the channel is found busy at the ﬁrst CCA
(see (c) in Figure 2), MLME enables the next BP with a
new length, determined by an updated BE, where BE =
min(MaxBE, BE +1). Or if the channel is idle in CCA1,
while busy in CCA2, namely CW
= 0, then MLME
activates a new ﬁrst CCA in the next round of BP (see
(d) in Figure 2). If both the twice CCAs ﬁnd the channel
busy, a notiﬁcation of FAILURE is indicated by MLME and
forwarded to the Upper Layers [1].
CSMA/CA algorithm consists of NB times of BP −
CCA − CCA procedures, where the length of BP is
determined by BE, and the potential number of CCA is
determined by CW, as follows,
• NB:
the
number
of
times
the
CSMA/CA
algorithm
shall
be
required
to
backoff
while
attempting
the
current
transmission.
0
≤
NB
≤
macMaxCSMABackoffs, where
1 ≤ macMaxCSMABackoffs ≤ 5, but the default
value is 4. NB is initialized 0. In our work, we use
Q and q to denote macMaxCSMABackoffs and
the number of times, namely, q = 1, · · · , Q, where
Q = macMaxCSMABackoffs.
• CW: the contention window length, deﬁning the num-
ber of backoff periods that need to be cleared of
channel activity before the transmission can commence.
In slotted CSMA/CA, by default, the length is set to be
2, namely twice CCA.
• BE: the backoff exponent. It is related to the length
of backoff period a node shall wait before attempting
to access a channel. The value depends on battery life
extension or not, as shown in Figure 2. Here we assume
BE = macMinBE, where 0 < macMinBE ≤ 3.
III. RELATED WORK
The community has been evaluating the performance of
802.15.4 MAC by simplifying CSMA/CA algorithm (for
example, only once CCA in [2], [3]). BE, CW and NB
have mostly received speciﬁc attention, so has the payload
size of data frame, NMSDU. The impact of BE and NMSDU
are concerned in [4]–[9], where different methods have been
proposed to determine the length of BP. CW is investigated
in [2], [8], which concludes a large number of CCA can lead
to less throughput. Ramachandran et al. [2] also evaluates
the inﬂuence of NB. By focusing on CSMA/CA, these
methods above claim to involve the whole data transmission
procedure. However, this might no be true since CSMA/CA
is the beginning of the procedure. ACK and retransmission
(ReTx) also need to be concerned.
Quite limited literature has considered the impact of
ACK during the data transmission. Much work shows their
interest in the difference between with and without ACK.
Miˇsi´c starts one of the most pioneering work in ACK-
related 802.15.4 MAC performance evaluation. The fruit-
ful research has been accomplished in this ﬁeld including
different topology network with ACK (star [10] and cluster
[11]), and different transmission in terms of uplink/downlink
[12]. However, as mentioned in [2], [13], the analytical
models diverse from their simulation results. Reference [13],
[14] also concerns the up-link transmission respectively
with/without ACK. Particularly in [13], an accurate and
scalable analytical model is proposed. However, their work
may not be comprehensive enough since only successful
ACK is involved.
63
Copyright (c) IARIA, 2012.     ISBN:  978-1-61208-203-5
ICWMC 2012 : The Eighth International Conference on Wireless and Mobile Communications

The work on the impact of retransmission on the net-
work performance is still inadequate. The proof of apply-
ing DTMC in the evaluation work has been presented in
[3]. Three dimensional DTMC is proposed in [15], [16],
where the number of retransmission is taken into account.
However, the data delivery procedure in their work might
not be illustrated appropriately. Finding channel busy at the
ﬁrst CCA leads to the current CSMA/CA, again. This, in
fact, should result in the next CSMA/CA procedure if the
maximum times (namely K) of retries have not been met.
Jung also proposes a three-type DTMC model to analyze the
performance [17]. By considering the inactive portion in the
superframe, their work in fact focuses on the unsaturated
network. Their contribution of DTMC also includes the
probability of deferring the data frame that can not be
completed in current superframe to the next superframe.
However, in a saturated situation (which is concerned in
our work), their method might not be applicable. Though
having the impact of different number of retransmissions
considered, as mentioned in [13], Jung’s work may increase
the complexity of the analysis and limits the scalability.
There are also other factors that can affect the perfor-
mance, including the number of nodes involved in the
network, signal fading and interference, and so on. Our
previous work has investigated the impact of the number
of nodes with both star [18] and tree topology [19], [20],
respectively. Channel interference is concerned in this paper,
and signal fading will be evaluated in our future work.
In our work, we propose a comprehensive DTMC for
802.15.4 MAC. Our attention is focused on the impact
of the maximum number of retransmission, K (namely,
macMaxFrameRetries). The performance is investigated
in terms of network throughput, packet delivery ratio and
time delay.
IV. DTMC OF DDP
We illustrate the whole procedure of DDP in Figure 2
via stochastic analysis in terms of the procedure of ddpk,
as shown in Figure 3. The procedure is initialized by k = 0
(namely ddp0). and K times of ReTx (namely ddpk, k =
1, · · · , K). Each of them involves at most Q times (namely
amacMaxCSMABackoffs) of BP − CCA − CCA,
followed by once Tx and once ACK. As shown in this ﬁgure,
the subscript k in BP, CCA, Tx and ACK indicates the
k-th ddp; the subscript, q in BP and CCA, denotes the q-
th BP − CCA − CCA procedure; and respectively, i and
i|i depict channel idle (in the ﬁrst CCA) and channel idle
at the second CCA, given idle in the ﬁrst CCA. Also, the
superscripts, n and c depict node and channel, respectively.
• ddpk: the k-th procedure of data delivery. This pro-
cedure includes Q times of CSMA/CA, once data
transmitting (namely Txk) and the behavior of waiting
for and processing ACK (namely ACKk). There are
algotether (K + 1) times of ddpk.
=NB+1, CW=2, 
E=min(MaxBE, 
BE+1)
NB> 
cMaxCSMABackoffs 
?
Channel access 
failure
Failure
k=k+1
k >   
acMaxFrameRetries 
?
Y
N
Y
…
BPk,1
BPk,2
BPk,Q
CCAk,1,1
CCAk,2,1
CCAk,Q,1
CCAk,1,2
CCAk,2,2
CCAk,Q,2
kpn
,2
1−
n
pk
1,
1 −
n
kp ,Q
1−
c
kp ,i
1−
c
ii
kp
|,
1−
c
i
kp ,
kpn
1,
kpn
,2
n
Q
kp ,
c
pk i i
|
,
c
kp ,i
1−
c
ii
kp
|,
1−
CSMA/CAk
c
kp ,i
1 −
c
kp ,i
1−
c
i
kp ,
c
ii
kp
|,
c
i
kp ,
c
ii
kp
|,
c
ii
kp
|,
1−
c
ii
kp
|,
1−
to CSMA/CAk+1, or
to
from
CSMA/CAk-1
from
MLME
from ACKk-1
…
…
…
from Txk-1
n
j
Fail
CSMA/CA0
Tx0
ACK0
CSMA/CA1
Tx1
ACK1
CSMA/CAK
TxK
ACKK
…
…
…
…
Y
N
N
N
N
N
N
Y
Y
Y
Y
Y
N
N
N
Y
Y
Y
Case 1
Case 2
Case 3
Case 4
MLME
Failure
ddp0
ddp1
ddpK
Success
Coordinator
End Device
Data
ACK
Coordinator
End Device
Data Request
ACK
Data
ACK
(a)
(b)
CAP
CFP
Inactive 
Portion
1
0
15
Beacon
Beacon Interval
Superframe Duration (Active Portion)
DDP
ddp0
ddp1
ddpK
CSMA
/CA
Data Tx
ACK Wait 
Duration
ACK
IFS
…
…
Txk
ACKk
k
β
− βk
1
k
α
−αk
1
n
Succ
Case 1
Case 2
Case 3
Case 4
Figure 3.
DTMC of DDP and four cases in DDP
• BPk,q: the q-th Backoff Period in the ddpk.
• pn
k,q: the probability for the node to perform the BPk,q.
• CCAk,q,v: the v-th CCA in q-th BP − CCA − CCA
procedure in ddpk, where 1 ≤ v ≤ CW, 1 ≤ q ≤ Q.
In our work, CW is initialized to be 2.
• pn
k,i: the probability that the channel is found idle at
the ﬁrst CCA (namely CCAk,q,1), here i denotes idle.
• pc
k,i|i: the probability that the channel is found idle at
the second CCA (namely CCAk,q,2), given the idle
channel in CCAk,q,1.
• αk: the probability that the transmitting in the PHY
sublayer is successful, considering the channel noise
or interference.
• βk: the probability that the correct ACK is received in
time.
A. Four Cases in Data Delivery Procedure
We understand CSMA/CA, data Tx in PHY sublayer and
ACK-related process can all impact the network perfor-
mance. Therefore, we take all of them into account, as shown
in Figure 3. In each ddp, if the current CSMA/CA is unable
to lead to Data Tx, another CSMA/CA in a new ddp shall
be processed, which can also be activated by the failure of
Data Tx in PHY sublayer. Additionally, if the ACK-related
process fails, Data Tx in the new ddp shall be carried out
again in the PHY sublayer.
The data is successfully delivered if and only if the
Correct ACK is received within macAckWaitDuration,
namely 54 symbols [1]. A notiﬁcation of SUCCESS is
generated by MLME. Otherwise, a notiﬁcation of FAILURE
occurs. These four cases are,
• Case 1: unsuccessful data transition due to the failure
of CSMA/CA; or
64
Copyright (c) IARIA, 2012.     ISBN:  978-1-61208-203-5
ICWMC 2012 : The Eighth International Conference on Wireless and Mobile Communications

• Case 2: unsuccessful data transition, due to the channel
failure (noise or interference); or
• Case 3: the data is successfully transmitted, but No
ACK is received within the certain period of time
( macAckWaitDuration symbols); or, received in
time, but the ACK is Incorrect. In other words, the
DSN (Data Sequence Number) this ACK contains is
not same with the one from the data or MAC command
that is being acknowledged [1]; or
• Case 4: successful data transmission and correct ACK
received in time.
Based on Figure 3, we can have the probabilities for Case
1 - Case 4 in DDP, denoted as pn
c1, · · · , pn
c4, respectively, as
follows,
pn
c1
=
K
X
k=0
[(1 − pc
k,i) · π(CCAk,Q,1)
+(1 − pc
k,i|i) · π(CCAk,Q,2)],
(1)
pn
c2
=
K
X
k=0
(1 − αk) · π(Txk),
(2)
pn
c3
=
K
X
k=0
(1 − βk) · π(ACKk),
(3)
pn
c4
=
K
X
k=0
βk · π(ACKk).
(4)
In addition, we assume the data to be transmitted at each
node is subject to Poisson process, with the mean as p. Also,
p is the normalized trafﬁc load prior to DDP. And the state
of Failn
j denotes the j-th failure in DDP, where j = 1, 2.
Also the parameter of pn
k,q is assumed as a geometric
random variable [2], [3], as shown in (5) [1]. This is
consistent with the fact that the lower value of the q can
lead to the bigger chance to perform BP-CCA-CCA. Fur-
thermore, the BP can be regarded memoryless. Meanwhile,
the probability of channel failure due to interference or
noise, namely 1 − αk, is also assumed to be subject to the
uniformly distributed white noise with 0.8 ≤ αk ≤ 1, where
k = 0, · · · , K.
pn
k,q =
1
2BE−1
2
+ 1
=
(
2
2q+2+1,
if q = 1, 2;
2
2Q+1,
q = 3, · · · , Q.
(5)
Meanwhile, we note that CCA behavior is actually inde-
pendent to the procedures of data delivery because CCA is
determined by the channel state. In other words, The prob-
ability of pc
k,i is assumed to be the same at different ddpk.
Therefore it is rewritten as pc
i. And so is the probability of
pc
k,i|i, rewritten as pc
i|i. Moreover, since all the probabilities
in our DTMC is assumed to be obtained in the steady state,
we use π to denote the steady state, followed by the MAC
ϕ
ξ
− ϕ − ξ
1
1
1
1
Fail c
c
idle
c
Succ
c idlec
idle ,
Figure 4.
Channel DTMC
behavior or channel state. Therefore, the steady state of BP,
CCA, Tx, ACK, Fail, and MLME can be obtained.
B. DTMC of Channel
The physical channel plays a vital role in the evaluation.
This is not only because of the potential noise and inter-
ference which has been considered in Case 2 in Section
IV-A, but also the fact that the channel states (idle or busy)
determine whether the data transmission can be carried out
in the ﬁrst place.
Furthermore, we understand the fact that all frames,
including data, command, and ACK, are transmitted via the
physical channel. Therefore, the throughput of the network
can actually be equal to the throughput of the channel.
This can be more reliable than the throughput at nodes
or the network coordinator. Unlike the latter which has
been adopted in most work in this ﬁeld, we investigate the
network performance via the evaluation on the channel.
Two states are shared by both nodes and the channel,
namely idle and (idle, idle). Regarding twice CCAs, idlec
and (idlec, idlec) are introduced to facilitate the modeling
by combining both MAC process and channel states, where
the superscript c refers to channel, as shown in Figure 4.
The probabilities are illustrated in (6) and (7) respectively.
pc
i =
2 − ϕ
1 + (NMSDU + 1)(1 − ϕ),
(6)
pc
ii =
1
1 + (NMSDU + 1)(1 − ϕ).
(7)
For the channel, these two states lead to the result of either
SUCCESS or FAILURE, denoted by Succc and Failc in
Figure 4. Here, the number of times is not applied to the
latter, unlike j in Failn
j . Assume M source nodes in the
network, the probability from (idlec, idlec) to Succc is,
ξ = Mpn
t|ii(1 − pn
t|ii)M−1,
(8)
owing to that each time only one source node can success-
ful transmit data frames via the channel. Also, staying at
(idlec, idlec) means no transmission from source nodes in
the network, namely,
ϕ = (1 − pn
t|ii)M,
(9)
65
Copyright (c) IARIA, 2012.     ISBN:  978-1-61208-203-5
ICWMC 2012 : The Eighth International Conference on Wireless and Mobile Communications

where pn
t|ii is the probability of transmitting the packet after
the successful twice CCA. This parameter is obtained by
(10)
pn
t|ii = pn
t
pc
ii
.
(10)
Particularly, we have 0 ≤ pc
t|ii ≤ 1 −
Mq
2
NMSDU +1,
considering both ϕ > 0 and pn
t|ii > 0.
V. NUMERICAL RESULTS
We assume the network be comprised by thirty homoge-
neous source nodes, namely M = 30. They are sending data
to a coordinator node. Based on ns-2, the distance between
the nodes and the coordinator is randomly distributed within
the working range (15 m) so that the nodes can talk to the
coordinator with a single hop. These nodes need to deliver
a packet of 100-byte MSDU (namely NMSDU = 100 byte)
each time with normalized trafﬁc load p. Particularly, since
three CSMA/CA-related parameters, BE, CW and NB,
have been sufﬁciently studied by the research community,
their impact shall not be addressed. Our work emphasizes
on the impact of K (macMaxFrameRetries). We evaluate
the network performance in terms of network throughput,
time delay and packet delivery ratio, as follows:
• thpt:
the
effective
network
throughput.
Namely,
the ratio of the MSDU received at the coordi-
nator to the consumed time. In particular, SHR
(Synchronization Header), PHR (PHY Header),
MHR (MAC Header) and MFR (MAC Footer)
are not concerned, neither the command frames such
as beacons [1].
• tdelay: the average time consumed when a packet is
successfully transmitted from the source node to the
coordinator.
• η: the packet delivery ratio. That is, the ratio of the
number of MSDU received at the coordinator to the
one sent from the nodes.
We begin the evaluation with the probability of Case 1 to
Case 3 (refer to (1), (2) and (3)), shown in Figure 5.
In Figure 5, we observe that Case 1 brings the prominent
impact to the network. That is, ReTx occurs mostly due to
the busy channel during twice CCA. Particularly, the ﬁrst
CCA has a stronger impact on the performance, because
the probability of the CCA1 is much larger than the one of
CCA2, namely,
PK
k=0
PQ
q=1 π(CCAk,q,1)
PK
k=0
PQ
q=1 π(CCAk,q,2) ≫ 1.
Obtaining thpt via the channel states can also be found
in [2], [3]. However, only CSMA/CA is involved in their
work. The throughput in [2], [3] is actually based on the
successful transmission at source nodes, rather than channel-
based analysis in our work. Also, their throughput involves
data packets, ACK frame, beacon frame and other mainte-
nance frames, which did not depict the effective throughput
contributed by MSDU. In our work, we are concerned
0
0.005
0.01
0.015
0.02
0.025
0.03
0
0.002
0.004
0.006
0.008
0.01
0.012
0.014
0.016
0.018
0.02
Normalized traffic load at each node
Nomalized performance impact
 
 
Case1
Case2
Case3
Figure 5.
Normalized performance impact of case 1 to case 3
0
0.005
0.01
0.015
0.02
0.025
0.03
0
0.1
0.2
0.3
0.4
0.5
0.6
0.7
0.8
0.9
1
Normalized traffic load at each node
Normalized network throughput
 
 
AnaK=1
AnaK=3
AnaK=5
SimK=1
SimK=3
SimK=5
Figure 6.
Normalized network throughput at different K
about the throughput due to the data packets only, and
recognize that channel noise/interference and ACK-related
cases should also be considered. Therefore, given π(Succc),
the probability of Case 4, i.e. pn
c4|sc, is,
pn
c4|sc =
pn
c4
(K + 1) · π(Succc).
(11)
Now the network throughput is obtained, as illustrated in
(12). The throughput at different maxMaxFrameRetries
(i.e. K) is shown in Figure 6 .
The analytical results are also veriﬁed by the simulation
results based on ns − 2. First, more procedures of ddpk
bring less throughput, because these procedures prolong the
packet delivery time. Second, throughput behaves with a
saturation interval, as shown in Figure 6. After the saturation,
throughput decreases. This is because more packets may
have been dropped due to collision.
The total time delay, denoted by tsum, is obtained, as
follows,
66
Copyright (c) IARIA, 2012.     ISBN:  978-1-61208-203-5
ICWMC 2012 : The Eighth International Conference on Wireless and Mobile Communications

thpt = pn
c4|sc ·
NMSDU · π(Succc)
π(idlec) + π(idlec, idlec) + NMSDU · π(Succc) + NMSDU · π(Failc)
= pn
c4|sc ·
NMSDU · M · pn
t|ii · (1 − pn
t|ii)M−1
1 + (NMSDU + 1)(1 − (1 − pn
t|ii)M).
(12)
tdelay =
K
X
k=0
tk,
(13)
where tk is the time consumed during the ddpk procedure,
as shown in (14),
tk =
Q
X
q=1
{π(BOk,q) · τBP +
2
X
v=1
[π(CCAk,q,v) · τCCA]}
+ π(Txk) · τT x + π(ACKk) · τACK,
(14)
where τCCA, τT x, τACK and τBP are illustrated in (15) to
(19), respectively.
τCCA
=
8 · 0.016 = 0.128 ms,
(15)
τT x
=
MSDU
Datarate = 100 · 8
250
= 3.2 ms,
(16)
τACK
=
macAckWaitDuration + tACK
(17)
=
0.864 + 0.352 = 1.216 ms.
(18)
τBP =
(
0.32 · (2BE − 1),
if macMinBE ≤ BE ≤ 4;
0.32 · (2aMaxBE − 1),
if BE > 4.
(19)
where 0.32ms is the length of aUnitBackoffPeriod. And
tACK means the time to process the received ACK. By
varying K, we have Figure 7.
When K becomes higher, the node spends more time on
delivering the packet to the coordinator. Furthermore, the
time delay increases signiﬁcantly at higher trafﬁc load due
to collision.
The packet delivery ratio η is illustrated in (20). Also we
investigate the evaluation by setting different K, as shown
in Figure 8.
η =
thpt
M · p · NMSDU
=
pn
t|ii · (1 − pn
t|ii)M−1
1 + (NMSDU + 1)(1 − (1 − pn
t|ii)M−1)
(20)
Similar results are obtained in this ﬁgures as well. Both
analytical work and simulation share the result that delivery
ratio is performed in a decreasing trend along the increment
of the trafﬁc load. Our simulation also shows that the
0
0.005
0.01
0.015
0.02
0.025
0.03
0
0.1
0.2
0.3
0.4
0.5
0.6
0.7
0.8
Normalized traffic load at each node
Time delay time (s)
 
 
AnaK=1
AnaK=3
AnaK=5
SimK=1
SimK=3
SimK=5
Figure 7.
Time delay at different K
0
0.005
0.01
0.015
0.02
0.025
0.03
0
5
10
15
20
25
30
35
40
45
50
Normalized offerload at each node
Packet delivery ratio (%)
 
 
AnaK=1
AnaK=3
AnaK=5
SimK=1
SimK=3
SimK=5
Figure 8.
Packet delivery ratio at different K
network relatively keeps enjoying the high ratio when the
trafﬁc load is fairly small. It reminds that the packet delivery
ratio suffers more at higher trafﬁc loads.
VI. CONCLUSION
We proposed discrete-time Markov chain (DTMC) mod-
els for the comprehensive data delivery procedure (DDP)
in 802.15.4-based beacon-enabled network. DDP includes
(macMaxFrameRetries + 1), namely, (K + 1) times
of sub-DDP (that is, ddpk, k = 0, · · · , K). Each ddpk
involves three MAC behaviors. They are standard slot-
ted CSMA/CA algorithm which is comprised of up to
67
Copyright (c) IARIA, 2012.     ISBN:  978-1-61208-203-5
ICWMC 2012 : The Eighth International Conference on Wireless and Mobile Communications

macMaxCSMABackoffs times of backoff periods (BP)
and twice CCA, the transmission (Tx) in PHY sublayer
and ACK-related (Acknowledgment) process as well. The
successful data delivery indicates that, during a DDP, the
data packet is transmitted after success in all three behaviors.
Because of the success/failure of the three MAC behaviors,
four cases are proposed regarding different outcomes of data
delivery. Based on the DTMC and the simulation work via
ns-2, we evaluate the MAC performance of the network.
By varying K, the impact on the network performance
are studied, in terms of throughput, time delay and packet
delivery ratio global. Our work reveals more K can bring
poor performance.
ACKNOWLEDGMENT
The authors would like to thank The University of Mel-
bourne and National ICT Australia Ltd. for the valuable
contribution to our work.
REFERENCES
[1] “IEEE standard for information technology - telecommuni-
cations and information exchange between systems - local
and metropolitan area networks - speciﬁc requirements. part
15.4: wireless medium access control (MAC) and physical
layer (PHY) speciﬁcations for low-rate wireless personal area
networks (LR-WPANs),” Tech. Rep., 1 October 2003.
[2] I. Ramachandran, A. K. Das, and S. Roy, “Analysis of
the contention access period of ieee 802.15.4 mac,” ACM
Transactions on Sensor Networks, vol. 3, no. 1, pp. 1–29,
Mar 2007.
[3] M. Martal´o, S. Busanelli, and G. Ferrari, “Markov chain-
based performance analysis of multihop ieee 802.15.4 wire-
less networks,” Performance Evaluation, vol. 66, pp. 722–
741, 2009.
[4] B. Gao and C. H. L. Jiang, “Modeling and analysis of ieee
802.15.4 csma/ca with sleep mode enabled,” in In Proceed-
ings of the 11th IEEE Singapore International Conference on
Communication Systems, Singapore, Nov 2008, pp. 6–11.
[5] J. Gao, J. Hu, and G. Min, “A new analytical model for
slotted ieee 802.15.4 medium access control protocol in
sensor networks,” in In Proceedings of the Communications
and Mobile Computing (CMC’09), vol. 2, Yunnan China, Jan
2009, pp. 427–431.
[6] H. Wen, C. Lin, Z.-J. Chen, H. Yin, T. He, and E. Dutkiewicz,
“An improved markov model for ieee 802.15.4 slotted
csma/ca mechanism,” Journal of Computer Science and
Techonology, vol. 24, no. 3, pp. 495 – 504, May 2009.
[7] X. Ling, Y. Cheng, J. Mark, and X. Shen, “A general analyt-
ical model for the ieee 802.15.4 contention access period,”
in In Proceedings of IEEE Wireless Communications and
Networking Conference, Hong Kong, March 2007, pp. 316–
321.
[8] Z. Tao, S. Panwar, D. Gu, and J. Zhang, “Performance
analysis and a proposed improvement for the ieee 802.15.4
contention access period,” in In Proceedings of Wireless
Communications and Networking Conference (WCNC’06),
vol. 4, Las Vegas, USA, Apr 06, pp. 1811–1818.
[9] B. Lauwens, B. Scheers, and A. V. de Capelle, “Performance
analysis of unslotted csma/ca in wireless networks,” Telecom-
munication Systems, vol. 44, no. 1-2, pp. 109–123, Jun 2010.
[10] J. Miˇsi´c, S. Shaﬁ, and V. B. Miˇsi´c, “The impact of mac
parameters on the performance of 802.15.4 pan,” Ad Hoc
Networks, vol. 3, pp. 509–528, 2005.
[11] J. Miˇsi´c, “To acknowledge or not to acknowledge: The case
of interconnected 802.15.4 clusters,” in In Proceedings of the
16th Mobile and Wireless Communications Summit, Budapest,
Jul 2007, pp. 1–5.
[12] J. Miˇsi´c, S. Shaﬁ, and V. B. Miˇsi´c, “Performance of a
beacon enabled ieee 802.15.4 cluster with downlink and
uplink trafﬁc,” IEEE Transactions on Parallel and Distributed
Systems, vol. 17, no. 4, pp. 361–376, Apr 2006.
[13] J. He, Z. Tang, H.-H. Chen, and Q. Zhang, “An accurate and
scalable analytical model for ieee 802.15.4 slotted csma/ca
networks,” IEEE Transactions on Wireless Communications,
vol. 8, no. 1, pp. 440–448, Jan 2009.
[14] S. Pollin, M. Ergen, S. C. Ergen, B. Bougard, F. Catthoor,
A. Bahai, and P. Varaiya, “Performance analysis of slotted
carrier sense ieee 802.15.4 acknowledgment uplink transmis-
sion,” in In Proceedings of IEEE Wireless Communications
and Networking Conference, Las Vegas, USA, Mar/Apr 2008,
pp. 1559–1564.
[15] P. K. Sahoo and J.-P. Sheu, “Modeling ieee 802.15.4 based
wireless sensor network with packet retry limits,” in In
Proceedings of the 5th ACM symposium on Performance eval-
uation of wireless ad hoc, sensor, and ubiquitous networks,
New York, USA, Oct 2008, pp. 63–70.
[16] J. Park and S. Sahni, “An online heuristic for maximum life-
time routing in wireless sensor networks,” IEEE Transactions
on Computers, vol. 55, no. 8, pp. 1048–1056, Aug 2006.
[17] C. Y. Jung, H. Y. Hwang, D. K. Sung, and G. U. Hwang,
“Enhanced markov chain model and throughput analysis of
the slotted csma/ca for ieee 802.15.4 under unsaturated trafﬁc
conditions,” IEEE Transactions on Vehicular Technology,
vol. 58, no. 1, pp. 473–478, Jan 2009.
[18] W. Qiu, P. Hao, and R. J. Evans, “An efﬁcient self-healing
process forzigbee sensor networks,” in Proceedings of The 7th
International Symposium on Communicationsand Information
Technologies, Sydney, Australia, Oct 2007, pp. 1–6.
[19] P. Hao, W. Qiu, and R. J. Evans, “Performance evaluation of
ieee 802.15.4 mac in beacon-enabled tree-topology wireless
sensor networks,” in in Proceedings of the Fifth International
Conference on Systems and Networks Communications, Nice,
France, Aug 2010, pp. 1–6.
[20] W. Qiu, E. Skaﬁdas, and P. Hao, “Enhanced tree routing
for wireless sensor networks,” in Ad Hoc Networks, Elsevier,
vol. 7, 2009, pp. 638–650.
68
Copyright (c) IARIA, 2012.     ISBN:  978-1-61208-203-5
ICWMC 2012 : The Eighth International Conference on Wireless and Mobile Communications

