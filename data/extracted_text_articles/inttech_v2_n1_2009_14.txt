 
 
Abstract—In coming years it is supposed that importance of 
the Internet television technology will grow and also number of 
households and subscribers paying for this service will be 
increasing. It is also supposed that this technology will enable a 
new kind of services, where one of them is an interaction of 
customers with content provider. For this purpose a method of 
hierarchical aggregation for a feedback transmission has been 
proposed, which is in comparison to classical real-time control 
protocol quite scalable. This paper describes integration of 
hierarchical aggregation with internet coordinate systems, which 
can make communication between session members more 
efficient. It also describes some advantages of this integration and 
a prototype of such system is introduced. Furthermore, it 
describes some use examples and options for extensions of such 
architecture.  
 
Index Terms—Quality of Service, Global network positioning, 
Real-time control protocol, Real-time protocol, Hierarchical 
aggregation  
 
I. INTRODUCTION 
he Internet Protocol TeleVision (IPTV) market has 
achieved a great attention in recent years. According to 
several independent market analyses, IPTV technology 
will soon take a significant additional market share among 
China, Europe, USA and even other areas. IPTV will enable a 
new kind of services such as interactive TV. However, to be 
really interactive, there is need to transmit all the user action 
in some limited time period and this could become a problem. 
Consider an example where we have IPTV session with two 
million of subscribers. When all the subscribers decide to vote 
for some kind of poll, this would lead for ten millions times 
sending a message of at least 64 bytes (assuming a presence of 
User Datagram protocol (UDP) header, a packet header to 
distinguish it from standard Real-time Transport Protocol / 
Real-time Control Protocol (RTP/RTCP) header and, also, 
there can be not even simple YES/NO votes), this would lead 
to need to transmit about 600 MB. A general view of the term 
interactive TV is a communication between content provider 
and subscribers, where the content provider announces some 
poll and waits for some time for answers from subscribers. We 
are in this work motivated not by a need to enable just simple 
request/reply model, where also simple HTTP protocol based 
approaches can work sufficiently. We are in this work 
motivated by a vision to enable conveying of subscriber 
 
 
actions continuously during entire TV program time, from . In 
such cases especially for a bigger numbers of receivers it will 
pay of to provide optimized and relatively well scalable 
backchannel technology. In the opposite case it may arise 
some traffic peaks, which potentially may cause loss of votes, 
harm other already running services on the network or even 
the IPTV broadcasting itself. One of the promising 
technologies for this purpose is so-called hierarchical 
aggregation (HA) [3], [4], [5], [13], [14].  
 This paper describes how the hierarchical aggregation (HA) 
can be integrated with coordinate systems to save bandwidth 
and proposes a real architecture for IPTV systems. HA is 
inspired by principle often utilized by wireless sensor 
networks (WSN) and it is used to gather huge amount of data 
in a short amount of time. However in WSN, there is emphasis 
on energy efficiency. In the field of the Internet there less need 
to take emphasis on the energy consumption. However 
compared with WSN, there is need to take a better emphasis 
on complex Internet topology. 
The integration of internet coordinating systems with HA 
can make communication even more effective and it can 
enable not only simple interaction as a question/response in 
some kind of polling, but even continuous connection of 
subscribers with content provider and convey their opinion 
during entire time of the session. It is also scalable enough for 
any further growth of number of receivers in the session and 
even mobile devices in future. 
What should be emphasized here, this paper does not deal 
with security issues. The securing the communication can be 
often simplified by the identification of paying subscribers and 
can significantly vary from case to case. 
The first part of this paper is involved in RTP/RTCP 
protocols defined in RFC 3550 [17] specification and its 
mathematical foundation. It also gives a brief overview of the 
HA. The next section describes internet coordinate systems 
and gives a brief comparison of these algorithms concerning 
HA. The following section proposes an architecture for 
integration of HA with selected coordinate system. The last 
section describes how it could be further extended to estimate 
positions of subscribers. 
II. INTRODUCTION TO REAL-TIME PROTOCOL  
AND  HIERARCHICAL AGGREGATION 
RTP and RTCP [1] are protocols designed for data delivery 
in real-time and, among other things, to measure the quality of 
service (QoS). This couple of protocols is today used for 
Interactive Internet Television for Mobile 
Devices and Large-scale Areas  
Radim Burget, Dan Komosny, Jakub Müller 
T 
173
International Journal On Advances in Internet Technology, vol 2 no 1, year 2009, http://www.iariajournals.org/internet_technology/

 
almost all transmission of time sensitive data such as audio, 
video, subtitles, etc. This is the reason why the paper will 
describe RTCP protocol rather than IPTV service. 
The RTCP protocol uses receiver reports (RR-RTCP) and 
sender reports (SR-RTCP), which are sent between sender and 
receiver and which contain necessary information to evaluate 
e.g. RTP packet loss, jitter, round trip delay time, etc. In the 
RTCP protocol, the maximal consumed bandwidth is limited 
to 5 % of the total session reserved bandwidth. To meet this 
limitation, the period for transmitting RTCP messages must 
exactly fulfill the following equations [17]. These equations 
compute the period for transmitting RR-RTCP messages 
(T’RR), SR-RTCP messages (T’SR) and RSI-RTCP messages 
(TRSI). All of them are described by equations (1), (2), (3) and 
(6). When the number of users is low the period will be 
evaluated as too short and this will lead to unnecessarily 
wastage of bandwidth. For this reason the final values of 
equations
, and 
 are limited by their lower bounds by 
the constant of 5 seconds. Finally the compensation factor  is 
added; see equations (6), (5), (7) (or see [15], [17] for more 
detailed information) to take also into consideration empirical 
experiences and long-term observations.  
 
 
(1) 
 
 
(2) 
 
 
(3) 
 
 
(4) 
 
 
(5) 
 
 
(6) 
 
 
(7) 
L stands for the packet length of a message where its index 
denotes the packet type, B stands for the total session 
bandwidth, BRTCP for the bandwidth reserved for RTCP 
protocol, and n is the total number of receivers in the whole 
session. As follows from equation (1) and (4), for a large 
number of receivers n the period TRR can become pretty long 
and this leads to averaged values from longer time period, 
which can be useless for some kind of applications, especially 
an interactive ones. One way to cope with this problem is to 
break RTP/RTCP recommendations and use more than 5 % of 
session bandwidth. Another approach is to use method such as 
HA. 
HA is one of the improvements for the RTCP protocol that 
has been recently introduced. Thanks to HA the idea of 
redundant data flow reduction has been advanced even further 
than any other RTCP improvement. It uses feedback targets 
and these feedback targets are organized hierarchically. With 
their help data redundancy can be removed at a short distance 
from the receiver and this gives us the ability to construct 
topologies ready for large-scale deployment where a huge 
number of receivers can be connected at the same time with 
low bandwidth consumption for RTCP protocol transmission. 
As described in detail in [3], HA can give even up to 100 
times faster signaling gathering in comparison with the RFC 
3550 RTCP standard, when in both cases 51 kbps bandwidth, 
and 105 receivers is present in the session [18]. The value 51 
kbps equals the IPTV streaming with 1 Mbps reserved 
bandwidth for the service (i.e. 5 % of the whole service, as 
defined in RFC 3550). 
In HA three types of members exist: sender, feedback 
targets and receivers. The sender transmits multimedia data, 
sender reports (SR-RTCP) and receiver summary packets 
(RSI-RTCP) to a multicast channel. The receivers receive 
multimedia data from the multicast channel and transmit 
receiver reports (RR-RTCP) to a feedback target via a unicast 
channel. These receiver reports contain information about the 
quality of reception and they can be also extended by an 
additional content (e.g. vote). And finally, feedback targets 
receive receiver reports (RR-RTCP) and they create statistics 
about QoS of these reporting receivers. RSI-RTCP messages 
are then created from many of these reports and they are 
transmitted to sender or another feedback target, when 
multilevel hierarchical aggregation is used (see Fig. 1). 
In HA the receivers and feedback targets have to be organized 
in a hierarchical tree structure and the sender has to be 
informed about the size of each subgroup below feedback 
 
Receiver
IPTV 
sender
SR-RTCP
+
reflected
RR-RTCP
RTP
(audio, video)
Receiver
Receiver
Receiver
RR-RTCP
RR-RTCP
RR-RTCP
RR-RTCP
Feedback 
target
RSI-RTCP
Feedback 
target
RSI-RTCP
Unicast RR 
(RTCP)
Multicast SR 
(RTCP)
Multicast Audio/
Video (RTP)
Unicast RSI 
(RTCP)
Multicast group (S,G)
 
Fig.1. The RFC 3550 RTP/RTCP protocol improved with hierarchical 
aggregation. RR-RTCP stands for receiver report [17], SR-RTCP stands for 
sender report [17], RSI-RTCP stands for receiver summary information packet 
[15] 
 
 
 
 
 
174
International Journal On Advances in Internet Technology, vol 2 no 1, year 2009, http://www.iariajournals.org/internet_technology/

 
target, in other words, about how many members share the 
 bandwidth. It is necessary to know this to be able to 
calculate the period lengths TRR, and TRSI as shown in 
equations (8), (9), (10) and (11): 
 
 
(8) 
 
 
(9) 
 
 
 
(10) 
 
 
(11) 
where T’RSI_S stands for the time interval for sending RSI-
RTCP message transmission from the sender, T’RSI_FT  stands 
for the time interval of the RSI-RTCP packet transmission 
from the feedback targets, nFT and nG_R, give the number of 
neighbouring feedback targets or receivers that have a 
common feedback target in a single subgroup (see Fig. 1). All 
the formulas have to be compensated by the compensation 
factor 
 and its lower bound is limited to a constant of 5 
seconds (4), (5) [17]. 
From these equations it is quite clear that especially for 
large scale sessions with huge number of receivers the traffic 
load over a network can be better spread and thanks to the 
aggregation also some degree of bandwidth reduction is 
possible. 
III. COORDINATE SYSTEMS 
The Internet coordinate systems are quite new approach 
how to localize hosts even in fixed networks. The major 
motivation for utilizing these methods is to optimize 
communication in the network and reduce bandwidth used in 
the same session size. And this is also our motivation of 
utilizing them in the field of HA. In the next few paragraphs 
the coordinate system types will be assessed from the 
perspective of HA. 
The coordinate system methods can be divided into two 
basic groups: central based which utilizes landmarks and 
distributed one which are commonly based on physical model 
of spring network, which produces tension between hosts. [19] 
A. Centralized coordinate systems 
The Global Network Positioning (GNP) algorithm runs 
through two separate steps: first a set of landmarks is 
established and secondly the host position prediction is done. 
The landmarks are a subset of hosts which have a special role 
in the network and they create the backbone for the whole 
algorithm. Using them the hosts can predict their position 
while no high network traffic is generated.  
The equation establishing the landmarks is a matter of 
seeking the minimum of the following function: 
 
 
(12) 
 
 
(13) 
the variable 
 stands for a number of landmarks, D is the 
space dimension, 
 is a coordination of a landmark 
 in 
synthetic space, 
 stands for the distance measured 
between the landmarks  
 and
, 
 stands for calculated 
distance between the landmarks  
 and
,  stands for the 
square of error, and function f stands for the total sum of 
errors, for which we seek the minimum. See [1], [2], [6], [7] 
for a more detailed explanation of the algorithm. The 
measurement of distances is performed using the Internet 
Control Message Protocol (ICMP) protocol [16]. This protocol 
is used, for example, by the ping tool, which is available under 
many operating systems. The protocol measures the time delay 
between the initial packet transmission request and receiving 
the echo from the “pinged” host. This time is the so-called 
round-trip time (RTT). 
Although the equation seems to be quite complex, it is 
based on a simple idea. The known variables are the distances 
measured and the unknown variables are the coordinates of 
landmarks, which will best fit the values measured. The 
number of unknown variables is expressed by formula (13). 
Each dimension of each landmark stands for a variable. The 
best host placement is found when the total function error is 
minimal. The equation thus takes the matrix of distances 
measured between all the landmarks, compares these values 
with the matrix of computed values and creates the sum of 
square of these deviations. Seeking optimal landmark 
coordinates is a matter of seeking for the minimum of function 
(12). Using this equation, we are even able to establish a set of 
landmarks from regular hosts, whose position is not know, but 
without any relevance to a real coordinate system (e.g. 
position on the map). 
The second part of the algorithm localizes regular hosts. It 
is similar to the previous one, but now we aim to estimate the 
coordinates of a single host. The known variables are the RTT 
distances between the host and each of the set of landmarks 
that the host can measure. Then the estimation of the host 
coordinates is a matter of seeking the minimum of the 
following function: 
 
 
(14) 
In the case of equation (14), it is a D-dimensional function 
(see Equation (13)) and the total deviation between computed 
and measured values between the host H and landmarks
 is computed. 
B. Distributed coordinate systems 
Other approaches can also use distributed coordinate 
systems. Their major representative is so-called Vivaldi 
method [19], which has also many variants and improvements 
175
International Journal On Advances in Internet Technology, vol 2 no 1, year 2009, http://www.iariajournals.org/internet_technology/

 
that have been introduced recently, such as Myth [20], Pharos 
[21] and others. All can improve its accuracy and shorten the 
time of convergence to accurate values. These methods are 
commonly based on theoretical physical model of spring 
mesh, which are placed between hosts and the tension among 
these imaginary springs leads to minimize energy in the set of 
localized hosts. In terms of its accuracy the distributed 
coordinate systems are comparable with GNP, however its 
time of convergence to relatively accurate values is in case of 
Vivaldi significantly higher. Another issue is that it generates 
permanent traffic during the time of the session. When the 
network conditions are static, there is no need to measure the 
RTT distances again. On the other hand, the advantage of it is, 
that the structure of network is continuously adapted to the 
current network conditions, and therefore in dynamic network 
environments it would give better results. Furthermore, it 
seems that in decentralized coordinate it systems is quite 
difficult to utilize HA overhead for round-trip delay time 
measurement, which is necessary for every coordinate 
systems. 
In some cases there might be beneficial to use a hybrid 
approach – distributed coordinate systems for feedback target 
(FT) stations and centralized GNP for receivers. Suitability of 
this approach strongly varies from case to case depending on 
the network type and network environment. If there are 
expected some network changes it is suggested to consider to 
use a distributed Vivaldi version where the session will adapt 
to actual network conditions. The drawback of this approach is 
its overhead traffic, which is for the immutable networks 
needless.  
Currently we expect that most of the cases of HA 
deployment will be in static environments, and therefore the 
version described here is the centralized one. In this case it is 
also possible to periodically reset previously determined 
values and force to reinitialize the coordinates of all the hosts 
in the session. Thus it can, to some degree, also dynamically 
adapt to changing environments like the distributed ones. 
IV. INTEGRATION OF HOST POSITION PREDICTION INTO 
HIERARCHICAL AGGREGATION 
In this section the integration of GNP method with HA is 
proposed. Because of hierarchical structure of HA, the 
coordinate system integration quite differs from the most 
common cases. In the first section we introduce a new session 
member type: so-called feedback target manager. The next 
sections describe tree initialization process which is needed 
for registration of FT hosts to the session.  
A. Feedback Target Manager 
As described in section II, in HA method feedback targets 
(FT) forms a tree, which is able to transmit signaling from 
huge number of receivers in a short time. This set of FT can be 
shared among several IPTV broadcasting and several parallel 
trees exists there. To organize these FT in the desired tree 
structure we introduce a new member type – so-called 
feedback target manager (FTM). This is a standalone 
application, which can be possibly run on the same hardware 
together with FT. However because of possibility of high 
network load, it is suggested to place FT on standalone station 
to reduce the risk of FTM service unavailability. 
B. Tree Initialization 
At the start of a session all the FTs need to be registered to 
FTM. Thus the FTM knows about them and when requested 
by an IPTV server it can create a new hierarchical tree. As 
mentioned earlier, there can be several trees sharing this set of 
FTs. Each tree is identified by a unique number and thus they 
can be distinguished between each other. During the time of a 
session, it is also possible that a new FT can join or, on the 
other hand, a FT can leave. FT leaving from a session can 
occur due to maintainers request or, of course, unexpectedly 
due to FT or network failure. For such events, we proposed a 
protocol, which monitors set of FTs and can detect breakdown 
of any of them in reasonable amount of time. 
C. First Step – Landmark Backbone Establishment 
As said in section III, the GNP algorithm proceeds in two 
steps. In the first step the landmarks positions are predicted 
and receivers are informed about the results. In the second step 
all the receivers predict their positions and select FTs where 
they will send their feedback. Each receiver selects its 
feedback according to the distance to FT and according to the 
number of receivers sending feedback to this FT (in other 
words, with how many other receivers or feedback targets the 
newly connected receiver will have to share the 
 
bandwidth). The ratio of these two parameters can be changed 
dynamically.  
At the first glance it might seem that we would need an 
additional set of stations distributed over the Internet for host 
position prediction. Fortunately, for this purpose we can 
 
FTM
FT
FT
FT
a)
request
FTM
FT
FT
FT
b)
measurement
[?,?]
[?,?]
[?,?]
?
?
?
[?,?]
[?,?]
[?,?]
FTM
FT
FT
FT
c) response
[?,?]
[?,?]
[?,?]
d)
Determine positions 
& assign
Fig. 2. Hierarchical aggregation scheme with many feedback targets. 
 
 
 
 
 
176
International Journal On Advances in Internet Technology, vol 2 no 1, year 2009, http://www.iariajournals.org/internet_technology/

 
utilize an existing set of FT stations as they are already 
distributed over the broadcasting area (or the whole Internet) 
and distance measurement generates relatively low overhead 
traffic in the network. This will have an effect that the traffic 
load will be distributed uniformly and the overlay network 
will be better organized, and consequently we can reduce risk 
of high traffic peaks in the network when some attractive poll 
is announced. 
Let us look closer at the first step of the algorithm. It 
consists of 4 subparts: a) request from sender, b) measurement 
of RTT distances, c) establishment of distance matrix, d) and 
finally the localization of feedback targets (see Fig. 2). The 
sender request is transmitted in the RSI packet as a new block 
type of the RSI sub-report block [15]. When the feedback 
targets receive the request packet from sender, all the feedback 
targets will start measuring the RTT distances. To prevent 
network overflow, this measurement should be spread over the 
time length of 
. Furthermore to reduce the risk of 
measurement during 
temporal network problems, 
the 
measurement should be repeated several times (e.g. three 
times). The resultant value should be the minimum of these 
values measured. Unfortunately, the risk cannot be completely 
eliminated. In such cases it fails it will affect the position 
estimation accuracy. As stated before, this measurement of 
RTT distances is performed using the ICMP [16] protocol. 
When all the feedback targets have measured the RTT 
distances to the other feedback targets, they will transmit these 
so-called vectors back to the sender. When the sender has a 
complete matrix of distances between the feedback targets, the 
sender will predict feedback target coordinates using equation 
(16) and transmit them via a multicast channel, to all the 
feedback targets and the receivers. 
Informing the whole session about the landmark positions 
may seem to be a waste of bandwidth. However, the RTCP 
standard recons with possibility of there being one or more 
senders and therefore 25 % of the total RTCP bandwidth is 
reserved.   
D. Second Step – Hosts Position Prediction 
When the position of unknown landmarks has been 
predicted and all the landmarks form something like a basic 
network backbone of the whole algorithm, the position of 
regular hosts is to be predicted. Thanks to the fact that the 
number of landmarks is relatively low, the generated network 
traffic will not be very high. 
When a receiver position has been predicted, the receiver 
should redirect its feedback to the best FT. The optimality of 
choosing a FT is here a matter of the distance to the receiver 
and the number of the other receivers reporting to the same 
FT.  
In the section VI. it is also described a way how synthetic 
coordinate space can be mapped to a real map and how it can 
be utilized for statistics, e.g. for number of connected 
subscribers from different areas. 
V. FEEDBACK TARGET PLACEMENT PROBLEM  
At first glance it may seem quite surprising that the 
estimation of a host position can work, although it is based on 
 
 
Fig. 3.  Dependency of RTT measured between two hosts and their 
geographical distance. Results were obtained from the Planetlab experimental 
network. From the graph may not be noticeable, but 90 % of all measurements 
are in close linearly dependent area 
 
 
1
2
3
4
5
Landmark with known position
1
... 5
Hosts with unknown position
K
Landmark
1
Landmark
3
Landmark
2
 
Fig. 4.  Inaccurate position estimation when the triangular inequality condition 
is not fulfilled. 
 
 
 
K
1
2
3
4
5
Landmark with known position
1
... 5
Hosts with unknown position
K
Landmark
1
K
Landmark
3
Landmark
2
 
Fig. 5.  Inaccurate position estimation when the triangular inequality condition 
is fulfilled. 
 
 
 
 
 
 
0
0.2
0.4
0.6
0.8
1
1.2
1.4
1.6
1.8
2
x 10
4
0
1000
2000
3000
4000
5000
6000
Geographical distance of stations (km)
Number of hops between stations
177
International Journal On Advances in Internet Technology, vol 2 no 1, year 2009, http://www.iariajournals.org/internet_technology/

 
measurement of RTT between two hosts and the structure of 
the Internet is quite complex. The Internet topology is based 
on a tree structure, rather than on the 2D space. However in 
spite of it, according to several measurements it has been 
approved [1], [2], [10], [11] that such approach can estimate 
relative distances between hosts in the network and thus save 
significantly amount of bandwidth, especially in large-scale 
environments. In Fig. 4 are depicted results obtained from 
measurements among approximately 350 stations in the 
Planetlab network, which spread worldwide. As you can see 
the dependency of distance on the RTT values are obvious and 
the most of the measurements forms a linear dependency. 
A. Triangle inequality problem 
In the coordinate systems is quite complex high-
dimensional space mapped into some low-dimensional one. 
As these spaces are not homogenous, it might cause some 
degree of errors in some cases. Another factor that strongly 
affects resulting error of position estimation is the placements 
of landmark stations (or, in the case of HA, FT stations). The 
problem lies in the triangle inequality problem – when the 
landmark stations are in line, the algorithm gives exactly the 
same probability for prediction on the correct position as for a 
mirrored position (see Fig. 4). This is caused because the 
algorithm only considers the distance from host to landmark 
one, two and three and this value equals, also, the mirrored 
position. Naturally, the RTT measurement is also not 
absolutely accurate because of routers and switches latency 
and other unpredictable conditions and it is supposed that the 
total error is in average about 9 % ±3 % of the measured 
distance.  
  In the Fig. 4 are depicted five examples with error rate 9 % 
and normal distribution of this error with standard deviation    
3 %. The probability of position estimation is depicted as the 
red area where its saturation stands for the probability of 
estimation on this position. As you can see on examples 2, 3, 
4, 5, when the localized hosts are beside landmarks line, the 
probability of mirroring its real position is quite high. When 
the predicted host lies in landmarks line, the probability of 
host position estimation will not be mirrored, however also the 
accuracy is quite low (see hosts 1 in Fig. 4). 
B. Effect of removing triangle  
Now let us compare the previous results obtained with 
another, slightly modified, selection of landmarks. Rather than 
choose the landmark 2 in Slovakia (see Fig. 4), we placed it to 
Poland (see Fig. 5). Thus the triangular inequality condition 
was fulfilled and even the position of hosts 1, 2, 3, 4, 5 was 
kept the same as in the previous case. The results of host 
positions prediction is considerably better.  
Of course, it is not always possible to choose from several 
FTs, especially in smaller networks. However if so, there is 
still high probability that the hosts will be formed in more 
effective manner than would be formed when chosen 
randomly. However, often there is a possibility to choose from 
several hosts and as such topology should serve for IPTV 
sessions for a long time. Therefore there could be motivation 
to address this issue. Because of presence of RTT 
measurement inaccuracy, it is not possible to rely on classical 
mathematical condition of triangular inequality. An example 
of this can be found in Fig. 5 – the landmark nodes 1, 2, 3 are 
not in line, however you can notice, that host no. 5 has some 
probability to be mirrored and the position can be predicted 
under the triangle consisting by vertexes landmark 1, 
landmark 2 and landmark 3. 
C. Triangle inequality identification 
To better evaluate if a selection of landmarks is good or not, 
the modified version of triangular inequality condition is 
introduced here in equation (15). Input parameters of this 
function 
 are RTT distances between any three hosts, 
where c must be greater or equal to a and b. T stands for a 
threshold. When T equals zero, all the combinations of 
hypotenuse and catheti will be considered as to be correct and 
the function I will return 0 (false) as the condition was not be 
violated.  On the other hand, when threshold T equals one, 
only the equilateral triangle will be detected as to be correct. 
Landmarks with known position
Landmarks with unknown & predicted position
Real host position
3
0
1
2
4
5
A)
B)
Predicted host position
 
Fig. 7. Inaccurate host position prediction and its improvement with 
computationally predicted three new landmarks. Noise ratio was set to 20 %. 
 
 
 
 
 
 
 
178
International Journal On Advances in Internet Technology, vol 2 no 1, year 2009, http://www.iariajournals.org/internet_technology/

 
 
 
 
where 
 
 
(15) 
According to our empirical experiments it seems that value 
of 0.4 is sufficient, but it strongly depends on concrete 
landmarks placement. Of course, it strongly depends on a 
particular host positions and with more than 3 landmarks the 
results are also slightly different. To identify possible 
problems when deploying FT stations (landmarks) we 
developed a simulation with tool which is appropriate for a 
given type of coordinate system1. 
D. Triangle Inequality Identification 
For the purpose of identifying the origins of the resulting 
prediction error when the GNP algorithm is used, a simulation 
tool has been developed, which has several options to be set 
(see Fig. 6). They are: the number of landmarks; noise ratio; 
and actual position of each landmark. The number of 
landmarks can grow from three, which is the minimal usable 
value for estimation in 2D space, up to one hundred. The 
landmarks positions can be set by mouse dragging and each 
landmark can be marked to indicate whether its position is 
known or unknown.  
Landmarks with known position
Landmarks with unknown & predicted position
3
0
1
2
4
0
1
2
4
3
 
Fig. 6.  GNP simulation tool with a config panel and landmarks position. 
 
Known landmarks are shown with bold yellow borders 
(landmarks no. 0, 1, 2) (see Fig. 6) and unknown landmarks 
are shown with thin black borders (landmarks no. 3, 4, 5; see 
Fig. 6). The positions of these landmarks will be predicted in 
the first part of the algorithm (4). If the distances between 
landmarks and hosts were measured absolutely accurately, 
 
1 http://adela.utko.feec.vutbr.cz/projects/global-netwok-positioning.html 
also the RTT distances would correspond accurately to the 
map distances. However this does not correspond to reality. In 
real network conditions, the round-trip time and the real-map 
distance cannot be mapped absolutely accurately because of 
the difference between Euclidean space and network 
structures. To take this inaccuracy into account the option 
“noise ratio” assists. It can scale from the value of 0 %, which 
stands for absolutely accurate measuring, to 100 %. The value 
100 % says that such a virtually measured RTT value is 
obscured by noise ranging from ±100 % which means range 
from 0 % to 200 % of its original distance. 
Let us assume a case when we know the position of only a 
limited number of landmarks (e.g. three) and they are placed 
as depicted in Fig. 7A – one in Romania, one in Poland and 
one in France and all the RTT measurement is obscured by    
20 % noise. In this case the position prediction for the host 
placed in Germany is quite inaccurate (see Fig. 7A). The 
probability of position prediction is spread over a huge area 
beginning in the centre of Germany through Switzerland, 
Austria up to Italy. 
As the simulation results have shown, the algorithm, for 
such a configuration, does not give very good outcomes. 
Especially when the host is near the French landmark, the 
prediction can be affected by quite big error with a big 
diversion from the real position. It is obvious that a new 
landmark should be added, which should be placed 
somewhere near Germany. If we had enough landmarks and 
their positions, it would be quite easy. We would just select a 
suitable passive landmark from this area and then activate it. 
However, when the network structure is dynamically changing 
and new landmarks must emerge dynamically, it might be 
problem.  
VI. MAPPING FROM IMAGINARY SPACE  
ONTO REAL POSITION SPACE 
Except reduction of bandwidth used, the integration of HA 
with coordinate systems can also offer estimation of 
subscriber positions. For this purpose there is better idea to use 
instead of a synthetic coordinate space use a one mapped to a 
real world coordinates, e.g. geographical map or the GPS 
space. 
What should be also emphasized is that internet coordinate 
systems were not proposed for accurate position prediction on 
a geographical map and, therefore, they do not give such 
accurate results as other methods can give. Their main 
objective is to allow building more effective overlay structure. 
As they are already deployed, they can give approximate 
estimation of receiver positions with only a little overhead. 
 In 
a 
real 
network, 
a 
set 
of 
all 
landmarks 
} can be divided into two separate 
subsets: set of landmarks, whose positions are unknown 
(denoted
) and a set of landmarks whose positions are well 
known (denoted 
). Obviously, for hosts with known 
position we do not need to estimate their coordinates. When 
we take this fact into account, equations (12), (13), and (14) 
can be changed to the following forms: 
 
179
International Journal On Advances in Internet Technology, vol 2 no 1, year 2009, http://www.iariajournals.org/internet_technology/

 
 
 
 
 
(16) 
 
 
(17) 
 
 
 
(18) 
 
 
 
(19) 
 
 
 
 
(20) 
where 
 stands for the total sum of squares of deviations of 
computed distances from measured distances. These distances 
are computed among the relation
, i.e. between hosts 
from set of known landmarks 
 and from a set of unknown 
landmarks. 
 stands for the total sum of square deviations 
between computed and measured distances. Here the distances 
are computed among the relation
, i.e. between all the 
hosts from a set of unknown landmarks. 
To make it clearer, see Fig. 8, where hosts with known 
positions are marked (K) and hosts with unknown and 
predicted positions are marked (U). What should be 
emphasized is the fact that distance between the known 
landmarks (K) is used only for the computation of scale factor 
S (20), and not for the estimation of landmarks position, where 
it is obtained by calculating an average ratio between RTT 
distances and distances in the coordination space. 
What is newly introduced here is the scale factor  and the 
function
, 
which 
computes 
the 
total 
deviation of computed-space and RTT-space distances among 
set of known landmarks and a set of unknown landmarks. The 
scale factor is a mean of the RTT among all the landmarks of 
the set of known landmarks
. The equation compares the 
measured distances dS with the real distance d, e.g. on a map. 
By the use of it, the measured values can be scaled to be 
comparable with the real positions on a map. In the case of 
GNP positioning, the algorithm is based on imaginary values 
that have no reference to any real distance or position. As the 
RTT distances and the real distances may not be homogenous 
spaces, the S may involve an error. At any rate, the value of 
round-trip time correlates with the distance values and 
therefore can be used as estimate for the network position. 
Equation (16) has a similar function as original equation 
(12) except that it does not change the position of known 
landmarks
. It only predicts the position of the unknown 
landmarks, which belong to the set
. Furthermore, thanks to 
the scale factor, there are not RTT units of milliseconds but 
some other units (kilometers / meters) that fit better to the 
distance quantity. 
With these equations the section IV. D can be extended  
with following few things: all the hosts receive from the 
multicast channel information about the network scale factor S 
(20), about all the landmarks and their coordinates and, in 
addition, they can measure the RTT distances to the landmarks 
(or FTs in case of HA). This is all that is needed to predict 
their own positions (see formula (19)). As mentioned before in 
this text, the RTT measurement should be performed several 
times to minimize the chance of affecting the RTT 
measurement by some network problems. When the receiver 
knows the RTT distances to all the landmarks, it can start 
predicting its own position using formula (19). In fact, it is a 
matter of seeking such coordinates for which the equation 
gives 
a 
minimum 
error. 
For 
this 
purpose, 
some 
multidimensional optimization algorithm should be used such 
as the simplex downhill, a gradient method or a kind of 
genetics algorithm, which can give most accurate results 
especially for bigger numbers of FTs. 
As the hosts positions are scaled using the scale factor S, the 
values can have relevance to some real positions. 
VII. BENEFITS OF INTEGRATION OF HIERARCHICAL 
AGGREGATION WITH INTERNET COORDINATE SYSTEMS 
The effect of integrating internet coordinate systems with 
HA as shown in Fig. 9. In this figure all the stations are in 
both cases A) and B) on the same position. The difference is 
that in the case A) receivers select the target for their feedback 
reports randomly. In the case of B) all the receivers select the 
nearest one using internet coordinate system. It is obvious, that 
the communication in the case B) is significantly more 
effective and in this particular case the bandwidth on some 
routing points has been saved by up to 37 %. 
Of course it is also possible to localize receivers simply by 
measuring RTT distance and selecting the one, which is the 
nearest one. A narrow neck of such a solution is that when the 
 
K
FIXED
K
DYNAMIC
K
DYNAMIC
K
FIXED
K
FIXED
Landmark with fixed or dynamic position
LEGEND
Fig. 8.  Set of landmarks with known position (K) and set of landmarks with 
unknown position (U). 
 
 
 
 
 
 
180
International Journal On Advances in Internet Technology, vol 2 no 1, year 2009, http://www.iariajournals.org/internet_technology/

 
set of FTs is shared among several IPTV broadcasting, all the 
time when the program is switched, it might use a different 
stations and the measurement have to be repeated. Second and 
even more important issue arise when the receiver is mobile 
and its position changes in time. In this case the measurement 
should be periodically repeated and this would generate 
significant additional overhead traffic not even at the 
beginning of the session but continuously during the entire 
time of the session. 
VIII. SCALABILITY SCENARIOS 
When the classic Hypertext Transfer Protocol (HTTP) is 
used, the speed of signaling transmission is limited only by the 
capacity of a network. This approach has a disadvantage in 
that it may lead to traffic peaks and might affect other 
services, in particular when an attractive program is 
broadcasted. The RTCP protocol is designed to deal with such 
an issue. It uses a constant bandwidth and when the number of 
users grows, the time period for receiver signaling grows too. 
Thus the traffic is spread in time and traffic peaks can be 
avoided. However, the disadvantage of such an approach is 
that for a big number of receivers the resulting period might 
become rather long. A simple solution can be assigning more 
bandwidth. It is expected that the feedback channel will be 
used not only for a simple monitoring of QoS, as used today in 
the RTCP protocol, but also for new value-added services 
such as interactive TV. Therefore it is supposed that it will not 
be a big barrier for IPTV service providers to assign more 
bandwidth than currently defined in standard RTCP. However, 
especially in bigger countries and in the case of multination 
programs (sporting events), the number of viewers can achieve 
even tens of millions of viewers at a time. Particularly in such 
scenarios, the compromise between bandwidth and signaling 
propagation period is not sufficient and can lead to high 
bandwidth consumption and long propagation time periods. 
The HA brings a new architecture where compromising 
between time and bandwidth is extended to a number of FTs. 
The advantage of HA is that it can, in addition, significantly 
reduce the traffic in the network a) by spreading the load 
between several FTs and b) by aggregating receiver 
signalizations at the nearest FT. Here the aggregation can 
significantly reduce the length of the message (it is a kind of 
histogram and thus the length of the packet can remain 
constant for almost any number of receivers in the session). In 
Fig. 10, several scenarios of the dependence of resulting 
signaling propagation time on the number of receivers and 
bandwidth assigned is depicted. All of them suppose that the 
HA tree is ideally balanced and the number of receivers is, 
except Figure 10 b), in the range of 1 to 25 million and the 
feedback channel bandwidth scales from 128 kbps to 3.2 
Mbps. The cases a) and  b)  depict exactly the same scenarios, 
the only difference is that b) is focused on the area where the 
resulting propagation time is below 15 seconds and thus 
limited to the number of receivers from 1 to 250 000. The 
cases with 1 FT, 10 FTs, 30 FTs, 50 FTs, 100 FTs, 200 FTs 
and 500 FTs are depicted, where the case with 1 FT stands for 
RTCP standard. The area where the resulting signaling 
propagation time is below 15 seconds is marked in blue color. 
IX. DEPLOYMENT OF HA IN A REAL IPTV INFRASTRUCTURE 
The original motivation of this work was targeted to design 
a scalable structure for needs of interactive IPTV service. The 
idea behind it is to provide to an IPTV service provider a 
technology, which will be capable to efficiently transmit 
receiver signaling and can enable fast interaction between 
viewers and a content provider. Common IPTV service 
consists of RTP and RTCP protocols. HA builds on the basis 
of RTCP protocol and only a few changes are needed. Namely 
adding the internet coordinates system support to receivers 
and, of course, adding support for a new type of packets and 
new type of blocks in RTCP messages.  
Second scenario is to target the feedback channel to a 
content provider rather than to each IPTV service provider. 
Subscribers of several IPTV service providers complemented 
by regular TV subscribers equipped with access to the Internet 
can make up a number of viewers and their votes are related 
only to distributed content. 
The proposed idea is also quite general and might be used 
not only in the field of IPTV service, but also in any case 
where there is a need for transmitting the signaling from a 
number of receivers to a single point. 
 
 
 
 
 
A)
B)
Receiver
1
Feedback 
target station
Legend
Fig. 9.  Example of A) randomly selected FT stations and stations and B) 
selection using internet coordinate systems. The positions of receivers and FT 
stations are the same in both cases. 
 
181
International Journal On Advances in Internet Technology, vol 2 no 1, year 2009, http://www.iariajournals.org/internet_technology/

 
X. CONCLUSION 
Nowadays we can be witnesses of the growing influence of 
IPTV on almost all parts of the developed world. According to 
several independent marketing analyses it seems that this trend 
will remain at least for further several years. This, of course, 
will mean more IPTV subscribers. Furthermore, if we take an 
expansion of mobile multimedia devices into account the 
growth of number of IPTV subscribers can even accelerate. 
 HA will provide facilities for future growth in the number 
of subscribers and will be scalable enough not only for time to 
time sending response on some poll or question, but can 
provide a continuous and scalable feedback transmission for 
all the receivers in the session, which can convey their opinion 
during the entire duration of a television program. This will 
also provide a new kind of knowledge as it will be cheap, 
really fast and easy to get an opinion from all the subscribers. 
There are already several solutions how to enable 
interaction between subscribers and a content provider. In this 
paper was introduced an improvement of HA method and 
described the proposed prototype of hierarchical aggregation 
with internet coordinate systems. 
ACKNOWLEDGMENT 
This work was supported by Grant Agency of the Czech 
Republic - project No. 102/07/1012. 
REFERENCES 
[1] T. S. Eugene Ng and Hui Zhang, "Predicting Internet Network Distance 
with Coordinates-Based Approaches", INFOCOM'02, New York, NY, 
June 2002  
[2] T. S. Eugene Ng and Hui Zhang, "Towards Global Network 
Positioning", 
Extended 
Abstract, 
ACM 
SIGCOMM 
Internet 
Measurement Workshop 2001, San Francisco, CA, November 2001  
[3] KOMOSNY D., NOVOTNY V. Tree Structure for Source-Specific 
Multicast with feedback Aggregation, in ICN07 - The Sixth 
International Conference on Networking . Martinique, 2007, ISBN 0-
7695-2805-8 
[4] BURGET, R., KOMOSNY, D.  Real-time control protocol and its 
improvements for Internet Protocol Television. International Transaction 
on Computer Science and Engineering, ISSN 1738-6438, 2006, roč. 
2006, č. 31, s. 1 - 12. 
[5] NOVOTNY, V., KOMOSNY, D.  Optimization of Large-Scale RTCP 
Feedback Reporting in ICWMC 2007. ICWMC 2007 - The Third 
International Conference on Wireless and Mobile Communications. 
Guadeloupe,  2007, ISBN: 0-7695-2796-5 
[6] I. Stoica, R. Morris, D. Karger, F. Kaashoek, and H. Balakrishnan, 
“Chord: A scalable peer-to-peer lookup service for 
Internet 
applications,”in Proceedings of ACM SIGCOMM’01, San Diego, CA, 
Aug. 2001. 
[7] J.A. Nelder and R.Mead, “A simplex method for function 
minimization,”Computer Journal, vol. 7, pp. 308–313, 1965. 
[8] S. 
Ratnasamy, 
M. 
Handley, 
R. 
Karp, 
and 
S. 
Shenker, 
“Topologicallyaware overlay construction and server selection,” in 
Proceedings of IEEE INFOCOM’02, New York, NY, June 2002. 
[9] J. Postel, Internet control message protocol, RFC792 (1981) 
(September). 
[10]  M. Costa, M. Castro, A. Rowstron, P. Key, PIC: practical internet 
coordinates for distance estimation, in: International Conference on 
Distributed Systems, Tokyo, March 2004. 
[11] P. Francis , C. Jamin, C. Jin, Y. Jin, Y., D. Raz, Y. Shavitt, L. Zhang, 
IDMaps: A Global Internet Host Distance Estimation Service. 
EEE/ACM Trans. on Networking, Oct. 2001. 
[12] S.M. Hotz. Routing information organization to support scalable 
interdomain routing with heterogeneous path requirements, 1994. Ph.D. 
Thesis (draft), University of Southern California. 
[13] KOMOSNY, D., NOVOTNY, V.  Analysis of bandwidth redistribution 
algorithm for single source multicast In Proceedings of the Sixth 
International Network Conference. Sixth International Network 
Conference. United Kingdom: University of Plymouth, 2006, s. 45 - 52, 
ISBN 1-84102-157-1 
[14] J.Chesterfield and E.Schooler, "An Extensible RTCP Control 
Framework for Large Multimedia Distributions", Proceedings of 2nd 
International Symposium on Network Computing and Applications 
(NCA'03), Cambridge, MA, 16 - 18 April, 2003. 
[15] J. Ott, J. Chesterfield, E. Schooler, "RTCP Extensions for Single-Source 
Multicast Sessions with Unicast Feedback", IETF draft, AVT-RTCP-
SSM, March 2007. 
[16] Postel, J., "Internet Control Message Protocol", STD 5, RFC 792, 
USC/Information Sciences Institute, September 1981. 
[17] H. Schulzrinne, S. Casner, R. Frederick, and V. Jacobson, "RTP - A 
Transport Protocol for Real-time Applications," RFC 3550 (STD  64), 
July 2003. 
[18] NOVOTNY, V., KOMOSNY, D.  Optimization of Large-Scale RTCP 
Feedback Reporting in ICWMC 2007. ICWMC 2007 - The Third 
International Conference on Wireless and Mobile Communications. 
Guadeloupe,  2007, ISBN: 0-7695-2796-5 
[19] F. Dabek, R. Cox, F. Kaashoek, and R. Morris, "Vivaldi: a decentralized 
network coordinate system," SIGCOMM Comput. Commun. Rev., 
vol. 34, no. 4, pp. 15-26, October 2004. [Online]. Available: 
http://dx.doi.org/10.1145/1030194.1015471 
[20] Yang Chen; Genyi Zhao; Ang Li; Beixing Deng; Xing Li, “Myth: An 
Accurate and Scalable Network Coordinate System under High Node 
Churn Rate”, Networks, 2007. ICON 2007. 15th IEEE International 
Conference, Volume , Issue , 19-21 Nov. 2007 Page(s):143 - 148 
[21] Yang Chen   Yongqiang Xiong   Xiaohui Shi   Beixing Deng   Xing Li , 
“Pharos: A Decentralized and Hierarchical Network Coordinate System 
for 
Internet 
Distance 
Prediction”. 
Global 
Telecommunications 
Conference, 2007. GLOBECOM '07. IEEE 
 
Radim Burget (born in 1982 in the Czech Republic,) 
He 
graduated 
from 
Brno 
University 
of 
Technology, Faculty of Information technology 
(2003).  
He is engaged in research focused on signaling 
for IPTV systems and data aggregation in sensor 
networks. 
Now 
he 
works 
with 
Dept. 
of 
Telecommunications, 
Brno 
University 
of 
Technology, Purkynova 118, 612 00 Brno, Czech 
Republic. 
E-mail: burgetrm@feec.vutbr.cz 
 
Dan Komosný (born in 1976 in the Czech Republic) 
He 
graduated 
from 
Brno 
University 
of 
Technology, Faculty of Electrical Engineering and 
Computer Science in the field of Electronics and 
Communications (2000), Ph.D. in Teleinformatics 
(2003).  
He is engaged in research focused on voice 
transmission over IP network (VoIP). He also 
focuses on the development of e-learning tools 
using formal and visual languages – the SDL object-
oriented design language and the MSC trace 
language. Now he works with Dept. of Telecommunications, Brno University 
of Technology, Purkynova 118, 612 00 Brno, Czech Republic. 
E-mail: komosny@feec.vutbr.cz 
 
Jakub Müller (born in 1984 in the Czech Republic)  
He 
graduated 
from 
Brno 
University 
of 
Technology, Faculty of Electrical Engineering and 
Computer Science in the field of Electronics and 
Communications (2008). 
He is engaged in research focused on measurement 
of quality and localization of members in IP network. 
Now he works with Dept. of Telecommunications, 
Brno University of Technology, Purkynova 118,    
612 00 Brno, Czech Republic. 
E-mail: mullerj@feec.vutbr.cz 
 
 
182
International Journal On Advances in Internet Technology, vol 2 no 1, year 2009, http://www.iariajournals.org/internet_technology/

 
100x ZOOM
a) 1x FT
b) 1x FT, 100x zoomed figure a)
c) 10x FT
Transmission period is 
below 15 seconds
Transmission period is 
below 15 seconds
d) 30x FT
Transmission period is 
below 15 seconds
e) 50x FT
f) 100x FT
Transmission period is 
below 15 seconds
Transmission period is 
below 15 seconds
g) 200x FT
h) 500x FT
Transmission period is 
below 15 seconds
Transmission period is 
below 15 seconds
640
1280
1920
2560
3200
(kbps)
640
1280
1920
2560
3200
(kbps)
640
1280
1920
2560
3200
(kbps)
640
1280
1920
2560
3200
(kbps)
640
1280
1920
2560
3200
(kbps)
640
1280
1920
2560
3200
(kbps)
640
1280
1920
2560
3200
(kbps)
640
1280
1920
2560
3200
(kbps)
 
Fig. 10.  Dependency of signaling propagation time on number of receivers and bandwidth assigned to feedback channel. The blue color marks the areas, where 
the resulting propagation time is below 15 seconds (10 seconds on the level of receivers and 5 seconds on the level of FTs). The bandwidth is in from 128 kbps to 
3.2 Mbps. The number of users are in millions, except of b) where there is depicted the 100x zoomed a) figure.  
183
International Journal On Advances in Internet Technology, vol 2 no 1, year 2009, http://www.iariajournals.org/internet_technology/

