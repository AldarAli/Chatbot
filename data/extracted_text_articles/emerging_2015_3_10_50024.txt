Performance Study of Channel-QoS Aware Scheduler in LTE Downlink Using NS3
Adi S.M.Y., Kuokkwee Wee, Ee Mae A., Mohd. F.A.A.
Faculty of Information Science & Technology
Multimedia University
Melaka, Malaysia
adi.syukri.yusof@gmail.com, wee.kuok.kwee@mmu.edu.my, jessicaaem@live.com,
mfikriazli.abdullah@mmu.edu.my
Abstract— Recent mobile technologies allow users to interact
with each other through voice and video by using smart-
phones or tablets. The applications available on the Internet
are mostly using a similar protocol which is best-effort data
network by service provider. Best effort service does not
guarantee data to be delivered within the allocated time. Real-
time applications compete equally for network resources in
best effort, hence real-time application perform poorly using
best effort services. In this paper, two classical packet
schedulers and two channel-aware schedulers for Orthogonal
Frequency-Division Multiple Access (OFDMA) are studied.
The schedulers are simulated using real-time packets with a
various channel condition of user equipment (UE) in NS3
simulator to test the performance of each scheduler. The
Channel-Quality
of
Service
(QoS)
Aware
scheduler
outperforms all other schedulers for real-time traffic.
Keywords-VoIP, Real-Time, Video, NS3, simulation, LTE.
I.
INTRODUCTION
Long Term Evolution also known as LTE was introduced
by 3GPP earlier in 2004 but it was only finalized and
approved in 2008 [1][2]. LTE network consists of LTE
devices and System Architecture Evolution (SAE). SAE is
an evolution from third generation mobile internet (3G)
packet core network. LTE has become the new standard for
mobile network. The downlink and uplink peak rate of LTE
are able to achieve 300Mbit/s and 75Mbit/s respectively.
Latency of LTE is controlled by the Quality of Service
(QoS) that permits less than 5ms latency in the Radio Access
Network (RAN) [3].
LTE is able to cater fast moving mobiles as well as to
support both Frequency Division Duplexing (FDD) and
Time Division Duplexing (TDD) [4]. Although TDD seems
to be overall a better choice, FDD is more widely
implemented due to earlier technologies. LTE consists of a
user
plane
called
evolved
Universal
Mobile
Telecommunications
System
(UMTS) Terrestrial
Radio
Access Network (eUTRAN) and a control plane called
evolved packet core (EPC). In the eUTRAN, there is an
evolved NodeB (eNodeB) which handles radio resource
management (RRM) [5].
Real-time traffic has a strict requirement for delay. QoS
ensures high-quality performance for critical applications.
Traditionally network traffic uses best effort services which
do not guarantee any reliability, delay, jitter, or other
performance characteristics. On the Internet Protocol (IP)
based
network,
the
Integrated
service
(Intserv)
and
differentiated
service
(Diffserv)
are
able
to
provide
preferential treatment to specified traffic.
The outcome of this paper is to analyze the capability of
channel-QoS aware (CQA) in a mixed traffic environment.
As a result of the simulation, CQA scheduler is able to
allocate resources efficiently when considering the delay,
channel condition, and guaranteed bit rate. We simulate
Voice over IP (VoIP), video and File Transfer Protocol
(FTP) traffic using NS3 to test the capability of schedulers as
shown in Figure 1. The CQA scheduler is good for real-time
traffic as it is able to provide better QoS as compared to
other schedulers [6][7].
Figure 1.
NS3 LTE Simulation Scenario.
This paper focuses on the downlink scheduler of the LTE
network. The main focus is the QoS performance as it plays
an important role in determining the improvement of QoS in
LTE. This includes the networks throughput rate, delay,
fairness and packet loss. The rest of the paper is organized as
follows: Section II briefly describes several related works.
Section III discusses the schedulers, while Section IV
explains and elaborates on the methodology. Section V
concludes the paper and indicates future works.
II.
RELATED WORKS
The increase in the popularity of LTE technology system
worldwide has gained more interest in the design of LTE
packet scheduling algorithms. There are various downlink
schedulers that were proposed by researchers. The advanced
44
Copyright (c) IARIA, 2015.     ISBN:  978-1-61208-422-0
EMERGING 2015 : The Seventh International Conference on Emerging Networks and Systems Intelligence

technology of high speed wireless network has caused the
trend of VoIP calling to grow. Apart from having VoIP,
video conference is also a need in this era. VoIP and video
conferencing is categorized under real-time traffics and has a
strict delay requirement in order for it to perform well.
However, classical schedulers are not designed to be aware
of QoS requirement for real-time traffic.
Various studies have been performed
in OFDMA
systems. For example, Proportional Fair (PF) scheduling
algorithm allocates resources accordingly in order to achieve
fairness among users [8][9]. However, PF can neither
provide the best throughput nor provide the best fairness.
The basic scheduling algorithm Round Robin (RR) was also
studied in trying to optimize the capabilities of LTE
[5][6][10]. PF and RR are not able to handle the priority for
type of traffics [6]. Next, Priority Set Scheduler (PSS) was
studied. PSS was designed by combining frequency domain
(FD) and time domain (TD) scheduler that aims to provide a
defined target bit rate to all users [11]. PSS is able to achieve
part of QoS requirement by using guaranteed bit rate (GBR)
as the observable matrix. However, it does not consider
delay requirements, making it perform less efficiently.
Another scheduler CQA was proposed by [12], whereby it is
designed to improve the resource allocation for real-time
voice traffic. CQA sorts the traffic’s priority according to the
channel condition, head of line (HOL) delay, and GBR.
Thus, VoIP through LTE structure improved significantly
using CQA scheduler [12].
III.
DOWNLINK SCHEDULERS
A.
Proportional Fairness
PF in NS3 works by allocating resources to User
Equipment’s (UE) when the UEs’ channel quality is
instantaneously high even though the average channel
condition over time is low.
Using the PF scheduler, UEs are allocated to different
Resource Block Group (RBG). Channel conditions and the
throughput value of previous transmission is used to
calculate the metrics value [9][13].
B.
Round Robin
RR can be considered as the simplest scheduler. The
scheduler works by dividing the resource blocks (RB)
between the flows with non-empty queues. The scheduler
method is to divide all the available resources to active
traffic flows if the resource quantity is able to serve all the
incoming traffic flows [8][9].
RR will not be able to allocate the resource to all flows if
the traffic flow is bigger than the RB. RR will only allocate
resources based on time to interval (TTI) and continue to
allocate resources in the next sub frame and start from the
last unallocated flow.
C.
Priority Set Scheduler
PSS is a scheduler that combines FD and TD. It targets to
provide fairness to UEs by using a specified Target Bit Rate
(TBR). PSS works by selecting UEs which Radio Link
Control (RLC) buffer is not empty [1]. The UEs are then
divided into two according to their TBR. By dividing the
UEs according to their TBR, the scheduler is able to decide
based on the priority of serving those UEs [11].
UEs with the highest priority metric are forwarded to the
FD scheduler. Then, the RB for each UE is allocated by
using PF scheduler to calculate the metric. In the case of
having a minimal number of UEs, FD scheduler provides a
weight metric to control the fairness.
D.
Channel-QoS Aware (CQA)
The CQA works by taking HOL delay, channel quality,
and GBR parameter into consideration. CQA also utilizes
TD and FD scheduler where it depends on channel quality
and QoS requirements to allocate resources. This allows the
attainability of a higher amount of spectral efficiency while
satisfying the traffic delay requirements [12].
Similarly to PSS, CQA scheduler divides UEs according
to their priority in the TD scheduling. The CQA scheduler
then groups the UEs into flows and ensures that the FD
scheduler allocates resources starting with flows which
consists
the
highest
computed
metric.
The
metric
is
calculated using HOL, channel quality, and GBR.
The channel quality can be calculated using two methods
which are PF or frequency selective fading. The GBR is
specified in EPS bearer when simulating the CQA. In other
words, CQA is aware of its channel conditions as well as its
QoS parameters. Hence, a minor requirement on the
networks performance is made available which can be in the
form of guaranteed amount of data, etc. [14].
IV.
LTE IN NS3
A.
Voice Traffic
Simulation of VoIP traffic in NS3 is characterized by two
periods; ON and OFF. ON is for the time when the users
spend on talking whereby constant packets are transmitted at
regular intervals. The OFF time is the time where the user
stops from talking and packets are not transmitted.
Parameters and details for the traffic simulation are
illustrated in TABLE I. ON and OFF time are given as 0.352
and 0.650 seconds respectively [15]. Actual bit rate depends
on the codec used and the packetization time. In [15], G.711
codec is used. G.711 does not perform any compression and
ensures the best voice quality. Due to the absence of
compression rules, bandwidth requirements will be high.
TABLE I.
VOICE TRAFFIC CONFIGURATION
Voice Traffic
Details
ON
0.352 seconds
OFF
0.650 seconds
Codec
G.711
Output
64 kbps
Bandwidth per voice call
200 bytes
Bandwidth at IP layer
80 kbps per call
Average bandwidth
28.1 kbps
45
Copyright (c) IARIA, 2015.     ISBN:  978-1-61208-422-0
EMERGING 2015 : The Seventh International Conference on Emerging Networks and Systems Intelligence

OnOffHelper is used to generate the traffic. In Figure 2, it
is an example of the script to simulate voice traffic with
OnOffHelper module.
Figure 2.
Voice ON OFF Helper.
B.
Video Traffic
The simulation of video traffic requires Evalvid module
in NS3. The Evalvid module simulates video by tracing the
frame of the video. The behavior of this simulation is
according to real time services such as video conferencing.
In this simulation, the module uses st_highway_cif.st as the
trace file for video traffic.
C.
Best Effort Traffic
To simulate best effort application in NS3, a UDP echo
module is used. The UDP echo is setup using echo server
and echo helper. There are 3 attributes that are maximum
packet transmitted, the time interval between packets, and
the packet size.
D.
Simulation Setup
The number of UEs starts from 5 UEs to 80 UEs with the
interval of 5. The parameter is configured using the
command line attribute. It is set within the script to enable
the arguments to be parsed in command line. An example of
parsing the command line argument is presented in Figure 3.
The node for eNodeB and UE is configured with LTE stack
protocol. All UEs are attached to the eNodeB and Radio
Resource Control (RRC) connection is created between
them.
SrsPeriodicity sets the maximum number of allowable
UEs to be attached to eNodeB. Radio Network Temporary
Identifier (RNTI) is generated to address the UEs. Collision
requests from UE to eNodeB cause some RNTIs to be
unused. Therefore, to enable the simulation to run more than
30 users, the srsPeriodicity needs to be configured to 160.
This will enable the simulation to run without error. Figure
4 is the script to set the srsPeriodicity. The Internet is then
created using PointToPointHelper which the attribute of the
DataRate is set to 100Gb/s. The mobility model is also setup
to position the UEs in different areas. The scheduler is setup
using SetSchedulerType and the attribute of path loss model
is set to Friis Spectrum Propagation Loss Model. LTE
device is installed to the nodes and all the traces are
enabled. The simulator is configured to run for 50ms before
it stops and it is destroyed.
Figure 3.
Parsing Command Line Argument.
Figure 4.
Setting SrsPeriodicity.
To simulate traffic from the Internet to eNodeB and to
UEs, multiple remote hosts are setup. It acts as the host to
each type of traffic. Each remote host is given an IP address
and route using routing helper to the default gateway for
eNodeB.
This simulation runs using Waf, which is a python-based
framework
for
configuring,
compiling
and
installing
applications. A shell script is created to execute the Waf
program in order to run the simulation. The simulation is
performed multiple times by looping the command in the
shell script.
The simulation is monitored by a module called flow
monitor. The flow monitor is installed in UE and remote
host. While monitoring the flow of the packet, the flow
monitor records the data which can be called using a pointer.
The flow monitor automatically maps the packets with all the
data using flow ID. The throughput and delay can be
calculated using the flow monitor. The trace file is loaded
into Octave to compute the fairness index, packet loss ratio,
throughput, and delay then plot the graph, as in Figure 5.
Figure 5.
Flow Monitor
46
Copyright (c) IARIA, 2015.     ISBN:  978-1-61208-422-0
EMERGING 2015 : The Seventh International Conference on Emerging Networks and Systems Intelligence

The entire flow diagram for configuring the simulation for
NS3 is shown in Figure 6.
Figure 6.
Flow diagram of NS3 LTE Configuration
V.
PERFORMANCE EVALUATION
After simulating the VoIP traffic and video traffic of the
LTE network in NS3, the graphs are plot using Octave. The
outputs from the simulation are throughput, delay, packet
loss ratio and fairness index.
A.
VoIP Result
The CQA throughput is better than PSS where the
throughput is higher starting from 30 UEs until 80 UEs. This
can be observed in Figure 7. Compared to RR, throughput of
VoIP is higher than CQA. This is the result of RR allocating
resources without considering the channel condition of the
UE. UEs with poor channel condition are able to get
resources but are unable to transmit resources efficiently on
time.
Figure 7.
VoIP Downlink Throughput.
Delay for VoIP in CQA scheduler is 28.85% quicker
compared to all other scheduler. This means that the voice
packets are able to be transmitted in a short amount of time.
The delay result is presented in Figure 8.
Figure 8.
VoIP Downlink Delay.
B.
Video Result
As shown in Figure 9, the video throughput for CQA
scheduler is 7% lower compared to the other schedulers.
This
is
because
CQA
scheduler
allocates
RB
while
considering the GBR of 64kbps for the UE to transmit the
video data.
The CQA scheduler delay is 14.97% lower compared to
other schedulers. Based on the results given in Figure 10, it
shows that by monitoring the GBR and HOL delay, CQA
could optimize the resource allocation and allocate the
resource block efficiently.
Destroy Simulator
Attach the UE to eNodeB
Setup traffic generator for voice, video and FTP
Setup Flow Monitor in UE and Remotehost
Start and Stop Simulation
LTE NS3
Include necessary header
Setup command line arguments for scenario
manipulation
Setup Evolved packet core and Setup Packet
Gateway
Create Remote Host for each traffic
Setup Internet using PointToPointHelper
Setup IPv4 for UE
47
Copyright (c) IARIA, 2015.     ISBN:  978-1-61208-422-0
EMERGING 2015 : The Seventh International Conference on Emerging Networks and Systems Intelligence

Figure 9.
Video Downlink Throughput.
Figure 10. Video Downlink Delay.
C.
Best Effort Result
The graph for UDP traffic that utilizes best effort
technique is displayed in Figure 11. The throughput is
11.38% higher than PSS and RR. Since non-real-time traffic
does
not
have
strict
delay
requirement,
the
resource
allocation prioritize real-time traffic while not jeopardizing
the non-real time traffic. Therefore, the CQA is still able to
allocate resources to enable the best effort traffic to be
transmitted optimally.
Figure 11. BE Throughput.
The
delay
for
CQA
scheduler
is
14.96%
higher.
However, considering this is not real-time traffic, the CQA
scheduler seems to fulfill its purpose. Figure 12 illustrates
the best effort results for UDP traffic.
Figure 12. BE Delay.
D.
Fairness Index & Packet Loss Ratio
The fairness index checks for the fairness in terms of
resource allocation between UE. Figure 13 presents a
histogram which shows that CQA scheduler performs best
starting at 55 users. It is calculated that CQA is 1.94% fairer
from 55 users to 80 users.
48
Copyright (c) IARIA, 2015.     ISBN:  978-1-61208-422-0
EMERGING 2015 : The Seventh International Conference on Emerging Networks and Systems Intelligence

Figure 13. Fairness Index
Figure 14. Packet Loss Ratio
Packet loss ratio defines the total of number for packet
loss during the transmission of the packets. CQA scheduler
has less packet loss ratio compared to PSS at around 0.21%
lesser. This can be seen in Figure 14.
VI.
CONCLUSION
Based on our study, PF and PSS have similar results.
CQA scheduler is more suitable for real-time application
compared to RR where delay of packets and fairness of
resource allocation is an issue for RR. The delay for CQA is
15.23% better than PSS in video and 25.06% better than PSS
in VoIP. Overall, we can conclude that CQA scheduler is
more suitable for real-time application compared to PSS.
Further studies will be conducted on how to improve the
throughput for video application while having optimum
results for voice and best effort traffic.
REFERENCES
[1]
“Evolved Universal Terrestrial Radio Access (E-UTRA): Radio Link
Control (RLC) protocol specification 3GPP TS 36.322.” [Retrieved
Online:
March,
2015].
Available:
http://www.3gpp.org/dynareport/36322.htm.
[2]
“Evolved Universal Terrestrial Radio Access (E-UTRA): Radio
Resource Control (RRC) protocol specification 3GPP TS 36.331.”
[Retrieved
Online:
March,
2015].
Available:
http://www.3gpp.org/dynareport/36331.htm.
[3]
I. Koutsopoulos and L. Tassiulas, “Channel state-adaptive techniques
for throughput enhancement in wireless broadband networks,” Proc.
IEEE INFOCOM 2001. Conference on Computer Communications.
Twentieth Annual Joint Conference of the IEEE Computer and
Communications Society (Cat. No.01CH37213), vol. 2, 2001, pp.
757-766, doi: 10.1109/INFCOM.2001.916266.
[4]
S. Sesia, I. Toufik, and M. Baker. LTE - The UMTS Long Term
Evolution: From Theory to Practice, 2nd ed., John Wiley & Sons
Ltd., 2011, pp.1–794.
[5]
D. Zhou, N. Baldo, and M. Miozzo, “Implementation and Validation
of LTE Downlink Schedulers for ns-3,” Proc. Sixth International
Conference on Simulation Tools and Techniques, 2013, pp. 211-218,
doi: 10.4108/simutools.2013.251608.
[6]
G. Piro, N. Baldo, and M. Miozzo, “An LTE module for the ns-3
network simulator,” Proc. 4th International ICST Conference on
Simulation
Tools
and
Techniques,
2011,
pp.
415–422,
doi:
10.4108/icst.simutools.2011.245571.
[7]
“ns-3”
[Retrieved
Online:
November
2014].
Available:
http://www.nsnam.org/.
[8]
Y. Barayan and I. Kostanic, “Performance Evaluation of Proportional
Fairness Scheduling in LTE,” Proc. World Congress on Engineering
and Computer Science, vol. 2, 2013, pp. 23–25.
[9]
H. J. Zhu and R. H. M. Hafez, “Scheduling schemes for multimedia
service
in
wireless
OFDM
systems,”
IEEE
Wireless
Communications,
vol.
14,
no.
15,
2007,
pp.
99–105,
doi:
10.1109/MWC.2007.4396949.
[10] N. Ruangchaijatupon and Y. J. Y. Ji, “Simple Proportional Fairness
Scheduling for OFDMA Frame-Based Wireless Systems,” Proc.
IEEE Wireless Communications and Networking Conference, 2008,
pp. 1593–1597, doi: 10.1109/WCNC.2008.285.
[11] G. Monghal, K. I. Pedersen, I. Z. Kovacs, and P. E. Mogensen, “QoS
Oriented Time and Frequency Domain Packet Schedulers for The
UTRAN Long Term Evolution,” Proc. VTC Spring 2008 - IEEE
Vehicular Technology Conference,
2008, pp. 2532–2536, doi:
10.1109/VETECS.2008.557.
[12] B. Bojovic and N. Baldo, “A new channel and QoS aware scheduler
to enhance the capacity of voice over LTE systems,” Proc. IEEE 11th
Int. Multi-Conference Syst. Signals Devices, SSD, 2014, pp. 1–6, doi:
10.1109/SSD.2014.6808890.
[13] M. Kawser, H. M. A. B. Farid, A. M. J. Sadik, and I. K. Razu,
“Performance Comparison between Round Robin and Proportional
Fair Scheduling Methods for LTE,” International Journal Information
and Electronics Engineering, vol. 2, no. 5, 2012, pp. 678-681, doi:
10.7763/IJIEE.2012.V2.186.
[14] F. Capozzi, G. Piro, L. A. Grieco, G. Boggia, and P. Camarda,
“Downlink Packet Scheduling in LTE Cellular Networks : Key
Design Issues and a Survey,” IEEE Transaction on Vehicular
Technology,
vol.
15,
no.
2,
2012,
pp.
678–700,
doi:
10.1109/SURV.2012.060912.00100.
[15] T. Janevski, “Traffic Analysis and Design of Wireless IP Networks,”
Proc.
Global Telecommunications Conference,
2000, pp. 1–6.
49
Copyright (c) IARIA, 2015.     ISBN:  978-1-61208-422-0
EMERGING 2015 : The Seventh International Conference on Emerging Networks and Systems Intelligence

