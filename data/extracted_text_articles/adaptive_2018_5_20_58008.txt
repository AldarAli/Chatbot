Barcelona Virtual Mobility Lab 
The multimodal transport simulation testbed for emerging mobility concepts evaluation 
Lídia Montero, Mª Paz Linares, Juan Salmerón, Gonzalo Recio, Ester Lorente, Juan José Vázquez 
Universitat Politècnica de Catalunya - BarcelonaTECH 
Barcelona, Spain 
email: lidia.montero@upc.edu, mari.paz.linares@upc.edu, juan.salmeron@upc.edu, gonzalo.recio@upc.edu, 
ester.lorente@upc.edu, juan.jose.vazquez.gimenez@upc.edu 
 
 
Abstract—New sustainable mobility concepts and smart 
resilient ideas are arising every day. However, there is not an 
easy way to bring these ideas into reality, or to test how good 
they are as mobility solutions. Virtual Mobility Lab offers the 
opportunity to evaluate the impact of new mobility concepts 
before taking them to the real world. In this work, a multimodal 
macroscopic traffic simulation model of the Barcelona 
Metropolitan Area is developed, including both public and 
private transport network. This paper explains the remarkable 
features developed for this model, such as the network hierarchy 
and the multimodal public network interchangers, allowing 
demand to exchange between public transportation modes along 
their origin-destination paths. 
 
Keywords—multimodal; public; transport; network; 
macroscopic; traffic; simulation; model. 
 
I. 
INTRODUCTION 
Nowadays, changes in urban networks and proposals of 
new mobility concepts are not easy to evaluate. They cannot 
be assessed directly in the real life, either due to the unknown 
effect on the real traffic or due to new infrastructures that are 
not yet built in the city. An option is to apply a pilot test, but 
it is often difficult, expensive and hardly configurable. 
Another option simulates the impact of the change or 
proposal applied to the real environment. 
The simulation is used in many contexts in order to 
measure, in a virtual environment, the impact of applying 
modifications on the real-world. It requires a previously 
developed model that represents, as precise as possible, the 
key characteristics and behaviors of the selected real 
scenario. In this case, any new mobility concept that wants to 
be tested should be recreated first in a simulated scenario, 
instead of spending time and money evaluating it with real 
fleets in the streets (if possible) [1][2]. In order to perform a 
good transport simulation, it is necessary to develop a model 
that represents accurately the real transport network. For this, 
it is important to have knowledge about the real scenario, as 
for example the multimodal details, a well-defined network 
hierarchy and an updated information of the public transport 
system. 
Thus, this paper presents the Barcelona Virtual Mobility 
Lab (VML), which uses a multimodal macroscopic 
simulation model developed in inLab FIB at Universitat 
Politècnica de Catalunya using PTV Visum Platform [3]. 
This project models a transport system to assist in the design 
and evaluation of impacts of new mobility concepts.  
The paper is organized as follows. Section II describes 
how the study territory area is divided and Section III and IV 
explain how private and multimodal public transport 
networks have been modeled, respectively. For Section IV, 
some indicators obtained from the model are described in 
addition to some guidelines of how the built model can be 
exploited on its potential applications. Finally, the document 
shows some final conclusions. 
 
 
 
Figure 1. Areas of metropolitan region of Barcelona. 
 
 
 
 
Figure 2. Zoning system of the study area. 
107
Copyright (c) IARIA, 2018.     ISBN:  978-1-61208-610-1
ADAPTIVE 2018 : The Tenth International Conference on Adaptive and Self-Adaptive Systems and Applications

II. 
STUDY AREA ZONING SYSTEM 
The study area included in this model is identified as the 
first crown of the metropolitan area of Barcelona. This area 
(delimited by the green line in Fig. 1) is composed by 
Barcelona city and 17 municipalities placed around it and 
they represent a population of more than 2.8 millions of 
people. 
Zoning system divides the study area into homogeneous 
Transport Analysis Zones (TAZ) according to socioeconomic 
features and access to transport facilities. Demand matrices 
model the number of trips between TAZ zones. In the zoning 
system, the area is represented by 628 zones that cover the 
study area and the contiguous territories (identifiers from 700 
in Fig. 2). 
The used demand data is provided by KINEO [4] who 
uses mobile phone data to extract the origin, destination and 
trip time tags. The demand is represented separately by 
hourly Origin to Destination (OD) matrices. This allows 
studying the different situation of the transport network 
depending on the time of the day. 
III. PRIVATE TRANSPORT NETWORK 
The private transport network is the representation of the 
urban network geometry. In order to simulate the behavior of 
the private vehicles in the network, it is needed to model a 
road network and their private transport systems. In traffic 
simulation modeling, the network geometry is usually 
constructed street by street to obtain a first model. This is a 
hard work task since even for small traffic models can have 
thousands of streets. 
This methodology is not a feasible solution for such a 
huge metropolitan area, thus geographical maps from HERE 
[5] have been imported into the platform to simplify the 
model building process. It also imports the available transport 
system in the modeled area for private and public transport 
(imported from General Transit Feed Specification (GTFS) 
files [6]). 
To support this, the traffic simulator VISUM allows a fast 
transport network modeling through HERE Maps to obtain a 
first approach model. The updated road network from HERE 
has been imported to VISUM that generates a traffic model 
with all the nodes and links (Fig. 3). 
This procedure helped to construct a first network model, 
but there are more concepts that needed to be modeled like 
the representation in detail of the road network hierarchy. 
This hierarchy created to distinguish between transport road 
types is shown in the Table I. 
This allows to model different types of streets depending 
on the speed limit, number of lanes, etc. in the road network 
for each of the transport systems (e.g., if allowed, the velocity 
limit, etc.) in a general mode. Then, manual edition of 
network characteristics imported from HERE maps has been 
done for specific areas. 
IV. MULTIMODAL PUBLIC TRANSPORT NETWORK 
As mentioned before, a multimodal network allows 
generating OD paths exchanging public transport modes 
when doing a demand assignment. In our model we 
considered the following modes: 
● 
Train 
● 
Underground 
● 
Bus 
● 
Tramway 
Accordingly, building a multimodal public transport 
network implies introducing all these modes and, for each of 
them, all the transport lines (e.g., Fig. 4 and 5). For this, it is 
necessary to know the topological route of each line, the 
number of stops, which sections have reserved lines in case 
of buses, and the number of travels each day
 
 
Figure 3. Private vehicle network road hierarchy. 
 
 
 
 
TABLE I. PRIVATE VEHICLE NETWORK ROAD 
HIERARCHY  
 
 
 
 
 
 
Type Name
Lane-capacity per 
hour
Free-flow Speed 
(km/h)
Motorway
1500
120
Urban motorway
1200
80
Coordinated Arterial (Aragó)
900
50
Uncoordinated Arterial
650
50
First Level Collector
700
50
Secon Level Collector
500
50
Road
800
80
Street without Traffic Lights
300
40
Unpaved rural road
100
30
Side/Access Lane
600
40
Roundabout
350
40
Bike
100
15
Pedestrians
60
5
108
Copyright (c) IARIA, 2018.     ISBN:  978-1-61208-610-1
ADAPTIVE 2018 : The Tenth International Conference on Adaptive and Self-Adaptive Systems and Applications

 
 
 
. 
 
 
Figure 4. Public Transport network: underground.     
 
 
 
Figure 5. Public Transport network: buses. 
considered: headway based journey based on frequency. For 
this macroscopic model, frequencies were used to model 
public transport services, adjusted to current transport 
operators. 
One of the main peculiarities of this macroscopic model 
is the approach of joining these transport modes. To achieve 
this, some logical components were introduced: stop points, 
stop areas and global stops: 
● 
Stop points define the topological position in the 
private network (urban map) where a station or bus 
stop is located. 
● 
Stop areas are useful for grouping stop points that 
lead to the same public line (e.g., an underground 
could have more than one entrance to the platform). 
Global stops gather all stop areas where it is allowed to 
perform transfers between different transport modes (blue 
circle in Fig. 6). Changing costs between lines or modes can 
be configured in these global stops (Fig. 7). 
V. RESULTS 
Just having into account the integration of all transport 
modes with almost all operators is a magnificent 
achievement, especially considering the context of  
Barcelona’s 
network complexity. 
As a result, the 
macroscopic model obtained is the unique intermodal built 
until now with all transport modes. 
The methodology followed to build the Barcelona VML 
model can be applied to any other model building process for 
other geographical areas. The Barcelona VML model also 
can be extended. Portability and extensibility of multimodal 
models through the proposed methodology is a trustingly 
success key. The model can be applied to other cities and also 
can be extended to larger areas. 
Also, accurate model calibration has to be taken into 
account in following working steps to obtain a stunningly 
realistic model. This implies collecting real data to validate 
measurements from the model and contrast them with reality 
(e.g., data from counting sensors vs results from an 
assignment). The more data sources implied in the calibration 
process, the better for the model’s accuracy. Besides that, on 
the early first version of the model (without any accurate 
network 
refinement), 
public 
and 
private 
transport 
assignments brought to light very reliable results (assignment 
results shown in Fig. 8 and Fig. 9). To perform this 
calibration, more real data from business key partners is 
needed, such as direct network measurements in the real 
world.
 
109
Copyright (c) IARIA, 2018.     ISBN:  978-1-61208-610-1
ADAPTIVE 2018 : The Tenth International Conference on Adaptive and Self-Adaptive Systems and Applications

 
 
Figure 6. Modelization of Pl. Espanya Multimodal Transfer Area. 
 
 
 
Figure 7. Modelization of Pg. de Gràcia Multimodal Transfer Area.
 
 
Figure 8. Private transport assignment 8h - 9h. 
 
 
Figure 9. Public transport assignment 8h - 9h. 
VI. APPLICATIONS 
The developed simulation model offers a lot of 
possibilities in order to correct, to update and to improve the 
mobility scene of the contained scenario. It allows studying 
how the current mobility plan is working, identifying the 
demand patterns and how they evolve and, detecting possible 
shortcomings in the current or future system. This 
information helps public organizations to take political 
decisions about the future modifications in the city mobility 
plan. Beside public organizations, the public transport 
operators can also take advantage of a complete vision of the 
scene and apply improved action plans depending on the 
demand behavior. 
With regard to this panorama of smart mobility, this 
model can be very useful for evaluating new concepts or 
ideas, as well as having a complete analysis of all possible 
parameters involved, before launching them to the real world. 
VII. CONCLUSIONS 
The Barcelona Virtual Mobility Lab is the first detailed 
multimodal model of the Prime Crown of the Metropolitan 
Area of Barcelona. It integrates all modes of public transport 
as well as the private vehicle roads that would support future 
projects in traffic design and planning. A systemic scope 
consisting of all transportation modes and services is the 
added value of the developed model. 
The next step will be to calibrate the model. Otherwise, it 
will not be useful as a Decision Support System tool. The 
model will help supporting future scenarios involving new 
transportation modes, vehicle types and urban developments. 
ACKNOWLEDGMENT 
This research was funded by TRA2016-76914-C3-1-P 
Spanish R+D Programs and by Secretaria d’Universitats-i- 
Recerca -Generalitat de Catalunya- 2017-SGR-1749. 
REFERENCES 
[1] 
L. Montero, M. P. Linares, O. Serch, and J. Casanovas-
Garcia, “A visualization tool based on traffic simulation 
for the analysis and evaluation of smart city policies, 
innovative vehicles and mobility concepts.,” in 
Proceedings of 2017 Winter Simulation Conference, WSC 
2017, Las Vegas, NV, USA, December 3-6 ISBN 978-1-
5386-3428-8, 2017, pp. 3196 – 3207. 
[2] 
M. P. Linares, L. Montero, E. Lorente-García, O. Serch, 
G. Navarro, and J. Salmerón-Moya, “Analytics tool for 
assessing innovative mobility concepts, vehicles and city 
policies (CitScale),” in Proceeding of the 5th IEEE 
International Conference on Models and Technologies for 
Intelligent Transportation Systems (MT-ITS) Napoli 
(Italia), 26-28 June ISBN: 978-1-5090-6484-7, 2017. 
[3] 
PTV Vision Traffic, “PTV Visum.” Karlsruhe. 
[4] 
“KINEO,” [accessed: 2018-02-03]. [Online]. Available: 
http://www.kineo.com. 
[5] 
“HERE,” [accessed: 2018-02-03]. [Online]. Available: 
https://www.here.com. 
[6] 
“GTFS,” [accessed: 2018-02-03]. [Online]. Available: 
https://developers.google.com/transit/gtfs. 
 
 
 
 
110
Copyright (c) IARIA, 2018.     ISBN:  978-1-61208-610-1
ADAPTIVE 2018 : The Tenth International Conference on Adaptive and Self-Adaptive Systems and Applications

