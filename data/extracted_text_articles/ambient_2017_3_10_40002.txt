Proposal and Evaluation of a Data Transmission Method for Using Sound in 
Accurate Indoor Positioning 
 
Takeru Kadokura          Kohei Morishita          Shigenori Ioroi          Hiroshi Tanaka 
Department of Information & Computer Science 
Kanagawa Institute of Technology, KAIT 
Atsugi-Shi, Japan 
email: {s1421005, s1421056}@cco.kanagawa-it.ac.jp, {ioroi, h_tanaka}@ic.kanagawa-it.ac.jp
 
 
Abstract— This paper proposes a method to process the data 
representing the sound that is used to determine the indoor 
position of objects.  A scheme is proposed and its theoretical 
validity is confirmed by numerical simulation using MATLAB.  
The scheme is to modulate a sound source based on information 
or data obtained before diffusion (spread spectrum) by an M 
sequence code.  The experimental setup includes a speaker and 
a microphone, and the bit error rate is evaluated by changing 
experimental conditions such as the transmitting frequency and 
the order of the M sequence code. This fact leads to the 
realization of the system by sound, to provide both indoor 
positioning and sensor data transmission functions. 
Keywords-Sound; Spread Spectrum; Data Transmission; 
Inaudible Sound; Indoor Positionng. 
I. 
 INTRODUCTION 
Location information is one of the most important 
information, whether outdoors or indoors.  Global Positioning 
System (GPS)/Global Navigation Satellite System (GNSS) 
has become a standard positioning system and its hardware 
and uses now involve large market.  Although many kinds of 
positioning methods and systems have been studied and 
developed [1][2], there is no standard system to determine the 
position of objects or people in an indoor environment.  At 
present, several systems may be selected, depending on the 
specific requirements of particular situation.   
  The authors have been studying a highly accurate indoor 
positioning system that uses sound.  The velocity of sound is 
quite low compared with that of radio waves, so the problem 
of errors resulting from the timing of signal reception presents 
no severe difficulties, and it is easy to discriminate between 
direct sound and multipath sound due to reflections etc.  This 
enables accurate positioning by the use of sound.  If an 
additional data transmission function can be included in this 
system, so that transmission of both positioning and other 
information can be achieved with the same system 
components, the applicability and value of the system will be 
greatly enhanced. 
  At the first stage, we use ultrasonic waves and detect the 
time of reception by the voltage at the receiver.  This can 
realize high accuracy, but requires an ultrasonic transmitter.  
This equipment is not in common use, which this could act as 
a barrier to the system coming into widespread use [3].  As a 
second stage, we used inaudible sound from a smartphone.  In 
this system, a spread-spectrum sound source and a correlation 
calculation are used to detect the reception time at each 
microphone sensor.  The position is then obtained from the 
time difference between sound reception at each receiver [4].  
  In the GPS/GNSS system, information such as satellite 
orbit data etc. are included in the radio wave used for 
positioning.  It is thought that data can be similarly embedded 
in the sound used in this positioning system, as both radio and 
sound are wave phenomena.  We are now investigating a 
realization of both of accurate indoor positioning and 
information data transmission, such as sensor data in one 
system. 
  This paper presents a method to embed additional 
information in the sound used for indoor positioning.  A 
scheme using sound diffusion (Spread Spectrum (SS)) is 
proposed, and its validity is confirmed by numerical 
simulation in Section III.  The experimental setup uses a 
speaker and a microphone and the transmission quality has 
been evaluated under a range of experimental conditions.  It 
was shown in Section IV that data transmission can be 
achieved by the proposed method, which points to a system 
that has the dual functions of indoor positioning and data 
transmission. 
II. 
TARGET SYSTEM AND ADDED FUNCTION 
A. Summary of composed indoor positioning system 
The principle of the indoor positioning system to which 
the authors will add a data transmission function is shown in 
Figure 1 [5].  The positioning principle of this system is based 
on the Time Difference Of Arrival (TDOA) principle.   
 The spread spectrum sound diffused by an M sequence 
code is transmitted from the positioning target to microphone 
sensors connected to each receiver.  The timing in the received 
signal is detected by correlation calculation, and the time 
differences at each sensor (t1, t2, t3) are obtained.  The position 
of the sound source (positioning target) is calculated from the 
time difference data.  The positioning principle is based on the 
difference between arrival times.  The positioning principle is 
based on the differences between times of arrival.  This 
method can yield quite high accuracy, with an error of less 
than a few centimeters.  An example of the experimental 
results is shown in Figure 2.  If the sound can include 
information, such as sensor data, the system can be used not 
34
Copyright (c) IARIA, 2017.     ISBN:  978-1-61208-601-9
AMBIENT 2017 : The Seventh International Conference on Ambient Computing, Applications, Services and Technologies

only for positioning but also for the transmission of other 
information, which would appear to add value to the system. 
III. 
INFORMATION TRANSMISSION BY SOUND USED FOR 
POSITIONING 
A.  Process of embedding information 
 Figure 3 shows the process used to embed data in the 
sound used for positioning. The elements surrounded by 
dotted block were added to the system described in [5]. The 
time of reception can be obtained by correlating the received 
sound, which is spread by the same M sequence code, with 
its replica stored in the receiver.  The authors propose 
modulating the sound source with data such as the output of 
a temperature sensor, etc., as the first modulation before 
diffusion processing. 
 The receivers get this spread spectrum signal via a 
microphone sensor.  The correlation calculation is carried out 
to determine the time of reception, and the obtained values are 
used for positioning as described in Section II-A.  Here, 
inverse diffusion processing is applied using the same M 
sequence code from this timing to retrieve the modulated 
signal.  After this demodulation processing, the summation of 
the demodulated signal is carried out in order to obtain the 
desired data. 
B. Confirmation by numerical simulation 
 Before constructing the experimental system, a 
simulation was carried out to verify the validity of the 
proposed procedure by using MATLAB programming.  A 
3rd order M sequence code was used in this simulation for 
ease in confirming the signal variation. 
The simulation result is shown in Figure 4.  The graph in 
the top line represents the data for transmission and that in 
the bottom is the data retrieved by the proposed procedure.  
The sound source is modulated based on the data (-1, 1, . . .), 
here -1, 1 which means 0, 1.  This signal is modulated again 
by the M sequence code (1, 1, 1, -1, 1, -1, -1, . . .: -1 means 
0 in the figure) as a second modulation.  The received signal 
is the same as the transmitted signal, although its time of 
reception indicates the time required for sound propagation.  
The time of reception was determined by a correlation 
calculation using the replica, and the inverse diffusion was 
carried out from this timing.  The signal to be demodulated 
was obtained after these procedures.  The resulting data was 
obtained after summation of the demodulated signals. 
It was confirmed that the modulated signal was 
regenerated on the receiving side after inverse diffusion.  The 
required data is obtained after demodulation, and summation 
Microphone sensors
(Fixed in environment)
Sound source
（Positioning target）
Unknown variables
(x, y, z and t) are obtained
by using four sensors.
・ ・ ・
(x0, y0, z0) (x1, y1, z1) (x2, y2, z2) (x3, y3, z3)
t
t + t1
t + t2
t + t3
t : Propagation time(not detectable)
ti : Time difference of propagation(detectable)
(x, y, z) : Position*
*:Unknowns
Figure 1.  Positioning principle. 
0
500
1000
1500
2000
2500
0
500
1000
1500
2000
2500
Y(mm)
X(mm)
Microphone sensor
Positioning result1
Positioning result2
Railway
Figure 2.  Example of experiment result. 
Data
Sound 
source
M sequence 
code
Correlation
Sound 
source
M sequence 
code
Synchronization
Replica
SS signal
Data
Modulation
Diffusion
Inverse
diffusion
Demodulation
Transmitter
Receiver
Delay by
distance
Sound
Added Block
Summation
Figure 3.  Block diagram for data embedding and transmission. 
Data
Sound source
M sequence code
Modulation
Diffusion
Received signal
Correlation
Inverse diffusion
Demodulation
Summation
(Data)
Figure 4.  Simulation result for data transmission. 
35
Copyright (c) IARIA, 2017.     ISBN:  978-1-61208-601-9
AMBIENT 2017 : The Seventh International Conference on Ambient Computing, Applications, Services and Technologies

with this demodulated signal can enhance the reliability of 
data transmission, as shown in the graphs in Figure 4. 
IV. 
EXPERIMENT AND EVALUATION  
A. Experiment configuration  
The authors have constructed an experimental system to 
confirm the validity of the proposed method.  The 
experimental configuration is shown in Figure 5.  A speaker 
(DB Products Limited: UM1515IA085008LFMP) connected 
to an amplifier was used as the sound source.  The random 0 
(-1), 1 code was used to provide the data, a rectangular wave 
was selected as the sound source, and this signal was 
modulated using the data and the M sequence code on an 
Arduino board (Arduino Due).  Here, the data was created by 
a random data generator in advance and stored in the memory 
of the Arduino Due.  The speaker was connected to this board 
via the amplifier to transmit the sound signal. 
The signal received by a microphone sensor (Primo: EM-
158) was amplified in the receiver, and A/D conversion was 
carried out in the Arduino Due before transmission to the PC.  
Then 
the 
correlation 
calculation, 
inverse 
diffusion, 
demodulation and summation were conducted to retrieve the 
original data that was embedded in the transmitted sound.  The 
experimental setup is shown in Figure 6.  The experiment was 
carried out in the laboratory room shown in this photograph 
and the campus cafeteria at lunch time, which provided a 
commonly encountered noisy environment. 
B. Experiment conditions 
The basic experimental parameters are shown in Table I.  
The chips of M sequence code in one period for diffusion 
(255 chips) were embedded in 1 bit time length of the original 
data.  The transmission quality was affected by many factors, 
such as the order of the M sequence code, the distance 
between the microphone sensor and the speaker, the sound 
frequency before diffusion, etc.  Such factors were verified in 
this experiment, and also the bit error rate per 1000 
information bits and the Signal to Noise Ratio (SNR) were 
evaluated.  The SNR was estimated from the peak value of 
the correlation calculation and the noise level. 
C. Experimental results and evaluation 
The experiment was carried out five times under the same 
conditions to confirm repeatability.  Then the average values 
were evaluated.  An example of the correlation calculation 
result for an 8th order M sequence code is shown in Figure 7.  
It was verified that the peak appeared clearly, therefore 
positioning could be performed, and the inverse diffusion 
could be obtained from this result.  
Figure 8 shows the summed results of demodulated 
signals for the results of 6th order and 8th order M sequence 
codes, respectively.  Since the period of 8th order code is 
larger than that of 6th order code, the summation values in 
the 8th order result are larger.  The positive values are 
considered to be 1, and the negative values are -1.  It was 
confirmed that the summation values obtained with 8th order 
were more stable than those from 6th order.  This means that 
more reliable data transmission can be achieved with an 8th 
order M sequence code, although its transmission speed (bits 
per second) is less than that of 6th order. Table II summarizes 
the experimental results.  Nominal parameters for sound and 
diffusion are shown in Table I.  One parameter and the 
experimental environment were changed to evaluate the 
effect on transmission performance.  The distance between 
Amplifier
Arduino Due
A/D conversion
PC
Correlation
Synchronization
Inverse diffusion
Demodulation
Summation
Microphone
Speaker
Amplifier
Arduino Due
Data
SS signal generation
Figure 5.  Experimental configuration for data transmission. 
Arduino Due
Speaker
Amplifier
Microphone
Amplifier
Arduino Due
PC
Figure 6.  Experimental setup for data transmission. 
Item
Unit
Parameters
Sound source
Rectangular wave
Source frequency : a
kHz
22.05
Sampling frequency
of transmission : b
kHz
44.1
b = 2a
Sampling frequency
of reception : c
kHz
88.2
c = 2b
Data
bit
1000
Order of M sequence : d
8
Generator polynomial
             
M sequence period : e
chip
255
e = 2d - 1
1 sample length : f
μs
22.68
f = 1 / b
1 chip length : g
μs
45.36
g = 2f
1 bit time length of
data : h
ms
11.6
h = ge
Transmission rate : i
bps
86.2
i = 1 / h
TABLE I.  
EXPERIMENTAL PARAMETRES FOR DATA 
TRANSMISSION 
0 5
0
0 5
Correlation
Fi
36
Copyright (c) IARIA, 2017.     ISBN:  978-1-61208-601-9
AMBIENT 2017 : The Seventh International Conference on Ambient Computing, Applications, Services and Technologies

the speaker and the microphone sensor was set at 3 m, a 
length based on the floor to ceiling distance.  The experiment 
was usually carried out in the laboratory room on campus 
(environmental noise: 40.4 – 56.2 dB) and the campus 
cafeteria at lunch time (66.7 – 93.4 dB). The following facts 
were confirmed in this experiment. 
(1) In the case of diffusion by a greater than 6th order M 
sequence code, quite a high quality of transmission 
performance can be obtained in a normal noise environment. 
(2) Even in quite noisy conditions from 66.7 dB to 93.4 
dB, the quality can be maintained if an 8th order M sequence 
code is used for diffusion.  This result indicates that 
transmission using spread spectrum is robust in a noisy 
environment.  The authors found it feasible to realize both of 
positioning and data transmission functions by one sound 
system. 
V. 
CONCLUSION 
The authors proposed a method to embed data in the 
sound used in a positioning system.  The spread spectrum 
technique is applied to the sound signal, which is modulated 
based on the data.  The feasibility and validity of the proposed 
method was confirmed by a numerical MATLAB simulation 
before an experiment was performed. 
The experimental system was designed to verify the 
proposed method and to evaluate transmission quality.  The 
order of the M sequence code for diffusion, the sound 
frequency and the environmental noise level were varied in 
the experiments.  It was verified that the data can be 
transmitted along with the diffused sound data in which it is 
embedded, and high quality can be retained even in a noisy 
environment. 
The final goal is to realize a system that can transmit both 
positioning information and sensor data.  Integrating both 
functions remains as the next stage of the project. 
ACKNOWLEDGMENT 
This work was supported by JSPS KAKENHI Grant 
Numbers JP17K00140. 
REFERENCES 
[1] R. Mautz, “Overview of current indoor positioning systems,” 
Geodesy and Cartgraphy, Vol. 35, No. 1, pp. 18-22, 2009. 
[2] A. Mandal et al., “Beep: 3D Indoor Positioning Using Audible 
Sound,” 
Consumer 
Communications 
and 
Networking 
Conference, pp. 348-353, 2005. 
[3] H. Sunaga, T. Hada. M. Akiyama, S. Ioroi, and H. Tanaka, 
“Discrimination 
of 
Multiple 
Objects 
and 
Expanding 
Positioning Area for Indoor Positioning Systems using 
Ultrasonic Sensor,” European Conference on Ambient 
Intelligence 2011, pp. 31-40, 2011. 
[4] S. Murata, C. Yara, K. Kaneta, S. Ioroi, and H. Tanaka, 
“Accurate Indoor Positioning System using Near-Ultrasonic 
Sound from a Smartphone,” Int. Conference on Next 
Generation Mobile Apps, Service and Technologies, pp. 13-18, 
2014. 
[5] S. Murata, K. Kaneta, S. Ioroi, and H. Tanaka, “Proposal for 
High Accuracy Indoor Positioning using Spread Spectrum for 
Multiple Sounds Accommodation and its Verification,” 
Journal of the Institute of Positioning, Navigation and Timing 
of Japan, Vol. 7, No. 1, pp. 1-10, 2016 (in Japanese). 
-3000
-1000
1000
3000
0
50
100
Summation
time(ms)
Order of M sequence : 8
-3000 -1000
1000
3000
0
50
100
Summation
time(ms)
Order of M sequence : 6
Figure 8.  Results of summation after demodulation. 
Parameters
Error bit
SNR
Usual a
Noisy b
Usual a
Noisy b
Order of M Sequence
4
2 / 1000
Unmeasurable
2.2
2.2
6
0 / 1000
114 / 1000
3.7
2.8
8 (Nominal)
0 / 1000
0 / 1000
7.2
4.8
Sound frequency before diffusion [kHz]
11.025
0 / 1000
0 / 1000
8.9
5.4
22.05 (Nominal)
0 / 1000
0 / 1000
7.2
4.8
33.075
0 / 1000
1 / 1000
7.1
4.9
Sound volume [dB]
40.0
36 / 1000
N/A d
4.7
N/A d
55.0
0 / 1000
N/A d
6.1
N/A d
72.8 (Nominal)
0 / 1000
N/A d
7.2
N/A d
Order of low cut filterfor transmitted sound data c
0 (Nominal)
0 / 1000
3 / 1000
5.2
3.5
2
0 / 1000
11 / 1000
4.7
3.7
a. Environmental noise 40.4~56.2[dB]
b. Environmental noise 66.7~93.4[dB]
c. In this case, order of the M sequence  was 7.
d. N/A means sound volume could not be measured due to a  noisy environment. 
TABLE II.  
EXPERIMENTAL RESULTS FOR DATA 
TRANSMISSION 
37
Copyright (c) IARIA, 2017.     ISBN:  978-1-61208-601-9
AMBIENT 2017 : The Seventh International Conference on Ambient Computing, Applications, Services and Technologies

