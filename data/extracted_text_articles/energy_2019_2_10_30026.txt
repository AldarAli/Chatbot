Modelling Fractal-Structured Smart Microgrids 
Exploring signals and protocols 
 
Mark Apperley 
Computer Science Department 
University of Waikato 
Hamilton, New Zealand 
email: mark.apperley@waikato.ac.nz
 
 
Abstract— This paper discusses some of the issues surrounding 
the interconnection of smart microgrids, with a focus on fractal 
structures, their implementation, management, operation, and 
potential effectiveness. It builds on a basic smart microgrid 
model which focuses on the property of localised energy balance, 
in order to mitigate the dependency on legacy-grid resources to 
accommodate short-term (hourly) and medium term (daily to 
monthly) imbalance. This model provides the basis for further 
development to allow connecting a group of such micro-grids 
into a network which externally presents identical structure and 
characteristics, so enabling the fractal-like interconnection of 
these micro-grids, or groups of microgrids. Such structures 
simplify the interconnection, management and operation of 
smart microgrids, and their connection to the legacy grid. They 
also intrinsically enable the notion of grid-edge trading. These 
characteristics have the potential not just to further enable and 
promote the effective utilisation of distributed generation and 
storage, but also to simplify and rationalise future backbone 
grid development. 
Keywords-fractal micro-grid; legacy grid; backbone grid; grid 
edge trading; localised temporal energy balance; autonomous 
microgrid. 
I. 
 INTRODUCTION  
The rapid development of new renewable energy sources, 
typically with non-deterministic patterns of generation, 
provides significant challenges for the traditional, or legacy, 
grid [1]–[3]. Coupled with similarly rapidly developing 
storage technologies [4][5], and automation systems which 
enable effective and tolerable load matching and shifting [6], 
these technologies can facilitate a significant degree of 
distribution. Concerns with long-distance hierarchal/radial 
energy transfer and real-time load following from centralized 
generating systems, grow less and less relevant and 
appropriate when microgrids, with their highly distributed 
generation, storage, and load management, become more 
prevalent [2][6]–[10].  
While the integration of centralized renewables into the 
legacy grid has been the subject of much research, discussion 
and debate [11][12], they typically require significant energy 
storage capacity for their contribution to be effective. 
Although a range of storage concepts have been explored, 
including V2G (Vehicle-to-grid) [13], when utilized with 
centralized renewable generation, the distributed nature of 
such storage in contrast to the generation, places increased 
energy transfer demands on the grid.  
In this paper the microgrid concept is extended into 
networks of hierarchically interconnected microgrids, 
ultimately connected to the backbone grid, in a fractal-type 
structure [15]. The term legacy grid is well established, 
describing the centralized generation and distribution models 
of the past. Here, the term backbone is used to describe its 
evolution/successor where the centralized functionality begins 
to take on a new role, delegating aspects of control, balance 
and generation outwards from the center, depending to some 
extent on, and exploiting, the growth of localized balance, 
although elsewhere the term has been used to describe new 
major national and international transmission systems [8][14]. 
The protocols for the interconnection of the microgrids to 
the backbone grid, including potential grid-edge trading, are 
discussed, with an emphasis on overall system and 
communication simplicity, although there is no constraint on 
individual complexity within a single node [16]–[18]. This 
concept is not unlike that of the Internet, where the protocols 
are essentially simple, with any complexity residing in the 
individual terminal devices, and simple devices not ruled out 
[19]. 
This paper does focus on relatively small-scale 
consumption/generation nodes, typically those found in 
individual residential installations. However, the concepts 
could be extended to to larger commercial or industrial nodes, 
although some aspects may not scale so well. 
The remainder of the paper is structured as follows. In 
Section II, a model to describe the characteristics of a smart 
microgrid is developed, and then in Section III, this is 
extended to enable multiple microgrids to be interconnected 
in fractal-type structures. Section IV then explores the way in 
which energy, and relevant information, might be exchanged 
within, and to and from, these structures, and the overall 
effectiveness of the approach. Section V summarizes the 
paper, and concludes that these techniques can lead to more 
effective utilisation of distributed generation, and simplify 
future backbone grid development. 
II. 
MODELLING SMART MICROGRIDS 
The notion of localised temporal energy balance within a 
microgrid, as a significant advancement of the Net-Zero 
Energy Balance concept [20][21], is well developed [22][23]. 
To minimize or completely remove grid dependency, balance 
13
Copyright (c) IARIA, 2019.     ISBN:  978-1-61208-713-9
ENERGY 2019 : The Ninth International Conference on Smart Grids, Green Communications and IT Energy-aware Technologies

conditions need to be calculated on a much shorter time scale 
than the annual balance used in the Net-Zero model. A 
household-level smart microgrid model, which enables these 
calculations, has been developed and is shown in Figure 1 [22] 
[23]. While the inclusion of the battery flows in both the local 
consumption and local generation totals may appear to 
account for the stored energy twice, this is necessary in order 
to examine flows over short time scales [22][23]. Typically, 
and usefully, balance calculations can be performed at hourly 
intervals over the year (as shown later in Figure 2). 
For an example (New Zealand) household with an average 
daily consumption of 17.6 kWh, the energy balance plot of 
Figure 2 (taken from [22]) shows the actual hourly balance, 
based on the model of Figure 1, with solar PV chosen to 
exactly match the load over a year, and with 24 hours 
equivalent of battery storage (1.3 Tesla Powerwall 2s [5]). As 
can be seen, for this hourly energy balance plot, many of the 
8760 hours lie on the diagonal, showing perfect balance. 
However, a substantial number fall below the diagonal, 
representing a net grid load for that interval, and a significant 
number lie above, representing excess generation. It is 
interesting to note that the Net-Zero Energy Balance model 
for this configuration would describe it as in perfect balance, 
which it is only if you consider generated and consumed 
energy over a whole year. The vertical stack of points towards 
the left of the graph represents times of high solar generation, 
often with low day-time load, as is experienced in most 
residential installations. 
III. 
A FRACTAL MODEL FOR NETWORKS OF SMART 
MICROGRIDS 
The hourly balance plot of Figure 2 clearly shows the 
potential for networking such micro-grids, for example within 
a neighbourhood, to improve local energy balance. It is 
possible that when the example household of Figure 2 is in 
surplus, one of its neighbours may be in deficit, so providing 
the opportunity for local energy exchange, or grid-edge 
trading, and reducing the demand on the external backbone 
grid. Overall, this local exchange can only reduce the external 
demand, potentially reduce the network distribution capacity 
requirements, and make more effective local use of the 
distributed generation and storage, improving both the local 
and backbone efficiency. 
The microgrid illustrated in Figure 1 represents just a 
single household. Several households in the same 
neighbourhood could be interconnected in a higher level 
microgrid, as suggested in Figure 3. Here, a number of 
households are connected to a higher level node, which bears 
very close resemblance to the household nodes themselves, 
and presents a similar face to the backbone/grid as the 
individual households previously did. In this model, the 
neighborhood node includes potential neighborhood load 
(e.g., community street lighting, electric vehicle charging), 
neighborhood storage, and neighborhood generation (perhaps 
in a school or other public building or space). A multi-level 
self-similar structure, such as this, can be defined as a fractal 
structure [15], and its utility in modelling and describing 
networks of smart-microgrids has been discussed [24]. 
 
 
Figure 1.  Energy flows within the smart microgrid, and the 
contextual definitions of local generation and local consumption. 
 
 
 
Figure 2.  Energy balance at hourly intervals over a year for an 
example installation. 
 
0.0 
1.0 
2.0 
3.0 
4.0 
5.0 
6.0 
0.0 
1.0 
2.0 
3.0 
4.0 
5.0 
6.0 
Local genera+on (normalised hourly) 
Local consump+on (normalised hourly) 
Hourly  Balance (storage = 24 hrs) 
 
 
 
Figure 3.    A collection of households grouped together in a 
neighborhood, using a fractal-like construction technique. 
neighborhood 
load
Energy flow 
management
neighborhood 
storage
neighborhood 
generation
Grid
HoH
Household 1
HoH
Household 2
HoH
Household 3
Neighborhood-Level Smart Micro-grid
14
Copyright (c) IARIA, 2019.     ISBN:  978-1-61208-713-9
ENERGY 2019 : The Ninth International Conference on Smart Grids, Green Communications and IT Energy-aware Technologies

To support this fractal approach, closer examination of the 
neighbourhood grid of Figure 3, and the household grid of 
Figure 1, leads to the single generic microgrid model of 
Figure 4, which could represent a node at any level in a tree of 
microgrids; a household (leaf) node, or a neighbourhood, a 
suburb, or a township node, if appropriate. A leaf node would 
not have any connection to a lower level grid, and at any level, 
any component other than the energy flow management unit, 
could be omitted. In other words, some units could have no 
storage, some could have no generation, and some no load, or 
any combination of these. 
IV. 
SIGNALS, PROTOCOLS, AND EFFECTIVENESS 
For the purposes of this discussion, and our desire, alluded 
to in the introduction, to maintain simplicity in the 
communication between nodes, it is suggested that the only 
signal transmitted between nodes is one of price/need. This 
leads to the simplified generic node representation of  
Figure 5, with bidirectional energy flow and downward 
propagation of pricing signals. As suggested earlier, this 
simplicity is consistent with the end-to-end principle of smart 
system communication, fundamental, for example, to the 
Internet [19]. 
This simple model enables a non-smart (passive) node to 
pass on the incoming price signal downwards, to use/buy any 
available or offered energy it needs from above, and to 
propagate any surplus energy that it has upwards, to the higher 
level grid, if there is a demand for it. The more detailed model 
of Figure 4 implies that the lower level grid simply contributes 
additional load or additional generation. 
Consider first a  passive node such as this which is a leaf 
node, effectively more like the node of Figure 1. It would 
normally be in one of three possible states:  
• 
deficit, when it is unable to meet its own demand from 
its own available generation and/or storage (i.e., when 
total node load exceeds total available node 
generation – Figure 1); 
• 
balance, when it is able to provide for its own demand 
from local generation and/or storage, without any 
wasted generation (i.e., when total node generation 
can be adjusted to exactly meet total node load); and 
• 
surplus, when it is unable to consume all of its 
available energy (i.e., when total node generation 
exceeds total node load, including battery charging – 
Figure 1)). 
For passive non-leaf nodes, consistent with the model of 
Figure 4, and for the purposes of the current discussion, the 
lower level grid is assumed to contribute to the node’s 
generation and load, as mentioned earlier and suggested in the 
figure.  
These three states just described are deterministic, and can 
be readily established, even for a passive node. However, as 
the “smart” nature of a node increases, the nature of these 
states may be modified by the energy flow management 
system, particularly in the balance state. For example, in this 
balance state, a smart node may decide, on the basis of history, 
current charging levels, future prediction, and price, to sell or 
buy energy from the upper grid. This is an attribute of the 
smart node alone, and has no impact on the topology and 
signals proposed in Figure 4 and Figure 5. 
An individual smart node could potentially have a quite 
complex policy, perhaps to always sell when the price offered 
is at least 10% above the norm, and the battery is more than 
80% charged. But it could also utilize factors such as expected 
 
Figure 4. A fractal microgrid energy flow model. 
Node 
local load 
Node local 
generation 
Node 
local 
storage 
lower level grid 
Node energy 
flow 
management 
higher level grid 
total Node 
consumption 
total Node 
generation 
 
Figure 5. A simplified energy flow model for a fractal node. 
 
price signal out
Local 
Load
Energy flow 
management
Local 
Generation
Local 
Battery
price signal in
 
 
Figure 6. The three states of a fractal node such as Figure 5, with the 
addition of optional and imperative sell and buy. 
Deﬁcit 
Balance 
Surplus 
Sell regardless of 
price 
Sell if it makes 
sense 
Buy regardless of 
price 
Buy if it makes 
sense 
15
Copyright (c) IARIA, 2019.     ISBN:  978-1-61208-713-9
ENERGY 2019 : The Ninth International Conference on Smart Grids, Green Communications and IT Energy-aware Technologies

or predicted generation and load over the next period. The 
model here enables such policies to be implemented at the 
node level, and for smart nodes such as this to co-exist, and be 
networked, with  more passive nodes such as that previously 
described. Figure 6 shows the original 3 states with the 
addition of the buying and selling imperatives (deficit and 
surplus), and options (balance). In the balance state, the 
decision to buy or sell is totally dependent on the policy 
employed by the node, and the price signal. 
In general terms, we can represent the possible policy 
based decisions that could take place within a smart node to 
determine the “if it makes sense” modifier of Figure 6, with 
the decision tree shown in Figure 7. 
Figure 7 still hides specific detail, but enables it at varying 
levels of complexity. For example, decision 1 “is there enough 
to last until next charging” could exploit history of daily load, 
time of day and solar characteristics, weather conditions now, 
and for the remainder of the day, amongst other factors. 
Decision 2, “is selling price good over this period”, suggests 
the node should look for the optimum time to sell during the 
time between now and the next charging. Decision 3, “is 
buying price good…” is really asking is the buying price likely 
to get lower before the battery runs out. 
V. 
CONCLUSION 
A model characterising a smart microgrid has been 
proposed, which allows for fractal structured interconnection. 
Individual nodes can be of any level of “smartness”, and 
totally passive nodes can be included without compromising 
the autonomy of others. The model is based on very simple 
signalling, consistent 
with the 
end-to-end 
approach 
successfully utilised, for example, in the Internet, which 
totally supports these notions of autonomy and participatory 
variety [19]. Without attempting to provide any technical 
implementation detail, the paper has demonstrated the 
potential utility of the approach. 
Internally, the networked smart microgrid is no different 
in its configuration and operation when a part of a 
neighbourhood fractal network, than it is when it is a stand-
alone backbone-grid connected microgrid. It is totally 
autonomous in its operation. Non-leaf nodes still retain this 
autonomy, although obviously the load and generation of the 
lower level nodes passes through them. Network transparency 
simplifies 
and 
facilitates 
individual 
interconnection, 
management, and operation of these microgrids. 
Technically, grid-edge trading is implicit in the structure, 
although it is not explicitly represented. Contracting, 
accounting, charging for this at any level is not different from 
the situation on a regular grid with multiple generators and 
multiple consumers, but as described, it does fall short of 
enabling peer-to-peer contracting [17]. 
These features all potentially contribute to the notion that 
semi-self-reliant 
microgrids, 
can, 
without 
internal 
compromise, be connected into neighbourhood and local 
grids, which maximise the local consumption of local 
generation, and provide a basis for future backbone grid 
development, in terms of both generation and distribution 
capacity. 
The model presented here is based purely on energy flows, 
and does not take into consideration the practical physical 
details of electricity networks, including voltage transitions, 
security, stability, etc. However, with the growth in distributed 
renewable energy, electronic frequency control, and the 
gradual decline of rotating generators, many of these issues 
must be regarded as volatile, as we move from the legacy grid 
model to the backbone plus fractal smart microgrids discussed 
here. 
There are aspects of the model which may still subject to 
debate. For example: 
• 
Should non-leaf nodes be able to modify the pricing 
information they propagate downwards? 
• 
Should lower level nodes be able to signal their own 
selling price upwards? 
If not specifically answered by the analysis, it is suggested 
that these considerations have been shown to be of little 
consequence, and unnecessary for effective operation of 
autonomous microgrids, although the model used here is 
based on effective and efficient energy utilisation, rather than 
being motivated by business opportunity.  
Simulation studies of this model, utilising real household 
and neighbourhood consumption data, are currently 
underway. 
 
REFERENCES 
[1] 
G. Venkataramanan and C. Marnay, “A larger role for microgrids,” 
IEEE Power and Energy M., vol. 6, no. 3, pp. 78-82, May-June 2008. 
[2] 
“Transmission Tomorrow,” 2016, [Online] https://www. transpower. 
co.nz/resources/transmission-tomorrow-2016-0. [Retrieved: Mar. 10, 
2017]. 
 
 
 
Figure 7. An energy flow management decision tree enabling 
flexible policy implementation, and levels of “smartness”, in any 
fractal node. 
Balance 
Is ba+ery 
fully 
charged? 
Sell 
Do nothing 
Buy 
enough to last 
un9l next 
charging? 
Is buying price 
good over this 
period? 
Is selling price 
good over this 
period? 
N 
N 
N 
N 
Y 
Y 
Y 
Y 
1
2
3
16
Copyright (c) IARIA, 2019.     ISBN:  978-1-61208-713-9
ENERGY 2019 : The Ninth International Conference on Smart Grids, Green Communications and IT Energy-aware Technologies

[3] 
T. Seba, Clean disruption of energy and transportation, Clean Planet 
Ventures: CA., 2014. 
[4] 
R. Hensley, J. Newman, and M. Rogers, “Battery technology charges 
ahead”, McKinsey Quarterly, vol. 3, pp. 5-50, 2012. 
[5] 
Tesla, “Powerwall,” 2017. [Online]. https://www. tesla.com/ en_NZ/ 
powerwall.   [Retrieved: Mar. 01, 2017]. 
[6] 
A. Ipakchi and F. Albuyeh, “Grid of the future,” IEEE Power Energy 
M., vol. 7, no. 2, pp. 52-62,  2009. 
[7] 
J. P. Lopes, N. Hatziargyriou, J. Mutale, P. Djapic, and N. Jenkin,  
“Integrating distributed generation into electric power systems: A 
review of drivers, challenges and opportunities,” Electr. Pow. Syst. 
Res., vol. 77, no. 9, pp. 1189-1203, 2007. 
[8] 
M. Amin, “The Case for Smart Grid: Funding a new infrastructure in 
an age of uncertainty,” Public Utilities Fortnightly, March 2015, pp. 
24-32. 
[9] 
D. Coll-Mayor, M. Paget, and E. Lightner, “Future intelligent power 
grids: analysis of the vision in the European Union and the United 
States”, Energy Policy, vol. 35, pp. 2453-2465, 2007. 
[10] M. Lehtonen and S. Nye, “History of electricity network control and 
distributed generation in the UK and Western Denmark”, Energy 
Policy, vol. 37, pp. 2338-2345, 2009. 
[11] Y. Riffonneau, S. Bacha, F. Barruel, and S. Ploix, “Optimal power flow 
management for grid connected PV systems with batteries”, IEEE 
Trans. Sustain. Energy, vol. 2, no. 3, pp. 309-320, 2011. 
[12] J. von Appen, M. Braun, T. Stetz, K. Diwold, and D. Geibel, “Time in 
the sun: the challenge of high PV penetration in the German electric 
grid,” IEEE Power and Energy M., vol. 11, no. 2, pp. 55-64, 2013. 
[13] P. Monigatti, M. Apperley, and B. Rogers, “Improved grid integration 
of intermittent electricity generation using electric vehicles for storage: 
A simulation study,” In Proceedings of the 2012 International Green 
Computing Conference (IGCC), IEEE Press, pp. 1-10, 2012. 
[14] A. Hellemans, “Creating Europe’s new backbone for efficient power 
distribution.” [Online]. http://www.youris.com/energy/energy-grid/ 
creating-europes-new-backbone-for-efficient-power-distribution.kl  
[Retrieved: Feb. 06, 2019].  
[15] B. B. Mandelbrot, Fractals: form, chance, and dimension, W. H. 
Freeman:  San Francisco, CA., 1977.  
[16] Z. Fan et al., “Smart Grid Communications: Overview of Research 
Challenges, Solutions, and Standardization Activities,” IEEE 
Communications Surveys & Tutorials, vol. 15, no. 1, pp. 21-38, First 
Quarter 2013.  
[17] T. Morstyn, A. Teytelboym and M. D. McCulloch, “Bilateral Contract 
Networks for Peer-to-Peer Energy Trading,” IEEE Transactions on 
Smart Grid, vol. 10, no. 2, pp. 2026-2035, March 2019.     
[18] C. Lo and N. Ansari, “The Progressive Smart Grid System from Both 
Power and Communications Aspects,” IEEE Communications Surveys 
& Tutorials, vol. 14, no. 3, pp. 799-821, Third Quarter 2012. 
[19] J. H. Saltzer, D. P. Reed, and D. D. Clark,  “End-to-End Arguments in 
System Design,” ACM Transactions on Computer Systems, vol.2, no. 
4, pp. 277-288, 1984. 
[20] J. Salom, J. Widén, J. Candanedo, I. Sartori, K. Voss, and A. Marzal, 
“Understanding net zero energy buildings: evaluation of load matching 
and grid interaction indicators,” In Proceedings of Building 
Simulation, vol. 6, pp. 2514-2521, 2011. 
[21] P. Torcellini, S. Pless, M. Deru, and D. Crawley, Zero energy 
buildings: a critical look at the definition,  National Renewable Energy 
Laboratory and Department of Energy, US. 2006. 
[22] M. Apperley, “Modelling energy balance and storage in the design of 
smart microgrids”, In Proceedings of Energy 2017, Barcelona, pp. 40-
45, 2017. 
[23] M. Apperley, P. Monigatti, and J. Suppers, “Grid-Lite: A network 
integrated semi-autonomous local area electricity system”,  In 
Proceedings of the 4th International Conference on Green IT Solutions 
(ICGreen 2015), Milan, Italy, SciTePress,  pp. 27-33, 2015. 
[24] G. Florea, O. Chenaru, D. Popescu and R. Dobrescu, “A fractal model 
for power smart grids,” In Proceedings of the 20th IEEE International 
Conference on Control Systems and Computer Science (CSCS), pp. 
572-577, 2015. 
 
 
 
 
 
 
 
 
 
17
Copyright (c) IARIA, 2019.     ISBN:  978-1-61208-713-9
ENERGY 2019 : The Ninth International Conference on Smart Grids, Green Communications and IT Energy-aware Technologies

