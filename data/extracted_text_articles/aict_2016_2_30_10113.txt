Implementation of an Energy Detection Based Cooperative Spectrum Sensing on 
USRP Platforms for a Cognitive Radio Networks 
Zdravka Tchobanova, Galia Marinova 
Faculty of Telecommunications,  
Technical University - Sofia 
Sofia, Bulgaria  
e-mail:{z.chobanova, gim}@tu-sofia.bg 
Amor Nafkha  
SCEE, 
CENTRALE-SUPELEC, 
 Rennes, France 
e-mail:amor.nafkha@centralesupelec.fr
 
 
Abstract— The paper describes a centralized cooperative 
spectrum sensing system, implemented on Universal Software 
Radio Peripheral (USRP) hardware platforms driven by the 
Genuinely Not Unix (GNU) Radio software. Spectrum sensing is 
realized by energy detection and a new block of energy detector 
with uncertainty is developed using GNU Radio out-of-tree 
implementation. A centralized scheme for cooperative spectrum 
sensing is applied  and a hard global decision is taken in a fusion 
center which collects the local decisions from secondary users, 
selects those of them which will be taken for global decision 
estimation and performs classical decision fusion logic, such as 
AND, OR, MAJORITY rules. Based on measured data, the 
probabilities of detection for different Signal-to-noise ratios 
(SNRs) are built for each secondary user and for different 
scenarios of cooperative sensing. 
 
Keywords — Cooperative Spectrum Sensing;, Energy Detector; 
Fusion center; USRP; GNU Radio. 
I. INTRODUCTION  
In cooperative spectrum sensing, multiple secondary users 
(SUs) cooperate to overcome the unpredictable wireless 
environment which includes multipath fading, shadowing, and 
noise power uncertainty. By exploiting the spatial diversity, it 
has been proven that cooperative spectrum sensing outperforms 
single-user sensing [1].  
In centralized cooperative sensing each local decision from 
SUs is collected in a central unit called fusion center (FC), 
which merges sensing data or local decisions and makes 
selection of the secondary users which will contribute to the 
global decision [13]. Then it takes a global decision through an 
algorithm often based on counting (voting), obtained by the 
classic logic rules such as AND, OR, MAJORITY applied on 
local decisions of SUs. The global decision is transmitted back 
by the FC to the SUs through a control channel.  Different 
schemes of cooperative sensing, as well as issues, are 
considered in [7]. Two stage cooperative sensing with coarse 
and accurate stages in perspective to reduce power 
consumption and sensing time is proposed in [8].  Hard and 
soft information combined algorithms for cooperative sensing 
are described in [9], whereas [10] focuses on hard decision 
solutions. A widely used technique for spectrum sensing is 
energy detection [2] [3] [12].  The impact of noise uncertainty 
on the energy detector performances is considered in [6]. 
Recent papers are proposing some hardware implementations 
of energy detector and cooperative spectrum sensing schemes. 
An implementation of energy detector on USRP is presented in 
[4]. An implementation of centralized cooperative spectrum 
sensing with two SUs, realized on USRPs is described in [5] 
and its functionality is illustrated through a video transmission. 
In [15], probabilities of detection in cooperative sensing system 
implemented with 3 USRPs with 3 scenarios are compared – 
individual sensing, hard (OR) and soft decision. In [16], a 
validation of the advantages of cooperative sensing over 
individual sensing is proposed, through a hardware set-up with 
2 SUs on USRPs and applying Roy’s Largest Root Test 
algorithm for sensing decision. Joint energy-and-bandwidth 
spectrum sensing with GNU radio and USRP is proposed in 
[11]. 
Kullback-Leibler 
distance-based 
optimization 
to 
determine the decision thresholds for cooperative sensing and 
its scalability with the number of SUs  is implemented in [14]. 
These implementations have quite limited applications and a 
more profound study is needed. 
The paper describes a centralized cooperative spectrum 
sensing system, implemented on USRPs hardware platforms 
using GNU Radio software. Spectrum sensing is realized by 
energy detection and a new block of energy detector with 
uncertainty is developed in GNU radio. A centralized scheme 
for cooperative spectrum sensing is applied and a hard global 
decision is taken in FC which collects the local decisions from 
SUs, selects those of them which will be taken for global 
decision estimation and performs AND, OR, MAJORITY 
estimates of the global decision. Based on measured data, the 
probabilities of detection for different SNRs are built for each 
SU and for cooperative sensing with different scenarios. 
The rest of the paper is organized as follows. Section 2 
describes the Energy detector used for spectrum sensing and 
the GNU radio block built. Section 3 describes the Cooperative 
spectrum sensing scheme applied, the experimental setup, 
based on USRPs, as well as GNU radio flowgraphs constructed 
for the FC global decision making. Section 4 presents 
simulation results based on measurements and processing in 
GNU radio. Section 5 contains conclusion remarks. 
II. ENERGY DETECTOR BLOCK WITH GHU RADIO 
A.  Theoretical aspects of energy detector 
The energy detector (ED) is based on the idea that if a 
signal is present in the channel, there will be significantly more 
energy than if signal is absent. The block diagram of ED is 
shown on Fig. 1. Detection technique is available for every 
29
Copyright (c) IARIA, 2016.     ISBN:  978-1-61208-473-2
AICT 2016 : The Twelfth Advanced International Conference on Telecommunications

primary user (PU), without knowledge about any PU’s signal, 
and it includes a threshold on the collected energy from the 
channel. The threshold is used by the ED to make the decision. 
 
 
 
 
 
 
Figure1. Energy detector’s block diagram 
The PU signal is modeled by a random signal s with 
additive white Gaussian noise (AWGN) w. The received signal 
y is sampled and it can be presented as a zero mean stationary 
Gaussian process with variance 2
w + 2
s . The noise samples are 
assumed as a random variable with mean zero and 
variance 2
w . The received signal detection at the SU can be 
specified as binary hypothesis: 
absent
signal is
w n
y n


[ ]
[ ]
H0 :
                        (1) 
present
signal is
w n
s n
y n
H



[ ]
[ ]
[ ]
1 :
 
 
.
,1 ...,
N
n 
 
where
y[n]
is the received signal, 
w[n]
is the additive noise, 
s[n]
is the PU signal, and N is the number of received samples 
corresponding to the length of the interval of interest. The 
signal received is only noise when H0 is true or signal plus 
noise when H1 is true. The test statistic Λ, is a sum of squared 
input samples and it is compared with the detection threshold λ: 




 

0
1
2
under
under
|)
| (
H
H
y n
Λ


                   (2) 
The ED threshold λ depends on the probability of detection 
Pd or the probability of misdetection Pmd or the probability of 
false alarm Pfa, which are defined and interconnected, as 
follows. 
]
|
[
H1
P
P
r
d
  

  
 
(3) 
]
|
[
H0
P
P
r
fa
  

  
 
(4) 
P
H
P
P
d
r
md
 
 

1
]
|
[
1

                (5) 
The choice of a suitable threshold is particularly important 
for good performance of the ED. If the threshold is too high, 
the SU can decide that there is free space in the spectrum when 
the PU signal is present, and its transmission will interfere with 
the PU transmission. If the value is too low, the detector will 
not react to the absence of a signal in the channel and the SU 
will then miss the opportunity to use the spectrum. 
 When the number of samples and the noise variance are 
known, the threshold is calculated with a constant false alarm 
probability Pfa. The IEEE 802.22 wireless regional area 
network (WRAN)  limits Pfa down to 10% [2]. In practice, the 
exact value of the noise variance is not always available and 
first the noise in the channel must be evaluated. 
Using the Central Limit Theorem (CLT) when N→∞, the 
test statistic Λ could be approximated by Gaussian distribution 
and evaluated, as follows:                             
)
2
2
2
(
w
N
w
Q
fa
P


 

 
 
 
(6) 
)
2)
( 2
2
2)
2
(
(
s
w
N
s
w
Q
d
P









 
 
 (7) 
When it has included uncertainty in the noise model [5], the 
Pd and Pfa are calculate by: 
)
)
(1
2
)
)
(1
(
(
2
2
w
w
N
Q
fa
P


 





 
 
(8) 
)
)
) 1
((1
2
)
) 1
((1
(
2
2
2
2
s
w
s
w
N
Q
d
P















  
   (9) 
where  
)
2
(
2
1
( )
x
erfc
Q x

 
 
 
(10) 
is the tail probability of the normal Probability density 
function. The parameter ρ defines the level of the noise 
uncertainty. The threshold can be calculated as follows: 
2 )) 2
)
1(2 1(
.2
1(
w
N
erf
a







            (11) 
2
2 ))
)
1(2 1(
2.
1(
w
N
erf







              (12) 
2Pfa )
1(1
2.erf
Q 1( Pfa )




        
 (13) 
where:  erf -1 is the inverse error function and   (resp. β) is 
the upper (resp. lower) false alarm probability. Then, if the test 
statistic Λ is greater than λα (resp. lower than λβ), the detector 
decide H1 (resp. H0). 
B. Energy detector block in GNU radio 
A new block of ED is developed and implemented in the 
GNU Radio Companion's libraries [17]. The input parameters 
of the ED block are the number of samples, the noise variance 
and the parameters   and β that specify the level of  
uncertainty. 
 
Figure 2. Block diagram of the experimental set-up for testing the energy 
detector 
The ED developed is tested, as shown on the block diagram 
of the experimental set-up from Fig. 2.  A signal generator 
SMY01 9 kHz – 1.040 GHz Rohde & Schwarz is used for 
RF Front 
End 
ADC 
F 
P 
G 
A 
 
Energy 
Detector 
USRP 
N210 
Signal 
Generator 
SMY01 
PC + GNU Radio 
 
USRP N210 
Daughterboard 
 
Test 
statistic 
Y (t) 
Decision 
Squaring 
device 
Average N 
samples 
Threshold 
30
Copyright (c) IARIA, 2016.     ISBN:  978-1-61208-473-2
AICT 2016 : The Twelfth Advanced International Conference on Telecommunications

transmitter. It is connected with broadcast antenna by Bayonet 
Neill–Concelman (BNC) coaxial cable. The generator is set to 
a frequency of 433MHz, with FM modulation with a deviation 
of 200 kHz. The generator provides different values of the 
transmitted signal in the range -30 dBm to 10 dBm with step of 
2 dBm. The receiver is implemented with USRP N210 of Ettus 
Research, connected to a PC via Gigabit Ethernet, installed 
with a GNU Radio. 
III. COOPERATIVE SPECTRUM SENSING SCHEME AND 
EXPERIMENTAL SET-UP USING USRPS AND GNU RADIO 
The system considered consists in a single PU and four 
SUs, all  located in a laboratory. One of the SUs - SU1 is put 
behind a screen. During the experience no change in noise 
conditions is considered. The SUs detect the spectrum for the 
presence of the PU signal and a FC takes the global decision 
after a preliminary selection of the PUs to be involved in the 
decision process. Hard decision combining rules are applied in 
the FC, for making decision about the presence of PU signal. 
The SUs make local decision and send 1 bit decision to the data 
FC. The FC combines sensing results and makes the global 
decision by AND, OR and MAJORITY rule. The function OR 
decides that the PU signal is present when any SU has reported 
“1”. The function AND decides that the PU signal is present 
when all SUs have reported decision “1”. In MAJORITY rule, 
if half or more SUs have reported a local decision “1”, FC 
decides that PU signal is present. The block diagram of the 
experimental set-up is shown on Fig. 3. Here, also a signal 
generator SMY01 9 kHz – 1.040 GHz Rohde & Schwarz is 
used as a transmitter. It is connected with broadcast antenna by 
BNC coaxial cable. The generator is set to a frequency of 
433MHz, with FM modulation with a deviation of 200 kHz. 
The generator provides values with different of the transmitted 
signal in the range – from 30 dBm to 10 dBm with a step of 2 
dBm/5 dBm. 
 
Figure 3. Block diagram of the model of cooperative sensing system 
The receivers are implemented with 4 USRP N210 of  Ettus 
Research, connected to a host personal computer (PC) via 
Gigabit Ethernet installed with a GNU Radio. 
Photos of the experimental set-up are shown and the 
flowgraph in GNU Radio for saving measurement data files at 
Fig. 4. Data are saved for 2 minutes at each emitted power. 
Fourteen files are created for each one of the 4 SUs. The first 
group of 4 measured files is obtained when signal is missing 
and only noise is received. The EDs in the SUs calculate in that 
case the noise variance 2
w   estimations. These estimations are 
used later as input data for each one of the EDs in the SUs. The 
values obtained are presented in Table I. 
TABLE I.             NOISE VARIANCE ESTIMATIONS 
2
w
 IN SUS 
SU 
SU1 
SU2 
SU3 
SU4 
σw
2 
14.7nW 
46.5nW 
43.6nW 
46.1nW 
 
Combining rule block diagrams for functions OR/AND 
applied for decision making in the FC are built in GNU Radio 
companion.  On Fig. 5  is shown the flowgraph for global 
decision taking in FC, using the function OR. The sequences 
emerging at the output of the detector are collected by the 
block File Sink and they are saved in files. The files are binary 
type, and they can be opened in MATLAB. The FC decisions 
for MAJORITY function are calculated in MATLAB. 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
Figure 4. Block diagram of the experimental set-up for testing the energy 
detector 
 
 
 
 
 
 
 
 
 
 
Figure 4. Experimental set-up for cooperative sensing and flowgraph in GNU 
Radio for saving measured data files 
IV. RESULTS FROM COOPERATIVE SPECTRUM SENSING BASED 
ON MEASUREMENT DATA 
The ED’s performance characteristic of the probability of 
detection Pd as a function of SNR is built, based on subsets of 
the first 700000 data of each file from the experimental file set 
for the 4 SUs. Fig. 6 presents the Pd(SNR) curves for all 4 SUs.  
 
SU1 
SU4 
SU2 
FC 
PU 
SU3 
Selection & 
Decision 
OR, AND, MAJORITY 
 
 
 
 
 
 
 
31
Copyright (c) IARIA, 2016.     ISBN:  978-1-61208-473-2
AICT 2016 : The Twelfth Advanced International Conference on Telecommunications

 
Figure 5. Flowgraph in GNU radio for global decision taking in a fusion center, using the function OR on the local decisions of SUs
 
 
 
Figure 6.  Pd(SNR) curves for all 4  SUs 
 
Figure 7. Pd(SNR) curves of  3 SUs  selected by  FC,   Pd(SNR) curves of FC 
using functions OR, AND, MAJORITY  and MATLAB  curve as reference 
32
Copyright (c) IARIA, 2016.     ISBN:  978-1-61208-473-2
AICT 2016 : The Twelfth Advanced International Conference on Telecommunications

The observation  of  the 4 curves show that 3 of the Pd curves 
for SU1, 2, 4 are typical ED curves and the Pd curve for SU3 is 
almost invariant. It’s a good illustration of the need of selection 
procedure in the FC for security and reliability reasons. 
Outliers and sharply differing curves have to be discarded to 
avoid skewed result for the global decision. 
Here, the criterion proposed in [12], for discarding SUs 
with invariant curves by the FC, before decision making, is 
applied. So, the global decision, taken by the FC is based on 
results from SU1, 2, 4. Three SUs, often used in  cooperative 
sensing experiments [7][15], are enough to give meaningful 
results for MAJORITY function, which is not possible with 2 
SUs [5][16].  
Three rules - OR, AND, MAJORITY combinations of the 
local decisions of the three SUs are experimented. Fig. 7 
presents the Pd(SNR) curves of the 3 SUs, selected by FC  and 
the Pd(SNR) curves of the FC when using functions OR, AND, 
MAJORITY on the local decisions of these 3 SUs. As it can be 
noticed, the OR function gives the best result in this particular 
experience. The yellow curve comes from simulation in 
MATLAB and it’s given as reference. The results on Fig. 7 are 
obtained after 100 minutes long simulation on a notebook. The 
results on Fig.7 fully correspond to theory. Functions OR and 
MAJORITY in FC decision allow to overcome the late 
detection from SU1 which is behind the screen. The 
MAJORITY curve is the closest to the MATLAB simulation 
curve and it's the recommended function for the FC since the 
risk in the OR function is that in case of false alarm in only one 
SU, it will be transmitted to the FC decision. 
V. CONCLUSION 
The paper presents the results of a research on the 
implementation on USRP and GNU Radio of cooperative 
sensing system with EDs. The experimental setup realized 
permits to perform experiments using different scenarios as 
OR, AND, MAJORITY rules for decision making in  FC on 
the basis of local decisions of SUs. More research on the 
performance of each function in cases of lower and higher 
thresholds in the EDs is foreseen. Special attention is given to 
selection function which is important to be included in the FC 
in order to discard outlying and misleading results, thus 
improving reliability and security of the system. Further work 
is foreseen focused on uncertainty influence and overcoming in 
cooperative sensing systems. 
ACKNOWLEDGEMENT 
 This research is partly supported by the project 
Bg:DRILA01/10/17.04.2015 
from 
Fund 
“Nauchni 
izsledvania”, Fr: Project №34281ZM. Additional information 
on the project can be found on www.phcrila15.free.bg. 
 
REFERENCES 
[1] S. Mishra, A. Sahai, and R. Brodersen, “Cooperative sensing 
among cognitive radios,” Proc. IEEE ICC 2006, vol.4, pp.1658-
1663, june 2006  
[2] S. Atapattu, Ch. Tellambura, and H. Jiang, “Energy Detection 
for Spectrum Sensing in Cognitive Radio”, Springer Briefs in 
Computer Science, pp. 11-26, 2014,  
[3] Sh.  Hossain,  I. Abdullah, and M. A. Hossain, “Energy 
Detection Performance of Spectrum Sensing in Cognitive 
Radio”, I.J. Information Technology and Computer Science, 
pp.11-17, November 2012.  
[4] A. Nafkha, M. Naoues, K. Cichon, and A. Kliks, “Experimental 
Spectrum Sensing Measurements using USRP Software Radio 
Platform and GNU-Radio”, CROWNCOM June 2014, Oulu, 
Finland, pp. 429- 434. 
[5] Y. Fu, D. Liu,  Zh. Li, and Q. Liu, “Implementation of 
Centralized Cooperative Spectrum Sensing Based on USRP”, 
International 
Conference 
on 
Logistics 
Engineering, 
Management and Computer Science, pp.962-966, May 2014. 
[6] S. Bahamou, et al., “Noise uncertainty analysis of energy 
detector: Bounded and unbounded approximation relationship,” 
in Proceedings of the 21st European Signal Processing 
Conference, , pp. 1-4, September 2013. 
[7] Ian F. Akyildiz, and B. F. Lo, R. Balakrishnan, “Cooperative 
spectrum sensing in cognitive radio networks A survey”, 
Physical Communication 4, March 2011, pp.40–62 
[8] N. Zhao, F. R. Yu, H. Sun, and A. Nallanathan, “Energy-
efficient cooperative spectrum sensing schemes for cognitive 
radio 
networks”, 
EURASIP 
Journal 
on 
Wireless 
Communications and Networking, pp.1-14,May 2013. 
[9] D.Teguig, B.Scheers, and V.Le Nir, “Data Fusion Schemes for 
Cooperative Spectrum Sensing in Cognitive Radio Networks”, 
Communications and Information Systems Conference (MCC), 
pp.1-7,October 2012 Military. 
[10] Sh. Hossain,  M. Rahman, I. Abdullah, and M. A. Hossain, 
“Hard Combination Data Fusion for Cooperative Spectrum 
Sensing in Cognitive Radio”, International Journal of Electrical 
and Computer Engineering , pp. 811-818, December 2012.  
[11] Y. Zhao, J. Pradhan, J.Huang, Y.Luo, and L.Pu, “Joint energy-
and-bandwidth spectrum sensing with GNU radio and USRP”, 
Newsletter ACM SIGAPP  Applied Computing Review,  pp.40-
49, December 2014.  
[12] J. D. Gadze, Oyibo, A. Michael, Ajobiewe, and N. Damilola, “A 
Performance Study of Energy Detection Based Spectrum 
Sensing for Cognitive Radio Networks”, International Journal of 
Emerging Technology and Advanced Engineering, pp.21-29, 
April 2014 
[13] H. Rifà-Pous, M. J. Blasco, and C. Garrigues, “Review of 
Robust Cooperative Spectrum Sensing Techniques for Cognitive 
Radio Networks”, Springer Science+Business Media, LLC, pp. 
175-198, November 2011. 
[14] D. Bielefeld, G. Fabeck, M. Zivkovic, and R. Mathar, 
“Optimization 
of 
Cooperative 
Spectrum 
Sensing 
and 
Implementation on Software Defined Radios”, Applied Sciences 
in Biomedical and Communication Technologies (ISABEL), 3rd 
International Symposium, pp.1-5, November 2010. 
[15] A. Haniz, M. Rahman, M. Kim, and J. Takada, ”Implementation 
of a Cooperative Spectrum Sensing System using GNU Radio 
and USRP”, IEICE General Conference, p.667, 2010 
[16] R.Yoshimura et al. “A USRP based scheme for cooperative 
sensing networks” IV Workshop de Redes de Acesso em Banda 
Larga (WRA), pp. 67-76,  May 2014.  
[17] GNU radio, the free and open software radio ecosystem, 
http://gnuradio.org/[retrieved:April, 2016] 
33
Copyright (c) IARIA, 2016.     ISBN:  978-1-61208-473-2
AICT 2016 : The Twelfth Advanced International Conference on Telecommunications

