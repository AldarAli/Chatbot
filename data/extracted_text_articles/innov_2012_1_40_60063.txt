Performance Evaluation of Load-Balancing Gateway Selection Method
in Multi-hop Wireless Networks
Shunsuke Fujiwara, Yuho Yamashita, and Miki Yamamoto
Faculty of Engineering Science
Kansai University
3-3-35 Yamate-cho, Suita-shi, Osaka, 564-8680 Japan
Email: {k787401,k848145,yama-m}@kansai-u.ac.jp
Abstract—In wireless multi-hop networks having multiple
gateways to an external wired network, a host should select
its connected gateway when it would like to communicate with
an outside host. One possible and simple way is minimum hop
gateway selection policy. In our previous study, we have already
revealed that when the minimum hop gateway is selected,
imbalance of trafﬁc distribution in a network causes signiﬁcant
performance degradation. Wireless communication channel
around the gateway is very important resource because all the
external trafﬁc goes through the gateway. So, in our previous
work, we proposed load-balancing gateway selection, which
takes account of not only trafﬁc intensity at a gateway but
also interference of wireless channel around a gateway. With a
simple scenario, we showed that our proposed method improves
gateway throughput performance. In this paper, we evaluate
our proposed method with more sophisticated model and show
that it improves throughput performance of load-concentrated
gateway. We also show that it surprisingly improves through-
put performance of not-load-concentrated gateway, i.e., this
gateway obtains more throughput even though the number of
its connected hosts is increased when our proposed method
is applied. Our performance evaluation in this paper newly
reveals that our proposed gateway selection method improves
total network throughput by signiﬁcantly reducing generated
control packets for route error recovery.
Keywords-Wireless Multi-hop Network; Gateway Selection;
Load Balancing.
I. INTRODUCTION
Wireless multi-hop networks enable wireless hosts to
communicate with each other by relaying packets at interme-
diate nodes, even when a destination host is located beyond
single hop wireless channel area. When a wireless host in a
wireless multi-hop network would like to communicate with
a wired host located outside a wireless multi-hop network,
packets should be transmitted through a wireless multi-hop
network to a gateway node, which is connected to a wired
network. For this gateway approach for expanding wireless
multi-hop networks, several schemes have been proposed.
For communication between a wireless host and the
gateway node, i.e., in a wireless multi-hop network part, two
approaches, a proactive approach and a reactive approach,
have been proposed. In a proactive approach [1]-[3], a
gateway node periodically broadcast a control packet and a
wireless host can identify its connected gateway. In a reactive
approach [4][5], a wireless host transmits a control packet
in a ﬂooding fashion, e.g., a RREQ (Route Request) packet
in AODV (Ad Hoc On Demand Distance Vector Routing)
[6], and a gateway node responses it. When a wireless host
receives this response packet, it can identify a gateway host
and can transmit data packets.
(a) NAT approach
(b) Mobile IP approach
Figure 1.
Communication through gateway node
For communication between the gateway node and a wired
host, i.e., in a wired network part, some mechanisms, which
enable a corresponding gateway to receive response packets
from a wired host, should be implemented. There have been
proposed several approaches, which make use of existing
networking technologies, Mobile IP [7] and NAT (Network
Address Translation) [4]. In NAT approach (Figure 1 (a)), a
gateway node behaves as a NAT router and exchanges source
or destination address in arrived packets. In this approach, a
node outside ad hoc network sends a packet to the designated
gateway, which means even when an ad hoc host moves and
the best gateway to be connected is changed, connection
between this host should be through this designated gateway.
In Mobile IP approach (Figure 1 (b)) [1]-[3], a gateway
node behaves as a foreign agent. Mobile IP approach can be
combined with the proactive approach in wireless network
part. This is because a wireless host should identify its
connected gateway in order to notify foreign agent change in
case of change in a connected gateway and only the proactive
approach enables a wireless host to identify its connected
19
Copyright (c) IARIA, 2012.     ISBN:  978-1-61208-244-8
INNOV 2012 : The First International Conference on Communications, Computation, Networks and Technologies

gateway. With this mechanism of notiﬁcation of connected
gateway, Mobile IP approach can be applied to the case of
mobility of hosts and is preferable for ad hoc networks.
MIPMANET (Mobile IP for Mobile Ad Hoc Networks)
[1] has been proposed as this Mobile IP approach. In
MIPMANET, when there are multiple candidate gateways
to be connected, a wireless host selects the shortest hop
gateway. In the proactive approach, all the gateway nodes
broadcast its advertized packet (control packet) and some
useful information for gateway selection can be conveyed
with this control packet.
We have already proposed load-balancing gateway selec-
tion [8], which takes account of not only trafﬁc intensity at
a gateway but also interference of wireless channel around
a gateway. Simulation results in previous paper showed that
our proposed method brings total throughput performance
improvement when it was applied only to the wireless
hosts, which have several candidate gateways of similar
hop distance. In our previous work [8], we used simple
simulation model of a square shape. In this model, there
are two gateways located at each of two opposed corners.
Hosts located close to the diagonal line have a tendency of
having similar hop distances to these two gateways. These
hosts with similar hop distance has great improvement of
throughput with gateway selection because of no (or small)
hop distance increase caused by a change of default gateway.
This means that it is not surprising that our proposed
method in this simple model improves gateway throughput
performance. In this paper, we would like to use more
general and sophisticated simulation model and show that
our proposed method generally improves throughput of load-
concentrated gateway. As our newly obtained performance
evaluation results in Section 4 shows, our proposed method
improves not only throughput of load-concentrated gateway
but also of other gateways. Even though the number of hosts
selecting these (other) gateways as their default gateway
increases with our proposed method, throughput of these
gateways are surprisingly improved. We newly reveal that
our proposed method can reduces generated control ﬂooding
packets, which greatly improved total network performance.
The paper is structured as follows. First, in Section 2,
we review the MIPMANET. In Section 3, we explain our
proposed method in detail. We evaluate performance using
our proposed method in Section 4. Finally, we conclude a
paper in Section 5.
II. MIPMANET
MIPMANET is one of examples, which combine proac-
tive approach in wireless part and Mobile IP approach
in wired part. Figure 2 shows overview of MIPMANET
behavior. In MIPMANET, a gateway node behaves as a
foreign agent of Mobile IP. Each wireless host has global IP
address, which is assigned at its home location. A gateway
node periodically broadcast an advertizing packet, which
Figure 2.
Packet ﬂow in MIPMANET
includes its IP address and some information useful for
gateway selection. When each wireless host receives this
advertizing packet, it selects one adequate gateway, called
default gateway. And a wireless host notiﬁes to its home
agent and registers this default gateway as a foreign agent.
Wireless multi-hop networks are generally constructed
with hosts with global IP address without shared subnet
part. So, when wireless host A would like to communicate
with host B, it should ﬁrst identify whether host A is inside
its belonging wireless multi-hop network. Wireless host A
can identify by sending RREQ packet of AODV in ﬂooding
fashion. When host B exists inside the same wireless multi-
hop network, RREP (Route Reply) will be replied by host
B. When host A cannot receive any RREP message even
with sufﬁcient latency, it can identify that host B is outside
its wireless network. In this case, host A encapsulate data
packet (to B) and transmits it to its default gateway. When
default gateway receives this encapsulated packet, it de-
capsulates it and transmit this data packet (to B) simply
to host B. Host B simply replies to host A of its global
IP address, which means this replied packet is forwarded
to home agent. Home agent forwards this replied packet to
default gateway (foreign agent) of host A by encapsulation.
When default gateway receives this forwarded reply, it de-
capsulates it and forwards it to host A (by using AODV
RREQ ﬂooding).
In MIPMANET, when there are multiple gateways in a
wireless multi-hop network, all wireless hosts receive an
advertizing packet from each gateway. Advertizing packets
can convey hop count, which is incremented at each relay
node, so a wireless host can identify its hop count to
each gateway. MIPMANET [1] has proposed minimum-
hop gateway selection policy. However, with minimum hop
gateway selection policy, geographical imbalance of gen-
erated trafﬁc may cause trafﬁc load imbalance at gateway
nodes. A gateway node has generally a tendency of trafﬁc
concentration because all external trafﬁc goes through it,
so trafﬁc load imbalance will couse serious performance
degradation.
20
Copyright (c) IARIA, 2012.     ISBN:  978-1-61208-244-8
INNOV 2012 : The First International Conference on Communications, Computation, Networks and Technologies

III. LOAD BALANCING GATEWAY SELECTION
In this section, we explain about our previously proposed
gateway selection method [8], cost function, which takes
account of trafﬁc load and wireless channel contention and
our gateway selection method.
A. Cost Function
First, we deﬁne cost function of gateway node i affected
by host k, Cki, as follows.
Cki =
hki

h=1
h−1
(1)
where hki is the number of hops between host k and gateway
node i.
When there exist ni wireless hosts connected to gateway
node i, we deﬁne total cost of gateway node i, Ci, as follows.
Ci =
ni

k=1
Cki
(2)
Each gateway node can obtain the number of hops, hki, by
receiving RREQ packet from active hosts. It calculates total
cost of gateway i, Ci, and distributes this calculated total
cost to all hosts by broadcasting periodically an advertizing
message. In equation (1), we considered wireless channel af-
fection around the gateway node is approximately inversely
proportional to distance to the gateway node. For details of
our cost function, please refer to our previous paper [8].
B. Gateway Selection Method
When each host receives advertizing message from mul-
tiple gateways, it calculates new gateway costs. New gate-
way cost consists of gateway costs brought by currently
connected hosts (gateway costs explained above), and costs
brought by the corresponding host.
Figure 3 depicts one example of cost calculation and
gateway selection. In Figure 3, two gateways, GW1 and
GW2, have 4 and 2 connected hosts, respectively. When
a focused host (gray colored one) would like to send data
to an external host, it should select an adequate gateway.
Figure 3.
Load-balancing gateway selection
In this example, total gateway cost of GW1 and GW2
is 5.33 (=1/3+2*(1/2)+3*(1/1)+1/1) and 2.5 (=1/2+1/1+1/1),
respectively. Focused host’s hop count to GW1 and GW2
is 2 and 3, respectively. So, when this host is connected
to GW1, total cost of GW1 is 6.83 (=5.33+1/2+1/1). When
this host is connected to GW2, total cost of GW2 is 4.33
(=2.5+1/3+1/2+1/1). So, this focused host selects GW2
because GW2 gives smaller cost as its own default gateway.
As shown in this example, each host selects gateway node
giving minimum total cost. This cost function takes account
of not only trafﬁc load but wireless channel contention
around the gateway node. So, with this minimum cost gate-
way selection, throughput performance of communications
through gateway node can be improved.
C. Threshold for Hop Count Difference
Li et al. [9] shows that throughput performance of wireless
multi-hop session is seriously degraded with increase of the
number of hops. When a gateway selection policy gives
selection of a distant gateway, throughput performance might
not be improved. In extreme case of selecting extremely
distant gateway, throughput performance through gateway
node may be degraded seriously, which means a gateway
selection might bring worse throughput.
To prevent this situation, we restrictively apply our gate-
way selection policy to subset of gateways. We restrict
candidate gateways as the following way. When there are
multiple gateways (candidate gateways), hop count of the
shortest gateway is set as baseline of gateway selection.
Gateway nodes whose hop count is within threshold when
compared with this baseline, are candidate of gateway selec-
tion. Other gateways are not candidate to be selected. For
example, when hop count to GW1, GW2 and GW3 is 2,
3 and 4, respectively, and threshold is 1, only GW1 and
GW2 are candidates. GW1 is the shortest gateway and its
hop count is 2, so 2 is baseline. GW2 is within threshold
when compared with this baseline (3=2+1), so GW2 is also
a candidate. However, GW3 is outside of threshold from
the baseline, so GW3 cannot be a candidate. When there is
only one candidate, i.e. only the shortest gateway nodes in
a candidate and other nodes are not inside the threshold, a
host simply selects the shortest gateway node.
IV. PERFORMANCE EVALUATION
In this section, performance of our proposed method is
comparatively evaluated with the minimum-hop gateway
selection. We would like to use more general and so-
phisticated simulation model and show that our proposed
method generally improves throughput of load-concentrated
gateway.
A. Simulation Model
For simulation tool, we use Qualnet 4.5 [10]. In order
to evaluate basic performance of our proposed method,
we use a static model where no mobility of hosts are
considered. Semiautomated node placement model (called
21
Copyright (c) IARIA, 2012.     ISBN:  978-1-61208-244-8
INNOV 2012 : The First International Conference on Communications, Computation, Networks and Technologies

in Qualnet) where square ﬁeld is divided into cells and one
host is located randomly in each cell, in used for node
placement. When we use pure random model, there may
be some heterogeneity of connectivity among wireless host.
We would like to avoid evaluating our proposed method in
this extremely heterogeneous situation, so semi-automated
node placement, which avoids extremely heterogeneous host
location is used.
Figure 4.
Simulation model (3 gateway)
Table I
SIMULATION PARAMETER
number of gateway
3
packet size
512 [byte]
number of node
60
packet interval
100 [msec]
wireless band
2 [Mbps]
advertisement interval
5 [sec]
radio range
250 [m]
simulation time
1000 [sec]
In this paper, we use a new network model as shown in
Figure 4. One gateway node is located at the center of each
square area, thus totally there are 3 gateway nodes. In each
square area, 20 wireless hosts are located randomly with
semi-automated node placement model. So, there are totally
60 wireless hosts in a whole network. GW advertisement
is broadcast every 5 second. Each host is assumed to have
exponentially distributed active time and holds communica-
tion to outside area through a gateway during this active
time period. Inactive time period is also assumed to have
exponential distribution and each host is alternately in each
of active or inactive time.
We assume imbalanced trafﬁc model where there are 4
active hosts in Area 1 and Area 3, and 16 active hosts in
Area 2 on average. So, in Area 1 and Area 3, average active
time and inactive time is 2.5[sec] and 10.0[sec], respectively.
In Area 2, average active time and inactive time is 10.0[sec]
and 2.5[sec], respectively. So, in this trafﬁc model, Area 2
has more generated trafﬁc than Area 1 and 3.
Figure 5.
Gateway throughput characteristics
　 (a) GW1
　 (b) GW2
　
(c) GW3
Figure 6.
Throughput characteristics of each GW
Figure 7.
Average Number of Session
Figure 8.
Average Number of Hop
MAC and routing protocol is IEEE 802.11DCF and
AODV, respectively. Other simulation parameters are shown
in Table 1.
B. Gateway Throughput
In this section, performance of our proposed method is
comparatively evaluated with the minimum-hop gateway
selection. Figure 5 shows total throughput performance of
our proposed method. vertical axis shows total throughput of
3 gateway nodes. Horizontal axis shows threshold deﬁned in
Section III.C. The dotted line in this ﬁgure is total through-
put of the minimum-hop gateway selection. As shown in
this ﬁgure, total throughput of our method of threshold=1
22
Copyright (c) IARIA, 2012.     ISBN:  978-1-61208-244-8
INNOV 2012 : The First International Conference on Communications, Computation, Networks and Technologies

Figure 9.
Normalized throughput of each node
Figure 10.
The number of RREQ sent by each node
Figure 11.
The number of RREQ relayed by each node
is improved approximately 31% when compared with the
minimum-hop gateway selection.
In Figure 6 (a), (b) and (c), we show respective throughput
of GW1, GW2 and GW3. Figures 7 and 8 show average
number of session and hop in our proposed method, re-
spectively. In a simulation model in this paper, more nodes
generate trafﬁc in Area 2 and more trafﬁc is generated here.
As threshold increases, the number of sessions arranged to
each gateway is more balanced, as shown in Figure 7. This
means from the viewpoint of load balancing, large threshold
is preferable. However, as shown in Figure 8, the number
of hops for each session increases with increase of the
threshold. In ad hoc networks, increase of hops leads to
signiﬁcant throughput degradation. So, as shown in Figure
6, total throughput of GW1 and GW2 with larger threshold
than 1 is degraded even though the number of its connected
sessions is increased.
In the evaluation of our proposed method, hereafter, we
use the best parameter value of threshold=1.
C. Detailed discussion for throughput performance
In this section, we evaluate throughput characteristics
for each host. Figure 9 shows normalized throughput char-
acteristics of each host. Vertical axis shows throughput
23
Copyright (c) IARIA, 2012.     ISBN:  978-1-61208-244-8
INNOV 2012 : The First International Conference on Communications, Computation, Networks and Technologies

Figure 12.
The number of souces v.s. gateway throughput characteristics
normalized with generated trafﬁc volume. Horizontal axis
shows node number. The number in parenthesis is hop
count difference between the closest gateway and the second
closest one. The node ID is allocated in the order of this
number. In our simulation model, more active source hosts
are located in Area 2 than other two areas, Area 1 and Area
3. In our proposed method, Area 2 trafﬁc around the edge
will be induced to other areas with load balancing effect. So,
reduction of trafﬁc intensity to GW2 is expected to improve
throughput performance of all nodes in Area 2. Simulation
results shown in Figure 9 conﬁrm this load balancing effect
in Area 2.
Figures 10 and 11 show RREQ generation characteristics
and RREQ relay characteristics, respectively. As shown
in Figure 10, the number of generated RREQ packets is
generally decreased with our proposed method. This leads
to great improvement of RREQ relay performance. With
load balancing effect, some trafﬁc concentrated to GW2 in
minimum hop selection is shifted to other gateways. This
leads increase of trafﬁc intensity in Area 1 and Area 3. In
ad hoc networks, increase of trafﬁc generally causes decrease
of normalized throughput even though absolute throughput
increases. However, as shown in Figure 9, our proposed
method can slightly increase normalized throughput in Area
1 and Area 3 even though trafﬁc intensity to these two areas
is increased. This surprising results are brought by decrease
of control packets, i.e., generated and relay RREQ shown in
Figures 10 and 11.
Figure 12 shows total throughput characteristics. In this
evaluation, number of active sources in Area 2 is changed
as simulation parameter and is horizontal axis of Figure 12.
Vertical axis shows total throughput of the whole network,
i.e., summation of GW1, GW2 and GW3 throughput. As
shown in this ﬁgure, with our proposed method, concentrated
trafﬁc to Area 2 is adequately guided to other areas by load
balancing effect, so the number of sources giving maximum
throughput is shifted from 12 to 14. This means Area 2 can
include more sources in our method.
Newly revealed features of our proposed method are as
follows:
• Improvement in normalized throughput is obtained not
only in heavy-loaded area but also in light-loaded area
because of reduction of control overhead.
• This surprising win-win relationship for heavy-loaded
and light-loaded area improves also total throughput of
the whole network.
V. CONCLUSION
In this paper, our proposed method is comparatively eval-
uated with the minimum-hop gateway selection policy in a
new topology. Our simulation results show that our proposed
method takes into account gateway load balancing and
improves total throughput with threshold 1. We revealed that
our proposed method improves not only load-concentrated
gateway throughput but also other gateway’s throughput. We
carefully investigated a reason for its throughput improve-
ment and reveal that our proposed method can reduce the
number of generated RREQ ﬂoodings and thus improves
throughput performance of all hosts in a whole multi-hop
wireless network.
REFERENCES
[1] U. Johnson, F. Alriksson, T. Larsson, P. Johansson, and G. Q.
Maguire Jr, “MIPMANET - Mobile IP for Mobile Ad Hoc
Networks,” in Proc. ACM MobiHoc, pp. 75-85, Aug. 2000.
[2] M. Ergen and A. Puri, “MEWLANA-MOBILE IP: Enriched
Wireless Local Area Network Architecture,” in Proc. VTC
’02-Fall, pp.2449-2453, Spt. 2002.
[3] R. Wakikawa, J. T. Malinen, C. E. Perkins, A. Nilsson, and
A. J. Tuominen, “Global Connectivity for IPv6 Mobile Ad
Hoc Networks,” draft-wakikawa-manet-globalv6-05.txt. Mar.
2006.
[4] P. Engelstad and G. Egeland, “NAT-based Internet connec-
tivity for on-demand ad hoc networks,” in Proc. WONS, pp.
344-358, Jan. 2004.
[5] M. Michalak and T. Braun, “Common Gateway Architecture
for Mobile Ad-Hoc Networks,” in Proc. WONS, pp.70-75,
Jan. 2005.
[6] C. E. Perkins, E. M. B. Royer, and S. R. Das, “Ad Hoc On De-
mand Distance Vector Routing,” draft-ietf-manet-aodv13.txt.
Feb. 2003.
[7] C. E. Perkins, “IP Mobility Support for IPv4,” IETF
RFC3344, Aug. 2002.
[8] K.Tada and M.Yamamoto, “Load-balancing Gateway Selec-
tion Method in Multi-hop Wireless Networks,” in Proc. IEEE
GLOBECOM, Nov./Dec. 2009.
[9] J. Li, C. Blake, D. S. J. D. Couto, H. Lee, and R. Morris,
“Capacity of Ad Hoc Wireless Networks,” in Proc. ACM
MobiCom, pp.61-69, Jul. 2001.
[10] http://www.scalable-networks.com/ [retrieved: Aug, 2012]
24
Copyright (c) IARIA, 2012.     ISBN:  978-1-61208-244-8
INNOV 2012 : The First International Conference on Communications, Computation, Networks and Technologies

