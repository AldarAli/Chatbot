SU 2.0: A Marketable Low-Power Wireless
Sensing Unit for Hydration Automation
Navid Shaghaghi, Nicholas Kniveton, Jesse Mayer, Will Tuttle, and Peter Ferguson
Ethical, Pragmatic, and Intelligent Computing (EPIC) Laboratory
Santa Clara University, Santa Clara, California, USA
{nshaghaghi, nkniveton, jdmayer, wtuttle, pferguson}@scu.edu
Abstract—The status of crops, water tanks, and various other
components of modern agricultural irrigation systems can be
sensed and valves and pumps can automatically be actuated to
ensure the distribution of adequate water to all parts of the
system. In previous work, we have discussed the design and
implementation of low cost, small factor, and sustainable Sensing
Units (SUs) which use ultrasonic sensors to measure the available
empty space in a water tank and communicate the water levels
to the Actuating Unit (AU) they are assigned to, so that the AU
can operate the valves and/or pumps necessary to send the exact
amount of water needed to restore the tanks’ designated water
levels. There, we indicated that a future step is the redesign
of the circuitry in order to shrink the overall size of the SU,
increase its energy efﬁciency, and enable the addition of new
environmental sensors such a temperature sensors that can warn
the users or take automated action when the freezing of the water
in the tanks is predicted and/or sensed. Also, in previous work
we have discussed the design and 3D Printing of a water proofed,
cost effective, and environmentally friendly custom encasement
for the SUs and indicated that a next step is to redesign the
internals of the SU casing in order to allow for the addition of new
components while reducing the size of the casing as an effort to
reduce the amount of material used and hence enhance the system
while further reducing the SUs’ cost. This paper is to report on
the success of all these steps and more which collectively enable
the production of a marketable smart agricultural environment
monitoring SU for irrigation automation.
Keywords–3D Printing; Agricultural Internet of Things (IoT);
Hydration Automation; Irrigation System; Sensing Units.
I.
INTRODUCTION
Outdoor Internet of Things (IoT) systems such as agricul-
tural automation systems require robust, compact, and reliable
nodes combined with algorithms that automate tasks and allow
these systems to operate well in the harsh environments they
are deployed in. Speciﬁcally, irrigation automation equipment
such as the Hydration Automation (HA) Sensing Units (SU)
[1] is often exposed to environmental elements such as direct
sunlight, humidity, extreme temperatures, and temperature
ﬂuctuations. To create a viable system, HA combined modular
and compact circuitry inside of a custom, 3D printed capsule
[2] that wirelessly communicated with the system’s actuators
through a robust communication subsystem utilizing a custom
in-house routing protocol called ˆAB [3], which is speciﬁcally
developed and ﬁne tuned. The original HA system, and its SUs
speciﬁcally, proved to be successful. However, the system had
room for improvement. By upgrading to more efﬁcient com-
ponents, creating a compact and modular design, and crafting
a custom 3D printed shell, the SU was upgraded into a much
more powerful IoT hardware system; and by packaging this
hardware with an advanced software and custom networking
protocol, HA was adapted to be a much more capable and
widely applicable IoT solution.
The rest of this paper is structured as follows: Section
II delineates the hardware changes and circuitry updates in
SU 2.0 and Section III details the updates to the system’s
communications subsystem. Section IV details the 3D printed
casing upgrades and includes waterprooﬁng test results. Sec-
tion V provides an update on the cost of the units due to the
hardware and casing upgrades. Sections VII and VI delineate
the work in progress and future steps in the evolution of
the SUs, respectively. And ﬁnally Section VIII provides some
concluding remarks.
II.
HARDWARE CHANGES & IMPROVEMENTS
As with nearly all IoT devices, size, capability, and power
are major constraints. The hardware changes made to the SU
2.0 bring the HA system closer to these ideals. These hardware
changes included redesigning hardware to be more compact,
adding a new sensor to increase capabilities of the SU, and
re-conﬁguring the architecture of the system to reduce power
usage.
A. Compact Layout
To accommodate narrow and tight spaces, the SU 2.0
was redesigned using a multi-layer, compact approach that
minimizes its mounting surface footprint.
The components of the SU include a Wisen Whisper Node
[4] board with an on-board LoRa (Long Range) commu-
nication module [5], a JSN-SR04t Ultrasonic Sensor [6], a
temperature sensor [7], a voltage regulator, a TP4056 battery
charge controller [8], a 5W lithium battery pack, and a 5V
100 mAh solar panel. To design the structure of the unit, the
components were divided into three groups:
1.
Components that are not upgradeable by the user and
are unlikely to need periodic replacement. These com-
ponents include the base PCB (Printed Circuit Board),
the charge controller, the step-up voltage regulator, the
temperature sensor, and the solar panel connector. All
of these have long lifespans which exceed the lifespan
of the SU. Hence, these components are all directly
soldered to the base PCB board.
2.
Components that do not need periodic replacement,
but that the user may wish to upgrade. These com-
ponents include the ultrasonic sensor and the Whisper
Node micro controller which includes a built-in LoRa
communications radio and Real Time Clock (RTC) for
33
Copyright (c) IARIA, 2021.     ISBN:  978-1-61208-814-3
AMBIENT 2020 : The Tenth International Conference on Ambient Computing, Applications, Services and Technologies

managing the micro controller’s, and as an extension,
the entire SU’s sleep cycles.
3.
Components that need periodic replacement. The only
component in this category is the battery, which has
a minimum lifespan of 2-3 years.
Grouping the components in this manner allowed the
SU 2.0 to be designed using multiple layers, with the non-
serviceable components on the bottom and the components
requiring periodic replacement on the top.
Since there are no user-replaceable or serviceable com-
ponents on the charge controller or temperature sensor, they
were soldered directly to the prototype board, creating the
ﬁrst layer. The Whisper Node board has software that can be
replaced, serviced, or upgraded by the user, but performing this
upgrade requires removing the board from the SU housing and
connecting it to a computer using a special FTDI enabled USB
to TTL Serial adapter. To accommodate software upgrades, the
Whisper Node board is mounted on the prototype board using
a set of female to male pin headers to allow for easy removal
without the need to desolder. The pin headers raise the height
of the Whisper Node enough to ﬁt it directly over the battery
charge controller and temperature sensor, minimizing space
and creating the second layer. The ultrasonic sensor is also
mounted on the second layer of the board using a set of female
to male pin headers to allow for easy removal and replacement.
This allows the user to perform upgrades on the SU 2.0, such
as replacing the current sensor with a more powerful sensor
or one better suited for liquids other than water.
The ﬁrst two layers of the unit were then placed into the
custom 3D Printed capsule. A 3D printed divider board was
then inserted on top of the ﬁrst two layers of the device and
screwed down to the capsule for secure mounting. The battery
was then placed on top of this divider board, creating the
third and ﬁnal layer. This separation allows the user to easily
replace the battery without risking damage to any of the ﬁrst
or second layer components. The SU is then enclosed by the
lid of the 3D printed capsule. The capsule lid includes a solar
panel holding bracket which securely mounts a solar panel that
provides power to the entire device and recharges the battery
during the day. Using this layout, a more compact SU was
designed and produced.
B. Energy Efﬁciency
A serious challenge for designing IoT devices is to ensure
all components are compatible with each other. One such
compatibility issue in the SUs is the operating voltage of the
components. Most components in the SU allow for a range of
input voltages except for two components which only operate
at immutable voltages: the ultrasonic sensor and the battery.
The lithium battery used in the SU has a nominal voltage of 3.6
volts, but the ultrasonic sensor only operates at 5 volts, creating
a need for a step-up voltage regulator (a.k.a. a boost converter).
The usage of the ultrasonic sensor with 3.6v was considered
and thoroughly tested. However, it was observed that the
range of the ultrasonic sensor was drastically reduced to well
below the requirements needed by the system. Therefore in
SU 1.0, a boost converter was installed directly after the
battery, essentially boosting the battery output voltage to 5v for
the entire system. This worked because the Whisper Node’s
nominal voltage range is between 3.3v and 5v. However, as
both the documentation of the Whisper Node and energy
usage testing by the authors show, the Whisper Node operates
less efﬁciently when it is powered with 5v instead of 3.3v.
This, in turn, led to an approximately 15% decrease in overall
system efﬁciency as everything was powered through the boost
converter. A 15% loss did not seem signiﬁcant initially because
a more powerful (and hence physically larger) solar panel was
installed. This however, became a problem for the SU 2.0
design because the size of the device is reduced dramatically,
and thus the original solar panel is bigger than the whole
device. This problem was addressed via a speciﬁc redesign
of the solar panel brackets on top of the casing, as will be
discussed in Section IV.
The solution explained above did not however, address
the fact that, over time, the 15% increase of energy usage
can reduce the battery’s lifespan by hours or even days. To
solve this issue, a more compact and efﬁcient step-up voltage
regulator is used to feed the ultrasonic sensor alone, rather than
the entire SU. Thus, the original voltage booster is eliminated
from the design, as can be seen in the SU’s updated circuit
diagram depicted in Figure 1.
Figure 1. HA SU 2.0 Schematic.
In SU 2.0, the battery is connected directly to the Whisper
Node board, which is capable of running at the battery’s
nominal 3.6v. This allows for the board to operate without any
inefﬁciencies. For the brief periods of time when the ultrasonic
measurements need to be taken, the Whisper Node sets a pin
to HIGH, activating the step-up voltage regulator which boosts
the voltage provided by the pin to the Ultrasonic Sensor to 5v,
allowing a measurement to be taken. After the measurement,
the Whisper Node pin is set to LOW, disabling the step-up
voltage regulator and thus the ultra sonic sensor in order to
conserve power.
Through the changes to the location of components in
the SU system, SU 2.0 operates 15% more efﬁciently than
SU 1.0. Thorough before and after testing was performed on
the HA power system through multi-week ﬁeld tests. While
the original HA SUs worked well when they had access to
sunlight, in situations where the solar panel did not have access
to sunlight (due to winter storms, a branch falling on top of
panel, etc.) the system would quickly drain in less than a week.
Due to the efﬁciency improvements made, SU 2.0 was able to
last well over a week, even with no access to solar power.
34
Copyright (c) IARIA, 2021.     ISBN:  978-1-61208-814-3
AMBIENT 2020 : The Tenth International Conference on Ambient Computing, Applications, Services and Technologies

C. Temperature Sensor
The HA system must be usable even when located in envi-
ronments where frigid temperatures result in the possibility of
water tanks freezing. Previously, HA had methods of detecting
anomalies, such as alerting a user about the possibility of a leak
when it detected an unexpected drop in a tank’s water level
reading coming from its SU. This error detection system was
reactive and not proactive; meaning it could detect problems
such as a tank level dropping after cold temperatures had
caused the tank to freeze and burst, but could not predict such
failures due to weather related events in advance and enable
preventative measures. To enable the SU to predict weather
related issues, a HiLetgo DHT11 Temperature and Humidity
Sensor module [7] was added to the SUs in order to provide
more sensing capabilities regarding weather and climate. By
analyzing data from the temperature sensor, the SU’s algorithm
can recommend actions to the user in advance. For example, if
the SU notices the temperature dropping below a threshold, it
can notify the user to drain the tanks to a lower level before the
tanks freeze and burst. This can also be automated if actuation
capabilities are directly added to each tank’s output valve.
However, this is beyond the designed capabilities of a sensing
only unit such as the HA system’s current SUs; and thus,
beyond the scope of this paper, except for a brief description
in Section VII below. Future direct communications between
SUs and local tank level AUs, or the addition of such local
actuation capability to current SUs is under consideration and
research by the HA research and development team.
III.
COMMUNICATION
SU 2.0 uses the custom ˆAB communication protocol [3]
to communicate with other nodes in the network, such as
Relay Units (RUs) and the base station. ˆAB is a protocol
designed from the ground up for IoT devices which takes
advantage of the devices’ sleep cycles in order to reduce
the overall energy usage of the system as a whole. ˆAB’s
original design is to provide network layer support (a.k.a.
routing) to IoT systems that utilize Semtech’s LoRa [9] as their
Link layer fOSI model’s combined Data Link and Physical
layers) communication protocol. However, ˆAB is built in a
modular and medium access independent manner as to allow
for its utilization with any existing Link layer protocol. For
instance, current efforts are under way by an international
team from Santa Clara University’s EPIC laboratory in the
United States and researchers from the Universiti Teknologi
MARA in Malaysia to utilize ˆAB as the Network layer protocol
for a water quality testing system under joint research and
development which uses the Zigbee protocol [10] at its Link
layer.
IV.
CAPSULE CHANGES & IMPROVEMENTS
The ﬁrst SU design in [1] utilized an off the shelf IP65
junction box [11], which is shown in Figure 2 on the right.
However, this design was not manageable long term as the
junction box is created with a very differed purpose in mind.
Junction boxes are installed within walls and hence out of the
elements for the most part. They have basic weatherprooﬁng
to protect against a water leak in the wall, but are not
designed to withstand storms, intense daily sunlight, or other
environmental abuse present on a farm or ranch. Hence, a
Figure 2. 3D printed capsule on left and original pre-fabricated capsule on
right.
custom 3D printed SU casing was developed [2], which is
depicted in Figure 2 on the left.
Even though this capsule was far more waterproof, sus-
tainable, and cost effective, it still was very large. As the
SU 2.0’s circuitry was shrunk in size, so arose the need to
shrink its custom casing. The SU’s latest capsule is thus much
smaller and even more waterproof than the previous model.
These alterations have majorly simpliﬁed the capsule, which
has in turn increased the waterprooﬁng and ease of use of the
system
A. Slide-In Front Wall
In the previous design, the capsule had middle and bottom
sections which met at the level of the cables in order to
completely seal the entry point and not force the cables to
bend. The third generation capsule was designed with a slide
in wall depicted in Figure 3a attached to the top section so
that the middle section could be removed completely, while
still enabling the cables exiting the box to be surrounded all
around.
(a)
(b)
Figure 3. (a) Display of the top section’s slide-in front wall. (b) Solar panel
is placed between mounting part and top lid to secure it.
B. Solar Panel Mounting
The second generation SU capsule was constrained in its
size by the 70 x 100mm solar panel mounted on its lid. In
order to reduce the size of the capsule further without changing
the solar panels, the mounting system shown in Figure 3b is
designed to mount screws along the shortest cross-section of
the panel instead of at the corners. This mounting system has
35
Copyright (c) IARIA, 2021.     ISBN:  978-1-61208-814-3
AMBIENT 2020 : The Tenth International Conference on Ambient Computing, Applications, Services and Technologies

thus enabled the mounting of any solar panel with a cross-
sectional size of 70mm or less, as shown in Figure 4. Ideally
though, as visible in Figure 4b, the capsule uses smaller 36 x
68mm solar panels akin in size to the panels used in the Relay
Unit (RU) capsules delineated in [2].
(a)
(b)
Figure 4. (a) SU enclosure with bigger solar panel mounted. (b) SU
enclosure with smaller solar panel mounted.
C. Battery Separator
The ﬁrst generation capsule simply housed everything
(including the battery) in one compartment [1]. The second
generation casing used a 3D printed grid to separate the battery
compartment from the circuitry and a custom 3D printed
drawer in order to provide easy access for battery replacement
[2]. The third generation capsule replaces the mesh and drawer
with a specialized battery separator that houses the battery
above the hardware, as can be seen in Figure 5. Curved ridges
near the edges of the battery separator ﬁrmly secure the battery
and make it easier for the user as the battery is situated at the
top of the capsule and can be easily clicked in and out of its
holder once the lid is removed. The battery separator slides
into two indents along the side and back walls in order to
keep it straight. In addition, a raised screw hole near the front
of the capsule enables the locking of the separator in place,
which also secures the PCB and hardware beneath it.
Figure 5. Battery separator situated above circuitry.
D. Waterprooﬁng
The SU capsules are intended for long-term use outdoors.
Thus, ensuring the waterprooﬁng of the system is one of the
biggest constraints for the SU’s casing. With this in mind,
Polyethylene Terephthalate Glycol (PETG) ﬁlament was used
in all parts, because it has been proven to be resistant to harsh
environmental elements such as rain, prolonged exposure to
sunlight, and even acidic conditions [12].
Many of the choices made when designing the third gener-
ation SU capsule were in order to maximize its impermeability.
Similar to the previous generation of SU capsules, the newest
design utilizes exterior overhangs to cover the joints between
the top and bottom sections. This ensures that the largest
opening in the capsule is more resistant to moisture.
Adding the slide-in front wall, however, required new
techniques for waterprooﬁng the opening. Similar overhangs to
the ones used on the top were added to the sides and the bottom
- where the slide-in wall connects. The cable openings for the
cables exiting the unit are thus not located at the bottom of the
slide-in wall, but rather designed to meet with the bottom of the
capsule at an elevated level so that the cables are surrounded
fully on both the top and bottom, as shown in Figure 6. A
protective wall was added behind the slide-in wall to ensure an
even higher level of protection against any water attempting to
enter the unit from the cable opening, as also shown in Figure
6.
(a)
(b)
Figure 6. (a) A secondary interior wall and external overhangs overlap with
attaching sections to prevent water from being introduced. (b) Opening
capsule shows moisture behind slide-in wall having been stopped by the
protective wall.
E. Waterprooﬁng Results
When the capsules are used in the real world, they will
either be afﬁxed to the top or side of water tanks or placed in
a raised position, so they will not be exposed to any puddling.
Therefore, when testing the SU capsules in the lab, a mounting
frame was designed that holds the capsule vertically off of the
ground. In order to simulate the existence of exiting cables
from the unit during water testing, 3D printed cable hole
stoppers were slid into each of the cable holes, as can be seen
in Figure 6b. The capsule was then exposed to a shower of
water at varying strengths and for varying duration of time
before being inspected for leaks. Figure 7a shows a capsule
right after water testing. Upon slowly removing the top section
from the bottom, moisture was discovered between the slide-in
front wall and the protective wall behind it, as can be seen in
Figures 6b and 7b. However, no water was able to enter the
capsule or interact with the circuitry, as is also seen in Figure
36
Copyright (c) IARIA, 2021.     ISBN:  978-1-61208-814-3
AMBIENT 2020 : The Tenth International Conference on Ambient Computing, Applications, Services and Technologies

7b. This proves the accurate functioning of the overhangs
and interior protective wall in protecting the circuitry from
moisture.
(a)
(b)
Figure 7. (a) Wet capsule mounted on vertical frame. (b) Interior overview
after water testing.
V.
COST ANALYSIS
The cost of developing an SU comes down to the 3D
printed casing and hardware (circuitry) used inside.
A. Hardware
The SU is produced with off the shelf components in order
to ensure low cost and ease of repair. This is especially impor-
tant for systems used in rural areas or developing couturiers
where repair of the system via the replacement of off the
shelf components is more feasible than enduring long shipping
times at high cost. Table I shows the cost breakdown of
each hardware component with the total price of the hardware
coming to $61.98. As the hardware is off the shelf, the prices
will ﬂuctuate and thus bring the total price lower or higher at
times.
TABLE I. DEVICE HARDWARE COST
Part
Price
Antenna
$5.35
Battery
$7.00
PCB
$0.10
RTC
$7.63
SMA female edge connector
$1.22
Solar Panel
$1.00
Standoff Header Pins
$0.25
Temp. and Hum. Sensor
$2.10
Ultrasonic Sensor
$3.71
Wires and connectors
$0.50
Whisper Node
$26.27
Total
$55.13
B. Casing
The parts for the third generation SU casing are all printed
using Prusament PETG [13], which is manufactured to have
a precision of 0.02mm, while most ﬁlaments on the market
have a precision of 0.05mm. All the capsule’s main sections
are printed at a resolution of 0.15mm in order to save time.
However, the screws and screw holes are printed at a resolution
of 0.05mm, so that their threading will be at the highest quality
possible.
As shown in Table II, the cost of manufacturing the capsule
is between $2.27 and $2.87 depending on whether the vertical
mount is included with the capsule or not. This is a massive
improvement over the previous capsule’s manufacturing cost
of $9.36, which is 75.75% less. Also, the original ABS
(Acrylonitrile butadiene styrene) IP65 junction box [11] used
for encasing the circuitry in the very ﬁrst SU was purchased
for $11.99, with a shipping cost ranging from $5.98 to $19.99
depending on the seller. Therefore, even for the lowest shipping
cost, 3D printing the latest capsule is 87.37% cheaper than the
prefabricated ABS box used in the original SU.
In addition to the direct reduction in manufacturing costs,
the reduction in 3D printing time is also signiﬁcant. The last
SU capsule took 34 hours and 19 minutes to print, while the
SU 2.0 capsule only takes 10 hours and 27 minutes. This adds
up to a 69.55% reduction in print time.
TABLE II. CAPSULE PARTS’ SPECIFICATIONS
Part
Mass (g)
Time (h,m)
Cost (P/A)
Battery Separator
5.87
42m
0.18
Body
45.89
5h, 40m
1.38
FH 5x3.5 m4 Nut (2)
0.16
13m
0.01
FH L8 m4 Screw (7)
0.84
49m
0.03
FH L12 m4 Screw (2)
0.32
18m
0.01
Lid and slid-in wall
19.56
2h, 49m
0.59
Solar Frame (36x68mm)
2.39
19m
0.07
Solar Frame (69x99mm)
3.56
27m
0.11
Vertical Mount
19.55
3h, 54m
0.59
Total with Vert. Mount
95.75
14h, 52m
2.97
Total without Vert. Mount
75.72
10h, 27m
2.38
VI.
WORK IN PROGRESS
A. Further Casing Upgrades
1) Magnetic Connectors: 3D printing small screws is time
consuming because they each need to be printed one by one.
They are not printed together in order to prevent PETG strings
between the screws that result from the hot print head moving
from screw to screw as it builds layers onto all of them one
by one before moving to the next layer on all of them. Also,
the screws do not have a long life expectancy if they are
removed and replaced more than several times. This is due to
the nature of additive manufacturing and the direction in which
the screws need to be built in. Since the screws are 3D printed
vertically, their tensile strength is weaker in that direction.
As a result, after multiple usages or if they are removed
too forcefully, they can snap and thus leave behind multiple
layers of their threading within the screw hole. Therefore, to
sunset the practice of using 3D printed screws, magnets are
being explored for connecting different sections of the capsule.
Currently, 4x3mm and 5x1mm magnets are being embedded
into the same locations where the screw holes were. This
further reduces the print time of the system and eliminates
the screw holes on the top section which provides even better
waterprooﬁng by limiting the number of possible entry points
for moisture even though these screw holes do not lead into
the circuitry chamber to begin with.
2) Addition of Gaskets: To guarantee waterprooﬁng in
situations where the SU may accidentally be submerged by
sitting in a puddle or being drooped into the tank during
installation or maintenance, gasket material and designs are
37
Copyright (c) IARIA, 2021.     ISBN:  978-1-61208-814-3
AMBIENT 2020 : The Tenth International Conference on Ambient Computing, Applications, Services and Technologies

under consideration by the research and development team.
The gaskets may be 3D printed using Flexible ThermoPlastic
Polyurethane (TPU) Filament which is known for its ﬂexibility
yet durability and resistance to even oils, greases, and a variety
of solvents [14]. These properties make TPU a great candidate
for 3D printing gaskets.
B. Remote bootloader over LoRa
Since the SUs are installed in remote rural locations, it
is not the easiest task to manually reset one in case of a
software glitch nor to update the ﬁrmware on them all when
updates are available. Therefore, a remote option for rebooting
the micro-controller ﬁrmware is essential for agricultural and
aquacultural applications to reduce the amount of truck roll
necessary. Furthermore, since SUs only contain LoRa connec-
tivity through ˆAB, a custom bootloader over LoRa that utilizes
ˆAB packages is needed and thus under development.
C. WiFi
The SU 2.0 also includes the option to communicate over
WiFi using ESP2866 [15] or ESP32 [16] modules. WiFi is
used when the SU is close to a WiFi network, such as with
a backyard or indoors water storage system. Having the WiFi
capability allows for the SU to be more easily integrated into
an existing network and negates the need for a base station in
a network with only one node.
VII.
FUTURE STEPS
A. Battery Charge Regulatory Policy
The SU’s current design does not include a battery charging
regulatory policy and charges the battery to its full capac-
ity. Recent studies have shown that battery lifetime can be
extended by avoiding full-battery charge cycles [17]. More
testing is still necessary to see how the SU’s battery is effected
in the long run.
B. Custom Printed Circuit Board (PCB)
In order to streamline and standardize the production of
the SUs, a custom Printed Circuit Board (PCB) is necessary
and well overdue. A custom PCB will substantially reduce the
points of failure as well as soldering time.
C. Security
IoT devices are in need of security similar to all other
internetworked devices. The security measures must protect
the hardware, software, and communication channels.
1) Physical: Even though the SUs are not expensive de-
vices, they can still be stolen or vandalized. To prevent the
theft of the SU as a whole, it can be secured into place using
tamper proof brackets and bolts. To prevent the circuitry from
being vandalized or altered, tamper proof bolts and lid opening
warning systems in the form of time stamped messages to the
base station can be utilized, respectively. Also, tamper proof
stickers can be added to the opening of the SU casing so any
unauthorized access to the internals of the SU can be detected,
at least after the fact.
2) Software: The SU tampering detection message to the
base station can easily be used as a means for potential
software tampering and can thus initiate a backup, bootloading,
or even disabling of the node until it is checked and reconﬁg-
ured. Furthermore, the SU can be programmed to not allow
any direct connections, and hence updates, without proper
authentication credentials.
3) Communication: All SUs must be preregistered with the
base station prior to deployment into the ﬁeld. If an SU is not
registered, then its request for assignment to an AU is ignored
by the base station; and hence, it will not be included in the
RUs’ responsibility table, as described in the ˆAB protocol [3].
Furthermore, to protect the base station from being manually
jeopardized to allow the malicious node onto the network, the
usage of a blockchain for the storage of all registered network
nodes is under consideration and research.
D. Potential Micro-controller changes
The current SU design utilizes a Wisen Whisper Node [4],
which includes an on-board LoRa transceiver and an RTC
chip. In order to further modularize the system, it would make
sense to separate the RTC and communication radio from the
microcontroller. This way, any update to the microcontroller
would not effect the other components and vice versa. Further-
more, this would enable the easy replacement of the Link layer
protocol in the SUs without the need for custom designs for
each protocol’s radio transceiver. The off the shelf component
currently under consideration is the AdaFruit Feather, which
comes in many forms such as the Feather M0 Basic Proto
[18], Feather M0 adlogger [19], and Feather M0 LoRa [20] if
it is decided to always include LoRa capability regardless of
other Link protocol additions. A further beneﬁt of the Feather
product line is that it has an open source design; and thus,
even if Adafruit stops the manufacturing of this product line,
compatible replacements will be producible.
E. Proactive Temperature Sensing
By combining data from the temperature sensor with
existing data captured by the system (such as water usage, time
of use, solar panel power production, etc.), HA can monitor
data trends and take action based on detected changes in order
to automatically water crops or disperse water to livestock in
the most efﬁcient and effective way possible. For example, if
the temperature sensor depicts a sudden drop in temperature
for an extended period of time, it can reduce the daily watering
rate of the crops, and thus save water. If the opposite occurs,
HA can increase the rate of watering to ensure crops are not
lost.
HA could also maintain a watering schedule which takes
into account the ambient temperature in order to provide more
water to livestock during the heat of the day, or to release
water for plants during the coolest times of the day to ensure
as much of the water is absorbed by the plants as possible and
minimize its loss to evaporation. Or, more infrequently, HA
could analyze and calculate how much to increase the water
ﬂow through the system during a heat wave or how much to
reduce it by, when it is raining.
The system needs to be able to make the decisions men-
tioned above in real time as they can have real world impacts
on the crops, livestock, and users. For example, when the
software detects a rapid drop in temperature occurring over
38
Copyright (c) IARIA, 2021.     ISBN:  978-1-61208-814-3
AMBIENT 2020 : The Tenth International Conference on Ambient Computing, Applications, Services and Technologies

an extended period of time, it should open valves at the
bottom of the tanks, allowing them to partially drain; as
any delay or mistake can result in irreparable damage to the
watering system and thus hardships for getting water to crops
or livestock; or worse, their loss which will have serious real
world consequences for the farmer. This sort of proactive
sensing (and actuating) of HA, therefore requires a measure
of automated decision making and a robust machine learning
mechanism.
VIII.
CONCLUSION
SU 2.0 has improved upon many limitations of the previous
iteration such as energy efﬁciency and size, while offering
new features such as improved waterprooﬁng and the addition
of temperature sensing. Through reducing the capsule’s size,
the 3D printing manufacturing time has also been reduced,
enabling greater production capacity. The SU improvements
reported in this paper have enabled the mass production,
real world deployment, and utilization of small form factor,
cost effective, and yet sustainable IoT SUs for Hydration
Automation systems. Even though many more improvements
and additions are under way or slated for future development
in Sections VI and VII above, the SU’s in their current state are
Minimal Viable Products (MVPs) marketable and utilizable in
the ﬁeld today.
ACKNOWLEDGMENT
Many thanks to Professor Michael McElfresh from the
Electrical Engineering Department at Santa Clara University’s
School of Engineering for his continued support of the project
in providing his ranch (Red Thistle Ranch [21]) and water
tanks as a test-bed for the Hydration Automation (HA) project.
Also thanks to Santa Clara University’s Frugal Innovation Hub
[22] for their help in seeking out funding for prototyping which
was generously obtained from EPICS in IEEE [23], in the form
of a starter grant to initiate the project. And thanks to the
Ciocca Center for Innovation and Entrepreneurship’s Bronco
Venture Accelerate (BVA) [24] at Santa Clara University for
seeing the potential in the HA system and its assistance in the
development of business plans and pitch decks for attracting
potential investments that could bring the HA system to the
market.
REFERENCES
[1]
N. Shaghaghi, P. Ferguson, J. Mayer, Z. Cameron, and B. Dezfouli,
“A low-power wireless sensing unit for hydro-system automation,” in
2019 IEEE 9th Annual Computing and Communication Workshop and
Conference (CCWC).
IEEE, 2019, pp. 0659–0665.
[2]
N. Shaghaghi and J. Mayer, “A sustainable 3d-printed casing for hydro-
system automation sensing units,” in 2019 IEEE Global Humanitarian
Technology Conference (GHTC).
IEEE, 2019, pp. 1–7.
[3]
N. Shaghaghi, Z. Cameron, N. Kniveton, J. Mayer, W. Tuttle, and
P. Ferguson, “ ˆAb: An energy aware communications protocol (eacp)
for the internet of things (iot),” in Workshops of the International
Conference on Advanced Information Networking and Applications.
Springer, 2020, pp. 877–889.
[4]
Wisen,
“Whisper
Node
-
LoRa,”
2018.
[Online].
Available:
https://wisen.com.au/store/products/whisper-node-lora
[5]
Semtech,
“SX1276
Transceiver,”
2018.
[Online].
Avail-
able:
https://www.semtech.com/uploads/documents/DS SX1276-7-8-
9 W APP V5.pdf
[6]
Makerguides.com,
“JSN-SR04T-2.0
20-600
cm
Ultrasonic
Waterproof
Range
Finder,”
2018.
[Online].
Avail-
able:
https://www.makerguides.com/wp-content/uploads/2019/02/JSN-
SR04T-Datasheet.pdf
[7]
Components101, “Dht11–temperature and humidity sensor,” 2020.
[Online].
Available:
https://components101.com/dht11-temperature-
sensor
[8]
NanJing Top Power ASIC, “TP4056 1A Standalone Linear Li-lon
Battery Charger with Thermal Regulation in SOP-8,” 2020.
[9]
Semtech, “SX1276/77/78/79 - 137 MHz to 1020 MHz Low Power
Long Range Transceiver,” 2015. [Online]. Available: https://cdn-
shop.adafruit.com/product-ﬁles/3179/sx1276 77 78 79.pdf
[10]
The
Zigbee
Alliance,
“Zigbee,”
2002.
[Online].
Available:
https://zigbeealliance.org/solution/zigbee
[11]
Amazon,
“LeMotech
ABS
Plastic
Dustproof
Waterproof
IP65
Junction Box Universal Electrical Project Enclosure White 5.9”
x 4.3” x 2.8”(150mmx110mmx70mm),” 2019. [Online]. Available:
https://www.amazon.com/gp/product/B075DHRJHZ
[12]
All
That
3D,
“PET
Filament:
Waterproof
and
Food-Safe
Material
Plastic
for
3D
Printing,”
2019.
[Online].
Available:
https://www.allthat3d.com/pet-ﬁlament/
[13]
Prusa
Research,
“TECHNICAL
DATA
SHEET
Prusament
PETG
by
Prusa
Polymers,”
2019.
[Online].
Avail-
able:
https://shop.prusa3d.com/en/index.php?controller=attachmentid
attachment=24
[14]
MatterHackers,
“Flexible
Filament,”
2019.
[Online].
Available:
https://www.matterhackers.com/store/c/ﬂexible-ﬁlament
[15]
Espressif,
“ESP8266EX
Datasheet,”
2020.
[Online].
Avail-
able:
https://www.espressif.com/sites/default/ﬁles/documentation/0a-
esp8266ex datasheet en.pdf
[16]
——,
“ESP32
Datasheet,”
2020.
[Online].
Available:
https://www.espressif.com/sites/default/ﬁles/documentation/esp32 data
sheet en.pdf
[17]
V. Agarwal, K. Uthaichana, R. A. DeCarlo, and L. H. Tsoukalas,
“Development and validation of a battery model useful for discharging
and charging power control and lifetime estimation,” IEEE Transactions
on Energy Conversion, vol. 25, no. 3, 2010, pp. 821–835.
[18]
Adafruit, “Adafruit Feather M0 Basic Proto,” 2020. [Online]. Avail-
able: https://cdn-learn.adafruit.com/downloads/pdf/adafruit-feather-m0-
basic-proto.pdf?timestamp=1603664705
[19]
——, “Adafruit Feather M0 Adalogger,” 2020. [Online]. Avail-
able: https://cdn-learn.adafruit.com/downloads/pdf/adafruit-feather-m0-
adalogger.pdf?timestamp=1603664717
[20]
——,
“Adafruit
Feather
M0
Radio
with
LoRa
Radio
Module,”
2020.
[Online].
Avail-
able: https://cdn-learn.adafruit.com/downloads/pdf/adafruit-feather-m0-
radio-with-lora-radio-module.pdf?timestamp=1603664735
[21]
Joanne
Weis,
“Red
Thistle
Ranch,”
2018.
[Online].
Available:
joanneweis.com/2016/02/23/red-thistle-ranch-livermore-ca
[22]
Santa Clara University, “Frugal Innovation Hub,” 2020. [Online].
Available:
https://www.scu.edu/engineering/labs–research/labs/frugal-
innovation-hub
[23]
IEEE,
“EPICS
in
IEEE,”
2019.
[Online].
Available:
https://epics.ieee.org
[24]
Santa Clara University, “Bronco Venture Accelorator (BVA),” 2020.
[Online]. Available: https://www.scu.edu/cioccacenter/bronco-venture-
accelerator
39
Copyright (c) IARIA, 2021.     ISBN:  978-1-61208-814-3
AMBIENT 2020 : The Tenth International Conference on Ambient Computing, Applications, Services and Technologies

