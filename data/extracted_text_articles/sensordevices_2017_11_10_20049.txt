Mobile Sensor System AGaMon for Breath Control: Thermo-cyclic Operation and
Numerical Signal Analysis of Ternary Gas Mixtures
Rolf Seifert and Hubert B. Keller
Institute of Applied Informatics (IAI)
Karlsruhe Institute of Technology
D-76344 Eggenstein-Leopoldshafen, Germany
e-mail: {rolf.seifert, hubert.keller}@kit.edu
Thorsten Conrad and Jens Peter
3S GmbH
D-66121 Saarbrücken
e-mail: {conrad, peter}@3S-ing.de
Abstract— An innovative mobile sensor system for breath
control in the exhaled air is introduced. In this paper, the
application of alcohol control in the exhaled air is considered.
This
sensor
system
operates
semiconducting
gas
sensor
elements with respect to the application in a thermo-cyclic
operation mode. This operation mode leads to so-called
conductance-over-time-profiles (CTPs), which are fingerprints
of the gas mixture under consideration and can be used for
substance
identification
and
concentration
determination.
Especially for the alcohol control in the exhaled air, ethanol is
the leading gas component to be investigated. But, there are
also other interfering gas components in the exhaled air, like
H2 and acetone, which may influence the measurement results.
Therefore, a ternary ethanol-H2-acetone gas mixture was
investigated. The establishing of the mathematical calibration
model and the data analysis was performed with a newly
developed innovative calibration and evaluation procedure
called ProSens 3.0. The analysis of ternary ethanol-H2-acetone
gas samples with ProSens 3.0 shows a very good substance
identification performance and a very good concentration
determination of the leading ethanol component. The relative
analysis errors for the leading component ethanol were in all
considered samples less than 9%.
Keywords--alcohol control; mobile sensor system; thermo-
cyclic
operation;
data
analysis;
substance
identification;
concentration determination.
I.
INTRODUCTION
There
is
a
broad
field
of
applications
of breath
monitoring in human health care, medical applications and
alcohol control. In this context, several approaches are
suggested [1]. In particular, metal oxide gas sensors (MOG)
can be used as appropriate candidates for breath control. This
is due to the fact that they are very sensitive, have good long-
term stability and are low in price.
But, on the other hand, when these sensor devices are
operated isothermally, they are not at all selective. That
means that they cannot be used for sophisticated analysis of
gas mixtures. Therefore, other approaches are necessary like
a gas sensor array of MOGs [2][3] or by thermo-cyclic
operation of the MOG and simultaneous sampling of the
conductance, which leads to so-called “conduction over time
profiles” (CTPs) [4]-[7].
These profiles give a fingerprint of the surface processes
with
the
gas
and
represent
the
gas
mixture
under
consideration. The gas specific features of the CTPs can be
used
for
component
identification
and
concentration
determination. At the Karlsruhe Institute of Technology
(KIT), many procedures were established to evaluate such
signal patterns [8], for batch-wise calibration of sensor
elements [9] and also for source localization [10].
In this paper, an innovative mobile sensor system
AGaMon (AtemGasMonotor, Breath Control Monitor) for
breath control in the exhaled air is introduced. Especially for
alcohol control, which is the investigated application in this
paper, ethanol is the leading component.
But, because other components like H2 and acetone may
also occur in the breathing air and may influence the
measurement
results,
ternary
ethanol-H2-acetone
gas
mixtures are considered. This is an important update to the
investigation performed in [11]. The analysis of these
samples is performed with the calibration and evaluation
program for ProSens 3.0, which is an integral component of
the sensor system.
In Section II, the mobile sensor system AGaMon is
described. A short outline of the calibration and evaluation
procedure ProSens 3.0 is given in Section III. In Section IV,
the data analysis for the application alcohol control with
ternary ethanol-H2-acetone gas mixtures is given, including
the
calibration
set
up,
substance
identification
and
concentration
determination
of
the
leading
component
ethanol. Section V summarizes the results of this paper.
II.
MOBILE SENSOR SYSTEM AGAMON
A.
Sensor System Platform and Adapter
For breath control in the air we exhale, especially for
alcohol control, an innovative sensor system platform
AGaMon was developed. Based on this platform, an adapter
for smartphones was developed for mobile monitoring of the
breathing air.
This adapter consists of a combined and modular
hardware- and software system, which runs an embedded
metal oxide gas sensor in a thermo-cyclic mode and which
determines
the
alcohol
content
on
the
basis
of
the
measurement results via an innovative calibration- and
evaluation procedure ProSens 3.0 in real time. The analysis
results will then be displayed on the smartphone.
The following Figure 1 shows a pre-release version of the
mobile sensor system.
109
Copyright (c) IARIA, 2017.     ISBN:  978-1-61208-581-4
SENSORDEVICES 2017 : The Eighth International Conference on Sensor Device Technologies and Applications

Figure 1.
Pre-release Version of the Mobile Sensor System.
B.
Electronics for Heater Control and Data Acquisition
In order to characterize and operate semiconducting gas
sensor elements with respect to the application, a sensor
platform was developed, which ensures a robust functioning
of hard- and firmware. This platform supports a variety of
commercially available metal oxide gas sensors. In this
investigation, the sensor MLV (MultiLayer Varistor) from
Applied Sensors [12] was used. Via its graphical user
interface, different parametriseable temperature cycles can
be configured.
Additionally, this system allows the sensors to be
exposed to several interfering gases like: H2S (which is the
leading component for halitosis), H2 (which is the leading
component for dyspepsia and food intolerance), NO (which
is the leading component for asthma) or Acetone (which is
the leading component for diabetes), thus covering almost all
significant aspects.
The core unit of the platform is a base-board with a
powerful micro-controller communicating with
external
modules in a master-slave-configuration. The base-board is
able to manage up to four gas sensor modules and features
ambient condition monitoring.
The platform outputs the sensor raw data (basically the
measured voltages), which can easily be transformed into
resistances or conductances or pre-calculated values for a
reduced data stream. Via USB, the platform is connected to a
standard PC where the data live visualization and the storage
is carried out. Via Bluetooth, the platform can be connected
to mobile applications running on smart phones.
For the measurements in this paper, a platform with the
following specifications was used:
•
The temperature control allows a set-point accuracy
of 2°C within an overall temperature range of 100 to
500 °C. The set-point can be updated every 10ms.
•
The read-out circuit features a sampling time of
better than 1ms.
•
Measurement voltage accuracy is around of 5 mV
(by using a 10-bit-ADC).
•
The dynamic range of the read-out circuit is between
1k and 100M.
C.
Temperature Cycle
Based
on
the
above-explained
electronics,
several
temperature cycles have been applied to the sensors while
being exposed to the gas mixtures.
Figure 2.
Thermo-cyclic (step-wise) temperature cycle.
For the experiments carried out in the scope of the
publication, the temperature cycle in Figure 2 has been
considered. It could be shown that this temperature cycle
provides the best analysis results regarding the application
under consideration.
III.
CALIBRATION- AND EVALUATION PROCEDURE
PROSENS 3.0
As mentioned above, the calibration- and evaluation
procedure ProSens 3.0 is included as an integral component
in the mobile sensor system. ProSens 3.0 is an updated
version of ProSens [13] to meet the requirements of this
sensor system and to analyze ternary gas mixtures. Similar to
ProSens, ProSens 3.0 consists of a calibration part and an
evaluation part.
Using
the
calibration
part
of
ProSens
3.0,
the
mathematical calibration model is calculated based on
calibration measurements. The mathematical calibration
model is a parametric model and only the parameters will be
transferred to the evaluation part of ProSens 3.0. This is very
important because all the time consuming calculations can be
performed off-line.
If an unknown gas sample is measured, the evaluation
part of ProSens 3.0 performs a substance identification and
concentration determination of the sample, based on the
calibration parameters. For substance identification, ProSens
3.0 determines a calculated CTP and compares this CTP with
the real measured CTP. Only if the distance of calculated
CTP and measured CTP is smaller than a pre-determined
decision threshold, ProSens 3.0 identifies the unknown
sample with the gas sample under consideration. In this case,
the concentration determination will be performed.
Substance identification is very important to avoid
misleading analysis results like false alarms.
110
Copyright (c) IARIA, 2017.     ISBN:  978-1-61208-581-4
SENSORDEVICES 2017 : The Eighth International Conference on Sensor Device Technologies and Applications

IV.
APPLICATION – ALCOHOL CONTROL IN THE EXHALED
AIR
As mentioned in Section II-A and Section II-B, the
mobile sensor system is suitable for a broad range of
applications for breath monitoring.
In this application, we turn the focus to the investigation
of the alcohol control in the exhaled air. In this context,
ethanol is the leading component. But, there are also other
interfering gas components in the air we exhale, like H2 and
acetone, which may influence the measurement results.
Therefore, ternary ethanol-H2-acetone gas mixtures are
investigated.
The measurements were performed with the sensor
system described in Section II using the cyclic variation of
the working temperature in Figure 2. The determination of
the mathematical calibration model and the data analysis
were performed with the included program ProSens 3.0.
A.
Calibration Set Up
In order to establish the mathematical calibration model
using the calibration part of ProSens 3.0, calibration
measurements with dosed concentrations of the ternary gas
mixtures have to be performed. The following Table 1 shows
the concentrations of the gas mixtures, which are used for
calibration.
TABLE I.
GAS SAMPLES USED FOR CALIBRATION
Ethanol-H2-
Aceton
in ppm
Ethanol-H2-
Aceton
in ppm
Ethanol-H2-
Aceton
in ppm
50-10-0,5
50-10-1,0
50-10-2,0
100-10-0,5
100-10-1,0
100-10-2,0
175-10-0,5
175-10-1,0
175-10-2,0
50-20-0,5
50-20-1,0
50-20-2,0
100-20-0,5
100-20-1,0
100-20-2,0
175-20-0,5
175-20-1,0
175-20-2,0
50-30-0,5
50-30-1,0
50-30-2,0
100-30-0,5
100-30-1,0
100-30-2,0
175-30-0,5
175-30-1,0
175-30-2,0
It can be seen that only 27 samples were used for
establishing the mathematical calibration model for the
ternary mixture. This is a very good result, because
calibration measurements are very time-consuming and
expensive.
B.
Data Analysis
To investigate the performance of the sensor system with
the evaluation procedure ProSens 3.0, 9 further ternary
ethanol-H2-acetone gas mixtures and a foreign substance
were measured in the same manner as the samples for
calibration and analyzed together with the samples of the
calibration process. The samples are given in Table 2.
The red marked samples are additionally measured
samples. The foreign substance is not listed in Table 2.
TABLE II.
GAS SAMPLES USED FOR EVALUATION
C.
Substance Identification
For substance identification, as already mentioned in
Section III, the calibration and evaluation ProSens 3.0
calculates the so-called calculated CTP and compares this
CTP with the real measured CTP.
Figures 3, 4 and 5 give a visual impression of calculated
CTPs and measured CTPs.
In Figure 3 and Figure 4, the calculated CTP (green line)
and measured CTP (red line) of ternary ethanol-H2-acetone
samples are plotted. It can be clearly seen, that the difference
between the two curves is in both cases very small. This
means that ProSens 3.0 recognizes that these samples are the
ternary gas mixtures under consideration.
Theoretical CTP and measured CTP for the foreign
substance are shown in Figure 5. In this case, the calculated
CTP is not so close to the measured CTP as in the case of the
ternary ethanol-H2-acetone gas mixtures. So, the difference
between the two curves is much larger. That means that
ProSens 3.0 recognizes that this sample is not the calibrated
ternary gas mixture.
Ethanol-
H2-Aceton
in ppm
Ethanol-
H2-Aceton
in ppm
Ethanol-
H2-Aceton
in ppm
Ethanol-
H2-Aceton
in ppm
50-10-0,5
175-10-0,5
135-20-0,5
100-30-0,5
50-10-1,0
175-10-1,0
135-20-1,0
100-30-1,0
50-10-2,0
175-10-2,0
135-20-2,0
100-30-2,0
100-10-0,5
50-20-0,5
175-20-0,5
135-30-0,5
100-10-1,0
50-20-1,0
175-20-1,0
135-30-1,0
100-10-2,0
50-20-2,0
175-20-2,0
135-30-2,0
135-10-0,5
100-20-0,5
50-30-0,5
175-30-0,5
135-10-1,0
100-20-1,0
50-30-1,0
175-30-1,0
135-10-2,0
100-20-2,0
50-30-2,0
175-30-2,0
111
Copyright (c) IARIA, 2017.     ISBN:  978-1-61208-581-4
SENSORDEVICES 2017 : The Eighth International Conference on Sensor Device Technologies and Applications

Figure 3.
Comparison of measured CTP and calculated CTP:
Ethanol 135ppm/H2 20ppm/Acetone 2ppm.
Conductance/S
Figure 4.
Comparison of measured CTP and calculated CTP:
Ethanol 135ppm/H2 30ppm/Acetone 1ppm.
Figure 5.
Comparison of measured CTP and calculated CTP of a Foreign
Substance.
TABLE III.
DIFFERENCE VALUES (BETWEEN MEASURED CTP AND
CALCULATED CTP)
Ethanol/H2(Aceton=0,5ppm)
10ppm
20ppm
30ppm
50ppm
0,0000
0,0001
0,0001
100ppm
0,0001
0,0002
0,0001
135ppm
0,0000
0,0041
0,0001
175ppm
0,0000
0,0000
0,0000
Ethanol/H2(Aceton=1,0ppm)
10ppm
20ppm
30ppm
50ppm
0,0003
0,0000
0,0001
100ppm
0,0000
0,0000
0,0000
135ppm
0,0003
0,0027
0,0133
175ppm
0,0003
0,0000
0,0001
Ethanol/H2(Aceton=2,0ppm)
10ppm
20ppm
30ppm
50ppm
0,0001
0,0001
0,0001
100ppm
0,0000
0,0004
0,0000
135ppm
0,0022
0,0022
0,0035
175ppm
0,0001
0,0000
0,0000
Foreign Substance
0,5706
Of course, the decision for substance identification is not
based on the visual impression. Therefore, a “difference
value” is calculated from the sum of quadratic differences of
every sample point of the measured CTP and the theoretical
CTP. Only if this difference value is smaller than a
predetermined decision value, ProSens 3.0 identifies the
unknown gas sample with the related calibrated gas mixture.
Table 3 shows the difference value for the gas samples.
In Table 3, the green highlighted rows correspond to the
difference values according to the ternary ethanol-H2-
acetone mixtures, the dark green rows to ternary samples
additionally measured for evaluation and the red row to the
foreign substance. The difference value according to the
foreign substance is 0.57 and much larger than the difference
values according to the ternary gas mixtures, which are in all
considered cases equal or smaller than 0.0035. Therefore, it
is evident that the difference values in the green rows are
smaller in dimensions than the difference value in the red
row.
112
Copyright (c) IARIA, 2017.     ISBN:  978-1-61208-581-4
SENSORDEVICES 2017 : The Eighth International Conference on Sensor Device Technologies and Applications

If the decision value is set, for example, to 0.1, there is
good discrimination between the difference values of the
ternary gas mixtures under consideration and the difference
value of the foreign substance. That means that ProSens 3.0
is able to perform a very good substance identification.
D.
Concentration Determination
After substance identification, ProSens 3.0 performs the
concentration determination of the gas samples, which were
identified as the ternary ethanol-H2-acetone gas mixtures. In
the application under consideration, ethanol is the leading
component. That means that only the concentrations of the
ethanol components of the ternary mixtures are essential.
The following Table 4 shows the calculated concentrations
of the ethanol component in comparison to the dosed values
of the ternary ethanol-H2-acetone gas mixtures.
TABLE IV.
ANALYZED CONCENTRATION VALUES FOR ETHANOL IN
PPM
Ethanol/H2(Aceton=0,5ppm)
10ppm
20ppm
30ppm
50ppm
49,6
49,1
51,2
100ppm
100,3
102,7
100,1
135ppm
131,5
141,0
133,8
175ppm
177,0
177,7
176,2
Ethanol/H2(Aceton=1,0ppm)
10ppm
20ppm
30ppm
50ppm
50,6
50,5
50,0
100ppm
102,1
99,0
99,8
135ppm
126,4
139,0
142,1
175ppm
174,7
174,0
172,7
Ethanol/H2(Aceton=2,0ppm)
10ppm
20ppm
30ppm
50ppm
49,7
49,9
49,0
100ppm
98,0
98,2
100,3
135ppm
128,0
136,2
123,5
175ppm
173,1
173,1
176,0
Next, Table 5 shows the relative analysis errors for the
estimation of the ethanol concentration of the ternary gas
mixture.
It can be seen that, in all cases, the relative analysis error
for the ethanol concentration is smaller than 9%. This is a
very good analysis result.
TABLE V.
RELATIVE ANALYSIS ERRORS FOR THE ETHANOL
DETERMINATION IN %
Ethanol/H2(Aceton=0,5ppm)
10ppm
20ppm
30ppm
50ppm
0,8
1,7
2,4
100ppm
0,2
2,7
0,0
135ppm
2,6
4,5
0,9
175ppm
1,1
1,6
0,7
Ethanol/H2(Aceton=1,0ppm)
10ppm
20ppm
30ppm
50ppm
1,2
1,0
0,0
100ppm
2,1
1,0
0,2
135ppm
6,4
2,9
5,3
175ppm
0,2
0,6
1,3
Ethanol/H2(Aceton=2,0ppm)
10ppm
20ppm
30ppm
50ppm
0,6
0,2
1,9
100ppm
2,0
1,8
0,3
135ppm
5,2
0,9
8,5
175ppm
1,1
1,1
0,6
Because ethanol is the leading component in this
application, only the estimation of concentration of the
ethanol
concentration
in
this
ternary
gas
mixture
is
important.
V.
CONCLUSION AND FUTURE WORK
An innovative mobile sensor system is developed, which
is able to run a variety of commercially available metal oxide
gas sensors in different parametriseable thermo-cyclic modes
and can be exposed to several gases in the exhaled air.
Therefore, this sensor system can be applied to several
applications. In the application under consideration in this
paper, the alcohol control in the exhaled air, ethanol is the
leading component. But, other interfering gases like H2 and
acetone may occur in the air we exhale. Therefore, ternary
ethanol-H2-acetone mixtures have to be considered and
analysed. The sensor system, equipped with the metal oxide
sensor MLV from Applied Sensors, operated in step-wise
thermo-cyclic mode and with the incorporated advanced
calibration and evaluation procedure ProSens 3.0, is an
appropriated and powerful tool for this application. The
analysis shows that very good substance identification can be
achieved and the relative analysis errors of the concentration
113
Copyright (c) IARIA, 2017.     ISBN:  978-1-61208-581-4
SENSORDEVICES 2017 : The Eighth International Conference on Sensor Device Technologies and Applications

determination for the leading component ethanol is in all
considered cases less than 9%, even in the presence of
interfering gases like H2 and acetone.
The above obtained analysis results are based on
measurements in the laboratory. In future work, the sensor
system will be applied to field tests to prove the performance
of the system not only to laboratory data. First tests in this
area showed promising results.
Furthermore, the sensor system will be enhanced and
adapted to further applications in the exhaled air like
diabetes, asthma and halitosis. This would enable the sensor
system to cover almost all significant aspects in human
health care and medical applications.
ACKNOWLEDGMENT
This work is financially supported by the Central
Innovation Program for small and medium-sized enterprises
(SME) of the German Bundesministerium für Wirtschaft und
Technologie (BMWi).
REFERENCES
[1]
K. H. Kim, S. A. Jahan, and E. Kabir, “A review of breath
analysis for diagnosis of human health”, TrAC Trends in
Analytical Chemistry, Volume 33, pp. 1–8, 2012.
[2]
P. Althainz, J. Goschnick, S. Ehrmann, and H. J. Ache,
“Multisensor Microsystem for Contaminants in Air”, Sensors
and Actuators B: Chemical, 33, 1-3, pp. 72-76, 1996.
[3]
V. V. Sysoev, I. Kiselev, M. Frietsch, and J. Goschnick,
“Discrimination Power of a Metal- Oxide Thin-Film Sensor
Microarray”, Sensors, 4, pp. 37-46, 2004.
[4]
A. Jerger, H. Kohler, F. Becker, H. B. Keller, and R. Seifert,
“New applications of tin oxide gas sensors II. Intelligent
sensor system for reliable monitoring of ammonia leakages”,
Sensors and Actuators B: Chemical, 81, 2-3, pp. 301-307,
2002.
[5]
K. Frank et al., “Metal oxide gas sensors for field analysis:
Novel SnO2/La2O3 sensor element for analysis of dissolved
toluene/ethanol binary mixtures”, Sensor 2005: 12th Internat.
Conf., Nürnberg, May, 2005, Proc. Vol. 2, AMA Service
GmbH, Wunstorf, pp. 207–209, 2005.
[6]
K. Frank et al., “Improving the analysis capability of tin oxide
gas sensors by dynamic operation, appropriate additives and
an advanced evaluation procedure”, Sensor 2007: 13th
Internat.Conf., Nürnberg, May, 2007, Proc. Vol. 1, AMA
Service GmbH, Wunstorf, pp. 139–144, 2007.
[7]
K. Frank et al., “Chemical Analysis with Tin Oxide Gas
Sensors: Choice of Additives, Method of Operation and
Analysis of Numerical Signal”, Sensors Letters 6, pp. 908-
911, 2008.
[8]
R. Seifert, H. Keller, and J. Matthes, “A Review on
Innovative Procedures for the Analysis of Data from Gas
Sensor
Systems
and
Gas
Sensor
Nets”,
Sensors
&
Transducers, Vol. 184, Issue 1, pp. 1-10, 2015.
[9]
R. Seifert, H. B. Keller, K. Frank, and H. Kohler, “Batch-wise
Mathematical Calibration of Thermo-Cyclically Operated Tin
Oxide Gas Sensors”, Sensor Letters, Vol. 9/2, pp. 621-624,
2011
[10] J. Matthes, L. Gröll, and H. B. Keller, “Source localization
based on pointwise concentration measurements”, Sensors
and Actuators A 115, pp. 32–37, 2004.
[11] R. Seifert, H. B. Keller, T. Conrad, and J. Peter, “Alcohol
Control:
Mobile
Sensor
System
and
Numerical
Signal
Analysis”, Sensors & Transducers, Vol. 205, Issue 10, pp. 10-
15, 2016,
[12] https://ams.com/eng/Products/Environmental-
Sensors/GasSensors/AS-MLV-P2 [retrieved: August, 2017]
[13] R. Seifert, H. B. Keller, K. Frank, and H. Kohler, “ProSens -
an Efficient Mathematical Procedure for Calibration and
Evaluation of Tin Oxide Gas Sensor Data”, Sensor Letters,
Vol. 9/1, pp. 7-10, 2011; doi: 10.1166/sl.2011.1408
114
Copyright (c) IARIA, 2017.     ISBN:  978-1-61208-581-4
SENSORDEVICES 2017 : The Eighth International Conference on Sensor Device Technologies and Applications

