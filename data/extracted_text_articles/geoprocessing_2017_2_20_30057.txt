Cascading Geospatial Content Services 
CASE: European Location Framework 
 
Lassi Lehto 
Department of Geoinformatics and Cartography 
Finnish Geospatial Research Institute, NLS Finland 
Masala, Finland 
e-mail: lassi.lehto@nls.fi 
 
 
Abstract— The concept of service cascade can be seen as a 
solution for the data aggregation needs set forth for instance by 
the basic INSPIRE principle, according to which European 
level Spatial Data Infrastructures (ESDIs) can be built on top 
of national level SDIs. The research described in this paper has 
been conducted in the context of a major EU project, called 
European Location Framework (ELF). The main goal of the 
work discussed in this paper has been to facilitate European 
level access to national master datasets using direct access 
download services that conform to Web Feature Service (WFS) 
specification. Content aggregation is based on the Cascading 
WFS approach and carried out as on-the-fly process. Service 
cascade is not formally specified in the WFS standard, thus the 
ELF Cascading WFS has to be taken as an experimental 
implementation with some significant limitations. Altogether 
83 national download services have been successfully included 
into the ELF Cascading WFS, providing access to over 120 
different feature types from 11 INSPIRE themes in 13 
European countries. 
Keywords-service 
cascade; 
content 
aggregation; 
Web 
Feature Service; European SDI. 
I. 
 INTRODUCTION 
Providing aggregated European-wide access to geospatial 
data resources maintained on national level is the ambitious 
goal of the INSPIRE process (Infrastructure for Spatial 
Information in the European Community) [1] and other 
similar integration initiatives. Service cascade is presented in 
this paper as a solution for facilitating access to national 
content to support Pan-European applications. The paper 
presents the process of providing a centralized access point 
to geospatial data, requested from several national INSPIRE-
compliant Download Services [2]. 
The research described in this paper has been carried out 
in the context of a major EU project, called European 
Location Framework (ELF), initiated by EuroGeographics 
(EG), the European level representative of the European 
National Mapping and Cadastral Agencies (NMCAs) [3]. 
The ELF project aims at developing European-wide 
INSPIRE-compliant services based on geodata resources 
maintained by the EG’s membership. The ELF project 
started in March 2013 and ended in October 2016 [4]. The 
project has 30 participant organizations, 13 of them 
representing EU/EFTA member states as official NMCAs. 
Thus the data resources accessible by the project have quite 
extensive spatial coverage across Europe, see Fig. 1. 
 
 
Figure 1. The countries participating in the European Location Framework 
project. The label indicates the National Mapping and Cadastral Agency 
(NMCA) of each country. 
 
The ELF project includes a work package specifically 
focusing on data provision and service development. In this 
work package there is a subtask that focuses on the issues 
related to service cascade [5]. The author of the paper has 
been responsible for this subtask in the ELF project. The 
approach presented in this paper covers this development 
and discusses specifically the provision of European level 
download services based on data services delivering content 
on national level. The approach is based on the principle of a 
Cascading Web Feature Service (WFS) [6]. 
Section II introduces the concept of service cascade and 
its implementation in the download services of the ELF 
platform. Section III provides a more detailed description of 
the ELF Cascading WFS module and Section IV discusses 
its most significant limitations. The paper ends with 
concluding remarks in Section V. 
21
Copyright (c) The Government of Finland, 2017. Used by permission to IARIA.     ISBN:  978-1-61208-539-5
GEOProcessing 2017 : The Ninth International Conference on Advanced Geographic Information Systems, Applications, and Services

II. 
SERVICE CASCADE 
A. Principle 
The concept of service cascade is discussed in this paper, 
as a solution for data aggregation needs. According to the 
service architecture model of the Open Geospatial 
Consortium (OGC), the basic idea in service cascade is that a 
service access point can be configured as a content source for 
another service, actually making this latter service a client of 
the source service [7]. Service cascade can be regarded as an 
implementation of the basic INSPIRE principle, according to 
which European level Spatial Data Infrastructures (ESDIs) 
can be built on top of the national level SDIs. This can be 
seen as the most cost-effective way for building services on 
multiple levels of local administration inside a single country 
as well. In the past, service cascade has been studied for 
instance in the context of metadata service integration [8]. 
B. Query Distribution 
When implementing cascaded integration over a set of 
national services, one has to resolve the problem of spatial 
query distribution on one hand, and the cross-border fusion 
of geospatial content on the other.  
The main tasks of the ELF Cascading WFS component is 
to determine, to which national services the incoming WFS 
GetFeature –query must be forwarded, depending on the 
location of the query’s bounding box (query window) and 
the requested feature types. The bounding box of the query is 
overlaid with the polygonal national boundaries dataset 
stored 
in 
the 
ELF 
Cascading 
WFS’s 
local 
PostgreSQL/PostGIS database. As a result, all countries 
involved in the query are identified. Then the requested 
feature types are checked to determine, which country level 
services have to be queried. The ELF Cascading WFS 
approach is depicted in the Fig. 2. 
 
Figure 2. Cascading WFS service architecture of the ELF platform. 
C. Content Aggregation 
The goal of the ELF platform is to support the end user in 
accessing geospatial data content aggregated on the 
European level, and directly from national services, too. 
Thus, the cascading approach aims at supporting real-time 
aggregation of content from a set of distributed national data 
sources. One of the new challenges encountered, when 
accessing 
national 
services 
from 
European-level 
applications, is the need to introduce spatial integration 
capabilities to the traditional service cascade approach. At 
the moment only thematic integration is supported in the 
existing 
cascade 
mechanisms 
of 
the 
OGC 
service 
implementations (Web Map Service, WMS) [9]. In that 
setup, every single map layer is served by one and only one 
back-end service. 
If only one backend service is involved in the Cascading 
WFS query, the process is straightforward. The single 
service is accessed, and the resulting dataset is returned to 
the calling application without further processing. However, 
if two or more services are involved in the case of a cross-
border query, the Cascading WFS dispatches several parallel 
query threads to access the national services. The returning 
data streams are processed in the order they become ready. 
The datasets are merged into a single response message 
stream using a SAX-based XML-processing model [10], as 
depicted in Fig. 2. 
The Cascading WFS has to create the root element 
(FeatureCollection) of the resulting dataset and include all 
required XML namespace declarations. In addition, the 
Cascading WFS fills in the boundedBy-element using the 
bounding box of the query, as a rough indication of the 
spatial extent of the resulting dataset. Then the content 
streams of the individual background responses are written 
out in the order they become ready, taking away the 
FeatureCollection 
and 
boundedBy-elements 
from 
the 
individual streams. Finally, the FeatureCollection element is 
closed by the Cascading WFS. 
As the source data sets conform to the data models 
defined in the INSPIRE schemas and the extensions 
developed in the ELF project, data content is semantically 
harmonised already on the state level. Content aggregation 
done on the cascading level thus does not need to be 
concerned about the semantic harmonisation of the data sets 
to be aggregated. Issues related to edge matching of content 
on the border were not treated in this subtask of the ELF 
project. 
 
D. Client Applications 
The ELF Cascading WFS functionality has been tested 
with a wide set of test queries using a standard Web browser. 
The POST-queries have been tested from browser using a 
service-side POST-module that forwards the queries to the 
service interface. In addition, the Cascading WFS has been 
successfully tested with the QGIS client application with the 
WFS 2.0 plugin installed [11]. Integration with a showcase 
application based on the Finnish Open Layers-derived map 
client library, Oskari, has also been tested [12]; see Fig. 2. 
III. 
IMPLEMENTATION 
The Cascading WFS implementation is currently running 
on the governmental cloud platform of the Norwegian 
NMCA, as a Java Servlet on top of a Tomcat Web 
application server. Backend national services are queried by 
22
Copyright (c) The Government of Finland, 2017. Used by permission to IARIA.     ISBN:  978-1-61208-539-5
GEOProcessing 2017 : The Ninth International Conference on Advanced Geographic Information Systems, Applications, and Services

simultaneously dispatching a set of threaded query processes. 
The responses are returned to the client application in the 
order they become ready.  
 
 
Figure 3. Internal structure of the ELF Cascading WFS implementation. 
 
A baton-based approach is used to prevent parallel 
threads from writing to the response stream simultaneously. 
The fact that backend queries are run in a parallel fashion 
introduces a potential performance benefit to the system, 
when compared with the traditional way, in which the 
individual country level services are queried in a sequential 
manner. Exact values for the performance gain have not yet 
been determined. The internal modules of the ELF 
Cascading WFS implementation are depicted in Fig. 3. 
IV. 
LIMITATIONS 
The ELF Cascading WFS access interface has certain 
significant restrictions. Most importantly, it requires that the 
query must always have a bounding box defined. This can be 
presented as a BBOX –parameter of a GET query, or as a 
<fes:BBOX> -element inside either the FILTER –parameter 
of a GET query or inside the <Filter> -element of a POST 
query. If there are several <Query> -elements in a single 
POST type GetFeature request, they have to contain the 
same <fes:BBOX> value. 
The Coordinate Reference Systems (CRSs) that are 
supported by the Cascading WFS include Web Mercator 
(EPSG:3857 or EPSG:900913), WGS84 (EPSG:4326), 
ETRS89 
(EPSG:4258) 
and 
Lambert 
Equal 
Area 
(EPSG:3035). Whether a given CRS is supported by the 
backend national level service, varies from country to 
country. 
The GetCapabilities response message of the ELF 
Cascading WFS is based on dynamic GetCapabilities –
queries run on the backend national services. This way the 
GetCapabilities response of the Cascading WFS will better 
reflect the real status of the backend services. However, there 
are certain limitations. The GetCapabilities response defines 
the spatial extent of each feature type only by one single 
rectangle. As the spatial extents of the backend services are 
typically distinct, the extent definitions in the GetCapabilities 
response of the Cascading WFS soon become misleading. 
Because the other parameters, like the list of supported 
CRSs, must be defined as the greatest common denominator, 
some capabilities of the backend services remain hidden 
from the client application. 
The COUNT –parameter affects each background service 
individually. For instance, if COUNT has a value of 1000 
and the request is cross-border involving two countries, the 
maximum number of resulting features is 2000. If a sorting 
operation is requested, the result of each background service 
is sorted individually. The order of the response datasets 
inside the combined result is arbitrary (the responses are 
returned in the order they become ready). 
ELF Cascading WFS supports only the following WFS 
2.0.0 requests: GetCapabilities, DescribeFeatureType and 
GetFeature. In the case of the GetFeature request, ELF 
Cascading WFS does not support the FEATUREID –type 
query. 
Feature identifiers must be globally unique for the 
Cascading WFS to work. In the case of the INSPIRE feature 
identifiers, this is handled properly by using a well-defined 
namespace mechanism. Some of the ELF national services 
already use feature identifiers with URI-based namespace 
prefixes, which automatically ascertains global uniqueness. 
However, this becomes crucial in the case of the XML ID-
typed attributes used in geometry elements. These values 
must also be kept unique in the content aggregation phase, 
for instance by prepending them with the namespace prefix, 
or by some other mechanisms. 
V. 
CONCLUSION 
Real-time content aggregation that is tested in the ELF 
project is based on the principle of Cascading WFS. ELF 
Cascading WFS does not support the full-fledged WFS 
service interface specification. It has certain significant 
restrictions, like the fact that the query must always contain a 
bounding box. 
A content request coming from a client application is first 
analyzed by the Cascading WFS to determine, which 
national level services must be included into the process. 
Then the request is forwarded to the involved national 
services, the resulting datasets are merged together, and 
finally returned back to the calling application. The analysis 
on the service inclusion is based on the bounding box of the 
query and on the requested feature types. The bounding box 
is overlaid on top of the dataset of national borders to 
determine, which countries the query overlap. The actual 
service on the country level is then selected, depending on 
the requested feature type.  
Altogether 83 national download services from 13 
different countries have been connected to the ELF 
Cascading WFS. These services provide access to over 120 
feature types from 11 INSPIRE themes. 
It can be said that the discussed research goals of the 
project have been reached, as the ELF Cascading WFS can 
be said to be being functionally ready. However, a lot of 
23
Copyright (c) The Government of Finland, 2017. Used by permission to IARIA.     ISBN:  978-1-61208-539-5
GEOProcessing 2017 : The Ninth International Conference on Advanced Geographic Information Systems, Applications, and Services

work remains to be done to extend the spatial coverage of the 
served data sets and further improve their compatibility, for 
instance in the area of edge matching.  
The ELF project has ended in Oct 2016. The service 
infrastructure is being maintained and even extended over 
the two years’ transition period by the ELF participant 
organisations. More countries and services will be added and 
the quality of the data content be improved. After the 
transition period, the service infrastructure is going to be 
handed over to an operator that will maintain the ELF service 
platform on behalf of the EuroGeographics and the involved 
NMCAs. 
The development of the ELF Cascading WFS service 
will also continue. New joining services must be configured 
into the service and tested. More rigorous testing of the ELF 
Cascading WFS itself, as it concerns both functionality and 
performance, will also continue. 
ACKNOWLEDGMENT 
The ELF project has been funded by the European 
Commission, Grant Agreement No 325140. 
 
REFERENCES 
[1] European Commission, INSPIRE Directive. http://eur-
lex.europa.eu 
/LexUriServ/LexUriServ.do?uri=OJ:L:2007:108:0001:0014:E
N:PDF   Accessed 17 Nov 2016 
[2] European Commission, COMMISSION REGULATION (EC) 
No 976/2009 of 19 October 2009 implementing Directive 
2007/2/EC of the European Parliament and of the Council as 
regards the Network Services. http://eur-lex.europa.eu/legal-
content/EN/TXT/PDF/?uri=CELEX:02009R0976- 
20101228&from=EN.  Accessed 17 Nov 2016 
[3] EuroGeographics, 
Home 
Page. 
http://www.eurogeographics.org Accessed 17 Nov 2016 
[4] European 
Location 
Framework, 
Project 
Home 
Page. 
http://www.elfproject.eu  Accessed 17 Nov 2016 
[5] L. Lehto, P. Latvala and J. Kähkönen, Service Cascade as a 
Means for Pan-European Access to National Geodata Content 
CASE: 
European 
Location 
Framework. 
The 
Sixth 
International 
Conference 
on 
Advanced 
Geographic 
Information 
Systems, 
Applications 
and 
Services, 
”GEOProcessing 2014”, Mar 23 – 27, 2014, Barcelona, 
Spain, CD-ROM. 
[6] P. A. Vretanos [ed.], OpenGIS Web Feature Service 2.0 
Interface 
Standard. 
http://portal.opengeospatial.org 
/files/?artifact_id=39967  Accessed 17 Nov 2016 
[7] Open 
Geospatial 
Consortium, 
Home 
page. 
http//www.opengeospatial.org Accessed 17 Nov 2016 
[8] Y. Deng and Q. Wu, Research on the harvest and cascade of 
catalogue service in GeoGlobe Service Platform. Proc. 18th 
International Conference on Geoinformatics: GIScience in 
Change (Geoinformatics 2010) Peking University, Beijing, 
China, June, 18-20, 2010 
[9] J. de la Beaujardiere [ed.], OpenGIS Web Map Server 
Implementation 
Specification. 
http://portal.opengeospatial.org/files/?artifact_id=14416 
Accessed 17 Nov 2016 
[10] Simple API for XML, Home Page. http://www.saxproject.org 
Accessed 17 Nov 2016 
[11] QGIS, Home Page. http://www.qgis.org/en/site/ Accessed 17 
Nov 2016 
[12] Oskari Platform, Home Page. http://oskari.org Accessed 17 
Nov 2016 
 
24
Copyright (c) The Government of Finland, 2017. Used by permission to IARIA.     ISBN:  978-1-61208-539-5
GEOProcessing 2017 : The Ninth International Conference on Advanced Geographic Information Systems, Applications, and Services

