Statistical Uncertainty of Market Network Structures
Petr Koldanov
Department
of Applied Mathematics and Informatics
National Research University
Higher School of Economics
Nizhny Novgorod, Russia
Email: pkoldanov@hse.ru
Panos M. Pardalos
Center for Applied Optimization
University of Florida
Gainesville, FL, USA
Email: pardalos@ise.uﬂ.edu
Victor Zamaraev
Laboratory of Algorithms
and Technologies for Network Analysis
National Research University
Higher School of Economics
Nizhny Novgorod, Russia
Email: vzamaraev@hse.ru
Abstract—A common network representation of the stock market
is based on correlations of time series of return ﬂuctuations.
It is well-known that ﬁnancial time series have a stochastic
nature. Therefore, there is uncertainty in inferences about ﬁltered
structures in market network. Thus, market network analysis
needs to be complemented by estimation of uncertainty of the
obtained results. However, as far as we know there are no relevant
research in the literature. In the present paper we make the
ﬁrst step in this direction. We propose the approach to measure
statistical uncertainty of different market network structures.
This approach is based on conditional risk for corresponding
multiple decision statistical procedures. The proposed approach
is illustrated by numerical evaluation of statistical uncertainty
for popular network structures. Our experimental study validates
the possibility of application of the approach for comparison of
uncertainty of different network structures.
Keywords–Statistical uncertainty; Market network model; Con-
ditional risk; Minimum Spanning Tree; Market Graph.
I.
INTRODUCTION
Network models of ﬁnancial markets attract a growing
attention last decades [1]–[8]. A common network represen-
tation of the stock market is based on correlations of return
ﬂuctuations. In such a representation, each stock corresponds
to a vertex and a link between two vertices is estimated
by sample correlation of corresponding returns. The obtained
network is a complete weighted graph. In order to simplify
the network and preserve the signiﬁcant information, different
ﬁltering techniques are used in the literature.
One of the ﬁltering procedures is the extraction of a
minimal set of important links associated with the highest
degree of similarity belonging to the Minimum Spanning Tree
(MST) [1]. To construct the MST a greedy algorithm is used.
A list of edges is sorted in descending order according to the
weight and following the ordered list an edge is added to the
MST if and only if it does not create a cycle. The MST was
used to ﬁnd a topological arrangement of stocks traded in a
ﬁnancial market, which has associated a meaningful economic
taxonomy. This topology is useful in the theoretical description
of ﬁnancial markets and in search of economic common factors
affecting speciﬁc groups of stocks. The topology and the
hierarchical structure associated to it, is obtained by using
information present in the time series of stock prices only.
The reduction to a minimal skeleton of links leads to loss
of valuable information. To overcome this issue, Tumminello
et al. [1] proposed to extent the MST by iteratively connecting
the most similar nodes until the graph can be embedded on a
surface of a given genus g = k. For example, for g = 0 the
resulting graph is planar, which is called Planar Maximally
Filtered Graph (PMFG). It was concluded by Tumminello et
al. [1] that the method is very efﬁcient in ﬁltering relevant
information about the connection structure both of the whole
system and within obtained clusters.
Another ﬁltering procedure, proposed by Boginski et al.
[2], leads to the concept of Market Graph. A Market Graph
(MG) is obtained from the original network by removing all
edges with weights less than a speciﬁed threshold θ ∈ [−1, 1].
Maximum cliques and maximum independent sets analysis of
the Market Graph were used to obtain valuable knowledge
about the structure of the stock market.
All these approaches use time series observations. It is
well-known that ﬁnancial time series have a stochastic nature.
Therefore, there is uncertainty in inferences about ﬁltered
structures (MST, PMFG, MG) in market network. It is clear
that the less numbers of observations one has the less this
inferences are reliable. Thus, market network analysis needs to
be complemented by estimation of uncertainty of the obtained
results.
The main question is: how one can measure and compare
uncertainty of different network structures, such as MST,
PMFG, MG and others? To answer this question we propose
to use the concept of statistical decision functions [9] and to
consider statistical uncertainty. Within the framework of this
approach, we introduce a measure of statistical uncertainty of
market network structures. This allows to identify the most
reliable network structures.
The paper is organized as follows. In Section II, we
describe the approach and introduce the measure of statistical
uncertainty of market network structures. In Section III, we
give the results of the numerical simulations. In Section IV,
we make concluding remarks.
II.
MEASURE OF STATISTICAL UNCERTAINTY
Let N be a number of stocks, n be a number of days of
observations. In our study ﬁnancial instruments are character-
91
Copyright (c) IARIA, 2014.     ISBN:  978-1-61208-358-2
DATA ANALYTICS 2014 : The Third International Conference on Data Analytics

ized by daily returns of the stocks. Stock k return for day t is
deﬁned as
Rk(t) = ln
Pk(t)
Pk(t − 1),
(1)
where Pk(t) is the price of stock k on day t. We assume
that for ﬁxed k, Rk(t), t = 1, . . . , n, are independent random
variables with the same distribution as Rk (i.i.d.) and the
random vector R = (R1, . . . , RN) has multivariate distribution
with correlation matrix
||ρij|| =
 ρ11
· · ·
ρ1N
· · ·
· · ·
· · ·
ρN1
· · ·
ρNN
!
.
(2)
For this model we introduce the reference network, which is
a complete weighted graph with N nodes and weight matrix
||ρij||. For the reference network one can consider correspond-
ing reference structures, e.g., reference MST, reference PMFG,
reference Market Graph and others.
Let rk(t), k = 1, . . . , N, t = 1, . . . , n, be the observed
values of returns. Deﬁne the sample covariance
sij =
1
n − 1
n
X
t=1
(ri(t) − ri)(rj(t) − rj),
(3)
and sample correlation
rij =
si,j
√si,isj,j
(4)
where ri =
1
n
nP
t=1
ri(t). Using the sample correlations we
introduce the (n-period) sample network, which is a complete
weighted graph with N nodes and weight matrix ||rij||. For
the sample network one can consider the corresponding sample
structures, e.g., sample MST, sample PMFG, sample Market
Graph and others.
To handle statistical uncertainty we propose to compare the
sample network with the reference network. Our comparison
will be based on conditional risk connected with possible
losses. The associated loss function is deﬁned following
Koldanov et al. [10] within the framework of multiple decision
theory [11].
For a given structure S, we introduce a set of hypothesis:
•
hij: edge between vertices i and j is not included in
the reference structure S;
•
kij: edge between vertices i and j is included in the
reference structure S.
To measure the losses, we consider two types of errors:
Type I error: edge is included in the sample structure
when it is absent in the reference structure;
Type II error: edge is not included in the sample
structure when it is present in the reference structure.
Let aij be the loss associated with the error of the ﬁrst kind
and bij the loss associated with the error of the second kind
for the edge (i, j). According to the statistical decision theory
[9] and taking into account additivity of the loss function [10],
[11] we deﬁne the conditional risk for a given structure S as
R(S, n) =
X
1≤i<j≤N
[aijPn(dkij|hij) + bijPn(dhij|kij)], (5)
where Pn(dkij|hij) is the probability of rejecting hypothesis
hij when it is true and Pn(dhij|kij) is the probability of
accepting hypothesis hij when it is false. Conditional risk
is appropriate to evaluate the quality of different statstical
procedures of identiﬁcation of given structure. In this paper,
we consider the case where aij = 1/2M1 and bij = 1/2M2. In
this case the conditional risk is equivalent to per-family error
rate (PFE) type error [12], which we call fraction of error:
E(S, n) =
X
1≤i<j≤N

1
2M1
Pn(dkij |hij) +
1
2M2
Pn(dhij |kij)

,
(6)
where M1 – is a maximal possible number of type I errors
and and M2 – is a maximal possible number of type II errors.
We say that structure S1 is more stable than structure S2
if E(S1, n) < E(S2, n) for any number of observations n. In
other words statistical uncertainty of structure S1 is less than
statistical uncertainty of structure S2 if E(S1, n1) = E(S2, n2)
implies n1 < n2. We deﬁne the E-measure of statistical
uncertainty of structure S (of level E0) as the number of
observations nE such that E(S, nE) = E0, where E0 is given
value.
III.
RESULTS
To illustrate our approach, we consider the network with
N = 250 nodes and R ∼ N((0, . . . , 0), ||ρUS
ij ||), i, j = 1, N,
where the correlation matrix ||ρUS
ij || consists of pairwise
correlations of daily returns of a set of 250 randomly chosen
ﬁnancial instruments traded in the US stock markets over a
period of 365 consecutive trading days in 2010-2011. We use
the matrix ||ρUS
ij || as a weight matrix for our reference network.
We will refer to it as the US reference network. Note that
the only reason of this choice of the stocks is to validate our
approach on a correlation matrix based on real data.
To construct the n-period sample network we simulate
the sample x11, . . . , x1N, . . . , xn1, . . . , xnN from multivariate
normal distribution N((0, . . . , 0), ||ρUS
ij ||), i, j = 1, N, N =
250. To measure statistical uncertainty of network structure S
we use fraction of errors E(S, n), which we estimate in the
following way:
1)
In the US reference network, ﬁnd reference structure
S.
2)
Simulate sample x11, . . . , x1N, . . . , xn1, . . . , xnN.
3)
Calculate estimations rij of parameters ρUS
ij .
4)
In sample network (with weight matrix ||rij||), ﬁnd
sample structure S.
5)
Calculate fraction of errors of type I, fraction of errors
of type II and total fraction of error.
6)
Repeat many times steps 1-5 and calculate E(S, n).
In our experiments, we choose a level of statistical uncer-
tainty E0 = 0.1.
92
Copyright (c) IARIA, 2014.     ISBN:  978-1-61208-358-2
DATA ANALYTICS 2014 : The Third International Conference on Data Analytics

A. Statistical uncertainty of MST
Observe that if total fraction of error X = 0 then reference
MST and sample MST are equal; if total fraction of error
X = 1 then reference MST and sample MST are completely
different, i.e., have no common edges. The latter situation may
hold for several sample MSTs under ﬁxed reference MST. For
Minimum Spanning Tree, one has M1 = M2 = N − 1, where
N is a number of vertices in considered network. Note that in
MST a number of errors of type I X1 is equal to a number
of errors of type II X2. Measures of statistical uncertainty for
MST can be deﬁned from the equation:
1
2(N − 1)
X
1≤i<j≤N
[Pn(xij
1 = 1) + Pn(xij
2 = 1)] =
=
1
(N − 1)
X
1≤i<j≤N
Pn(xij
1 = 1) = E0,
(7)
where xij
1 = 1 if edge (i, j) is incorrectly included into sample
structure and xij
1 = 0 otherwise and xij
2 = 1 if edge (i, j) is
incorrectly not included into sample structure and xij
2
= 0
otherwise. One has
X1 =
X
1≤i<j≤N
xij
1 ;
X2 =
X
1≤i<j≤N
xij
2 ;
(8)
X = 1
2
 X1
M1
+ X2
M2

.
(9)
Results of the study of statistical uncertainty of MST
are presented in Figure 1. As one can see, the condition
E(MST, n) ≤ 0.1 is achieved when the number of observed
periods nE is more than 10 000. Note that when n = 1000
sample and reference MSTs have only 70% of common edges.
Moreover, by further increasing the number of observations
does not lead to considerable decrease of statistical uncertainty
of MST.
B. Statistical uncertainty of PMFG
Observe that X = 0 means that reference PMFG and sam-
ple PMFG are equal; X = 1 means that reference PMFG and
sample PMFG are completely different, i.e., have no common
edges. The latter situation may hold for several sample PMFGs
under ﬁxed reference PMFG. For Planar Maximally Filtered
Graph, one has M1 = M2 = 3N −6, where N is a number of
vertices in considered network. For each edge (i, j) such that
xij
1 = 1 there is an edge (k, s) with xks
2 = 1 and vice versa.
It means that in PMFG a number of errors of type I is equal
to a number of errors of type II, i.e., X1 = X2. Since M1 and
M2 are constants, both measures of statistical uncertainty for
PMFG are equivalent and can be deﬁned from the equation:
1
(3N − 6)
X
1≤i<j≤N
Pn(xij
1 = 1) = E0.
(10)
Results of the study of statistical uncertainty of PMFG
are presented in Figure 1. As one can see, the condition
E(PMFG, n) ≤ 0.2 is not achieved even when the number
of observed periods nE is equal to 10 000.
0
1000
2000
3000
4000
5000
6000
7000
8000
9000
10000
0
0.2
0.4
0.6
0.8
1
Number of observations, n
Total fraction of errors
 
 
MST
PMFG
MG. Threshold: 0.15
MG. Threshold: 0.45
MG. Threshold: 0.7
Figure 1.
Total fraction of errors in PMFG, MST and MG.
−0.1
0
0.1
0.2
0.3
0.4
0.5
0.6
0.7
0.8
0.9
0
0.05
0.1
0.15
0.2
0.25
0.3
0.35
Threshold, θ
Total fraction of errors
 
 
10 obs.
100 obs.
300 obs.
1000 obs.
3000 obs.
10000 obs.
Figure 2.
Total fraction of errors in Market Graphs.
C. Statistical uncertainty of MG
Observe that X = 0 means that reference MG and sample
MG are equal; X = 1 means that sample MG is complement to
reference MG. Let us pay attention that the latter situation for
Market Graph is possible in only one case, in contrast to MST.
For Market Graph one has M1 =

Our experimental study validates the possibility of applica-
tion of the approach for comparison of uncertainty of different
network structures. In particular, in our experiments, Market
Graph is more reliable with respect to statistical uncertainty
than Minimum Spanning Tree, which in turn is more reliable
than Planar Maximally Filtered Graph.
REFERENCES
[1]
M. Tumminello, T. Aste, T. Di Matteo, and R. Mantegna, “A tool for
ﬁltering information in complex systems,” Proceedings of the National
Academy of Sciences of the United States of America, vol. 102, no. 30,
2005, pp. 10 421–10 426.
[2]
V. Boginski, S. Butenko, and P. M. Pardalos, “Statistical analysis of
ﬁnancial networks,” Computational Statistics & Data Analysis, vol. 48,
no. 2, 2005, pp. 431–443.
[3]
M. A. Djauhari, “A robust ﬁlter in stock networks analysis,” Physica
A: Statistical Mechanics and its Applications, vol. 391, no. 20, 2012,
pp. 5049–5057.
[4]
M. A. Djauhari and G. S. Lee, “Minimal spanning tree problem in
stock networks analysis: An efﬁcient algorithm,” Physica A: Statistical
Mechanics and its Applications, vol. 392, 2013, pp. 2226–2234.
[5]
S. Li, J. He, and Y. Zhuang, “A network model of the interbank market,”
Physica A: Statistical Mechanics and its Applications, vol. 389, no. 24,
2010, pp. 5587–5593.
[6]
A. Namaki, G. Jafari, and R. Raei, “Comparing the structure of an
emerging market with a mature one under global perturbation,” Physica
A: Statistical Mechanics and its Applications, vol. 390, no. 17, 2011,
pp. 3020–3025.
[7]
G. A. Bautin, V. A. Kalyagin, A. P. Koldanov, P. A. Koldanov, and
P. M. Pardalos, “Simple measure of similarity for the market graph
construction,” Computational Management Science, vol. 10, 2013, pp.
105–124.
[8]
G.-J. Wang, C. Xie, S. Chen, J.-J. Yang, and M.-Y. Yang, “Random
matrix theory analysis of cross-correlations in the us stock market:
Evidence from pearson correlation coefﬁcient and detrended cross-
correlation coefﬁcient,” Physica A: Statistical Mechanics and its Ap-
plications, vol. 392, 2013, pp. 3715–3730.
[9]
A. Wald, Statistical decision functions.
Oxford, England: Wiley, 1950.
[10]
A. P. Koldanov, P. A. Koldanov, V. A. Kalyagin, and P. M. Pardalos,
“Statistical procedures for the market graph construction,” Computa-
tional Statistics & Data Analysis, vol. 68, 2013, pp. 17–29.
[11]
E. L. Lehmann, “A theory of some multiple decision problems,” The
Annals of Mathematical Statistics, 1957, pp. 1–25.
[12]
Y. Hochberg and A. C. Tamhane, Multiple comparison procedures.
John Wiley & Sons, Inc., 1987.
94
Copyright (c) IARIA, 2014.     ISBN:  978-1-61208-358-2
DATA ANALYTICS 2014 : The Third International Conference on Data Analytics

