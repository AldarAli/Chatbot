Inductive Communication and Localization Method for Wireless Sensors in
Photobioreactors
David Demetz
UMIT - Private University for Health Sciences,
Medical Informatics and Technology
Hall in Tirol, Austria
Email: david.demetz@umit.at
Alexander Sutor
UMIT - Private University for Health Sciences,
Medical Informatics and Technology
Hall in Tirol, Austria
Email: alexander.sutor@umit.at
Abstract—A method for an inductive communication and lo-
calization system for wireless sensors in internally illuminated
photobioreactors is presented here. The communication is imple-
mented through an on-off switched hartley-oscillator where its
inductance is used as transmitting coil for the wireless sensor
data. As modulation technique, the on-off keying is used. The
magnetic ﬁeld of the transmitting coil is sensed from outside the
reactor with special designed receivers in order to evaluate the
magnetic ﬁeld components of the transmitting coil in all three
spatial directions at one position. This enables the localization
of the transmitting coil and thus the localization of the wireless
sensor. A prototype has been implemented and test measurements
performed with a two receiver setup. Additionally simulations
were performed in order to see the accuracy improvement of the
localization by using more receivers.
Keywords–wireless sensors; inductive localization; inductive
communication.
I.
INTRODUCTION
We already presented a wireless internal illumination sys-
tem for photobioreactors in past [1]. The internal illumination
of photobioreactors is needed due to the low penetration depth
of light in the reactor medium. This novel illumination sys-
tem consists of small wireless, inductively powered luminous
spheres called Wireless Light Emitters (WLEs). The fact that
the WLEs have the same overall density as water enables them
to ﬂoat in the reactor medium. The external magnetic ﬁeld
used to power the WLEs is generated by ﬁeld coils driven
by a class-E ampliﬁer. The frequency of the alternating ﬁeld
is 178 kHz. The archived ﬂux density in the photobioreactor
amounts to approx. B = 1 mT [1]–[3].
For a better control of the processes inside the reactor, a
further step is the measurement of crucial parameters such as
temperature, salinity or oxygen concentration using wireless
traceable sensors. Currently used setups use ﬁxed sensors
where drill holes or other reactor modiﬁcations are needed
to install them. Using wireless sensors, those modiﬁcations
are no more needed. In a similar project [4] they presented
battery powered wireless sensor-spheres for bioreactors, which
transmit their measured values using the 433 MHz frequency
band. The sensors in our project will be powered through
the inductive link used to power the WLEs. The traceability
enables a spatial resolution of the measured values. The
communication link is implemented as a separate inductive
link with a carrier frequency of 297 kHz and is therefore
1.66 times higher than the frequency of the power supply
ﬁeld. This is to avoid interferences caused by harmonics. The
mathematical description of the magnetic dipole ﬁeld is used
to solve the traceability task. Thereby the magnetic ﬁeld of
the data transmitting coil is measured in order to calculate the
transmitter position. We already presented the design of our
transmitter in another publication [5]. Now, we will take a
closer look at the traceability task and the receiver design.
In Section II the chosen data transmission method and the
used modulation technique are described. The model equations
used to describe the magnetic ﬁeld of a coil in order to derive
the equation system used to solve the localization task are
also presented in Section II. The receiver architecture, the
receiver electronics, the measurement setup and the receiver
arrangement are presented in Section III. In Section IV the
results of preliminary localization measurements are shown.
We also performed simulations to analyze the improvement in
the localization accuracy by using more then two receivers.
The simulation method and the simulation results are listed in
Section V followed by the conclusion in Section VI.
II.
PRELIMINARY WORK
For the sensor data transmission and for solving the local-
ization task the well deﬁned properties of magnetic ﬁelds are
used.
A. Data Transmission
The propagation characteristics of magnetic ﬁelds do not
differ between water and air due to their similar magnetic
permeabilities [6]. The radio frequency data transmission, on
the other hand suffers from high attenuations in underwater
environments [7]. Common used methods for underwater data
exchange systems are also the acoustic and the optical data
transmission [8]–[10]. We choose the magneto-inductive data
transmission since the acoustic and the optical methods are
not well suited for our aim. The optical method would not be
feasible due to the many obstacles in the reactor; for example
the WLEs or the algae. The acoustic method is unsuitable due
to the physical separation between transmitter and receiver
by the reactor wall. As modulation technique, in order to
overlap a digital signal on a carrier wave, we use the on-off
keying. This is implemented by switching a hartley-oscillator
on and off. The sensor data stream is currently simulated with
a bit-generator. The bit-generator is a square wave generator
19
Copyright (c) IARIA, 2020.     ISBN:  978-1-61208-819-8
SENSORCOMM 2020 : The Fourteenth International Conference on Sensor Technologies and Applications

based on the integrated circuit LM555. The high level of the
generated square wave represents the 1-bit and the low level
the 0-bit. This signal is used as control signal to switch the
hartley-oscillator on and off.
B. Inductive Localization
The magnetic ﬁeld of a coil with N turns modelled as a
dipole ﬁeld can be described by its radial (Hr) and tangential
(Ht) components like shown in (1) and (2), where A is the
cross section area of the coil, I = i cos(ωt) the exciting
current, ϱ is the radial distance from the coil centre and ζ
the off axis angle [11].
Hr = NIA
2πϱ3 cos ζ
(1)
Ht = NIA
4πϱ3 sin ζ
(2)
Equation (3) is the coupling equation between a transmitter
and a receiver where both of them have the same orientation
(⃗ex−rx = ⃗ex−tx and ⃗ey−rx ∥ ⃗ey−tx and ⃗ez−rx ∥ ⃗ez−tx) [11].
⃗frx =
 C
ϱ3

S⃗ftx
(3)
S = diag(1 − 0.5 − 0.5)
(4)
In (3), the transmitter signal vector is referred to as ⃗ftx and
the receiver signal vector as ⃗frx. ϱ is the distance between them
and C is a constant factor derived from the receiver parameters
(coil properties, signal gain). To simplify the localization task,
the transmitter coil is assumed to be always aligned with a
global z-coordinate like shown in Figure 1. By measuring the
x-, y- and z-components of the magnetic ﬁeld at one position
it’s possible to calculate a direction vector ⃗r deﬁned by the
angles α and β (see Figure 1) that points from the measuring
point to the transmitter position. By measuring the x, y and z
magnetic ﬁeld components at two or more deﬁned positions
the localization of the transmitter coil can be calculated by
ﬁnding the point where the direction vectors of all measuring
points comes closest to each other (ideally the intersection).
Expanding (3) with the rotation matrix around the z-axis (Tα)
transmitter
receiver
transmitter
receiver
x
z
y
y
x
z
β
α
⃗r
⃗r
Figure 1. Transmitter-receiver alignment
and the rotation matrix around the y-axis (Tβ), we get (5),
which describes the coupling between the transmitter and
a receiver in our setup. Solving (5) for the angles α and
β enables us to calculate the direction vector ⃗r. Since we
do only transmit in z-direction the transmitter signal vector
⃗ftx = [0 0 a]T is an unknown value a in z-direction. The
value is assumed as unknown since the transmitting power
depends on the actual position of the transmitting coil in the
photobioreactor. ⃗frx contains the measured ﬁeld components
in x- y- and z-direction.
⃗frx =
 C
ϱ3

Tα
−1Tβ
−1STβTα ⃗ftx
(5)
We calculate the vector ⃗r (as an unit vector) from the ratios
of the components of the receiver signal vector ⃗frx, for that
reason the constant factor C/ϱ3 in (5) is omitted.
III.
EXPERIMENTAL SETUP
In order to solve the localization task described by (5)
in Section II, the receivers need the ability to measure the
magnetic ﬁeld in all three spatial directions at a deﬁned
position. This section discusses the design and the arrangement
of the receivers as well as the measurement setup used to
perform preliminary localization measurements.
A. Design of the reciver
We developed a receiver design with three coils where each
of them are placed orthogonally to the other two (like shown in
Figure 2) in order to measure the x-, y-, and z-components of
the transmitter magnetic ﬁeld at one point. The ﬁrst version of
the receiver electronic circuit was based on a LC-Tank tuned
to the transmitter frequency. Therefore, each receiver coil was
connected in parallel with a capacitor and a resistance. In
Figure 2. Receiver coils
contrast to the theory, the mutual inductances between the
orthogonally placed coils are not zero in practice. The use
of LC-Tanks as a main receiver architecture was therefore
dismissed since they lead to mutual oscillations of the three
oscillators because of the existing minimal mutual inductions.
So, we choose to use an active resonant ﬁlter tuned to the
transmitter frequency in order to amplify the signal which
is inducted in each receiver coil. Figure 3 shows its circuit
where the receiver coil would be connected to the pin Vin.
The ﬁlter ampliﬁes the signal at the resonant frequency by the
gain factor of |G| ≈ 200 as can be seen from its frequency
response in Figure 4. In order to enable a manual calibration
of the resonant frequency, the capacitor C1 (see Figure 3) has
been realized as a parallel connection of a variable capacitor
and a ﬁxed one. The resistance R1 has been realized as a
potentiometer to enable an adjustment of the gain factor.
B. Arrangement of the receivers
By calculating the angles α and β with (5), we get multiple
possible solutions for the direction vector ⃗r per receiver. The
20
Copyright (c) IARIA, 2020.     ISBN:  978-1-61208-819-8
SENSORCOMM 2020 : The Fourteenth International Conference on Sensor Technologies and Applications

C1
1.6nF
L1
180µH
R2
50Ω
R1
10kΩ
5V 
Vcc+
Vcc+
Vcc-
Vout
Vin
Figure 3. Active resonant ﬁlter
104
105
106
107
100
101
102
Frequency in Hz
Filter gain |G|
Figure 4. Frequency response of the active resonant ﬁlter
reason for that is the rotation symmetry of the magnetic ﬁeld of
a round coil. Positioning the receivers at crucial positions, the
possible solutions can be diminished to one useful solution for
each receiver. If the receiver is placed at a corner of the region
of interest, the number of possible solutions for the direction
vector is automatically diminished to one. Figure 5 shows the
arrangement used for the ﬁrst localization measurements. The
receiver 1
receiver 2
transmitter
⃗r1
⃗r2
x
y
z
Figure 5. Receiver arrangement
receiver signals were digitalized with the National Instruments
USB6366 I/O device. The software Matlab by MathWorks is
used to control the I/O device and for solving (5) in order to
calculate the transmitter position.
IV.
MEASUREMENT RESULTS
We performed localization mesurements with a two re-
ceiver setup like shown in Figure 5. The height (z) and width
(x) of our setup construction is 50 cm, the depth (y) is 30 cm.
The setup is entirely made out of plastic materials in order to
not inﬂuence the magnetic ﬁeld. We performed measurements
with the same x- and y-positions at different heights. The
measured positions are compared to the exact ones in Figure 6
for a constant height of z = 25 cm. The maximum absolute
errors per coordinate for the measurements shown in Figure 6
are:
•
max abs. error x-coordinate = 3.9 cm
•
max abs. error y-coordinate = 2.4 cm
•
max abs. error z-coordinate = 4.7 cm
Figure 7 shows the mean values of all relative errors
(x-, y-, and z-coordinates) referred to the test setup dimen-
sions for different heights (the ﬁve x- and y-coordinates are
the same at each height).
1
2
3
4
5
0
20
40
x in cm
exact coord.
calc. coord.
1
2
3
4
5
10
20
30
y in cm
1
2
3
4
5
20
25
30
Mesurement no.
z in cm
Figure 6. Exakt coordinates vs. measured coordinates
10
15
20
25
30
35
40
4
6
8
10
12
14
Hight z in cm
mean rel. err. in %
Figure 7. Mean values of the relative errors of all three coordinates at
different heights
V.
SIMULATION: ACCURACY IMPROVEMENT BY USING
THREE OR MORE RECEIVERS
We performed preliminary simulations where the differ-
ences in accuracy were calculated between a two receiver setup
and a setup with three or more receivers in order to get an idea
about the improvement of the overall accuracy. We use Matlab
by MathWorks to calculate the signal amplitudes in x-, y-, and
z-direction for each receiver, for a given transmitter position.
With the calculated amplitudes sinus signals where generated
and three types of noise/signal interferences where added:
•
variation of the signal amplitude
•
overlap of the power supply magnetic ﬁeld signal
•
overlap of white noise
For the simulations no. 1 and 2 in Table I, the signal amplitude
is varied using random values in the range between 0 and
5% of the calculated exact amplitude. White noise is added
using random values in the range between 0 and 50% of
the signal amplitude and the power supply signal is added
with the same amplitude as the calculated clean receiver
21
Copyright (c) IARIA, 2020.     ISBN:  978-1-61208-819-8
SENSORCOMM 2020 : The Fourteenth International Conference on Sensor Technologies and Applications

signal amplitude. For the simulations no. 3 and 4, the signal
amplitude is varied randomly in the range between 0 and 15%.
The other parameters were left as for measurements no. 1 and
2. With these constrains the difference vector ⃗d between the
calculated position and the exact position is determined for
over 7000 transmitter positions in our region of interest shown
in Figure 5. The third receiver is placed in the upper right
corner over the receiver 2. The fourth receiver is placed in the
lower front left corner and the ﬁfth receiver in the upper back
right corner of our region of interest. As a measure of accuracy
we use the length of the difference vectors between the exact
and the calculated positions. In Table I the mean values of the
difference vector lengths of all measurements are listed for
setups with two to ﬁve receivers. It can be seen that the length
of the difference vectors decreases by more than half if the
setup with two receivers is compared to the setup with three
receivers. By using more than three receivers the improvement
gets smaller.
TABLE I. MEAN VALUES IN CM OF THE DIFFERENCE VECTORS FOR THE
TWO RECEIVER SETUP AND THE THREE RECEIVER SETUP
sim.
sig. ampli.
calc.
mean |⃗d|
mean |⃗d|
mean |⃗d|
mean |⃗d|
no.
variation
pos.
2 rec.
3 rec.
4 rec.
5 rec.
1
max. 5%
7057
3.52 cm
1.55 cm
1.31 cm
1.02 cm
2
max. 5%
7057
3.51 cm
1.55 cm
1.29 cm
1.01 cm
3
max. 15%
7057
10.53 cm
4.62 cm
3.83 cm
3.09 cm
4
max. 15%
7057
10.38 cm
4.50 cm
3.89 cm
3.07 cm
VI.
CONCLUSION
For the measurements described in Section IV, the major
deviations from the exact position can be found in the z-
coordinate. It can be seen from Figure 7 that the overall highest
accuracy is reached at approx. half the height (z-coordinate)
between receiver 1 and receiver 2. For low z-coordinates or
for high z-coordinates the distance to one receiver gets bigger
and the accuracy gets lower.
The feasibility of the method has been shown. The future
aim is to improve the overall accuracy. We already showed in
Section V that the inaccuracy can diminished by more then a
half by using a third receiver.
The position of the transmitter is now calculated by eval-
uating the ratios of the components of the receiver signal
vector ⃗frx individually for each receiver. In future, in order
to improve the accuracy, the sum of the amplitudes will be
compared between the receivers, this should yield additional
information about the sensor position. The orientation of the
receiver plays an important role on the overall accuracy of
this system. For the case that the receiver is not aligned with
the overall coordinate system, the coupling equation between
the transmitter and the receiver has to be adopted by adding
some more rotation matrices for the three receiver orientation
angles. In future work our approach will be to calculate
an optimization for the receiver orientation and position in
order to minimize the susceptibility to overall inaccuracies.
Imperfections in the orientation of the transmitter also leads
to measurement inaccuracies. To counteract this problem, a
solution could be the search for a minimum in the coupling
equation expanded by the rotation matrices for a transmitter
inclination using the position coordinates calculated with the
(5) as initial values.
REFERENCES
[1]
M. Heining, A. Sutor, S. Stute, C. Lindenberger, and R. Buchholz,
“Internal illumination of photobioreactors via wireless light emitters: a
proof of concept,” Journal of Applied Phycology, vol. 27, 2015, pp.
59–66.
[2]
A. Sutor, M. Heining, and R. Buchholz, “A class-e ampliﬁer for a
loosely coupled inductive power transfer system with multiple re-
ceivers,” Energies, vol. 12, no. 6, 2019.
[3]
B. O. Burek, A. Sutor, D. W. Bahnemann, and J. Z. Bloh, “Completely
integrated wirelessly-powered photocatalyst-coated spheres as a novel
means to perform heterogeneous photocatalytic reactions,” Catal. Sci.
Technol., vol. 7, no. 21, 2017, pp. 4977–4983.
[4]
T. Lauterbach et al., “Sens-o-spheres – mobile, miniaturisierte sen-
sorplattform f¨ur die ortsungebundene prozessmessung in reaktions-
gef¨aßen,” 13. Dresdner Sensor-Symposium 2017, Hotel Elbﬂorenz,
Dresden, 12 2017, pp. 89 – 93.
[5]
D. Demetz, O. Zott, and A. Sutor, “Wireless and traceable sensors
for internally illuminated photoreactors,” in 2020 IEEE International
Conference on Industrial Technology (ICIT), 2020, pp. 582–586.
[6]
M. C. Domingo, “Magnetic induction for underwater wireless commu-
nication networks,” IEEE Transactions on Antennas and Propagation,
vol. 60, no. 6, June 2012, pp. 2929–2939.
[7]
U. M. Qureshi et al., “Rf path and absorption loss estimation for
underwater wireless sensor networks in different water environments,”
Sensors, vol. 16, no. 6, 2016.
[8]
X. Che, I. Wells, G. Dickers, P. Kear, and X. Gong, “Re-evaluation
of rf electromagnetic communication in underwater sensor networks,”
IEEE Communications Magazine, vol. 48, no. 12, December 2010, pp.
143–151.
[9]
Y. Li, H. Yin, X. Ji, and B. Wu, “Design and implementation of
underwater wireless optical communication system with high-speed
and full-duplex using blue/green light,” in 2018 10th International
Conference on Communication Software and Networks (ICCSN), July
2018, pp. 99–103.
[10]
J. Shi, S. Zhang, and C. Yang, “High frequency rf based non-contact
underwater communication,” in 2012 Oceans - Yeosu, May 2012, pp.
1–6.
[11]
F. H. Raab, E. B. Blood, T. O. Steiner, and H. R. Jones, “Magnetic posi-
tion and orientation tracking system,” IEEE Transactions on Aerospace
and Electronic Systems, vol. AES-15, no. 5, Sep. 1979, pp. 709–718.
22
Copyright (c) IARIA, 2020.     ISBN:  978-1-61208-819-8
SENSORCOMM 2020 : The Fourteenth International Conference on Sensor Technologies and Applications

