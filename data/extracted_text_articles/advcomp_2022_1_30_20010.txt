On the Proportional-Integral-Derivative Based
Trading Algorithm under the Condition of the
log-Normal Distribution of Stock Market Data
Vadim Azhmyakov
National Research University
Higher School of Economics
Moscow, Russian Federation
email: v.azhmyakov@hse.ru
Ilya Shirokov
Algorithmic Systems Corp
Moscow, Russian Federation
email: iyushirokov@gmail.com
Yuri Dernov
Algorithmic Systems Corp
Moscow, Russian Federation
email: dernovyua82@gmail.com
Luz Adriana Guzman Trujillo
LARIS, Universit´e d’Angers
Angers, France
email: luz.guzmantrujillo@etud.univ-angers.fr
Abstract—Our paper deals with a novel trading algorithm
based on the conventional feedback control methodology. A
profitable trading algorithm design for stock markets constitutes
a very challenging problem of the modern financial engineering.
We apply a model-free version of the classic Proportional-
Integral-Derivative (PID) control to the modern Algorithmic
Trading (AT). The proposed control theoretical application of the
classic PID methodology is combined with a specific statistical
information on the available historical stock market data. We
consider a generic condition of the log-normal distribution of the
available stock data. The log-normal property mentioned above
implies a new efficient calibration rule for the gain coefficients
(gains tuning) for the resulting PID type trading algorithm. We
finally apply the developed PID based optimal AT strategy to a
specific real-world example of the Binance Bitcoin / USD market.
This application illustrates the effectiveness of the proposed
trading algorithm.
Index
Terms—algorithmic
trading,
financial
engineering,
model-free PID control, statistical decision making.
I. INTRODUCTION
Consider an idealized stock market model in discrete time.
This trading abstraction includes some ideal assumptions,
among others, the ”no transaction costs” and ”one stock
portfolio” conditions. Moreover, one also assumes ”zero in-
terest” ”continuous trading” and some further simplifying
hypothesises. We refer to [4][14][16] for the necessary tech-
nical details. The discrete time model consideration is mainly
motivated by the real stock market dynamics as well as by the
decision making mechanism. We next introduce the trading
ticks t = 1,..., and the corresponding time-intervals of the
trading buckets [t,t + 1). Note that the development of the
efficient and robust trading algorithms for the financial markets
constitutes a sophisticated problem. Recall that one deals
with a stochastic dynamic behaviour in that case. The highly
frequent non-regular stochastic nature of the modern markets
makes it impossible any suitable forecasting of the prices of
financial instruments traded on the stock markets.
A systematic, control theory based approach to the AT was
initially developed in [5]-[8] [20]. It studies the model-free
PID trading strategy and proposes to react to the stock price
variations instead of modeling them. An interesting, frequency
domain involved extension of the above approach can be found
in [14]. Let us also refer to [4] for a novel PID related trading
algorithm with a switched structure.
Following [20], we introduce the current gain ∆g(t) and the
current investment level ∆I(t) for a time instant t. Moreover,
by g(t) and I(t) we next denote the cumulative profit and
the cumulative investment, respectively. The initial investment
level I1 is assumed to be given. Consider the nonlinear
discrete-time PID type feedback with a saturation rule:
δI(t +1) = KP(t)∆g(t)+KD(t)˙∆g(t)+
KI(t)
Z t
t−T h(τ)∆g(τ)dτ,
∆I(t +1) = χ(δI(t +1)),
for t = 1,...,
I(1) = I1.
(1)
Here KP(·), KD(·) and KI(·) are dynamic gains associated
with the proportional, integral, derivative, and second order
derivative terms of regulator (1). We put
K(·) := {KP(·), KD(·), KI(·)}.
Similar to the classic PID control (see e.g., [21]), the integral
term in (1) is defined on a given time interval [t − T,t].
The time instant T belongs to the given discrete time grid.
Moreover, h(·) in (1) is a suitable ”memory loss” function.
One can consider the generic exponentially weighted ”memory
17
Copyright (c) IARIA, 2022.     ISBN:  978-1-61208-990-4
ADVCOMP 2022 : The Sixteenth International Conference on Advanced Engineering Computing and Applications in Sciences

loss” function h(·) with h(t) = 1. The saturation function χ(·)
in 1 can be defined as follows
χ(δI) :=



δI,
if δImin ≤ |δI| ≤ δImax;
±δImax,
if |δI| > δImax;
0,
if |δI| < δImin.
(2)
where δImax and δImin are prescribed maximal and minimal
current investment levels, respectively.
Using the decision about the current investment ∆I(t + 1)
and the corresponding stock price p(ω,t +1), we next calcu-
late the current profit obtained at the time instant (t +1):
∆g(t +1) = (p(·,t +1)− p(·,t))
p(·,t)
∆I(t +1)
(3)
Note that the investment level ∆I(t + 1) in (1) constitutes a
”control input”. We next call it ”investment decision”. Note
that it is deployed at a current time instant t under the natural
unknownness of the market price p(ω,t + 1). Here, ω ∈ Ω
and Ω is a probability state space with a specific probability
measure. The stock price p : Ω×Z+ → R is assumed to be a
measurable (stochastic) function. Note that the current profit
g(t + 1) is an a posteriori value such that p(·,t + 1) in (3)
denotes a concrete realization of a stochastic price p(ω,t +1).
The block diagram of the proposed model-free PID trading
strategy is illustrated in Figure 1.
Profit / Loss
Decision
Time
Delays
Time 
Delays
Market
Fig. 1. Model-free PID based trading algorithm
The general formula for δI(t + 1) in (1) can easily be
specified in the discrete-time case:
δI(t +1) = (KP(t)+KI(t)+KD(t))∆g(t)+
(KI(t)h(t −1)−KD(t))∆g(t −1)+
KI(t)
t−2
∑
τ=t−T
h(τ)∆g(τ).
(4)
The main problem in the conventional PID control theory
as well as in the model-free version under consideration
constitutes in searching of adequate gains K(·) tuning rules
(see e.g., [19] and references therein). In the conventional
application areas of the classic model-based PID controllers
these tuning techniques are usually well established [19][21].
In the sophisticated model-free stochastic case, the design of a
suitable PID tuning scheme represents a challenging problem.
It constitutes in fact a key problem of an intelligent investment
decision.
The remainder of this paper is organized as follows: Section
2 contains a general statistical analysis of a generic stock data.
In Section 3, we apply the obtained log-normal distribution of
the available data to backtesting driven tuning (calibration) of
the PID gains. In this section, we also consider an application
of the proposed PID based trading algorithm to a specific stock
market, namely, to the Binance BTC (bitcoin) / USD futures.
Section 4 summarizes our paper.
II. STATISTICAL ANALYSIS OF THE STOCK DATA
The conceptually important PID gains tuning problem men-
tioned in Section I will be considered here from the statistical
point of view. For these aims let us examine the log-normal
hypothesis for the probability distribution of the following
”price/volume” ratio:
θ(ω,t +1) := p(ω,t +1)
v(t +1) .
The (a posteriori) statistical analysis of a wide spectrum of
stock markets has demonstrated that the distribution of the
closing prices normalized by investment volume v(t + 1),
namely the value θ(ω,t) fits well a specific log-normal law
(see [1] and references therein). Recall that v(t + 1) can be
calculated as follows:
v(t +1) := ∆I(t +1)
p(·,t) .
Note that in the trader praxis the investment volume is usually
restricted by a maximal investment volume. In the case of
PID based trading algorithm under consideration, the maximal
investment volume is a direct consequence of the bounded
structure of investment ∆I(t +1) in (1).
The log-normal probability distributions in the stock market
data have comprehensively been studied for the stock price
differences and for option prices. Let us refer to the celebrated
Black and Scholes model [12]. A full review of this subject
can be found in [13]. Additionally, the log-normal properties of
the volatility and related market values in the stock prices and
indices are also considered in [15]. In this section, we follow
[1] and analyze the (stationary) statistical law for θ(ω,t +1):
ρ(θ) =
a
√
2πσ(θ −s) exp−(0.5σ2)(ln(θ −s)− µ)2,
(5)
where µ ∈ R is a mean, σ ∈ R+ is a dispersion and s ∈ R
denotes a shifting parameter. Note that (5) is a so called
”three-parameters” {µ,σ,s} log-normal distribution (see e.g.,
[22]). The necessary parameters of the proposed log-normal
distribution ρ(θ) can be determined using the historical stock
market data. This way, we incorporate the generic backtesting
into the resulting PID based trading algorithm we develop.
As mentioned above, (5) constitutes an adequate distribution
hypothesis for the price/volume ratio θ(ω,t +1). The quality
18
Copyright (c) IARIA, 2022.     ISBN:  978-1-61208-990-4
ADVCOMP 2022 : The Sixteenth International Conference on Advanced Engineering Computing and Applications in Sciences

of this statistic hypothesis can be established by the standard
Chi-Quadrat-Test for distributions (see e.g., [22]). In this
paper, we consider the normalized value χ2/q for this purpose.
Here q is the number of degrees of freedom.
Consider now the daily market prices and investment vol-
umes data
{p(1),..., p(T)}, {v(1),...,v(T)}.
Following [24], we now assume the log-normal distribution
for the value

Fig. 3. Binance BTC / USD one day price index
Note that the operation time of the OPID in that example is
timely restricted. The stock market under consideration has an
obvious high-frequency behaviour. This fact naturally implies
some (expected) difficulties of the common trading algorithms.
In particular, this concerns the widely used moving average
based trading strategies.
As one can see, the developed OPID constitutes a High-
Frequency Trading (HFT) strategy. The time ticks in the
above trading example under consideration are very dense.
The length of the corresponding intervals of trading buckets
is equal to 1.728 sec. Let us also note that the typical ”hy-
perregulation and stabilization” dynamics of the proposed PID
based strategy is visible (see Figure 3). The presented practical
example illustrates the implementability of the developed PID
involved AT scheme.
IV. CONCLUSION AND FUTURE WORK
In this paper, we developed a combined trading algorithm
that involves the PID control methodology and some a priori
given statistical characteristics of the stock market data. We
studied an idealized market under the assumption of only
one asset. However, the proposed analytic approach and the
resulting trading methodology can easily be extended to the
real-time multi-asset trading. Moreover, it can incorporate
some additional efficient data driven optimization techniques.
The given historical stock market data and the statistical
properties mentioned above are constructively used for an
adequate calibration (tuning) of the PID controller gains. This
calibration is based on the backtesting procedure. The resulting
optimal trading strategy generates adequate (profitable) deci-
sions of the ”buy/sell/hold” market orders at every subsequent
time instant. The proposed approach to the AT involves a
combination of two mathematically rigorous tools, namely,
the classic PID control methodology and applied statistics.
It also contains a specific data driven optimization procedure.
This combination finally leads to a novel and very promisingly
trading strategy. The resulting algorithm and the corresponding
real-world scenario based simulation technique conceptually
extend the family of the feedback based trading algorithms.
Note that the developed PID based trading approach can be
used as an additional tool in the several theoretic frameworks
of the modern financial engineering. For example, it can be
applied in combination with the well established financial time
series analytics. The proposed PID based trading algorithm is
also compatible with the generic price prediction techniques
(see e.g., [17]).
Finally note that the algorithmic trading strategy proposed
in our paper constitutes an initial (conceptual) development.
We are mostly concentrated on the formal algorithmic aspects
of the proposed technique. The financial solutions for the
stock market considered in our contribution need additional
comprehensive simulations and prototyping, further backtest-
ing, adequate data driven optimization and applications to
the real markets. We also expect a profitable application of
the proposed trading methodology specifically in the High-
Frequency Trading.
REFERENCES
[1] I. Antonioua, V. V. Ivanova, V. V. Ivanovb and P. V. Zrelova,
On the log-normal distribution of stock market data, Physica
A, vol. 331, 2004, pp. 617 – 638.
[2] V. Azhmyakov, A Relaxation Based Approach to Optimal
Control of Switched Systems, Elsevier, Oxford, UK, 2019.
[3] V. Azhmyakov, J. Pereira Arango, M. Bonilla, R. Juarez del
Torro and St. Pickl, ”Robust state estimations in controlled
ARMA processes with the non-Gaussian noises: applications
to the delayed dynamics”, IFAC PapersOnline, vol. 54, 2021,
pp. 334 – 339.
[4] V. Azhmyakov, I. Shirokov and L. A. Guzman Trujillo, ”Ap-
plication of a switched PIDD control strategy to the model-free
algorithmic trading”, IFAC PapersOnline, to appear in 2022.
[5] B. R. Barmish, ”On trading of equities: a robust control
paradigm”, IFAC Proceedings Volumes, vol. 41, 2008, pp. 1621
-– 1626.
[6] B. R. Barmish and J. A. Primbs, ”On market-neutral stock
trading arbitrage via linear feedback”, in: Proceedings of the
American Control Conference, Montreal, Canada, 2012, pp.
3693 – 3698.
[7] B. R. Barmish and J. A. Primbs, ”On a new paradigm for
stock trading via a model-free feedback controller”, IEEE
Transactions on Automatic Control, vol. 61, 2016, pp. 662 -
– 676.
[8] M. H. Baumann, ”On stock trading via feedback control when
underlying stock returns are discontinuous”, IEEE Transactions
on Automatic Control, vol. 62, 2017, pp. 2987 -– 2992.
[9] A. Bemporad, T. Gabbriellini, L. Puglia and L. Bellucci,
”Scenario-based stochastic model predictive control for dy-
namic option hedging”, in: Proceedings of the IEEE Conference
on Decision and Control, Atlanta, USA, 2010, pp. 3216 -–
3221.
[10] D. Bertsekas, Reinforcement Learning and Optimal Control,
Athena Scientific, Nashua, USA, 2019.
[11] D. Bertsimas and A. W. Lo, ”Optimal control of execution
costs”, Journal of Financial Markets, vol. 1, 1998, pp. 1 -– 50.
[12] F. Black and M. Scholes, The pricing of options and corporate
liabilities, Journal of Political Economy, vol. 81, 1973, pp. 637
— 659.
[13] E. L. Crow and K. Shimizu (Eds.), Lognormal Distributions,
Theory and Applications, Marcel Dekker, Inc., New York, 1988.
[14] S. Formentin, F. Previdi, G. Maroni and C. Cantaro, ”Stock
trading via feedback control: an extremum seeking approach,
20
Copyright (c) IARIA, 2022.     ISBN:  978-1-61208-990-4
ADVCOMP 2022 : The Sixteenth International Conference on Advanced Engineering Computing and Applications in Sciences

in: Proceedings of the Mediterranean Conference on Control
and Automation, Zadar, Croatia, 2018, pp. 523 – 528.
[15] C. Hammel and W. B. Paul, Monte Carlo simulations of a
trader-based market model, Physica A, vol. 313, 2002, pp. 640
– 650.
[16] T. Hens and M. O. Rieger, Financial Economics, Springer,
Berlin, Germany, 2010.
[17] S. Huang, ”Online option price forecasting by using unscented
Kalman filters and support vector machines”, Journal of Expert
Systems with Applications, vol. 34 , 2008, pp. 2819 -– 2825.
[18] St. Jansen, Machine Learning for Algorithmic Trading, Packt,
Birmingham, UK, 2020.
[19] H. K. Khalil, Nonlinear Control, Pearson, Boston, USA, 2015.
[20] S. Malekpour, J. A. Primbs and B. R. Barmish, ”On stock
trading using a PI controller in an idealized market: the robust
positive expectation property”, in: Proceedings of the IEEE
Conference on Decision and Control, Florence, Italy, 2013, pp.
1210 – 1216.
[21] A. Poznyak, Advanced Mathematical Tools for Automatic Con-
trol Engineers: Deterministic Technique, Elsevier, NY, USA,
2008.
[22] A. Poznyak, Advanced Mathematical Tools for Automatic
Control Engineers: Stochastic Tools, Elsevier, NY, USA, 2009.
[23] S. Taylor, Modeling Financial Time Series, Wiley, Chichester,
UK, 1986.
[24] N. Vo and R. Slepaczuk, Applying hybrid ARIMA-SGARCH
in algorithmic investment strategies on S&P500 index, Entropy,
vol. 24, 2022.
21
Copyright (c) IARIA, 2022.     ISBN:  978-1-61208-990-4
ADVCOMP 2022 : The Sixteenth International Conference on Advanced Engineering Computing and Applications in Sciences

