 
Smart and Intelligent Optoelectronic Sensor Systems: 
OEM Design Approach 
Sergey Y. Yurish1, 2 
1Technology Assistance BCNA 2010, S. L. 
2International Frequency Sensor Association (IFSA) 
Barcelona, Spain 
e-mail: SYurish@sensorsportal.com 
 
Abstract—Light-to-frequency converters are widely used in 
various optoelectronic sensor systems. However, a further 
frequency-to-digital conversion is a bottleneck in such systems 
due to a broad frequency range of light-to-frequency 
converters. This paper describes an effective OEM design 
approach, which can be used for smart and intelligent sensor 
systems design. The design is based on novel, multifunctional 
integrated circuit of Universal Sensors & Transducers 
Interface especially designed for such sensor applications. 
Experimental results have confirmed an efficiency of this 
approach and high metrological performances. 
Keywords-optical sensor; smart sensor system, light-to-
frequency converter, USTI, intelligent sensor system, IEEE 1451 
I. 
 INTRODUCTION 
Optoelectronic sensors are widely used in various 
applications such as medical, automobile, environmental, 
bio-chemical, etc. Many of them are based on integrated 
light-to-frequency converters, which convert a light intensity 
to quasi-digital (frequency or duty-cycle) format for direct 
connection to a microcontroller, DSP or interfacing with a 
PC. In comparison with analog output (voltage or current), 
the frequency signal as an informative parameter of sensor’s 
output has a lot of advantages, namely: a high noise 
immunity, high reference accuracy, wide dynamic range, 
multiparametricity, simplicity of coding, multiplexing, 
interfacing and integration, etc. 
Modern light-to-frequency converters [1] have a broad 
frequency range: from part of Hz to 1.6 MHz (Table 1). 
Nevertheless a simple frequency-to-digital conversion (based 
on classical methods for frequency measurements) can be 
performed by any low-cost microcontroller, a wide dynamic 
frequency range of such converters brings as usually, many 
design problems. In order to get reasonable or high 
metrological performances of designed optical sensor 
systems, the frequency-to-digital conversion should be based 
on advanced methods for frequency measurements. Such 
methods must have  a constant quantization relative error in a 
whole broad frequency range, scalable resolution, non-
redundant conversion time and a possibility to measure 
frequency, which exceeds a reference frequency: fx > f0 in 
order to design a sensor systems with a reasonable power 
consumption. 
Existing on the modern sensor market digital light 
sensors with embedded ADCs as usually have a slow 
conversion time, for example, the embedded 16-bit ADC of 
light sensor from Intersil (ISL29015) has the integration time 
45-90 ms [2]; the ADC from Maxim MAX9635 has the 
conversion time 97-107 ms [3]. Such sensors can be used for 
proximity or ambient light applications, but it can not be 
used for light sensing applications, in which a conversion 
speed is a critical parameter. 
TABLE I.  
LIGHT-TO-FREQUENCY CONVERTERS’ 
PERFORMANCES 
Performances 
Sensor 
(LFC) 
Output Frequency 
Range 
Spectral 
Response, nm 
Non-linear 
FS Error, % 
TAOS (USA) 
TSL230 
0.4 Hz … 1.1 MHz 
350…1000 
0.2 
TSL235 
0.4 Hz … 500 kHz 
350…1000 
0.2 
TSL237 
2 Hz … 600 kHz 
350…1000 
1 
TSL245 
0.4 Hz … 500 kHz 
850…1000 
0.2 
Hamamatsu (Japan) 
S9705 
0 Hz … 1 MHz 
300…1000 
3 
Melexis (Belgium) 
MLX75304 
1 Hz … 1.6 MHz 
500…1000 
N/a 
N/a – not available. 
The main aim of these research and development was to 
propose a universal design solution for all existing light-to-
frequency converters in order to eliminate all mentioned 
above design problems, and introduce intelligent and smart 
features for various sensor systems, which can be realized in 
different technologies: hybrid, standard CMOS technology, 
System-on-Chip (SoC) or/and System-in-Package (SiP). 
This paper is divided into four main parts. The first part 
describes a design approach for various optical sensor 
systems based on a light-to-frequency converter (LFC) and 
Universal Sensors and Transducers Interface circuit (USTI). 
The description includes the system design in term of OEM 
hardware and software. The second part devotes to 
experimental investigation of designed optoelectronic sensor 
system prototype based on the light-to-frequency converter 
S9705 from Hamamatsu [4]. The third part includes an 
experimental 
determination 
of 
main 
metrological 
performances of designed sensor system. The last part of the 
paper provides conclusions and future research directions. 
38
SENSORDEVICES 2011 : The Second International Conference on Sensor Device Technologies and Applications
Copyright (c) IARIA, 2011.     ISBN: 978-1-61208-145-8

 
II. 
SMART SENSOR SYSTEM DESIGN 
A. Universal Sensors and Transducers Interface 
The proposed solution is based on the developed by the 
author USTI integrated circuit. In comparison with the 
developed earlier and introduced on the modern market in 
2004 and 2007 Series of Universal Frequency-to-Digital 
Converters UFDC-1 and UFDC-1M-16 respectively [5, 6] 
this new IC has extended frequency range up to 9 MHz 
without prescaling and 144 MHz with prescaling, reduced 
relative error up to 0.0005 %, increased functionality and 
decreased conversion time. It is based on the patented 
modified method of the dependent count for quick and 
precision measurement of frequency and period of electrical 
signals [7]. This 2-channel IC has three popular serial 
interfaces: RS232, I2C and SPI, which are widely used in 
various sensor systems. It contains of three main blocks: 
measuring unit, communication unit and time-to-digital 
converter (TDC). Only one external component – a 20 MHz 
quartz crystal oscillator should be used as a reference. The 
measuring unit releases 2-channel measurements of various 
frequency-time parameters of electrical signals with 
programmable relative error form 1 % to 0.0005 %: 
frequency, period, duty-cycle, phase shift, time intervals, 
duty-off factor, pulse number, frequency (period) deviation, 
frequencies or periods ratios and differences, etc. The 
communication unit supports three popular serial interfaces, 
such as RS232 (master and slave communication modes with 
programmable baud rate), SPI and I2C (slave communication 
mode). The TDC is used in parameter-to-digital converter for 
a direct interfacing of capacitive, resistive and bridge sensing 
elements to USTI. 
The USTI can work in RS232 master communication 
mode. In this mode, neither microcontroller nor PC or DAQ 
system are necessary to control this IC. It will continuously 
generate measuring results on its output.   
B. Sensing Element 
The S9705 is a CMOS photo IC combining a current-to-
frequency converter and photodiode and outputs an 
oscillating frequency (duty ratio 50 %) proportional to input 
light intensity incident in the photodiode [4]. 
The CMOS level digital output allows direct connection 
to the USTI. The sensing element has a wide dynamic range, 
spectral response (see Table 1), and light intensity can be 
easy measured by the USTI. The light-to-frequency 
converter S9705 and USTI are shown in Figure 1, and circuit 
diagram of optoelectronic sensor system example based on 
these components is shown in Figure 2. 
 
 
 
Figure 1.  USTI (1), and light-to-digital converter S9705 (2). 
Other optical sensors, for example, colour sensor 
TCS230 from TAOS (USA) [1] or reflective colour sensor 
OPB780 from OPTEK Technology [8] can also be interfaced 
by the same manner. Two frequency output sensors can be 
connected to the USTI at the same time. 
 
 
Figure 2.  Circuit diagram of optoelectronic sensor system. 
A software example for the RS232 interfacing slave 
connection mode for two optical sensors (light sensor S9705 
and colour sensor OPB780) is shown in Figure 3. 
 
>A02 
;Set the relative error 0.25 % 
>M00 
;Set up a frequency measurement mode in the 1
st channel 
>S 
;Start a frequency measurement (light sensor) 
>C 
;Check the measurement status (‘r’-ready, ‘b’ -in progress 
>R 
;Read a result of frequency measurement in Hz 
>462987.345 
 
>M0E 
;Set  up a frequency measurement mode in the 2
nd channel  
>S 
;Start a frequency measurement (colour sensor) 
>C 
;Check the measurement status (‘r’ -ready, ‘b’-in progress  
>R 
;Read a result of frequency measurement in Hz 
>37005.0119 
Figure 3.  Commands for RS232 communication mode at light  
and colour measurements by the USTI. 
The command ‘A02’ sets the relative error for frequency-
to-digital conversion [9] and should be use only once.  The 
relative error must be in ten times less (or at the least, in 5 
times less) than the sensor’s error in order to be neglected. 
Appropriate command ‘M’ sets the frequency measurement 
mode in the 1st and 2nd channels. The command ‘S’ starts 
measurement in appropriate channel. The command ‘C’ 
checks the measurements status and returns the value ‘b’ if 
the measurement in progress or the value ‘r’ if the measuring 
results is ready. The last command ‘R’ reads results.  The use 
of ‘C’ command is very important at low frequencies 
measurements. In opposite side, there is a risk to get a 
previous result instead of the new one. 
Any terminal software can be used with the USTI in 
RS232 slave communication mode (for example, Terminal 
V1.9b Window [10]). The following options should be 
selected for this software: appropriate number of serial port, 
baud rate – 2400; data bits – 8; Parity – none; Stop Bits – 1; 
Handshaking- none. For data acquisition, the LabView 
software or similar can be easily used. 
1 
2 
39
SENSORDEVICES 2011 : The Second International Conference on Sensor Device Technologies and Applications
Copyright (c) IARIA, 2011.     ISBN: 978-1-61208-145-8

 
C. Conversion Time 
The conversion rate of USTI is determined by the method 
of frequency measurement [7] and can be calculated 
according the following equation: 
 
 
,
625
)
(0
625
625
1











x
x
conv
x
x
conv
T
kHz
N
if
T
kHz
N
t
T
kHz
N
if
f
t




 
(1) 
 
where N =1/ is the number proportional to the required 
programmable relative error ; Tx=1/fx is the period of 
converted frequency, f0=625 kHz is the internal reference 
frequency of USTI. 
A measurement time Tmeas for the USTI includes three 
main components: conversion rate (tconv), communication 
(tcomm) time and calculations (tcalc) time: 
 
 
calc
comm
conv
meas
t
t
t
T



 
(2) 
 
All these components can be calculated by the same way 
as was described in [6]. For example, the communication 
time for a slave communication mode (RS232 interface) can 
be calculated according to the following equation: 
 
 
bit
comm
n t
t

 10
, 
(3) 
 
where tbit is the time for one bit transmitting; n is the number 
of bytes (n=13…24 for ASCII format). 
The communication time for SPI interface should be 
calculated as: 
 
 
SCLK
comm
f
n
t
1
8



, 
(4) 
 
where fSCLK is the serial clock frequency, which should be 
chosen for the USTI in the range from 100 to  
500 kHz; n=12…13 is the number of bytes. The number n is 
dependent on measurement result format: BCD (n=13) or 
binary (n=12). The communication standard mode’s speed 
for the I2C interface can be determined according to the 
same equation (4), where instead of fSCLK the serial clock 
frequency fSC should be used, which equals to 100 kHz for 
the USTI; n=12…13 is the number of bytes for 
measurement result: BCD (n=13) or binary (n=12). 
The calculation time depends on operands and is as 
usually tcalc  3.6 ms. 
Due to non-redundant conversion time for the modified 
method of the dependent count [7] it is possible to obtain the 
conversion time, less than in digital output optical sensors 
mentioned above. The same is also true for the design 
approach, when analog light sensor (with voltage output), 
voltage-to-frequency converter and USTI are used to build a 
sensor system. The conversion time can be decreased in 3-10 
times in comparison with existing standard integrated digital 
sensors, mentioned above [2, 3]. 
D. Intelligent Features 
One of the intelligent functions of modern sensor system 
is so-called self-identification. The USTI can contain a 
Transducer Electronic Data Sheet (TEDS) according to the 
IEEE 1451 standard in its memory. A possible TEDS for 
optical sensor system is shown in Table 2. This TEDS must 
also contain a value of programmable relative error for the 
frequency-to-digital conversion (USTI relative error).  
TABLE II.  
TEDS  FOR  OPTICAL FREQUENCY OUTPUT SENSOR 
TEDS Structure 
Example of Light-to-Frequency Converters 
Manufacturer ID 
19 
Model ID 
9705 
Version letter 
S 
Basic TEDS 
Serial number 
00639F 
Calibration date 
21 September 2010 
Spectral Response 
300-1000 nm 
Frequency output minimal 
0.1 Hz 
Frequency output maximal 
1 MHz 
Linearity 
3 % 
Standard and 
Extended TEDS 
(fields will vary 
according to 
transducer type) 
USTI’s relative error 
0.25 % 
Sensor location 
A18-2 
User Area 
Calibration due date 
21 September 2011 
 
The USTI supports three functions of smart transducers: high 
accurate frequency (time)-to-digital conversion, TEDS 
storage in the flash memory and communications. 
III. 
EXPERIMENTAL RESULTS 
The aim of experimental investigation was to determine 
main metrological performances of the designed optical 
sensor system based on the light-to-frequency converter 
S9705 (Hamamatsu, Japan) and USTI IC. The measuring 
set-up is shown in Figure 4. 
 
 
 
Figure 4.  Measuring set-up. 
40
SENSORDEVICES 2011 : The Second International Conference on Sensor Device Technologies and Applications
Copyright (c) IARIA, 2011.     ISBN: 978-1-61208-145-8

 
Preliminarily, the USTI has been calibrated at laboratory 
temperature range (+25.3 0C to +26.4 0C) in order to 
eliminate additional systematic error due to quartz oscillator 
trimming inaccuracy (calibration tolerance) and a short term 
temperature instability [11]. The USTI has been connected to 
a PC, where terminal software Terminal v1.9b was running. 
The light-to-frequency converter S9705 has mounted on 
a LED evaluation board together with a white light diode, the 
light intensity of which was set-up with the help of current 
source 
(Promax 
FAC 
363B) 
and 
changing 
by 
a 
potentiometer with 25 A step. The current through this 
diode was measuring by an amperemeter (Figure 4). 
The circuit diagram and photo of the LED evaluation 
board are shown in Figures 5 and 6 respectively. 
 
 
 
Figure 5.  Circuit diagram of LED evaluation board. 
 
 
Figure 6.  LED evaluation board. 
The output of LFC was directly connected to the USCI. 
The frequency counter Agilent 53132A was used for 
frequency measurements in parallel with the USTI, and 
digital oscilloscope - for wave form visualization at LFC’s 
output/USTI input. The frequency measurements have made 
for minimal and maximal possible frequencies of LED 
evaluation board: 5 Hz and 462 kHz respectively for both 
cases: without and with Schmidt trigger (74HC14D). 
Oscillograms of investigated sensor’s output signals are 
shown in Figures 7-12. 
 
Figure 7.  Oscillograms of maximal frequency signal ( 463 Hz). 
 
 
Figure 8.  Oscillograms of minimal frequency signal ( 5 Hz). 
 
 
Figure 9.  Oscillograms at USTI input for frequency signal 463 Hz: 
without Schmidt trigger (a) and with Schmidt trigger (b). 
a) 
b) 
41
SENSORDEVICES 2011 : The Second International Conference on Sensor Device Technologies and Applications
Copyright (c) IARIA, 2011.     ISBN: 978-1-61208-145-8

 
 
Figure 10.  Oscillograms at USTI input for frequency signal 5 Hz: without 
Schmidt trigger (a) and with Schmidt trigger (b). 
 
 
Figure 11.  Front of 463 Hz input pulse signal: without Schmidt trigger, rise 
time 110 ns (a) and with Schmidt trigger, rise time 24 ns (b). 
 
 
Figure 12.  Front of 5 Hz input pulse signal: without Schmidt trigger, rise 
time 80 s (a), and with Schmidt trigger, rise time 70.7 s (b). 
The dependence of LFC’s output frequency on current 
through the white light diode on the LED evaluation board is 
shown in Figure 13. 
 
0
50000
100000
150000
200000
250000
300000
350000
400000
450000
500000
6,5
50,3
101
151
200
250
301
351
401
i, uA
f out, Hz
 
Figure 13.  Output frequency vs. current through a white light diode. 
Each of investigated frequencies where measured 60 
times and classical statistics was used for results processing. 
Measuring results for maximal and minimal frequencies for 
both: without and with Schmidt trigger are shown in 
Figure 14 and 15. 
 
460000
460500
461000
461500
462000
462500
463000
463500
464000
464500
1
4
7
10
13
16
19
22
25
28
31
34
37
40
43
46
49
52
N
Hz
 
Figure 14.  Measuring results for maximal frequency  463 Hz: with 
Schmidt trigger (1), without Schmidt trigger (2). 
4,7
4,8
4,9
5
5,1
5,2
5,3
5,4
5,5
5,6
5,7
1
4
7
10 13 16 19 22 25 28 31 34 37 40 43 46 49 52 55 58
N
f min, Hz
 
Figure 15.  Measuring results for minimal frequency  5 Hz: with Schmidt 
trigger (1) and without Schmidt trigger (2). 
a) 
b) 
a) 
b) 
a) 
b) 
1 
2 
2 
1 
42
SENSORDEVICES 2011 : The Second International Conference on Sensor Device Technologies and Applications
Copyright (c) IARIA, 2011.     ISBN: 978-1-61208-145-8

 
The 2 test for goodness of fit test was applied to 
investigate the significance of the differences between 
observed data in the histograms and the theoretical frequency 
distribution for data from the Gaussian distribution law. 
The number of equidistant classes was calculated 
according to the following equation: 
 
 
k = 1.9  N0.4, 
(5) 
 
where N is the number of measurements. 
At probability P = 97 %, and 6 equidistant classes k=6, 
the hypothesis of Gaussian distribution law can be accepted 
for 
all 
sets 
of 
measurement 
data. 
The 
statistical 
characteristics are adduced in Table 3 and 4. 
TABLE III.  
STATISTICAL CHARACTERISTICS  
(AT 463 KHZ FREQUENCY MEASUREMENT) 
463 kHz 
Parameter 
Without Schmidt 
trigger 
With Schmidt 
trigger 
Number of 
measurements, N 
53 
60 
Minimum fx (min) 
461653.265 
464151.555 
Maximum fx (max) 
463991.336 
0.0062 
Sampling Range,  
fx (max) - fx (min) 
2338.0705 
1354.2603 
Arithmetic Mean 
462788.685 
463572.681 
Variance 
234229.738 
6.6E-0009 
Standard Deviation 
483.9729 
283.4972 
Coefficient of 
Variation 
956.2286 
1635.1932 
Confidence interval 
for arithmetic mean  
at P=97 % 
462644.42< fx < 
462932.95 
463493.257 < fx < 
463652.105 
Relative error, % 
0.014 
0.16 
2 – test  (S) at: k=6;  
P = 97 % 2 
max = 8.9 
1.7272 
2.5423 
Hypothesis about 
Gaussian distribution 
Accepted 
Accepted 
 
As it is shown from the tables, the Schmidt trigger does 
not increased accuracy of frequency-to-digital conversion. 
IV. 
CONCLUSIONS 
The proposed design approach for optoelectronic sensor 
systems based on the USTI IC gives a unique opportunity to 
create various OEM sensor systems with high metrological 
performances including intelligent feature such as self-
identification. Taking into account, that many semiconductor 
sensors and the USTI IC are made according to CMOS 
standard technological processes, different sensor systems 
and digital sensors can be realized in various existing 
technologies: hybrid, system-in-chip and system-in-package. 
Since 2011 the USTI is available on the modern market 
from Technology Assistance BCNA 2010 S. L., Spain [12]. 
ACKNOWLEDGMENT 
This research and development was funded by the 
European Commission in the frame of Marie Curie Chairs 
Excellence (EXC) project MEXT-CT-2005-023991 Smart 
Sensors Systems Design (SMARTSES) and supported by 
International Frequency Sensor Association (IFSA). 
TABLE IV.  
STATISTICAL CHARACTERISTICS  
(AT 5 HZ FREQUENCY MEASUREMENT) 
5 Hz 
Parameter 
Without Schmidt 
trigger 
With Schmidt 
trigger 
Number of 
measurements, N 
60 
60 
Minimum fx (min) 
5.2014 
5.041 
Maximum fx (max) 
5.6466 
5.4959 
Sampling Range,  
fx (max) - fx (min) 
0.4452 
0.454 
Arithmetic Mean 
5.3899 
5.236 
Variance 
0.0109 
0.1071 
Standard Deviation 
0.1045 
0.0001 
Coefficient of 
Variation 
51.577 
48.907 
Confidence interval 
for arithmetic mean  
at P=97 % 
5.3606 < fx < 5.4192 
5.206 < fx < 5.266 
Relative error, % 
0.54 
0.57 
2 – test  (S) at: k=6;  
P = 97 % 2 
max = 8.9 
6.6726 
1.8498 
Hypothesis about 
Gaussian distribution 
Accepted 
Accepted 
REFERENCES 
[1] List of Optical Sensors Manufacturers at Sensors Web Portal: 
http://www.sensorsportal.com/HTMLL/SENSORS/OptoSens
_Manufacturers.htm 
[2] Integrated Digital Ambient Light Sensor and Proximity 
Sensor ISL29015, Datasheet, Intersil, 2008. 
[3] Industry’s Lowest-Power Ambient Light Sensor with ADC, 
MAX9635, Maxim, 2010. 
[4] Light-to-frequency Converter Photo IC S9705, Hamamatsu, 
2007. 
[5] S. Y. Yurish, N. V. Kirianaki and R. Pallas-Areny, “Universal 
Frequency-to-Digital Converter for Quasi-digital and Smart 
Sensors: Specifications and Applications”, Sensor Review, 
vol. 25, No.2, April 2005, pp.92-99. 
[6] S.Y.Yurish, “High-Speed Universal Frequency-to-Digital 
Converter for Quasi-Digital Sensors and Transducers”, 
Sensors & Transducers, vol. 80, issue 6, June 2007,  
pp. 1225-1229. 
[7] S.Y. Yurish, “Novel Modified Method of the Dependent 
Count for High Precision and Fast Measure-ments of 
Frequency-Time Parameters of Electric Signals”, Proc. of 
2008 IEEE International Instru-mentation & Measurement 
Technology Conference - I2MTC, Victoria, Vancouver Island, 
British Co-lumbia, Canada, 12-15 May 2008, pp. 876-881. 
[8] Reflective Colour Sensor Assembly OPB780Z, Optec 
Technology, Inc., USA, 2009. 
[9] Universal Sensors and Transducers Interface (USTI). 
Specification and Application Note, Technology Assistance 
BCNA, 2010, S.L., Spain, 2011. 
[10] Terminal V1.9b software for Windows:         
http://www.sensorsportal.com/DOWNLOADS/Terminal.exe 
[11] S. Y. Yurish, “Advanced automated calibration technique for 
Universal Sensors and Transducers Interface IC”,  Proc. IEEE 
International Instrumentation and Measurement Technology 
Conference (I²MTC 2009), May  2009, pp.402-405. 
[12] http://www.techassist2010.com/
 
43
SENSORDEVICES 2011 : The Second International Conference on Sensor Device Technologies and Applications
Copyright (c) IARIA, 2011.     ISBN: 978-1-61208-145-8

